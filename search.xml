<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>553-JDK11&amp;12 æ–°ç‰¹æ€§è§£è¯»</title>
      <link href="/imooc/553-jdk11&amp;12/"/>
      <url>/imooc/553-jdk11&amp;12/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/553" target="_blank" rel="noopener">https://www.imooc.com/learn/553</a></p><p>ç®€ä»‹ï¼šJava è¯­è¨€å¦‚ä»Šå·²è¢«å¹¿æ³›åº”ç”¨åˆ°ç§‘æŠ€è¡Œä¸šçš„å„ä¸ªé¢†åŸŸï¼Œæˆä¸ºå½“å‰æœ€çƒ­é—¨çš„è®¡ç®—æœºè¯­è¨€ä¹‹ä¸€ã€‚Java è¯­è¨€ç‰ˆæœ¬æ›´æ–°é€Ÿåº¦å¾ˆå¿«ï¼Œæ¯ä¸ªæ–°ç‰ˆæœ¬éƒ½èƒ½æˆ–å¤šæˆ–å°‘çš„å½±å“å½“å‰çš„å¼€å‘æ¨¡å¼ã€‚å­¦ä¹  Java æ–°ç‰ˆæœ¬çš„ç‰¹æ€§ï¼Œèƒ½å¤Ÿæ›´åŠ æ¸…æ™°çš„äº†è§£ Java æœªæ¥çš„å‘å±•æ–¹å‘ï¼Œä»¥åŠæ¢³ç†ç¼–ç¨‹çš„æ€æƒ³ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>æœ¬ç« å°†ä»‹ç»è¯¾ç¨‹çš„æ•´ä½“å†…å®¹ã€è¯¾ç¨‹å®‰æ’ä»¥åŠJDK ä¸ OpenJDK çš„å…³ç³»ã€‚</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»-04-02"><a href="#1-1-è¯¾ç¨‹ä»‹ç»-04-02" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç» (04:02)"></a>1-1 è¯¾ç¨‹ä»‹ç» (04:02)</h3><ul><li><p>OpenJDKä¸JDKçš„åŒºåˆ«</p><p>é€šå¸¸æ‰€è¯´çš„JDKæ˜¯æŒ‡SUNæˆ–è€…Oracle JDKï¼Œå•†ä¸šå®ç°ã€‚å¼€æºåªç”¨äºç ”ç©¶ä½¿ç”¨</p><p>OpenJDKæ˜¯æŒ‡å¼€æºé¡¹ç›®ï¼Œè½¯ä»¶æºå®‰è£…çš„éƒ½æ˜¯OpenJDK</p></li><li><p>å¤šç‰ˆæœ¬JDKçš„å®‰è£…å’Œé…ç½®</p></li><li><p>JDK11æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º</p></li><li><p>JDK12æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º</p></li></ul><h3 id="1-2-OpenJDK-ä¸-JDK-çš„åŒºåˆ«-x264-04-47"><a href="#1-2-OpenJDK-ä¸-JDK-çš„åŒºåˆ«-x264-04-47" class="headerlink" title="1-2 OpenJDK ä¸ JDK çš„åŒºåˆ«_x264 (04:47)"></a>1-2 OpenJDK ä¸ JDK çš„åŒºåˆ«_x264 (04:47)</h3><ul><li><p>OpenJDKä¸JDKä¹‹é—´çš„å…³ç³»</p><p>OpenJDKæ˜¯JDKçš„å¼€æ”¾æºä»£ç ç‰ˆæœ¬</p></li><li><p>OpenJDKä¸JDKä¹‹é—´çš„åŒºåˆ«</p><p><strong>æˆæƒåè®®ä¸åŒ</strong>ã€OpenJDKä¸åŒ…å«éƒ¨ç½²åŠŸèƒ½ã€OpenJDKæºä»£ç ä¸å®Œæ•´</p><p>éƒ¨åˆ†æºä»£ç ä½¿ç”¨å¼€æºä»£ç æ›¿æ¢ã€OpenJDKåªåŒ…å«æœ€ç²¾ç®€çš„JDKã€ä¸èƒ½ä½¿ç”¨Javaå•†æ ‡</p></li></ul><h3 id="1-3-åˆè¯†-JDK11-å’Œ-JDK12-çš„æ–°ç‰¹æ€§-x264-03-21"><a href="#1-3-åˆè¯†-JDK11-å’Œ-JDK12-çš„æ–°ç‰¹æ€§-x264-03-21" class="headerlink" title="1-3 åˆè¯† JDK11 å’Œ JDK12 çš„æ–°ç‰¹æ€§_x264 (03:21)"></a>1-3 åˆè¯† JDK11 å’Œ JDK12 çš„æ–°ç‰¹æ€§_x264 (03:21)</h3><ul><li><p>ä»€ä¹ˆæ˜¯JEPï¼ˆJava Enhancement Proposalsï¼‰</p></li><li><p>JEPå‘å¸ƒåœ°å€</p><p>JDK11ï¼š<a href="http://openjdk.java.net/projects/jdk/11/" target="_blank" rel="noopener">http://openjdk.java.net/projects/jdk/11/</a></p><p>JDK12ï¼š<a href="http://openjdk.java.net/projects/jdk/12/" target="_blank" rel="noopener">http://openjdk.java.net/projects/jdk/12/</a></p></li><li><p>JDK11é‡è¦çš„æ–°ç‰¹æ€§</p><p>JEP181:åŸºäºåµŒå¥—çš„è®¿é—®æ§åˆ¶ã€JEP309:åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡ã€JEP315:æ”¹è¿›Aarch64å†…éƒ¨å‡½æ•°</p><p>JEP321:æ ‡å‡†HTTPå®¢æˆ·ç«¯ã€JEP323:æœ¬åœ°å˜é‡Lambdaè¯­æ³•ã€JEP327:Unicode10</p><p>JEP330:å¯åŠ¨å•æ–‡ä»¶æºä»£ç ç¨‹åºã€JEP333:å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨</p></li><li><p>JDK11å…¶ä»–æ–°ç‰¹æ€§</p><p>JEP318:æ— æ“ä½œåƒåœ¾æ”¶é›†å™¨ã€JEP320:ç§»é™¤JavaEEå’ŒCORBAæ¨¡å—ã€JEP324:Curve25519å’Œ448ç®—æ³•çš„å¯†é’¥åè®®</p><p>JEP328:Flight Recorderã€JEP329:ChaCha20å’ŒPoly1305åŠ å¯†ç®—æ³•ã€JEP331:ä½å¼€é”€çš„Heap Profiling</p><p>JEP332:æ”¯æŒTLS1.3ã€JEP335:å¼ƒç”¨Nashorn JavaScriptå¼•æ“ã€JEP336:å¼ƒç”¨Pack200å·¥å…·å’ŒAPI</p></li><li><p>JDK12é‡è¦çš„æ–°ç‰¹æ€§</p><p>JEP230:å¾®åŸºå‡†æµ‹è¯•ã€JEP325:å¢å¼ºçš„switchè¯­å¥ã€JEP341:é»˜è®¤çš„ç±»æ•°æ®å…±äº«</p><p>JEP344:å¯ä¸­æ­¢çš„G1åƒåœ¾æ”¶é›†å™¨ã€JEP346:G1å½’è¿˜æœªä½¿ç”¨çš„å†…å­˜</p></li><li><p>JDK12å…¶ä»–æ–°ç‰¹æ€§</p><p>JEP189:ä½æš‚åœçš„åƒåœ¾æ”¶é›†å™¨-Shenandoahã€JEP334:JVMå¸¸é‡APIã€JEP340:ä¿ç•™Aarch64ç«¯å£</p></li></ul><h2 id="ç¬¬2ç« -å¤šç‰ˆæœ¬-JDK-çš„å®‰è£…å’Œé…ç½®"><a href="#ç¬¬2ç« -å¤šç‰ˆæœ¬-JDK-çš„å®‰è£…å’Œé…ç½®" class="headerlink" title="ç¬¬2ç«  å¤šç‰ˆæœ¬ JDK çš„å®‰è£…å’Œé…ç½®"></a>ç¬¬2ç«  å¤šç‰ˆæœ¬ JDK çš„å®‰è£…å’Œé…ç½®</h2><blockquote><p>æœ¬ç« å°†ä»‹ç» JDK11ã€12 çš„ä¸‹è½½å’Œå®‰è£…ï¼Œä»¥åŠå¤šç‰ˆæœ¬ JDK åœ¨ä¸€å°æœºå™¨ä¸Šçš„é…ç½®ï¼Œåšåˆ°æ–¹ä¾¿åˆ‡æ¢ JDK ç‰ˆæœ¬ã€‚å‹æƒ…æç¤ºï¼šå®‰è£…å’Œé…ç½®è¿‡ç¨‹é¢å‘ Linux å’Œ Mac OSï¼ŒWindows ç³»ç»Ÿå¯ä»¥å‚è€ƒä¸‹è½½èµ„æ–™ä¸­çš„ç›¸å…³æ–‡æ¡£ã€‚</p></blockquote><h3 id="2-1-å®‰è£…-JDK11-å’Œ-JDK12-x264-06-47"><a href="#2-1-å®‰è£…-JDK11-å’Œ-JDK12-x264-06-47" class="headerlink" title="2-1 å®‰è£… JDK11 å’Œ JDK12_x264 (06:47)"></a>2-1 å®‰è£… JDK11 å’Œ JDK12_x264 (06:47)</h3><ul><li><p>ä¸‹è½½å®‰è£…æ–‡ä»¶ï¼š<a href="http://jdk.java.net/archive/" target="_blank" rel="noopener">http://jdk.java.net/archive/</a></p><pre><code class="shell">wget https://download.java.net/java/GA/jdk11/9/GPL/openjdk-11.0.2_osx-x64_bin.tar.gzwget https://download.java.net/java/GA/jdk12.0.2/e482c34c86bd4bf8b56c0b35558996b9/10/GPL/openjdk-12.0.2_osx-x64_bin.tar.gz</code></pre><p>æ³¨ï¼šç›´æ¥ä½¿ç”¨JDK14å­¦ä¹ æœ¬è¯¾ç¨‹ï¼ŒJDK8ä¸ºé»˜è®¤çš„å¼€å‘ç¯å¢ƒã€‚</p></li><li><p>é…ç½®ç¯å¢ƒå˜é‡ï¼šJAVA_HONEå’ŒPATH</p><pre><code class="java">vim ~/.bash_profile</code></pre><pre><code class="shell">export JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk1.8.0_221.jdk/Contents/Home&quot;export PATH=$PATH:$JAVA_HOME/bin</code></pre></li><li><p>é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼šsourceå‘½ä»¤</p><pre><code class="shell">source ~/.bash_profile</code></pre></li><li><p>æŸ¥çœ‹JDKç‰ˆæœ¬ä¿¡æ¯ï¼šjava -version</p></li></ul><h3 id="2-2-é…ç½®å¤šç‰ˆæœ¬-JDK-x264-06-40"><a href="#2-2-é…ç½®å¤šç‰ˆæœ¬-JDK-x264-06-40" class="headerlink" title="2-2 é…ç½®å¤šç‰ˆæœ¬ JDK_x264 (06:40)"></a>2-2 é…ç½®å¤šç‰ˆæœ¬ JDK_x264 (06:40)</h3><ul><li><p>è®¾ç½®å¤šç‰ˆæœ¬ç¯å¢ƒå˜é‡ï¼šJAVA_8_HOMEã€JAVA_11_HOMEã€JAVA_12_HOME</p><pre><code class="shell">export JAVA_8_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk1.8.0_221.jdk/Contents/Home&quot;export JAVA_14_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk-14.0.1.jdk/Contents/Home&quot;</code></pre></li><li><p>é…ç½®é»˜è®¤ç¯å¢ƒå˜é‡ï¼šJAVA_HOME</p><pre><code class="shell">export JAVA_HOME=$JAVA_8_HOMEexport PATH=$PATH:$JAVA_HOME/bin</code></pre></li><li><p>è®¾ç½®å‘½ä»¤åˆ«åï¼ŒåŠ¨æ€åˆ‡æ¢JDKç‰ˆæœ¬ï¼šalias</p><pre><code class="shell">alias jdk8=&quot;export JAVA_HOME=$JAVA_8_HOME&quot;alias jdk14=&quot;export JAVA_HOME=$JAVA_14_HOME&quot;</code></pre></li><li><p>æŸ¥çœ‹JDKç‰ˆæœ¬ä¿¡æ¯ï¼šjava -version</p></li></ul><h2 id="ç¬¬3ç« -JDK11-æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º"><a href="#ç¬¬3ç« -JDK11-æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º" class="headerlink" title="ç¬¬3ç«  JDK11 æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º"></a>ç¬¬3ç«  JDK11 æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º</h2><blockquote><p>æœ¬ç« ä¸­å°†ä»‹ç» JDK11 ä¸­çš„æ–°ç‰¹æ€§ï¼Œéƒ¨åˆ†æ ¸å¿ƒç‰¹æ€§ä¼šç»“åˆä»£ç æ¼”ç¤ºæ“ä½œï¼Œå¸®åŠ©åŒå­¦ä»¬æ›´å¥½çš„ç†è§£ã€‚</p></blockquote><h3 id="3-1-åŸºäºåµŒå¥—çš„è®¿é—®æ§åˆ¶-11-31"><a href="#3-1-åŸºäºåµŒå¥—çš„è®¿é—®æ§åˆ¶-11-31" class="headerlink" title="3-1 åŸºäºåµŒå¥—çš„è®¿é—®æ§åˆ¶ (11:31)"></a>3-1 åŸºäºåµŒå¥—çš„è®¿é—®æ§åˆ¶ (11:31)</h3><blockquote><p>JEP181:åŸºäºåµŒå¥—çš„è®¿é—®æ§åˆ¶</p></blockquote><p>æ‘˜è¦ï¼šåœ¨privateã€publicã€protectedçš„åŸºç¡€ä¸Šï¼ŒJVMåˆæä¾›äº†ä¸€ç§æ–°çš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼šNest</p><p>ç›®æ ‡ï¼šå¦‚æœåœ¨ä¸€ä¸ªç±»ä¸­åµŒå¥—äº†å¤šä¸ªå­ç±»ï¼Œé‚£ä¹ˆå­ç±»ä¸­å¯ä»¥è®¿é—®å½¼æ­¤çš„ç§æœ‰æˆå‘˜</p><p>ä»£ç å®ä¾‹ï¼š</p><pre><code class="java">public class NestAccessExample {    private static class X {        void test() throws Exception {            Y y = new Y();            y.y = 1; // åŸºäºåµŒå¥—çš„è®¿é—®æ§åˆ¶            Field field = Y.class.getDeclaredField(&quot;y&quot;);            field.setInt(y, 2);        }    }    private static class Y {        private int y;    }    public static void main(String[] args) throws Exception {        new X().test();    }}</code></pre><p>JDK8æŠ¥é”™ï¼šException in thread â€œmainâ€ java.lang.IllegalAccessException: Class com.tuyrk.jdk11.NestAccessExample â€œX can not access a member of class com.tuyrk.jdk11.NestAccessExampleâ€Y with modifiers â€œprivateâ€</p><p>æ³¨ï¼šJDK11ä¹‹å‰åˆ™éœ€è®¾ç½®<code>field.setAccessible(true);</code>ã€‚JDK11çš„åå°„åˆ™å¯ä»¥è®¿é—®æºç çº§åˆ«çš„ç§æœ‰å±æ€§ã€‚</p><h3 id="3-2-åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡-09-11"><a href="#3-2-åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡-09-11" class="headerlink" title="3-2 åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡ (09:11)"></a>3-2 åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡ (09:11)</h3><blockquote><p>JEP309:åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡</p></blockquote><p>æ‘˜è¦ï¼šå¢åŠ ä¸€ä¸ªå¸¸é‡ç±»å‹-CONSTANT_Dynamic</p><p>ç›®æ ‡ï¼šé™ä½å¼€å‘æ–°å½¢å¼çš„å¯å®ç°ç±»æ–‡ä»¶çº¦æŸå¸¦æ¥çš„æˆæœ¬å’Œå¹²æ‰°</p><p>ä»£ç å®ä¾‹ï¼š</p><pre><code class="java">public class DynamicTest {    private static void test() {        System.out.println(&quot;hello&quot;);    }    public static void main(String[] args) throws Throwable {        MethodHandles.Lookup lookup = MethodHandles.lookup();        MethodHandle mh = lookup.findStatic(DynamicTest.class, &quot;test&quot;, MethodType.methodType(void.class));        mh.invokeExact();    }}</code></pre><h3 id="3-3-æ”¹è¿›-Aarch64-å‡½æ•°-06-50"><a href="#3-3-æ”¹è¿›-Aarch64-å‡½æ•°-06-50" class="headerlink" title="3-3 æ”¹è¿› Aarch64 å‡½æ•° (06:50)"></a>3-3 æ”¹è¿› Aarch64 å‡½æ•° (06:50)</h3><blockquote><p>JEP315:æ”¹è¿›Aarch64å†…è”å‡½æ•°</p></blockquote><p>æ‘˜è¦ï¼šæ”¹è¿›ç°æœ‰çš„å­—ç¬¦ä¸²å’Œæ•°ç»„å‡½æ•°ï¼Œå¹¶åœ¨Aarch64å¤„ç†å™¨ä¸Šä¸ºjava.lang.Math sinã€cosã€logå‡½æ•°å®ç°æ–°çš„å†…è”å‡½æ•°</p><p>ç›®æ ‡ï¼šä¸“ç”¨çš„CPUæ¶æ„å¯æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½</p><p>ä»£ç å®ä¾‹ï¼š</p><pre><code class="java">private static void mathOnJdk11() {  long startTime = System.currentTimeMillis();  for (int i = 0; i &lt; 10_000_000; i++) {    Math.sin(i);    Math.cos(i);    Math.log(i);  }  long endTime = System.currentTimeMillis();  System.out.println(TimeUnit.NANOSECONDS.toNanos(endTime - startTime) + &quot;nanos&quot;);}</code></pre><p>JDK8ï¼š7201nanos</p><p>JDK11ï¼š761nanos</p><h3 id="3-4-æ ‡å‡†-HTTP-å®¢æˆ·ç«¯-11-47"><a href="#3-4-æ ‡å‡†-HTTP-å®¢æˆ·ç«¯-11-47" class="headerlink" title="3-4 æ ‡å‡† HTTP å®¢æˆ·ç«¯ (11:47)"></a>3-4 æ ‡å‡† HTTP å®¢æˆ·ç«¯ (11:47)</h3><blockquote><p>JEP321:æ ‡å‡†HTTPå®¢æˆ·ç«¯</p></blockquote><p>æ‘˜è¦ï¼šåœ¨JDK9ä¸­å°±å·²ç»å¼•å…¥äº†HTTPClientï¼Œä¸è¿‡ä¸€ç›´å¤„äºå­µåŒ–çŠ¶æ€ï¼Œåˆ°äº†JDK11ï¼ŒHTTPClient APIç»“æŸäº†å­µåŒ–çŠ¶æ€ï¼Œä½œä¸ºä¸€ä¸ªæ ‡å‡†APIæä¾›åœ¨java.net.httpåŒ…ä¸­ã€‚</p><p>ç›®æ ‡ï¼šå–ä»£HttpURLConnection</p><p>ç¼ºç‚¹ï¼š</p><ol><li>HttpURLConnectionåœ¨è®¾è®¡æ—¶è€ƒè™‘å¤šç§åè®®ï¼Œä½†å¦‚ä»Šåè®®éƒ½ä¸å­˜åœ¨äº†</li><li>æ—©äºHTTP1.1ï¼Œå¤ªæŠ½è±¡ã€‚</li><li>ä½¿ç”¨ä¸å‹å¥½ï¼Œæä¾›çš„APIä¸ç¬¦åˆå¸¸ç”¨çš„ç¼–ç¨‹æ€æƒ³</li><li>åªèƒ½ä»¥é˜»å¡æ¨¡å¼å·¥ä½œï¼Œä¸¥é‡é—®é¢˜ã€‚</li><li>éš¾ç»´æŠ¤ï¼Œä½¿ç”¨è¶…çº§å°‘ã€‚ å¤šç”¨Apache HTTPClient</li></ol><p>ä»£ç å®ä¾‹ï¼š</p><ol><li><p>åŒæ­¥Getæ–¹æ³•</p><pre><code class="java">private static void syncGet(String uri) throws Exception {  HttpClient client = HttpClient.newHttpClient();  HttpRequest request = HttpRequest.newBuilder().uri(URI.create(uri)).build();  HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());  System.out.println(response.statusCode());  System.out.println(response.body());}</code></pre></li><li><p>å¼‚æ­¥Getæ–¹æ³•</p><pre><code class="java">private static void asyncGet(String uri) throws Exception {  HttpClient client = HttpClient.newHttpClient();  HttpRequest request = HttpRequest.newBuilder().uri(URI.create(uri)).build();  CompletableFuture&lt;HttpResponse&lt;String&gt;&gt; future = client.sendAsync(request, HttpResponse.BodyHandlers.ofString());  future.whenComplete((response, e) -&gt; {    if (e != null) {      e.printStackTrace();    } else {      System.out.println(response.statusCode());      System.out.println(response.body());    }  }).join();}</code></pre></li></ol><h3 id="3-5-Lambda-å‚æ•°çš„æœ¬åœ°å˜é‡è¯­æ³•-18-14"><a href="#3-5-Lambda-å‚æ•°çš„æœ¬åœ°å˜é‡è¯­æ³•-18-14" class="headerlink" title="3-5 Lambda å‚æ•°çš„æœ¬åœ°å˜é‡è¯­æ³• (18:14)"></a>3-5 Lambda å‚æ•°çš„æœ¬åœ°å˜é‡è¯­æ³• (18:14)</h3><blockquote><p>JEP323:Lambdaå‚æ•°çš„æœ¬åœ°å˜é‡è¯­æ³•</p></blockquote><p>æ‘˜è¦ï¼šå…è®¸varåœ¨å£°æ˜éšå¼ç±»å‹çš„lambdaè¡¨è¾¾å¼çš„å½¢å¼å‚æ•°æ—¶ä½¿ç”¨</p><p>ç›®æ ‡ï¼šå°†éšå¼ç±»å‹çš„lambdaè¡¨è¾¾å¼ä¸­çš„å½¢å¼å‚æ•°å£°æ˜çš„è¯­æ³•ä¸å±€éƒ¨å˜é‡å£°æ˜çš„è¯­æ³•å¯¹é½</p><p>ä»£ç å®ä¾‹ï¼š</p><ol><li><p>Java8ç‰¹æ€§ï¼šlambdaè¡¨è¾¾å¼è¯­æ³•</p><pre><code class="java">private static void lambdaInJava8() {  // å‚æ•°åˆ—è¡¨ï¼Œ-&gt;ï¼Œå‡½æ•°ä½“  new Thread(new Runnable() {    @Override    public void run() {      System.out.println(&quot;before java8&quot;);    }  }).start();  new Thread(() -&gt; System.out.println(&quot;in java8&quot;)).start();  List&lt;String&gt; list = Arrays.asList(&quot;java8&quot;, &quot;jdk8&quot;, &quot;1.8&quot;);  list.forEach(w -&gt; {    System.out.println(&quot;lambda in java8: &quot; + w);  });}</code></pre></li><li><p>Java10æ–°ç‰¹æ€§ï¼Œå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­</p><blockquote><p>JDK10å…è®¸ä½¿ç”¨varå…³é”®å­—æ¥å®šä¹‰å˜é‡ï¼švar i=10</p><ul><li><p>å¿…é¡»åˆå§‹åŒ–ï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™</p></li><li><p>ä¸€æ—¦åˆå§‹åŒ–å®Œæˆè¿‡åç±»å‹å°±ä¼šç¡®å®šï¼Œä¸èƒ½å†èµ‹äºˆå…¶ä»–ç±»å‹çš„å€¼</p><p>å³iä¸èƒ½èµ‹å€¼ä¸ºâ€œabcâ€æˆ–è€…2.0ç­‰éintç±»å‹çš„å€¼ï¼‰</p></li></ul></blockquote><pre><code class="java">private static void varInJava10() {  int var = 10;  var i = 10; // int  var str = &quot;java10&quot;; // String  var list = new ArrayList&lt;String&gt;(); // ArrayList&lt;String&gt;  var map = Map.of(1, &quot;a&quot;, 2, &quot;b&quot;); // Map&lt;Integer, String&gt;  for (var entry : map.entrySet()) {    System.out.println(entry);  }  // i = &quot;abc&quot;; // å’ŒJavaScriptä¸­çš„varä¸åŒï¼Œä¸èƒ½èµ‹å€¼å…¶ä»–ç±»å‹  // var a; // å¿…é¡»åˆå§‹åŒ–èµ‹å€¼}class ErrorUseVar {  // JDK10åªèƒ½å…è®¸åœ¨å±€éƒ¨å˜é‡ä¸­ä½¿ç”¨var  // var i = 10;  /*var f1(var str) {    return 10;  }*/}</code></pre></li><li><p>Java11æ–°ç‰¹æ€§ï¼šLambdaè¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨varæ¥æ ‡è¯†å˜é‡</p><pre><code class="java">private static void lambdaWithVarInJava11() {  List&lt;Integer&gt; nums = Arrays.asList(8, 7, 9);  nums.sort((@NotNull Integer s1, @NotNull Integer s2) -&gt; {    if (s1.equals(s2)) {      return 0;    }    return s1 &gt; s2 ? 1 : -1;  });  // å¯ä»¥ç»™lambdaè¡¨è¾¾å¼æ·»åŠ æ³¨è§£  nums.sort((@NotNull var s1, @NotNull var s2) -&gt; {    if (s1.equals(s2)) {      return 0;    }    return s1 &gt; s2 ? 1 : -1;  });  nums.sort((s1, s2) -&gt; {    if (s1.equals(s2)) {      return 0;    }    return s1 &gt; s2 ? 1 : -1;  });  System.out.println(nums);}</code></pre><pre><code class="java">(var x, y) -&gt; x.process(y)         // Cannot mix &#39;var&#39; and &#39;no var&#39; in implicitly typed lambda expression(var x, int y) -&gt; x.process(y)     // Cannot mix &#39;var&#39; and manifest types in explicitly typed lambda expression</code></pre><pre><code class="java">// var x -&gt; x.foo() // error</code></pre></li></ol><h3 id="3-6-Unicode-10-03-13"><a href="#3-6-Unicode-10-03-13" class="headerlink" title="3-6 Unicode 10 (03:13)"></a>3-6 Unicode 10 (03:13)</h3><blockquote><p>JEP327:Unicode10</p></blockquote><p>æ‘˜è¦ï¼šå‡çº§ç°æœ‰çš„å¹³å°APIï¼Œæ”¯æŒ<a href="https://www.unicode.org/versions/Unicode10.0.0/" target="_blank" rel="noopener">Unicode10æ ‡å‡†</a></p><p>ç›®æ ‡ï¼šæ”¯æŒæœ€æ–°ç‰ˆæœ¬çš„Unicodeï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ç±»ä¸­ï¼š</p><blockquote><p>java.langåŒ…ï¼šCharacterã€String</p><p>java.awt.fontåŒ…ï¼šNumericShaper</p><p>java.textåŒ…ï¼šBidiã€BreakIteratorã€Normalizer</p></blockquote><p>ä»£ç å®ä¾‹ï¼š</p><pre><code class="java">System.out.println(&quot;\uD83E\uDDDA&quot;); // ğŸ§šSystem.out.println(&quot;\uD83E\uDD92&quot;); // ğŸ¦’System.out.println(&quot;\uD83E\uDD95&quot;); // ğŸ¦•System.out.println(&quot;\uD83E\uDDD9&quot;); // ğŸ§™System.out.println(&quot;\uD83E\uDDDB&quot;); // ğŸ§›System.out.println(&quot;\uD83E\uDD2E&quot;); // ğŸ¤®</code></pre><h3 id="3-7-å¯åŠ¨å•æ–‡ä»¶æºä»£ç ç¨‹åº-04-01"><a href="#3-7-å¯åŠ¨å•æ–‡ä»¶æºä»£ç ç¨‹åº-04-01" class="headerlink" title="3-7 å¯åŠ¨å•æ–‡ä»¶æºä»£ç ç¨‹åº (04:01)"></a>3-7 å¯åŠ¨å•æ–‡ä»¶æºä»£ç ç¨‹åº (04:01)</h3><blockquote><p>JEP330:å¯åŠ¨å•æ–‡ä»¶æºä»£ç ç¨‹åº</p></blockquote><p>æ‘˜è¦ï¼šå¢å¼ºJavaå¯åŠ¨ç¨‹åºä»¥è¿è¡Œä½œä¸ºå•ä¸ªJavaæºä»£ç æ–‡ä»¶æä¾›çš„ç¨‹åº</p><p>ç›®æ ‡ï¼šä½¿ç”¨java HelloWorld.javaè¿è¡Œæºä»£ç æ–‡ä»¶</p><p>ä»£ç å®ä¾‹ï¼š</p><pre><code class="shell">cd src/main/java/com/tuyrk/jdk11java Unicode10Example.java</code></pre><h3 id="3-8-å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆä¸Šï¼‰-09-28"><a href="#3-8-å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆä¸Šï¼‰-09-28" class="headerlink" title="3-8 å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆä¸Šï¼‰ (09:28)"></a>3-8 å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆä¸Šï¼‰ (09:28)</h3><blockquote><p>JEP333:å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨</p></blockquote><p>æ‘˜è¦ï¼šZåƒåœ¾æ”¶é›†å™¨ï¼Œä¹Ÿç§°ä¸ºZGCï¼Œæ˜¯ä¸€ä¸ªå¯ä¼¸ç¼©ä½å»¶è¿Ÿçš„åƒåœ¾æ”¶é›†å™¨</p><p>ç›®æ ‡ï¼šï¼ˆæœ€æ ¸å¿ƒï¼‰æ— è®ºå¼€äº†å¤šå¤§çš„å †å†…å­˜ï¼ˆ128Gã€2Tï¼‰ï¼Œä¿è¯ä½äº10msçš„JVMåœé¡¿ï¼Œè¿œèƒœäºå‰ä¸€ä»£çš„G1</p><p>éœ€è¦çŸ¥é“çš„çŸ¥è¯†ç‚¹ï¼šåƒåœ¾å›æ”¶ã€åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯åƒåœ¾çš„ç®—æ³•ã€å›æ”¶åƒåœ¾å¯¹è±¡å†…å­˜çš„ç®—æ³•ã€åƒåœ¾æ”¶é›†å™¨</p><h4 id="åƒåœ¾å›æ”¶"><a href="#åƒåœ¾å›æ”¶" class="headerlink" title="åƒåœ¾å›æ”¶"></a>åƒåœ¾å›æ”¶</h4><ul><li><p>ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶</p><p>åƒåœ¾å›æ”¶æ˜¯Javaè™šæ‹Ÿæœºåƒåœ¾å›æ”¶å™¨æä¾›çš„ä¸€ç§ç”¨äºåœ¨ç©ºé—²æ—¶é—´ã€ä¸å®šæ—¶å›æ”¶æ— ä»»ä½•å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡å æ®çš„å†…å­˜ç©ºé—´çš„æœºåˆ¶</p></li><li><p>é’ˆå¯¹åƒåœ¾å›æ”¶çš„å®šä¹‰æå‡ºçš„ä¸€äº›æ€è€ƒä¸é—®é¢˜</p><p>å¼•ç”¨ï¼šå¼•ç”¨ç±»å‹çš„æ•°å€¼ä»£è¡¨çš„æ˜¯å¦ä¸€å—å†…å­˜çš„èµ·å§‹åœ°å€</p><p>åƒåœ¾ï¼šæ— ä»»ä½•å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡</p><p>å›æ”¶ï¼šæ¸…ç†åƒåœ¾å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œè€Œéå¯¹è±¡æœ¬èº«</p><p>å‘ç”Ÿåœ°ç‚¹ï¼šä¸€èˆ¬ä¸ºå †å†…å­˜ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„å¯¹è±¡éƒ½å­˜å‚¨åœ¨å †å†…å­˜ä¸­</p><p>å‘ç”Ÿæ—¶é—´ï¼šç¨‹åºç©ºé—´æ—¶é—´ä¸å®šæ—¶å›æ”¶</p></li></ul><h4 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯åƒåœ¾çš„ç®—æ³•"><a href="#åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯åƒåœ¾çš„ç®—æ³•" class="headerlink" title="åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯åƒåœ¾çš„ç®—æ³•"></a>åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯åƒåœ¾çš„ç®—æ³•</h4><blockquote><p>åƒåœ¾å›æ”¶ç®—æ³•ä¸¤ä»¶å¿…é¡»åšçš„åŸºæœ¬å·¥ä½œï¼š</p><ol><li>æ‰¾åˆ°æ‰€æœ‰çš„å­˜æ´»å¯¹è±¡</li><li>å›æ”¶è¢«æ— ç”¨å¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œä½¿å¾—è¯¥ç©ºé—´å¯è¢«ç¨‹åºå†æ¬¡ä½¿ç”¨</li></ol></blockquote><ul><li><p><del>å¼•ç”¨è®¡æ•°æ³•</del></p><p>æ¦‚å¿µï¼šå †ä¸­æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºå¹¶åˆå§‹åŒ–èµ‹å€¼åï¼Œè¯¥å˜é‡è®¡æ•°å™¨è®¾ç½®ä¸º1ã€‚æ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹å¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å°±åŠ 1ã€‚å½“å¼•ç”¨å¤±æ•ˆæ—¶(è¶…è¿‡ç”Ÿå‘½å‘¨æœŸã€è¢«æ–°å€¼è¦†ç›–)ï¼Œè®¡æ•°å™¨å°±å‡1ã€‚ä»»ä½•å¼•ç”¨è®¡æ•°ä¸º0çš„å¯¹è±¡éƒ½å¯ä»¥è¢«å½“åšåƒåœ¾æ”¶é›†ã€‚</p><p>ä¼˜ç‚¹ï¼šå¼•ç”¨è®¡æ•°æ”¶é›†å™¨æ‰§è¡Œç®€å•ï¼Œåˆ¤å®šæ•ˆç‡é«˜ï¼Œäº¤ç»‡åœ¨ç¨‹åºè¿è¡Œä¸­ã€‚å¯¹ç¨‹åºä¸è¢«é•¿æ—¶é—´æ‰“æ–­çš„å®æ—¶ç¯å¢ƒæ¯”è¾ƒæœ‰åˆ©ï¼ˆOCçš„å†…å­˜ç®¡ç†ä½¿ç”¨è¯¥ç®—æ³•ï¼‰</p><p>ç¼ºç‚¹ï¼šéš¾ä»¥æ£€æµ‹å‡ºå¯¹è±¡ä¹‹é—´çš„å¾ªç¯å¼•ç”¨ã€‚åŒæ—¶ï¼Œå¼•ç”¨è®¡æ•°å™¨å¢åŠ äº†ç¨‹åºæ‰§è¡Œçš„å¼€é”€ã€‚æ‰€ä»¥Javaè¯­è¨€å¹¶æ²¡æœ‰é€‰æ‹©è¿™ç§ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p></li><li><p>æ ¹æœç´¢ç®—æ³•ã€å¯¹è±¡å¼•ç”¨éå†</p><p>æ ‡è®°å¯è¾¾å¯¹è±¡ï¼šJVMä¸­ç”¨åˆ°çš„æ‰€æœ‰ç°ä»£GCç®—æ³•åœ¨å›æ”¶å‰éƒ½ä¼šå…ˆæ‰¾å‡ºæ‰€æœ‰ä»å­˜æ´»çš„å¯¹è±¡ã€‚æ ¹æœç´¢ç®—æ³•æ˜¯ä»ç¦»æ•£æ•°å­¦ä¸­çš„å›¾è®ºå¼•å…¥çš„ï¼Œç¨‹åºæŠŠæ‰€æœ‰çš„å¼•ç”¨å…³ç³»çœ‹åšä¸€å¼ å›¾ã€‚ä¸‹å›¾æ‰€å±•ç¤ºçš„JVMä¸­çš„å†…å­˜å¸ƒå±€å¯ä»¥ç”¨æ¥å¾ˆå¥½åœ°é˜é‡Šè¿™ä¸€æ¦‚å¿µã€‚</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge1r4ituq8j30ev05e40u.jpg" alt="æ ¹æœç´¢ç®—æ³•" style="zoom:80%;" /><p>æ ¹é›†ï¼ˆROOT Setï¼‰ï¼šæ­£åœ¨æ‰§è¡Œçš„Javaç¨‹åºå¯ä»¥è®¿é—®çš„å¼•ç”¨å˜é‡çš„é›†åˆï¼ŒåŒ…æ‹¬ï¼šå±€éƒ¨å˜é‡ã€å‚æ•°ã€ç±»å˜é‡ã€‚</p><p>GCæ ¹å¯¹è±¡ï¼šè™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ã€æ–¹æ³•ä¸­ç±»,é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ã€æ´»è·ƒçš„çº¿ç¨‹ç­‰</p><p>ç¨‹åºå¯ä»¥ä½¿ç”¨å¼•ç”¨å˜é‡è®¿é—®å¯¹è±¡çš„å±æ€§å’Œè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</p><p>ç®—æ³•åŸºæœ¬æ€è·¯ï¼š</p><ol><li>é€šè¿‡GC ROOTSå¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œå¯»æ‰¾å¯¹åº”çš„å¼•ç”¨èŠ‚ç‚¹</li><li>æ‰¾åˆ°å¼•ç”¨èŠ‚ç‚¹åï¼Œä»è¿™äº›å¼•ç”¨èŠ‚ç‚¹å¼€å§‹å‘ä¸‹ç»§ç»­å¯»æ‰¾å¼•ç”¨èŠ‚ç‚¹</li><li>æœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ï¼Œç§°ä¸ºå¼•ç”¨é“¾</li><li>å½“ä¸€ä¸ªå¯¹è±¡åˆ°GC ROOTSæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ—¶å°±è¯æ˜å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„</li></ol></li></ul><h4 id="å›æ”¶åƒåœ¾å¯¹è±¡å†…å­˜çš„ç®—æ³•"><a href="#å›æ”¶åƒåœ¾å¯¹è±¡å†…å­˜çš„ç®—æ³•" class="headerlink" title="å›æ”¶åƒåœ¾å¯¹è±¡å†…å­˜çš„ç®—æ³•"></a>å›æ”¶åƒåœ¾å¯¹è±¡å†…å­˜çš„ç®—æ³•</h4><ul><li><p>Tracingç®—æ³•(Tracing Collector)æˆ–æ ‡è®°-æ¸…é™¤ç®—æ³•</p><p>ä¸¤ä¸ªé˜¶æ®µï¼šæ ‡è®°ã€æ¸…é™¤ã€‚</p><p>é¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œæ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡</p><p>æ ‡è®°è¿‡ç¨‹ï¼šä¹Ÿå³æ ¹æœç´¢ç®—æ³•çš„åˆ¤å®šåƒåœ¾æ”¶é›†çš„æ ‡è®°è¿‡ç¨‹</p><p>ä¼˜ç‚¹ï¼šä¸éœ€è¦è¿›è¡Œå¯¹è±¡çš„ç§»åŠ¨ï¼›ä»…å¯¹ä¸å­˜æ´»çš„å¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œåœ¨å­˜æ´»å¯¹è±¡æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹æ˜¯æä¸ºé«˜æ•ˆçš„</p><p>ç¼ºç‚¹ï¼š</p><ol><li>æ ‡è®°å’Œæ¸…é™¤çš„æ•ˆç‡ä½ï¼›éœ€è¦ä½¿ç”¨ç©ºé—²åˆ—è¡¨è®°å½•æ‰€æœ‰çš„ç©ºé—²åŒºåŸŸä»¥åŠå¤§å°ï¼Œå¯¹ç©ºé—²åˆ—è¡¨çš„ç®¡ç†ä¼šå¢åŠ åˆ†é…å¯¹è±¡æ—¶çš„å·¥ä½œé‡ã€‚</li><li>æ ‡è®°-æ¸…é™¤åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œè™½ç„¶ç©ºé—²åŒºåŸŸçš„å¤§å°æ˜¯è¶³å¤Ÿçš„ï¼Œä½†æ˜¯å¯èƒ½æ²¡æœ‰å•ä¸€çš„åŒºåŸŸèƒ½å¤Ÿæ»¡è¶³åˆ†é…æ‰€éœ€çš„å¤§å°ï¼Œä¾¿ä¼šåˆ†é…å¤±è´¥å¹¶æŠ›å‡ºOOMå¼‚å¸¸ã€‚</li></ol><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge1rn0etemj30my085aco.jpg" alt="æ ‡è®°-æ¸…é™¤ç®—æ³•" style="zoom:80%;" /></li><li><p>Compactingç®—æ³•(Compacting Collector)æˆ–æ ‡è®°-æ•´ç†ç®—æ³•</p><p>è¯¥æ–¹æ³•ä¸æ˜¯ç›´æ¥å¯¹å¯å›æ”¶å¯¹è±¡è¿›è¡Œæ¸…ç†ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åæ¸…ç†æ‰è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚å¢åŠ å¥æŸ„å’Œå¥æŸ„è¡¨å®ç°ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ol><li>åœ¨æ•´ç†ä¹‹åï¼Œæ–°å¯¹è±¡çš„åˆ†é…åªéœ€é€šè¿‡æŒ‡é’ˆç¢°æ’ä¾¿å¯å®Œæˆ</li><li>ç©ºé—²åŒºåŸŸçš„ä½ç½®æ˜¯å¯çŸ¥çš„ï¼Œä¹Ÿæ²¡æœ‰å†…å­˜ç¢ç‰‡é—®é¢˜</li></ol><p>ç¼ºç‚¹ï¼šGCæš‚åœçš„æ—¶é—´ä¼šå¢é•¿ï¼Œå› ä¸ºéœ€è¦å°†æ‰€æœ‰çš„å¯¹è±¡æ‹·è´åˆ°æ–°çš„å†…å­˜ï¼Œè¿˜è¦æ›´æ–°å¼•ç”¨åœ°å€</p></li></ul>  <img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge1rnhwpdgj30lv08jdi9.jpg" alt="æ ‡è®°-æ•´ç†ç®—æ³•" style="zoom:80%;" /><h3 id="3-9-å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆä¸‹ï¼‰-07-48"><a href="#3-9-å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆä¸‹ï¼‰-07-48" class="headerlink" title="3-9 å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆä¸‹ï¼‰ (07:48)"></a>3-9 å¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆä¸‹ï¼‰ (07:48)</h3><h4 id="åƒåœ¾æ”¶é›†å™¨"><a href="#åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨"></a>åƒåœ¾æ”¶é›†å™¨</h4><ul><li><p>ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨ï¼ˆSerial Garbage Collectorï¼‰</p><blockquote><p>é€šè¿‡æŒæœ‰å¹¶å†»ç»“æ‰€æœ‰åº”ç”¨ç¨‹åºçš„çº¿ç¨‹è¿›è¡Œå·¥ä½œã€‚</p><p>ä¸é€‚åˆæœåŠ¡å™¨ç¯å¢ƒï¼›é€‚åˆç®€å•çš„å‘½ä»¤è¡Œç¨‹åºã€å•CPUã€æ–°ç”Ÿä»£å†…å­˜è¾ƒå°ã€æš‚åœæ—¶é—´è¦æ±‚ä½çš„ç¨‹åº</p></blockquote><p>è¯´æ˜ï¼šå®ƒä¸ºå•çº¿ç¨‹ç¯å¢ƒè®¾è®¡ï¼Œåªä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹è¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ˜¯clientçº§åˆ«é»˜è®¤çš„GCæ–¹æ³•</p><p>ä½¿ç”¨ï¼šé€šè¿‡JVMå‚æ•°<code>-XX:+UseSerialGC</code>å¯ä»¥ä½¿ç”¨ä¸²è¡Œåƒåœ¾å›æ”¶å™¨</p></li><li><p>å¹¶è¡Œåƒåœ¾å›æ”¶å™¨ï¼ˆParallel Garbage Collectorï¼‰</p><blockquote><p>å½“æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¹Ÿä¼šå†»ç»“æ‰€æœ‰çš„åº”ç”¨ç¨‹åºçº¿ç¨‹</p><p>é€‚ç”¨äºå¤šCPUã€æš‚åœæ—¶é—´è¾ƒçŸ­çš„ç¨‹åº</p></blockquote><p>è¯´æ˜ï¼šå®ƒæ˜¯JVMçš„é»˜è®¤åƒåœ¾å›æ”¶å™¨ã€‚ä½¿ç”¨å¤šçº¿ç¨‹è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p><p>ä½¿ç”¨ï¼šå¯ç”¨<code>-XX:UseParallelGC</code>æ¥å¼ºåˆ¶æŒ‡å®šï¼Œç”¨<code>-XX:ParallelGCThreads=4</code>æ¥åˆ¶å®šçº¿ç¨‹æ•°</p></li><li><p>å¹¶å‘æ ‡è®°æ‰«æåƒåœ¾å›æ”¶å™¨ï¼ˆCMS Garbage Collectorï¼‰</p><blockquote><p>ç›¸æ¯”å¹¶è¡Œåƒåœ¾å›æ”¶å™¨ï¼Œå¹¶å‘æ ‡è®°æ‰«æåƒåœ¾å›æ”¶å™¨ä½¿ç”¨æ›´å¤šçš„CPUæ¥ç¡®ä¿ç¨‹åºçš„ååé‡ã€‚å¦‚æœå¯ä»¥ä¸ºäº†æ›´å¥½çš„ç¨‹åºæ€§èƒ½è€Œåˆ†é…æ›´å¤šçš„CPUï¼Œé‚£ä¹ˆç›¸æ¯”å¹¶å‘åƒåœ¾å›æ”¶å™¨ï¼Œå¹¶å‘æ ‡è®°æ‰«æåƒåœ¾å›æ”¶å™¨æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p></blockquote><p>è¯´æ˜ï¼šå¹¶å‘æ ‡è®°åƒåœ¾å›æ”¶ä½¿ç”¨å¤šçº¿ç¨‹æ‰«æå †å†…å­˜ï¼Œæ ‡è®°éœ€è¦æ¸…ç†çš„å®ä¾‹å¹¶ä¸”æ¸…ç†è¢«æ ‡è®°çš„å®ä¾‹ã€‚å¹¶å‘æ ‡è®°åƒåœ¾å›æ”¶å™¨åªä¼šåœ¨ä¸‹é¢ä¸¤ç§æƒ…å†µæŒæœ‰åº”ç”¨ç¨‹åºæ‰€æœ‰çº¿ç¨‹ï¼š</p><ol><li><p>å½“æ ‡è®°çš„å¼•ç”¨å¯¹è±¡åœ¨tenuredåŒºåŸŸ</p></li><li><p>åœ¨è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œå †å†…å­˜çš„æ•°æ®å‘ç”Ÿæ”¹å˜</p><p>ä½¿ç”¨ï¼šé€šè¿‡JVMå‚æ•°<code>XX:+USeParNewGC</code>æ‰“å¼€å¹¶å‘æ ‡è®°æ‰«æåƒåœ¾å›æ”¶å™¨</p></li></ol></li><li><p>G1åƒåœ¾å›æ”¶å™¨ï¼ˆG1 Garbage Collectorï¼‰</p><blockquote><p>G1åƒåœ¾å›æ”¶å™¨é€‚ç”¨äºå †å†…å­˜å¾ˆå¤§çš„æƒ…å†µï¼Œå®ƒå°†å †å†…å­˜åˆ†å‰²ä¸ºä¸åŒçš„åŒºåŸŸï¼Œå¹¶ä¸”å¹¶å‘çš„å¯¹å…¶è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ä¹Ÿå¯ä»¥åœ¨åƒåœ¾å›æ”¶ä¹‹åï¼Œå¯¹å‰©ä½™çš„å †å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©</p></blockquote><p>è¯´æ˜ï¼šG1åƒåœ¾å›æ”¶å™¨æ˜¯å½“ä»Šå›æ”¶å™¨æŠ€æœ¯å‘å±•æœ€å‰æ²¿çš„æˆæœï¼Œå®ƒæ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„å›æ”¶å™¨ï¼Œå®ƒèƒ½å……åˆ†åˆ©ç”¨å¤šCPUã€å¤šæ ¸ç¯å¢ƒã€‚å› æ­¤å®ƒæ˜¯ä¸€æ¬¾å¹¶è¡Œä¸å¹¶å‘å›æ”¶å™¨ï¼Œå¹¶ä¸”å®ƒèƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹</p><p>ä½¿ç”¨ï¼šé€šè¿‡JVMå‚æ•°<code>-XX:+UseG1GC</code>ä½¿ç”¨G1åƒåœ¾å›æ”¶å™¨</p></li><li><p>ZGCçš„ç‰¹æ€§</p><p>æ‰€æœ‰é˜¶æ®µå‡ ä¹éƒ½æ˜¯å¹¶å‘æ‰§è¡Œçš„</p><p>åƒG1ä¸€æ ·åˆ’åˆ†Regionï¼Œä½†æ›´åŠ çµæ´»</p><p>åƒG1ä¸€æ ·ä¼šåšCompactingå‹ç¼©</p><p>å•ä»£</p></li><li><p>ZGCçš„å·¥ä½œè¿‡ç¨‹</p><ol><li><p>åˆå§‹åœé¡¿æ ‡è®°ï¼šPause Mark Start</p><p>åœé¡¿JVMï¼Œæ ‡è®°ROOTå¯¹è±¡ï¼Œ1,2,4ä¸‰ä¸ªå¯¹è±¡è¢«æ ‡è®°ä¸ºlive</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge1txzytlbj30k505mgnb.jpg" alt="åˆå§‹åœé¡¿æ ‡è®°" style="zoom:70%;" /></li><li><p>å¹¶å‘æ ‡è®°ï¼šConcurrent Mark</p><p>å¹¶å‘åœ°é€’å½’æ ‡è®°å…¶ä»–å¯¹è±¡ï¼Œ5å’Œ8ä¹Ÿè¢«æ ‡è®°ä¸ºlive</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge1tyg7fgwj30ho05375p.jpg" alt="å¹¶å‘æ ‡è®°" style="zoom:80%;" /></li><li><p>ç§»åŠ¨å¯¹è±¡ï¼šRelocate</p><p>å¯¹æ¯”å‘ç°3,6,7æ˜¯è¿‡æœŸå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸­é—´çš„ä¸¤ä¸ªç°è‰²regionéœ€è¦è¢«å‹ç¼©æ¸…ç†ï¼Œæ‰€ä»¥é™†ç»­å°†4,5,8å¯¹è±¡ç§»åŠ¨åˆ°æœ€å³è¾¹çš„æ–°Regionã€‚ç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸ªforward tableè®°å½•è¿™ç§è½¬å‘ã€‚</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge1tytb7hdj30hu06hdho.jpg" alt="ç§»åŠ¨å¯¹è±¡" style="zoom:80%;" /></li><li><p>ä¿®æ­£æŒ‡é’ˆï¼šRemap</p><p>æœ€åå°†æŒ‡é’ˆæ›´æ–°ï¼ŒæŒ‡å‘æ–°åœ°å€ã€‚ä¸Šä¸€ä¸ªé˜¶æ®µçš„Remapï¼Œå’Œä¸‹ä¸€ä¸ªé˜¶æ®µçš„Markæ˜¯æ··æ­åœ¨ä¸€èµ·å®Œæˆçš„ï¼Œè¿™æ ·éå¸¸é«˜æ•ˆï¼Œçœæ‰äº†é‡å¤éå†å¯¹è±¡å›¾çš„å¼€é”€</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge1tz8qz9pj30ia06g40c.jpg" alt="ä¿®æ­£æŒ‡é’ˆ" style="zoom:80%;" /></li></ol><p><a href="https://www.jianshu.com/p/2957b001645d" target="_blank" rel="noopener">CMSã€G1ã€ZGCçš„å †å†…å­˜å®ç°åŒºåˆ«</a></p></li></ul><h3 id="3-10-JDK11-ä¸­æ–°å¢åŠ çš„å¸¸ç”¨-API-18-45"><a href="#3-10-JDK11-ä¸­æ–°å¢åŠ çš„å¸¸ç”¨-API-18-45" class="headerlink" title="3-10 JDK11 ä¸­æ–°å¢åŠ çš„å¸¸ç”¨ API (18:45)"></a>3-10 JDK11 ä¸­æ–°å¢åŠ çš„å¸¸ç”¨ API (18:45)</h3><p>java.lang.String</p><pre><code class="java">strip() // åˆ é™¤é¦–å°¾ç©ºç™½ç¬¦ï¼ˆåŒ…å«ä¸­æ–‡ç©ºç™½ç¬¦ï¼‰stripLeading()stripTrailing()isBlank() // æ˜¯å¦ä¸ºç©ºæˆ–ä»…åŒ…å«ç©ºç™½ç¬¦ï¼ˆåŒ…å«ä¸­æ–‡ç©ºç™½ç¬¦ï¼‰lines()repeat(int count) // é‡å¤å­—ç¬¦ä¸²</code></pre><p>java.nio.file.Files</p><pre><code class="java">writeString(Path path, CharSequence csq) // å‘æ–‡ä»¶å†™å…¥å†…å®¹readString(Path path) // è¯»å–æ–‡ä»¶å†…å®¹</code></pre><p>java.util.List</p><pre><code class="java">List.of() // è·å–é›†åˆï¼Œä¸å¯å˜list.toArray(String[]::new) // åˆ›å»ºStringæ•°ç»„</code></pre><h3 id="3-11-JDK11-å…¶ä»–æ–°ç‰¹æ€§-04-21"><a href="#3-11-JDK11-å…¶ä»–æ–°ç‰¹æ€§-04-21" class="headerlink" title="3-11 JDK11 å…¶ä»–æ–°ç‰¹æ€§ (04:21)"></a>3-11 JDK11 å…¶ä»–æ–°ç‰¹æ€§ (04:21)</h3><h2 id="ç¬¬4ç« -JDK12-æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º"><a href="#ç¬¬4ç« -JDK12-æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º" class="headerlink" title="ç¬¬4ç«  JDK12 æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º"></a>ç¬¬4ç«  JDK12 æ–°ç‰¹æ€§ä»‹ç»åŠæ¼”ç¤º</h2><blockquote><p>æœ¬ç« å°†ä»‹ç» JDK12 ä¸­çš„æ–°ç‰¹æ€§ï¼Œéƒ¨åˆ†æ ¸å¿ƒç‰¹æ€§ä¼šç»“åˆä»£ç æ¼”ç¤ºæ“ä½œï¼Œå¸®åŠ©åŒå­¦ä»¬æ›´å¥½çš„å­¦ä¹ ç†è§£ã€‚</p></blockquote><h3 id="4-1-å¾®åŸºå‡†æµ‹è¯•-19-16"><a href="#4-1-å¾®åŸºå‡†æµ‹è¯•-19-16" class="headerlink" title="4-1 å¾®åŸºå‡†æµ‹è¯• (19:16)"></a>4-1 å¾®åŸºå‡†æµ‹è¯• (19:16)</h3><blockquote><p>JEP230:å¾®åŸºå‡†æµ‹è¯•</p></blockquote><p>æ‘˜è¦ï¼šMicrobenchmarkä½œä¸ºå¸¸è§„æ€§èƒ½æµ‹è¯•çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨JDKæºä»£ç ä¸­æ·»åŠ ä¸€ç»„åŸºç¡€çš„å¾®åŸºå‡†æµ‹è¯•</p><p>ç›®æ ‡ï¼šå¯ä»¥åŸºäºJava Microbenchmark Harnessï¼ˆJMHï¼‰è½»æ¾æµ‹è¯•JDKçš„æ€§èƒ½</p><p>ä»£ç å®ä¾‹</p><blockquote><p>@Benchmarkï¼šæ–¹æ³•çº§æ³¨è§£ï¼Œè¡¨ç¤ºå½“å‰æ–¹æ³•éœ€è¦è¿›è¡ŒåŸºå‡†æµ‹è¯•<br>@Fork(2)ï¼šè¿›ç¨‹çš„ä¸ªæ•°<br>@Threads(8)ï¼šçº¿ç¨‹çš„ä¸ªæ•°<br>@BenchmarkMode(Mode.Throughput)ï¼šåŸºå‡†æµ‹è¯•ç±»å‹ï¼Œååé‡<br>@Warmup(iterations = 5)ï¼šé¢„çƒ­è½®æ•°<br>@Measurement(iterations = 10, time = 5)ï¼šåº¦é‡ï¼ŒåŸºæœ¬æµ‹è¯•å‚æ•°ã€‚<br>@OutputTimeUnit(TimeUnit.MILLISECONDS)ï¼šæµ‹è¯•ç»“æœçš„è¾“å‡ºæ—¶é—´ç±»å‹<br>@Setupï¼šåˆå§‹åŒ–ï¼Œæµ‹è¯•å‰çš„å‡†å¤‡å·¥ä½œ<br>@TearDownï¼šæ¸…ç†ï¼Œæµ‹è¯•åçš„ç»“æŸå·¥ä½œã€‚èµ„æºå›æ”¶</p></blockquote><p>JMHä½¿ç”¨æ–¹æ³•ï¼šæµ‹è¯•å­—ç¬¦ä¸²æ‹¼æ¥çš„æ€§èƒ½</p><pre><code class="java">@Fork(2)@Threads(8)@BenchmarkMode(Mode.Throughput)@Warmup(iterations = 5)@Measurement(iterations = 10, time = 5)@OutputTimeUnit(TimeUnit.MILLISECONDS)public class BenchmarkTest {    public static void main(String[] args) throws RunnerException {        Options options = new OptionsBuilder()                .include(BenchmarkTest.class.getSimpleName())                .build();        new Runner(options).run();    }    @Benchmark    public void testStringAdd() {        String a = &quot;&quot;;        for (int i = 0; i &lt; 10; i++) {            a += i;        }    }    @Benchmark    public void testStringAdds() {        String a = &quot;&quot; + &quot;1&quot; + &quot;2&quot; + &quot;3&quot; + &quot;4&quot; + &quot;5&quot; + &quot;6&quot; + &quot;7&quot; + &quot;8&quot; + &quot;9&quot;;    }    @Benchmark    public void testStringBuilderAdd() {        StringBuilder sb = new StringBuilder();        for (int i = 0; i &lt; 10; i++) {            sb.append(i);        }    }}</code></pre><pre><code>Benchmark                            Mode  Cnt         Score         Error   UnitsBenchmarkTest.testStringAdd         thrpt   20     22305.916 Â±    2473.762  ops/msBenchmarkTest.testStringAdds        thrpt   20  11795913.631 Â± 1105845.467  ops/msBenchmarkTest.testStringBuilderAdd  thrpt   20     86506.156 Â±    3584.597  ops/ms</code></pre><h3 id="4-2-å¢å¼ºçš„-switch-è¯­å¥-11-13"><a href="#4-2-å¢å¼ºçš„-switch-è¯­å¥-11-13" class="headerlink" title="4-2 å¢å¼ºçš„ switch è¯­å¥ (11:13)"></a>4-2 å¢å¼ºçš„ switch è¯­å¥ (11:13)</h3><blockquote><p>JEP325:å¢å¼ºçš„switchè¯­å¥</p></blockquote><p>æ‘˜è¦ï¼šæ‰©å±•switchè¯­å¥ï¼Œä½¿å…¶å¯ä»¥ç”¨ä½œè¯­å¥æˆ–è€…è¡¨è¾¾å¼ï¼Œå¹¶ä¸”â€œä¼ ç»Ÿâ€æˆ–â€œç®€åŒ–â€ä¸¤ç§éƒ½å¯ä»¥ä½¿ç”¨</p><p>ç›®æ ‡ï¼šç®€åŒ–switchè¯­å¥çš„ä¹¦å†™å½¢å¼</p><p>ä»£ç å®ä¾‹</p><pre><code class="java">switch (Calendar.MONDAY) {  case Calendar.MONDAY -&gt; System.out.println(1);  case Calendar.SATURDAY -&gt; System.out.println(6);  default -&gt; System.out.println(0);}</code></pre><pre><code class="java">int result = switch (Calendar.MONDAY) {  case Calendar.MONDAY -&gt; 1;  case Calendar.SATURDAY -&gt; 6;  default -&gt; 0;};System.out.println(result);</code></pre><pre><code class="shell">java SwitchExample.javajavac --release 12 --enable-preview SwitchExample.javajava --enable-preview SwitchExample</code></pre><h3 id="4-3-é»˜è®¤çš„ç±»æ•°æ®å…±äº«-04-20"><a href="#4-3-é»˜è®¤çš„ç±»æ•°æ®å…±äº«-04-20" class="headerlink" title="4-3 é»˜è®¤çš„ç±»æ•°æ®å…±äº« (04:20)"></a>4-3 é»˜è®¤çš„ç±»æ•°æ®å…±äº« (04:20)</h3><blockquote><p>JEP341:é»˜è®¤çš„ç±»æ•°æ®å…±äº«</p></blockquote><p>æ‘˜è¦ï¼šåœ¨64ä½å¹³å°ä¸Šä½¿ç”¨é»˜è®¤ç±»åˆ—è¡¨ï¼Œå¢å¼ºäº†JDKç”Ÿæˆçš„ç±»å…±äº«ï¼ˆCDSï¼‰ï¼Œæ”¹å–„äº†å¼€ç®±å³ç”¨çš„å¯åŠ¨æ—¶é—´</p><p>ç›®æ ‡ï¼šå–æ¶ˆäº†ç”¨æˆ·å¿…éœ€è¿è¡Œ<code>-Xshare:dump</code>ï¼Œæ‰èƒ½ä½¿ç”¨CDSçš„åŠŸèƒ½</p><p>å…³äºç±»æ•°æ®å…±äº«ï¼šCDSï¼ˆClass Data Sharingï¼‰é€šè¿‡å°†ä¸€ç»„æ ¸å¿ƒç³»ç»Ÿç±»è£…è½½åˆ°å…±äº«å†…å­˜ä¸­ï¼Œå¯ä»¥åœ¨å¤šä¸ªJVMä¸­å…±äº«è¿™äº›ç±»ã€‚å‡å°‘å†…å­˜å ç”¨å’Œç¼©çŸ­JVMå¯åŠ¨æ—¶é—´</p><h3 id="4-4-G1-åƒåœ¾æ”¶é›†å™¨åŠŸèƒ½å¢å¼º-14-33"><a href="#4-4-G1-åƒåœ¾æ”¶é›†å™¨åŠŸèƒ½å¢å¼º-14-33" class="headerlink" title="4-4 G1 åƒåœ¾æ”¶é›†å™¨åŠŸèƒ½å¢å¼º (14:33)"></a>4-4 G1 åƒåœ¾æ”¶é›†å™¨åŠŸèƒ½å¢å¼º (14:33)</h3><blockquote><p>JEP344\346:G1åƒåœ¾æ”¶é›†å™¨çš„å¢å¼º</p></blockquote><p>æ‘˜è¦ï¼š</p><ul><li>344ï¼šå¦‚æœG1åƒåœ¾æ”¶é›†å™¨æœ‰å¯èƒ½è¶…è¿‡é¢„æœŸçš„æš‚åœæ—¶é—´ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸­æ­¢é€‰é¡¹</li><li>346ï¼šå¦‚æœåº”ç”¨ç¨‹åºæ´»åŠ¨éå¸¸ä½ï¼ŒG1åº”è¯¥åœ¨åˆç†çš„æ—¶é—´æ®µå†…é‡Šæ”¾æœªä½¿ç”¨çš„Javaå †å†…å­˜</li></ul><p>ç›®æ ‡ï¼š</p><ul><li>344ï¼šG1å¯ä»¥ä¸­æ­¢å¯é€‰éƒ¨åˆ†çš„å›æ”¶å·²è¾¾åˆ°åœé¡¿æ—¶é—´ç›®æ ‡</li><li>346ï¼šå¯ä»¥åœ¨ç©ºé—²æ—¶è‡ªåŠ¨å°†Javaå †å†…å­˜è¿”è¿˜ç»™æ“ä½œç³»ç»Ÿ</li></ul><p>G1åƒåœ¾æ”¶é›†å™¨-ä»€ä¹ˆæ˜¯G1ï¼Ÿ</p><blockquote><p>Garbage-First Garbage Collectorï¼šé¢å‘å¤§å†…å­˜(æ•°Gã€æ•°10G)ã€å¤šæ ¸ç³»ç»Ÿæ”¶é›†å™¨ã€è½¯åœé¡¿ç›®æ ‡ã€å¯é¢„æµ‹åœé¡¿æ—¶é—´ï¼Œç›®æ ‡æ›¿æ¢CMSï¼Œåœ¨JDK1.9ä½œä¸ºé»˜è®¤åƒåœ¾æ”¶é›†å™¨</p></blockquote><p>G1åƒåœ¾æ”¶é›†å™¨-å †å†…å­˜ç»“æ„</p><blockquote><ul><li><p>CMSï¼šéœ€è¦åœ°å€è¿ç»­çš„å†…å­˜ç©ºé—´</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge658yzk7bj30ni05yq56.jpg" alt="CMSå †å†…å­˜ç»“æ„" style="zoom:80%;" /></li><li><p>G1ï¼šé€»è¾‘è¿ç»­çš„å†…å­˜å—</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge659sz6ewj30mw08qdis.jpg" alt="G1å †å†…å­˜ç»“æ„" style="zoom:80%;" /><p>Regionçš„å¤§å°ï¼šä½¿ç”¨<code>-XX:G1HeapRegionSize</code>æŒ‡å®šï¼Œå¯é€‰1,2,4,8,16,32Mã€‚</p><p>é»˜è®¤<code>MIN_REGION_SIZE(1024*1024)</code>ã€<code>MAX_REGION_SIZE(32*1024*1024)</code>ã€<code>TARGET_REGION_NUMBER(2048)</code></p></li></ul></blockquote><p>G1åƒåœ¾æ”¶é›†å™¨-GCæ¨¡å¼</p><blockquote><ul><li><p>young gcï¼šå¹´è½»ä»£çš„GCç®—æ³•ã€æ‹·è´åˆ°survivor regionã€æ™‹å‡åˆ°old region</p></li><li><p>mixed gcï¼šé¿å…å †å†…å­˜è€—å°½ã€ä¸æ˜¯old gc,è€Œæ˜¯young+old regionã€æ˜¯éƒ¨åˆ†,ä¸æ˜¯å…¨éƒ¨è€å¹´ä»£</p><p>è€å¹´ä»£å ç”¨çš„å†…å­˜å¤§å°è¶…è¿‡å †å†…å­˜çš„é˜ˆå€¼æ—¶ä¼šè§¦å‘mixed gc</p></li><li><p>full gcï¼šå¯¹è±¡åˆ†é…é€Ÿåº¦è¿‡å¿«ã€old regionè¢«å¡«æ»¡ã€å•çº¿ç¨‹æ‰§è¡Œ</p><p>å¯¹è±¡å†…å­˜åˆ†é…è¿‡å¿«ï¼Œmixed gcæ¥ä¸åŠæ¸…ç†ï¼Œå¯¼è‡´old regionè¢«æ²¾æ»¡ä¼šè§¦å‘full gc</p></li></ul></blockquote><p>G1åƒåœ¾æ”¶é›†å™¨-å±æ€§æ€»ç»“</p><blockquote><p>â€œæœåŠ¡å™¨é£æ ¼â€çš„åƒåœ¾å›æ”¶å™¨ï¼šå¹¶è¡Œå’Œå¹¶å‘ã€åˆ†ä»£å¤„ç†ã€ç´§å‡‘å†…å­˜(ç¢ç‰‡æ•´ç†)ã€é¢„è§æ€§</p></blockquote><p>G1åƒåœ¾æ”¶é›†å™¨-åº”ç”¨åœºæ™¯</p><blockquote><p>G1çš„åº”ç”¨åœºæ™¯ï¼šåƒåœ¾æ”¶é›†ä¸åº”ç”¨çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€ç©ºé—²å†…å­˜å‹ç¼©æš‚åœæ—¶é—´çŸ­ã€å¯é¢„æµ‹çš„GCæš‚åœæ—¶é—´ã€ä¸éœ€è¦å¾ˆå¤§çš„Javaå †</p></blockquote><h3 id="4-5-JDK12-å…¶ä»–æ–°ç‰¹æ€§-03-17"><a href="#4-5-JDK12-å…¶ä»–æ–°ç‰¹æ€§-03-17" class="headerlink" title="4-5 JDK12 å…¶ä»–æ–°ç‰¹æ€§ (03:17)"></a>4-5 JDK12 å…¶ä»–æ–°ç‰¹æ€§ (03:17)</h3><h2 id="ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>æœ¬ç« ä¸­é¦–å…ˆå¯¹è¯¾ç¨‹ä¸­ä»‹ç»çš„ JDK11ã€12 è¿›è¡Œæ€»ç»“è¯´æ˜ï¼Œä¹‹ååˆ†ææ€æ ·å»é€‰æ‹© JDK çš„ç‰ˆæœ¬ï¼Œæœ€åç»™å‡ºå­¦ä¹  Java ç›¸å…³çš„å»ºè®®ã€‚</p></blockquote><h3 id="5-1-è¯¾ç¨‹æ€»ç»“-05-50"><a href="#5-1-è¯¾ç¨‹æ€»ç»“-05-50" class="headerlink" title="5-1 è¯¾ç¨‹æ€»ç»“ (05:50)"></a>5-1 è¯¾ç¨‹æ€»ç»“ (05:50)</h3><p>JDK11ï¼šZGCã€HttpClientã€String</p><p>JDK12ï¼šG1å¢å¼ºã€switch</p>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1196-ä¸€è¯¾æŒæ¡Lambdaè¡¨è¾¾å¼è¯­æ³•åŠåº”ç”¨</title>
      <link href="/imooc/1196-lambda/"/>
      <url>/imooc/1196-lambda/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="http://www.imooc.com/learn/1196" target="_blank" rel="noopener">http://www.imooc.com/learn/1196</a></p><p>ç®€ä»‹ï¼šå¦‚ä½•åº”å¯¹ä¼ ç»Ÿé¡¹ç›®å¼€å‘ä¸­é‡åˆ°çš„ä»£ç å†—ä½™çš„é—®é¢˜ï¼Ÿå¦‚ä½•æå‡å¼€å‘æ•ˆç‡ï¼Ÿå¦‚ä½•ç²¾ç®€ä»£ç ï¼Ÿå­¦ä¼šLambdaå¿…ä¸å¯å°‘~ Lambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³çš„ä¸€ç§ä½“ç°ï¼Œæœ¬è¯¾ç¨‹å…ˆè®²è§£äº†Lambdaè¡¨è¾¾å¼åŸºæœ¬æ“ä½œè¯­æ³•å’Œåº•å±‚åŸç†ï¼Œå†ç»“åˆStreamå®Œæˆé¡¹ç›®é‡æ„ï¼Œå¸®åŠ©ä½ å¤¯å®Lambdaè¡¨è¾¾å¼åŸºç¡€ï¼Œè½»æ¾åº”å¯¹å·¥ä½œå’Œé¢è¯•ã€‚å¦å¤–ï¼ŒJDK8ä»¥åï¼Œæºç ä¸­å¼€å§‹åº”ç”¨Lambdaè¡¨è¾¾å¼ï¼Œå­¦ä¹ å®ƒå¯¹ä»¥åé’»ç ”æºç éå¸¸é‡è¦ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>ç†æ¸…æœ¬è¯¾ç¨‹å­¦ä¹ ç›®çš„ï¼Œå¯¹lambdaåŸºç¡€æœ‰ç®€å•çš„è®¤è¯†ã€‚</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»-02-25"><a href="#1-1-è¯¾ç¨‹ä»‹ç»-02-25" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç» (02:25)"></a>1-1 è¯¾ç¨‹ä»‹ç» (02:25)</h3><blockquote><ul><li>ä»€ä¹ˆæ˜¯lambdaè¡¨è¾¾å¼</li><li>lambdaè¡¨è¾¾å¼åŸºç¡€çŸ¥è¯†</li><li>lambdaè¡¨è¾¾å¼é«˜çº§æ‰©å±•</li></ul></blockquote><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gdk97i0rdaj312v0jfgq1.jpg" alt="è¯¾ç¨‹ä»‹ç»" style="zoom:30%;" /><h2 id="ç¬¬2ç« -Javaä¸ºä»€ä¹ˆå¼•å…¥Lambdaè¡¨è¾¾å¼"><a href="#ç¬¬2ç« -Javaä¸ºä»€ä¹ˆå¼•å…¥Lambdaè¡¨è¾¾å¼" class="headerlink" title="ç¬¬2ç«  Javaä¸ºä»€ä¹ˆå¼•å…¥Lambdaè¡¨è¾¾å¼"></a>ç¬¬2ç«  Javaä¸ºä»€ä¹ˆå¼•å…¥Lambdaè¡¨è¾¾å¼</h2><blockquote><p>ä»å®é™…é—®é¢˜å…¥æ‰‹ï¼Œä»‹ç»lambdaè¡¨è¾¾å¯¹äºç¨‹åºä¼˜åŒ–å¸¦æ¥çš„å¥½å¤„</p></blockquote><h3 id="2-1-ä¸ºä»€ä¹ˆå¼•å…¥Lambdaè¡¨è¾¾å¼-08-44"><a href="#2-1-ä¸ºä»€ä¹ˆå¼•å…¥Lambdaè¡¨è¾¾å¼-08-44" class="headerlink" title="2-1 ä¸ºä»€ä¹ˆå¼•å…¥Lambdaè¡¨è¾¾å¼ (08:44)"></a>2-1 ä¸ºä»€ä¹ˆå¼•å…¥Lambdaè¡¨è¾¾å¼ (08:44)</h3><p>å†…å®¹ä»‹ç»</p><blockquote><ul><li>ä»€ä¹ˆæ˜¯Lambda</li><li>Model Code As Data</li><li>åŠŸèƒ½æ¥å£è®¾è®¡åŠä¼˜åŒ–</li><li>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Lambdaè¡¨è¾¾å¼</li></ul></blockquote><p>ä»€ä¹ˆæ˜¯Lambda</p><blockquote><ul><li>Lambdaè¡¨è¾¾å¼ä¹Ÿè¢«ç§°ä¸ºç®­å¤´å‡½æ•°ã€åŒ¿åå‡½æ•°ã€é—­åŒ…</li><li>Lambdaè¡¨è¾¾å¼ä½“ç°çš„æ˜¯è½»é‡çº§å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³</li><li><code>-&gt;</code>ç¬¦å·æ˜¯Lambdaè¡¨è¾¾å¼æ ¸å¿ƒæ“ä½œç¬¦å·ï¼Œç¬¦å·å·¦ä¾§æ˜¯æ“ä½œå‚æ•°ï¼Œç¬¦å·å³ä¾§æ˜¯æ“ä½œè¡¨è¾¾å¼</li><li>JDK8æ–°ç‰¹æ€§</li></ul></blockquote><p>Model Code as Data</p><blockquote><ul><li>Model Code as Dataï¼Œç¼–ç åŠæ•°æ®ï¼Œå°½å¯èƒ½è½»é‡çº§çš„å°†ä»£ç å°è£…ä¸ºæ•°æ®</li><li>è§£å†³æ–¹æ¡ˆï¼šæ¥å£&amp;å®ç°ç±»ï¼ˆåŒ¿åå†…éƒ¨ç±»ï¼‰</li><li>å­˜åœ¨é—®é¢˜ï¼šè¯­æ³•å†—ä½™ã€thiså…³é”®å­—ã€å˜é‡æ•è·ã€æ•°æ®æ§åˆ¶ç­‰</li></ul></blockquote><p>é¡¹ç›®é—®é¢˜ï¼šåŠŸèƒ½æ¥å£çš„è®¾è®¡åŠä¼˜åŒ–</p><blockquote><p>éœ€æ±‚ç¯å¢ƒï¼šçº¿ç¨‹ç±»çš„åˆ›å»º<br>è§£å†³æ–¹æ¡ˆï¼šåŒ¿åå†…éƒ¨ç±»å®ç°<br>è§£å†³æ–¹æ¡ˆï¼šLambdaè¡¨è¾¾å¼å®ç°</p></blockquote><ol><li><p>ä¼ ç»Ÿæ¨¡å¼ä¸‹ï¼Œæ–°çº¿ç¨‹çš„åˆ›å»º</p><pre><code class="java">new Thread(new Runnable() {    @Override    public void run() {        System.out.println(&quot;threading...&quot; + Thread.currentThread().getId());    }}).start();</code></pre></li><li><p>JDK8æ–°ç‰¹æ€§ï¼ŒLambdaè¡¨è¾¾å¼ä¼˜åŒ–çº¿ç¨‹æ¨¡å¼</p><pre><code class="java">new Thread(() -&gt; {  System.out.println(&quot;lambda threading...&quot; + Thread.currentThread().getId());}).start();</code></pre></li></ol><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Lambdaè¡¨è¾¾å¼</p><blockquote><ul><li>ä»–ä¸æ˜¯è§£å†³æœªçŸ¥é—®é¢˜çš„æ–°æŠ€æœ¯</li><li>å¯¹ç°æœ‰è§£å†³æ–¹æ¡ˆçš„è¯­ä¹‰åŒ–ä¼˜åŒ–</li><li>éœ€è¦æ ¹æ®å®é™…éœ€æ±‚è€ƒè™‘æ€§èƒ½é—®é¢˜</li></ul></blockquote><h2 id="ç¬¬3ç« -Lambdaè¡¨è¾¾å¼çš„åŸºç¡€çŸ¥è¯†"><a href="#ç¬¬3ç« -Lambdaè¡¨è¾¾å¼çš„åŸºç¡€çŸ¥è¯†" class="headerlink" title="ç¬¬3ç«  Lambdaè¡¨è¾¾å¼çš„åŸºç¡€çŸ¥è¯†"></a>ç¬¬3ç«  Lambdaè¡¨è¾¾å¼çš„åŸºç¡€çŸ¥è¯†</h2><blockquote><p>ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£ã€Lambdaè¡¨è¾¾å¼çš„åŸºç¡€è¯­æ³•ã€æ–¹æ³•é‡è½½ä¸Lambdaè¡¨è¾¾å¼ä»¥åŠåº•å±‚æ„å»ºåŸç†ã€‚</p></blockquote><h3 id="3-1-å‡½æ•°å¼æ¥å£æ¦‚è¿°å’Œå®šä¹‰-05-19"><a href="#3-1-å‡½æ•°å¼æ¥å£æ¦‚è¿°å’Œå®šä¹‰-05-19" class="headerlink" title="3-1 å‡½æ•°å¼æ¥å£æ¦‚è¿°å’Œå®šä¹‰ (05:19)"></a>3-1 å‡½æ•°å¼æ¥å£æ¦‚è¿°å’Œå®šä¹‰ (05:19)</h3><p>å†…å®¹ä»‹ç»</p><blockquote><ul><li>å‡½æ•°å¼æ¥å£çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹å¼</li><li>Lambdaè¯­æ³•åŠä½¿ç”¨</li><li>Lambdaè¡¨è¾¾å¼è¿è¡ŒåŸç†</li></ul></blockquote><p>å‡½æ•°æ˜¯æ¥å£ï¼ˆfunction interfaceï¼‰</p><blockquote><ul><li>å‡½æ•°å¼æ¥å£ï¼Œå°±æ˜¯Javaç±»å‹ç³»ç»Ÿä¸­çš„æ¥å£</li><li>å‡½æ•°å¼æ¥å£ï¼Œæ˜¯åªåŒ…å«ä¸€ä¸ªæ¥å£æ–¹æ³•çš„ç‰¹æ®Šæ¥å£</li><li>è¯­ä¹‰åŒ–æ£€æµ‹æ³¨è§£ï¼š<code>@FunctionalInterface</code></li></ul></blockquote><ol><li><p>ç”¨æˆ·èº«ä»½è®¤è¯æ ‡è®°æ¥å£</p><pre><code class="java">@FunctionalInterfacepublic interface IUserCredential {  /**   * é€šè¿‡ç”¨æˆ·è´¦å·ï¼ŒéªŒè¯ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„æ¥å£   *   * @param username è¦éªŒè¯çš„ç”¨æˆ·è´¦å·   * @return è¿”å›èº«ä»½ä¿¡æ¯[ç³»ç»Ÿç®¡ç†å‘˜ã€ç”¨æˆ·ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·]   */  String verifyUser(String username);}</code></pre></li><li><p>æ¶ˆæ¯ä¼ è¾“æ ¼å¼åŒ–è½¬æ¢æ¥å£</p><pre><code class="java">@FunctionalInterfacepublic interface IMessageFormat {  /**   * æ¶ˆæ¯è½¬æ¢æ–¹æ³•   *   * @param message è¦è½¬æ¢çš„æ¶ˆæ¯   * @param format  è½¬æ¢çš„æ ¼å¼[xml/json]   * @return è¿”å›è½¬æ¢åçš„æ•°æ®   */  String format(String message, String format);}</code></pre></li></ol><h3 id="3-2-é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•-09-16"><a href="#3-2-é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•-09-16" class="headerlink" title="3-2 é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³• (09:16)"></a>3-2 é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³• (09:16)</h3><blockquote><ul><li>é»˜è®¤æ¥å£æ–¹æ³•</li><li>é™æ€æ¥å£æ–¹æ³•</li><li>æ¥è‡ªObjectç»§æ‰¿çš„æ–¹æ³•</li></ul></blockquote><ol><li><p>ç”¨æˆ·èº«ä»½è®¤è¯æ ‡è®°æ¥å£</p><pre><code class="java">@FunctionalInterfacepublic interface IUserCredential {  // é€šè¿‡ç”¨æˆ·è´¦å·ï¼ŒéªŒè¯ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„æ¥å£  String verifyUser(String username);  // boolean test();  @Override  String toString();  default String getCredential(String username) {    // æ¨¡æ‹Ÿæ–¹æ³•    if (&quot;admin&quot;.equals(username)) {      return &quot;admin + ç³»ç»Ÿç®¡ç†å‘˜ç”¨æˆ·&quot;;    } else if (&quot;manager&quot;.equals(username)) {      return &quot;manager + ç”¨æˆ·ç®¡ç†å‘˜ç”¨æˆ·&quot;;    }    return &quot;commons + æ™®é€šä¼šå‘˜ç”¨æˆ·&quot;;  }}</code></pre><pre><code class="java">public class UserCredentialImpl implements IUserCredential {  @Override  public String verifyUser(String username) {    if (&quot;admin&quot;.equals(username)) {      return &quot;ç³»ç»Ÿç®¡ç†å‘˜&quot;;    } else if (&quot;manager&quot;.equals(username)) {      return &quot;ç”¨æˆ·ç®¡ç†å‘˜&quot;;    }    return &quot;æ™®é€šä¼šå‘˜&quot;;  }}</code></pre></li><li><p>æ¶ˆæ¯ä¼ è¾“æ ¼å¼åŒ–è½¬æ¢æ¥å£</p><pre><code class="java">@FunctionalInterfacepublic interface IMessageFormat {  // æ¶ˆæ¯è½¬æ¢æ–¹æ³•  String format(String message, String format);  // æ¶ˆæ¯åˆæ³•æ€§éªŒè¯æ–¹æ³•  static boolean verifyMessage(String msg) {    return msg != null;  }}</code></pre><pre><code class="java">public class MessageFormatImpl implements IMessageFormat {  @Override  public String format(String message, String format) {    System.out.println(&quot;æ¶ˆæ¯è½¬æ¢...&quot;);    return message;  }}</code></pre></li><li><p>æµ‹è¯•ç±»</p><pre><code class="java">public static void main(String[] args) {  IUserCredential ic = new UserCredentialImpl();  System.out.println(ic.verifyUser(&quot;admin&quot;));  System.out.println(ic.getCredential(&quot;admin&quot;));  String msg = &quot;hello world&quot;;  if (IMessageFormat.verifyMessage(msg)) {    IMessageFormat format = new MessageFormatImpl();    System.out.println(format.format(&quot;hello&quot;, &quot;json&quot;));  }}</code></pre></li></ol><h3 id="3-3-Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£çš„å…³ç³»-04-21"><a href="#3-3-Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£çš„å…³ç³»-04-21" class="headerlink" title="3-3 Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£çš„å…³ç³» (04:21)"></a>3-3 Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£çš„å…³ç³» (04:21)</h3><p>å‡½æ•°å¼æ¥å£(function interface)</p><blockquote><ul><li>å‡½æ•°å¼æ¥å£ï¼ŒåªåŒ…å«ä¸€ä¸ªæ“ä½œæ–¹æ³•</li><li>Lambdaè¡¨è¾¾å¼ï¼Œåªèƒ½æ“ä½œä¸€ä¸ªæ–¹æ³•</li><li>Javaä¸­çš„Lambdaè¡¨è¾¾å¼æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£</li></ul></blockquote><ol><li><p>åŒ¿åå†…éƒ¨ç±»ï¼Œå®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•</p><pre><code class="java">IUserCredential ic2 = new IUserCredential() {  @Override  public String verifyUser(String username) {    return &quot;admin&quot;.equals(username) ? &quot;ç®¡ç†å‘˜&quot; : &quot;ä¼šå‘˜&quot;;  }};System.out.println(ic2.verifyUser(&quot;manager&quot;));System.out.println(ic2.verifyUser(&quot;admin&quot;));</code></pre></li><li><p>Lambdaè¡¨è¾¾å¼ï¼Œé’ˆå¯¹å‡½æ•°å¼æ¥å£çš„ç®€å•å®ç°</p><pre><code class="java">IUserCredential ic3 = (username) -&gt; {  return &quot;admin&quot;.equals(username) ? &quot;lbdç®¡ç†å‘˜&quot; : &quot;lbdä¼šå‘˜&quot;;};System.out.println(ic3.verifyUser(&quot;manager&quot;));System.out.println(ic3.verifyUser(&quot;admin&quot;));</code></pre></li></ol><h3 id="3-4-jdkä¸­å¸¸è§çš„å‡½æ•°å¼æ¥å£-14-23"><a href="#3-4-jdkä¸­å¸¸è§çš„å‡½æ•°å¼æ¥å£-14-23" class="headerlink" title="3-4 jdkä¸­å¸¸è§çš„å‡½æ•°å¼æ¥å£ (14:23)"></a>3-4 jdkä¸­å¸¸è§çš„å‡½æ•°å¼æ¥å£ (14:23)</h3><p>Javaç±»å‹ç³»ç»Ÿå†…å»ºå‡½æ•°å¼æ¥å£</p><blockquote><ul><li>java.lang.Runable</li><li>Java.lang.Comparable</li><li>java.lang.Comparator</li><li>java.io.FileFilter</li></ul></blockquote><p>JDK8æä¾›äº†java.util.functionåŒ…ï¼Œæä¾›äº†å¸¸ç”¨çš„å‡½æ•°å¼åŠŸèƒ½æ¥å£</p><table><thead><tr><th>æ¥å£</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>Predicate</td><td>æ¥æ”¶å‚æ•°Tå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªbooleanç±»å‹ç»“æœ</td></tr><tr><td>Consumer</td><td>æ¥æ”¶å‚æ•°Tå¯¹è±¡ï¼Œæ²¡æœ‰è¿”å›å€¼</td></tr><tr><td>Function</td><td>æ¥æ”¶å‚æ•°Tå¯¹è±¡ï¼Œè¿”å›Rå¯¹è±¡</td></tr><tr><td>Supplier</td><td>ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œç›´æ¥é€šè¿‡get()è·å–æŒ‡å®šç±»å‹çš„å¯¹è±¡</td></tr><tr><td>UnaryOperator</td><td>æ¥æ”¶å‚æ•°Tå¯¹è±¡ï¼Œæ‰§è¡Œä¸šåŠ¡å¤„ç†åï¼Œè¿”å›æ›´æ–°åçš„Tå¯¹è±¡</td></tr><tr><td>BinaryOperator</td><td>æ¥æ”¶ä¸¤ä¸ªTå¯¹è±¡ï¼Œæ‰§è¡Œä¸šåŠ¡å¤„ç†åï¼Œè¿”å›ä¸€ä¸ªTå¯¹è±¡</td></tr></tbody></table><ol><li><p>java.util.function.Predicate<T></p><p>æ¥æ”¶å‚æ•°å¯¹è±¡Tï¼Œè¿”å›ä¸€ä¸ªbooleanç±»å‹ç»“æœ</p><pre><code class="java">Predicate&lt;String&gt; pre = (String username) -&gt; {  return &quot;admin&quot;.equals(username);};System.out.println(pre.test(&quot;manager&quot;));System.out.println(pre.test(&quot;admin&quot;));</code></pre></li><li><p>java.util.function.Comsumer<T></p><p>æ¥æ”¶å‚æ•°å¯¹è±¡Tï¼Œä¸è¿”å›ç»“æœ</p><pre><code class="java">Consumer&lt;String&gt; con = (String message) -&gt; {  System.out.println(&quot;è¦å‘é€çš„æ¶ˆæ¯ï¼š&quot; + message);  System.out.println(&quot;æ¶ˆæ¯å‘é€å®Œæˆ&quot;);};con.accept(&quot;hello world&quot;);con.accept(&quot;lambda expression&quot;);</code></pre></li><li><p>java.util.function.Function&lt;T, R&gt;</p><p>æ¥æ”¶å‚æ•°å¯¹è±¡Tï¼Œè¿”å›ç»“æœå¯¹è±¡R</p><pre><code class="java">Function&lt;String, Integer&gt; fun = (String gender) -&gt; {  return &quot;male&quot;.equals(gender) ? 1 : 0;};System.out.println(fun.apply(&quot;male&quot;));System.out.println(fun.apply(&quot;female&quot;));</code></pre></li><li><p>java.util.function.Supplier<T></p><p>ä¸éœ€è¦æ¥æ”¶å‚æ•°ï¼Œæä¾›Tå¯¹è±¡çš„åˆ›å»ºå·¥å‚</p><pre><code class="java">Supplier&lt;String&gt; sup = () -&gt; {  return UUID.randomUUID().toString();};System.out.println(sup.get());System.out.println(sup.get());System.out.println(sup.get());</code></pre></li><li><p>java.util.function.UnaryOperator<T></p><p>æ¥æ”¶å‚æ•°å¯¹è±¡Tï¼Œè¿”å›ç»“æœå¯¹è±¡T</p><pre><code class="java">UnaryOperator&lt;String&gt; uo = (String img) -&gt; {  img += &quot;[100x200]&quot;;  return img;};System.out.println(uo.apply(&quot;åŸå›¾--&quot;));</code></pre></li><li><p>java.util.functionBinaryOperator<T></p><p>æ¥æ”¶ä¸¤ä¸ªTå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªTå¯¹è±¡ç»“æœ</p><pre><code class="java">BinaryOperator&lt;Integer&gt; bo = (Integer i1, Integer i2) -&gt; {  return i1 &gt; i2 ? i1 : i2;};System.out.println(bo.apply(12, 13));</code></pre></li></ol><h3 id="3-5-Lambdaè¡¨è¾¾å¼åŸºæœ¬è¯­æ³•-10-17"><a href="#3-5-Lambdaè¡¨è¾¾å¼åŸºæœ¬è¯­æ³•-10-17" class="headerlink" title="3-5 Lambdaè¡¨è¾¾å¼åŸºæœ¬è¯­æ³• (10:17)"></a>3-5 Lambdaè¡¨è¾¾å¼åŸºæœ¬è¯­æ³• (10:17)</h3><blockquote><ul><li>Lambdaè¡¨è¾¾å¼åŸºæœ¬è¯­æ³•</li><li>å¸¦å‚æ•°çš„Lambdaè¡¨è¾¾å¼</li><li>å¸¦è¿”å›å€¼çš„Lambdaè¡¨è¾¾å¼</li></ul></blockquote><p>Lambdaè¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•</p><ol><li><p>å£°æ˜ï¼šå°±æ˜¯å’ŒLambdaè¡¨è¾¾å¼ç»‘å®šçš„æ¥å£ç±»å‹</p></li><li><p>å‚æ•°ï¼šåŒ…å«åœ¨ä¸€å¯¹åœ†æ‹¬å·ä¸­ï¼Œå’Œç»‘å®šçš„æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸­çš„å‚æ•°ä¸ªæ•°åŠé¡ºåºä¸€è‡´</p></li><li><p>æ“ä½œç¬¦ï¼š-&gt;</p></li><li><p>æ‰§è¡Œä»£ç å—ï¼šåŒ…å«åœ¨ä¸€å¯¹å¤§æ‹¬å·ä¸­ï¼Œå‡ºç°åœ¨æ“ä½œç¬¦å·çš„å³ä¾§</p><pre><code>[æ¥å£å£°æ˜] = (å‚æ•°) -&gt; {æŒ‡å®šä»£ç å—}</code></pre></li></ol><blockquote><ol><li>lambdaè¡¨è¾¾å¼ï¼Œå¿…é¡»å’Œæ¥å£è¿›è¡Œç»‘å®š</li><li>lambdaè¡¨è¾¾å¼çš„å‚æ•°ï¼Œå¯ä»¥é™„å¸¦0ä¸ªåˆ°nä¸ªå‚æ•°ï¼Œæ‹¬å·ä¸­çš„å‚æ•°ç±»å‹å¯ä»¥ä¸ç”¨æŒ‡å®šï¼ŒJVMåœ¨è¿è¡Œæ—¶ä¼šè‡ªåŠ¨æ ¹æ®ç»‘å®šçš„æŠ½è±¡æ–¹æ³•ä¸­çš„å‚æ•°è¿›è¡Œæ¨å¯¼</li><li>lambdaè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå¦‚æœä»£ç å—åªæœ‰ä¸€è¡Œï¼Œå¹¶ä¸”æ²¡æœ‰å¤§æ‹¬å·ï¼Œä¸ç”¨å†™returnå…³é”®å­—ï¼Œå•è¡Œä»£ç çš„æ‰§è¡Œç»“æœä¼šè‡ªåŠ¨è¿”å›ã€‚å¦‚æœæ·»åŠ äº†å¤§æ‹¬å·ï¼Œæˆ–è€…æœ‰å¤šè¡Œä»£ç ï¼Œå¿…é¡»é€šè¿‡returnå…³é”®å­—è¿”å›æ‰§è¡Œç»“æœ</li></ol></blockquote><ol><li><p>æ²¡æœ‰å‚æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼çš„Lambdaè¡¨è¾¾å¼</p><pre><code class="java">interface ILambda1 {  void test();}</code></pre><pre><code class="java">ILambda1 i1 = () -&gt; {  System.out.println(&quot;hello lambda&quot;);  System.out.println(&quot;welcome to lambda&quot;);};i1.test();ILambda1 i12 = () -&gt; System.out.println(&quot;hello&quot;);i12.test();</code></pre></li><li><p>å¸¦æœ‰å‚æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼çš„Lambdaè¡¨è¾¾å¼</p><pre><code class="java">interface ILambda2 {  void test(String name, int age);}</code></pre><pre><code class="java">ILambda2 i2 = (String name, int age) -&gt; {  System.out.println(name + &quot; age: my year&#39;s old is &quot; + age);};i2.test(&quot;jerry&quot;, 18);ILambda2 i22 = (name, age) -&gt; {  System.out.println(name + &quot; age: my year&#39;s old is &quot; + age);};i22.test(&quot;tom&quot;, 22);</code></pre></li><li><p>å¸¦æœ‰å‚æ•°ï¼Œå¸¦æœ‰è¿”å›å€¼çš„Lambdaè¡¨è¾¾å¼</p><pre><code class="java">interface ILambda3 {  int test(int x, int y);}</code></pre><pre><code class="java">ILambda3 i3 = (x, y) -&gt; {  int z = x + y;  return z;};System.out.println(i3.test(11, 22));ILambda3 i32 = (x, y) -&gt; x + y;System.out.println(i32.test(100, 200));ILambda3 i33 = Integer::sum;System.out.println(i33.test(23, 32));</code></pre></li></ol><h3 id="3-6-å˜é‡æ•è·-å˜é‡çš„è®¿é—®æ“ä½œ-06-17"><a href="#3-6-å˜é‡æ•è·-å˜é‡çš„è®¿é—®æ“ä½œ-06-17" class="headerlink" title="3-6 å˜é‡æ•è·-å˜é‡çš„è®¿é—®æ“ä½œ (06:17)"></a>3-6 å˜é‡æ•è·-å˜é‡çš„è®¿é—®æ“ä½œ (06:17)</h3><blockquote><ul><li>åŒ¿åå†…éƒ¨ç±»ä¸­çš„å˜é‡æ•è·</li><li>Lambdaè¡¨è¾¾å¼ä¸­çš„å˜é‡æ•è·</li></ul></blockquote><ol><li><p>åŒ¿åå†…éƒ¨ç±»å‹ä¸­å¯¹äºå˜é‡çš„è®¿é—®</p><pre><code class="java">public void testInnerClass() {  String s2 = &quot;å±€éƒ¨å˜é‡&quot;;  new Thread(new Runnable() {    String s3 = &quot;å†…éƒ¨å˜é‡&quot;;    @Override    public void run() {      // 1. è®¿é—®å…¨å±€å˜é‡      // System.out.println(this.s1); // thiså…³é”®å­—~è¡¨ç¤ºçš„æ˜¯å½“å‰å†…éƒ¨ç±»å‹çš„å¯¹è±¡      System.out.println(s1);      // 2. å±€éƒ¨å˜é‡çš„è®¿é—®      System.out.println(s2);      // s2 = &quot;hello&quot;; // ä¸èƒ½å¯¹å±€éƒ¨å˜é‡è¿›è¡Œæ•°æ®çš„ä¿®æ”¹[final]      // 3. å†…éƒ¨å˜é‡çš„è®¿é—®      System.out.println(s3);      System.out.println(this.s3);    }  }).start();}</code></pre></li><li><p>Lambdaè¡¨è¾¾å¼å˜é‡æ•è·</p><pre><code class="java">public void testLambda() {  String s2 = &quot;å±€éƒ¨å˜é‡Lambda&quot;;  new Thread(() -&gt; {    String s3 = &quot;å†…éƒ¨å˜é‡Lambda&quot;;    // 1. è®¿é—®å…¨å±€å˜é‡    System.out.println(this.s1); // thiså…³é”®å­—~è¡¨ç¤ºçš„æ˜¯æ‰€å±æ–¹æ³•æ‰€åœ¨ç±»å‹çš„å¯¹è±¡    // 2. è®¿é—®å±€éƒ¨å˜é‡    System.out.println(s2);    // s2 = &quot;hello&quot;; // ä¸èƒ½è¿›è¡Œæ•°æ®ä¿®æ”¹ï¼Œé»˜è®¤æ¨å¯¼å˜é‡çš„ä¿®é¥°ç¬¦ï¼šfinal    // 3. è®¿é—®å†…éƒ¨å˜é‡    System.out.println(s3);    s3 = &quot;lambdaå†…éƒ¨å˜é‡ç›´æ¥ä¿®æ”¹&quot;;    System.out.println(s3);  }).start();}</code></pre></li></ol><p>æ€»ç»“ï¼šLambdaè¡¨è¾¾å¼ä¸­çš„å˜é‡æ“ä½œä¼˜åŒ–äº†åŒ¿åå†…éƒ¨ç±»ä¸­çš„thiså…³é”®å­—ï¼Œä¸å†å•ç‹¬å»ºç«‹å¯¹è±¡ä½œç”¨åŸŸï¼Œè¡¨è¾¾å¼æœ¬èº«å°±æ˜¯æ‰€å±å¯¹è±¡ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨è¯­æ³•è¯­ä¹‰ä¸Šä½¿ç”¨æ›´åŠ ç®€æ´</p><h3 id="3-7-Lambdaè¡¨è¾¾å¼ç±»å‹æ£€æŸ¥-07-18"><a href="#3-7-Lambdaè¡¨è¾¾å¼ç±»å‹æ£€æŸ¥-07-18" class="headerlink" title="3-7 Lambdaè¡¨è¾¾å¼ç±»å‹æ£€æŸ¥ (07:18)"></a>3-7 Lambdaè¡¨è¾¾å¼ç±»å‹æ£€æŸ¥ (07:18)</h3><blockquote><ul><li>è¡¨è¾¾å¼ç±»å‹æ£€æŸ¥</li><li>å‚æ•°ç±»å‹æ£€æŸ¥</li></ul></blockquote><ol><li><p>æ¥å£</p><pre><code class="java">@FunctionalInterfaceinterface MyInterface&lt;T, R&gt; {  R strategy(T t, R r);}</code></pre></li><li><p>æµ‹è¯•æ–¹æ³•</p><pre><code class="java">public static void test(MyInterface&lt;String, List&gt; inter) {  List list = inter.strategy(&quot;hello&quot;, new ArrayList());  System.out.println(list);}</code></pre></li><li><p>è°ƒç”¨æ–¹æ³•</p><ul><li><p>åŒ¿åå†…éƒ¨ç±»</p><pre><code class="java">test(new MyInterface&lt;String, List&gt;() {  @Override  public List strategy(String s, List list) {    list.add(s);    return list;  }});</code></pre></li><li><p>Lambdaè¡¨è¾¾å¼</p><pre><code class="java">test((x, y) -&gt; {  y.add(x);  return y;});</code></pre></li></ul></li></ol><ul><li><p>è¡¨è¾¾å¼ç±»å‹æ£€æŸ¥</p><pre><code> (x, y) -&gt; {...} ==&gt; test(param) ==&gt; param = MyInterface ==&gt; lambdaè¡¨è¾¾å¼ ==&gt; MyInterfaceç±»å‹</code></pre><p> Lambdaè¡¨è¾¾å¼çš„ç±»å‹æ£€æŸ¥ï¼šLambdaè¡¨è¾¾å¼<code>(x, y) =&gt; {...}</code>ï¼Œå½“å°†å®ƒäº¤ç»™testä½œä¸ºparamå‚æ•°æ—¶ï¼ŒJVMä¼šæ¨å¯¼paramæ˜¯Interfaceç±»å‹çš„å‚æ•°ï¼Œæ‰€ä»¥å½“å‰çš„Lambdaè¡¨è¾¾å¼å°±å±äºMyInterfaceç±»å‹ã€‚MyInterfaceæ¥å£å°±æ˜¯Lambdaè¡¨è¾¾å¼çš„ç›®æ ‡ç±»å‹(target typing)</p></li><li><p>å‚æ•°ç±»å‹æ£€æŸ¥</p><pre><code> (x, y) -&gt; {...} ==&gt; MyInterface(T t, R r) ==&gt; MyInterface&lt;String, List&gt; inter ==&gt; T=String, R=List ==&gt; lambda ==&gt; (x, y) == strategy(T t, R r) ==&gt; x=T=String, y=R=List</code></pre></li></ul><h3 id="3-8-æ–¹æ³•é‡è½½å’ŒLambdaè¡¨è¾¾å¼-05-00"><a href="#3-8-æ–¹æ³•é‡è½½å’ŒLambdaè¡¨è¾¾å¼-05-00" class="headerlink" title="3-8 æ–¹æ³•é‡è½½å’ŒLambdaè¡¨è¾¾å¼ (05:00)"></a>3-8 æ–¹æ³•é‡è½½å’ŒLambdaè¡¨è¾¾å¼ (05:00)</h3><blockquote><ul><li>Javaç±»å‹ç³»ç»Ÿä¸­çš„æ–¹æ³•é‡è½½</li><li>æ–¹æ³•é‡è½½çš„å®ç°</li><li>å½“æ–¹æ³•é‡è½½é‡ä¸ŠLambdaè¡¨è¾¾å¼</li></ul></blockquote><ol><li><p>æ¥å£æ–¹æ³•</p><pre><code class="java">interface Param1 {  void outInfo(String info);}</code></pre><pre><code class="java">interface Param2 {  void outInfo(String info);}</code></pre></li><li><p>å®šä¹‰é‡è½½æ–¹æ³•</p><pre><code class="java">public class App38 {  public void lambdaMethod(Param1 param) {    param.outInfo(&quot;hello param1 lambda&quot;);  }  public void lambdaMethod(Param2 param) {    param.outInfo(&quot;hello param2 lambda&quot;);  }}</code></pre></li><li><p>æ–¹æ³•è°ƒç”¨</p><pre><code class="java">App38 app38 = new App38();app38.lambdaMethod(new Param1() {  @Override  public void outInfo(String info) {    System.out.println(info);  }});app38.lambdaMethod(new Param2() {  @Override  public void outInfo(String info) {    System.out.println(info);  }});app38.lambdaMethod((Param2) (info) -&gt; {  System.out.println(info);});app38.lambdaMethod((Param2) System.out::println);</code></pre><pre><code>lambdaè¡¨è¾¾å¼å­˜åœ¨ç±»å‹æ£€æŸ¥ =&gt; è‡ªåŠ¨æ¨å¯¼lambdaè¡¨è¾¾å¼çš„ç›®æ ‡ç±»å‹lambdaMethod() =&gt; æ–¹æ³• =&gt; é‡è½½æ–¹æ³•        =&gt; Param1 å‡½æ•°å¼æ¥å£        =&gt; Param2 å‡½æ•°å¼æ¥å£       è°ƒç”¨æ–¹æ³• =&gt; ä¼ é€’Lambdaè¡¨è¾¾å¼ =&gt; è‡ªåŠ¨æ¨å¯¼ =&gt; Param1 | Param2</code></pre></li></ol><h3 id="3-9-Lmabdaè¡¨è¾¾å¼åº•å±‚æ„å»ºåŸç†-06-19"><a href="#3-9-Lmabdaè¡¨è¾¾å¼åº•å±‚æ„å»ºåŸç†-06-19" class="headerlink" title="3-9 Lmabdaè¡¨è¾¾å¼åº•å±‚æ„å»ºåŸç† (06:19)"></a>3-9 Lmabdaè¡¨è¾¾å¼åº•å±‚æ„å»ºåŸç† (06:19)</h3><blockquote><ul><li>Lambdaè¡¨è¾¾å¼åº•å±‚è§£æè¿è¡ŒåŸç†</li><li>Lambdaè¡¨è¾¾å¼åœ¨JVMåº•å±‚è§£ææˆç§æœ‰é™æ€æ–¹æ³•å’ŒåŒ¿åå†…éƒ¨ç±»å‹</li><li>é€šè¿‡å®ç°æ¥å£çš„åŒ¿åå†…éƒ¨ç±»å‹ä¸­æ¥å£æ–¹æ³•è°ƒç”¨é™æ€å®ç°æ–¹æ³•ï¼Œå®ŒæˆLambdaè¡¨è¾¾å¼çš„æ‰§è¡Œ</li></ul></blockquote><ol><li><p>æºç </p><pre><code class="java">public class App39 {  public static void main(String[] args) {    IMarkUp mu = (message) -&gt; System.out.println(message);    mu.markUp(&quot;Lambda!&quot;);  }}interface IMarkUp {  void markUp(String msg);}</code></pre></li><li><p>ç¼–è¯‘æºä»£ç </p><pre><code class="shell">javac App39.java</code></pre></li><li><p>åç¼–è¯‘æŸ¥çœ‹ç¼–è¯‘åçš„ä»£ç </p><pre><code class="shell">javap -p App39</code></pre><pre><code class="java">public class App39 {  public App39();  public static void main(java.lang.String[]);  private static void lambda$main$0(java.lang.String);}</code></pre></li><li><p>æŸ¥çœ‹åº•å±‚è¯¦ç»†ç¼–è¯‘è¿‡ç¨‹</p><pre><code class="shell">java -Djdk.internal.lambda.dumpProxyClasses App39</code></pre><pre><code class="shell">javap -p App39\$\$Lambda\$1</code></pre><pre><code class="java">final class App39$$Lambda$1 implements IMarkUp {  private App39$$Lambda$1();  public void markUp(java.lang.String);}</code></pre></li><li><p>æœ€ç»ˆè¿è¡Œæºç </p><pre><code class="java">public class App39 {  public static void main(String[] args) {    new App39$$Lambda$1().markUp(&quot;Lambda!&quot;);  }  private static void lambda$main$0(java.lang.String message){    System.out.println(message);  }  final class App39$$Lambda$1 implements IMarkUp {    private App39$$Lambda$1() { }    public void markUp(java.lang.String msg) {      App39.lambda$main$0(msg);    }  }}interface IMarkUp {  void markUp(String msg);}</code></pre></li></ol><h2 id="ç¬¬4ç« -Lambdaè¡¨è¾¾å¼åœ¨é›†åˆä¸­çš„è¿ç”¨"><a href="#ç¬¬4ç« -Lambdaè¡¨è¾¾å¼åœ¨é›†åˆä¸­çš„è¿ç”¨" class="headerlink" title="ç¬¬4ç«  Lambdaè¡¨è¾¾å¼åœ¨é›†åˆä¸­çš„è¿ç”¨"></a>ç¬¬4ç«  Lambdaè¡¨è¾¾å¼åœ¨é›†åˆä¸­çš„è¿ç”¨</h2><blockquote><p>ä»‹ç»æ–¹æ³•å¼•ç”¨ã€Java Stream å¦‚ä½•æ“ä½œé›†åˆåŠåº•å±‚åŸç†ã€‚</p></blockquote><h3 id="4-1-æ–¹æ³•å¼•ç”¨-12-19"><a href="#4-1-æ–¹æ³•å¼•ç”¨-12-19" class="headerlink" title="4-1 æ–¹æ³•å¼•ç”¨ (12:19)"></a>4-1 æ–¹æ³•å¼•ç”¨ (12:19)</h3><blockquote><ul><li>æ–¹æ³•å¼•ç”¨</li><li>Stream API</li><li>Streamæ“ä½œåŸç†</li><li>æ“ä½œé›†åˆå…ƒç´ </li></ul></blockquote><p>Lambdaè¡¨è¾¾å¼æ–¹æ³•å¼•ç”¨</p><blockquote><ul><li>æ–¹æ³•å¼•ç”¨æ˜¯ç»“åˆLambdaè¡¨è¾¾å¼çš„ä¸€ç§è¯­æ³•ç‰¹æ€§</li><li>é™æ€æ–¹æ³•å¼•ç”¨ã€å®ä¾‹æ–¹æ³•å¼•ç”¨ã€æ„é€ æ–¹æ³•å¼•ç”¨</li></ul></blockquote><ol><li><p>Personç±»å‹</p><pre><code class="java">@Data@AllArgsConstructor@NoArgsConstructorclass Person {  private String name;// å§“å  private String gender;// æ€§åˆ«  private int age;//å¹´é¾„  // é™æ€æ–¹æ³•  public static int compareByAge(Person p1, Person p2) {    return p1.getAge() - p2.getAge();  }  // å®ä¾‹æ–¹æ³•  public int compareByName(Person p1, Person p2) {    return p1.getName().hashCode() - p2.getName().hashCode();  }}@FunctionalInterfaceinterface IPerson {  // æŠ½è±¡æ–¹æ³•ï¼šé€šè¿‡æŒ‡å®šç±»å‹çš„æ„é€ æ–¹æ³•åˆå§‹åŒ–å¯¹è±¡æ•°æ®  Person initPerson(String name, String gender, int age);}</code></pre></li><li><p>å­˜å‚¨Personå¯¹è±¡çš„åˆ—è¡¨</p><pre><code class="java">List&lt;Person&gt; personList = new ArrayList&lt;&gt;();personList.add(new Person(&quot;tom&quot;, &quot;ç”·&quot;, 16));personList.add(new Person(&quot;jerry&quot;, &quot;å¥³&quot;, 15));personList.add(new Person(&quot;shuke&quot;, &quot;ç”·&quot;, 30));personList.add(new Person(&quot;beita&quot;, &quot;å¥³&quot;, 26));personList.add(new Person(&quot;damu&quot;, &quot;ç”·&quot;, 32));</code></pre></li><li><p>è¿›è¡Œæ’åº</p><ul><li><p>åŒ¿åå†…éƒ¨ç±»å®ç°æ–¹å¼</p><pre><code class="java">Collections.sort(personList, new Comparator&lt;Person&gt;() {  @Override  public int compare(Person o1, Person o2) {    return o1.getAge() - o2.getAge();  }});</code></pre></li><li><p>Lambdaè¡¨è¾¾å¼å®ç°æ–¹å¼</p><pre><code class="java">Collections.sort(personList, (o1, o2) -&gt; {  return o1.getAge() - o2.getAge();});</code></pre></li><li><p>é™æ€æ–¹æ³•å¼•ç”¨</p><pre><code class="java">Collections.sort(personList, Person::compareByAge);</code></pre></li><li><p>å®ä¾‹æ–¹æ³•å¼•ç”¨</p><pre><code class="java">Person p = new Person();Collections.sort(personList, p::compareByName);</code></pre></li><li><p>æ„é€ æ–¹æ³•å¼•ç”¨ï¼šç»‘å®šå‡½æ•°å¼æ¥å£</p><pre><code class="java">IPerson ip = Person::new;Person person = ip.initPerson(&quot;jerry&quot;, &quot;ç”·&quot;, 22);</code></pre></li></ul></li></ol><p>æ€»ç»“ï¼š</p><ol><li><p>é™æ€æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨</p><p>ç±»å‹åç§°.æ–¹æ³•åç§°() =&gt; ç±»å‹åç§°::é™æ€æ–¹æ³•åç§°</p></li><li><p>å®ä¾‹æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨</p><p>åˆ›å»ºç±»å‹å¯¹åº”çš„ä¸€ä¸ªå¯¹è±¡ =&gt; å¯¹è±¡åº”ç”¨::å®ä¾‹æ–¹æ³•åç§°</p></li><li><p>æ„é€ æ–¹æ³•å¼•ç”¨ï¼šç»‘å®šå‡½æ•°å¼æ¥å£</p><p>éœ€è¦æœ‰å…¨å‚æ„é€ æ–¹æ³•</p></li></ol><h3 id="4-2-Streamæ¦‚è¿°-05-16"><a href="#4-2-Streamæ¦‚è¿°-05-16" class="headerlink" title="4-2 Streamæ¦‚è¿° (05:16)"></a>4-2 Streamæ¦‚è¿° (05:16)</h3><blockquote><ul><li>ä»€ä¹ˆæ˜¯Stream</li><li>Streamçš„ä½œç”¨</li></ul></blockquote><ol><li><p>æ·»åŠ æµ‹è¯•æ•°æ®ï¼šå­˜å‚¨å¤šä¸ªè´¦å·çš„åˆ—è¡¨</p><pre><code class="java">List&lt;String&gt; accounts = new ArrayList&lt;&gt;();accounts.add(&quot;tom&quot;);accounts.add(&quot;jerry&quot;);accounts.add(&quot;beita&quot;);accounts.add(&quot;shuke&quot;);accounts.add(&quot;damu&quot;);</code></pre></li><li><p>ä¸šåŠ¡è¦æ±‚ï¼šé•¿åº¦å¤§äºç­‰äº5çš„æœ‰æ•ˆè´¦å·</p><ul><li><p>foreachå¾ªç¯</p><pre><code class="java">for (String account : accounts) {  if (account.length() &gt;= 5) {    System.out.println(&quot;æœ‰æ•ˆè´¦å·ï¼š&quot; + account);  }}</code></pre></li><li><p>è¿­ä»£æ–¹å¼è¿›è¡Œæ“ä½œ</p><pre><code class="java">Iterator&lt;String&gt; it = accounts.iterator();while (it.hasNext()) {  String account = it.next();  if (account.length() &gt;= 5) {    System.out.println(&quot;itæœ‰æ•ˆè´¦å·ï¼š&quot; + account);  }}</code></pre></li><li><p>Streamç»“åˆLambdaè¡¨è¾¾å¼ï¼Œå®Œæˆä¸šåŠ¡å¤„ç†</p><pre><code class="java">List validAccounts = accounts.stream().filter(s -&gt; s.length() &gt;= 5).collect(Collectors.toList());System.out.println(validAccounts);</code></pre></li></ul></li></ol><h3 id="4-3-Stream-API-09-27"><a href="#4-3-Stream-API-09-27" class="headerlink" title="4-3 Stream API (09:27)"></a>4-3 Stream API (09:27)</h3><blockquote><ul><li>Streamèšåˆæ“ä½œ</li><li>APIï¼šintermediateä¸­é—´/è®°å½•æ“ä½œã€æ— çŠ¶æ€|æœ‰çŠ¶æ€ã€‘</li><li>APIï¼šterminalç»ˆç»“/ç»“æŸæ“ä½œã€éçŸ­è·¯|çŸ­è·¯ã€‘</li></ul></blockquote><ol><li><p>èšåˆæ“ä½œ</p></li><li><p>Streamçš„å¤„ç†æµç¨‹</p><p>æ•°æ®æº=&gt;æ•°æ®è½¬æ¢=&gt;è·å–ç»“æœ</p></li><li><p>è·å–Streamå¯¹è±¡</p><ol><li><p>ä»é›†åˆæˆ–è€…æ•°ç»„ä¸­è·å–[**]</p><pre><code class="java">collection.stream(); // accounts.stream()collection.parallelStream();Arrays.stream(T t);</code></pre></li><li><p>BufferReader</p><pre><code class="java">java.io.bufferReader.lines();</code></pre></li><li><p>é™æ€å·¥å‚</p><pre><code class="java">java.util.stream.IntStream.range();java.nio.file.Files.walk();</code></pre></li><li><p>è‡ªå®šä¹‰æ„å»º</p><pre><code class="java">java.util.Spliterator;</code></pre></li><li><p>æ›´å¤šæ–¹å¼</p><pre><code class="java">random.ints();pattern.splitAsStream();</code></pre></li></ol></li><li><p>ä¸­é—´æ“ä½œAPI{intermediate}</p><p>æ“ä½œç»“æœæ˜¯ä¸€ä¸ªStreamï¼Œä¸­é—´æ“ä½œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„ä¸­é—´æ“ä½œã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸­é—´æ“ä½œåªæ˜¯è®°å½•æ“ä½œæ–¹å¼ï¼Œä¸ä½œå…·ä½“æ‰§è¡Œï¼Œç›´åˆ°ç»“æŸæ“ä½œå‘ç”Ÿæ—¶ï¼Œæ‰åšæ•°æ®çš„æœ€ç»ˆæ‰§è¡Œ</p><p>ä¸­é—´æ“ä½œå°±æ˜¯ä¸šåŠ¡é€»è¾‘å¤„ç†</p><p>ä¸­é—´æ“ä½œè¿‡ç¨‹ï¼š</p><ul><li><p>æ— çŠ¶æ€ï¼šæ•°æ®å¤„ç†æ—¶ï¼Œä¸å—å‰ç½®ä¸­é—´æ“ä½œçš„å½±å“</p><pre><code class="java">map/filter/peek/parallel/sequential/unorderd</code></pre></li><li><p>æœ‰çŠ¶æ€ï¼šæ•°æ®å¤„ç†æ—¶ï¼Œå—åˆ°å‰ç½®ä¸­é—´æ“ä½œçš„å½±å“</p><pre><code class="java">distinct/sorted/limit/skip</code></pre></li></ul></li><li><p>ç»ˆç»“æ“ä½œ|ç»“æŸæ“ä½œ{terminal}</p><p>éœ€è¦æ³¨æ„ï¼šä¸€ä¸ªStreamå¯¹è±¡ï¼Œåªèƒ½æœ‰ä¸€ä¸ªterminalæ“ä½œã€‚è¿™ä¸ªæ“ä½œä¸€æ—¦å‘ç”Ÿå°±ä¼šçœŸå®å¤„ç†æ•°æ®ï¼Œç”Ÿæˆå¯¹åº”çš„å¤„ç†ç»“æœ</p><p>ç»ˆç»“æ“ä½œï¼š</p><ul><li><p>éçŸ­è·¯æ“ä½œï¼šå½“å‰çš„Streamå¯¹è±¡å¿…é¡»å¤„ç†å®Œé›†åˆä¸­æ‰€æœ‰æ•°æ®ï¼Œæ‰èƒ½å¾—åˆ°å¤„ç†ç»“æœ</p><pre><code class="java">forEach/forEachOrdered/toArray/reduce/collect/min/max/count/iterator</code></pre></li><li><p>çŸ­è·¯æ“ä½œï¼ˆShort-circuitingï¼‰ï¼šå½“å‰çš„Streamå¯¹è±¡åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦æ»¡è¶³æŸä¸ªæ¡ä»¶ï¼Œå°±å¯ä»¥å¾—åˆ°ç»“æœ</p><pre><code class="java">anyMatch/allMatch/noneMatch/findFirst/findAnyç­‰</code></pre><p>é€‚ç”¨åœºæ™¯ï¼šæ— é™å¤§çš„Stream =&gt; æœ‰é™å¤§çš„Stream</p></li></ul></li></ol><h3 id="4-4-Streamæ“ä½œé›†åˆä¸­çš„æ•°æ®-ä¸Š-13-55"><a href="#4-4-Streamæ“ä½œé›†åˆä¸­çš„æ•°æ®-ä¸Š-13-55" class="headerlink" title="4-4 Streamæ“ä½œé›†åˆä¸­çš„æ•°æ®-ä¸Š (13:55)"></a>4-4 Streamæ“ä½œé›†åˆä¸­çš„æ•°æ®-ä¸Š (13:55)</h3><blockquote><ul><li>ç±»å‹è½¬æ¢ï¼šå…¶ä»–ç±»å‹ï¼ˆåˆ›å»º/è·å–ï¼‰ =&gt; Streamå¯¹è±¡</li><li>ç±»å‹è½¬æ¢ï¼šStreamå¯¹è±¡ =&gt; å…¶ä»–ç±»å‹</li><li>Streamå¸¸è§çš„APIæ“ä½œ</li></ul></blockquote><ol><li><p>æ‰¹é‡æ•°æ® =&gt; Streamå¯¹è±¡</p><ul><li><p>å¤šä¸ªæ•°æ®</p><pre><code class="java">Stream&lt;String&gt; stream1 = Stream.of(&quot;admin&quot;, &quot;tom&quot;, &quot;damu&quot;);</code></pre></li><li><p>æ•°ç»„</p><pre><code class="java">String[] strArrays = {&quot;xueqi&quot;, &quot;biyao&quot;};Stream&lt;String&gt; stream2 = Arrays.stream(strArrays);</code></pre></li><li><p>åˆ—è¡¨</p><pre><code class="java">List&lt;String&gt; list = new ArrayList&lt;&gt;();list.add(&quot;å°‘æ—&quot;);list.add(&quot;æ­¦å½“&quot;);list.add(&quot;é’åŸ&quot;);list.add(&quot;å´†å³’&quot;);list.add(&quot;å³¨çœ‰&quot;);Stream&lt;String&gt; stream3 = list.stream();</code></pre></li><li><p>é›†åˆ</p><pre><code class="java">Set&lt;String&gt; set = new HashSet&lt;&gt;();set.add(&quot;å°‘æ—ç½—æ±‰æ‹³&quot;);set.add(&quot;æ­¦å½“é•¿æ‹³&quot;);set.add(&quot;é’åŸå‰‘æ³•&quot;);Stream&lt;String&gt; stream4 = set.stream();</code></pre></li><li><p>Map</p><pre><code class="java">Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();map.put(&quot;tom&quot;, 1000);map.put(&quot;jerry&quot;, 1200);map.put(&quot;shuke&quot;, 1000);Stream&lt;Map.Entry&lt;String, Integer&gt;&gt; stream5 = map.entrySet().stream();</code></pre></li></ul></li><li><p>Streamå¯¹è±¡å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹çš„åŠŸèƒ½å°è£…</p><ul><li><p>int/long/double</p><pre><code class="java">IntStream.of(new int[]{10, 20, 30}).forEach(System.out::println);IntStream.of(10, 20, 30).forEach(System.out::println);IntStream.range(1, 5).forEach(System.out::println);IntStream.rangeClosed(1, 5).forEachOrdered(System.out::println);</code></pre></li></ul></li><li><p>Streamå¯¹è±¡ =&gt; è½¬æ¢å¾—åˆ°æŒ‡å®šçš„æ•°æ®ç±»å‹</p><ul><li><p>æ•°ç»„</p><pre><code class="java">String[] array1 = stream1.toArray(String[]::new); // [admin, tom, damu]</code></pre></li><li><p>å­—ç¬¦ä¸²</p><pre><code class="java">String str1 = stream1.collect(Collectors.joining()); // admintomdamuString str2 = stream1.collect(Collectors.joining(&quot; &quot;)); // admin tom damuString str3 = stream1.collect(Collectors.joining(&quot;,&quot;, &quot;^&quot;, &quot;$&quot;)); // ^admin,tom,damu$</code></pre></li><li><p>åˆ—è¡¨</p><pre><code class="java">List&lt;String&gt; lists = stream1.collect(Collectors.toList()); // [admin, tom, damu]</code></pre></li><li><p>é›†åˆ</p><pre><code class="java">Set&lt;String&gt; sets = stream1.collect(Collectors.toSet()); // [tom, admin, damu]</code></pre></li><li><p>Map</p><pre><code class="java">Map&lt;String, String&gt; maps = stream1.collect(Collectors.toMap(x -&gt; x, y -&gt; &quot;value:&quot; + y)); // {tom=value:tom, admin=value:admin, damu=value:damu}</code></pre></li></ul></li></ol><h3 id="4-5-Streamæ“ä½œé›†åˆä¸­çš„æ•°æ®-ä¸‹-13-29"><a href="#4-5-Streamæ“ä½œé›†åˆä¸­çš„æ•°æ®-ä¸‹-13-29" class="headerlink" title="4-5 Streamæ“ä½œé›†åˆä¸­çš„æ•°æ®-ä¸‹ (13:29)"></a>4-5 Streamæ“ä½œé›†åˆä¸­çš„æ•°æ®-ä¸‹ (13:29)</h3><ol start="4"><li><p>Streamä¸­å¸¸è§çš„APIæ“ä½œ</p><pre><code class="java">List&lt;String&gt; accountList = new ArrayList&lt;&gt;();accountList.add(&quot;songjiang&quot;);accountList.add(&quot;lujunyi&quot;);accountList.add(&quot;wuyong&quot;);accountList.add(&quot;linchong&quot;);accountList.add(&quot;luzhishen&quot;);accountList.add(&quot;likui&quot;);accountList.add(&quot;wusong&quot;);</code></pre><ul><li><p>map() ä¸­é—´æ“ä½œï¼Œmap()æ–¹æ³•æ¥æ”¶ä¸€ä¸ªFunctionalæ¥å£</p><pre><code class="java">accountList = accountList.stream().map(x -&gt; &quot;æ¢å±±å¥½æ±‰ï¼š&quot; + x).collect(Collectors.toList()); // åœ¨æ¯ä¸ªåå­—å‰æ·»åŠ &quot;æ¢å±±å¥½æ±‰&quot;</code></pre></li><li><p>filter() æ·»åŠ è¿‡æ»¤æ¡ä»¶ï¼Œè¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„ç”¨æˆ·</p><pre><code class="java">accountList = accountList.stream().filter(x -&gt; x.length() &gt; 5).collect(Collectors.toList()); // è¿‡æ»¤åå­—é•¿åº¦å¤§äº5çš„åå­—</code></pre></li><li><p>forEachå¢å¼ºå‹å¾ªç¯</p><pre><code class="java">accountList.forEach(x -&gt; System.out.println(&quot;forEach:&quot; + x));</code></pre></li><li><p>peek()ä¸­é—´æ“ä½œï¼Œè¿­ä»£æ•°æ®å®Œæˆæ•°æ®çš„ä¾æ¬¡å¤„ç†è¿‡ç¨‹</p><pre><code class="java">accountList.stream()                .peek(x -&gt; System.out.println(&quot;peek 1:&quot; + x))                .peek(x -&gt; System.out.println(&quot;peek 2:&quot; + x))                .forEach(x -&gt; System.out.println(&quot;forEach:&quot; + x));</code></pre></li></ul></li><li><p>Streamä¸­å¯¹äºæ•°å­—è¿ç®—çš„æ”¯æŒ</p><pre><code class="java">List&lt;Integer&gt; intList = new ArrayList&lt;&gt;();intList.add(20);intList.add(19);intList.add(7);intList.add(8);intList.add(86);intList.add(11);intList.add(3);intList.add(20);</code></pre><ul><li><p>skip()ä¸­é—´æ“ä½œï¼Œæœ‰çŠ¶æ€ï¼Œè·³è¿‡éƒ¨åˆ†æ•°æ®</p><pre><code class="java">intList.stream().skip(3).forEach(System.out::println); // 8 86 11 3 20</code></pre></li><li><p>limit()ä¸­é—´æ“ä½œï¼Œæœ‰çŠ¶æ€ï¼Œé™åˆ¶è¾“å‡ºæ•°æ®é‡</p><pre><code class="java">intList.stream().skip(3).limit(2).forEach(System.out::println); // 8 86</code></pre></li><li><p>distinct()ä¸­é—´æ“ä½œï¼Œæœ‰çŠ¶æ€ï¼Œå‰”é™¤é‡å¤çš„æ•°æ®</p><pre><code class="java">intList.stream().distinct().forEach(System.out::println);</code></pre></li><li><p>sorted()ä¸­é—´æ“ä½œï¼Œæœ‰çŠ¶æ€ï¼Œæ’åºã€‚ä¸€èˆ¬åœ¨skip/limitæˆ–è€…filterä¹‹åè¿›è¡Œ</p></li><li><p>max()è·å–æœ€å¤§å€¼</p><pre><code class="java">// Optional&lt;Integer&gt; max = intList.stream().max((x, y) -&gt; x - y);Optional&lt;Integer&gt; max = intList.stream().max(Comparator.comparingInt(x -&gt; x));System.out.println(max.get()); // 86</code></pre></li><li><p>min()è·å–æœ€å°å€¼</p></li><li><p>reduce()åˆå¹¶å¤„ç†æ•°æ®</p><pre><code class="java">// Optional&lt;Integer&gt; reduce = intList.stream().reduce((sum, x) -&gt; sum + x);Optional&lt;Integer&gt; reduce = intList.stream().reduce(Integer::sum);System.out.println(reduce.get()); // 174</code></pre></li></ul></li></ol><h2 id="ç¬¬5ç« -Lambdaè¡¨è¾¾å¼åœ¨å®é™…ç”Ÿäº§ä¸­çš„åº”ç”¨"><a href="#ç¬¬5ç« -Lambdaè¡¨è¾¾å¼åœ¨å®é™…ç”Ÿäº§ä¸­çš„åº”ç”¨" class="headerlink" title="ç¬¬5ç«  Lambdaè¡¨è¾¾å¼åœ¨å®é™…ç”Ÿäº§ä¸­çš„åº”ç”¨"></a>ç¬¬5ç«  Lambdaè¡¨è¾¾å¼åœ¨å®é™…ç”Ÿäº§ä¸­çš„åº”ç”¨</h2><blockquote><p>æ‰‹æŠŠæ‰‹ä½¿ç”¨lambdaè¡¨è¾¾å¼å¯¹ä¸€ä¸ªé¡¹ç›®è¿›è¡Œé‡æ„ï¼Œåˆ†ææ€§èƒ½é—®é¢˜ã€çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚æœ€åç»™è¯¾ç¨‹åšä¸€ä¸ªæ€»ç»“ã€‚</p></blockquote><h3 id="5-1-Lambdaè¡¨è¾¾å¼é‡æ„é¡¹ç›®-14-06"><a href="#5-1-Lambdaè¡¨è¾¾å¼é‡æ„é¡¹ç›®-14-06" class="headerlink" title="5-1 Lambdaè¡¨è¾¾å¼é‡æ„é¡¹ç›® (14:06)"></a>5-1 Lambdaè¡¨è¾¾å¼é‡æ„é¡¹ç›® (14:06)</h3><ol><li><p>ORMæŸ¥è¯¢ç­–ç•¥æ¥å£</p><pre><code class="java">@FunctionalInterfacepublic interface IStrategy&lt;T&gt; {  /**   * æµ‹è¯•æ–¹æ³•   *   * @param t è¦æµ‹è¯•çš„å¯¹è±¡   * @return è¿”å›æµ‹è¯•ç»“æœ   */  boolean test(T t);}</code></pre></li><li><p>æŒ‰ç…§æŒ‡å®šç­–ç•¥æŸ¥è¯¢æ•°æ®</p><pre><code class="java">@Overridepublic List&lt;Employee&gt; findByStrategy(IStrategy strategy) {  List&lt;Employee&gt; tempList = new ArrayList&lt;&gt;();  for (Employee employee : LIST) {    if (strategy.test(employee)) {      tempList.add(employee);    }  }  return tempList;}</code></pre></li><li><p>æ ¹æ®èŒå‘˜åç§°è·å–èŒå‘˜æ•°æ®</p><pre><code class="java">public List&lt;Employee&gt; getEmployeeByName(String name) {  return empDAO.findByStrategy((IStrategy&lt;Employee&gt;) employee -&gt; employee.getEmpName().contains(name));}</code></pre></li></ol><p>Lambdaè¡¨è¾¾å¼-ä»£ç é‡æ„</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gdvx5g9jrtj30nm0aojuh.jpg" alt="Lambdaè¡¨è¾¾å¼-ä»£ç é‡æ„" style="zoom:80%;" /><h3 id="5-2-Lambdaå’ŒStreamæ€§èƒ½é—®é¢˜-16-26"><a href="#5-2-Lambdaå’ŒStreamæ€§èƒ½é—®é¢˜-16-26" class="headerlink" title="5-2 Lambdaå’ŒStreamæ€§èƒ½é—®é¢˜ (16:26)"></a>5-2 Lambdaå’ŒStreamæ€§èƒ½é—®é¢˜ (16:26)</h3><ol><li><p>åŸºæœ¬æ•°æ®ç±»å‹ï¼šæ•´å‹</p><pre><code class="java">List&lt;Integer&gt; integerList = new ArrayList&lt;&gt;();for (int i = 0; i &lt; 1000000; i++) {  integerList.add(random.nextInt());}// 1) Stream 64ms// 2) parallelStream 5ms// 3) æ™®é€šforå¾ªç¯ 14ms// 4) æ™®é€šforeachå¾ªç¯ 12ms// 5) å¢å¼ºå‹forå¾ªç¯ 11ms// 6) è¿­ä»£å™¨ 11ms</code></pre><ul><li><p>Stream</p><pre><code class="java">public static int testStream(List&lt;Integer&gt; list) {  return list.stream().max(Integer::compare).orElse(0);}</code></pre></li><li><p>parallelStream</p><pre><code class="java">public static int testParallelStream(List&lt;Integer&gt; list) {  return list.parallelStream().max(Integer::compare).orElse(0);}</code></pre></li><li><p>æ™®é€šforå¾ªç¯</p><pre><code class="java">public static int testForLoop(List&lt;Integer&gt; list) {  int max = Integer.MIN_VALUE;  for (int i = 0; i &lt; list.size(); i++) {    Integer current = list.get(i);    if (current &gt; max) {      max = current;    }  }  return max;}</code></pre></li><li><p>æ™®é€šforeachå¾ªç¯</p><pre><code class="java">public static int testForEach(List&lt;Integer&gt; list) {  int max = Integer.MIN_VALUE;  for (Integer current : list) {    if (current &gt; max) {      max = current;    }  }  return max;}</code></pre></li><li><p>å¢å¼ºå‹forå¾ªç¯</p><pre><code class="java">public static int testStrongLoop(List&lt;Integer&gt; list) {  final int[] max = {Integer.MIN_VALUE};  list.forEach(current -&gt; {    if (current &gt; max[0]) {      max[0] = current;    }  });  return max[0];}</code></pre></li><li><p>è¿­ä»£å™¨</p><pre><code class="java">public static int testIterator(List&lt;Integer&gt; list) {  int max = Integer.MIN_VALUE;  Iterator&lt;Integer&gt; it = list.iterator();  while (it.hasNext()) {    Integer current = it.next();    if (current &gt; max) {      max = current;    }  }  return max;}</code></pre></li></ul></li><li><p>å¤æ‚æ•°æ®ç±»å‹ï¼šå¯¹è±¡</p><pre><code class="java">@Data@AllArgsConstructorclass Product {    private String name; // åç§°    private Integer stock; //åº“å­˜    private Integer hot; //çƒ­åº¦}</code></pre><pre><code class="java">List&lt;Product&gt; productList = new ArrayList&lt;&gt;();for (int i = 0; i &lt; 1_000_000; i++) {  productList.add(new Product(&quot;pro_&quot; + i, i, random.nextInt()));}// 1) Stream 92ms// 2) parallelStream 30ms// 3) æ™®é€šforå¾ªç¯ 16ms// 4) æ™®é€šforeachå¾ªç¯ 17ms// 5) å¢å¼ºå‹forå¾ªç¯ 12ms// 6) è¿­ä»£å™¨ 16ms</code></pre><ul><li><p>Stream</p><pre><code class="java">public static Product testProductStream(List&lt;Product&gt; list) {  return list.stream().max(Comparator.comparingInt(Product::getHot)).orElse(null);}</code></pre></li><li><p>parallelStream</p><pre><code class="java">public static Product testProductParallelStream(List&lt;Product&gt; list) {  return list.parallelStream().max(Comparator.comparingInt(Product::getHot)).orElse(null);}</code></pre></li><li><p>æ™®é€šforå¾ªç¯</p><pre><code class="java">public static Product testProductForLoop(List&lt;Product&gt; list) {  Product maxHot = list.get(0);  for (int i = 0; i &lt; list.size(); i++) {    Product current = list.get(i);    if (current.getHot() &gt; maxHot.getHot()) {      maxHot = current;    }  }  return maxHot;}</code></pre></li><li><p>æ™®é€šforeachå¾ªç¯</p><pre><code class="java">public static Product testProductForEach(List&lt;Product&gt; list) {  Product maxHot = list.get(0);  for (Product current : list) {    if (current.getHot() &gt; maxHot.getHot()) {      maxHot = current;    }  }  return maxHot;}</code></pre></li><li><p>å¢å¼ºå‹forå¾ªç¯</p><pre><code class="java">public static Product testProductStrongLoop(List&lt;Product&gt; list) {  final Product[] maxHot = {list.get(0)};  list.forEach(current -&gt; {    if (current.getHot() &gt; maxHot[0].getHot()) {      maxHot[0] = current;    }  });  return maxHot[0];}</code></pre></li><li><p>è¿­ä»£å™¨</p><pre><code class="java">public static Product testProductIterator(List&lt;Product&gt; list) {  Product maxHot = list.get(0);  Iterator&lt;Product&gt; it = list.iterator();  while (it.hasNext()) {    Product current = it.next();    if (current.getHot() &gt; maxHot.getHot()) {      maxHot = current;    }  }  return maxHot;}</code></pre></li></ul></li></ol><h3 id="5-3-çº¿ç¨‹å®‰å…¨é—®é¢˜-06-53"><a href="#5-3-çº¿ç¨‹å®‰å…¨é—®é¢˜-06-53" class="headerlink" title="5-3 çº¿ç¨‹å®‰å…¨é—®é¢˜ (06:53)"></a>5-3 çº¿ç¨‹å®‰å…¨é—®é¢˜ (06:53)</h3><p>Streamå¹¶è¡Œè¿è¡ŒåŸç†</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gdvzx33xcpj30lr0b2754.jpg" alt="Streamå¹¶è¡Œè¿è¡ŒåŸç†" style="zoom:80%;" /><pre><code class="java">List&lt;Integer&gt; list1 = new ArrayList&lt;&gt;();for (int i = 0; i &lt; 1000; i++) {  list1.add(i);}System.out.println(list1.size());</code></pre><ul><li><p>ä¸²è¡ŒStream</p><pre><code class="java">List&lt;Integer&gt; list2 = new ArrayList&lt;&gt;();list1.forEach(list2::add);System.out.println(list2.size());</code></pre></li><li><p>å¹¶è¡ŒStreamï¼Œçº¿ç¨‹ä¸å®‰å…¨</p><pre><code class="java">List&lt;Integer&gt; list3 = new ArrayList&lt;&gt;();list1.parallelStream().forEach(list3::add);System.out.println(list3.size());</code></pre></li><li><p>è§£å†³å¹¶è¡ŒStreamçº¿ç¨‹å®‰å…¨é—®é¢˜</p><pre><code class="java">List&lt;Integer&gt; list4 = list1.parallelStream().collect(Collectors.toList());System.out.println(list4.size());</code></pre></li></ul><h3 id="5-4-è¯¾ç¨‹æ€»ç»“-00-59"><a href="#5-4-è¯¾ç¨‹æ€»ç»“-00-59" class="headerlink" title="5-4 è¯¾ç¨‹æ€»ç»“ (00:59)"></a>5-4 è¯¾ç¨‹æ€»ç»“ (00:59)</h3><blockquote><ul><li>Lambdaè¡¨è¾¾å¼</li><li>Streamå¯¹è±¡ï¼Œæ‰¹é‡æ•°æ®å¤„ç†å¢å¼º</li><li>é¡¹ç›®ä»£ç é‡æ„å’Œå¹¶å‘æ€§èƒ½é—®é¢˜</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>05-å¤§å’–ç²¾å½©å†…å®¹èŸèƒ</title>
      <link href="/imooc/1297-MQ-Kafka/05-wonderful-content/"/>
      <url>/imooc/1297-MQ-Kafka/05-wonderful-content/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="5-1-ã€é£é—´å½±æœˆã€‘ç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆè½åœ°å®ä¾‹"><a href="#5-1-ã€é£é—´å½±æœˆã€‘ç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆè½åœ°å®ä¾‹" class="headerlink" title="5-1 ã€é£é—´å½±æœˆã€‘ç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆè½åœ°å®ä¾‹"></a>5-1 ã€é£é—´å½±æœˆã€‘ç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆè½åœ°å®ä¾‹</h2><blockquote><p>ç”¨æˆ·é€šè¿‡æŸ¥è¯¢æ¡ä»¶å‚æ•°è¯·æ±‚APIï¼Œä¸è®ºæŸ¥è¯¢ç»“æœæ˜¯å¦ä¸ºç©ºï¼Œéƒ½åº”å°†å‚æ•°å€¼ä¸å…¶å¯¹åº”çš„æŸ¥è¯¢ç»“æœæ”¾å…¥åˆ°Redisç¼“å­˜ä¸­ã€‚å½“å‚æ•°å¯¹åº”çš„ç»“æœé›†åœ¨æ•°æ®åº“ä¸­å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¹Ÿåº”ç«‹å³ä¿®æ”¹Redisç¼“å­˜ä¸­çš„å€¼</p></blockquote><h2 id="5-2-ã€å‡Œæ³¢å¾®æ­¥ã€‘äº‹åŠ¡è¡¥å¿æœºåˆ¶åŸç†è§£æ"><a href="#5-2-ã€å‡Œæ³¢å¾®æ­¥ã€‘äº‹åŠ¡è¡¥å¿æœºåˆ¶åŸç†è§£æ" class="headerlink" title="5-2 ã€å‡Œæ³¢å¾®æ­¥ã€‘äº‹åŠ¡è¡¥å¿æœºåˆ¶åŸç†è§£æ"></a>5-2 ã€å‡Œæ³¢å¾®æ­¥ã€‘äº‹åŠ¡è¡¥å¿æœºåˆ¶åŸç†è§£æ</h2><p>ä»€ä¹ˆæ˜¯äº‹åŠ¡è¡¥å¿æœºåˆ¶ï¼Ÿ</p><blockquote><p>é’ˆå¯¹æ¯ä¸ªæ“ä½œï¼Œéƒ½è¦æ³¨å†Œä¸€ä¸ªä¸å…¶å¯¹åº”çš„è¡¥å¿ï¼ˆæ’¤é”€ï¼‰æ“ä½œã€‚åœ¨æ‰§è¡Œå¤±è´¥æ—¶ï¼Œè°ƒç”¨è¡¥å¿æ“ä½œï¼Œæ’¤é”€ä¹‹å‰çš„æ“ä½œ</p></blockquote><p>ä¼˜ç¼ºç‚¹ï¼š</p><blockquote><ul><li>ä¼˜ç‚¹ï¼šé€»è¾‘æ¸…æ™°ã€æµç¨‹ç®€å•</li><li>ç¼ºç‚¹ï¼šæ•°æ®ä¸€è‡´æ€§æ¯”XAè¿˜è¦å·®ï¼Œå¯èƒ½å‡ºé”™çš„ç‚¹æ¯”è¾ƒå¤š</li><li>TCCå±äºåº”ç”¨å±‚çš„ä¸€ç§è¡¥å¿æ–¹å¼ï¼Œç¨‹åºå‘˜éœ€è¦å†™å¤§é‡ä»£ç </li></ul></blockquote><h2 id="5-3-ã€å§šåŠä»™ã€‘æŠ€æœ¯è·¯çº¿VSç®¡ç†è·¯çº¿ï¼Œè¯¥è®¤çœŸè€ƒè™‘ä¸€ä¸‹èŒä¸šå‘å±•é—®é¢˜"><a href="#5-3-ã€å§šåŠä»™ã€‘æŠ€æœ¯è·¯çº¿VSç®¡ç†è·¯çº¿ï¼Œè¯¥è®¤çœŸè€ƒè™‘ä¸€ä¸‹èŒä¸šå‘å±•é—®é¢˜" class="headerlink" title="5-3 ã€å§šåŠä»™ã€‘æŠ€æœ¯è·¯çº¿VSç®¡ç†è·¯çº¿ï¼Œè¯¥è®¤çœŸè€ƒè™‘ä¸€ä¸‹èŒä¸šå‘å±•é—®é¢˜"></a>5-3 ã€å§šåŠä»™ã€‘æŠ€æœ¯è·¯çº¿VSç®¡ç†è·¯çº¿ï¼Œè¯¥è®¤çœŸè€ƒè™‘ä¸€ä¸‹èŒä¸šå‘å±•é—®é¢˜</h2><p>æŠ€æœ¯è·¯çº¿VSç®¡ç†è·¯çº¿</p><blockquote><p>ç›®æ ‡æ˜ç¡®ã€èŒä½æ¨¡å‹ã€åˆ»æ„å¼ºåŒ–</p></blockquote><p>æ¶æ„é¢†åŸŸ</p><blockquote><p>äº†è§£ä¸šåŠ¡ã€å…³æ³¨è¡Œä¸šå‘å±•ã€Big Picture</p></blockquote><blockquote><p>æ–°æŠ€æœ¯ã€ä¸šåŠ¡æ€è€ƒã€è½åœ°èƒ½åŠ›</p></blockquote><h2 id="5-4-ã€å¼ é£æ‰¬ã€‘å®¹å™¨æŠ€æœ¯ä¼—å¤šï¼Œè¯¥å¦‚ä½•æŠ€æœ¯é€‰å‹ï¼Ÿ"><a href="#5-4-ã€å¼ é£æ‰¬ã€‘å®¹å™¨æŠ€æœ¯ä¼—å¤šï¼Œè¯¥å¦‚ä½•æŠ€æœ¯é€‰å‹ï¼Ÿ" class="headerlink" title="5-4 ã€å¼ é£æ‰¬ã€‘å®¹å™¨æŠ€æœ¯ä¼—å¤šï¼Œè¯¥å¦‚ä½•æŠ€æœ¯é€‰å‹ï¼Ÿ"></a>5-4 ã€å¼ é£æ‰¬ã€‘å®¹å™¨æŠ€æœ¯ä¼—å¤šï¼Œè¯¥å¦‚ä½•æŠ€æœ¯é€‰å‹ï¼Ÿ</h2><h2 id="5-5-ã€å¤§ç›®ã€‘æ€§èƒ½è°ƒä¼˜ç›®æ ‡æ¦‚è¿°ä¸æˆ‘çš„å››æ¿æ–§åˆ†äº«"><a href="#5-5-ã€å¤§ç›®ã€‘æ€§èƒ½è°ƒä¼˜ç›®æ ‡æ¦‚è¿°ä¸æˆ‘çš„å››æ¿æ–§åˆ†äº«" class="headerlink" title="5-5 ã€å¤§ç›®ã€‘æ€§èƒ½è°ƒä¼˜ç›®æ ‡æ¦‚è¿°ä¸æˆ‘çš„å››æ¿æ–§åˆ†äº«"></a>5-5 ã€å¤§ç›®ã€‘æ€§èƒ½è°ƒä¼˜ç›®æ ‡æ¦‚è¿°ä¸æˆ‘çš„å››æ¿æ–§åˆ†äº«</h2><blockquote><p>å€ŸåŠ©ç›‘æ§é¢„é˜²é—®é¢˜ã€å‘ç°é—®é¢˜<br>å€ŸåŠ©å·¥å…·å®šä½é—®é¢˜<br>å®šæœŸå¤ç›˜ï¼Œé˜²æ­¢åŒç±»é—®é¢˜å†ç°<br>å®šå¥½è§„èŒƒï¼Œä¸€å®šç¨‹åº¦ä¸Šè§„é¿é—®é¢˜</p></blockquote><blockquote><p>åº”ç”¨æ€§èƒ½è°ƒä¼˜ã€JVMè°ƒä¼˜ã€æ•°æ®åº“è°ƒä¼˜ã€æ¶æ„è°ƒä¼˜ã€æ“ä½œç³»ç»Ÿè°ƒä¼˜</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>04-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿæ¶æ„è®¾è®¡(watcher)</title>
      <link href="/imooc/1297-MQ-Kafka/04-12-watcher-base/"/>
      <url>/imooc/1297-MQ-Kafka/04-12-watcher-base/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="ä¸€ã€watcher-åŸºç¡€è¯­æ³•"><a href="#ä¸€ã€watcher-åŸºç¡€è¯­æ³•" class="headerlink" title="ä¸€ã€watcher åŸºç¡€è¯­æ³•"></a>ä¸€ã€watcher åŸºç¡€è¯­æ³•</h2><ol><li><h3 id="Xpack-WatchsåŸºæœ¬ä½¿ç”¨ï¼š"><a href="#Xpack-WatchsåŸºæœ¬ä½¿ç”¨ï¼š" class="headerlink" title="Xpack-WatchsåŸºæœ¬ä½¿ç”¨ï¼š"></a>Xpack-WatchsåŸºæœ¬ä½¿ç”¨ï¼š</h3><blockquote><p>åˆ›å»ºä¸€ä¸ªwatcher,æ¯”å¦‚å®šä¹‰ä¸€ä¸ªtrigger æ¯ä¸ª10sé’Ÿçœ‹ä¸€ä¸‹inputé‡Œçš„æ•°æ®</p></blockquote><pre><code class="shell">PUT _xpack/watcher/watch/school_watcher</code></pre><pre><code class="json">{  &quot;trigger&quot;: {    &quot;schedule&quot;: {      &quot;interval&quot;: &quot;10s&quot;    }  },  // æŸ¥çœ‹ä»»åŠ¡ä¿¡æ¯  &quot;input&quot;: {    &quot;search&quot;: {      &quot;request&quot;: {        // ç›‘æ§å…·ä½“ç´¢å¼•        &quot;indices&quot;: [&quot;school*&quot;],        // bodyé‡Œé¢å…·ä½“äº›æœç´¢è¯­å¥        &quot;body&quot;: {          &quot;size&quot;: 0,          &quot;query&quot;: {            &quot;match&quot;: {              // æ¯”å¦‚ç´¢å¼•é‡Œé¢name æœ‰ hello åˆ™è¿›è¡ŒæŠ¥è­¦              &quot;name&quot;: &quot;hello&quot;            }          }        }      }    }  },  // å¯¹äºä¸Šé¢çš„æŸ¥è¯¢ç»“æœè¿›è¡Œæ¯”è¾ƒï¼š  &quot;condition&quot;: {    // compareè¿›è¡Œæ¯”è¾ƒ    &quot;compare&quot;: {      // ä¸Šé¢çš„queryæŸ¥è¯¢çš„ç»“æœä¼šæ”¾å…¥åˆ°ctx.payloadä¸­ï¼š      // æ¯”å¦‚è·å– ctx.payload.hits.total  ctx.payload._shards.total ç­‰ç­‰      &quot;ctx.payload.hits.total&quot;: {        &quot;gt&quot;: 0      }    }  },  // transformä½œç”¨ï¼šé‡æ–°æŸ¥è¯¢å‡ºæ–‡æ¡£å†…å®¹èµ‹å€¼ç»™ctx.payload  &quot;transform&quot;: {    &quot;search&quot;: {      &quot;request&quot;: {        &quot;indices&quot;: [&quot;school*&quot;],        &quot;body&quot;: {          &quot;size&quot;: 10,          &quot;query&quot;: {            &quot;match&quot;: {              &quot;name&quot;: &quot;hello&quot;            }          }        }      }    }  },  // æ ¹æ®ä¸Šé¢çš„æŸ¥è¯¢ã€æ¯”è¾ƒç»“æœï¼Œæ‰§è¡Œactionsé‡Œé¢å®šä¹‰çš„åŠ¨ä½œï¼ˆå®šä¹‰å¤šç§æŠ¥è­¦ç±»å‹ï¼‰  &quot;actions&quot;: {    // æŠ¥è­¦åå­—    &quot;log_hello&quot;: {      // é˜²æ­¢æŠ¥è­¦é£æš´ï¼š è®¾ç½®é˜ˆå€¼ 15må†…æ›¾ç»æŠ¥è­¦è¿‡, åˆ™ä¸æŠ¥è­¦      &quot;throttle_period&quot;: &quot;15m&quot;,      // æŠ¥è­¦æ–¹å¼ï¼šloggingã€mailã€httpç­‰      &quot;logging&quot;: {        // æŠ¥è­¦å…·ä½“å†…å®¹ï¼šä½¿ç”¨ {{ æŸ¥è¯¢å‚æ•° }} è¿›è¡Œèµ‹å€¼ï¼š        &quot;text&quot;: &quot;Found {{ctx.payload.hits.total}} hello in the school&quot;      }    }  }}</code></pre></li><li><h3 id="ctx-payloadå–å€¼è§„èŒƒï¼š"><a href="#ctx-payloadå–å€¼è§„èŒƒï¼š" class="headerlink" title="ctx.payloadå–å€¼è§„èŒƒï¼š"></a>ctx.payloadå–å€¼è§„èŒƒï¼š</h3><ul><li><p>æ¯”å¦‚æˆ‘ä»¬è¿›è¡Œsearchæœç´¢schoolé‡Œé¢name=zhangsançš„æ•°æ®ï¼š</p><pre><code class="shell">GET school/_search</code></pre><pre><code class="json">{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;name&quot;: &quot;zhangsan&quot;    }  }}</code></pre><p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹ï¼š</p><pre><code class="json">{  &quot;took&quot;: 14,  &quot;timed_out&quot;: false,  &quot;_shards&quot;: {    &quot;total&quot;: 2,    &quot;successful&quot;: 2,    &quot;skipped&quot;: 0,    &quot;failed&quot;: 0  },  &quot;hits&quot;: {    &quot;total&quot;: 1,    &quot;max_score&quot;: 1.5404451,    &quot;hits&quot;: [      {        &quot;_index&quot;: &quot;school&quot;,        &quot;_type&quot;: &quot;student&quot;,        &quot;_id&quot;: &quot;1&quot;,        &quot;_score&quot;: 1.5404451,        &quot;_source&quot;: {          &quot;name&quot;: &quot;zhangsan&quot;,          &quot;age&quot;: 25,          &quot;course&quot;: &quot;elasticsearch&quot;,          &quot;study_date&quot;: &quot;2018-06-15T20:30:50&quot;,          &quot;mark&quot;: &quot;today is a good day&quot;        }      }    ]  }}</code></pre><p>è¡¨ç¤ºæŸ¥è¯¢ï¼šctx.payloadç»“æœé›†ï¼š</p><pre><code>{{#ctx.payload.hits.hits}} {{_source.name}} {{_source.course}} {{/ctx.payload.hits.hits}}</code></pre></li><li><p>æ¯”å¦‚æˆ‘ä»¬è¿›è¡Œsearchæœç´¢schoolï¼Œå¹¶é‡‡ç”¨èšåˆçš„æ–¹å¼æ¥æŸ¥è¯¢terms courseæ•°æ®ï¼š</p><pre><code class="shell">GET school/_search</code></pre><pre><code class="json">{  &quot;size&quot; : 0,   &quot;aggs&quot; : {    &quot;myterms&quot; : {      &quot;terms&quot; : {        &quot;field&quot; : &quot;course&quot;,        &quot;size&quot; : 10      }    }  }}</code></pre><p>æŸ¥è¯¢ç»“æœï¼š</p><pre><code class="json">{  &quot;took&quot;: 11,  &quot;timed_out&quot;: false,  &quot;_shards&quot;: {    &quot;total&quot;: 2,    &quot;successful&quot;: 2,    &quot;skipped&quot;: 0,    &quot;failed&quot;: 0  },  &quot;hits&quot;: {    &quot;total&quot;: 10,    &quot;max_score&quot;: 0,    &quot;hits&quot;: []  },  &quot;aggregations&quot;: {    &quot;myterms&quot;: {      &quot;doc_count_error_upper_bound&quot;: 0,      &quot;sum_other_doc_count&quot;: 0,      &quot;buckets&quot;: [        {          &quot;key&quot;: &quot;elasticsearch&quot;,          &quot;doc_count&quot;: 7        },        {          &quot;key&quot;: &quot;good&quot;,          &quot;doc_count&quot;: 1        },        {          &quot;key&quot;: &quot;spring&quot;,          &quot;doc_count&quot;: 1        },        {          &quot;key&quot;: &quot;spring elasticsearch&quot;,          &quot;doc_count&quot;: 1        }      ]    }  }}</code></pre><p>payloadå–å€¼ä½¿ç”¨ï¼šç°åœ¨æƒ³å–å¾—ä¸Šé¢çš„hits.hitsé‡Œé¢çš„æ•°æ®å†…å®¹ï¼Œå°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p><blockquote><p>è¡¨ç¤ºæŸ¥è¯¢ï¼šctx.payloadç»“æœé›†ï¼š</p><pre><code>{{#ctx.payload.aggregations.aggsname.buckets}} {{key}} {{doc_count}} {{/ctx.payload.aggregations.aggsname.buckets}}</code></pre><p>é’ˆå¯¹è¿™é‡Œå†…å®¹å°±æ˜¯ï¼š</p><pre><code>{{#ctx.payload.aggregations.myterms.buckets}} {{key}} {{doc_count}} {{/ctx.payload.aggregations.myterms.buckets}}</code></pre></blockquote></li></ul></li><li><h3 id="watcher-APIä½¿ç”¨ï¼š"><a href="#watcher-APIä½¿ç”¨ï¼š" class="headerlink" title="watcher APIä½¿ç”¨ï¼š"></a>watcher APIä½¿ç”¨ï¼š</h3><ul><li><p>æŸ¥çœ‹ä¸€ä¸ªwatcher</p><pre><code class="shell">GET _xpack/watcher/watch/school_watcher</code></pre></li><li><p>åˆ é™¤ä¸€ä¸ªwatcher</p><pre><code class="shell">DELETE _xpack/watcher/watch/school_watcher</code></pre></li><li><p>æ‰§è¡Œwatcher</p><pre><code class="shell">POST _xpack/watcher/watch/school_watcher/_execute</code></pre></li><li><p>æŸ¥çœ‹æ‰§è¡Œç»“æœ</p><pre><code class="shell">GET /.watcher-history*/_search?pretty</code></pre><pre><code class="json">{  &quot;sort&quot; : [    { &quot;result.execution_time&quot; : &quot;desc&quot; }  ],  &quot;query&quot;: {    &quot;match&quot;: {      &quot;watch_id&quot;: &quot;school_watcher&quot;    }  }}</code></pre></li></ul></li><li><h3 id="triggersçš„å‡ ç§ç±»å‹"><a href="#triggersçš„å‡ ç§ç±»å‹" class="headerlink" title="triggersçš„å‡ ç§ç±»å‹"></a>triggersçš„å‡ ç§ç±»å‹</h3><blockquote><p>hourlyã€dailyã€weeklyã€monthlyã€yearlyã€cronã€interval</p></blockquote><ul><li><p>hourlyï¼šæ¯å°æ—¶æ‰§è¡Œ</p><blockquote><p>ä¾‹å¦‚ï¼š12:00, 12:15, 12:30, 12:45, 1:00, 1:15</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;hourly&quot; : { &quot;minute&quot; : [ 0, 15, 30, 45 ] }    }  }}</code></pre></li><li><p>dailyï¼šæ¯å¤©æ‰§è¡Œ</p><blockquote><p>æ¯å¤©00:00, 12:00, and 17:00</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;daily&quot; : { &quot;at&quot; : [ &quot;midnight&quot;, &quot;noon&quot;, &quot;17:00&quot; ] }    }  }}</code></pre><blockquote><p>æ¯å¤©00:00, 00:30, 12:00, 12:30, 17:00 and 17:30</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;daily&quot; : {        &quot;at&quot; {          &quot;hour&quot; : [ 0, 12, 17 ],          &quot;minute&quot; : [0, 30]        }      }    }  }}</code></pre></li><li><p>weeklyï¼šæŒ‡å®šæ˜ŸæœŸå‡ </p><blockquote><p>å‘¨äºŒ12:00,å‘¨äº”17:00</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;weekly&quot; : [        { &quot;on&quot; : &quot;tuesday&quot;, &quot;at&quot; : &quot;noon&quot; },        { &quot;on&quot; : &quot;friday&quot;, &quot;at&quot; : &quot;17:00&quot; }      ]    }  }}</code></pre><blockquote><p>å‘¨äºŒã€å‘¨äº”çš„17ï¼š00</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;weekly&quot; : {        &quot;on&quot; : [ &quot;tuesday&quot;, &quot;friday&quot; ],        &quot;at&quot; : [ &quot;noon&quot;, &quot;17:00&quot; ]      }    }  }}</code></pre></li><li><p>monthlyï¼šæŒ‡å®šæ¯æœˆå“ªå¤©æ‰§è¡Œ</p><blockquote><p>æ¯æœˆ10å·ä¸­åˆã€æ¯æœˆ20å·17:00</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;monthly&quot; : [        { &quot;on&quot; : 10, &quot;at&quot; : &quot;noon&quot; },        { &quot;on&quot; : 20, &quot;at&quot; : &quot;17:00&quot; }      ]    }  }}</code></pre><blockquote><p>æ¯æœˆ10å·ã€20å·çš„00:00,12:00</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;monthly&quot; : {        &quot;on&quot; : [ 10, 20 ],        &quot;at&quot; : [ &quot;midnight&quot;, &quot;noon&quot; ]      }    }  }}</code></pre></li><li><p>yearly-æŒ‡å®šæœˆã€æ—¥ã€æ—¶</p><blockquote><p>æ¯å¹´çš„1æœˆ10æ—¥12:00,æ¯å¹´çš„7æœˆ20æ—¥17:00</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;yearly&quot; : [        { &quot;in&quot; : &quot;january&quot;, &quot;on&quot; : 10, &quot;at&quot; : &quot;noon&quot; },        { &quot;in&quot; : &quot;july&quot;, &quot;on&quot; : 20, &quot;at&quot; : &quot;17:00&quot; }      ]    }  }}</code></pre><blockquote><p>æ¯å¹´1æœˆ10æ—¥ï¼Œ1æœˆ20æ—¥ï¼Œ12æœˆ10æ—¥ï¼Œ12æœˆ20æ—¥çš„12:00,00:00</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;yearly&quot; : {        &quot;in&quot; : [ &quot;jan&quot;, &quot;dec&quot; ],        &quot;on&quot; : [ 10, 20 ],        &quot;at&quot; : [ &quot;midnight&quot;, &quot;noon&quot; ]      }    }  }}</code></pre></li><li><p>cron-è¡¨è¾¾å¼</p><blockquote><p><seconds> <minutes> <hours> <day_of_month> <month> <day_of_week> [year]</p></blockquote><pre><code class="shell">0 5 9 * * ?0 0-5 9 * * ?0 0/15 9 * * ?</code></pre></li><li><p>interval-å‘¨æœŸçš„</p><blockquote><p>é—´éš”å•ä½ï¼šs:ç§’ã€m:åˆ†é’Ÿã€h:å°æ—¶ã€d:å¤©ã€w:æ˜ŸæœŸ</p></blockquote></li></ul></li><li><p>inputçš„å‡ ç§ç±»å‹ï¼š</p><blockquote><p>Simpleã€Searchã€HTTPã€Chain</p></blockquote><ul><li><p>Simple Input-é™æ€æ•°æ®</p><blockquote><p>æ¯å¤©12ç‚¹è§¦å‘</p></blockquote><pre><code class="json">{  &quot;trigger&quot; : {    &quot;schedule&quot; : {      &quot;daily&quot; : { &quot;at&quot; : &quot;noon&quot; }    }  },  &quot;input&quot; : {    &quot;simple&quot; : {      &quot;name&quot; : &quot;John&quot;    }  },  &quot;actions&quot; : {    &quot;reminder_email&quot; : {      &quot;email&quot; : {        &quot;to&quot; : &quot;to@host.domain&quot;,        &quot;subject&quot; : &quot;Reminder&quot;,        &quot;body&quot; : &quot;Dear {{ctx.payload.name}}, by the time you read these lines, I&#39;ll be gone&quot;      }    }  }}</code></pre></li><li><p>Search-æœç´¢</p><pre><code class="json">{  &quot;input&quot; : {    &quot;search&quot; : {      &quot;request&quot; : {        &quot;indices&quot; : [ &quot;logs&quot; ],        &quot;body&quot; : {          &quot;query&quot; : { &quot;match_all&quot; : {} }        }      }    }  },  &quot;condition&quot; : {    &quot;compare&quot; : { &quot;ctx.payload.hits.total&quot; : { &quot;gt&quot; : 5 }}  }    ...}</code></pre></li><li><p>Http-è¯·æ±‚</p><blockquote><p>request.host<br>request.port<br>request.path<br>request.headers<br>request.params<br>request.urlï¼šrequest.scheme, request.host, request.port and request.params<br>request.methodï¼šheadã€getã€postã€putã€delete<br>request.auth<br>request.body<br>request.proxy.host<br>request.proxy.port<br>request.connection_timeout<br>request.read_timeout<br>response_content_typeï¼šjson, yaml and text<br>extract</p></blockquote><blockquote><p>getè¯·æ±‚</p></blockquote><pre><code class="json">{  &quot;input&quot; : {    &quot;http&quot; : {      &quot;request&quot; : {        &quot;host&quot; : &quot;example.com&quot;,        &quot;port&quot; : 9200,        &quot;path&quot; : &quot;/idx/_search&quot;      }    }  }}</code></pre><blockquote><p>å«æœ‰bodyä½“å†…å®¹</p></blockquote><pre><code class="json">{  &quot;input&quot; : {    &quot;http&quot; : {      &quot;request&quot; : {        &quot;host&quot; : &quot;host.domain&quot;,        &quot;port&quot; : 9200,        &quot;path&quot; : &quot;/idx/_search&quot;,        &quot;body&quot; :  &quot;{&quot;query&quot; :  {  &quot;match&quot; : { &quot;category&quot; : &quot;event&quot;}}}&quot;      }    }  }}</code></pre><blockquote><p>å«æœ‰å‚æ•°çš„</p></blockquote><pre><code class="json">{  &quot;input&quot; : {    &quot;http&quot; : {      &quot;request&quot; : {        &quot;host&quot; : &quot;host.domain&quot;,        &quot;port&quot; : &quot;9200&quot;,        &quot;path&quot; : &quot;/_cluster/stats&quot;,        &quot;params&quot; : {          &quot;human&quot; : &quot;true&quot;         }      }    }  }}</code></pre><blockquote><p>å«æœ‰ç”¨æˆ·å¯†ç </p></blockquote><pre><code class="json">{  &quot;input&quot; : {    &quot;http&quot; : {      &quot;request&quot; : {        &quot;host&quot; : &quot;host.domain&quot;,        &quot;port&quot; : &quot;9200&quot;,        &quot;path&quot; : &quot;/myservice&quot;,        &quot;auth&quot; : {          &quot;basic&quot; : {            &quot;username&quot; : &quot;user&quot;,            &quot;password&quot; : &quot;pass&quot;          }        }      }    }  }}</code></pre><blockquote><p>ç›´æ¥è¯·æ±‚urlçš„</p></blockquote><pre><code class="json">{  &quot;input&quot; : {    &quot;http&quot; : {      &quot;request&quot; : {        &quot;url&quot; : &quot;http://api.openweathermap.org/data/2.5/weather&quot;,        &quot;params&quot; : {          &quot;lat&quot; : &quot;52.374031&quot;,          &quot;lon&quot; : &quot;4.88969&quot;,          &quot;appid&quot; : &quot;&lt;your openweathermap appid&gt;&quot;        }      }    }  }}</code></pre></li><li><p>Chain-input-åŒæ—¶è®¾ç½®å¤šä¸ªinputï¼Œä¸²è¡Œ</p><pre><code class="json">{  &quot;input&quot; : {    &quot;chain&quot; : {      &quot;inputs&quot; : [         // ç¬¬ä¸€æ­¥input        {          &quot;first&quot; : {            &quot;simple&quot; : { &quot;path&quot; : &quot;/_search&quot; }          }        },        // ç¬¬äºŒæ­¥input ï¼ˆå¯ä»¥å»ä½¿ç”¨ç¬¬ä¸€æ­¥inputè¿”å›çš„ç»“æœï¼‰        {          &quot;second&quot; : {            &quot;http&quot; : {              &quot;request&quot; : {                &quot;host&quot; : &quot;localhost&quot;,                &quot;port&quot; : 9200,                &quot;path&quot; : &quot;{{ctx.payload.first.path}}&quot;               }            }          }        }      ]    }  }}</code></pre></li></ul></li><li><h3 id="conditionæ¡ä»¶è®¾ç½®"><a href="#conditionæ¡ä»¶è®¾ç½®" class="headerlink" title="conditionæ¡ä»¶è®¾ç½®"></a>conditionæ¡ä»¶è®¾ç½®</h3><blockquote><p>å¦‚æœconditionæ¡ä»¶è¿”å›trueï¼Œåˆ™ä¼šè§¦å‘actionã€‚å¦‚æœè¿”å› falseï¼Œåˆ™å°±åœæ­¢ï¼Œä¸æ‰§è¡Œaction</p></blockquote><ul><li><p>Always Condition</p><pre><code class="json">&quot;condition&quot; : {  &quot;always&quot; : {}}</code></pre></li><li><p>Never Condition</p><pre><code class="json">&quot;condition&quot; : {  &quot;never&quot; : {}}</code></pre></li><li><p>Compare Condition ï¼ˆå’ŒæŸ¥è¯¢ç»“æœè¿›è¡Œæ¯”è¾ƒã®è¯­æ³•å¦‚ä¸‹ï¼šï¼‰</p><blockquote><p>eqã€not_eqã€gtã€gteã€ltã€lte</p></blockquote><ul><li><p>æ¯”å¦‚é”™è¯¯æ¡æ•°è¶…è¿‡äº†5æ¡è¿›è¡ŒæŠ¥è­¦ã€å“åº”é•¿æ—¶é—´è¶…è¿‡å¤šå°‘æ¯«ç§’è¿›è¡ŒæŠ¥è­¦ç­‰</p><pre><code class="json">{  &quot;condition&quot; : {    &quot;compare&quot; : {      &quot;ctx.payload.hits.total&quot; : {         &quot;gte&quot; : 5       }    }  }}</code></pre></li></ul><blockquote><p>&lt;{expression}&gt; æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½¿ç”¨ &lt;&gt; ä¸­å†™æ­£åˆ™è¡¨è¾¾å¼</p></blockquote><ul><li><p>æ¯”å¦‚ å½“å‰æ—¶é—´ - 5åˆ†é’Ÿ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚ä¸‹ï¼š</p><pre><code class="json">{  &quot;condition&quot; : {    &quot;compare&quot; : {      &quot;ctx.execution_time&quot; : {        &quot;gte&quot; : &quot;&lt;{now-5m}&gt;&quot;      }    }  }}</code></pre></li></ul><blockquote>imooc/1297-MQ-Kafka/04-12-watcher-base/ æ¯”è¾ƒï¼Œè¿™ä¸ªå°±æ˜¯æœ€å¼€å§‹çš„ç¤ºä¾‹é‡Œé¢çš„è·å–å‚æ•°æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š</blockquote><pre><code class="json">{  &quot;condition&quot; : {    &quot;compare&quot; : {      &quot;ctx.payload.aggregations.status.buckets.error.doc_count&quot; : {        &quot;not_eq&quot; : &quot;{{ctx.payload.aggregations.handled.buckets.true.doc_count}}&quot;      }    }  }}</code></pre></li><li><p>Array Compare Condition æ•°ç»„æ¯”è¾ƒ</p><blockquote><p>æ¯”å¦‚å½“å‰çš„doc_countå¤§äº25 å°±è¿›è¡ŒæŠ¥è­¦</p></blockquote><pre><code class="json">{  &quot;condition&quot;: {    &quot;array_compare&quot;: {      &quot;ctx.payload.aggregations.top_tweeters.buckets&quot; : {         &quot;path&quot;: &quot;doc_count&quot; ,        &quot;gte&quot;: {           &quot;value&quot;: 25,         }      }    }  }}</code></pre></li><li><p>Script Condition è„šæœ¬æ–¹å¼</p><pre><code class="json">{  &quot;input&quot; : {    &quot;search&quot; : {      &quot;indices&quot; : &quot;log-events&quot;,      &quot;body&quot; : {        &quot;size&quot; : 0,        &quot;query&quot; : { &quot;match&quot; : { &quot;status&quot; : &quot;error&quot; } }      }    }  },  &quot;condition&quot; : {    &quot;script&quot; : {      // å½“å‰è¿”å›çš„æ¡æ•°æ˜¯å¦å¤§äºé˜ˆå€¼ï¼Œè¿›è¡ŒæŠ¥è­¦      &quot;inline&quot; : &quot;return ctx.payload.hits.total &gt; threshold&quot;,      &quot;params&quot; : {      &quot;threshold&quot; : 5    }  }}</code></pre></li></ul></li><li><h3 id="Action-è§¦å‘å™¨"><a href="#Action-è§¦å‘å™¨" class="headerlink" title="Action è§¦å‘å™¨"></a>Action è§¦å‘å™¨</h3><ul><li><p>Email Actionâ€“å‘é€é‚®ä»¶ </p><blockquote><p>å¦‚æœä½¿ç”¨å‘é€é‚®ä»¶çš„æŠ¥è­¦ï¼Œåˆ™éœ€è¦åœ¨elasticsearch.ymlä¸­é…ç½®å‘é€é‚®ä»¶æœåŠ¡çš„ä¿¡æ¯</p></blockquote><pre><code class="yaml">xpack.notification.email:   default_account: gmail_account   account:     gmail_account:         profile: gmail         smtp:             auth: true             starttls.enable: true             host: smtp.gmail.com             port: 587             user: &lt;username&gt;             password: &lt;password&gt;     outlook_account:         profile: outlook         smtp:             auth: true             starttls.enable: true             host: smtp-mail.outlook.com             port: 587             user: &lt;username&gt;             password: &lt;password&gt;:       exchange_account:         profile: outlook         email_defaults:             from: &lt;email address of service account&gt;          smtp:             auth: true             starttls.enable: true             host: &lt;your exchange server&gt;             port: 587             user: &lt;email address of service account&gt;              password: &lt;password&gt;</code></pre><ul><li><p>å‘é€é‚®ä»¶</p><pre><code class="json">&quot;actions&quot; : {  // actionsåå­—  &quot;send_email&quot; : {     &quot;email&quot; : {       &quot;to&quot; : &quot;&#39;Recipient Name &lt;recipient@example.com&gt;&#39;&quot;,       // &quot;to&quot; : [&#39;Personal Name &lt;user1@host.domain&gt;&#39;, &#39;user2@host.domain&#39;],       &quot;subject&quot; : &quot;Watcher Notification&quot;,       &quot;body&quot; : &quot;{{ctx.payload.hits.total}} error logs found&quot;     }  }}</code></pre></li><li><p>å‘é€å«æœ‰é™„ä»¶ä¿¡æ¯çš„é‚®ä»¶</p><pre><code class="json">&quot;actions&quot; : {  &quot;email_admin&quot; : {    &quot;email&quot;: {      &quot;to&quot;: &quot;&#39;John Doe &lt;john.doe@example.com&gt;&#39;&quot;,      &quot;attachments&quot; : {        // é™„ä»¶æ–¹å¼        &quot;my_image.png&quot; : {           &quot;http&quot; : {             &quot;content_type&quot; : &quot;image.png&quot;,            &quot;request&quot; : {              &quot;url&quot;: &quot;http://example.org/foo/my-image.png&quot;             }          }        },        // xpack reportingæ’ä»¶ç”Ÿæˆæ–¹å¼ï¼š        &quot;dashboard.pdf&quot; : {          &quot;reporting&quot; : {            &quot;url&quot;: &quot;http://example.org:5601/api/reporting/generate/dashboard/Error-Monitoring&quot;          }        },        // è‡ªå®šä¹‰é™„ä»¶        &quot;data.yml&quot; : {          &quot;data&quot; : {            &quot;format&quot; : &quot;yaml&quot;           }        }      }    }  }}</code></pre></li></ul></li><li><p>Webhook Actionï¼Œå‘é€ä¸€ä¸ªhttpè¯·æ±‚</p><ul><li><p>å‘é€githubçš„issue</p><pre><code class="json">&quot;actions&quot; : {  &quot;create_github_issue&quot; : {    // å› ä¸ºå‘é‚®ä»¶åˆ°è¾¾ç‡ä¸æ˜¯ç‰¹åˆ«é«˜ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å¤–éƒ¨çš„æ¥å£è°ƒç”¨æ–¹å¼    // æ¯”å¦‚è¿™é‡Œè°ƒç”¨urlä¸ºå¤–éƒ¨çš„æ‰‹æœºçŸ­ä¿¡æ¥å£è¿›è¡Œå‘é€     &quot;webhook&quot; : {      // è¯·æ±‚æ–¹å¼      &quot;method&quot; : &quot;POST&quot;,      // å¤–éƒ¨è¯·æ±‚åœ°å€      &quot;url&quot; : &quot;https://api.github.com/repos/&lt;owner&gt;/&lt;repo&gt;/issues&quot;,      // è¯·æ±‚æŠ¥æ–‡      &quot;body&quot; : {        &quot;title&quot;: &quot;Found errors in &#39;contact.html&#39;&quot;,        &quot;body&quot;: &quot;Found {{ctx.payload.hits.total}} errors in the last 5 minutes&quot;,        &quot;assignee&quot;: &quot;web-admin&quot;,        &quot;labels&quot;: [ &quot;bug&quot;, &quot;sev2&quot; ]      },      // ç”¨æˆ·åå¯†ç       &quot;auth&quot; : {        &quot;basic&quot; : {          &quot;username&quot; : &quot;&lt;username&gt;&quot;,           &quot;password&quot; : &quot;&lt;password&gt;&quot;        }      }    }  }}</code></pre></li><li><p>å¸¦æœ‰urlå‚æ•°çš„è¯·æ±‚</p><pre><code class="json">&quot;actions&quot; : {  &quot;my_webhook&quot; : {    &quot;webhook&quot; : {      &quot;method&quot; : &quot;POST&quot;,      &quot;host&quot; : &quot;mylisteningserver&quot;,      &quot;port&quot; : 9200,      &quot;path&quot;: &quot;:/alert&quot;,      &quot;params&quot; : {        &quot;watch_id&quot; : &quot;{{ctx.watch_id}}&quot;       }    }  }}</code></pre></li><li><p>è‡ªå®šä¹‰header</p><pre><code class="json">&quot;actions&quot; : {  &quot;my_webhook&quot; : {    &quot;webhook&quot; : {      &quot;method&quot; : &quot;POST&quot;,      &quot;host&quot; : &quot;mylisteningserver&quot;,      &quot;port&quot; : 9200,      &quot;path&quot;: &quot;:/alert/{{ctx.watch_id}}&quot;,      &quot;headers&quot; : {        &quot;Content-Type&quot; : &quot;application/yaml&quot;       },      &quot;body&quot; : &quot;count: {{ctx.payload.hits.total}}&quot;    }  }}</code></pre></li></ul></li><li><p>Index Actionâ€“åˆ›å»ºç´¢å¼•æ–‡æ¡£</p><pre><code class="json">&quot;actions&quot; : {  &quot;index_payload&quot; : {     &quot;index&quot; : {      &quot;index&quot; : &quot;my-index&quot;,       &quot;doc_type&quot; : &quot;my-type&quot;,       &quot;doc_id&quot;: &quot;my-id&quot;     }  }}</code></pre></li><li><p>Logging Actionâ€“è®°å½•æ—¥å¿—</p><blockquote><p>levelï¼šerror, warn, info, debug and trace</p><p>æ—¥å¿—ç§ç±»ï¼š</p><ul><li>categoryï¼šxpack.watcher.actions.logging</li></ul></blockquote><pre><code class="json">&quot;actions&quot; : {  &quot;log&quot; : {     &quot;transform&quot; : {  },     // æ—¥å¿—æŠ¥è­¦    &quot;logging&quot; : {      &quot;text&quot; : &quot;executed at {{ctx.execution_time}}&quot;,      // æ—¥å¿—çº§åˆ«      &quot;level&quot;: &quot;info&quot;    }  }}</code></pre></li><li><p>Jira Action ä¸jiraé›†æˆ</p></li><li><p>HipChat Action</p></li><li><p>Slack Action</p></li><li><p>PagerDuty Action</p></li></ul></li><li><h3 id="ä½¿ç”¨æ¥å£çš„å½¢å¼åˆ›å»ºä¸€ä¸ªwatcher-è¿›è¡Œæ¨¡æ‹Ÿï¼š"><a href="#ä½¿ç”¨æ¥å£çš„å½¢å¼åˆ›å»ºä¸€ä¸ªwatcher-è¿›è¡Œæ¨¡æ‹Ÿï¼š" class="headerlink" title="ä½¿ç”¨æ¥å£çš„å½¢å¼åˆ›å»ºä¸€ä¸ªwatcher, è¿›è¡Œæ¨¡æ‹Ÿï¼š"></a>ä½¿ç”¨æ¥å£çš„å½¢å¼åˆ›å»ºä¸€ä¸ªwatcher, è¿›è¡Œæ¨¡æ‹Ÿï¼š</h3><ul><li><p>æ‰§watcherè„šæœ¬ï¼š</p><ul><li><p>æŸ¥è¯¢school</p><pre><code class="shell">GET school/student/_search</code></pre><pre><code class="json">{  &quot;query&quot;: {    &quot;match_all&quot;:{}  }}</code></pre></li><li><p>åˆ›å»ºschool_watcher</p><pre><code class="shell">PUT _xpack/watcher/watch/school_watcher</code></pre><pre><code class="json">{  &quot;trigger&quot;: {    &quot;schedule&quot;: {      &quot;interval&quot;: &quot;10s&quot;    }  },  &quot;input&quot;: {    &quot;search&quot;: {      &quot;request&quot;: {        &quot;indices&quot;: [&quot;school*&quot;],        &quot;body&quot;: {          &quot;size&quot;: 0,          &quot;query&quot;: {            &quot;match&quot;: {              &quot;name&quot;: &quot;hello&quot;            }          }        }      }    }  },  &quot;condition&quot;: {    &quot;compare&quot;: {      &quot;ctx.payload.hits.total&quot;: {        &quot;gt&quot;: 0      }    }  },  &quot;transform&quot;: {    &quot;search&quot;: {      &quot;request&quot;: {        &quot;indices&quot;: [&quot;school*&quot;],        &quot;body&quot;: {          &quot;size&quot;: 10,          &quot;query&quot;: {            &quot;match&quot;: {              &quot;name&quot;: &quot;hello&quot;            }          }        }      }    }  },  &quot;actions&quot;: {    &quot;log_hello&quot;: {      &quot;throttle_period&quot;: &quot;15m&quot;,      &quot;logging&quot;: {        &quot;text&quot;: &quot;Found {{ctx.payload.hits.total}} hello in the school&quot;      }    }  }}</code></pre></li><li><p>æŸ¥çœ‹watcheræ‰§è¡Œç»“æœ</p><pre><code class="shell">GET /.watcher-history*/_search?pretty</code></pre><pre><code class="json">{  &quot;sort&quot; : [    { &quot;result.execution_time&quot; : &quot;desc&quot; }  ],  &quot;query&quot;: {    &quot;match&quot;: {      &quot;watch_id&quot;: &quot;school_watcher&quot;    }  }}</code></pre></li><li><p>è¿›è¡Œæ•°æ®æµ‹è¯•ï¼š</p><pre><code class="json">POST /school/student</code></pre><pre><code class="json">{  &quot;name&quot;: &quot;hello&quot;,  &quot;age&quot;: 18,  &quot;course&quot;: &quot;elasticsearch&quot;,  &quot;study_date&quot;: &quot;2018-08-20T20:30:50&quot;,  &quot;mark&quot;: &quot;take care day day&quot;}</code></pre></li></ul></li><li><p>å¯è§†åŒ–æ“ä½œwatcherï¼Œå¯ä»¥å¯ç”¨ã€ç¦ç”¨ã€æ·»åŠ ä¿®æ”¹ã€åˆ é™¤watcher</p><blockquote><p>watchä½¿ç”¨æ–‡ç« ï¼š<a href="https://www.cnblogs.com/reboot51/p/8328720.html" target="_blank" rel="noopener">https://www.cnblogs.com/reboot51/p/8328720.html</a></p></blockquote></li></ul></li></ol><h2 id="äºŒã€watcherä½¿ç”¨ï¼š"><a href="#äºŒã€watcherä½¿ç”¨ï¼š" class="headerlink" title="äºŒã€watcherä½¿ç”¨ï¼š"></a>äºŒã€watcherä½¿ç”¨ï¼š</h2><blockquote><p>åˆ›å»ºä¸€ä¸ªwatcher,æ¯”å¦‚å®šä¹‰ä¸€ä¸ªtrigger æ¯ä¸ª10sé’Ÿçœ‹ä¸€ä¸‹inputé‡Œçš„æ•°æ®</p></blockquote><pre><code class="shell">PUT _xpack/watcher/watch/applog_error_watcher</code></pre><pre><code class="json">{  &quot;trigger&quot;: {    &quot;schedule&quot;: {      &quot;interval&quot;: &quot;10s&quot;    }  },  &quot;input&quot;: {    &quot;search&quot;: {      &quot;request&quot;: {        &quot;indices&quot;: [&quot;javalog-app-*&quot;],        &quot;body&quot;: {          &quot;size&quot;: 0,          &quot;query&quot;: {            &quot;match&quot;: {              &quot;level&quot;: &quot;ERROR&quot;            }          }        }      }    }  },  &quot;condition&quot;: {    &quot;compare&quot;: {      &quot;ctx.payload.hits.total&quot;: {        &quot;gt&quot;: 0      }    }  },  &quot;transform&quot;: {    &quot;search&quot;: {      &quot;request&quot;: {        &quot;indices&quot;: [&quot;javalog-app-*&quot;],        &quot;body&quot;: {          &quot;size&quot;: 10,          &quot;query&quot;: {            &quot;match&quot;: {              &quot;name&quot;: &quot;hello&quot;            }          }        }      }    }  },  &quot;actions&quot;: {    &quot;test_error&quot;: {      &quot;throttle_period&quot;: &quot;1m&quot;,      &quot;webhook&quot; : {        &quot;method&quot; : &quot;POST&quot;,        &quot;url&quot; : &quot;http://192.168.11.32:8001/watch&quot;,        &quot;body&quot; : &quot;{        &quot;title&quot;: &quot;å¼‚å¸¸é”™è¯¯å‘Šè­¦&quot;,        &quot;traceId&quot;: &quot;{{#ctx.payload.hits.hits}} {{_source.traceId}} {{/ctx.payload.hits.hits}}&quot;,         &quot;spanId&quot; : &quot;{{#ctx.payload.hits.hits}} {{_source.spanId}} {{/ctx.payload.hits.hits}}&quot;,        &quot;level&quot;:&quot;å‘Šè­¦çº§åˆ«P1&quot;,        &quot;body&quot;: &quot;{{#ctx.payload.hits.hits}} {{_source.messageInfo}} {{/ctx.payload.hits.hits}}&quot;      }    }  }}</code></pre><pre><code>{{#ctx.payload.hits.hits}} {{_source.traceId}} {{/ctx.payload.hits.hits}}{{#ctx.payload.hits.hits}} {{_source.spanId}} {{/ctx.payload.hits.hits}}{{#ctx.payload.hits.hits}} {{_source.messageInfo}} {{/ctx.payload.hits.hits}}</code></pre><ul><li><p>æŸ¥è¯¢error</p><pre><code class="shell">GET javalog-app-2019.01.24/_search</code></pre><pre><code class="json">{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;level.keyword&quot;: &quot;ERROR&quot;    }  }}</code></pre></li><li><p>æŸ¥çœ‹ä¸€ä¸ªwatcher</p><pre><code class="shell">GET _xpack/watcher/watch/applog_error_watcher</code></pre></li><li><p>åˆ é™¤ä¸€ä¸ªwatcher</p><pre><code class="shell">DELETE _xpack/watcher/watch/applog_error_watcher</code></pre></li><li><p>æ‰§è¡Œwatcher</p><pre><code class="shell">POST _xpack/watcher/watch/applog_error_watcher/_execute</code></pre></li><li><p>æŸ¥çœ‹æ‰§è¡Œç»“æœ</p><pre><code class="shell">GET /.watcher-history*/_search?pretty</code></pre><pre><code class="json">{  &quot;sort&quot; : [    { &quot;result.execution_time&quot; : &quot;desc&quot; }  ],  &quot;query&quot;: {    &quot;match&quot;: {      &quot;watch_id&quot;: &quot;applog_error_watcher&quot;    }  }}</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>04-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿæ¶æ„è®¾è®¡(logstash)</title>
      <link href="/imooc/1297-MQ-Kafka/04-06-logstash-base/"/>
      <url>/imooc/1297-MQ-Kafka/04-06-logstash-base/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="logstashåŸºç¡€è¯­æ³•ä¸ä½¿ç”¨"><a href="#logstashåŸºç¡€è¯­æ³•ä¸ä½¿ç”¨" class="headerlink" title="logstashåŸºç¡€è¯­æ³•ä¸ä½¿ç”¨"></a>logstashåŸºç¡€è¯­æ³•ä¸ä½¿ç”¨</h2><h3 id="1-logstashå®‰è£…ï¼š"><a href="#1-logstashå®‰è£…ï¼š" class="headerlink" title="1. logstashå®‰è£…ï¼š"></a>1. logstashå®‰è£…ï¼š</h3><ol><li><p>Macå®‰è£…</p><pre><code class="shell">brew install logstash</code></pre></li><li><p>confä¸‹é…ç½®æ–‡ä»¶è¯´æ˜</p><blockquote><p>logstashé…ç½®ï¼šconfig/logstash.yml</p><p>JVMè™šæ‹Ÿæœºé…ç½®ï¼šconfig/jvm.options</p><p>æ—¥å¿—é…ç½®ï¼šlog4j2.properties</p><p>å¯åŠ¨é…ç½®ï¼šconfig/startup.options</p></blockquote><ul><li><p>logstashé…ç½®è¯´æ˜</p><pre><code class="shell"># config/logstash.yml--path.config #  æˆ– â€“fã€‚logstashå¯åŠ¨æ—¶ä½¿ç”¨çš„é…ç½®æ–‡ä»¶--configtest # æˆ– â€“tã€‚æµ‹è¯• Logstash è¯»å–åˆ°çš„é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦èƒ½æ­£å¸¸è§£æ--logæˆ–-lï¼š# æ—¥å¿—è¾“å‡ºå­˜å‚¨ä½ç½®--pipeline.workers # æˆ– â€“wã€‚è¿è¡Œ filter å’Œ output çš„ pipeline çº¿ç¨‹æ•°é‡ã€‚é»˜è®¤æ˜¯ CPU æ ¸æ•°ã€‚å¢åŠ workerså·¥ä½œçº¿ç¨‹æ•°å¯ä»¥æœ‰æ•ˆæå‡logstashæ€§èƒ½--pipeline.batch.size # æˆ– â€“bã€‚æ¯ä¸ª Logstash pipeline çº¿ç¨‹ï¼Œåœ¨æ‰§è¡Œå…·ä½“çš„ filter å’Œ output å‡½æ•°ä¹‹å‰ï¼Œæœ€å¤šèƒ½ç´¯ç§¯çš„æ—¥å¿—æ¡æ•°--pipeline.batch.delay # æˆ– â€“uã€‚æ¯ä¸ª Logstash pipeline çº¿ç¨‹ï¼Œåœ¨æ‰“åŒ…æ‰¹é‡æ—¥å¿—çš„æ—¶å€™ï¼Œæœ€å¤šç­‰å¾…å‡ æ¯«ç§’ã€‚--verboseï¼š# è¾“å‡ºè°ƒè¯•æ—¥å¿—--debugï¼š# è¾“å‡ºæ›´å¤šçš„è°ƒè¯•æ—¥å¿—</code></pre></li><li><p>å¯åŠ¨é…ç½®ï¼Œæ¯”å¦‚å¯åŠ¨æ—¶çš„javaä½ç½®ã€LSçš„homeç­‰</p><pre><code class="shell"># config/startup.options</code></pre></li></ul></li><li><p>å¯åŠ¨logstash</p><pre><code class="shell">logstash -f script/logstash-script.conf</code></pre></li></ol><pre><code class="shell">## æ•°æ®æ”¶é›†ç›®å½•ï¼š/usr/local/logstash-6.6.0/data## æ’ä»¶ç›®å½•ï¼š/usr/local/logstash-6.6.0/vendor/bundle/jruby/1.9/gems## æŸ¥çœ‹æ’ä»¶å‘½ä»¤ï¼š/usr/local/logstash-6.6.0/bin/logstash-plugin list## æ›´æ–°æ’ä»¶å‘½ä»¤ï¼š/usr/local/logstash-6.6.0/bin/logstash-plugin update logstash-xxxx-xxxxx## å®‰è£…æ’ä»¶å‘½ä»¤ï¼š/usr/local/logstash-6.6.0/bin/logstash-plugin install logstash-xxxx-xxxxx## æ’ä»¶åœ°å€ï¼š https://github.com/logstash-plugins</code></pre><h3 id="2-logstashè¯­æ³•ä¸åŸºæœ¬ä½¿ç”¨"><a href="#2-logstashè¯­æ³•ä¸åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2. logstashè¯­æ³•ä¸åŸºæœ¬ä½¿ç”¨"></a>2. logstashè¯­æ³•ä¸åŸºæœ¬ä½¿ç”¨</h3><ol><li><p>Logstashè®¾è®¡äº†è‡ªå·±çš„DSLåŒ…æ‹¬æœ‰åŒºåŸŸï¼Œæ³¨é‡Šï¼Œæ•°æ®ç±»å‹(å¸ƒå°”å€¼ï¼Œå­—ç¬¦ä¸²ï¼Œæ•°å€¼ï¼Œæ•°ç»„ï¼Œå“ˆå¸Œ)ï¼Œæ¡ä»¶åˆ¤æ–­å­—æ®µå¼•ç”¨ç­‰ã€‚</p></li><li><p>Logstashç”¨{}æ¥å®šä¹‰åŒºåŸŸã€‚åŒºåŸŸå†…å¯ä»¥åŒ…æ‹¬æ’ä»¶åŒºåŸŸå®šä¹‰ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªåŒºåŸŸå†…å®šä¹‰å¤šä¸ªæ’ä»¶ã€‚æ’ä»¶åŒºåŸŸå†…åˆ™å¯ä»¥å®šä¹‰é”®å€¼å¯¹è®¾ç½®ã€‚</p></li><li><p>æ ¼å¼ã€è¯­æ³•ã€ä½¿ç”¨æ–¹å¼ï¼š</p><pre><code class="shell"># æ³¨é‡Š.input {  ...}filter {  ...}output {  ...}</code></pre><pre><code class="shell">## ä¸¤ä¸ªinputè®¾ç½®ï¼šinput {  file {    path =&gt; &quot;/var/log/messages&quot;    type =&gt; &quot;syslog&quot;  }  file {    path =&gt; &quot;/var/log/apache/access.log&quot;    type =&gt; &quot;apache&quot;  }}</code></pre><pre><code class="shell">## æ•°æ®ç±»å‹ï¼š## boolç±»å‹debug =&gt; true## stringç±»å‹host =&gt; &quot;hostname&quot;## numberç±»å‹port =&gt; 6789## array or listç±»å‹path =&gt; [&quot;/var/log/message&quot;,&quot;/var/log/*.log&quot;]## hashç±»å‹match =&gt; {    &quot;field1&quot; =&gt; &quot;value1&quot;    &quot;field2&quot; =&gt; &quot;value2&quot;}## codecç±»å‹codec =&gt; &quot;json&quot;##å­—æ®µå¼•ç”¨æ–¹å¼ï¼š{    &quot;agent&quot;:  &quot;Mozilla/5.0  (compatible;  MSIE  9.0)&quot;,    &quot;ip&quot;:  &quot;192.168.24.44&quot;,    &quot;request&quot;:  &quot;/index.html&quot;    &quot;response&quot;:  {        &quot;status&quot;:  200,        &quot;bytes&quot;:  52353    },    &quot;ua&quot;:  {        &quot;os&quot;:  &quot;Windows  7&quot;    }}##è·å–å­—æ®µå€¼ï¼š[response][status][ua][os]</code></pre><pre><code class="shell">## æ¡ä»¶åˆ¤æ–­conditionï¼šif EXPRESSION {  ...} else if EXPRESSION {  ...} else {  ...}==(ç­‰äº), !=(ä¸ç­‰äº), &lt;(å°äº), &gt;(å¤§äº), &lt;=(å°äºç­‰äº), &gt;=(å¤§äºç­‰äº), =~(åŒ¹é…æ­£åˆ™), !~ï¼ˆä¸åŒ¹é…æ­£åˆ™ï¼‰in(åŒ…å«), not in(ä¸åŒ…å«), and(ä¸), or(æˆ–), nand(éä¸), xor(éæˆ–)()(å¤åˆè¡¨è¾¾å¼), !()(å¯¹å¤åˆè¡¨è¾¾å¼ç»“æœå–å)</code></pre><pre><code class="shell">## ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆç¼ºå¤±æŠ¥é”™ï¼‰:input {     tcp {         port =&gt; &quot;${TCP_PORT}&quot;     } }## ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆç¼ºå¤±ä½¿ç”¨é»˜è®¤å€¼ï¼‰ï¼šinput {     tcp {         port =&gt; &quot;${TCP_PORT:54321}&quot;     } }</code></pre></li><li><p>logstashä¾‹å­ï¼š</p><pre><code class="shell">## input ä»æ ‡å‡†è¾“å…¥æµï¼šinput { stdin { } }## è¾“å…¥æ•°æ®ä¹‹å å¦‚ä½•è¿›è¡Œå¤„ç†ï¼šfilter {  ## grokï¼šè§£æå…ƒæ•°æ®æ’ä»¶,è¿™é‡Œä»inputè¾“å…¥è¿›æ¥çš„æ‰€æœ‰æ•°æ®é»˜è®¤éƒ½ä¼šå­˜æ”¾åˆ° &quot;message&quot; å­—æ®µä¸­  ## grokæä¾›å¾ˆå¤šæ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ°å€ä¸ºï¼šhttp://grokdebug.herokuapp.com/patterns  ## æ¯”å¦‚ï¼š%{COMBINEDAPACHELOG} è¡¨ç¤ºå…¶ä¸­ä¸€ç§æ­£åˆ™è¡¨è¾¾å¼ Apacheçš„è¡¨è¾¾å¼  grok {    match =&gt; { &quot;message&quot; =&gt; &quot;%{COMBINEDAPACHELOG}&quot; }  }  ## dateï¼šæ—¥æœŸæ ¼å¼åŒ–  date {    match =&gt; [ &quot;timestamp&quot; , &quot;dd/MMM/yyyy:HH:mm:ss Z&quot; ]  }}## output ä»æ ‡å‡†è¾“å‡ºæµï¼šoutput {  elasticsearch { hosts =&gt; [&quot;192.168.11.35:9200&quot;] }  stdout { codec =&gt; rubydebug }}</code></pre></li><li><p>fileæ’ä»¶ä½¿ç”¨ï¼š</p><pre><code class="shell">## fileæ’ä»¶input {    file {        path =&gt; [&quot;/var/log/*.log&quot;, &quot;/var/log/message&quot;]        type =&gt; &quot;system&quot;        start_position =&gt; &quot;beginning&quot;    }}## å…¶ä»–å‚æ•°ï¼šdiscover_interval ## è¡¨ç¤ºæ¯éš”å¤šä¹…æ£€æµ‹ä¸€ä¸‹æ–‡ä»¶ï¼Œé»˜è®¤15ç§’exclude ## è¡¨ç¤ºæ’é™¤é‚£äº›æ–‡ä»¶close_older ## æ–‡ä»¶è¶…è¿‡å¤šé•¿æ—¶é—´æ²¡æœ‰æ›´æ–°ï¼Œå°±å…³é—­ç›‘å¬ é»˜è®¤3600signore_older ## æ¯æ¬¡æ£€æŸ¥æ–‡ä»¶åˆ—è¡¨ å¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶ æœ€åä¿®æ”¹æ—¶é—´è¶…è¿‡è¿™ä¸ªå€¼ é‚£ä¹ˆå°±å¿½ç•¥æ–‡ä»¶ 86400ssincedb_path ## sincedbä¿å­˜æ–‡ä»¶çš„ä½ç½®ï¼Œé»˜è®¤å­˜åœ¨homeä¸‹ï¼ˆ/dev/nullï¼‰sincedb_write_interval ## æ¯éš”å¤šä¹…å»è®°å½•ä¸€æ¬¡ é»˜è®¤15ç§’stat_interval ## æ¯éš”å¤šä¹…æŸ¥è¯¢ä¸€æ¬¡æ–‡ä»¶çŠ¶æ€ é»˜è®¤1ç§’start_position ## ä»å¤´å¼€å§‹è¯»å–æˆ–è€…ä»ç»“å°¾å¼€å§‹è¯»å–</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>04-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿæ¶æ„è®¾è®¡</title>
      <link href="/imooc/1297-MQ-Kafka/04-kafka-log-collect/"/>
      <url>/imooc/1297-MQ-Kafka/04-kafka-log-collect/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="4-1-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-æ¶æ„è®¾è®¡è®²è§£"><a href="#4-1-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-æ¶æ„è®¾è®¡è®²è§£" class="headerlink" title="4-1 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_æ¶æ„è®¾è®¡è®²è§£"></a>4-1 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_æ¶æ„è®¾è®¡è®²è§£</h2><ul><li><p>ELKæŠ€æœ¯æ ˆçš„æ¶æ„ç¤ºæ„å›¾</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd9oxf1cp9j312y0hf75w.jpg" alt="ELKæŠ€æœ¯æ ˆçš„æ¶æ„ç¤ºæ„å›¾" style="zoom:80%;" /><blockquote><p>Kafkaåšç¼“å†²ï¼Œä¸ºBrokerï¼›Filebeatä¸ºProducerï¼›Logstashä¸ºComsumer</p></blockquote></li><li><p>æµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜æ¶æ„è®¾è®¡å›¾</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd9oyc8rbkj318g0al0uf.jpg" alt="æµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜æ¶æ„è®¾è®¡å›¾" style="zoom:80%;" /></li></ul><h2 id="4-2-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-1"><a href="#4-2-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-1" class="headerlink" title="4-2 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-1"></a>4-2 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-1</h2><p>Log4j2ï¼šæ—¥å¿—è¾“å‡ºã€æ—¥å¿—åˆ†çº§ã€æ—¥å¿—è¿‡æ»¤ã€MDCçº¿ç¨‹å˜é‡</p><ol><li><p>Mavené…ç½®</p><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;    &lt;scope&gt;test&lt;/scope&gt;    &lt;exclusions&gt;        &lt;exclusion&gt;            &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;            &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;        &lt;/exclusion&gt;    &lt;/exclusions&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;com.lmax&lt;/groupId&gt;    &lt;artifactId&gt;disruptor&lt;/artifactId&gt;    &lt;version&gt;3.3.4&lt;/version&gt;&lt;/dependency&gt;</code></pre></li><li><p>application.yml</p><pre><code class="yaml">spring:  application:    name: kafka=log-collect  http:    encoding:      charset: utf-8  jackson:    date-format: yyyy-MM-dd HH:mm:ss    time-zone: GMT+8    default-property-inclusion: non_null</code></pre></li><li><p>IndexController</p><pre><code class="java">@Slf4j@RestController(&quot;index&quot;)public class IndexController {    @GetMapping(&quot;&quot;)    public String index(){        log.info(&quot;æˆ‘æ˜¯ä¸€æ¡infoæ—¥å¿—.&quot;);        log.warn(&quot;æˆ‘æ˜¯ä¸€æ¡warnæ—¥å¿—.&quot;);        log.error(&quot;æˆ‘æ˜¯ä¸€æ¡erroræ—¥å¿—.&quot;);        return &quot;idx&quot;;    }}</code></pre></li><li><p>log4j2.xml</p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;&lt;Configuration status=&quot;INFO&quot; schema=&quot;Log4J-V2.0.xsd&quot; monitorInterval=&quot;600&quot;&gt;    &lt;Properties&gt;        &lt;Property name=&quot;LOG_HOME&quot;&gt;logs&lt;/Property&gt;        &lt;Property name=&quot;FILE_NAME&quot;&gt;kafka-log-collect&lt;/Property&gt;        &lt;Property name=&quot;patternLayout&quot;&gt;[%d{yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZZ}] [%level{length=5}] [%thread-%tid] [%logger] [%X{hostName}] [%X{ip}] [%X{applicationName}] [%F, %L, %C, %M] [%m] ## &#39;%ex&#39;%n&lt;/Property&gt;    &lt;/Properties&gt;    &lt;Appenders&gt;        &lt;Console name=&quot;CONSOLE&quot; target=&quot;SYSTEM_OUT&quot;&gt;            &lt;PatternLayout pattern=&quot;${patternLayout}&quot;/&gt;        &lt;/Console&gt;        &lt;!--å…¨é‡æ—¥å¿—--&gt;        &lt;RollingRandomAccessFile name=&quot;appAppender&quot; fileName=&quot;${LOG_HOME}/app-${FILE_NAME}.log&quot; filePattern=&quot;${LOG_HOME}/app-${FILE_NAME}-%d{yyyy-MM-dd}-%i.log&quot;&gt;            &lt;PatternLayout pattern=&quot;${patternLayout}&quot;/&gt;            &lt;Policies&gt;                &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot;/&gt;                &lt;SizeBasedTriggeringPolicy size=&quot;500M&quot;/&gt;            &lt;/Policies&gt;            &lt;DefaultRolloverStrategy max=&quot;20&quot;/&gt;        &lt;/RollingRandomAccessFile&gt;        &lt;!--é”™è¯¯æ—¥å¿—,warnçº§åˆ«ä»¥ä¸Š--&gt;        &lt;RollingRandomAccessFile name=&quot;errorAppender&quot; fileName=&quot;${LOG_HOME}/error-${FILE_NAME}.log&quot; filePattern=&quot;${LOG_HOME}/error-${FILE_NAME}-%d{yyyy-MM-dd}-%i.log&quot;&gt;            &lt;PatternLayout pattern=&quot;${patternLayout}&quot;/&gt;            &lt;Filters&gt;                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;            &lt;/Filters&gt;            &lt;Policies&gt;                &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot;/&gt;                &lt;SizeBasedTriggeringPolicy size=&quot;500M&quot;/&gt;            &lt;/Policies&gt;            &lt;DefaultRolloverStrategy max=&quot;20&quot;/&gt;        &lt;/RollingRandomAccessFile&gt;    &lt;/Appenders&gt;    &lt;Loggers&gt;        &lt;!--ä¸šåŠ¡ç›¸å…³ å¼‚æ­¥logger--&gt;        &lt;AsyncLogger name=&quot;com.tuyrk.*&quot; level=&quot;info&quot; includeLocation=&quot;true&quot;&gt;            &lt;AppenderRef ref=&quot;appAppender&quot;/&gt;        &lt;/AsyncLogger&gt;        &lt;AsyncLogger name=&quot;com.tuyrk.*&quot; level=&quot;info&quot; includeLocation=&quot;true&quot;&gt;            &lt;AppenderRef ref=&quot;errorAppender&quot;/&gt;        &lt;/AsyncLogger&gt;        &lt;Root level=&quot;info&quot;&gt;            &lt;Appender-ref ref=&quot;CONSOLE&quot;/&gt;            &lt;Appender-ref ref=&quot;appAppender&quot;/&gt;            &lt;Appender-ref ref=&quot;errorAppender&quot;/&gt;        &lt;/Root&gt;    &lt;/Loggers&gt;&lt;/Configuration&gt;</code></pre></li></ol><h2 id="4-3-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-2"><a href="#4-3-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-2" class="headerlink" title="4-3 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-2"></a>4-3 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-2</h2><pre><code class="java">@Componentpublic class InputMDC implements EnvironmentAware {    private static Environment environment;    @Override    public void setEnvironment(Environment environment) {        InputMDC.environment = environment;    }    public static void putMDC() {        MDC.put(&quot;hostName&quot;, NetUtils.getLocalHostname());        MDC.put(&quot;ip&quot;, NetUtils.getMacAddressString());        MDC.put(&quot;applicationName&quot;, environment.getProperty(&quot;spring.application.name&quot;));    }}</code></pre><pre><code class="java">@Slf4j@RestController@RequestMapping(&quot;index&quot;)public class IndexController {    @GetMapping(&quot;err&quot;)    public String err() {        InputMDC.putMDC();        try {            int a = 1 / 0;        } catch (Exception e) {            log.error(&quot;ç®—æœ¯å¼‚å¸¸&quot;, e);        }        return &quot;err&quot;;    }}</code></pre><pre><code>http://localhost:8081/kafka/indexhttp://localhost:8081/kafka/index/err</code></pre><h2 id="4-4-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-1"><a href="#4-4-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-1" class="headerlink" title="4-4 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-1"></a>4-4 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-1</h2><p>FileBeatï¼šå®‰è£…å…¥é—¨ã€é…ç½®æ–‡ä»¶ã€å¯¹æ¥Kafkaã€å®æˆ˜åº”ç”¨</p><ol><li><p>filebeatå®‰è£…</p><pre><code class="shell">brew install filebeat</code></pre></li><li><p>é…ç½®filebeatï¼Œå¯ä»¥å‚è€ƒfilebeat.full.ymlï¼ˆæŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®æ¥å¯åŠ¨filebeatï¼‰</p><pre><code class="shell">vim ~/Develop/1297-kafka/src/main/resources/filebeat.yml</code></pre><pre><code class="yaml">filebeat.prospectors:- input_type: log  paths: # æ—¥å¿—è·¯å¾„    ## app-æœåŠ¡åç§°.logï¼Œä¸ºä»€ä¹ˆå†™æ­»ï¼Ÿé˜²æ­¢å‘ç”Ÿè½®è½¬æŠ“å–å†å²æ•°æ®    - /Users/tuyuankun/Develop/1297-kafka/logs/app-kafka-log-collect.log  # å®šä¹‰å†™å…¥ESæ—¶çš„_typeå€¼  document_type: &quot;app-log&quot;  multiline:    # pattern: &#39;^\s*(\d{4}|\d{2})\-(\d{2}|[a-zA-Z]{3})\-(\d{2}|\d{4})&#39; # æŒ‡å®šåŒ¹é…çš„è¡¨è¾¾å¼ï¼ˆé…ç½®ï¼‰    pattern: &#39;^\[&#39;      # æŒ‡å®šé…ç½®çš„è¡¨è¾¾å¼ï¼ˆåŒ¹é…ä»¥&quot;{å¼€å¤´çš„å­—ç¬¦ä¸²ï¼‰    nagate: true        # æ˜¯å¦åŒ¹é…åˆ°    match: after        # åˆå¹¶åˆ°ä¸Šä¸€è¡Œçš„æœ«å°¾    max_lines: 2000     # æœ€å¤§çš„è¡Œæ•°    timeout: 2s         # å¦‚æœåœ¨è§„å®šæ—¶é—´æ²¡æœ‰æ–°çš„æ—¥å¿—äº‹ä»¶å°±ä¸ç­‰å¾…åé¢çš„æ—¥å¿—ï¼ŒæŠŠå·²æ”¶é›†åˆ°çš„å°±æ¨é€åˆ°å…¶ä»–åœ°æ–¹  fields:    logbiz: kafka-log-collect   # åº”ç”¨åç§°    logtopic: app-kafka-log-collect # æŒ‰æœåŠ¡åˆ’åˆ†ç”¨ä½œkafka topic    evn: dev- input_type: log  paths: # æ—¥å¿—è·¯å¾„    - /Users/tuyuankun/Develop/1297-kafka/logs/error-kafka-log-collect.log  document_type: &quot;error-log&quot;  multiline:    # pattern: &#39;^\s*(\d{4}|\d{2})\-(\d{2}|[a-zA-Z]{3})\-(\d{2}|\d{4})&#39; # æŒ‡å®šåŒ¹é…çš„è¡¨è¾¾å¼ï¼ˆé…ç½®ï¼‰    pattern: &#39;^\[&#39;      # æŒ‡å®šé…ç½®çš„è¡¨è¾¾å¼ï¼ˆåŒ¹é…ä»¥&quot;{å¼€å¤´çš„å­—ç¬¦ä¸²ï¼‰    nagate: true        # æ˜¯å¦åŒ¹é…åˆ°    match: after        # åˆå¹¶åˆ°ä¸Šä¸€è¡Œçš„æœ«å°¾    max_lines: 2000     # æœ€å¤§çš„è¡Œæ•°    timeout: 2s         # å¦‚æœåœ¨è§„å®šæ—¶é—´æ²¡æœ‰æ–°çš„æ—¥å¿—äº‹ä»¶å°±ä¸ç­‰å¾…åé¢çš„æ—¥å¿—ï¼ŒæŠŠå·²æ”¶é›†åˆ°çš„å°±æ¨é€åˆ°å…¶ä»–åœ°æ–¹  fields:    logbiz: kafka-log-collect   # åº”ç”¨åç§°    logtopic: error-kafka-log-collect # æŒ‰æœåŠ¡åˆ’åˆ†ç”¨ä½œkafka topic    evn: devoutput.kafka:  enabled: true  hosts: [&quot;localhost:9092&quot;]  topic: &#39;%{[fields.logtopic]}&#39;  partition.hash:    reachable_only: true  compression: gzip  max_message_bytes: 1000000  required_acks: 1logging.to_files: true</code></pre></li><li><p>æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®</p><pre><code class="shell">filebeat test config ~/Develop/1297-kafka/src/main/resources/filebeat.yml# Config OK</code></pre></li><li><p>å¯åŠ¨filebeat</p><pre><code class="shell">filebeat -c ~/Develop/1297-kafka/src/main/resources/filebeat.ymlps -ef | grep filebeat</code></pre></li></ol><blockquote><p><strong>æ³¨</strong>ï¼š</p><ol><li><p>åœ¨å¯åŠ¨filebeatå‰å…ˆå¯åŠ¨é¡¹ç›®ã€zookeeperã€kafkaã€åˆ›å»ºtopic</p></li><li><p>filebeatå¯åŠ¨æ—¥å¿—ï¼š<code>cat /usr/local/var/log/filebeat/filebeat</code></p></li><li><p>é”™è¯¯ï¼šERROR    fileset/modules.go:95    Not loading modules. Module directory not found: /usr/local/Cellar/filebeat/6.2.4/module</p><p>è§£å†³æ–¹æ¡ˆï¼šå°†<code>/usr/local/etc/filebeat/module</code>å¤åˆ¶åˆ°<code>/usr/local/Cellar/filebeat/6.2.4/module</code>ã€‚ï¼ˆ<strong>brewå®‰è£…çœŸæ˜¯å‘</strong>ï¼‰</p></li><li><p>æ—¥å¿—è·¯å¾„<code>paths</code>ä¸èƒ½å†™ä½œ<code>~/Develop/1297-kafka/logs/app-kafka-log-collect.log</code>ï¼Œé¡»å†™ä½œ<code>/Users/tuyuankun/Develop/1297-kafka/logs/app-kafka-log-collect.log</code></p></li></ol></blockquote><h2 id="4-5-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-2"><a href="#4-5-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-2" class="headerlink" title="4-5 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-2"></a>4-5 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-2</h2><ol><li><p>æŸ¥çœ‹topicæƒ…å†µ</p><pre><code class="shell">kafka-topics --zookeeper localhost:2181 --describe --topic app-kafka-log-collect</code></pre></li><li><p>æŸ¥çœ‹kafkaæ˜¯å¦æœ‰æ•°æ®</p><pre><code class="shell"># æŸ¥çœ‹kafkaé…ç½®æ–‡ä»¶çš„log.dirså±æ€§ï¼Œå³è·å–kafkaæ—¥å¿—æ–‡ä»¶å¤¹è·¯å¾„cat /usr/local/etc/kafka/server.properties # log.dirs=/usr/local/var/lib/kafka-logs# è¿›å…¥partitionå¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹æŸ¥çœ‹cd /usr/local/var/lib/kafka-logs/app-kafka-log-collect-0/</code></pre></li></ol><h2 id="4-6-é™„ï¼šlogstashåŸºç¡€è¯­æ³•ä¸ä½¿ç”¨"><a href="#4-6-é™„ï¼šlogstashåŸºç¡€è¯­æ³•ä¸ä½¿ç”¨" class="headerlink" title="4-6 é™„ï¼šlogstashåŸºç¡€è¯­æ³•ä¸ä½¿ç”¨"></a>4-6 é™„ï¼š<a href="04-06-logstash-base.md">logstashåŸºç¡€è¯­æ³•ä¸ä½¿ç”¨</a></h2><p>å®‰è£…ElasticSearchã€Kibanaã€Logstashï¼ˆå®˜ç½‘å®‰è£…æ–¹æ³•ï¼‰</p><pre><code class="shell">brew tap elastic/tapbrew install elastic/tap/elasticsearch-fullbrew install elastic/tap/kibana-fullbrew install elastic/tap/logstash-full</code></pre><p>æ³¨ï¼š</p><ol><li><p>ä¸è¦ä½¿ç”¨<code>brew install elasticsearch</code>å®‰è£…ï¼Œå› ä¸ºæ­¤æ–¹æ³•å®‰è£…äº†ossç‰ˆï¼Œè€Œä¸èƒ½ä½¿ç”¨ossç‰ˆ</p></li><li><p>é”™è¯¯ï¼š<code>Error opening log file &#39;logs/gc.log&#39;: No such file or directory</code></p><p>è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨åœ¨<code>/usr/local/var/homebrew/linked/elasticsearch-full/libexec</code>åˆ›å»º<code>logs</code>ç›®å½•</p></li></ol><h2 id="4-7-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-1"><a href="#4-7-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-1" class="headerlink" title="4-7 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-1"></a>4-7 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-1</h2><p>logstashï¼šå®‰è£…å…¥é—¨ã€ELKç¯å¢ƒæ­å»ºã€åŸºç¡€è¯­æ³•ã€å®æˆ˜åº”ç”¨</p><pre><code class="shell">## logstash-script.conf## multiline æ’ä»¶ä¹Ÿå¯ä»¥ç”¨äºå…¶ä»–ç±»ä¼¼çš„å †æ ˆå¼ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼ŒLinuxçš„å†…æ ¸æ—¥å¿—input {  kafka {    ## app-log-æœåŠ¡åç§°    topics_pattern =&gt; &quot;app-kafka-log-.*&quot; ## æ¥æ”¶å“ªäº›topicä¸‹çš„æ¶ˆæ¯    bootstrap_servers =&gt; &quot;localhost:9092&quot; ## kafka server    codec =&gt; json    consumer_threads =&gt; 1 ## å¢åŠ consumerçš„å¹¶è¡Œæ¶ˆè´¹çº¿ç¨‹æ•°ï¼Œä¸€ä¸ªpartitionå¯¹åº”ä¸€ä¸ªconsumer_thread    decorate_events =&gt; true    # auto_offset_rest =&gt; &quot;latest&quot;    group_id =&gt; &quot;app-kafka-log-group&quot; ## kafkaç»„  }  kafka {    ## error-log-æœåŠ¡åç§°    topics_pattern =&gt; &quot;error-kafka-log-.*&quot;    bootstrap_servers =&gt; &quot;localhost:9092&quot;    codec =&gt; json    consumer_threads =&gt; 4    decorate_events =&gt; true    # auto_offset_rest =&gt; &quot;latest&quot;    group_id =&gt; &quot;error-kafka-log-group&quot;  }}filter {  ## æ—¶åŒºè½¬æ¢  ruby {    code =&gt; &quot;event.set(&#39;index_time&#39;, event.timestamp.time.localtime.strftime(&#39;%Y.%m.%d&#39;))&quot;  }  if &quot;app-kafka-log-collect&quot; in [fields][logtopic] { ## `[fields][logtopic]`ä¸ºfilebeaté…ç½®æ–‡ä»¶`filebeat.yml`çš„å±æ€§    grok {      ## è¡¨è¾¾å¼      match =&gt; [&quot;message&quot;, &quot;\[%{NOTSPACE:currentDateTime}\] \[%{NOTSPACE:level}\] \[%{NOTSPACE:thread-id}\] \[%{NOTSPACE:class}\] \[%{DATA:hostName}\] \[%{DATA:ip}\] \[%{DATA:applicationName}\] \[%{DATA:location}\] \[%{DATA:messageInfo}\] ## (\&#39;\&#39;|%{QUOTEDSTRING:throwable})&quot;]    }  }  if &quot;error-kafka-log-collect&quot; in [fields][logtopic] {    grok {      ## è¡¨è¾¾å¼      match =&gt; [&quot;message&quot;, &quot;\[%{NOTSPACE:currentDateTime}\] \[%{NOTSPACE:level}\] \[%{NOTSPACE:thread-id}\] \[%{NOTSPACE:class}\] \[%{DATA:hostName}\] \[%{DATA:ip}\] \[%{DATA:applicationName}\] \[%{DATA:location}\] \[%{DATA:messageInfo}\] ## (\&#39;\&#39;|%{QUOTEDSTRING:throwable})&quot;]    }  }}## æµ‹è¯•è¾“å‡ºåˆ°æ§åˆ¶å°output {  stdout {codec =&gt; rubydebug}}</code></pre><h2 id="4-8-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-2"><a href="#4-8-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-2" class="headerlink" title="4-8 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-2"></a>4-8 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-2</h2><p>å¯åŠ¨logstash</p><pre><code class="shell">logstash -f ~/Develop/1297-kafka/src/main/resources/logstash-script.conf</code></pre><h2 id="4-9-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-elasticsearch-amp-kibanaå­˜å‚¨å¯è§†åŒ–å®æˆ˜"><a href="#4-9-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-elasticsearch-amp-kibanaå­˜å‚¨å¯è§†åŒ–å®æˆ˜" class="headerlink" title="4-9 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_elasticsearch&amp;kibanaå­˜å‚¨å¯è§†åŒ–å®æˆ˜"></a>4-9 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_elasticsearch&amp;kibanaå­˜å‚¨å¯è§†åŒ–å®æˆ˜</h2><ol><li><p>Kafkaé«˜ååé‡æ ¸å¿ƒå®æˆ˜-æ—¥å¿—æŒä¹…åŒ–ã€å¯è§†åŒ–</p><blockquote><ul><li>Elasticsearchç´¢å¼•åˆ›å»ºå‘¨æœŸã€å‘½åè§„èŒƒé€‰æ‹©</li><li>Kibanaæ§åˆ¶å°åº”ç”¨ã€å¯è§†åŒ–æ—¥å¿—</li></ul></blockquote></li><li><p>Kafkaé«˜ååé‡æ ¸å¿ƒå®æˆ˜-ç›‘æ§å‘Šè­¦</p><blockquote><p>Watcherä½œç”¨ä»‹ç»åŸºæœ¬ä½¿ç”¨=&gt;Watcher APIè¯¦è§£=&gt;Watcherå®æˆ˜åº”ç”¨ç›‘æ§å‘Šè­¦</p></blockquote></li></ol><h3 id="ElasticSearchè®¾ç½®å¯†ç "><a href="#ElasticSearchè®¾ç½®å¯†ç " class="headerlink" title="ElasticSearchè®¾ç½®å¯†ç "></a>ElasticSearchè®¾ç½®å¯†ç </h3><blockquote><p>7.3ç‰ˆæœ¬å·²ç»å¯ä»¥å…è´¹ä½¿ç”¨x-packè®¾ç½®è´¦å·å’Œå¯†ç ï¼Œä¸”æ— éœ€å®‰è£…x-pack</p></blockquote><ol><li><p>ç”Ÿæˆè¯ä¹¦</p><pre><code class="shell">cd /usr/local/var/homebrew/linked/elasticsearch-full/libexecelasticsearch-certutil cert -out config/elastic-certificates.p12 -pass &quot;&quot;</code></pre></li><li><p>æ·»åŠ xpacké…ç½®</p><pre><code class="shell">vim /usr/local/Cellar/elasticsearch-full/7.6.2/libexec/config/elasticsearch.yml</code></pre><pre><code class="yaml">xpack.security.enabled: truexpack.security.transport.ssl.enabled: truexpack.security.transport.ssl.verification_mode: certificatexpack.security.transport.ssl.keystore.path: elastic-certificates.p12xpack.security.transport.ssl.truststore.path: elastic-certificates.p12</code></pre></li><li><p>å¯åŠ¨ElasticSearchï¼Œå¹¶æ–°å¼€ä¸€ä¸ªç»ˆç«¯ç”Ÿæˆè´¦å·å¯†ç </p><pre><code class="shell">elasticsearch# è‡ªåŠ¨ç”Ÿæˆé»˜è®¤ç”¨æˆ·å’Œå¯†ç elasticsearch-setup-passwords auto# æ‰‹åŠ¨ç”Ÿæˆå¯†ç ,elasticç”¨æˆ·æ˜¯è¶…çº§ç®¡ç†å‘˜elasticsearch-setup-passwords interactive</code></pre></li><li><p>éªŒè¯ã€‚æ‰“å¼€ä¸»é¡µ,è¾“å…¥è´¦å·å¯†ç </p><pre><code>http://127.0.0.1:9200/</code></pre></li><li><p>ä¿®æ”¹å¯†ç </p><pre><code class="shell">curl -H &quot;Content-Type: application/json&quot; -XPUT -u elastic:rpZaWNQcXSdjnpQqAtUE &#39;http://localhost:9200/_xpack/security/user/elastic/_password&#39; -d &#39;{&quot;password&quot; : &quot;123456&quot;}&#39;</code></pre><ul><li><code>elastic:rpZaWNQcXSdjnpQqAtUE</code>ï¼šç”¨æˆ·å:æ—§å¯†ç </li><li><code>123456</code>ï¼šæ–°å¯†ç </li></ul></li></ol><ul><li><p>ä¿®æ”¹Kibanaé…ç½®æ–‡ä»¶</p><pre><code class="shell">vim /usr/local/etc/kibana/kibana.yml</code></pre><pre><code class="yaml">elasticsearch.username: &quot;elastic&quot;elasticsearch.password: &quot;123456&quot;</code></pre></li><li><p>å¯åŠ¨ElasticSearchã€Kibana</p><pre><code class="shell">elasticsearchkibana</code></pre></li><li><p>æ‰“å¼€åœ°å€è®¿é—®Kibana</p><pre><code>http://127.0.0.1:5601/</code></pre></li></ul><pre><code class="shell">## logstash-script.conf## elasticsearchoutput {  if &quot;app-kafka-log-collect&quot; in [fields][logtopic] {    ## esæ’ä»¶    elasticsearch {      # esæœåŠ¡åœ°å€      hosts =&gt; [&quot;localhost:9200&quot;]      # ç”¨æˆ·åå¯†ç       user =&gt; &quot;elastic&quot;      password =&gt; &quot;123456&quot;      ## ç´¢å¼•åï¼Œ+å·å¼€å¤´çš„ï¼Œå°±ä¼šè‡ªåŠ¨è®¤ä¸ºåé¢æ˜¯æ—¶é—´æ ¼å¼ï¼š      ## javalog-app-server-2019.01.23      index =&gt; &quot;app-log-%{[fields][logbiz]}-%{index_time}&quot;      ## æ˜¯å¦å—…æ¢é›†ç¾¤ipï¼šä¸€èˆ¬è®¾ç½®trueï¼›http://localhost:9200/_nodes/http?pretty      ## é€šè¿‡å—…æ¢æœºåˆ¶è¿›è¡Œesé›†ç¾¤è´Ÿè½½å‡è¡¡å‘æ—¥å¿—æ¶ˆæ¯      sniffing =&gt; true      ## logstashé»˜è®¤è‡ªå¸¦ä¸€ä¸ªmappingæ¨¡æ¿ï¼Œè¿›è¡Œæ¨¡æ¿è¦†ç›–      template_overwrite =&gt; true    }  }  if &quot;error-kafka-log-collect&quot; in [fields][logtopic] {    elasticsearch {      hosts =&gt; [&quot;localhost:9200&quot;]      user =&gt; &quot;elastic&quot;      password =&gt; &quot;123456&quot;      index =&gt; &quot;error-log-%{[fields][logbiz]}-%{index_time}&quot;      sniffing =&gt; true      template_overwrite =&gt; true    }  }}</code></pre><h2 id="4-10-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-watcherç›‘æ§å‘Šè­¦å®æˆ˜-1"><a href="#4-10-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-watcherç›‘æ§å‘Šè­¦å®æˆ˜-1" class="headerlink" title="4-10 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_watcherç›‘æ§å‘Šè­¦å®æˆ˜-1"></a>4-10 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_watcherç›‘æ§å‘Šè­¦å®æˆ˜-1</h2><pre><code class="java">@Datapublic class AccurateWatcherMessage {    private String title;    private String application;    private String level;    private String body;    private String executionTime;}</code></pre><pre><code class="java">@PostMapping(&quot;accurateWatch&quot;)public String accurateWatch(AccurateWatcherMessage accurateWatcherMessage) {    System.out.println(&quot;-------è­¦å‘Šå†…å®¹-------&quot; + accurateWatcherMessage);    return &quot;is watched&quot; + accurateWatcherMessage;}</code></pre><h2 id="4-11-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-watcherç›‘æ§å‘Šè­¦å®æˆ˜-2"><a href="#4-11-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜-watcherç›‘æ§å‘Šè­¦å®æˆ˜-2" class="headerlink" title="4-11 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_watcherç›‘æ§å‘Šè­¦å®æˆ˜-2"></a>4-11 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_watcherç›‘æ§å‘Šè­¦å®æˆ˜-2</h2><ol><li><p>åˆ›å»ºWatcherä¹‹å‰æ‰‹åŠ¨æŒ‡å®šåˆ›å»ºæ¨¡æ¿</p><pre><code class="json">// PUT _template/error-log-{  &quot;template&quot;: &quot;error-log-*&quot;,  &quot;order&quot;: 0,  &quot;settings&quot;: {    &quot;index&quot;: {      &quot;refresh_interval&quot;: &quot;5s&quot;    }  },  &quot;mappings&quot;: {    &quot;dynamic_templates&quot;: [      {        &quot;message_field&quot;: {          &quot;match_mapping_type&quot;: &quot;string&quot;,          &quot;path_match&quot;: &quot;message&quot;,          &quot;mapping&quot;: {            &quot;norms&quot;: false,            &quot;type&quot;: &quot;text&quot;,            &quot;analyzer&quot;: &quot;ik_max_word&quot;,            &quot;search_analyzer&quot;: &quot;ik_max_word&quot;          }        }      },      {        &quot;throwable_field&quot;: {          &quot;match_mapping_type&quot;: &quot;string&quot;,          &quot;path_match&quot;: &quot;throwable&quot;,          &quot;mapping&quot;: {            &quot;norms&quot;: false,            &quot;type&quot;: &quot;text&quot;,            &quot;analyzer&quot;: &quot;ik_max_word&quot;,            &quot;search_analyzer&quot;: &quot;ik_max_word&quot;          }        }      },      {        &quot;string_field&quot;: {          &quot;match_mapping_type&quot;: &quot;string&quot;,          &quot;path_match&quot;: &quot;*&quot;,          &quot;mapping&quot;: {            &quot;norms&quot;: false,            &quot;type&quot;: &quot;text&quot;,            &quot;analyzer&quot;: &quot;ik_max_word&quot;,            &quot;search_analyzer&quot;: &quot;ik_max_word&quot;,            &quot;fields&quot;: {              &quot;keyword&quot;: {                &quot;type&quot;: &quot;keyword&quot;              }            }          }        }      }    ],    &quot;properties&quot;: {      &quot;hostName&quot;: {        &quot;type&quot;: &quot;keyword&quot;      },      &quot;ip&quot;: {        &quot;type&quot;: &quot;ip&quot;      },      &quot;level&quot;: {        &quot;type&quot;: &quot;keyword&quot;      },      &quot;currentDateTime&quot;: {        &quot;type&quot;: &quot;date&quot;      }    }  }}</code></pre></li><li><p>åˆ›å»ºä¸€ä¸ªWatcherï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ªtriggerï¼Œæ¯5ç§’é’Ÿçœ‹ä¸€ä¸‹inputé‡Œçš„æ•°æ®</p><pre><code class="json">// PUT _xpack/watcher/watch/error_log_collector_watcher{  &quot;trigger&quot;: {    &quot;schedule&quot;: {      &quot;interval&quot;: &quot;5s&quot;    }  },  &quot;input&quot;: {    &quot;search&quot;: {      &quot;request&quot;: {        &quot;indices&quot;: [&quot;&lt;error-log-{now+8h/d}&gt;&quot;],        &quot;body&quot;: {          &quot;size&quot;: 0,          &quot;query&quot;: {            &quot;bool&quot;: {              &quot;must&quot;: [                {                  &quot;term&quot;: {&quot;level&quot;: &quot;ERROR&quot;}                }              ],              &quot;filter&quot;: {                &quot;range&quot;: {                  &quot;currentDateTime&quot;: {                    &quot;gt&quot;: &quot;now-30s&quot;, &quot;lt&quot;: &quot;now&quot;                  }                }              }            }          }        }      }    }  },  &quot;condition&quot;: {    &quot;compare&quot;: {      &quot;ctx.payload.hits.total&quot;: {        &quot;gt&quot;: 0      }    }  },  &quot;transform&quot;: {    &quot;search&quot;: {      &quot;request&quot;: {        &quot;indices&quot;: [&quot;error-log-{now+8h/d}&quot;],        &quot;body&quot;: {          &quot;size&quot;: 1,          &quot;query&quot;: {            &quot;bool&quot;: {              &quot;must&quot;: [                {                  &quot;term&quot;: {&quot;level&quot;: &quot;ERROR&quot;}                }              ],              &quot;filter&quot;: {                &quot;range&quot;: {                  &quot;currentDateTime&quot;: {                    &quot;gt&quot;: &quot;now-30s&quot;, &quot;lt&quot;: &quot;now&quot;                  }                }              }            }          },          &quot;sort&quot;: [            {              &quot;currentDateTime&quot;: {                &quot;order&quot;: &quot;desc&quot;              }            }          ]        }      }    }  },  &quot;actions&quot;: {    &quot;test_error&quot;: {      &quot;webhook&quot;: {        &quot;method&quot;: &quot;POST&quot;,        &quot;url&quot;: &quot;http://localhost:8081/kafka/index/accurateWatch&quot;,        &quot;body&quot;: &quot;{\&quot;title\&quot;: \&quot;å¼‚å¸¸é”™è¯¯å‘Šè­¦\&quot;, \&quot;applicationName\&quot;: \&quot;{{#ctx.payload.hits.hits}}{{_source.applicationName}}{{/ctx.payload.hits.hits}}\&quot;, \&quot;level\&quot;: \&quot;å‘Šè­¦çº§åˆ«P1\&quot;, \&quot;body\&quot;: \&quot;{{#ctx.payload.hits.hits}}{{_source.messageInfo}}{{/ctx.payload.hits.hits}}\&quot;, \&quot;executionTime\&quot;: \&quot;{{#ctx.payload.hits.hits}}{{_source.currentDateTime}}{{/ctx.payload.hits.hits}}\&quot;}&quot;      }    }  }}</code></pre></li><li><p>åˆ›å»ºindex pattern</p></li></ol><h2 id="4-12-é™„ï¼šwatcher-åŸºç¡€è¯­æ³•ä¸ä½¿ç”¨"><a href="#4-12-é™„ï¼šwatcher-åŸºç¡€è¯­æ³•ä¸ä½¿ç”¨" class="headerlink" title="4-12 é™„ï¼šwatcher åŸºç¡€è¯­æ³•ä¸ä½¿ç”¨"></a>4-12 <a href="04-12-watcher-base.md">é™„ï¼šwatcher åŸºç¡€è¯­æ³•ä¸ä½¿ç”¨</a></h2><h2 id="4-13-æ€»ç»“ä¸å¤ä¹ "><a href="#4-13-æ€»ç»“ä¸å¤ä¹ " class="headerlink" title="4-13 æ€»ç»“ä¸å¤ä¹ "></a>4-13 æ€»ç»“ä¸å¤ä¹ </h2><blockquote><p>HI ï¼Œå°ä¼™ä¼´ä»¬ï¼æœ¬ç« èŠ‚æˆ‘ä»¬å·²ç»å¯¹KafkaæŠ€æœ¯æœ‰äº†ä¸€ä¸ªå…¨é¢çš„è®¤è¯†ï¼Œé€šè¿‡å­¦ä¹ Kafkaçš„åŸºç¡€APIä½¿ç”¨ï¼Œåˆ°ä¸SpringBootæ•´åˆåº”ç”¨ï¼Œå†å»¶ä¼¸åˆ°ELKæŠ€æœ¯æ ˆå®ç°æ—¥å¿—è¾“å‡ºï¼ˆLog4j2ï¼‰ã€æ•°æ®æŠ“å–ï¼ˆFilebeatï¼‰ã€æ•°æ®è½¬å‚¨ï¼ˆKafka Brokerï¼‰ï¼›å†åˆ°Logstashæ¶ˆè´¹ï¼Œç„¶åSinkåˆ°Elasticsearchå¹³å°ï¼Œé€šè¿‡Kibanaè¿›è¡Œå±•ç¤ºï¼Œæœ€ååœ¨ä½¿ç”¨Xpack-Watcherè¿›è¡Œå¯¹æ—¥å¿—çš„ç›‘æ§å‘Šè­¦ã€‚å…¨é“¾è·¯çš„è®²è§£äº†Kafka ä¸ ELKä¹‹é—´çš„å…³ç³»ä¸æµ·é‡æ—¥å¿—å®æˆ˜åº”ç”¨ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¿›è¡Œå¤ä¹ ï¼</p></blockquote><ul><li><p>KafkaåŸºç¡€çŸ¥è¯†æ€»ç»“</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gdgpvphseej30vi0jm0v6.jpg" alt="KafkaåŸºç¡€çŸ¥è¯†æ€»ç»“" style="zoom:100%;" /></li><li><p>ELKæŠ€æœ¯æ ˆæ¶æ„å›¾</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gdgpvo51fuj30oz0avwfh.jpg" alt="ELKæŠ€æœ¯æ ˆæ¶æ„å›¾" style="zoom:100%;" /></li><li><p>ELKå®æˆ˜æµç¨‹å›¾</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gdgpvoziiij30q207dgmq.jpg" alt="ELKå®æˆ˜æµç¨‹å›¾" style="zoom:100%;" /><p>å¯åŠ¨å‘½ä»¤</p><pre><code class="shell">zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties # å¯åŠ¨zookeeperkafka-server-start /usr/local/etc/kafka/server.properties # å¯åŠ¨kafkafilebeat -c ~/Develop/1297-kafka/src/main/resources/filebeat.yml # å¯åŠ¨filebeatelasticsearch # å¯åŠ¨ElasticSearchkibana # å¯åŠ¨Kibanalogstash -f ~/Develop/1297-kafka/src/main/resources/logstash-script.conf # å¯åŠ¨logstash</code></pre></li></ul><h2 id="4-14-ä½œä¸šç»ƒä¹ "><a href="#4-14-ä½œä¸šç»ƒä¹ " class="headerlink" title="4-14 ä½œä¸šç»ƒä¹ "></a>4-14 ä½œä¸šç»ƒä¹ </h2><blockquote><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å†ç»åƒè¾›ä¸‡è‹¦ç»ˆäºæå®šäº†å¤æ‚çš„MQæ¶æ„è®¾è®¡ä¸è½åœ°ï¼›æ— è®ºæ˜¯RabbitMQè¿˜æ˜¯Kafkaï¼Œéƒ½æ˜¯ä¸šç•Œéå¸¸ä¸»æµçš„MQæŠ€æœ¯ï¼ˆæ¶ˆæ¯ä¸­é—´ä»¶ï¼‰ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä½œä¸šæ—¶é—´ï¼</p></blockquote><ul><li><p><strong>ä½œä¸šä¸€ï¼š</strong> è¯·å¯¹æ¯”ä¸€ä¸‹RabbitMQ å’Œ Kafka å„è‡ªçš„ç‰¹ç‚¹ä¸ä¼˜åŠ¿ï¼Œåˆ—å‡ºé‡è¦çš„åŒºåˆ«ç‚¹ã€‚</p></li><li><p><strong>ä½œä¸šäºŒï¼š</strong> å¯¹äºELKæµ·é‡æ—¥å¿—æ”¶é›†ï¼Œè¿˜æœ‰ä¸€ä¸ªéå¸¸å…³é”®çš„é—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬æ”¶é›†ä¸Šæ¥çš„æ—¥å¿—åº”è¯¥å¦‚ä½•å¤„ç†ã€åˆ†æï¼Ÿè¯·åˆ—å‡ºå‡ ç‚¹ä½ è§‰å¾—æ—¥å¿—å¯ä»¥åšçš„äº‹æƒ…ï¼Œå……åˆ†å‘æŒ¥å‡ºæƒ³è±¡åŠ›ï¼ï¼ˆæç¤ºï¼šæ¯”å¦‚åšQPSçš„æ¥å£ç»Ÿè®¡ï¼‰</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>06-é¡¹ç›®å®æˆ˜-headerç»„ä»¶å¼€å‘</title>
      <link href="/imooc/74-vue-sell-1/06-header-component/"/>
      <url>/imooc/74-vue-sell-1/06-header-component/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="6-1-Vue-resourceåº”ç”¨ï¼ˆä¸Šï¼‰"><a href="#6-1-Vue-resourceåº”ç”¨ï¼ˆä¸Šï¼‰" class="headerlink" title="6-1 Vue-resourceåº”ç”¨ï¼ˆä¸Šï¼‰"></a>6-1 Vue-resourceåº”ç”¨ï¼ˆä¸Šï¼‰</h2><p>vue-resourceï¼š<a href="https://github.com/pagekit/vue-resource" target="_blank" rel="noopener">https://github.com/pagekit/vue-resource</a></p><pre><code class="json">/* package.json */&quot;dependencies&quot;: {  &quot;vue-resource&quot;: &quot;^1.0.1&quot;}</code></pre><pre><code class="javascript">/* main.js */import VueResource from &#39;vue-resource&#39;Vue.use(VueResource)</code></pre><h2 id="6-2-Vue-resourceåº”ç”¨ï¼ˆä¸‹ï¼‰"><a href="#6-2-Vue-resourceåº”ç”¨ï¼ˆä¸‹ï¼‰" class="headerlink" title="6-2 Vue-resourceåº”ç”¨ï¼ˆä¸‹ï¼‰"></a>6-2 Vue-resourceåº”ç”¨ï¼ˆä¸‹ï¼‰</h2><pre><code class="javascript">/* App.vue */const ERR_OK = 0export default {  data () {    return {      seller: {}    }  },  created () {    this.$http.get(&#39;/api/seller&#39;).then((response) =&gt; {      response = response.body      if (response.errno === ERR_OK) {        this.seller = response.data      }    })  },}</code></pre><h2 id="6-3-å¤–éƒ¨ç»„ä»¶ï¼ˆ1ï¼‰"><a href="#6-3-å¤–éƒ¨ç»„ä»¶ï¼ˆ1ï¼‰" class="headerlink" title="6-3 å¤–éƒ¨ç»„ä»¶ï¼ˆ1ï¼‰"></a>6-3 å¤–éƒ¨ç»„ä»¶ï¼ˆ1ï¼‰</h2><pre><code class="vue">&lt;v-header :seller=&quot;seller&quot;&gt;&lt;/v-header&gt;</code></pre><pre><code class="vue">&lt;!-- header.vue --&gt;&lt;template&gt;  &lt;div class=&quot;header&quot;&gt;    &lt;div class=&quot;content-wrapper&quot;&gt;      &lt;div class=&quot;avatar&quot;&gt;        &lt;img width=&quot;64&quot; height=&quot;64&quot; :src=&quot;seller.avatar&quot;&gt;      &lt;/div&gt;      &lt;div class=&quot;content&quot;&gt;        &lt;div class=&quot;title&quot;&gt;          &lt;span class=&quot;brand&quot;&gt;&lt;/span&gt;          &lt;span class=&quot;name&quot;&gt;{{seller.name}}&lt;/span&gt;        &lt;/div&gt;        &lt;div class=&quot;description&quot;&gt;          {{seller.description}}/{{seller.deliveryTime}}åˆ†é’Ÿé€è¾¾        &lt;/div&gt;        &lt;div v-if=&quot;seller.supports&quot; class=&quot;support&quot;&gt;          &lt;span class=&quot;icon&quot;&gt;&lt;/span&gt;          &lt;span class=&quot;text&quot;&gt;{{seller.supports[0].description}}&lt;/span&gt;        &lt;/div&gt;      &lt;/div&gt;    &lt;/div&gt;    &lt;div class=&quot;bulletin-wrapper&quot;&gt;&lt;/div&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script type=&quot;text/ecmascript-6&quot;&gt;  export default {    props: {      seller: {        type: Object      }    }  }&lt;/script&gt;</code></pre><h2 id="6-4-å¤–éƒ¨ç»„ä»¶ï¼ˆ2ï¼‰"><a href="#6-4-å¤–éƒ¨ç»„ä»¶ï¼ˆ2ï¼‰" class="headerlink" title="6-4 å¤–éƒ¨ç»„ä»¶ï¼ˆ2ï¼‰"></a>6-4 å¤–éƒ¨ç»„ä»¶ï¼ˆ2ï¼‰</h2><pre><code class="stylus">/* mixin.styl */bg-image($url)  background-image url($url + &quot;@2x.png&quot;)  @media (-webkit-min-device-pixel-retio: 3),(min-device-pixel-retio: 3)    background-image url($url + &quot;@3x.png&quot;)</code></pre><p>é€šè¿‡@importå¼•å…¥CSSåº“ä¸èƒ½ä½¿ç”¨aliasï¼Œåªæœ‰é€šè¿‡importå¼•å…¥JSåº“æ‰èƒ½ä½¿ç”¨alias</p><pre><code class="vue">&lt;style lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;  @import &quot;../../common/stylus/mixin.styl&quot;  .header    color #ffffff    background #000000    .content-wrapper      padding 24px 12px 18px 24px      font-size 0      .avatar        display inline-block      .content        display inline-block        margin-left 16px        font-size 14px        .title          margin 2px 0 8px 0          .brand            display inline-block            vertical-align top // å‚ç›´é¡¶éƒ¨å¯¹é½            width 30px            height 18px            bg-image(&#39;brand&#39;)            background-size 30px 18px            background-repeat no-repeat          .name            margin-left 6px            font-size 16px            line-height 18px            font-weight bold // å­—ä½“åŠ ç²—&lt;/style&gt;</code></pre><pre><code class="stylus">/* base.styl */body, html  line-height 1  font-weight 200  font-family &quot;PingFang SC&quot;, &quot;STHeitiSC-Light&quot;, &quot;Helvetica-Light&quot;, &quot;Arial&quot;, &quot;SansSerif&quot;</code></pre><h2 id="6-5-å¤–éƒ¨ç»„ä»¶ï¼ˆ3ï¼‰"><a href="#6-5-å¤–éƒ¨ç»„ä»¶ï¼ˆ3ï¼‰" class="headerlink" title="6-5 å¤–éƒ¨ç»„ä»¶ï¼ˆ3ï¼‰"></a>6-5 å¤–éƒ¨ç»„ä»¶ï¼ˆ3ï¼‰</h2><p>æ´»åŠ¨å›¾æ ‡</p><pre><code class="vue">&lt;span class=&quot;icon&quot; :class=&quot;classMap[seller.supports[0].type]&quot;&gt;&lt;/span&gt;</code></pre><pre><code class="vue">created () {  this.classMap = [&#39;decrease&#39;, &#39;discount&#39;, &#39;special&#39;, &#39;invoice&#39;, &#39;guarantee&#39;]}</code></pre><h2 id="6-6-å¤–éƒ¨ç»„ä»¶ï¼ˆ4ï¼‰"><a href="#6-6-å¤–éƒ¨ç»„ä»¶ï¼ˆ4ï¼‰" class="headerlink" title="6-6 å¤–éƒ¨ç»„ä»¶ï¼ˆ4ï¼‰"></a>6-6 å¤–éƒ¨ç»„ä»¶ï¼ˆ4ï¼‰</h2><p>æ´»åŠ¨å†…å®¹</p><pre><code class="vue">&lt;div v-if=&quot;seller.supports&quot; class=&quot;support-count&quot;&gt;  &lt;span class=&quot;count&quot;&gt;{{seller.supports.length}}ä¸ª&lt;/span&gt;  &lt;i class=&quot;icon-keyboard_arrow_right&quot;&gt;&lt;/i&gt;&lt;/div&gt;</code></pre><h2 id="6-7-å¤–éƒ¨ç»„ä»¶ï¼ˆ5ï¼‰"><a href="#6-7-å¤–éƒ¨ç»„ä»¶ï¼ˆ5ï¼‰" class="headerlink" title="6-7 å¤–éƒ¨ç»„ä»¶ï¼ˆ5ï¼‰"></a>6-7 å¤–éƒ¨ç»„ä»¶ï¼ˆ5ï¼‰</h2><p>å…¬å‘Š</p><pre><code class="vue">&lt;div class=&quot;bulletin-wrapper&quot;&gt;  &lt;span class=&quot;bulletin-title&quot;&gt;&lt;/span&gt;&lt;span class=&quot;bulletin-text&quot;&gt;{{seller.bulletin}}&lt;/span&gt;  &lt;i class=&quot;icon-keyboard_arrow_right&quot;&gt;&lt;/i&gt;&lt;/div&gt;</code></pre><p>æ–‡å­—å†…å®¹è¶…è¿‡éƒ¨åˆ†åˆ™ä½¿ç”¨â€â€¦â€è¡¨ç¤º</p><pre><code class="vue">white-space nowrapoverflow hiddentext-overflow ellipsis</code></pre><h2 id="6-8-å¤–éƒ¨ç»„ä»¶ï¼ˆ6ï¼‰"><a href="#6-8-å¤–éƒ¨ç»„ä»¶ï¼ˆ6ï¼‰" class="headerlink" title="6-8 å¤–éƒ¨ç»„ä»¶ï¼ˆ6ï¼‰"></a>6-8 å¤–éƒ¨ç»„ä»¶ï¼ˆ6ï¼‰</h2><p>èƒŒæ™¯å›¾</p><pre><code class="vue">&lt;div class=&quot;background&quot;&gt;  &lt;img :src=&quot;seller.avatar&quot; width=&quot;100%&quot; height=&quot;100%&quot;&gt;&lt;/div&gt;</code></pre><pre><code class="vue">.background  position absolute  top 0  left 0  width 100%  height 100%  z-index -1  filter blur(10px) // æ»¤é•œäº§ç”Ÿæ¨¡ç³Šæ•ˆæœ</code></pre><h2 id="6-9-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ1ï¼‰-å®ç°å¼¹å‡ºå±‚"><a href="#6-9-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ1ï¼‰-å®ç°å¼¹å‡ºå±‚" class="headerlink" title="6-9 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ1ï¼‰- å®ç°å¼¹å‡ºå±‚"></a>6-9 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ1ï¼‰- å®ç°å¼¹å‡ºå±‚</h2><pre><code class="vue">&lt;div v-show=&quot;detailShow&quot; class=&quot;detail&quot;&gt;&lt;/div&gt;</code></pre><pre><code class="vue">.detail  position fixed  top 0  left 0  z-index 100  width 100%  height 100%  overflow auto  background rgba(7, 17, 27, 0.8)</code></pre><pre><code class="vue">data () {  return {    detailShow: false  }},methods: {  fnShowDetail () {    this.detailShow = true  }}</code></pre><h2 id="6-10-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ2ï¼‰-CSS-Sticky-footer"><a href="#6-10-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ2ï¼‰-CSS-Sticky-footer" class="headerlink" title="6-10 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ2ï¼‰- CSS Sticky footer"></a>6-10 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ2ï¼‰- CSS Sticky footer</h2><p><a href="https://www.w3cplus.com/css3/css-secrets/sticky-footers.html" target="_blank" rel="noopener">CSSç§˜å¯†èŠ±å›­ï¼š Sticky footers</a></p><pre><code class="stylus">// base.styl.clearfix  display inline-block  &amp;:after    display block    content &quot;.&quot;    height 0    line-height 0    clear both    visibility hidden</code></pre><pre><code class="vue">&lt;div v-show=&quot;detailShow&quot; class=&quot;detail&quot;&gt;  &lt;div class=&quot;detail-wrapper clearfix&quot;&gt;    &lt;div class=&quot;detail-main&quot;&gt;&lt;/div&gt;  &lt;/div&gt;  &lt;div class=&quot;detail-close&quot;&gt;    &lt;i class=&quot;icon-close&quot;&gt;&lt;/i&gt;  &lt;/div&gt;&lt;/div&gt;</code></pre><pre><code class="stylus">.detail-wrapper  width 100%  min-height 100%  .detail-main    margin-top 64px    padding-bottom 64px.detail-close  position relative  width 32px  height  32px  margin -64px auto 0 auto  clear both  font-size 32px</code></pre><h2 id="6-11-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰-starç»„ä»¶æŠ½è±¡ï¼ˆä¸Šï¼‰"><a href="#6-11-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰-starç»„ä»¶æŠ½è±¡ï¼ˆä¸Šï¼‰" class="headerlink" title="6-11 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰- starç»„ä»¶æŠ½è±¡ï¼ˆä¸Šï¼‰"></a>6-11 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰- starç»„ä»¶æŠ½è±¡ï¼ˆä¸Šï¼‰</h2><h2 id="6-12-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰-starç»„ä»¶æŠ½è±¡ï¼ˆä¸‹ï¼‰"><a href="#6-12-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰-starç»„ä»¶æŠ½è±¡ï¼ˆä¸‹ï¼‰" class="headerlink" title="6-12 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰- starç»„ä»¶æŠ½è±¡ï¼ˆä¸‹ï¼‰"></a>6-12 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰- starç»„ä»¶æŠ½è±¡ï¼ˆä¸‹ï¼‰</h2><h2 id="6-13-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ4ï¼‰-starç»„ä»¶ä½¿ç”¨"><a href="#6-13-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ4ï¼‰-starç»„ä»¶ä½¿ç”¨" class="headerlink" title="6-13 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ4ï¼‰- starç»„ä»¶ä½¿ç”¨"></a>6-13 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ4ï¼‰- starç»„ä»¶ä½¿ç”¨</h2><h2 id="6-14-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ5ï¼‰-å°æ ‡é¢˜è‡ªé€‚åº”ç»å…¸flexå¸ƒå±€å®ç°"><a href="#6-14-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ5ï¼‰-å°æ ‡é¢˜è‡ªé€‚åº”ç»å…¸flexå¸ƒå±€å®ç°" class="headerlink" title="6-14 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ5ï¼‰- å°æ ‡é¢˜è‡ªé€‚åº”ç»å…¸flexå¸ƒå±€å®ç°"></a>6-14 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ5ï¼‰- å°æ ‡é¢˜è‡ªé€‚åº”ç»å…¸flexå¸ƒå±€å®ç°</h2><h2 id="6-15-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰-headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸Šï¼‰"><a href="#6-15-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰-headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸Šï¼‰" class="headerlink" title="6-15 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰- headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸Šï¼‰"></a>6-15 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰- headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸Šï¼‰</h2><h2 id="6-16-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰-headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸‹ï¼‰"><a href="#6-16-è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰-headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸‹ï¼‰" class="headerlink" title="6-16 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰- headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸‹ï¼‰"></a>6-16 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰- headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸‹ï¼‰</h2>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 74-Vue.js2.5+cube-uié‡æ„é¥¿äº†ä¹ˆApp(ä¸€æœŸ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03-Kafkaæ€¥é€Ÿå…¥é—¨ä¸å®æˆ˜(æ ¸å¿ƒAPI)</title>
      <link href="/imooc/1297-MQ-Kafka/03-03-kafka-api/"/>
      <url>/imooc/1297-MQ-Kafka/03-03-kafka-api/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h3 id="kafkaç¯å¢ƒå®‰è£…"><a href="#kafkaç¯å¢ƒå®‰è£…" class="headerlink" title="kafkaç¯å¢ƒå®‰è£…"></a>kafkaç¯å¢ƒå®‰è£…</h3><p>ä¸Šä¸€èŠ‚è¯¾æˆ‘ä»¬å·²ç»å¯¹kafkaçš„åŸºæœ¬æ¦‚å¿µã€æ ¸å¿ƒæ€æƒ³æœ‰äº†ä¸€å®šçš„äº†è§£å’Œè®¤çŸ¥ï¼Œå¹¶ä¸”æŒæ¡äº†kafkaåœ¨å®é™…å·¥ä½œä¸­çš„ä¸€äº›ä¸»è¦çš„åº”ç”¨åœºæ™¯ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€èµ·å¿«é€Ÿè¿›å…¥kafkaçš„å®‰è£…å§ã€‚</p><ul><li><p>kafkaä¸‹è½½åœ°å€ï¼š<a href="http://kafka.apache.org/downloads.html" target="_blank" rel="noopener">http://kafka.apache.org/downloads.html</a></p></li><li><p>kafkaå®‰è£…æ­¥éª¤ï¼šé¦–å…ˆkafkaå®‰è£…éœ€è¦ä¾èµ–ä¸zookeeperï¼Œæ‰€ä»¥å°ä¼™ä¼´ä»¬å…ˆå‡†å¤‡å¥½zookeeperç¯å¢ƒï¼ˆä¸‰ä¸ªèŠ‚ç‚¹å³å¯ï¼‰ï¼Œç„¶åæˆ‘ä»¬æ¥ä¸€èµ·æ„å»ºkafka brokerã€‚</p><pre><code class="shell">brew install zookeeper # å®‰è£…zookeeperbrew install kafka # å®‰è£…kafkazookeeper-server-start /usr/local/etc/kafka/zookeeper.properties # å¯åŠ¨zookeeperkafka-server-start /usr/local/etc/kafka/server.properties # å¯åŠ¨kafka</code></pre></li></ul><h3 id="kafkaå¸¸ç”¨å‘½ä»¤"><a href="#kafkaå¸¸ç”¨å‘½ä»¤" class="headerlink" title="kafkaå¸¸ç”¨å‘½ä»¤"></a>kafkaå¸¸ç”¨å‘½ä»¤</h3><p>æˆ‘ä»¬æ¥ä¸‹æ¥ä¸€èµ·äº†è§£å‡ ä¸ªéå¸¸é‡è¦çš„å‘½ä»¤ï¼Œé€šè¿‡è¿™äº›å‘½ä»¤æˆ‘ä»¬å¯¹kafka topic partition è¿›è¡ŒæŸ¥çœ‹å’Œæ“ä½œã€‚</p><ul><li><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><ol><li><p><strong>åˆ›å»ºtopicä¸»é¢˜å‘½ä»¤</strong>ï¼šï¼ˆåˆ›å»ºåä¸ºtestçš„topicï¼Œ 1ä¸ªåˆ†åŒºåˆ†åˆ«å­˜æ”¾æ•°æ®ï¼Œæ•°æ®å¤‡ä»½æ€»å…±1ä»½ï¼‰</p><pre><code class="shell">kafka-topics --zookeeper localhost:2181 --create --topic tuyrk-kafka-topic --partitions 1  --replication-factor 1</code></pre><blockquote><p> â€“zookeeper ä¸ºzkæœåŠ¡åˆ—è¡¨</p><p> â€“create å‘½ä»¤å â€“topic ä¸ºåˆ›å»ºtopic å¹¶æŒ‡å®š topic name</p><p> â€“partitions ä¸ºæŒ‡å®šåˆ†åŒºæ•°é‡</p><p> â€“replication-factor ä¸ºæŒ‡å®šå‰¯æœ¬é›†æ•°é‡</p></blockquote></li><li><p><strong>æŸ¥çœ‹topicåˆ—è¡¨å‘½ä»¤</strong>ï¼š</p><pre><code class="shell">kafka-topics --zookeeper localhost:2181 --list</code></pre></li><li><p>kafkaå‘½ä»¤å‘é€æ•°æ®ï¼šï¼ˆç„¶åæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™æ•°æ®å‘é€å‡ºå»äº†ï¼‰</p><pre><code class="shell">kafka-console-producer --broker-list localhost:9092 --topic tuyrk-kafka-topic</code></pre></li><li><p>kafkaå‘½ä»¤æ¥å—æ•°æ®ï¼šï¼ˆç„¶åæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°æ¶ˆè´¹çš„ä¿¡æ¯äº†ï¼‰</p><pre><code class="shell">kafka-console-consumer --bootstrap-server localhost:9092 --topic tuyrk-kafka-topic --from-beginning</code></pre></li><li><p>åˆ é™¤topicå‘½ä»¤ï¼š</p><pre><code class="shell">kafka-topics.sh --zookeeper localhost:2181 --delete --topic tuyrk-kafka-topic</code></pre></li><li><p>kafkaæŸ¥çœ‹æ¶ˆè´¹è¿›åº¦ï¼šï¼ˆå½“æˆ‘ä»¬éœ€è¦æŸ¥çœ‹ä¸€ä¸ªæ¶ˆè´¹è€…ç»„çš„æ¶ˆè´¹è¿›åº¦æ—¶ï¼Œåˆ™ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼‰</p><pre><code class="shell">kafka-consumer-groups --bootstrap-server localhost:9092 --describe --group tuyrk-kafka-groupkafka-topics --zookeeper localhost:2181 --describe --topic tuyrk-kafka-topic</code></pre><blockquote><p><code>--describe --group</code> ä¸ºè®¢é˜…ç»„ï¼Œ åé¢æŒ‡å®š group name</p></blockquote></li></ol></li></ul><h3 id="æ€¥é€Ÿå…¥é—¨"><a href="#æ€¥é€Ÿå…¥é—¨" class="headerlink" title="æ€¥é€Ÿå…¥é—¨"></a>æ€¥é€Ÿå…¥é—¨</h3><p>ä¸‹é¢æˆ‘ä»¬ä¸€èµ·ä½¿ç”¨kafkaæœ€åŸºæœ¬çš„APIæ¥å¯¹kafkaè¿›è¡Œæ“ä½œï¼</p><ul><li><p>kafkaä¾èµ–åŒ…ï¼š</p><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;    &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre></li><li><p>kafkaç”Ÿäº§è€…ï¼š</p><pre><code class="java">package com.tuyrk.kafka.introduce;import com.alibaba.fastjson.JSON;import lombok.extern.slf4j.Slf4j;import org.apache.kafka.clients.producer.KafkaProducer;import org.apache.kafka.clients.producer.ProducerRecord;import org.apache.kafka.common.serialization.StringSerializer;import java.util.Properties;@Slf4jpublic class CollectKafkaProducer {    // åˆ›å»ºä¸€ä¸ªkafkaç”Ÿäº§è€…    private final KafkaProducer&lt;String, String&gt; producer;    // å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡ä¸ºtopic    private final String topic;    // åˆå§‹åŒ–kafkaçš„é…ç½®æ–‡ä»¶å’Œå®ä¾‹ï¼šProperties &amp; KafkaProducer    public CollectKafkaProducer(String topic) {        Properties props = new Properties();        // é…ç½®brokeråœ°å€        props.put(&quot;bootstrap.servers&quot;, &quot;192.168.11.51:9092&quot;);        // å®šä¹‰ä¸€ä¸ª client.id        props.put(&quot;client.id&quot;, &quot;demo-producer-test&quot;);        /// å…¶ä»–é…ç½®é¡¹ï¼š        /*props.put(&quot;batch.size&quot;, 16384);            //16KB -&gt; æ»¡è¶³16KBå‘é€æ‰¹é‡æ¶ˆæ¯        props.put(&quot;linger.ms&quot;, 10);            //10ms -&gt; æ»¡è¶³10msæ—¶é—´é—´éš”å‘é€æ‰¹é‡æ¶ˆæ¯        props.put(&quot;buffer.memory&quot;, 33554432);     //32M -&gt; ç¼“å­˜ææ€§èƒ½*/        // kafka åºåˆ—åŒ–é…ç½®ï¼š        props.put(&quot;key.serializer&quot;, StringSerializer.class.getName());        props.put(&quot;value.serializer&quot;, StringSerializer.class.getName());        // åˆ›å»º KafkaProducer ä¸ æ¥æ”¶ topic        this.producer = new KafkaProducer&lt;&gt;(props);        this.topic = topic;    }    // å‘é€æ¶ˆæ¯ ï¼ˆåŒæ­¥æˆ–è€…å¼‚æ­¥ï¼‰    public void send(Object message, boolean syncSend) throws InterruptedException {        try {            // åŒæ­¥å‘é€            if (syncSend) {                producer.send(new ProducerRecord&lt;&gt;(topic, JSON.toJSONString(message)));            }            // å¼‚æ­¥å‘é€ï¼ˆcallbackå®ç°å›è°ƒç›‘å¬ï¼‰            else {                producer.send(new ProducerRecord&lt;&gt;(topic, JSON.toJSONString(message)),                        (recordMetadata, e) -&gt; {                            if (e != null) {                                log.error(&quot;Unable to write to Kafka in CollectKafkaProducer [{}] exception: {}&quot;, topic, e);                            }                        });            }        } catch (Exception e) {}    }    // å…³é—­producer    public void close() {        producer.close();    }    // æµ‹è¯•å‡½æ•°    public static void main(String[] args) throws InterruptedException {        String topic = &quot;tuyrk-kafka-topic&quot;;        CollectKafkaProducer collectKafkaProducer = new CollectKafkaProducer(topic);        for (int i = 0; i &lt; 10; i++) {            User user = new User();            user.setId(i + &quot;&quot;);            user.setName(&quot;å¼ ä¸‰&quot;);            collectKafkaProducer.send(user, true);        }        Thread.sleep(Integer.MAX_VALUE);    }}</code></pre></li><li><p>kafkaæ¶ˆè´¹è€…ï¼š</p><pre><code class="java">package com.tuyrk.kafka.introduce;import lombok.extern.slf4j.Slf4j;import org.apache.kafka.clients.consumer.*;import org.apache.kafka.common.TopicPartition;import org.apache.kafka.common.serialization.StringDeserializer;import java.util.Collections;import java.util.List;import java.util.Properties;@Slf4jpublic class CollectKafkaConsumer {    // å®šä¹‰æ¶ˆè´¹è€…å®ä¾‹    private final KafkaConsumer&lt;String, String&gt; consumer;    // å®šä¹‰æ¶ˆè´¹ä¸»é¢˜    private final String topic;    // æ¶ˆè´¹è€…åˆå§‹åŒ–    public CollectKafkaConsumer(String topic) {        Properties props = new Properties();        // æ¶ˆè´¹è€…çš„zookeeper åœ°å€é…ç½®        props.put(&quot;zookeeper.connect&quot;, &quot;192.168.11.111:2181&quot;);        // æ¶ˆè´¹è€…çš„broker åœ°å€é…ç½®        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;192.168.11.51:9092&quot;);        // æ¶ˆè´¹è€…ç»„å®šä¹‰        props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;demo-group-id&quot;);        // æ˜¯å¦è‡ªåŠ¨æäº¤ï¼ˆauto commitï¼Œä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒå‡è®¾ç½®ä¸ºfalseï¼Œåˆ™ä¸ºæ‰‹å·¥ç¡®è®¤ï¼‰        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;false&quot;);        // è‡ªåŠ¨æäº¤é…ç½®é¡¹        // props.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG, &quot;1000&quot;);        // æ¶ˆè´¹è¿›åº¦ï¼ˆä½ç½® offsetï¼‰é‡è¦è®¾ç½®: latest,earliest        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);        // è¶…æ—¶æ—¶é—´é…ç½®        props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, &quot;30000&quot;);        // kafkaåºåˆ—åŒ–é…ç½®        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());        // åˆ›å»ºconsumerå¯¹è±¡ &amp; èµ‹å€¼topic        consumer = new KafkaConsumer&lt;&gt;(props);        this.topic = topic;        // è®¢é˜…æ¶ˆè´¹ä¸»é¢˜        consumer.subscribe(Collections.singletonList(topic));    }    // å¾ªç¯æ‹‰å–æ¶ˆæ¯å¹¶è¿›è¡Œæ¶ˆè´¹ï¼Œæ‰‹å·¥ACKæ–¹å¼    private void receive(KafkaConsumer&lt;String, String&gt; consumer) {        while (true) {            //     æ‹‰å–ç»“æœé›†(æ‹‰å–è¶…æ—¶æ—¶é—´ä¸º1ç§’)            ConsumerRecords&lt;String, String&gt; records = consumer.poll(1000);            //  æ‹‰å–ç»“æœé›†åè·å–å…·ä½“æ¶ˆæ¯çš„ä¸»é¢˜åç§° åˆ†åŒºä½ç½® æ¶ˆæ¯æ•°é‡            for (TopicPartition partition : records.partitions()) {                List&lt;ConsumerRecord&lt;String, String&gt;&gt; partitionRecords = records.records(partition);                String topic = partition.topic();                int size = partitionRecords.size();                log.info(&quot;è·å–topic:{},åˆ†åŒºä½ç½®:{},æ¶ˆæ¯æ•°ä¸º:{}&quot;, topic, partition.partition(), size);                // åˆ†åˆ«å¯¹æ¯ä¸ªpartitionè¿›è¡Œå¤„ç†                for (ConsumerRecord&lt;String, String&gt; partitionRecord : partitionRecords) {                    log.error(&quot;-----&gt; value: {}&quot;, partitionRecord.value());                    long offset = partitionRecord.offset() + 1;                    // consumer.commitSync(); // è¿™ç§æäº¤ä¼šè‡ªåŠ¨è·å–partition å’Œ offset                    // è¿™ç§æ˜¯æ˜¾ç¤ºæäº¤partition å’Œ offset è¿›åº¦                    consumer.commitSync(Collections.singletonMap(partition,                            new OffsetAndMetadata(offset)));                    log.info(&quot;åŒæ­¥æˆåŠŸ, topic: {}, æäº¤çš„ offset: {} &quot;, topic, offset);                }            }        }    }    // æµ‹è¯•å‡½æ•°    public static void main(String[] args) {        String topic = &quot;tuyrk-kafka-topic&quot;;        CollectKafkaConsumer collectKafkaConsumer = new CollectKafkaConsumer(topic);        collectKafkaConsumer.receive(collectKafkaConsumer.consumer);    }}</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03-Kafkaæ€¥é€Ÿå…¥é—¨ä¸å®æˆ˜(æ¦‚å¿µ)</title>
      <link href="/imooc/1297-MQ-Kafka/03-02-kafka-concept/"/>
      <url>/imooc/1297-MQ-Kafka/03-02-kafka-concept/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h3 id="Kafkaçš„ä¸»è¦ç‰¹ç‚¹"><a href="#Kafkaçš„ä¸»è¦ç‰¹ç‚¹" class="headerlink" title="Kafkaçš„ä¸»è¦ç‰¹ç‚¹"></a>Kafkaçš„ä¸»è¦ç‰¹ç‚¹</h3><p>Kafkaæ˜¯åˆ†å¸ƒå¼å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯ç³»ç»Ÿã€‚å®ƒæœ€åˆç”±LinkedInå…¬å¸å¼€å‘ï¼Œä¹‹åæˆä¸ºApacheé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚Kafkaæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ï¼Œå¯åˆ’åˆ†çš„ï¼Œå†—ä½™å¤‡ä»½çš„æŒä¹…æ€§çš„æ—¥å¿—æœåŠ¡ï¼Œå®ƒä¸»è¦ç”¨äºå¤„ç†æ´»è·ƒçš„æµå¼æ•°æ®ã€‚</p><ul><li>kafkaçš„ä¸»è¦ç‰¹ç‚¹ï¼š<ul><li>åŒæ—¶ä¸ºå‘å¸ƒå’Œè®¢é˜…æä¾›é«˜ååé‡ã€‚æ®äº†è§£ï¼ŒKafkaæ¯ç§’å¯ä»¥ç”Ÿäº§çº¦25ä¸‡æ¶ˆæ¯ï¼ˆ50 MBï¼‰ï¼Œæ¯ç§’å¤„ç†55ä¸‡æ¶ˆæ¯ï¼ˆ110 MBï¼‰ã€‚</li><li>å¯è¿›è¡ŒæŒä¹…åŒ–æ“ä½œã€‚å°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå› æ­¤å¯ç”¨äºæ‰¹é‡æ¶ˆè´¹ï¼Œä¾‹å¦‚ETLï¼Œä»¥åŠå®æ—¶åº”ç”¨ç¨‹åºã€‚é€šè¿‡å°†æ•°æ®æŒä¹…åŒ–åˆ°ç¡¬ç›˜ä»¥åŠreplicationé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚</li><li>åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ˜“äºå‘å¤–æ‰©å±•ã€‚æ‰€æœ‰çš„producerã€brokerå’Œconsumeréƒ½ä¼šæœ‰å¤šä¸ªï¼Œå‡ä¸ºåˆ†å¸ƒå¼çš„ã€‚æ— éœ€åœæœºå³å¯æ‰©å±•æœºå™¨ã€‚</li><li>æ¶ˆæ¯è¢«å¤„ç†çš„çŠ¶æ€æ˜¯åœ¨consumerç«¯ç»´æŠ¤ï¼Œè€Œä¸æ˜¯ç”±serverç«¯ç»´æŠ¤ã€‚å½“å¤±è´¥æ—¶èƒ½è‡ªåŠ¨å¹³è¡¡ã€‚</li><li>æ”¯æŒonlineå’Œofflineçš„åœºæ™¯ã€‚</li></ul></li></ul><h3 id="Kafkaçš„æ¶æ„"><a href="#Kafkaçš„æ¶æ„" class="headerlink" title="Kafkaçš„æ¶æ„"></a>Kafkaçš„æ¶æ„</h3><p>Kafkaçš„æ•´ä½“æ¶æ„éå¸¸ç®€å•ï¼Œæ˜¯æ˜¾å¼åˆ†å¸ƒå¼æ¶æ„ï¼Œproducerã€brokerï¼ˆkafkaï¼‰å’Œconsumeréƒ½å¯ä»¥æœ‰å¤šä¸ªã€‚Producerï¼Œconsumerå®ç°Kafkaæ³¨å†Œçš„æ¥å£ï¼Œæ•°æ®ä»producerå‘é€åˆ°brokerï¼Œbrokeræ‰¿æ‹…ä¸€ä¸ªä¸­é—´ç¼“å­˜å’Œåˆ†å‘çš„ä½œç”¨ã€‚brokeråˆ†å‘æ³¨å†Œåˆ°ç³»ç»Ÿä¸­çš„consumerã€‚brokerçš„ä½œç”¨ç±»ä¼¼äºç¼“å­˜ï¼Œå³æ´»è·ƒçš„æ•°æ®å’Œç¦»çº¿å¤„ç†ç³»ç»Ÿä¹‹é—´çš„ç¼“å­˜ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„é€šä¿¡ï¼Œæ˜¯åŸºäºç®€å•ï¼Œé«˜æ€§èƒ½ï¼Œä¸”ä¸ç¼–ç¨‹è¯­è¨€æ— å…³çš„TCPåè®®ã€‚</p><ul><li>åŸºæœ¬æ¦‚å¿µï¼š<ul><li>Topicï¼šç‰¹æŒ‡Kafkaå¤„ç†çš„æ¶ˆæ¯æºï¼ˆfeeds of messagesï¼‰çš„ä¸åŒåˆ†ç±»ã€‚</li><li>Partitionï¼šTopicç‰©ç†ä¸Šçš„åˆ†ç»„ï¼Œä¸€ä¸ªtopicå¯ä»¥åˆ†ä¸ºå¤šä¸ªpartitionï¼Œæ¯ä¸ªpartitionæ˜¯ä¸€ä¸ªæœ‰åºçš„é˜Ÿåˆ—ã€‚partitionä¸­çš„æ¯æ¡æ¶ˆæ¯éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ªæœ‰åºçš„idï¼ˆoffsetï¼‰ã€‚</li><li>Messageï¼šæ¶ˆæ¯ï¼Œæ˜¯é€šä¿¡çš„åŸºæœ¬å•ä½ï¼Œæ¯ä¸ªproducerå¯ä»¥å‘ä¸€ä¸ªtopicï¼ˆä¸»é¢˜ï¼‰å‘å¸ƒä¸€äº›æ¶ˆæ¯ã€‚</li><li>Producersï¼šæ¶ˆæ¯å’Œæ•°æ®ç”Ÿäº§è€…ï¼Œå‘Kafkaçš„ä¸€ä¸ªtopicå‘å¸ƒæ¶ˆæ¯çš„è¿‡ç¨‹å«åšproducersã€‚</li><li>Consumersï¼šæ¶ˆæ¯å’Œæ•°æ®æ¶ˆè´¹è€…ï¼Œè®¢é˜…topicså¹¶å¤„ç†å…¶å‘å¸ƒçš„æ¶ˆæ¯çš„è¿‡ç¨‹å«åšconsumersã€‚</li><li>Brokerï¼šç¼“å­˜ä»£ç†ï¼ŒKafkaé›†ç¾¤ä¸­çš„ä¸€å°æˆ–å¤šå°æœåŠ¡å™¨ç»Ÿç§°ä¸ºbrokerã€‚</li></ul></li><li>å‘é€æ¶ˆæ¯çš„æµç¨‹ï¼š<ul><li>Produceræ ¹æ®æŒ‡å®šçš„partitionæ–¹æ³•ï¼ˆround-robinã€hashç­‰ï¼‰ï¼Œå°†æ¶ˆæ¯å‘å¸ƒåˆ°æŒ‡å®štopicçš„partitioné‡Œé¢</li><li>kafkaé›†ç¾¤æ¥æ”¶åˆ°Producerå‘è¿‡æ¥çš„æ¶ˆæ¯åï¼Œå°†å…¶æŒä¹…åŒ–åˆ°ç¡¬ç›˜ï¼Œå¹¶ä¿ç•™æ¶ˆæ¯æŒ‡å®šæ—¶é•¿ï¼ˆå¯é…ç½®ï¼‰ï¼Œè€Œä¸å…³æ³¨æ¶ˆæ¯æ˜¯å¦è¢«æ¶ˆè´¹ã€‚</li><li>Consumerä»kafkaé›†ç¾¤pullæ•°æ®ï¼Œå¹¶æ§åˆ¶è·å–æ¶ˆæ¯çš„offset</li></ul></li></ul><h3 id="kafkaçš„ä¼˜ç§€è®¾è®¡"><a href="#kafkaçš„ä¼˜ç§€è®¾è®¡" class="headerlink" title="kafkaçš„ä¼˜ç§€è®¾è®¡"></a>kafkaçš„ä¼˜ç§€è®¾è®¡</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä»kafkaçš„ååé‡ã€è´Ÿè½½å‡è¡¡ã€æ¶ˆæ¯æ‹‰å–ã€æ‰©å±•æ€§æ¥è¯´ä¸€è¯´kafkaçš„ä¼˜ç§€è®¾è®¡ã€‚</p><ol><li><p>é«˜ååæ˜¯kafkaéœ€è¦å®ç°çš„æ ¸å¿ƒç›®æ ‡ä¹‹ä¸€ï¼Œä¸ºæ­¤kafkaåšäº†ä»¥ä¸‹ä¸€äº›è®¾è®¡ï¼š</p><ul><li><p>å†…å­˜è®¿é—®ï¼šç›´æ¥ä½¿ç”¨ linux æ–‡ä»¶ç³»ç»Ÿçš„cacheï¼Œæ¥é«˜æ•ˆç¼“å­˜æ•°æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œè¯»å–å’Œå†™å…¥ã€‚</p></li><li><p>æ•°æ®ç£ç›˜æŒä¹…åŒ–ï¼šæ¶ˆæ¯ä¸åœ¨å†…å­˜ä¸­cacheï¼Œç›´æ¥å†™å…¥åˆ°ç£ç›˜ï¼Œå……åˆ†åˆ©ç”¨ç£ç›˜çš„é¡ºåºè¯»å†™æ€§èƒ½ã€‚</p></li><li><p>zero-copyï¼šå‡å°‘IOæ“ä½œæ­¥éª¤</p><blockquote><p>é‡‡ç”¨linux Zero-Copyæé«˜å‘é€æ€§èƒ½ã€‚ä¼ ç»Ÿçš„æ•°æ®å‘é€éœ€è¦å‘é€4æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œé‡‡ç”¨sendfileç³»ç»Ÿè°ƒç”¨ä¹‹åï¼Œæ•°æ®ç›´æ¥åœ¨å†…æ ¸æ€äº¤æ¢ï¼Œç³»ç»Ÿä¸Šä¸‹æ–‡åˆ‡æ¢å‡å°‘ä¸º2æ¬¡ã€‚æ ¹æ®æµ‹è¯•ç»“æœï¼Œå¯ä»¥æé«˜60%çš„æ•°æ®å‘é€æ€§èƒ½ã€‚Zero-Copyè¯¦ç»†çš„æŠ€æœ¯ç»†èŠ‚å¯ä»¥å‚è€ƒï¼š<a href="https://www.ibm.com/developerworks/linux/library/j-zerocopy/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/linux/library/j-zerocopy/</a></p></blockquote></li><li><p>å¯¹æ¶ˆæ¯çš„å¤„ç†ï¼š</p><blockquote><p>æ”¯æŒæ•°æ®æ‰¹é‡å‘é€</p><p>æ”¯æŒæ•°æ®å‹ç¼©æœºåˆ¶</p></blockquote></li><li><p>ä¸»é¢˜åˆ†åŒºï¼š</p><blockquote><p>Topicåˆ’åˆ†ä¸ºå¤šä¸ªpartitionï¼Œæé«˜ç”Ÿäº§/æ¶ˆè´¹ç«¯å¤„ç†æ¶ˆæ¯çš„parallelismï¼ˆå¹¶è¡Œåº¦ï¼‰ï¼Œæ•°æ®åœ¨ç£ç›˜ä¸Šå­˜å–ä»£ä»·ä¸ºO(1)ã€‚kafkaä»¥topicæ¥è¿›è¡Œæ¶ˆæ¯ç®¡ç†ï¼Œæ¯ä¸ªtopicåŒ…å«å¤šä¸ªpartï¼ˆitionï¼‰ï¼Œæ¯ä¸ªpartå¯¹åº”ä¸€ä¸ªé€»è¾‘logï¼Œæœ‰å¤šä¸ªsegmentç»„æˆã€‚æ¯ä¸ªsegmentä¸­å­˜å‚¨å¤šæ¡æ¶ˆæ¯ï¼Œæ¶ˆæ¯idç”±å…¶é€»è¾‘ä½ç½®å†³å®šï¼Œå³ä»æ¶ˆæ¯idå¯ç›´æ¥å®šä½åˆ°æ¶ˆæ¯çš„å­˜å‚¨ä½ç½®ï¼Œé¿å…idåˆ°ä½ç½®çš„é¢å¤–æ˜ å°„ã€‚æ¯ä¸ªpartåœ¨å†…å­˜ä¸­å¯¹åº”ä¸€ä¸ªindexï¼Œè®°å½•æ¯ä¸ªsegmentä¸­çš„ç¬¬ä¸€æ¡æ¶ˆæ¯åç§»ã€‚å‘å¸ƒè€…å‘åˆ°æŸä¸ªtopicçš„æ¶ˆæ¯ä¼šè¢«å‡åŒ€çš„åˆ†å¸ƒåˆ°å¤šä¸ªpartä¸Šï¼ˆéšæœºæˆ–æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„å›è°ƒå‡½æ•°è¿›è¡Œåˆ†å¸ƒï¼‰ï¼Œbrokeræ”¶åˆ°å‘å¸ƒæ¶ˆæ¯å¾€å¯¹åº”partçš„æœ€åä¸€ä¸ªsegmentä¸Šæ·»åŠ è¯¥æ¶ˆæ¯ï¼Œå½“æŸä¸ªsegmentä¸Šçš„æ¶ˆæ¯æ¡æ•°è¾¾åˆ°é…ç½®å€¼æˆ–æ¶ˆæ¯å‘å¸ƒæ—¶é—´è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œsegmentä¸Šçš„æ¶ˆæ¯ä¼šè¢«flushåˆ°ç£ç›˜ï¼Œåªæœ‰flushåˆ°ç£ç›˜ä¸Šçš„æ¶ˆæ¯è®¢é˜…è€…æ‰èƒ½è®¢é˜…åˆ°ï¼Œsegmentè¾¾åˆ°ä¸€å®šçš„å¤§å°åå°†ä¸ä¼šå†å¾€è¯¥segmentå†™æ•°æ®ï¼Œbrokerä¼šåˆ›å»ºæ–°çš„segmentã€‚</p></blockquote></li></ul></li><li><p>è´Ÿè½½å‡è¡¡ï¼š</p><blockquote><ul><li><p>produceræ ¹æ®ç”¨æˆ·æŒ‡å®šçš„ç®—æ³•ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šçš„partition</p></li><li><p>å­˜åœ¨å¤šä¸ªpartiitonï¼Œæ¯ä¸ªpartitionæœ‰è‡ªå·±çš„replicaï¼Œæ¯ä¸ªreplicaåˆ†å¸ƒåœ¨ä¸åŒçš„BrokerèŠ‚ç‚¹ä¸Š</p></li><li><p>å¤šä¸ªpartitionéœ€è¦é€‰å–å‡ºlead partitionï¼Œlead partitionè´Ÿè´£è¯»å†™ï¼Œå¹¶ç”±zookeeperè´Ÿè´£fail over</p></li><li><p>é€šè¿‡zookeeperç®¡ç†brokerä¸consumerçš„åŠ¨æ€åŠ å…¥ä¸ç¦»å¼€</p></li></ul></blockquote></li><li><p>æ¶ˆæ¯çš„æ‹‰å–ï¼š</p><blockquote><ul><li>ç®€åŒ–kafkaè®¾è®¡ï¼ˆç”±äºkafka brokerä¼šæŒä¹…åŒ–æ•°æ®ï¼Œbrokeræ²¡æœ‰å†…å­˜å‹åŠ›ï¼Œå› æ­¤ï¼Œconsumeréå¸¸é€‚åˆé‡‡å–pullçš„æ–¹å¼æ¶ˆè´¹æ•°æ®ï¼‰</li><li>consumeræ ¹æ®æ¶ˆè´¹èƒ½åŠ›è‡ªä¸»æ§åˆ¶æ¶ˆæ¯æ‹‰å–é€Ÿåº¦</li><li>consumeræ ¹æ®è‡ªèº«æƒ…å†µè‡ªä¸»é€‰æ‹©æ¶ˆè´¹æ¨¡å¼ï¼Œä¾‹å¦‚æ‰¹é‡ï¼Œé‡å¤æ¶ˆè´¹ï¼Œä»å°¾ç«¯å¼€å§‹æ¶ˆè´¹ç­‰</li></ul></blockquote></li><li><p>å¯æ‰©å±•æ€§</p><blockquote><p>å½“éœ€è¦å¢åŠ brokerç»“ç‚¹æ—¶ï¼Œæ–°å¢çš„brokerä¼šå‘zookeeperæ³¨å†Œï¼Œè€ŒproduceråŠconsumerä¼šæ ¹æ®æ³¨å†Œåœ¨zookeeperä¸Šçš„watcheræ„ŸçŸ¥è¿™äº›å˜åŒ–ï¼Œå¹¶åŠæ—¶ä½œå‡ºè°ƒæ•´ã€‚</p></blockquote></li></ol><h3 id="Kafkaçš„åº”ç”¨åœºæ™¯"><a href="#Kafkaçš„åº”ç”¨åœºæ™¯" class="headerlink" title="Kafkaçš„åº”ç”¨åœºæ™¯"></a>Kafkaçš„åº”ç”¨åœºæ™¯</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å’Œå°ä¼™ä¼´ä¸€èµ·æ¢è®¨ä¸€äº›kafkaåœ¨å®é™…å·¥ä½œä¸­çš„ä¸€äº›é‡è¦åº”ç”¨åœºæ™¯ï¼Œå¸®åŠ©å°ä¼™ä¼´åœ¨ä»¥åçš„å­¦ä¹ å’Œå·¥ä½œé‡Œèƒ½å¤Ÿåˆç†çš„è¿ç”¨kafkaä¸­é—´ä»¶æœåŠ¡äºä¸šåŠ¡å’Œæ¶æ„è®¾è®¡ã€‚</p><ul><li><p>æ¶ˆæ¯é˜Ÿåˆ—</p><blockquote><p>æ¯”èµ·å¤§å¤šæ•°çš„æ¶ˆæ¯ç³»ç»Ÿæ¥è¯´ï¼ŒKafkaæœ‰æ›´å¥½çš„ååé‡ï¼Œå†…ç½®çš„åˆ†åŒºï¼Œå†—ä½™åŠå®¹é”™æ€§ï¼Œè¿™è®©Kafkaæˆä¸ºäº†ä¸€ä¸ªå¾ˆå¥½çš„å¤§è§„æ¨¡æ¶ˆæ¯å¤„ç†åº”ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚æ¶ˆæ¯ç³»ç»Ÿä¸€èˆ¬ååé‡ç›¸å¯¹è¾ƒä½ï¼Œä½†æ˜¯éœ€è¦æ›´å°çš„ç«¯åˆ°ç«¯å»¶æ—¶ï¼Œå¹¶å¸¸å¸¸ä¾èµ–äºKafkaæä¾›çš„å¼ºå¤§çš„æŒä¹…æ€§ä¿éšœã€‚åœ¨è¿™ä¸ªé¢†åŸŸï¼ŒKafkaè¶³ä»¥åª²ç¾ä¼ ç»Ÿæ¶ˆæ¯ç³»ç»Ÿï¼Œå¦‚ActiveMQæˆ–RabbitMQã€‚</p></blockquote></li><li><p>è¡Œä¸ºè·Ÿè¸ª</p><blockquote><p>Kafkaçš„å¦ä¸€ä¸ªåº”ç”¨åœºæ™¯æ˜¯è·Ÿè¸ªç”¨æˆ·æµè§ˆé¡µé¢ã€æœç´¢åŠå…¶ä»–è¡Œä¸ºï¼Œä»¥å‘å¸ƒ-è®¢é˜…çš„æ¨¡å¼å®æ—¶è®°å½•åˆ°å¯¹åº”çš„topicé‡Œã€‚é‚£ä¹ˆè¿™äº›ç»“æœè¢«è®¢é˜…è€…æ‹¿åˆ°åï¼Œå°±å¯ä»¥åšè¿›ä¸€æ­¥çš„å®æ—¶å¤„ç†ï¼Œæˆ–å®æ—¶ç›‘æ§ï¼Œæˆ–æ”¾åˆ°hadoop/ç¦»çº¿æ•°æ®ä»“åº“é‡Œå¤„ç†ã€‚</p></blockquote></li><li><p>å…ƒä¿¡æ¯ç›‘æ§</p><blockquote><p>ä½œä¸ºæ“ä½œè®°å½•çš„ç›‘æ§æ¨¡å—æ¥ä½¿ç”¨ï¼Œå³æ±‡é›†è®°å½•ä¸€äº›æ“ä½œä¿¡æ¯ï¼Œå¯ä»¥ç†è§£ä¸ºè¿ç»´æ€§è´¨çš„æ•°æ®ç›‘æ§å§ã€‚</p></blockquote></li><li><p>æ—¥å¿—æ”¶é›†</p><blockquote><p>æ—¥å¿—æ”¶é›†æ–¹é¢ï¼Œå…¶å®å¼€æºäº§å“æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬Scribeã€Apache Flumeã€‚å¾ˆå¤šäººä½¿ç”¨Kafkaä»£æ›¿æ—¥å¿—èšåˆï¼ˆlog aggregationï¼‰ã€‚æ—¥å¿—èšåˆä¸€èˆ¬æ¥è¯´æ˜¯ä»æœåŠ¡å™¨ä¸Šæ”¶é›†æ—¥å¿—æ–‡ä»¶ï¼Œç„¶åæ”¾åˆ°ä¸€ä¸ªé›†ä¸­çš„ä½ç½®ï¼ˆæ–‡ä»¶æœåŠ¡å™¨æˆ–HDFSï¼‰è¿›è¡Œå¤„ç†ã€‚ç„¶è€ŒKafkaå¿½ç•¥æ‰æ–‡ä»¶çš„ç»†èŠ‚ï¼Œå°†å…¶æ›´æ¸…æ™°åœ°æŠ½è±¡æˆä¸€ä¸ªä¸ªæ—¥å¿—æˆ–äº‹ä»¶çš„æ¶ˆæ¯æµã€‚è¿™å°±è®©Kafkaå¤„ç†è¿‡ç¨‹å»¶è¿Ÿæ›´ä½ï¼Œæ›´å®¹æ˜“æ”¯æŒå¤šæ•°æ®æºå’Œåˆ†å¸ƒå¼æ•°æ®å¤„ç†ã€‚æ¯”èµ·ä»¥æ—¥å¿—ä¸ºä¸­å¿ƒçš„ç³»ç»Ÿæ¯”å¦‚Scribeæˆ–è€…Flumeæ¥è¯´ï¼ŒKafkaæä¾›åŒæ ·é«˜æ•ˆçš„æ€§èƒ½å’Œå› ä¸ºå¤åˆ¶å¯¼è‡´çš„æ›´é«˜çš„è€ç”¨æ€§ä¿è¯ï¼Œä»¥åŠæ›´ä½çš„ç«¯åˆ°ç«¯å»¶è¿Ÿã€‚</p></blockquote></li><li><p>æµå¤„ç†</p><blockquote><p>è¿™ä¸ªåœºæ™¯å¯èƒ½æ¯”è¾ƒå¤šï¼Œä¹Ÿå¾ˆå¥½ç†è§£ã€‚ä¿å­˜æ”¶é›†æµæ•°æ®ï¼Œä»¥æä¾›ä¹‹åå¯¹æ¥çš„Stormæˆ–å…¶ä»–æµå¼è®¡ç®—æ¡†æ¶è¿›è¡Œå¤„ç†ã€‚å¾ˆå¤šç”¨æˆ·ä¼šå°†é‚£äº›ä»åŸå§‹topicæ¥çš„æ•°æ®è¿›è¡Œé˜¶æ®µæ€§å¤„ç†ï¼Œæ±‡æ€»ï¼Œæ‰©å……æˆ–è€…ä»¥å…¶ä»–çš„æ–¹å¼è½¬æ¢åˆ°æ–°çš„topicä¸‹å†ç»§ç»­åé¢çš„å¤„ç†ã€‚ä¾‹å¦‚ä¸€ä¸ªæ–‡ç« æ¨èçš„å¤„ç†æµç¨‹ï¼Œå¯èƒ½æ˜¯å…ˆä»RSSæ•°æ®æºä¸­æŠ“å–æ–‡ç« çš„å†…å®¹ï¼Œç„¶åå°†å…¶ä¸¢å…¥ä¸€ä¸ªå«åšâ€œæ–‡ç« â€çš„topicä¸­ï¼›åç»­æ“ä½œå¯èƒ½æ˜¯éœ€è¦å¯¹è¿™ä¸ªå†…å®¹è¿›è¡Œæ¸…ç†ï¼Œæ¯”å¦‚å›å¤æ­£å¸¸æ•°æ®æˆ–è€…åˆ é™¤é‡å¤æ•°æ®ï¼Œæœ€åå†å°†å†…å®¹åŒ¹é…çš„ç»“æœè¿”è¿˜ç»™ç”¨æˆ·ã€‚è¿™å°±åœ¨ä¸€ä¸ªç‹¬ç«‹çš„topicä¹‹å¤–ï¼Œäº§ç”Ÿäº†ä¸€ç³»åˆ—çš„å®æ—¶æ•°æ®å¤„ç†çš„æµç¨‹ã€‚Stromå’ŒSamzaæ˜¯éå¸¸è‘—åçš„å®ç°è¿™ç§ç±»å‹æ•°æ®è½¬æ¢çš„æ¡†æ¶ã€‚</p></blockquote></li><li><p>äº‹ä»¶æº</p><blockquote><p>äº‹ä»¶æºæ˜¯ä¸€ç§åº”ç”¨ç¨‹åºè®¾è®¡çš„æ–¹å¼ï¼Œè¯¥æ–¹å¼çš„çŠ¶æ€è½¬ç§»è¢«è®°å½•ä¸ºæŒ‰æ—¶é—´é¡ºåºæ’åºçš„è®°å½•åºåˆ—ã€‚Kafkaå¯ä»¥å­˜å‚¨å¤§é‡çš„æ—¥å¿—æ•°æ®ï¼Œè¿™ä½¿å¾—å®ƒæˆä¸ºä¸€ä¸ªå¯¹è¿™ç§æ–¹å¼çš„åº”ç”¨æ¥è¯´ç»ä½³çš„åå°ã€‚æ¯”å¦‚åŠ¨æ€æ±‡æ€»ï¼ˆNews feedï¼‰</p></blockquote></li><li><p>æŒä¹…æ€§æ—¥å¿—ï¼ˆcommit logï¼‰</p><blockquote><p>Kafkaå¯ä»¥ä¸ºä¸€ç§å¤–éƒ¨çš„æŒä¹…æ€§æ—¥å¿—çš„åˆ†å¸ƒå¼ç³»ç»Ÿæä¾›æœåŠ¡ã€‚è¿™ç§æ—¥å¿—å¯ä»¥åœ¨èŠ‚ç‚¹é—´å¤‡ä»½æ•°æ®ï¼Œå¹¶ä¸ºæ•…éšœèŠ‚ç‚¹æ•°æ®å›å¤æä¾›ä¸€ç§é‡æ–°åŒæ­¥çš„æœºåˆ¶ã€‚Kafkaä¸­æ—¥å¿—å‹ç¼©åŠŸèƒ½ä¸ºè¿™ç§ç”¨æ³•æä¾›äº†æ¡ä»¶ã€‚åœ¨è¿™ç§ç”¨æ³•ä¸­ï¼ŒKafkaç±»ä¼¼äºApache BookKeeperé¡¹ç›®ã€‚</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03-Kafkaæ€¥é€Ÿå…¥é—¨ä¸å®æˆ˜</title>
      <link href="/imooc/1297-MQ-Kafka/03-kafka/"/>
      <url>/imooc/1297-MQ-Kafka/03-kafka/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="3-1-æœ¬ç« å¯¼èˆª"><a href="#3-1-æœ¬ç« å¯¼èˆª" class="headerlink" title="3-1 æœ¬ç« å¯¼èˆª"></a>3-1 æœ¬ç« å¯¼èˆª</h2><blockquote><ul><li>Kafkaæ ¸å¿ƒæ¦‚å¿µ&amp;è®¾è®¡&amp;åº”ç”¨åœºæ™¯</li><li>Kafkaç¯å¢ƒæ­å»º&amp;æ€¥é€Ÿå…¥é—¨</li><li>ä¸SpringBootæ•´åˆå®æˆ˜</li><li>Kafkaé«˜ååé‡æ ¸å¿ƒå®æˆ˜-æ—¥å¿—æ”¶é›†è®¾è®¡</li><li>Kafkaé«˜ååé‡æ ¸å¿ƒå®æˆ˜-æ—¥å¿—è¾“å‡ºï¼ˆæ—¥å¿—ç»„ä»¶è¾“å‡ºlog4j2ï¼‰</li><li>Kafkaé«˜ååé‡æ ¸å¿ƒå®æˆ˜-æ—¥å¿—æ”¶é›†ï¼ˆFileBeatï¼‰</li><li>Kafkaé«˜ååé‡æ ¸å¿ƒå®æˆ˜-æ—¥å¿—è¿‡æ»¤ï¼ˆlogstashï¼‰</li><li>Kafkaé«˜ååé‡æ ¸å¿ƒå®æˆ˜-æ—¥å¿—æŒä¹…åŒ–ï¼ˆElasticSearchï¼‰</li><li>Kafkaé«˜ååé‡æ ¸å¿ƒå®æˆ˜-æ—¥å¿—å¯è§†åŒ–ï¼ˆKibanaï¼‰</li><li>åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†ã€é“¾è·¯è·Ÿè¸ªã€ç›‘æ§å‘Šè­¦å¹³å°æ¶æ„è®²è§£</li></ul></blockquote><h2 id="3-2-kafkaæ ¸å¿ƒæ¦‚å¿µä¸åº”ç”¨åœºæ™¯"><a href="#3-2-kafkaæ ¸å¿ƒæ¦‚å¿µä¸åº”ç”¨åœºæ™¯" class="headerlink" title="3-2 kafkaæ ¸å¿ƒæ¦‚å¿µä¸åº”ç”¨åœºæ™¯"></a>3-2 <a href="03-02-kafka-concept.md">kafkaæ ¸å¿ƒæ¦‚å¿µä¸åº”ç”¨åœºæ™¯</a></h2><h2 id="3-3-kafkaæ€¥é€Ÿå…¥é—¨ä¸æ ¸å¿ƒAPIè§£æ"><a href="#3-3-kafkaæ€¥é€Ÿå…¥é—¨ä¸æ ¸å¿ƒAPIè§£æ" class="headerlink" title="3-3 kafkaæ€¥é€Ÿå…¥é—¨ä¸æ ¸å¿ƒAPIè§£æ"></a>3-3 <a href="03-03-kafka-api.md">kafkaæ€¥é€Ÿå…¥é—¨ä¸æ ¸å¿ƒAPIè§£æ</a></h2><h2 id="3-4-Kafkaä¸springbootæ•´åˆ-ç”Ÿäº§è€…è®²è§£"><a href="#3-4-Kafkaä¸springbootæ•´åˆ-ç”Ÿäº§è€…è®²è§£" class="headerlink" title="3-4 Kafkaä¸springbootæ•´åˆ_ç”Ÿäº§è€…è®²è§£"></a>3-4 Kafkaä¸springbootæ•´åˆ_ç”Ÿäº§è€…è®²è§£</h2><p>SpringBoot2.xæ•´åˆKafkaæ­¥éª¤</p><blockquote><ol><li>Mavené…ç½®</li><li>application.properties</li><li>åˆ›å»ºKafkaTemplateå¯¹è±¡</li><li>@KafkaListenerç›‘å¬æ¶ˆæ¯</li></ol></blockquote><h3 id="Mavené…ç½®"><a href="#Mavené…ç½®" class="headerlink" title="Mavené…ç½®"></a>Mavené…ç½®</h3><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;    &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre><h3 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h3><pre><code class="yml">server:  servlet:    context-path: /kafka  port: 8080## SpringBoot æ•´åˆ Kafkaspring:  kafka:    bootstrap-servers: localhost:9002    producer:      retries: 0 # kafka producerå‘é€æ¶ˆæ¯å¤±è´¥æ—¶çš„é‡è¯•æ¬¡æ•°      batch-size: 16384 # æ‰¹é‡å‘é€æ•°æ®çš„é…ç½®      # kafkaæ¶ˆæ¯çš„åºåˆ—åŒ–é…ç½®      key-serializer: org.apache.kafka.common.serialization.StringSerializer      value-serializer: org.apache.kafka.common.serialization.StringSerializer      acks: 1 # kafkaç”Ÿäº§ç«¯æœ€é‡è¦çš„é€‰é¡¹ï¼Œå¯é æ€§æŠ•é€’çš„é…ç½®é¡¹</code></pre><blockquote><ul><li><p>acks=0ï¼šç”Ÿäº§è€…åœ¨æˆåŠŸå†™å…¥æ¶ˆæ¯ä¹‹å‰ï¼Œä¸ä¼šç­‰å¾…ä»»ä½•æ¥è‡ªæœåŠ¡å™¨çš„ç›¸åº”</p></li><li><p>acks=1ï¼šåªè¦é›†ç¾¤çš„é¦–é¢†èŠ‚ç‚¹æ”¶åˆ°æ¶ˆæ¯ï¼Œç”Ÿäº§è€…å°±ä¼šæ”¶åˆ°ä¸€ä¸ªæ¥è‡ªæœåŠ¡å™¨çš„æˆåŠŸå“åº”</p></li><li><p>acks=-1/ALLï¼šåˆ†åŒºleaderå¿…é¡»ç­‰å¾…æ¶ˆæ¯è¢«æˆåŠŸå†™å…¥åˆ°æ‰€æœ‰çš„ISRå‰¯æœ¬ï¼ˆåŒæ­¥å‰¯æœ¬ï¼‰ä¸­,æ‰è®¤ä¸ºproducerè¯·æ±‚æˆåŠŸã€‚è¿™ç§æ–¹æ¡ˆæä¾›æœ€é«˜çš„æ¶ˆæ¯æŒä¹…æ€§ä¿è¯ï¼Œä½†æ˜¯ç†è®ºä¸Šååç‡ä¹Ÿæ˜¯æœ€å·®çš„</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd8xjbkqfcj30ju06fdfy.jpg" alt="Acksè¯·æ±‚" style="zoom:80%;" /></li></ul></blockquote><h3 id="åˆ›å»ºKafkaTemplateå¯¹è±¡"><a href="#åˆ›å»ºKafkaTemplateå¯¹è±¡" class="headerlink" title="åˆ›å»ºKafkaTemplateå¯¹è±¡"></a>åˆ›å»ºKafkaTemplateå¯¹è±¡</h3><pre><code class="java">@Slf4j@Componentpublic class KafkaProducerService {    @Resource    private KafkaTemplate&lt;String, String&gt; kafkaTemplate;    public void sendMessage(String topic, String message) {        ListenableFuture&lt;SendResult&lt;String, String&gt;&gt; future = kafkaTemplate.send(topic, message);        future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;String, String&gt;&gt;() {            @Override            public void onFailure(Throwable throwable) {                log.error(&quot;å‘é€æ¶ˆæ¯å¤±è´¥ï¼š{}&quot;, throwable.getMessage());            }            @Override            public void onSuccess(SendResult&lt;String, String&gt; stringObjectSendResult) {                log.info(&quot;å‘é€æ¶ˆæ¯æˆåŠŸï¼š{}&quot;, stringObjectSendResult.toString());            }        });    }}</code></pre><h2 id="3-5-Kafkaä¸springbootæ•´åˆ-æ¶ˆè´¹è€…è®²è§£"><a href="#3-5-Kafkaä¸springbootæ•´åˆ-æ¶ˆè´¹è€…è®²è§£" class="headerlink" title="3-5 Kafkaä¸springbootæ•´åˆ_æ¶ˆè´¹è€…è®²è§£"></a>3-5 Kafkaä¸springbootæ•´åˆ_æ¶ˆè´¹è€…è®²è§£</h2><h3 id="application-properties-1"><a href="#application-properties-1" class="headerlink" title="application.properties"></a>application.properties</h3><pre><code class="yaml">## SpringBoot æ•´åˆ Kafkaspring:  kafka:    bootstrap-servers: localhost:9002    consumer:      enable-auto-commit: false # consumeræ¶ˆæ¯çš„ç­¾æ”¶æœºåˆ¶ï¼šæ‰‹å·¥ç­¾æ”¶      auto-offset-reset: earliest # åœ¨åç§»é‡æ— æ•ˆçš„æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹è€…å°†ä»èµ·å§‹ä½ç½®è¯»å–åˆ†åŒºçš„è®°å½•      # kafkaæ¶ˆæ¯çš„åºåˆ—åŒ–é…ç½®      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer    listener:      ack-mode: manual # æ‰‹å·¥ç­¾æ”¶      concurrency: 5 # å¹¶è¡Œåº¦</code></pre><blockquote><p>auto-offset-resetå±æ€§æŒ‡å®šäº†æ¶ˆè´¹è€…åœ¨è¯»å–ä¸€ä¸ªæ²¡æœ‰åç§»é‡çš„åˆ†åŒºæˆ–è€…åç§»é‡æ— æ•ˆçš„æƒ…å†µä¸‹è¯¥åšä½•å¤„ç†ï¼š</p><ul><li>latestï¼ˆé»˜è®¤å€¼ï¼‰ï¼šåœ¨åç§»é‡æ— æ•ˆçš„æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹è€…å°†ä»æœ€æ–°çš„è®°å½•å¼€å§‹è¯»å–æ•°æ®ï¼ˆåœ¨æ¶ˆè´¹è€…å¯åŠ¨ä¹‹åç”Ÿæˆçš„è®°å½•ï¼‰</li><li>earliestï¼šåœ¨åç§»é‡æ— æ•ˆçš„æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹è€…å°†ä»èµ·å§‹ä½ç½®è¯»å–åˆ†åŒºçš„è®°å½•</li></ul></blockquote><h3 id="KafkaListenerç›‘å¬æ¶ˆæ¯"><a href="#KafkaListenerç›‘å¬æ¶ˆæ¯" class="headerlink" title="@KafkaListenerç›‘å¬æ¶ˆæ¯"></a>@KafkaListenerç›‘å¬æ¶ˆæ¯</h3><pre><code class="java">@Slf4j@Componentpublic class KafkaConsumerService {    @KafkaListener(groupId = &quot;tuyrk-kafka-group&quot;, topics = {&quot;tuyrk-kafka-topic&quot;})    public void onMessage(ConsumerRecord&lt;String, String&gt; record, Acknowledgment acknowledgment, Consumer&lt;?, ?&gt; consumer) {        log.info(&quot;æ¶ˆè´¹ç«¯æ¥æ”¶æ¶ˆæ¯ï¼š{}&quot;, record.value());        // æ‰‹å·¥ç­¾æ”¶æœºåˆ¶        acknowledgment.acknowledge();    }}</code></pre><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><pre><code class="java">@Autowiredprivate KafkaProducerService kafkaProducerService;@Testpublic void send() throws InterruptedException {  String topic = &quot;tuyrk-kafka-topic&quot;;  for (int i = 1; i &lt;= 1000; i++) {    kafkaProducerService.sendMessage(topic, &quot;hello kafka&quot; + i);    Thread.sleep(5);  }  Thread.sleep(Integer.MAX_VALUE);}</code></pre><blockquote><p>Partitionä¸Consumerä¸€å¯¹ä¸€å…³ç³»ã€‚å¦‚æœPartitionæœ‰10ä¸ªï¼Œè€ŒConsumeræœ‰20ä¸ªï¼Œåˆ™æœ‰10ä¸ªConsumeræ˜¯æ²¡æœ‰ç”¨çš„</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02-æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰è®¤çŸ¥æå‡(RocketMQ)</title>
      <link href="/imooc/1297-MQ-Kafka/02-6-rocket-mq/"/>
      <url>/imooc/1297-MQ-Kafka/02-6-rocket-mq/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><ol><li><h3 id="åˆè¯†-RocketMQ"><a href="#åˆè¯†-RocketMQ" class="headerlink" title="åˆè¯† RocketMQ"></a>åˆè¯† RocketMQ</h3></li></ol><p>RocketMQæ˜¯ä¸€æ¬¾åˆ†å¸ƒå¼ã€é˜Ÿåˆ—æ¨¡å‹çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œç”±é˜¿é‡Œå·´å·´è‡ªä¸»ç ”å‘çš„ä¸€æ¬¾é€‚ç”¨äºé«˜å¹¶å‘ã€é«˜å¯é æ€§ã€æµ·é‡æ•°æ®åœºæ™¯çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚æ—©æœŸå¼€æº2.xç‰ˆæœ¬åä¸ºMetaQï¼›15å¹´è¿­ä»£3.xç‰ˆæœ¬ï¼Œæ›´åä¸ºRocketMQï¼Œ16å¹´å¼€å§‹è´¡çŒ®åˆ°Apacheï¼Œç»è¿‡1å¹´å¤šçš„å­µåŒ–ï¼Œæœ€ç»ˆæˆä¸ºApacheé¡¶çº§çš„å¼€æºé¡¹ç›®ï¼Œæ›´æ–°éå¸¸é¢‘ç¹ï¼Œç¤¾åŒºæ´»è·ƒåº¦ä¹Ÿéå¸¸é«˜ï¼›ç›®å‰æœ€æ–°ç‰ˆæœ¬ä¸º4.5.1-releaseç‰ˆæœ¬ï¼ˆ2019-7-20æ—¥å‰ï¼‰ã€‚RocketMQå‚è€ƒå€Ÿé‰´äº†ä¼˜ç§€çš„å¼€æºæ¶ˆæ¯ä¸­é—´ä»¶Apache Kafkaï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åé¢è¯¾ç¨‹ä¸­é‡ç‚¹è¦è®²è§£çš„å†…å®¹å“¦ï¼‰ï¼Œå…¶æ¶ˆæ¯çš„è·¯ç”±ã€å­˜å‚¨ã€é›†ç¾¤åˆ’åˆ†éƒ½å€Ÿé‰´äº†Kafkaä¼˜ç§€çš„è®¾è®¡æ€è·¯ï¼Œå¹¶ç»“åˆè‡ªèº«çš„ â€œåŒåä¸€â€ åœºæ™¯è¿›è¡Œäº†åˆç†çš„æ‰©å±•å’ŒAPIä¸°å¯Œã€‚</p><ol start="2"><li><h3 id="ä¼˜ç§€çš„èƒ½åŠ›ä¸æ”¯æŒ"><a href="#ä¼˜ç§€çš„èƒ½åŠ›ä¸æ”¯æŒ" class="headerlink" title="ä¼˜ç§€çš„èƒ½åŠ›ä¸æ”¯æŒ"></a>ä¼˜ç§€çš„èƒ½åŠ›ä¸æ”¯æŒ</h3></li></ol><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹RocketMQä¼˜ç§€çš„èƒ½åŠ›å§ ~</p><ul><li>æ”¯æŒé›†ç¾¤æ¨¡å‹ã€è´Ÿè½½å‡è¡¡ã€æ°´å¹³æ‰©å±•èƒ½åŠ›</li><li>äº¿çº§åˆ«çš„æ¶ˆæ¯å †ç§¯èƒ½åŠ›</li><li>é‡‡ç”¨é›¶æ‹·è´çš„åŸç†ã€é¡ºåºå†™ç›˜ã€éšæœºè¯»ï¼ˆç´¢å¼•æ–‡ä»¶ï¼‰</li><li>ä¸°å¯Œçš„APIä½¿ç”¨</li><li>ä»£ç ä¼˜ç§€ï¼Œåº•å±‚é€šä¿¡æ¡†æ¶é‡‡ç”¨Netty NIOæ¡†æ¶</li><li>NameServer ä»£æ›¿ Zookeeper</li><li>å¼ºè°ƒé›†ç¾¤æ— å•ç‚¹ï¼Œå¯æ‰©å±•ï¼Œä»»æ„ä¸€ç‚¹é«˜å¯ç”¨ï¼Œæ°´å¹³å¯æ‰©å±•</li><li>æ¶ˆæ¯å¤±è´¥é‡è¯•æœºåˆ¶ã€æ¶ˆæ¯å¯æŸ¥è¯¢</li><li>å¼€æºç¤¾åŒºæ´»è·ƒåº¦ã€æ˜¯å¦è¶³å¤Ÿæˆç†Ÿï¼ˆç»è¿‡åŒåä¸€è€ƒéªŒï¼‰</li></ul><ol start="3"><li><h3 id="ä¸“ä¸šæœ¯è¯­"><a href="#ä¸“ä¸šæœ¯è¯­" class="headerlink" title="ä¸“ä¸šæœ¯è¯­"></a>ä¸“ä¸šæœ¯è¯­</h3></li></ol><p>ä»»ä½•ä¸€ç§æŠ€æœ¯æ¡†æ¶ï¼Œéƒ½æœ‰ â€œå¥¹â€ çš„ä¸“æœ‰åè¯ï¼Œåœ¨ä½ åˆšå¼€å§‹æ¥è§¦ â€œå¥¹â€ çš„æ—¶å€™ï¼Œä¸€å®šè¦äº†è§£ â€œå¥¹â€ çš„ä¸“ä¸šæœ¯è¯­ï¼Œè¿™æ ·èƒ½å¤Ÿæ›´å¿«é€Ÿã€æ›´é«˜æ•ˆçš„å’Œ â€œå¥¹â€ æ„‰å¿«çš„ç©è€â€¦</p><ul><li>Producerï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼Œè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ï¼Œä¸€èˆ¬ç”±ä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ã€‚</li><li>Consumerï¼šæ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œè´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸€èˆ¬æ˜¯åå°ç³»ç»Ÿè´Ÿè´£å¼‚æ­¥æ¶ˆè´¹ã€‚</li><li>Push Consumerï¼šConsumerçš„ä¸€ç§ï¼Œéœ€è¦å‘Consumerå¯¹è±¡æ³¨å†Œç›‘å¬ã€‚</li><li>Pull Consumerï¼šConsumerçš„ä¸€ç§ï¼Œéœ€è¦ä¸»åŠ¨è¯·æ±‚Brokeræ‹‰å–æ¶ˆæ¯ã€‚</li><li>Producer Groupï¼šç”Ÿäº§è€…é›†åˆï¼Œä¸€èˆ¬ç”¨äºå‘é€ä¸€ç±»æ¶ˆæ¯ã€‚</li><li>Consumer Groupï¼šæ¶ˆè´¹è€…é›†åˆï¼Œä¸€èˆ¬ç”¨äºæ¥å—ä¸€ç±»æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ã€‚</li><li>Broker ï¼š MQæ¶ˆæ¯æœåŠ¡ï¼ˆä¸­è½¬è§’è‰²ï¼Œç”¨äºæ¶ˆæ¯å­˜å‚¨ä¸ç”Ÿäº§æ¶ˆè´¹è½¬å‘ï¼‰ã€‚</li></ul><ol start="4"><li><h3 id="RocketMQæ ¸å¿ƒæºç åŒ…åŠåŠŸèƒ½è¯´æ˜"><a href="#RocketMQæ ¸å¿ƒæºç åŒ…åŠåŠŸèƒ½è¯´æ˜" class="headerlink" title="RocketMQæ ¸å¿ƒæºç åŒ…åŠåŠŸèƒ½è¯´æ˜"></a>RocketMQæ ¸å¿ƒæºç åŒ…åŠåŠŸèƒ½è¯´æ˜</h3></li></ol><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬è¦å¸¦å°ä¼™ä¼´ä»¬ä¸€èµ·æ¥çœ‹çœ‹RocketMQæºç åŒ…çš„ç»„æˆï¼Œè¿™æ ·æ›´æ–¹ä¾¿æˆ‘ä»¬æ—¥åå¯¹ä»–æœ‰ä¸€ä¸ªæ·±å…¥çš„å­¦ä¹ ã€‚<br><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd6hc1xm3cj309h07c0u5.jpg" alt="å›¾ç‰‡æè¿°" style="zoom:80%;" /><br><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd6hcsl5srj309g07mwfr.jpg" alt="å›¾ç‰‡æè¿°" style="zoom:80%;" /></p><ul><li>rocketmq-broker ä¸»è¦çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¶ˆæ¯æ”¶å‘ï¼Œä¸»ä»åŒæ­¥, pagecache</li><li>rocketmq-client å®¢æˆ·ç«¯æ¥å£ï¼Œæ¯”å¦‚ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</li><li>rocketmq-common å…¬ç”¨æ•°æ®ç»“æ„ç­‰ç­‰</li><li>rocketmq-distribution ç¼–è¯‘æ¨¡å—ï¼Œç¼–è¯‘è¾“å‡ºç­‰</li><li>rocketmq-example ç¤ºä¾‹ï¼Œæ¯”å¦‚ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</li><li>rocketmq-fliter è¿›è¡ŒBrokerè¿‡æ»¤çš„ä¸æ„Ÿå…´è¶£çš„æ¶ˆæ¯ä¼ è¾“ï¼Œå‡å°å¸¦å®½å‹åŠ›</li><li>rocketmq-logappenderã€rocketmq-loggingæ—¥å¿—ç›¸å…³</li><li>rocketmq-namesrv NamesrvæœåŠ¡ï¼Œç”¨äºæœåŠ¡åè°ƒ</li><li>rocketmq-openmessaging å¯¹å¤–æä¾›æœåŠ¡</li><li>rocketmq-remoting è¿œç¨‹è°ƒç”¨æ¥å£ï¼Œå°è£…Nettyåº•å±‚é€šä¿¡</li><li>rocketmq-srvutil æä¾›ä¸€äº›å…¬ç”¨çš„å·¥å…·æ–¹æ³•ï¼Œæ¯”å¦‚è§£æå‘½ä»¤è¡Œå‚æ•°</li><li>rocketmq-store æ¶ˆæ¯å­˜å‚¨æ ¸å¿ƒåŒ…</li><li>rocketmq-test æä¾›ä¸€äº›æµ‹è¯•ä»£ç åŒ…</li><li>rocketmq-tools ç®¡ç†å·¥å…·ï¼Œæ¯”å¦‚æœ‰åçš„mqadminå·¥å…·</li></ul><ol start="5"><li><h3 id="é›†ç¾¤æ¶æ„æ¨¡å‹"><a href="#é›†ç¾¤æ¶æ„æ¨¡å‹" class="headerlink" title="é›†ç¾¤æ¶æ„æ¨¡å‹"></a>é›†ç¾¤æ¶æ„æ¨¡å‹</h3></li></ol><p>RocketMQä¸ºæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„é›†ç¾¤æ¶æ„æ¨¡å‹ï¼ŒåŒ…æ‹¬å•ç‚¹æ¨¡å¼ã€ä¸»ä»æ¨¡å¼ã€åŒä¸»æ¨¡å¼ã€ä»¥åŠç”Ÿäº§ä¸Šä½¿ç”¨æœ€å¤šçš„åŒä¸»åŒä»æ¨¡å¼ï¼ˆæˆ–è€…è¯´å¤šä¸»å¤šä»æ¨¡å¼ï¼‰ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä»…ä»‹ç»ä¸€ä¸‹ç»å…¸çš„åŒä¸»åŒä»é›†ç¾¤æ¨¡å‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd6hdgedwtj30nq0alac3.jpg" alt="å›¾ç‰‡æè¿°" style="zoom:100%;" /></p><ul><li>Produceré›†ç¾¤å°±æ˜¯ç”Ÿäº§è€…é›†ç¾¤ï¼ˆä»–ä»¬åœ¨åŒä¸€ä¸ªç”Ÿäº§è€…ç»„ Producer Groupï¼‰</li><li>Consumeré›†ç¾¤å°±æ˜¯æ¶ˆè´¹è€…é›†ç¾¤ï¼ˆä»–ä»¬åœ¨åŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„ Consumer Groupï¼‰</li><li>NameServeré›†ç¾¤ä½œä¸ºè¶…è½»é‡çº§çš„é…ç½®ä¸­å¿ƒï¼Œåªåšé›†ç¾¤å…ƒæ•°æ®å­˜å‚¨å’Œå¿ƒè·³å·¥ä½œï¼Œä¸å¿…ä¿éšœèŠ‚ç‚¹é—´æ•°æ®å¼ºä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´NameServeré›†ç¾¤æ˜¯ä¸€ä¸ªå¤šæœºçƒ­å¤‡çš„æ¦‚å¿µã€‚</li><li>å¯¹äºBrokerè€Œè¨€ï¼Œé€šå¸¸Masterä¸Slaveä¸ºä¸€ç»„æœåŠ¡ï¼Œä»–ä»¬äº’ä¸ºä¸»ä»èŠ‚ç‚¹ï¼Œé€šè¿‡NameServerä¸å¤–éƒ¨çš„Clientç«¯æš´éœ²ç»Ÿä¸€çš„é›†ç¾¤å…¥å£ã€‚Brokerå°±æ˜¯æ¶ˆæ¯å­˜å‚¨çš„æ ¸å¿ƒMQæœåŠ¡äº†ã€‚</li></ul><ol start="6"><li><h3 id="é›†ç¾¤æ¶æ„æ€è€ƒ"><a href="#é›†ç¾¤æ¶æ„æ€è€ƒ" class="headerlink" title="é›†ç¾¤æ¶æ„æ€è€ƒ"></a>é›†ç¾¤æ¶æ„æ€è€ƒ</h3></li></ol><p>RocketMQä½œä¸ºå›½å†…é¡¶çº§çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå…¶æ€§èƒ½ä¸»è¦ä¾èµ–äºå¤©ç„¶çš„åˆ†å¸ƒå¼Topic/Queueï¼Œå¹¶ä¸”å…¶å†…å­˜ä¸ç£ç›˜éƒ½ä¼šå­˜å‚¨æ¶ˆæ¯æ•°æ®ï¼Œå€Ÿé‰´äº†Kafkaçš„ â€œç©ºä¸­æ¥åŠ›â€ æ¦‚å¿µï¼ˆè¿™ä¸ªæˆ‘ä»¬åé¢å­¦ä¹ Kafkaçš„æ—¶å€™ä¼šè¯¦ç»†çš„è¯´æ˜ï¼‰ï¼Œæ‰€è°“ â€œç©ºä¸­æ¥åŠ›â€ å°±æ˜¯æŒ‡æ•°æ®ä¸ä¸€å®šè¦è½åœ°ï¼ŒRocketMQæä¾›äº†åŒæ­¥/å¼‚æ­¥åŒå†™ã€åŒæ­¥/å¼‚æ­¥å¤åˆ¶çš„ç‰¹æ€§ã€‚åœ¨çœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥é€‰æ‹©ç¬¦åˆè‡ªå·±ä¸šåŠ¡çš„é…ç½®ã€‚ä¸‹é¢é’ˆå¯¹äºRocketMQçš„é«˜æ€§èƒ½åŠå…¶ç“¶é¢ˆåœ¨è¿™é‡ŒåŠ ä»¥è¯´æ˜ï¼š</p><ul><li>æ¶æ„æ€è€ƒï¼š<ul><li>RocketMQç›®å‰æœ¬äººåœ¨å…¬å¸å†…éƒ¨å®é™…ç”Ÿäº§ç¯å¢ƒé‡‡ç”¨8M-8Sçš„é›†ç¾¤æ¶æ„ï¼ˆ8ä¸»8ä»ï¼‰ç¡¬ä»¶å•ç‚¹Masterä¸º32Cï¼Œ96Gå†…å­˜ï¼Œ500Gçš„SSD</li><li>å…¶ä¸»è¦ç“¶é¢ˆæœ€ç»ˆä¼šè½åœ¨IOPSä¸Šé¢ï¼Œå½“é«˜å³°æœŸæ¥ä¸´çš„æ—¶å€™ï¼Œç£ç›˜è¯»å†™èƒ½åŠ›æ˜¯ä¸»è¦çš„æ€§èƒ½ç“¶é¢ˆï¼Œæ¯ç§’æ”¶å‘æ¶ˆæ¯IOPSè¾¾åˆ°10W+ æ¶ˆæ¯ï¼Œè¿™ä¹Ÿæ˜¯å…¬å¸å†…éƒ¨ä¸»è¦çš„å¯é æ€§æ¶ˆæ¯ä¸­é—´ä»¶</li><li>åœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡ä¼šæœ‰ä¸€äº›éæ ¸å¿ƒçš„æ¶ˆæ¯æŠ•é€’ï¼Œåç»­ä¼šè¿›è¡Œæ¶ˆæ¯ä¸­é—´ä»¶çš„ä¸šåŠ¡æ‹†åˆ†ï¼ŒæŠŠä¸é‡è¦çš„æ¶ˆæ¯ï¼ˆå¯ä»¥å…è®¸æ¶ˆæ¯ä¸¢å¤±ã€éå¯é æ€§æŠ•é€’çš„æ¶ˆæ¯ï¼‰é‡‡ç”¨Kafkaçš„å¼‚æ­¥å‘é€æœºåˆ¶ï¼Œå€ŸåŠ©Kafkaå¼ºå¤§çš„ååé‡å’Œæ¶ˆæ¯å †ç§¯èƒ½åŠ›æ¥åšä¸šåŠ¡çš„åˆ†æµï¼ˆå½“ç„¶RocketMQçš„æ€§èƒ½ä¹Ÿè¶³å¤Ÿå¥½ï¼‰ã€‚</li><li>ä¸ºä»€ä¹ˆç“¶é¢ˆåœ¨IOPS? æ ¹æœ¬åŸå› è¿˜æ˜¯å› ä¸ºäº‘ç¯å¢ƒå¯¼è‡´çš„é—®é¢˜ï¼Œäº‘ç¯å¢ƒçš„SSDç‰©ç†å­˜å‚¨æ˜¾ç„¶å’Œè‡ªå»ºæœºæˆ¿SSDä¼šæœ‰ä¸å°çš„å·®è·ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬æ— è®ºæ˜¯ä»æ•°æ®åº“çš„ç£ç›˜æ€§èƒ½ã€è¿˜æ˜¯æœç´¢æœåŠ¡ï¼ˆElasticSearchï¼‰çš„ç£ç›˜æ€§èƒ½ï¼Œéƒ½èƒ½ç»™å‡ºå‡†ç¡®çš„ç“¶é¢ˆç‚¹ï¼Œå•æœºIOPSè¾¾åˆ°1ä¸‡å·¦å³å°±æ˜¯äº‘å­˜å‚¨SSDçš„æ€§èƒ½ç“¶é¢ˆï¼Œè¿™ä¸ªä¹Ÿè§£é‡Šäº† â€œæœ¨æ¡¶çŸ­æ¿åŸç†â€ çš„æ•ˆåº”ï¼Œåœ¨çœŸæ­£çš„ç”Ÿäº§ä¸­ï¼ŒCPUçš„å·¥ä½œä¸»è¦åœ¨ç­‰å¾…IOæ“ä½œï¼Œé«˜å¹¶å‘ä¸‹ CPUèµ„æºæ¥è¿‘æé™ï¼Œä½†æ˜¯IOPSè¿˜æ˜¯è¾¾ä¸åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚</li></ul></li></ul><ol start="7"><li><h3 id="æœ¬èŠ‚çŸ¥è¯†ç‚¹å›é¡¾"><a href="#æœ¬èŠ‚çŸ¥è¯†ç‚¹å›é¡¾" class="headerlink" title="æœ¬èŠ‚çŸ¥è¯†ç‚¹å›é¡¾"></a>æœ¬èŠ‚çŸ¥è¯†ç‚¹å›é¡¾</h3></li></ol><p>Hiï¼Œå°ä¼™ä¼´ä»¬ï¼Œæœ¬èŠ‚è¯¾æˆ‘ä»¬é€šè¿‡ç®€è¦çš„å›¾æ–‡å­¦ä¹ ï¼Œå¸¦å¤§å®¶å¿«é€Ÿçš„è¿‡äº†ä¸€ä¸‹RocketMQï¼Œé‚£ä¹ˆå°ä¼™ä¼´ä»¬è®°ä½ä¸€å®šè¦åœ¨è„‘æµ·é‡Œå»ºç«‹çŸ¥è¯†çš„ç»“æ„ä½“ç³»ï¼Œå¹¶ä¸²è”èµ·æ¥ï¼æ— è®ºæ˜¯ç°åœ¨ï¼Œè¿˜æ˜¯è¯´æœªæ¥ï¼Œæœ¬ç¥éƒ½å¸Œæœ›å°ä¼™ä¼´è¦æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤è¿›è¡Œå›å¿†å’Œå¤ä¹ ï¼š</p><ol><li>RocketMQçš„å‰ä¸–ä»Šç”Ÿ ï¼Ÿ</li><li>RocketMQçš„ä¸“ä¸šæœ¯è¯­ï¼Ÿ</li><li>RocketMQæºç åŒ…çš„ç»„æˆï¼Ÿ</li><li>RocketMQçš„é›†ç¾¤æ¶æ„æ¨¡å‹</li><li>RocketMQåœ¨çœŸæ­£ç”Ÿäº§ç¯å¢ƒä¸­é¢ä¸´çš„ç“¶é¢ˆç‚¹ä»¥åŠè§£å†³æ–¹æ¡ˆ</li></ol><ol start="8"><li><h3 id="è¡¥å……è¯¾å¤–èµ„æ–™"><a href="#è¡¥å……è¯¾å¤–èµ„æ–™" class="headerlink" title="è¡¥å……è¯¾å¤–èµ„æ–™"></a>è¡¥å……è¯¾å¤–èµ„æ–™</h3></li></ol><p>ä¸ºäº†æ–¹ä¾¿çˆ±å­¦ä¹ çš„å°ä¼™ä¼´ä»¬ï¼Œæœ¬ç¥ç‰¹æ„åŠ é¤ä¸€æ³¢ï¼Œæä¾›RocketMQçš„å®˜æ–¹æ–‡æ¡£å’Œç›¸å…³è½¯ä»¶åŒ…ï¼Œä»¥åŠå¯¹åº”çš„ä»£ç ç¤ºä¾‹ï¼Œè¾…åŠ©å°ä¼™ä¼´ä»¬æ›´å¥½æŒæ¡RocketMQã€‚å¦å¤–æœ¬ç¥è¿˜åœ¨æ…•è¯¾ç½‘ä¸Šçš„ä¸€é—¨è¯¾ç¨‹è¯¦ç»†çš„è®²è§£äº†RocketMQçš„å„ä¸ªçŸ¥è¯†ç‚¹ä»¥åŠå®æˆ˜åº”ç”¨ï¼Œæœ‰æƒ³æ·±å…¥å­¦ä¹ çš„å°ä¼™ä¼´å¯ä»¥å­¦ä¹ å…±å‹‰ã€‚</p><ol><li>å®˜æ–¹æ–‡æ¡£</li><li>RocketMQ4.3.0ç‰ˆæœ¬ï¼ˆLinuxå¹³å°ï¼‰</li><li>RocketMQä»£ç ç¤ºä¾‹</li><li>æ…•è¯¾ç½‘å®æˆ˜è¯¾ç¨‹ã€ŠRocketMQæ ¸å¿ƒæŠ€æœ¯ç²¾è®²ä¸é«˜å¹¶å‘æŠ—å‹å®æˆ˜ã€‹ä¼ é€é—¨ï¼š<a href="https://coding.imooc.com/class/292.html" target="_blank" rel="noopener">https://coding.imooc.com/class/292.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02-æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰è®¤çŸ¥æå‡(ActiveMQ)</title>
      <link href="/imooc/1297-MQ-Kafka/02-4-active-mq/"/>
      <url>/imooc/1297-MQ-Kafka/02-4-active-mq/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><ol><li><h3 id="åˆè¯†-JMS-ä¸å…¶ä¸“ä¸šæœ¯è¯­"><a href="#åˆè¯†-JMS-ä¸å…¶ä¸“ä¸šæœ¯è¯­" class="headerlink" title="åˆè¯† JMS ä¸å…¶ä¸“ä¸šæœ¯è¯­"></a>åˆè¯† JMS ä¸å…¶ä¸“ä¸šæœ¯è¯­</h3></li></ol><p>å°ä¼™ä¼´ä»¬å¤§å®¶å¥½ï¼Œç°åœ¨æˆ‘ä»¬å’Œå¤§å®¶ä¸€èµ·äº†è§£ä¸€ä¸‹å¤è€è€Œåˆç¥ç§˜çš„æ¶ˆæ¯ä¸­é—´ä»¶â€ActiveMQâ€ã€‚é¦–å…ˆï¼Œè¯´èµ·ActiveMQï¼Œå°±å¿…é¡»å…ˆèŠèŠJMSï¼ˆJava Message Serviceï¼‰è§„èŒƒï¼Œä¹Ÿå°±æ˜¯Javaæ¶ˆæ¯æœåŠ¡ï¼Œå®ƒå®šä¹‰äº†Javaä¸­è®¿é—®æ¶ˆæ¯ä¸­é—´ä»¶çš„æ¥å£çš„è§„èŒƒã€‚åœ¨è¿™é‡Œæ³¨æ„å“¦ï¼ŒJMSåªæ˜¯æ¥å£ï¼Œå¹¶æ²¡æœ‰ç»™äºˆå®ç°ï¼Œå®ç°JMSæ¥å£çš„æ¶ˆæ¯ä¸­é—´ä»¶ç§°ä¸º â€œJMS Providerâ€ï¼Œç›®å‰çŸ¥åçš„å¼€æº MOM ï¼ˆMessage Oriented Middlewareï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ï¼‰ç³»ç»ŸåŒ…æ‹¬Apacheçš„ActiveMQã€RocketMQã€Kafkaï¼Œä»¥åŠRabbitMQï¼Œå¯ä»¥è¯´ä»–ä»¬éƒ½ â€œåŸºæœ¬éµå¾ªâ€ æˆ– â€œå‚è€ƒâ€ JMSè§„èŒƒï¼Œéƒ½æœ‰è‡ªå·±çš„ç‰¹ç‚¹å’Œä¼˜åŠ¿ã€‚</p><ul><li>ä¸“ä¸šæœ¯è¯­<ul><li>JMSï¼ˆJava Message Serviceï¼‰ï¼šå®ç°JMS æ¥å£çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼›</li><li>Providerï¼ˆMessageProviderï¼‰ï¼šæ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼›</li><li>Consumerï¼ˆMessageConsumerï¼‰ï¼šæ¶ˆæ¯çš„æ¶ˆè´¹è€…ï¼›</li><li>PTPï¼ˆPoint to Pointï¼‰ï¼šå³ç‚¹å¯¹ç‚¹çš„æ¶ˆæ¯æ¨¡å‹ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸ç»å…¸çš„æ¨¡å‹ï¼›</li><li>Pub / Subï¼ˆPublish/Subscribeï¼‰ï¼šï¼Œå³å‘å¸ƒ/è®¢é˜…çš„æ¶ˆæ¯æ¨¡å‹ï¼›</li><li>Queueï¼šé˜Ÿåˆ—ç›®æ ‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¼šçœŸæ­£çš„è¿›è¡Œç‰©ç†å­˜å‚¨ï¼›</li><li>Topicï¼šä¸»é¢˜ç›®æ ‡ï¼›</li><li>ConnectionFactoryï¼šè¿æ¥å·¥å‚ï¼ŒJMS ç”¨å®ƒåˆ›å»ºè¿æ¥ï¼›</li><li>Connectionï¼šJMS å®¢æˆ·ç«¯åˆ°JMS Provider çš„è¿æ¥ï¼›</li><li>Destinationï¼šæ¶ˆæ¯çš„ç›®çš„åœ°ï¼›</li><li>Sessionï¼šä¼šè¯ï¼Œä¸€ä¸ªå‘é€æˆ–æ¥æ”¶æ¶ˆæ¯çš„çº¿ç¨‹ï¼ˆè¿™é‡ŒSessionå¯ä»¥ç±»æ¯”Mybatisçš„Sessionï¼‰ï¼›</li></ul></li><li>JMS æ¶ˆæ¯æ ¼å¼å®šä¹‰ï¼š<ul><li>StreamMessage åŸå§‹å€¼çš„æ•°æ®æµ</li><li>MapMessage ä¸€å¥—åç§°/å€¼å¯¹</li><li>TextMessage ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡</li><li>BytesMessage ä¸€ä¸ªæœªè§£é‡Šå­—èŠ‚çš„æ•°æ®æµ</li><li>ObjectMessage ä¸€ä¸ªåºåˆ—åŒ–çš„Javaå¯¹è±¡</li></ul></li></ul><ol start="2"><li><h3 id="äº†è§£ActiveMQ"><a href="#äº†è§£ActiveMQ" class="headerlink" title="äº†è§£ActiveMQ"></a>äº†è§£ActiveMQ</h3></li></ol><p>ActiveMQ æ˜¯ä¸€ä¸ªå®Œå…¨æ”¯æŒJMS1.1å’ŒJ2EE 1.4è§„èŒƒçš„ JMS Providerå®ç°ï¼Œå°½ç®¡JMSè§„èŒƒå‡ºå°å·²ç»æ˜¯å¾ˆä¹…çš„äº‹æƒ…äº†ï¼Œä½†æ˜¯JMSåœ¨æ—©äº›å¹´çš„ â€œJ2EEåº”ç”¨â€ æ—¶æœŸæ‰®æ¼”ç€ç‰¹æ®Šçš„åœ°ä½ï¼Œå¯ä»¥è¯´é‚£ä¸ªå¹´ä»£ActiveMQåœ¨ä¸šç•Œåº”ç”¨æœ€å¹¿æ³›ï¼Œå½“ç„¶å¦‚æœç°åœ¨æƒ³è¦æœ‰æ›´å¼ºå¤§çš„æ€§èƒ½å’Œæµ·é‡æ•°æ®å¤„ç†èƒ½åŠ›ï¼ŒActiveMQè¿˜éœ€è¦ä¸æ–­çš„å‡çº§ç‰ˆæœ¬ï¼Œä¸æ–­çš„æå‡æ€§èƒ½å’Œæ¶æ„è®¾è®¡çš„é‡æ„ã€‚</p><p>å°±ç®—ç°åœ¨æˆ‘ä»¬ 80% ä»¥ä¸Šçš„ä¸šåŠ¡æˆ‘ä»¬ä½¿ç”¨ActiveMQå·²ç»è¶³å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œå…¶ä¸°å¯Œçš„APIã€å¤šç§é›†ç¾¤æ„å»ºæ¨¡å¼ä½¿å¾—ä»–æˆä¸ºä¸šç•Œè€ç‰Œæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œåœ¨ä¸­å°å‹ä¼ä¸šä¸­åº”ç”¨å¹¿æ³›ï¼</p><p>å½“ç„¶å¦‚æœä½ æƒ³é’ˆå¯¹å¤§è§„æ¨¡ã€é«˜å¹¶å‘åº”ç”¨æœåŠ¡åšæ¶ˆæ¯ä¸­é—´ä»¶æŠ€æœ¯é€‰å‹ï¼Œè­¬å¦‚æ·˜å®ã€äº¬ä¸œè¿™ç§å¤§å‹çš„ç”µå•†ç½‘ç«™ï¼Œå°¤å…¶æ˜¯åŒ11è¿™ç§ç‰¹æ®Šæ—¶é—´ï¼ŒActiveMQå¯èƒ½å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒäº†ï¼Œå½“ç„¶æˆ‘ä»¬è¿™é‡Œåç»­è¿˜ä¼šå’Œå¤§å®¶ä»‹ç»å…¶ä»–éå¸¸ä¼˜ç§€çš„MOMå’¯ã€‚</p><ol start="3"><li><h3 id="æ¶ˆæ¯æŠ•é€’æ¨¡å¼"><a href="#æ¶ˆæ¯æŠ•é€’æ¨¡å¼" class="headerlink" title="æ¶ˆæ¯æŠ•é€’æ¨¡å¼"></a>æ¶ˆæ¯æŠ•é€’æ¨¡å¼</h3></li></ol><p>åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬é¦–å…ˆè¦äº†è§£JMSè§„èŒƒé‡Œæœ€ç»å…¸çš„ä¸¤ç§æ¶ˆæ¯æŠ•é€’æ¨¡å¼ï¼Œå³ â€œç‚¹å¯¹ç‚¹â€ ä¸ â€œå‘å¸ƒè®¢é˜…â€ã€‚</p><ul><li>ç‚¹å¯¹ç‚¹ï¼šç”Ÿäº§è€…å‘é˜Ÿåˆ—æŠ•é€’ä¸€æ¡æ¶ˆæ¯ï¼Œåªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…èƒ½å¤Ÿç›‘å¬å¾—åˆ°è¿™æ¡æ¶ˆæ¯ï¼ˆPTP)ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd6gy68hfcj30ih0bdwf0.jpg" alt="å›¾ç‰‡æè¿°" style="zoom:80%;" /></li><li>å‘å¸ƒè®¢é˜…ï¼šç”Ÿäº§è€…å‘é˜Ÿåˆ—æŠ•é€’ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰€æœ‰ç›‘å¬è¯¥é˜Ÿåˆ—çš„æ¶ˆè´¹è€…éƒ½èƒ½å¤Ÿç›‘å¬å¾—åˆ°è¿™æ¡æ¶ˆæ¯ï¼ˆP/S)ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š<img src="https://climg.mukewang.com/5df83de108523a3005910364.jpg" alt="å›¾ç‰‡æè¿°" style="zoom:80%;" /></li></ul><ol start="4"><li><h3 id="ActiveMQå„é¡¹æŒ‡æ ‡"><a href="#ActiveMQå„é¡¹æŒ‡æ ‡" class="headerlink" title="ActiveMQå„é¡¹æŒ‡æ ‡"></a>ActiveMQå„é¡¹æŒ‡æ ‡</h3></li></ol><p>è¡¡é‡ä¸€ä¸ªMOMï¼Œæˆ‘ä»¬ä¸»è¦ä»ä¸‰æ–¹é¢è€ƒè™‘å³å¯ï¼Œå³æœåŠ¡æ€§èƒ½ã€å­˜å‚¨å †ç§¯èƒ½åŠ›ã€å¯æ‰©å±•æ€§ã€‚</p><ul><li>æœåŠ¡æ€§èƒ½<ul><li>ActiveMQçš„æ€§èƒ½ä¸€èˆ¬ï¼Œåœ¨æ—©æœŸä¼ ç»Ÿè¡Œä¸šä¸ºç‹çš„æ—¶ä»£è¿˜æ˜¯æ¯”è¾ƒæµè¡Œçš„ï¼Œä½†ç°å¦‚ä»Šé¢å¯¹é«˜å¹¶å‘ã€å¤§æ•°æ®çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¾€å¾€åŠ›ä¸ä»å¿ƒï¼</li></ul></li><li>æ•°æ®å­˜å‚¨<ul><li>é»˜è®¤é‡‡ç”¨kahadbå­˜å‚¨ï¼ˆç´¢å¼•æ–‡ä»¶å½¢å¼å­˜å‚¨ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é«˜æ€§èƒ½çš„google leveldbï¼ˆå†…å­˜æ•°æ®åº“å­˜å‚¨ï¼‰ï¼Œ æˆ–è€…å¯ä»¥ä½¿ç”¨MySqlã€Oracleè¿›ç¨‹æ¶ˆæ¯å­˜å‚¨ï¼ˆå…³ç³»å‹æ•°æ®åº“å­˜å‚¨ï¼‰ã€‚</li></ul></li><li>é›†ç¾¤æ¶æ„<ul><li>ActiveMQ å¯ä»¥ä¸zookeeperè¿›è¡Œæ„å»º ä¸»å¤‡é›†ç¾¤æ¨¡å‹ï¼Œå¹¶ä¸”å¤šå¥—çš„ä¸»å¤‡æ¨¡å‹ç›´æ¥å¯ä»¥é‡‡ç”¨Networkçš„æ–¹å¼æ„å»ºåˆ†å¸ƒå¼é›†ç¾¤ã€‚</li></ul></li></ul><ol start="5"><li><h3 id="ActiveMQé›†ç¾¤æ¶æ„æ¨¡å¼"><a href="#ActiveMQé›†ç¾¤æ¶æ„æ¨¡å¼" class="headerlink" title="ActiveMQé›†ç¾¤æ¶æ„æ¨¡å¼"></a>ActiveMQé›†ç¾¤æ¶æ„æ¨¡å¼</h3></li></ol><p>ActiveMQæœ€ç»å…¸çš„ä¸¤ç§é›†ç¾¤æ¶æ„æ¨¡å¼ï¼ŒMaster-Slave ã€Network é›†ç¾¤æ¨¡å¼ï¼</p><ul><li><p>Master-Slaveï¼š</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd6gz6u17fj309w084q36.jpg" alt="å›¾ç‰‡æè¿°" style="zoom:100%;" /></li><li><p>Master-Slaveï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸»ä»æ–¹å¼ï¼Œå½“ç„¶è¿™é‡Œè¦ç†è§£ä¸ºä¸»å¤‡çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åŒæœºçƒ­å¤‡æœºåˆ¶ï¼›Master Slave èƒŒåçš„æƒ³æ³•æ˜¯ï¼Œæ¶ˆæ¯è¢«å¤åˆ¶åˆ°slave brokerï¼Œå› æ­¤å³ä½¿master brokeré‡åˆ°äº†åƒç¡¬ä»¶æ•…éšœä¹‹ç±»çš„é”™è¯¯ï¼Œä½ ä¹Ÿå¯ä»¥ç«‹å³åˆ‡æ¢åˆ°slave brokerè€Œä¸ä¸¢å¤±ä»»ä½•æ¶ˆæ¯ã€‚ Master Slaveæ˜¯ç›®å‰ActiveMQæ¨èçš„é«˜å¯é æ€§å’Œå®¹é”™çš„è§£å†³æ–¹æ¡ˆã€‚</p></li><li><p>æ¶æ„æ€è€ƒï¼šMaster-Slaveé›†ç¾¤æ¨¡å‹çš„å…³é”®ç‚¹ï¼š</p><ul><li>ä¸Šå›¾ï¼ˆMaster-Slaveï¼‰ç»¿è‰²çš„ä¸ºä¸»èŠ‚ç‚¹ï¼Œç°è‰²çš„åˆ™ä¸ºå¤‡ä»½èŠ‚ç‚¹ï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹éƒ½æ˜¯è¿è¡ŒçŠ¶æ€çš„ã€‚</li><li>zookeeperçš„ä½œç”¨å°±æ˜¯ä¸ºäº†å½“ç»¿è‰²çš„ä¸»èŠ‚ç‚¹å®•æœºæ—¶ï¼Œè¿›è¡ŒåŠæ—¶åˆ‡æ¢åˆ°å¤‡ä»½çš„ç°è‰²èŠ‚ç‚¹ä¸Šå»ï¼Œä½¿å…¶è¿›è¡Œä¸»ä»è§’è‰²çš„äº’æ¢ï¼Œç”¨äºå®ç°é«˜å¯ç”¨æ€§çš„æ–¹æ¡ˆã€‚</li><li>Master-Slaveé›†ç¾¤æ¨¡å‹çš„ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œå°±æ˜¯ä¸èƒ½åšåˆ°åˆ†å¸ƒå¼çš„topicã€queueï¼Œå½“æ¶ˆæ¯é‡å·¨å¤§æ—¶ï¼Œæˆ‘ä»¬çš„MQé›†ç¾¤å‹åŠ›è¿‡å¤§ï¼Œæ²¡åŠæ³•æ»¡è¶³åˆ†å¸ƒå¼çš„éœ€æ±‚ã€‚</li></ul></li><li><p>Networkï¼š<br><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd6h6eoxn0j30ed08l0te.jpg" alt="å›¾ç‰‡æè¿°"></p></li><li><p>Networkï¼šè¿™é‡Œå¯ä»¥ç†è§£ä¸ºç½‘ç»œé€šä¿¡æ–¹å¼ï¼Œä¹Ÿå¯ä»¥è¯´å«Network of brokersã€‚è¿™ç§æ–¹å¼çœŸæ­£è§£å†³äº†åˆ†å¸ƒå¼æ¶ˆæ¯å­˜å‚¨å’Œæ•…éšœè½¬ç§»ã€brokeråˆ‡æ¢çš„é—®é¢˜ã€‚å¯ä»¥ç†è§£æ¶ˆæ¯ä¼šè¿›è¡Œå‡è¡¡ï¼›ä»ActiveMQ1.1ç‰ˆæœ¬èµ·ï¼ŒActiveMQæ”¯æŒnetworks of brokersã€‚å®ƒæ”¯æŒåˆ†å¸ƒå¼çš„queueså’Œtopicsã€‚ä¸€ä¸ªbrokerä¼šç›¸åŒå¯¹å¾…æ‰€æœ‰çš„è®¢é˜…ï¼ˆsubscriptionï¼‰ï¼šä¸ç®¡ä»–ä»¬æ˜¯æ¥è‡ªæœ¬åœ°çš„å®¢æˆ·è¿æ¥ï¼Œè¿˜æ˜¯æ¥è‡ªè¿œç¨‹brokerï¼Œå®ƒéƒ½ä¼šé€’é€æœ‰å…³çš„æ¶ˆæ¯æ‹·è´åˆ°æ¯ä¸ªè®¢é˜…ã€‚è¿œç¨‹brokerå¾—åˆ°è¿™ä¸ªæ¶ˆæ¯æ‹·è´åï¼Œä¼šä¾æ¬¡æŠŠå®ƒé€’é€åˆ°å…¶å†…éƒ¨çš„æœ¬åœ°è¿æ¥ä¸Šã€‚</p></li><li><p>æ¶æ„æ€è€ƒï¼šNetworké›†ç¾¤æ¨¡å‹çš„å…³é”®ç‚¹ï¼š </p><ul><li><p>é¦–å…ˆï¼Œè¿™ç§æ–¹æ¡ˆéœ€è¦ä¸¤å¥—æˆ–å¤šå¥—ï¼ˆMaster-Slaveï¼‰çš„é›†ç¾¤æ¨¡å‹æ‰å¯ä»¥æå®šï¼Œéƒ¨ç½²éå¸¸éº»çƒ¦ï¼Œéœ€è¦ä¸¤å¥—æˆ–å¤šå¥—é›†ç¾¤ç›´æ¥ç›¸äº’äº¤å‰é…ç½®ï¼Œç›¸äº’é—´èƒ½å¤Ÿæ„ŸçŸ¥åˆ°å½¼æ­¤çš„å­˜åœ¨ã€‚ä¸‹é¢æˆ‘ç»™å‡ºä¸€æ®µXMLé…ç½®ï¼Œç®€å•æ¥è¯´å°±æ˜¯åœ¨ActiveMQçš„é…ç½®æ–‡ä»¶é‡Œè¦è¿›è¡Œå¤šå¥—ï¼ˆMaster-Slaveï¼‰ä¹‹é—´çš„ networkConnectoré…ç½®å·¥ä½œï¼š</p><pre><code class="xml">&lt;broker brokerName=&quot;receiver&quot; persistent=&quot;false&quot; useJmx=&quot;false&quot;&gt;     &lt;transportConnectors&gt;         &lt;transportConnector uri=&quot;tcp://localhost:62002&quot;/&gt;     &lt;/transportConnectors&gt;     &lt;networkConnectors&gt;        &lt;networkConnector               uri=&quot;static:( tcp://localhost:61616,tcp://remotehost:61616)&quot;/&gt;     &lt;/networkConnectors&gt;&lt;/broker&gt;</code></pre></li><li><p>å…¶æ¬¡ï¼ŒNetworkè™½ç„¶è§£å†³äº†åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—è¿™ä¸ªéš¾é¢˜ï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šæ½œåœ¨çš„é—®é¢˜ï¼Œæœ€å…¸å‹çš„å°±æ˜¯èµ„æºæµªè´¹é—®é¢˜ï¼Œå¹¶ä¸”ä¹Ÿå¯èƒ½è¾¾ä¸åˆ°æ‰€é¢„æœŸçš„æ•ˆæœï¼›é€šå¸¸é‡‡ç”¨Master-Slaveæ¨¡å‹æ˜¯ä¼ ç»Ÿå‹äº’è”ç½‘å…¬å¸çš„é¦–é€‰ï¼Œä½œä¸ºäº’è”ç½‘å…¬å¸å¾€å¾€ä¼šé€‰æ‹©å¼€ç®±å³ç”¨çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä»è¿ç»´ã€éƒ¨ç½²ã€ä½¿ç”¨å„ä¸ªæ–¹é¢éƒ½è¦ä¼˜äºActiveMQï¼Œå½“ç„¶ActiveMQæ¯•ç«Ÿæ˜¯ â€œè€ç‰Œä¼ ç»Ÿå¼ºQâ€ï¼ŒApacheçš„é¡¶çº§é¡¹ç›®ä¹‹ä¸€ï¼Œç›®å‰æ­£åœ¨è¿›è¡Œæ–°ç‰ˆæœ¬çš„é‡æ„ï¼ˆå¯¹äº5.Xç‰ˆæœ¬ï¼‰ä¸è½åœ°ï¼Œä¸‹ä¸€ä»£ â€œArtemisä»£ç†â€ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸º â€œ6.Xâ€ï¼›æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…³æ³¨ä¸€ä¸‹å®˜ç½‘ï¼Œä¼ é€é—¨å¦‚ä¸‹ï¼š<a href="https://activemq.apache.org/" target="_blank" rel="noopener">https://activemq.apache.org/</a></p></li></ul></li></ul><ol start="6"><li><h3 id="æœ¬èŠ‚çŸ¥è¯†ç‚¹å›é¡¾"><a href="#æœ¬èŠ‚çŸ¥è¯†ç‚¹å›é¡¾" class="headerlink" title="æœ¬èŠ‚çŸ¥è¯†ç‚¹å›é¡¾"></a>æœ¬èŠ‚çŸ¥è¯†ç‚¹å›é¡¾</h3></li></ol><p>Hiï¼Œå°ä¼™ä¼´ä»¬ï¼Œæœ¬èŠ‚è¯¾æˆ‘ä»¬é€šè¿‡ç®€è¦çš„å›¾æ–‡å­¦ä¹ ï¼Œå¸¦å¤§å®¶å¿«é€Ÿçš„è¿‡äº†ä¸€ä¸‹ActiveMQï¼Œé‚£ä¹ˆå°ä¼™ä¼´ä»¬è®°ä½ä¸€å®šè¦åœ¨è„‘æµ·é‡Œå»ºç«‹çŸ¥è¯†çš„ç»“æ„ä½“ç³»ï¼Œå¹¶ä¸²è”èµ·æ¥ï¼æ— è®ºæ˜¯ç°åœ¨ï¼Œè¿˜æ˜¯è¯´æœªæ¥ï¼Œæœ¬ç¥éƒ½å¸Œæœ›å°ä¼™ä¼´è¦æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤è¿›è¡Œå›å¿†å’Œå¤ä¹ ï¼š</p><ol><li><p>ä»€ä¹ˆæ˜¯JMSï¼Ÿ</p></li><li><p>JMSçš„è§„èŒƒæœ‰å“ªäº›ï¼Œåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå«ä¹‰?</p></li><li><p>ActiveMQçš„å†å²èƒŒæ™¯</p></li><li><p>å…³äºæ¶ˆæ¯çš„æŠ•é€’æ¨¡å¼ï¼ˆPTPã€P/Sï¼‰</p></li><li><p>ActiveMQçš„å„é¡¹æŒ‡æ ‡</p></li><li><p>ActiveMQçš„é›†ç¾¤æ¶æ„æ¨¡å‹ï¼ˆMaster-Slaveã€Networkï¼‰</p></li><li><h3 id="è¡¥å……è¯¾å¤–èµ„æ–™"><a href="#è¡¥å……è¯¾å¤–èµ„æ–™" class="headerlink" title="è¡¥å……è¯¾å¤–èµ„æ–™"></a>è¡¥å……è¯¾å¤–èµ„æ–™</h3></li></ol><p>ä¸ºäº†æ–¹ä¾¿çˆ±å­¦ä¹ çš„å°ä¼™ä¼´ï¼Œæœ¬ç¥ç‰¹æ„åŠ é¤ä¸€æ³¢ï¼Œæä¾›å®˜æ–¹æ–‡æ¡£æ‰‹å†Œã€è¿˜æœ‰ç›¸å…³éƒ¨ç½²è½¯ä»¶åŒ…ï¼Œä»¥åŠç§äººçè—ä»£ç (DEMO)ï¼Œç”¨æ¥è¾…åŠ©å°ä¼™ä¼´ä»¬å¯¹ActiveMQæœ‰ä¸€ä¸ªæ›´æ·±å…¥çš„è®¤çŸ¥å“¦ï¼ä¸è°¢</p><ol><li>å®˜æ–¹JMSæ–‡æ¡£</li><li>ActiveMQï¼ˆ5.xï¼‰æœåŠ¡åŒ…ï¼ˆWindowså¹³å°ï¼‰</li><li>ActiveMQä»£ç ç¤ºä¾‹</li></ol>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02-æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰è®¤çŸ¥æå‡</title>
      <link href="/imooc/1297-MQ-Kafka/02-mq-cognition/"/>
      <url>/imooc/1297-MQ-Kafka/02-mq-cognition/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="2-1-æœ¬ç« æ¦‚è¿°ï¼ˆKafkaï¼‰"><a href="#2-1-æœ¬ç« æ¦‚è¿°ï¼ˆKafkaï¼‰" class="headerlink" title="2-1 æœ¬ç« æ¦‚è¿°ï¼ˆKafkaï¼‰"></a>2-1 æœ¬ç« æ¦‚è¿°ï¼ˆKafkaï¼‰</h2><blockquote><p>RabbitMQã€Apache Kafka</p></blockquote><p>è¯¾ç¨‹ç›®å½•</p><blockquote><p>åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰è®¤çŸ¥æå‡<br>RabbitMQå®æˆ˜<br>RabbitMQå¯é æ€§æŠ•é€’åŸºç¡€ç»„ä»¶å°è£…<br>Kafkaåº”ç”¨å®æˆ˜<br>Kafkaé«˜ååé‡æ—¥å¿—æ”¶é›†å®æˆ˜<br>æ¶æ„æ€è€ƒï¼šåˆ†å¸ƒå¼æ—¥å¿—ã€è·Ÿè¸ªã€å‘Šè­¦ã€åˆ†æå¹³å°</p></blockquote><p>æœ¬ç« ç›®å½•</p><blockquote><p>ä¸šç•Œä¸»æµçš„åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰ä¸æŠ€æœ¯é€‰å‹</p><p>ActiveMQç‰¹æ€§åŸç†ä¸é›†ç¾¤</p><p>RabbitMQç‰¹æ€§åŸç†ä¸é›†ç¾¤æ¶æ„è§£æ</p><p>RocketMQç‰¹æ€§åŸç†ä¸é›†ç¾¤æ¶æ„</p><p>Kafkaç‰¹æ€§åŸç†ä¸é›†ç¾¤æ¶æ„è§£æ</p></blockquote><h2 id="2-2-æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„åº”ç”¨åœºæ™¯ä¸æ€§èƒ½è¡¡é‡æŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-2-æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„åº”ç”¨åœºæ™¯ä¸æ€§èƒ½è¡¡é‡æŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2-2 æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„åº”ç”¨åœºæ™¯ä¸æ€§èƒ½è¡¡é‡æŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2-2 æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„åº”ç”¨åœºæ™¯ä¸æ€§èƒ½è¡¡é‡æŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰åº”ç”¨<strong>åœºæ™¯</strong></p><blockquote><p>æœåŠ¡è§£è€¦ã€å‰Šå³°å¡«è°·ã€å¼‚æ­¥åŒ–ç¼“å†²</p></blockquote><p>åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰åº”ç”¨<strong>æ€è€ƒç‚¹</strong></p><blockquote><p><strong>ç”Ÿäº§ç«¯å¯é æ€§æŠ•é€’</strong>ã€<strong>æ¶ˆè´¹ç«¯å¹‚ç­‰</strong>ã€é«˜å¯ç”¨æ€§ã€ä½å»¶è¿Ÿã€å¯é æ€§ã€å †ç§¯èƒ½åŠ›ã€æ‰©å±•æ€§</p></blockquote><h2 id="2-3-æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„æŠ€æœ¯é€‰å‹å…³æ³¨ç‚¹æœ‰å“ªäº›ï¼Ÿ"><a href="#2-3-æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„æŠ€æœ¯é€‰å‹å…³æ³¨ç‚¹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="2-3 æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„æŠ€æœ¯é€‰å‹å…³æ³¨ç‚¹æœ‰å“ªäº›ï¼Ÿ"></a>2-3 æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„æŠ€æœ¯é€‰å‹å…³æ³¨ç‚¹æœ‰å“ªäº›ï¼Ÿ</h2><p>ä¸šç•Œä¸»æµçš„åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰</p><blockquote><p>ActiveMQã€RabbitMQã€RocketMQã€Kafka</p></blockquote><p>å¦‚ä½•è¿›è¡ŒæŠ€æœ¯é€‰å‹ï¼Ÿ</p><blockquote><ul><li>å„ä¸ªMQçš„æ€§èƒ½ã€ä¼˜ç¼ºç‚¹ã€ç›¸åº”çš„ä¸šåŠ¡åœºæ™¯</li><li>é›†ç¾¤æ¶æ„æ¨¡å¼ï¼Œåˆ†å¸ƒå¼ã€å¯æ‰©å±•ã€é«˜å¯ç”¨ã€å¯ç»´æŠ¤æ€§</li><li>ç»¼åˆæˆæœ¬é—®é¢˜ï¼Œäººå‘˜æˆæœ¬</li><li>æœªæ¥çš„æ–¹å‘ã€è§„åˆ’ã€æ€è€ƒ</li></ul></blockquote><h2 id="2-4-ActiveMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ"><a href="#2-4-ActiveMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ" class="headerlink" title="2-4 ActiveMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ"></a>2-4 <a href="02-4-active-mq.md">ActiveMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ</a></h2><h2 id="2-5-RabbitMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„æ¨¡å‹ä¸åŸç†è§£æ"><a href="#2-5-RabbitMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„æ¨¡å‹ä¸åŸç†è§£æ" class="headerlink" title="2-5 RabbitMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„æ¨¡å‹ä¸åŸç†è§£æ"></a>2-5 RabbitMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„æ¨¡å‹ä¸åŸç†è§£æ</h2><p>RabbitMQå››ç§é›†ç¾¤æ¶æ„</p><blockquote><p>ä¸»å¤‡æ¨¡å¼ã€è¿œç¨‹æ¨¡å¼ã€é•œåƒæ¨¡å¼ã€å¤šæ´»æ¨¡å¼</p></blockquote><h3 id="ä¸»å¤‡æ¨¡å¼"><a href="#ä¸»å¤‡æ¨¡å¼" class="headerlink" title="ä¸»å¤‡æ¨¡å¼"></a>ä¸»å¤‡æ¨¡å¼</h3><blockquote><p>Warrenï¼ˆå…”å­çªï¼‰ï¼Œä¸€ä¸ªä¸»/å¤‡æ–¹æ¡ˆï¼ˆä¸»èŠ‚ç‚¹å¦‚æœæŒ‚äº†ï¼Œä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œä½¿ç”¨Haproxyã€‚å’ŒActiveMQåˆ©ç”¨Zookeeperåšä¸»å¤‡ä¸€æ ·ï¼‰</p></blockquote><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd6hy31xptj30ik0j4q41.jpg" alt="image-20200325213115561" style="zoom:40%;" /><p>ä¸»å¤‡æ¨¡å¼-HaProxyé…ç½®</p><pre><code class="shell">listen rabbitmq_master # ä¸»å¤‡æ¨¡å¼é›†ç¾¤çš„åå­—bind 0.0.0.0:5672 #é…ç½®TCPæ¨¡å¼mode tcp #ç®€å•çš„è½®è¯¢balance roundrobin #ä¸»èŠ‚ç‚¹server bhz76 192.168.11.76:5672 check inter 5000 rise 2 fall 2server bhz77 192.168.11.77:5672 backup check inter 5000 rise 2 fall 2 #å¤‡ç”¨èŠ‚ç‚¹</code></pre><h3 id="è¿œç¨‹æ¨¡å¼ï¼ˆä¸å¸¸ç”¨ï¼‰"><a href="#è¿œç¨‹æ¨¡å¼ï¼ˆä¸å¸¸ç”¨ï¼‰" class="headerlink" title="è¿œç¨‹æ¨¡å¼ï¼ˆä¸å¸¸ç”¨ï¼‰"></a>è¿œç¨‹æ¨¡å¼ï¼ˆä¸å¸¸ç”¨ï¼‰</h3><blockquote><ul><li>è¿œè·ç¦»é€šä¿¡å’Œå¤åˆ¶ï¼Œå¯ä»¥å®ç°åŒæ´»çš„ä¸€ç§æ¨¡å¼ï¼Œç®€ç§°Shovelæ¨¡å¼</li><li>Shovelå°±æ˜¯å¯ä»¥æŠŠæ¶ˆæ¯è¿›è¡Œä¸åŒæ•°æ®ä¸­å¿ƒçš„å¤åˆ¶å·¥ä½œï¼Œå¯ä»¥è·¨åœ°åŸŸçš„è®©ä¸¤ä¸ªMQé›†ç¾¤äº’è”</li></ul><p><strong>ä½¿ç”¨ä¸å¤š</strong>ï¼Œå¯é æ€§æœ‰å¾…æé«˜ï¼Œé…ç½®ä¹Ÿéå¸¸éº»çƒ¦ã€‚</p></blockquote><p>Shovelæ¶æ„æ¨¡å‹</p><blockquote><p>åœ¨ä½¿ç”¨äº†Shovelæ’ä»¶åï¼Œæ¨¡å‹å˜æˆäº†è¿‘ç«¯åŒæ­¥ç¡®è®¤ï¼Œè¿œç«¯å¼‚æ­¥ç¡®è®¤çš„æ–¹å¼ï¼Œå¤§å¤§æé«˜äº†è®¢å•ç¡®è®¤é€Ÿåº¦ï¼Œå¹¶ä¸”è¿˜èƒ½ä¿è¯å¯é æ€§</p></blockquote><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd72j4e246j30gt0aa74i.jpg" alt="Shovelæ¶æ„æ¨¡å‹" style="zoom:80%;" /><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd72jxp99lj30ko0azjrz.jpg" alt="Shovelé›†ç¾¤çš„æ‹“æ‰‘å›¾" style="zoom:80%;" /><p>Shovelé›†ç¾¤é…ç½®æ­¥éª¤</p><blockquote><ol><li><p>Step1ï¼šå¯åŠ¨RabbitMQæ’ä»¶</p><pre><code class="shell">rabbitmq-plugins enable amqp_clientrabbitmq-plugins enable rabbitmq_shovel</code></pre></li><li><p>Step2ï¼šåˆ›å»ºrabbitmq.config</p><pre><code class="shell">touch /etc/rabbitmq/rabbitmq.config</code></pre></li><li><p>Step3ï¼šæ·»åŠ é…ç½®è§rabbitmq.config</p></li><li><p>Step4ï¼šæºä¸ç›®çš„åœ°æœåŠ¡å™¨ä½¿ç”¨ç›¸åŒçš„é…ç½®æ–‡ä»¶(rabbitmq.config)</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd6m5i4uekj30lk0f0mza.jpg" alt="rabbitmq.config" style="zoom:80%;" /></li></ol></blockquote><h3 id="é•œåƒæ¨¡å¼ï¼ˆå¸¸ç”¨ï¼‰"><a href="#é•œåƒæ¨¡å¼ï¼ˆå¸¸ç”¨ï¼‰" class="headerlink" title="é•œåƒæ¨¡å¼ï¼ˆå¸¸ç”¨ï¼‰"></a>é•œåƒæ¨¡å¼ï¼ˆå¸¸ç”¨ï¼‰</h3><blockquote><ul><li>é›†ç¾¤æ¨¡å¼éå¸¸ç»å…¸çš„å°±æ˜¯Mirroré•œåƒæ¨¡å¼ï¼Œä¿è¯100%æ•°æ®ä¸ä¸¢å¤±ã€‚</li><li>åœ¨å®é™…å·¥ä½œä¸­ç”¨çš„æœ€å¤šï¼Œå¹¶ä¸”å®ç°é›†ç¾¤éå¸¸ç®€å•ï¼Œä¸€èˆ¬äº’è”ç½‘å¤§å‚éƒ½ä¼šæ„å»ºè¿™ç§é•œåƒé›†ç¾¤</li></ul></blockquote><p>Mirroré•œåƒé˜Ÿåˆ—</p><blockquote><p>é«˜å¯é ã€æ•°æ®åŒæ­¥ã€3èŠ‚ç‚¹</p><p>ç›®çš„æ˜¯ä¸ºäº†ä¿è¯rabbitmqæ•°æ®çš„é«˜å¯é æ€§è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦å°±æ˜¯å®ç°æ•°æ®çš„åŒæ­¥ï¼Œä¸€èˆ¬æ¥è®²æ˜¯2-3ä¸ªå®ç°æ•°æ®åŒæ­¥ï¼ˆå¯¹äº100%æ•°æ®å¯é æ€§è§£å†³æ–¹æ¡ˆä¸€èˆ¬æ˜¯3ä¸ªèŠ‚ç‚¹ï¼‰</p></blockquote><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd72txmzvxj30wr0kidiy.jpg" alt="RabbitMQé›†ç¾¤æ¶æ„å›¾" style="zoom:60%;" /><h3 id="å¤šæ´»æ¨¡å¼"><a href="#å¤šæ´»æ¨¡å¼" class="headerlink" title="å¤šæ´»æ¨¡å¼"></a>å¤šæ´»æ¨¡å¼</h3><blockquote><ul><li>è¿™ç§æ¨¡å¼ä¹Ÿæ˜¯å®ç°å¼‚åœ°æ•°æ®å¤åˆ¶çš„ä¸»æµæ¨¡å¼ï¼Œå› ä¸ºShovelæ¨¡å¼é…ç½®æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´å®ç°å¼‚åœ°é›†ç¾¤éƒ½æ˜¯ä½¿ç”¨è¿™ç§åŒæ´»æˆ–è€…å¤šæ´»æ¨¡å‹æ¥å®ç°çš„</li><li>è¿™ç§æ¨¡å‹éœ€è¦ä¾èµ–RabbitMQçš„<strong>federationæ’ä»¶</strong>ï¼Œå¯ä»¥å®ç°æŒç»­çš„,å¯é çš„AMQPæ•°æ®é€šä¿¡ï¼Œå¤šæ´»æ¨¡å¼å®é™…é…ç½®ä¸åº”ç”¨éå¸¸ç®€å•</li><li>RabbitMQéƒ¨ç½²æ¶æ„é‡‡ç”¨åŒä¸­å¿ƒæ¨¡å¼ï¼ˆå¤šä¸­å¿ƒï¼‰ï¼Œé‚£ä¹ˆåœ¨ä¸¤å¥—ï¼ˆæˆ–å¤šå¥—ï¼‰æ•°æ®ä¸­å¿ƒä¸­å„éƒ¨ç½²ä¸€å¥—RabbitMQé›†ç¾¤ï¼Œå„ä¸­å¿ƒçš„RabbitMQæœåŠ¡é™¤äº†éœ€è¦ä¸ºä¸šåŠ¡æä¾›æ­£å¸¸çš„æ¶ˆæ¯æœåŠ¡å¤–ï¼Œä¸­å¿ƒä¹‹é—´è¿˜éœ€è¦å®ç°éƒ¨åˆ†é˜Ÿåˆ—æ¶ˆæ¯å…±äº«</li></ul></blockquote><p>å¤šæ´»é›†ç¾¤æ¶æ„å›¾</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd7mi68wfvj315a0iljtz.jpg" alt="å¤šæ´»é›†ç¾¤æ¶æ„å›¾" style="zoom:40%;" /><p>å¤šæ´»æ¨¡å¼-Federationæ’ä»¶</p><blockquote><ul><li><p>Federationæ’ä»¶æ˜¯ä¸€ä¸ªä¸éœ€è¦æ„ä»¶Clusterï¼Œè€Œåœ¨Brokersä¹‹é—´ä¼ è¾“æ¶ˆæ¯çš„é«˜æ€§èƒ½æ’ä»¶ï¼ŒFederationæ’ä»¶å¯ä»¥åœ¨Brokersæˆ–è€…Clusterä¹‹é—´ä¼ è¾“æ¶ˆæ¯ï¼Œè¿æ¥çš„åŒæ–¹å¯ä»¥ä½¿ç”¨ä¸åŒçš„userså’Œvirtual hostsï¼ŒåŒæ–¹ä¹Ÿå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬ä¸åŒçš„RabbitMQå’ŒErlangã€‚Federationæ’ä»¶ä½¿ç”¨AMQPåè®®é€šä¿¡ï¼Œå¯ä»¥æ¥å—ä¸è¿ç»­çš„ä¼ è¾“</p></li><li><p>Federation Exchangeï¼Œå¯ä»¥çœ‹æˆDownstreamä»Upstreamä¸»åŠ¨æ‹‰å–æ¶ˆæ¯ï¼Œä½†å¹¶ä¸æ˜¯æ‹‰å–æ‰€æœ‰æ¶ˆæ¯ï¼Œå¿…é¡»æ˜¯åœ¨Downstreamä¸Šå·²ç»æ˜ç¡®å®šä¹‰Bindingså…³ç³»çš„Exchangeï¼Œä¹Ÿå°±æ˜¯æœ‰å®é™…çš„ç‰©ç†Queueæ¥æ¥å—æ¶ˆæ¯ï¼Œæ‰ä¼šä»Upstreamæ‹‰å–æ¶ˆæ¯åˆ°Downstreamã€‚ä½¿ç”¨AMQPåè®®å®æ–½ä»£ç†é—´é€šä¿¡ï¼ŒDownstreamä¼šå°†ç»‘å®šå…³ç³»ç»„åˆåœ¨ä¸€èµ·ï¼Œç»‘å®š/æ¥è§¦ç»‘å®šå‘½ä»¤å°†å‘é€åˆ°Upstreamäº¤æ¢æœºã€‚å› æ­¤ï¼ŒFederation Exchangeåªæ¥æ”¶å…·æœ‰è®¢é˜…çš„æ¶ˆæ¯</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd7mrb9hm6j30zb0cfq3y.jpg" alt="Federationæ’ä»¶" style="zoom:50%;" /></li></ul></blockquote><h2 id="2-6-RocketMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ"><a href="#2-6-RocketMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ" class="headerlink" title="2-6 RocketMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ"></a>2-6 <a href="02-6-rocket-mq.md">RocketMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ</a></h2><h2 id="2-7-Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é«˜æ€§èƒ½åŸå› åˆ†æ"><a href="#2-7-Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é«˜æ€§èƒ½åŸå› åˆ†æ" class="headerlink" title="2-7 Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é«˜æ€§èƒ½åŸå› åˆ†æ"></a>2-7 Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é«˜æ€§èƒ½åŸå› åˆ†æ</h2><p>Kafkaä»‹ç»</p><blockquote><ul><li>Kafkaæ˜¯LinkedInå¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œç›®å‰å½’å±äºApacheé¡¶çº§é¡¹ç›®</li><li>Kafkaä¸»è¦ç‰¹ç‚¹æ˜¯åŸºäºPullçš„æ¨¡å¼æ¥å¤„ç†æ¶ˆæ¯æ¶ˆè´¹ï¼Œè¿½æ±‚é«˜ååé‡ï¼Œä¸€å¼€å§‹çš„ç›®çš„å°±æ˜¯ç”¨äºæ—¥å¿—æ”¶é›†å’Œä¼ è¾“</li><li>0.8ç‰ˆæœ¬å¼€å§‹æ”¯æŒå¤åˆ¶ï¼Œä¸æ”¯æŒäº‹åŠ¡ï¼Œå¯¹æ¶ˆæ¯çš„é‡å¤ã€ä¸¢å¤±ã€é”™è¯¯æ²¡æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œé€‚åˆäº§ç”Ÿå¤§é‡æ•°æ®çš„äº’è”ç½‘æœåŠ¡çš„æ•°æ®æ”¶é›†ä¸šåŠ¡</li></ul></blockquote><p>Kafkaæœ‰å“ªäº›ç‰¹ç‚¹</p><blockquote><p>åˆ†å¸ƒå¼ã€è·¨å¹³å°ã€å®æ—¶æ€§ã€ä¼¸ç¼©æ€§</p></blockquote><p>Kafkaé«˜æ€§èƒ½çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</p><blockquote><ul><li>é¡ºåºå†™ï¼ŒPage Cacheç©ºä¸­æ¥åŠ›ï¼Œé«˜æ•ˆè¯»å†™</li><li>é«˜æ€§èƒ½ã€é«˜åå</li><li>åå°å¼‚æ­¥ã€ä¸»åŠ¨Flush</li><li>é¢„è¯»ç­–ç•¥IOè°ƒåº¦</li></ul></blockquote><h2 id="2-8-Kafkaé«˜æ€§èƒ½æ ¸å¿ƒpageCacheä¸zeroCopyåŸç†è§£æ"><a href="#2-8-Kafkaé«˜æ€§èƒ½æ ¸å¿ƒpageCacheä¸zeroCopyåŸç†è§£æ" class="headerlink" title="2-8 Kafkaé«˜æ€§èƒ½æ ¸å¿ƒpageCacheä¸zeroCopyåŸç†è§£æ"></a>2-8 Kafkaé«˜æ€§èƒ½æ ¸å¿ƒpageCacheä¸zeroCopyåŸç†è§£æ</h2><p>Page Cacheé¡µé¢ç¼“å­˜ï¼š</p><blockquote><p>Page Cacheæ˜¯æ“ä½œç³»ç»Ÿå®ç°çš„ä¸»è¦çš„ç£ç›˜ç¼“å­˜çš„æœºåˆ¶ï¼Œä»¥æ­¤æ¥å‡å°‘å¯¹ç£ç›˜IOçš„æ“ä½œï¼Œå¯¹ç£ç›˜IOè®¿é—®ç‰¹åˆ«é¢‘ç¹ä¼šå½±å“æ“ä½œç³»ç»Ÿçš„æ€§èƒ½ã€‚<strong>æŠŠç£ç›˜ä¸­çš„æ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼ŒæŠŠå¯¹ç£ç›˜çš„è®¿é—®å˜æˆå¯¹å†…å­˜çš„è®¿é—®ã€‚</strong></p></blockquote><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd7nlcb8vxj30t90ld0uk.jpg" alt="Page Cacheçš„è¿‡ç¨‹" style="zoom:50%;" /><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd7o5dbyirj30tw0lawg0.jpg" alt="ZeroCopy" style="zoom:50%;" /><p>æ€è€ƒï¼šå°†ä¸€ä¸ªæ¶ˆæ¯å‘é€ç»™10ä¸ªæ¶ˆè´¹è€…ï¼Œä¸¤ç§æ¨¡å¼åˆ†åˆ«éœ€è¦copyå¤šå°‘æ¬¡æ•°æ®ï¼Ÿ</p><blockquote><p>ä¼ ç»Ÿæ¨¡å¼<code>4*10</code>æ¬¡ï¼Œé›¶æ‹·è´<code>1+1*10</code>æ¬¡</p></blockquote><h2 id="2-9-Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¨¡å‹è®²è§£"><a href="#2-9-Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¨¡å‹è®²è§£" class="headerlink" title="2-9 Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¨¡å‹è®²è§£"></a>2-9 Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¨¡å‹è®²è§£</h2><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd7ob5wsqlj30y30d3my4.jpg" alt="Kafkaé›†ç¾¤æ¨¡å¼" style="zoom:35%;" /><h2 id="2-10-æœ¬ç« æ€»ç»“"><a href="#2-10-æœ¬ç« æ€»ç»“" class="headerlink" title="2-10 æœ¬ç« æ€»ç»“"></a>2-10 æœ¬ç« æ€»ç»“</h2><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd7oc8xymsj31260nqwij.jpg" alt="å›¾ç‰‡æè¿°" style="zoom:100%;" />]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01-ã€ŠJavaæ¶æ„å¸ˆæˆé•¿ä½“ç³»è¯¾ç¨‹ã€‹å¯¼å­¦</title>
      <link href="/imooc/1297-MQ-Kafka/01-guiding/"/>
      <url>/imooc/1297-MQ-Kafka/01-guiding/</url>
      
        <content type="html"><![CDATA[<h2 id="1-1-è¯¾ç¨‹å¯¼å­¦"><a href="#1-1-è¯¾ç¨‹å¯¼å­¦" class="headerlink" title="1-1 è¯¾ç¨‹å¯¼å­¦"></a>1-1 è¯¾ç¨‹å¯¼å­¦</h2><blockquote><p>æœåŠ¡æ¶æ„ï¼šå•ä½“&gt;&gt;é›†ç¾¤&gt;&gt;åˆ†å¸ƒå¼&gt;&gt;å¾®æœåŠ¡&gt;&gt;å®¹å™¨åŒ–</p><p>ç›®æ ‡ï¼šé«˜å¯ç”¨ã€é«˜å¹¶å‘ã€é«˜æ€§èƒ½</p><p>æŠ€æœ¯æ ˆï¼šSpringBootã€MyBatisã€Redisã€Nginxã€ElasticSearchæœç´¢å¼•æ“ã€FastDFSæ–‡ä»¶å­˜å‚¨ã€åˆ†å¸ƒå¼ä¼šè¯ã€å•ç‚¹ç™»å½•ã€RabbitMQæ¶ˆæ¯é˜Ÿåˆ—ã€Kafkaæ¶ˆæ¯é˜Ÿåˆ—ã€MyCatã€Sharding-JDBCã€åˆ†å¸ƒå¼é”è®¾è®¡ã€åˆ†å¸ƒå¼å…¨å±€IDè®¾è®¡ã€åˆ†å¸ƒå¼äº‹åŠ¡å’Œæ•°æ®ä¸€è‡´æ€§ã€æ¥å£å¹‚ç­‰æ€§è®¾è®¡ã€åˆ†å¸ƒå¼é™æµã€SpringCloud Gç‰ˆå¾®æœåŠ¡ã€Dockerã€K8Sã€å®¹å™¨å¼¹æ€§æ‰©ç¼©å®¹ã€Nettyã€JVMæ€§èƒ½è°ƒä¼˜ã€MySQLæ€§èƒ½è°ƒä¼˜ã€åº”ç”¨ç¨‹åºæ€§èƒ½è°ƒä¼˜ã€Tomcatæ€§èƒ½è°ƒä¼˜ã€Linuxæ€§èƒ½è°ƒä¼˜ã€æ¶æ„è°ƒä¼˜</p></blockquote><p>è¯¾ç¨‹å®‰æ’</p><blockquote><p>é˜¶æ®µä¸€ï¼šå•ä½“é¡¹ç›®å¼€å‘ä¸ä¸Šçº¿ï¼ˆ1~5å‘¨ï¼‰</p><p>é˜¶æ®µäºŒï¼šä»å•ä½“åˆ°é«˜å¯ç”¨é›†ç¾¤æ¼”è¿›ï¼ˆ6~8å‘¨ï¼‰</p><p>é˜¶æ®µä¸‰ï¼šé€ä¸ªå‡»ç ´åˆ†å¸ƒå¼æ ¸å¿ƒé—®é¢˜ï¼ˆ9~17å‘¨ï¼‰</p><p>é˜¶æ®µå››ï¼šSpringCloud Gç‰ˆå¾®æœåŠ¡ï¼ˆ18~25å‘¨ï¼‰</p><p>é˜¶æ®µäº”ï¼šDockerï¼ŒK8Så®¹å™¨åŒ–ï¼ˆ26~30å‘¨ï¼‰</p><p>é˜¶æ®µå…­ï¼šNettyä¸æ€§èƒ½è°ƒä¼˜ï¼ˆ31~40å‘¨ï¼‰</p></blockquote><ol><li><p>é˜¶æ®µä¸€ï¼šå•ä½“é¡¹ç›®å¼€å‘ä¸ä¸Šçº¿ï¼ˆ1~5å‘¨ï¼‰</p><blockquote><p>ç¬¬1å‘¨ï¼šä¸‡ä¸ˆé«˜æ¥¼ï¼Œåœ°åŸºé¦–è¦</p><p>ç¬¬2å‘¨ï¼šåˆ†ç±»ï¼Œæ¨èï¼Œæœç´¢ï¼Œè¯„ä»·ï¼Œè´­ç‰©è½¦å¼€å‘</p><p>ç¬¬3å‘¨ï¼šæ”¶è´§åœ°å€ï¼Œè®¢å•ï¼Œæ”¯ä»˜ï¼Œå®šæ—¶ä»»åŠ¡å¼€å‘</p><p>ç¬¬4å‘¨ï¼šç”¨æˆ·ä¸­å¿ƒï¼Œè®¢å•/è¯„ä»·ç®¡ç†å¼€å‘</p><p>ç¬¬5å‘¨ï¼šäº‘æœåŠ¡å™¨éƒ¨ç½²ä¸Šçº¿</p></blockquote></li><li><p>é˜¶æ®µäºŒï¼šä»å•ä½“åˆ°é«˜å¯ç”¨é›†ç¾¤æ¼”è¿›ï¼ˆ6~8å‘¨ï¼‰</p><blockquote><p>ç¬¬6å‘¨ï¼šLVS+Keepalived+Nginxå®ç°é«˜å¯ç”¨é›†ç¾¤</p><p>ç¬¬7å‘¨ï¼šä¸»ä»å¤åˆ¶é«˜å¯ç”¨Redisé›†ç¾¤</p><p>ç¬¬8å‘¨ï¼šRedisç¼“å­˜é›ªå´©ï¼Œç©¿é€</p></blockquote></li><li><p>é˜¶æ®µä¸‰ï¼šé€ä¸ªå‡»ç ´åˆ†å¸ƒå¼æ ¸å¿ƒé—®é¢˜ï¼ˆ9~17å‘¨ï¼‰</p><blockquote><p>ç¬¬9å‘¨ï¼šåˆ†å¸ƒå¼ä¼šè¯ä¸å•ç‚¹ç™»å½•SSO</p><p>ç¬¬10å‘¨ï¼šåˆ†å¸ƒå¼æœç´¢å¼•æ“-ElasticSearch</p><p>ç¬¬11å‘¨ï¼šåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ-FastDFS+é˜¿é‡ŒOSS</p><p>ç¬¬12å‘¨ï¼šåˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-RabbitMQ</p><p>ç¬¬13å‘¨ï¼šåˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka</p><p>ç¬¬14å‘¨ï¼šåˆ†å¸ƒå¼é”</p><p>ç¬¬15å‘¨ï¼šè¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨-MyCatå’ŒSharding-JDBC</p><p>ç¬¬16å‘¨ï¼šåˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ä¸»é”®IDã€åˆ†å¸ƒå¼äº‹åŠ¡å’Œäº‹åŠ¡ä¸€è‡´æ€§</p><p>ç¬¬17å‘¨ï¼šåˆ†å¸ƒå¼æ¥å£å¹‚ç­‰æ€§ï¼Œåˆ†å¸ƒå¼é™æµ</p></blockquote></li><li><p>é˜¶æ®µå››ï¼šSpringCloud Gç‰ˆå¾®æœåŠ¡ï¼ˆ18~25å‘¨ï¼‰</p><blockquote><p>ç¬¬18å‘¨ï¼šå¾®æœåŠ¡æ¶æ„è®¤çŸ¥ã€å¾®æœåŠ¡æ²»ç†-Eureka</p><p>ç¬¬19å‘¨ï¼šè´Ÿè½½å‡è¡¡-Ribbonã€æœåŠ¡é€šä¿¡ä¸è°ƒç”¨-Feign</p><p>ç¬¬20å‘¨ï¼šæœåŠ¡å®¹é”™-Hystrix</p><p>ç¬¬21å‘¨ï¼šåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ-Config</p><p>ç¬¬22å‘¨ï¼šæ¶ˆæ¯æ€»çº¿-Busã€æœåŠ¡ç½‘å…³-Gateway</p><p>ç¬¬23å‘¨ï¼šæœåŠ¡è°ƒç”¨é“¾è¿½è¸ª-Sleuthã€æ¶ˆæ¯é©±åŠ¨-Stream</p><p>ç¬¬24å‘¨ï¼šå¾®æœåŠ¡ä¸‹Sentinelæµé‡é˜²å«å…µ</p><p>ç¬¬25å‘¨ï¼šæœåŠ¡æ²»ç†çš„å¦ä¸€æ¡è·¯-Dubbo</p></blockquote></li><li><p>é˜¶æ®µäº”ï¼šDockerï¼ŒK8Så®¹å™¨åŒ–ï¼ˆ26~30å‘¨ï¼‰</p><blockquote><p>ç¬¬26å‘¨ï¼šæœåŠ¡å®¹å™¨åŒ–-Docker</p><p>ç¬¬27å‘¨ï¼šå®¹å™¨æŠ€æœ¯-Cloud Foundry</p><p>ç¬¬28å‘¨ï¼šå®¹å™¨ç¼–æ’-Mesos+Marathon</p><p>ç¬¬29å‘¨ï¼šå®¹å™¨ç¼–æ’-K8S</p><p>ç¬¬30å‘¨ï¼šå®¹å™¨å¼¹æ€§æ‰©ç¼©å®¹æ¶æ„æ€è·¯</p></blockquote></li><li><p>é˜¶æ®µå…­ï¼šNettyä¸æ€§èƒ½è°ƒä¼˜ï¼ˆ31~40å‘¨ï¼‰</p><blockquote><p>ç¬¬31å‘¨ï¼šé«˜æ€§èƒ½ç½‘ç»œé€šä¿¡åŸºçŸ³-Nettyå…¥é—¨ä¸æé«˜</p><p>ç¬¬32å‘¨ï¼šé«˜æ€§èƒ½ç½‘ç»œé€šä¿¡åŸºçŸ³-Nettyæœ€ä½³å®æˆ˜</p><p>ç¬¬33å‘¨ï¼šåŸºäºNettyæ‰“é€ è‡ªå·±çš„RPCé€šä¿¡æ¡†æ¶-1</p><p>ç¬¬34å‘¨ï¼šåŸºäºNettyæ‰“é€ è‡ªå·±çš„RPCé€šä¿¡æ¡†æ¶-2</p><p>ç¬¬35å‘¨ï¼šåº”ç”¨ç›‘æ§ä¸è°ƒä¼˜-å·¥å…·ç¯‡</p><p>ç¬¬36å‘¨ï¼šåº”ç”¨ç›‘æ§ä¸è°ƒä¼˜-æŠ€å·§ä¸å®æˆ˜ç¯‡</p><p>ç¬¬37å‘¨ï¼šJVMæ€§èƒ½è°ƒä¼˜-å·¥å…·ç¯‡</p><p>ç¬¬38å‘¨ï¼šJVMæ€§èƒ½è°ƒä¼˜-å®æˆ˜ç¯‡</p><p>ç¬¬39å‘¨ï¼šæ•°æ®åº“ç›‘æ§ä¸è°ƒä¼˜</p><p>ç¬¬40å‘¨ï¼šLinuxè°ƒä¼˜ä¸æ¶æ„è°ƒä¼˜</p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>00-ç›®å½•</title>
      <link href="/imooc/1297-MQ-Kafka/00-catalog/"/>
      <url>/imooc/1297-MQ-Kafka/00-catalog/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><blockquote><p><a href="https://class.imooc.com/course/1297" target="_blank" rel="noopener">https://class.imooc.com/course/1297</a></p></blockquote><h2 id="ç¬¬1ç« -Day01-ã€ŠJavaæ¶æ„å¸ˆæˆé•¿ä½“ç³»è¯¾ç¨‹ã€‹å¯¼å­¦"><a href="#ç¬¬1ç« -Day01-ã€ŠJavaæ¶æ„å¸ˆæˆé•¿ä½“ç³»è¯¾ç¨‹ã€‹å¯¼å­¦" class="headerlink" title="ç¬¬1ç«  Day01:ã€ŠJavaæ¶æ„å¸ˆæˆé•¿ä½“ç³»è¯¾ç¨‹ã€‹å¯¼å­¦"></a>ç¬¬1ç«  Day01:ã€ŠJavaæ¶æ„å¸ˆæˆé•¿ä½“ç³»è¯¾ç¨‹ã€‹å¯¼å­¦</h2><ul><li>1-1 è¯¾ç¨‹å¯¼å­¦</li></ul><h2 id="ç¬¬2ç« -Day01-æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰è®¤çŸ¥æå‡"><a href="#ç¬¬2ç« -Day01-æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰è®¤çŸ¥æå‡" class="headerlink" title="ç¬¬2ç«  Day01 æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰è®¤çŸ¥æå‡"></a>ç¬¬2ç«  Day01 æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰è®¤çŸ¥æå‡</h2><ul><li>2-1 æœ¬ç« æ¦‚è¿°ï¼ˆKafkaï¼‰</li><li>2-2 æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„åº”ç”¨åœºæ™¯ä¸æ€§èƒ½è¡¡é‡æŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>2-3 æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMQï¼‰çš„æŠ€æœ¯é€‰å‹å…³æ³¨ç‚¹æœ‰å“ªäº›ï¼Ÿ</li><li>2-4 ActiveMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ</li><li>2-5 RabbitMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„æ¨¡å‹ä¸åŸç†è§£æ</li><li>2-6 RocketMQæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¶æ„ä¸åŸç†è§£æ</li><li>2-7 Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é«˜æ€§èƒ½åŸå› åˆ†æ</li><li>2-8 Kafkaé«˜æ€§èƒ½æ ¸å¿ƒpageCacheä¸zeroCopyåŸç†è§£æ</li><li>2-9 Kafkaæ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤æ¨¡å‹è®²è§£</li><li>2-10 æœ¬ç« æ€»ç»“</li></ul><h2 id="ç¬¬3ç« -Day02-Kafkaæ€¥é€Ÿå…¥é—¨ä¸å®æˆ˜"><a href="#ç¬¬3ç« -Day02-Kafkaæ€¥é€Ÿå…¥é—¨ä¸å®æˆ˜" class="headerlink" title="ç¬¬3ç«  Day02 Kafkaæ€¥é€Ÿå…¥é—¨ä¸å®æˆ˜"></a>ç¬¬3ç«  Day02 Kafkaæ€¥é€Ÿå…¥é—¨ä¸å®æˆ˜</h2><ul><li>3-1 æœ¬ç« å¯¼èˆª</li><li>3-2 kafkaæ ¸å¿ƒæ¦‚å¿µä¸åº”ç”¨åœºæ™¯</li><li>3-3 kafkaæ€¥é€Ÿå…¥é—¨ä¸æ ¸å¿ƒAPIè§£æ</li><li>3-4 Kafkaä¸springbootæ•´åˆ_ç”Ÿäº§è€…è®²è§£</li><li>3-5 Kafkaä¸springbootæ•´åˆ_æ¶ˆè´¹è€…è®²è§£</li></ul><h2 id="ç¬¬4ç« -Day03-Day04-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿæ¶æ„è®¾è®¡"><a href="#ç¬¬4ç« -Day03-Day04-Kafkaæµ·é‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿæ¶æ„è®¾è®¡" class="headerlink" title="ç¬¬4ç«  Day03~Day04 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿæ¶æ„è®¾è®¡"></a>ç¬¬4ç«  Day03~Day04 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿæ¶æ„è®¾è®¡</h2><ul><li>4-1 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_æ¶æ„è®¾è®¡è®²è§£</li><li>4-2 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-1</li><li>4-3 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_log4j2æ—¥å¿—è¾“å‡ºå®æˆ˜-2</li><li>4-4 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-1</li><li>4-5 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_filebeatæ—¥å¿—æ”¶é›†å®æˆ˜-2</li><li>4-6 é™„ï¼šlogstashåŸºç¡€è¯­æ³•ä¸ä½¿ç”¨</li><li>4-7 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-1</li><li>4-8 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_logstashæ—¥å¿—è¿‡æ»¤å®æˆ˜-2</li><li>4-9 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_elasticsearch&amp;kibanaå­˜å‚¨å¯è§†åŒ–å®æˆ˜</li><li>4-10 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_watcherç›‘æ§å‘Šè­¦å®æˆ˜-1</li><li>4-11 Kafkaæµ·é‡æ—¥å¿—æ”¶é›†å®æˆ˜_watcherç›‘æ§å‘Šè­¦å®æˆ˜-2</li><li>4-12 é™„ï¼šwatcher åŸºç¡€è¯­æ³•ä¸ä½¿ç”¨</li><li>4-13 æ€»ç»“ä¸å¤ä¹ </li><li>4-14 ä½œä¸šç»ƒä¹ </li></ul><h2 id="ç¬¬5ç« -ã€é€‰çœ‹ã€‘å¤§å’–ç²¾å½©å†…å®¹èŸèƒ"><a href="#ç¬¬5ç« -ã€é€‰çœ‹ã€‘å¤§å’–ç²¾å½©å†…å®¹èŸèƒ" class="headerlink" title="ç¬¬5ç«  ã€é€‰çœ‹ã€‘å¤§å’–ç²¾å½©å†…å®¹èŸèƒ"></a>ç¬¬5ç«  ã€é€‰çœ‹ã€‘å¤§å’–ç²¾å½©å†…å®¹èŸèƒ</h2><ul><li>5-1 ã€é£é—´å½±æœˆã€‘ç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆè½åœ°å®ä¾‹</li><li>5-2 ã€å‡Œæ³¢å¾®æ­¥ã€‘äº‹åŠ¡è¡¥å¿æœºåˆ¶åŸç†è§£æ</li><li>5-3 ã€å§šåŠä»™ã€‘æŠ€æœ¯è·¯çº¿VSç®¡ç†è·¯çº¿ï¼Œè¯¥è®¤çœŸè€ƒè™‘ä¸€ä¸‹èŒä¸šå‘å±•é—®é¢˜äº†</li><li>5-4 ã€å¼ é£æ‰¬ã€‘å®¹å™¨æŠ€æœ¯ä¼—å¤šï¼Œè¯¥å¦‚ä½•æŠ€æœ¯é€‰å‹ï¼Ÿ</li><li>5-5 ã€å¤§ç›®ã€‘æ€§èƒ½è°ƒä¼˜ç›®æ ‡æ¦‚è¿°ä¸æˆ‘çš„å››æ¿æ–§åˆ†äº«</li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—-Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>05-é¡¹ç›®å®æˆ˜-é¡µé¢éª¨æ¶å¼€å‘</title>
      <link href="/imooc/74-vue-sell-1/05-page-skeleton/"/>
      <url>/imooc/74-vue-sell-1/05-page-skeleton/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="5-1-ç»„ä»¶æ‹†åˆ†ï¼ˆä¸Šï¼‰"><a href="#5-1-ç»„ä»¶æ‹†åˆ†ï¼ˆä¸Šï¼‰" class="headerlink" title="5-1 ç»„ä»¶æ‹†åˆ†ï¼ˆä¸Šï¼‰"></a>5-1 ç»„ä»¶æ‹†åˆ†ï¼ˆä¸Šï¼‰</h2><pre><code class="json">// .eslintrc.js&#39;semi&#39;:[&#39;error&#39;,&#39;always&#39;] // eslintå¼ºåˆ¶è¯­å¥æœ‰åˆ†å·&#39;indent&#39;: 0 // å–æ¶ˆindentè®¾ç½®</code></pre><pre><code class="html">&lt;!--index.html--&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,user-scalable=no&quot;&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;static/css/reset.css&quot;/&gt;</code></pre><pre><code class="javascript">/* eslint-disable no-new */ // eslintè·³è¿‡no-newæ£€æŸ¥</code></pre><h2 id="5-2-ç»„ä»¶æ‹†åˆ†ï¼ˆä¸­ï¼‰"><a href="#5-2-ç»„ä»¶æ‹†åˆ†ï¼ˆä¸­ï¼‰" class="headerlink" title="5-2 ç»„ä»¶æ‹†åˆ†ï¼ˆä¸­ï¼‰"></a>5-2 ç»„ä»¶æ‹†åˆ†ï¼ˆä¸­ï¼‰</h2><pre><code class="json">&quot;stylus&quot;: &quot;0.52.4&quot;,&quot;stylus-loader&quot;: &quot;^2.5.0&quot;,</code></pre><pre><code class="vue">&lt;template&gt;  &lt;div id=&quot;app&quot;&gt;    &lt;v-header&gt;&lt;/v-header&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;  import header from &#39;./components/header/header&#39;;  export default {    components: {      &#39;v-header&#39;: header    }  };&lt;/script&gt;&lt;style&gt;&lt;/style&gt;</code></pre><pre><code class="vue">&lt;template&gt;  &lt;div class=&quot;header&quot;&gt;    I&#39;m header  &lt;/div&gt;&lt;/template&gt;&lt;script type=&quot;text/ecmascript-6&quot;&gt;  export default {  };&lt;/script&gt;&lt;style lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;&lt;/style&gt;</code></pre><h2 id="5-3-ç»„ä»¶æ‹†åˆ†ï¼ˆä¸‹ï¼‰"><a href="#5-3-ç»„ä»¶æ‹†åˆ†ï¼ˆä¸‹ï¼‰" class="headerlink" title="5-3 ç»„ä»¶æ‹†åˆ†ï¼ˆä¸‹ï¼‰"></a>5-3 ç»„ä»¶æ‹†åˆ†ï¼ˆä¸‹ï¼‰</h2><p>flexå¸ƒå±€</p><pre><code class="vue">&lt;div class=&quot;tab&quot;&gt;  &lt;div class=&quot;tab-item&quot;&gt;å•†å“&lt;/div&gt;  &lt;div class=&quot;tab-item&quot;&gt;è¯„è®º&lt;/div&gt;  &lt;div class=&quot;tab-item&quot;&gt;å•†å®¶&lt;/div&gt;&lt;/div&gt;</code></pre><pre><code class="vue">&lt;style lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;  #app    .tab      display flex      width 100%      height 40px      line-height 40px      .tab-item        flex 1        text-align center&lt;/style&gt;</code></pre><h2 id="5-4-Vue-router-ä¸Š"><a href="#5-4-Vue-router-ä¸Š" class="headerlink" title="5-4 Vue-router(ä¸Š)"></a>5-4 Vue-router(ä¸Š)</h2><pre><code class="json">/* package.json */&quot;dependencies&quot;: {  &quot;vue-router&quot;: &quot;^0.7.13&quot;},</code></pre><pre><code class="shell">npm install</code></pre><pre><code class="vue">&lt;div class=&quot;tab&quot;&gt;  &lt;div class=&quot;tab-item&quot;&gt;    &lt;a v-link=&quot;{path:&#39;/goods&#39;}&quot;&gt;å•†å“&lt;/a&gt;  &lt;/div&gt;  &lt;div class=&quot;tab-item&quot;&gt;    &lt;a v-link=&quot;{path:&#39;/ratings&#39;}&quot;&gt;è¯„è®º&lt;/a&gt;  &lt;/div&gt;  &lt;div class=&quot;tab-item&quot;&gt;    &lt;a v-link=&quot;{path:&#39;/seller&#39;}&quot;&gt;å•†å®¶&lt;/a&gt;  &lt;/div&gt;&lt;/div&gt;&lt;router-view&gt;&lt;/router-view&gt;</code></pre><pre><code class="javascript">/* main.js */import Vue from &#39;vue&#39;import VueRouter from &#39;vue-router&#39;import App from &#39;./App&#39;import goods from &#39;components/goods/goods&#39;import ratings from &#39;components/ratings/ratings&#39;import seller from &#39;components/seller/seller&#39;Vue.use(VueRouter)let app = Vue.extend(App)let router = new VueRouter()router.map({  &#39;/goods&#39;: {    component: goods  },  &#39;/ratings&#39;: {    component: ratings  },  &#39;/seller&#39;: {    component: seller  }})router.start(app, &#39;#app&#39;)</code></pre><h2 id="5-5-Vue-router-ä¸‹"><a href="#5-5-Vue-router-ä¸‹" class="headerlink" title="5-5 Vue-router(ä¸‹)"></a>5-5 Vue-router(ä¸‹)</h2><pre><code class="javascript">/* main.js */router.go(&#39;/goods&#39;) // è·¯ç”±ç›´æ¥è·³åˆ°/goodsé¡µ</code></pre><pre><code class="vue">&lt;style lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;  .tab    .tab-item      &amp; &gt; a // &amp;è¡¨ç¤ºçˆ¶çº§å…ƒç´         display block // å¡«æ»¡çˆ¶çº§å…ƒç´                 text-decoration: none;// å»é™¤æ–‡æœ¬aæ ‡ç­¾ä¸‹åˆ’çº¿        font-size 14px        color rgb(77,85,93)        &amp;.active // çˆ¶çº§å…ƒç´ æœ‰activeç±»,åˆ™åº”ç”¨ä¸€ä¸‹CSS          color rgb(240, 20, 20)&lt;/style&gt;</code></pre><blockquote><p>CSSä¹¦å†™è§„èŒƒï¼šå¸ƒå±€ã€å®½é«˜ç­‰å†™åœ¨å‰ï¼Œå­—ä½“é¢œè‰²é‡ç»˜ä¸å½±å“å¸ƒå±€çš„å†™åœ¨å</p></blockquote><pre><code class="javascript">/* main.js */let router = new VueRouter({  linkActiveClass: &#39;active&#39;})</code></pre><h2 id="5-6-1åƒç´ borderå®ç°"><a href="#5-6-1åƒç´ borderå®ç°" class="headerlink" title="5-6 1åƒç´ borderå®ç°"></a>5-6 1åƒç´ borderå®ç°</h2><p>æ‰‹æœºçš„1åƒç´ ä¸ºç‰©ç†2åƒç´ ï¼Œæ‰€ä»¥åœ¨ç”µè„‘ä¸Šæ˜¯1åƒç´ ï¼Œåˆ™åœ¨æ‰‹æœºä¸Šä¸º2åƒç´ </p><blockquote><p>æ‰‹æœºè®¿é—®ç”µè„‘æœåŠ¡é¡¹ç›®åœ°å€ï¼šæ‰‹æœºç”µè„‘åŒæ—¶è¿æ¥å†…ç½‘WiFiï¼Œç”µè„‘æŸ¥çœ‹IPï¼Œå°†IPçš„æœåŠ¡åœ°å€å‘é€åˆ°æ‰‹æœºç«¯å³å¯è®¿é—®</p></blockquote><pre><code class="stylus">/* mixin.styl */border-1px($color)  position relative  &amp;:after    display block    position absolute    left 0    bottom 0    width 100%    border-top 1px solid $color    content &#39; &#39;</code></pre><pre><code class="stylus">/* base.styl */@media (-webkit-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)  .border-1px    &amp;::after      -webkit-transform scaleY(0.7)      transform scaleY(0.7)@media (-webkit-min-device-pixel-ratio: 2),(min-device-pixel-ratio: 2)  .border-1px    &amp;::after      -webkit-transform scaleY(0.5)      transform scaleY(0.5)</code></pre><pre><code class="stylus">/* index.styl */@import &quot;./base.styl&quot;@import &quot;./icon.styl&quot;@import &quot;./mixin.styl&quot;</code></pre><pre><code class="javascript">/* main.js */import &#39;common/stylus/index.styl&#39;</code></pre><pre><code class="vue">&lt;div class=&quot;tab border-1px&quot;&gt;&lt;/div&gt;&lt;style lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;  @import &quot;common/stylus/mixin.styl&quot;  .tab    // border-bottom 1px solid rgba(7, 17, 27, 0.1)    border-1px(rgba(7, 17, 27, 0.1))&lt;/style&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 74-Vue.js2.5+cube-uié‡æ„é¥¿äº†ä¹ˆApp(ä¸€æœŸ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>04-é¡¹ç›®å®æˆ˜-å‡†å¤‡å·¥ä½œ</title>
      <link href="/imooc/74-vue-sell-1/04-preparation/"/>
      <url>/imooc/74-vue-sell-1/04-preparation/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="4-1-éœ€æ±‚åˆ†æ"><a href="#4-1-éœ€æ±‚åˆ†æ" class="headerlink" title="4-1 éœ€æ±‚åˆ†æ"></a>4-1 éœ€æ±‚åˆ†æ</h2><p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd4r2u5ws9j30pm08tgmg.jpg" alt="å¤–å–APPå•†å®¶é¡µé¢"></p><h2 id="4-2-é¡¹ç›®èµ„æºå‡†å¤‡"><a href="#4-2-é¡¹ç›®èµ„æºå‡†å¤‡" class="headerlink" title="4-2 é¡¹ç›®èµ„æºå‡†å¤‡"></a>4-2 é¡¹ç›®èµ„æºå‡†å¤‡</h2><p>DPRï¼ˆDevice Pixel Ratioï¼‰ï¼šè®¾å¤‡åƒç´ æ¯”</p><blockquote><p>window.devicePixelRatioæ˜¯è®¾å¤‡ä¸Šç‰©ç†åƒç´ å’Œè®¾å¤‡ç‹¬ç«‹åƒç´ (device-independent pixels (dips))çš„æ¯”ä¾‹ã€‚</p><p>å…¬å¼è¡¨ç¤ºå°±æ˜¯ï¼šwindow.devicePixelRatio = ç‰©ç†åƒç´  / dips</p></blockquote><p><a href="https://www.zhangxinxu.com/wordpress/2012/08/window-devicepixelratio/" target="_blank" rel="noopener">è®¾å¤‡åƒç´ æ¯”devicePixelRatioç®€å•ä»‹ç»</a></p><p>å¯ä»¥é€šè¿‡meta viewportçš„å€¼åˆ¤æ–­ä»£ç è¿è¡Œåœ¨ä»€ä¹ˆDPIçš„æ‰‹æœºä¸Š</p><p>SVGï¼šçŸ¢é‡å›¾ç‰‡ï¼Œå¯ä»¥ä¼¸ç¼©ï¼Œè½¬æ¢ä¸ºå›¾æ ‡å­—ä½“</p><h2 id="4-3-å›¾æ ‡å­—ä½“åˆ¶ä½œ"><a href="#4-3-å›¾æ ‡å­—ä½“åˆ¶ä½œ" class="headerlink" title="4-3 å›¾æ ‡å­—ä½“åˆ¶ä½œ"></a>4-3 å›¾æ ‡å­—ä½“åˆ¶ä½œ</h2><p><a href="https://icomoon.io/" target="_blank" rel="noopener">https://icomoon.io/</a></p><h2 id="4-4-é¡¹ç›®ç›®å½•è®¾è®¡"><a href="#4-4-é¡¹ç›®ç›®å½•è®¾è®¡" class="headerlink" title="4-4 é¡¹ç›®ç›®å½•è®¾è®¡"></a>4-4 é¡¹ç›®ç›®å½•è®¾è®¡</h2><blockquote><p>srcï¼šé¡¹ç›®æºç æ–‡ä»¶<br>    assets<br>    common<br>        fontsï¼šå›¾æ ‡å­—ä½“æ–‡ä»¶<br>        js<br>        stylusï¼šCSSé¢„å¤„ç†å™¨ï¼Œless,sasså·®ä¸å¤š<br>    componentsï¼šç»„ä»¶æ–‡ä»¶<br>        Hello.vue<br>    App.vueï¼šé¡µé¢çš„å®ä¾‹æ–‡ä»¶<br>    main.jsï¼šå…¥å£æ–‡ä»¶</p></blockquote><p>stylusæ–‡ä»¶éœ€è¦å»é™¤CSSæ–‡ä»¶ä¸­çš„â€{â€œã€â€}â€ã€â€;â€</p><h2 id="4-5-mockæ•°æ®ï¼ˆæ¨¡æ‹Ÿåå°æ•°æ®ï¼‰"><a href="#4-5-mockæ•°æ®ï¼ˆæ¨¡æ‹Ÿåå°æ•°æ®ï¼‰" class="headerlink" title="4-5 mockæ•°æ®ï¼ˆæ¨¡æ‹Ÿåå°æ•°æ®ï¼‰"></a>4-5 mockæ•°æ®ï¼ˆæ¨¡æ‹Ÿåå°æ•°æ®ï¼‰</h2><p>data.json</p><ol><li><p>ä½¿ç”¨data.jsonæ¥mockåç«¯æ•°æ®</p><pre><code class="javascript">// dev-server.jsvar appData = require(&#39;../data.json&#39;);var seller = appData.seller;var goods = appData.goods;var ratings = appData.ratings;let apiRoutes = express.Router();apiRoutes.get(&#39;/seller&#39;, function (req, res) {  res.json({    errno: 0,    data: seller  });});apiRoutes.get(&#39;/goods&#39;,function (req,res) {  res.json({    errno: 0,    data: goods  });});apiRoutes.get(&#39;/ratings&#39;,function (req,res) {  res.json({    errno: 0,    data: ratings  });});app.use(&#39;/api&#39;, apiRoutes);</code></pre></li><li><p>è®¿é—®åœ°å€</p><p><a href="http://localhost:8080/api/seller" target="_blank" rel="noopener">http://localhost:8080/api/seller</a></p><p><a href="http://localhost:8080/api/goods" target="_blank" rel="noopener">http://localhost:8080/api/goods</a></p><p><a href="http://localhost:8080/api/ratings" target="_blank" rel="noopener">http://localhost:8080/api/ratings</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 74-Vue.js2.5+cube-uié‡æ„é¥¿äº†ä¹ˆApp(ä¸€æœŸ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03-Vue-cli å¼€å¯ Vuejs é¡¹ç›®</title>
      <link href="/imooc/74-vue-sell-1/03-vue-cli/"/>
      <url>/imooc/74-vue-sell-1/03-vue-cli/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="3-1-Vue-cliä»‹ç»"><a href="#3-1-Vue-cliä»‹ç»" class="headerlink" title="3-1 Vue-cliä»‹ç»"></a>3-1 Vue-cliä»‹ç»</h2><p>Vue-cliæ˜¯Vueçš„è„šæ‰‹æ¶å·¥å…·</p><blockquote><p>ç›®å½•ç»“æ„ã€æœ¬åœ°è°ƒè¯•ã€ä»£ç éƒ¨ç½²ã€çƒ­åŠ è½½ã€å•å…ƒæµ‹è¯•</p></blockquote><p>å®˜ç½‘ï¼š<a href="https://cli.vuejs.org/" target="_blank" rel="noopener">https://cli.vuejs.org/</a></p><h2 id="3-2-Vue-cliå®‰è£…"><a href="#3-2-Vue-cliå®‰è£…" class="headerlink" title="3-2 Vue-cliå®‰è£…"></a>3-2 Vue-cliå®‰è£…</h2><pre><code class="shell">node -v # æŸ¥çœ‹nodeç‰ˆæœ¬sudo npm install -g vue-cli # å®‰è£…vue-clivuevue list # åˆ—å‡ºå¯ä½¿ç”¨æ¨¡æ¿vue init webpack sell # åˆ›å»ºé¡¹ç›®cd sell # è¿›å…¥é¡¹ç›®ä¸»ç›®å½•npm install # å®‰è£…æ’ä»¶npm run dev # è¿è¡Œé¡¹ç›®</code></pre><h2 id="3-3-é¡¹ç›®è¿è¡Œ"><a href="#3-3-é¡¹ç›®è¿è¡Œ" class="headerlink" title="3-3 é¡¹ç›®è¿è¡Œ"></a>3-3 é¡¹ç›®è¿è¡Œ</h2><ol><li>åˆ›å»º.vueæ–‡ä»¶ï¼štemplateã€scriptã€style</li><li>export defaultä¸€ä¸ªå¯¹è±¡</li><li>importå¼•ç”¨ï¼Œcomponentsæ³¨å†Œ</li><li>ä½¿ç”¨æ ‡ç­¾</li></ol><h2 id="3-4-é¡¹ç›®æ–‡ä»¶ä»‹ç»"><a href="#3-4-é¡¹ç›®æ–‡ä»¶ä»‹ç»" class="headerlink" title="3-4 é¡¹ç›®æ–‡ä»¶ä»‹ç»"></a>3-4 é¡¹ç›®æ–‡ä»¶ä»‹ç»</h2><blockquote><p>buildï¼šwebpacké…ç½®<br>configï¼šwebpacké…ç½®<br>node_modulesï¼šnpm installå®‰è£…çš„ä¾èµ–ä»£ç åº“<br>srcï¼šé¡¹ç›®æºç <br>    assets<br>    components<br>    App.vue<br>    main.js<br>staticï¼šç¬¬ä¸‰æ–¹é™æ€èµ„æº<br>testï¼šæµ‹è¯•<br>.babelrcï¼šES6è½¬ES5çš„é…ç½®<br>.editorconfigï¼šç¼–è¯‘å™¨é…ç½®<br>.eslintignoreï¼šå¿½ç•¥è¯­æ³•æ£€æŸ¥çš„ç›®å½•æ–‡ä»¶<br>.eslintrc.jsï¼šeslintçš„é…ç½®æ–‡ä»¶<br>.gitignoreï¼šgitä»“åº“å¿½ç•¥æäº¤çš„æ–‡ä»¶ã€ç›®å½•<br>index.htmlï¼šå…¥å£HTMLæ–‡ä»¶<br>package.jsonï¼šé¡¹ç›®é…ç½®æ–‡ä»¶<br>README.mdï¼šé¡¹ç›®æè¿°æ–‡ä»¶</p></blockquote><h2 id="3-5-webpackæ‰“åŒ…ï¼ˆä¸Šï¼‰"><a href="#3-5-webpackæ‰“åŒ…ï¼ˆä¸Šï¼‰" class="headerlink" title="3-5 webpackæ‰“åŒ…ï¼ˆä¸Šï¼‰"></a>3-5 webpackæ‰“åŒ…ï¼ˆä¸Šï¼‰</h2><p>webpackï¼šå‰ç«¯æ„ä»¶å·¥å…·</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd2q0yiid4j31o00u0qcn.jpg" alt="webpack" style="zoom:30%;" /><p>package.json</p><pre><code class="json">&quot;dev&quot;: &quot;node build/dev-server.js&quot;</code></pre><p>dev-server.js</p><pre><code class="json">var webpackConfig = process.env.NODE_ENV === &#39;testing&#39;  ? require(&#39;./webpack.prod.conf&#39;)  : require(&#39;./webpack.dev.conf&#39;)</code></pre><p>webpack.dev.conf.js</p><pre><code class="json">var baseWebpackConfig = require(&#39;./webpack.base.conf&#39;)</code></pre><p>webpack.base.conf.js</p><p>utils.js</p><h2 id="3-6-webpackæ‰“åŒ…ï¼ˆä¸­ï¼‰"><a href="#3-6-webpackæ‰“åŒ…ï¼ˆä¸­ï¼‰" class="headerlink" title="3-6 webpackæ‰“åŒ…ï¼ˆä¸­ï¼‰"></a>3-6 webpackæ‰“åŒ…ï¼ˆä¸­ï¼‰</h2><h2 id="3-7-webpackæ‰“åŒ…ï¼ˆä¸‹ï¼‰"><a href="#3-7-webpackæ‰“åŒ…ï¼ˆä¸‹ï¼‰" class="headerlink" title="3-7 webpackæ‰“åŒ…ï¼ˆä¸‹ï¼‰"></a>3-7 webpackæ‰“åŒ…ï¼ˆä¸‹ï¼‰</h2>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 74-Vue.js2.5+cube-uié‡æ„é¥¿äº†ä¹ˆApp(ä¸€æœŸ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02-Vuejsä»‹ç»</title>
      <link href="/imooc/74-vue-sell-1/02-introduce/"/>
      <url>/imooc/74-vue-sell-1/02-introduce/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="2-1-Vuejsä»‹ç»-è¿‘å¹´æ¥å‰ç«¯å¼€å‘è¶‹åŠ¿"><a href="#2-1-Vuejsä»‹ç»-è¿‘å¹´æ¥å‰ç«¯å¼€å‘è¶‹åŠ¿" class="headerlink" title="2-1 Vuejsä»‹ç»-è¿‘å¹´æ¥å‰ç«¯å¼€å‘è¶‹åŠ¿"></a>2-1 Vuejsä»‹ç»-è¿‘å¹´æ¥å‰ç«¯å¼€å‘è¶‹åŠ¿</h2><blockquote><p>æ—§æµè§ˆå™¨é€æ¸æ·˜æ±°ï¼Œç§»åŠ¨ç«¯éœ€æ±‚å¢åŠ <br>å‰ç«¯äº¤äº’è¶Šæ¥è¶Šå¤šï¼ŒåŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚<br>æ¶æ„ä»ä¼ ç»Ÿåç«¯MVCå‘REST API+å‰ç«¯<code>MV*</code>è¿ç§»</p><p><code>MV*</code>:MVCã€MVPã€MVVM</p></blockquote><h2 id="2-2-Vuejsä»‹ç»-MVVMæ¡†æ¶"><a href="#2-2-Vuejsä»‹ç»-MVVMæ¡†æ¶" class="headerlink" title="2-2 Vuejsä»‹ç»-MVVMæ¡†æ¶"></a>2-2 Vuejsä»‹ç»-MVVMæ¡†æ¶</h2><p>MVVMæ¡†æ¶</p><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd1mzx6m3mj30kr07rgny.jpg" alt="MVVMæ¡†æ¶" style="zoom:60%;" /><p>æ•°æ®åŒå‘ç»‘å®šï¼šå½“æ•°æ®å‘ç”Ÿå˜åŒ–ï¼ŒViewModelèƒ½å¤Ÿè§‚å¯Ÿåˆ°æ•°æ®å˜åŒ–ï¼Œå¹¶é€šçŸ¥åˆ°å¯¹åº”è§†å›¾åšè‡ªåŠ¨æ›´æ–°ï¼›è€Œå½“ç”¨æˆ·æ“ä½œè§†å›¾ï¼ŒViewModelä¹Ÿèƒ½å¤Ÿç›‘å¬åˆ°è§†å›¾çš„å˜åŒ–ï¼Œç„¶åé€šçŸ¥æ•°æ®åšæ”¹åŠ¨ã€‚</p><blockquote><p>é’ˆå¯¹å…·æœ‰å¤æ‚äº¤äº’é€»è¾‘çš„å‰ç«¯åº”ç”¨<br>æä¾›åŸºç¡€çš„æ¶æ„æŠ½è±¡<br>é€šè¿‡AJAXæ•°æ®æŒä¹…åŒ–ï¼Œä¿è¯å‰ç«¯ç”¨æˆ·ä½“éªŒ</p></blockquote><p>MVVMï¼šAngular.jsã€React.jsã€Vue.js</p><h2 id="2-3-Vuejsä»‹ç»-ä»€ä¹ˆæ˜¯VuejsåŠVuejsç”Ÿæ€"><a href="#2-3-Vuejsä»‹ç»-ä»€ä¹ˆæ˜¯VuejsåŠVuejsç”Ÿæ€" class="headerlink" title="2-3 Vuejsä»‹ç»-ä»€ä¹ˆæ˜¯VuejsåŠVuejsç”Ÿæ€"></a>2-3 Vuejsä»‹ç»-ä»€ä¹ˆæ˜¯VuejsåŠVuejsç”Ÿæ€</h2><p>ä»€ä¹ˆæ˜¯Vue.js</p><blockquote><p>è½»é‡çº§MVVMæ¡†æ¶<br>æ•°æ®é©±åŠ¨+ç»„ä»¶åŒ–çš„å‰ç«¯å¼€å‘<br>GitHubè¶…è¿‡25kçš„staræ•°ï¼Œç¤¾åŒºå®Œå–„</p></blockquote><p>å®˜ç½‘ï¼š<a href="https://cn.vuejs.org/" target="_blank" rel="noopener">https://cn.vuejs.org/</a></p><h2 id="2-4-Vuejsä»‹ç»-å¯¹æ¯”Angularã€React"><a href="#2-4-Vuejsä»‹ç»-å¯¹æ¯”Angularã€React" class="headerlink" title="2-4 Vuejsä»‹ç»-å¯¹æ¯”Angularã€React"></a>2-4 Vuejsä»‹ç»-å¯¹æ¯”Angularã€React</h2><blockquote><p>Vue.jsæ›´è½»é‡ï¼Œgzipåå¤§å°åªæœ‰20k+ï¼Œangular56kï¼Œreact44k</p><p>Vue.jsæ›´æ˜“ä¸Šæ‰‹ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¨³</p><p>å¸å–ä¸¤å®¶ä¹‹é•¿ï¼Œå€Ÿé‰´äº†angularçš„æŒ‡ä»¤å’Œreactçš„ç»„ä»¶åŒ–</p></blockquote><h2 id="2-5-Vuejsä»‹ç»-Vuejsæ ¸å¿ƒæ€æƒ³"><a href="#2-5-Vuejsä»‹ç»-Vuejsæ ¸å¿ƒæ€æƒ³" class="headerlink" title="2-5 Vuejsä»‹ç»-Vuejsæ ¸å¿ƒæ€æƒ³"></a>2-5 Vuejsä»‹ç»-Vuejsæ ¸å¿ƒæ€æƒ³</h2><blockquote><p>æ•°æ®é©±åŠ¨<br>ç»„ä»¶åŒ–</p></blockquote><h3 id="æ•°æ®é©±åŠ¨"><a href="#æ•°æ®é©±åŠ¨" class="headerlink" title="æ•°æ®é©±åŠ¨"></a>æ•°æ®é©±åŠ¨</h3><blockquote><p>DOMæ˜¯æ•°æ®çš„ä¸€ç§è‡ªç„¶æ˜ å°„</p></blockquote><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd1nlz7bvej30fa07lwek.jpg" alt="MVVMæ¡†æ¶ç¤ºæ„å›¾" style="zoom:60%;" /><p>æ•°æ®å“åº”åŸç†</p><blockquote><p>æ•°æ®(Model)æ”¹å˜é©±åŠ¨è§†å›¾ï¼ˆViewï¼‰è‡ªåŠ¨æ›´æ–°</p></blockquote><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd1nr37rx9j30he08oaa5.jpg" alt="æ•°æ®å“åº”åŸç†" style="zoom:60%;" /><h3 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h3><blockquote><p>æ‰©å±•HTMLå…ƒç´ ï¼Œå°è£…å¯é‡ç”¨çš„ä»£ç </p></blockquote><img src="https://tva1.sinaimg.cn/large/00831rSTgy1gd1nthvv98j30ho06djrd.jpg" alt="DOMæ ‘ä¸ViewModelæ ‘" style="zoom:60%;" /><p>ç»„ä»¶è®¾è®¡åŸåˆ™</p><blockquote><p>é¡µé¢ä¸Šæ¯ä¸ªç‹¬ç«‹çš„å¯è§†/å¯äº¤äº’åŒºåŸŸè§†ä¸ºä¸€ä¸ªç»„ä»¶<br>æ¯ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ªå·¥ç¨‹ç›®å½•ï¼Œç»„ä»¶æ‰€éœ€è¦çš„å„ç§èµ„æºåœ¨è¿™ä¸ªç›®å½•ä¸‹å°±è¿‘ç»´æŠ¤<br>é¡µé¢ä¸è¿‡æ˜¯ç»„ä»¶çš„å®¹å™¨ï¼Œç»„ä»¶å¯ä»¥åµŒå¥—è‡ªç”±ç»„åˆå½¢æˆå®Œæ•´çš„é¡µé¢</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 74-Vue.js2.5+cube-uié‡æ„é¥¿äº†ä¹ˆApp(ä¸€æœŸ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01-è¯¾ç¨‹ç®€ä»‹</title>
      <link href="/imooc/74-vue-sell-1/01-synopsis/"/>
      <url>/imooc/74-vue-sell-1/01-synopsis/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="1-1-è¯¾ç¨‹ç®€ä»‹"><a href="#1-1-è¯¾ç¨‹ç®€ä»‹" class="headerlink" title="1-1 è¯¾ç¨‹ç®€ä»‹"></a>1-1 è¯¾ç¨‹ç®€ä»‹</h2><p>Vue.jsï¼šå½“å‰æœ€ç«çš„MVVMæ¡†æ¶</p><blockquote><p>è½»é‡ã€ç®€æ´ã€é«˜æ•ˆã€æ•°æ®é©±åŠ¨ã€ç»„ä»¶åŒ–</p></blockquote><p>å¼€å‘æµç¨‹ï¼šéœ€æ±‚åˆ†æ-è„šæ‰‹æ¶å·¥å…·-æ•°æ®mock-æ¶æ„è®¾è®¡-ä»£ç ç¼–å†™-è‡ªæµ‹-ç¼–è¯‘æ‰“åŒ…</p><p>åŠŸèƒ½æŠ€æœ¯åˆ†æ</p><blockquote><ul><li><p>vue-resourceï¼šåç«¯æ•°æ®äº¤äº’</p></li><li><p>vue-routerï¼šå‰ç«¯è·¯ç”±</p></li><li><p>ç¬¬ä¸‰æ–¹JSåº“better-scroll</p></li><li><p>æœ€å¤§ç¨‹åº¦ç»„ä»¶åŒ–</p></li><li><p>HTML5çš„LocalStorage</p></li><li><p>å›¾æ ‡å­—ä½“çš„ä½¿ç”¨</p></li><li><p>ç§»åŠ¨ç«¯1åƒç´ è¾¹æ¡†</p></li><li><p>CSS sticky footerå¸ƒå±€</p></li><li><p>flexå¼¹æ€§å¸ƒå±€</p></li></ul></blockquote><h2 id="1-2-è¯¾ç¨‹å®‰æ’"><a href="#1-2-è¯¾ç¨‹å®‰æ’" class="headerlink" title="1-2 è¯¾ç¨‹å®‰æ’"></a>1-2 è¯¾ç¨‹å®‰æ’</h2><p>å­¦ä¹ ç›®æ ‡ï¼š</p><blockquote><ul><li>æŒæ¡Vue.jsåœ¨å®æˆ˜ä¸­çš„è¿ç”¨</li><li>å­¦ä¼šä½¿ç”¨Vue.jså®Œæ•´åœ°å¼€å‘ç§»åŠ¨ç«¯APP</li><li>å­¦ä¼šç»„ä»¶åŒ–ã€æ¨¡å—åŒ–çš„å¼€å‘æ–¹å¼</li></ul></blockquote><p>å­¦ä¹ å†…å®¹ï¼š</p><blockquote><ul><li>Vue.jsæ¡†æ¶ä»‹ç»</li><li>Vue-cliè„šæ‰‹æ¶ æ­å»ºåŸºæœ¬ä»£ç æ¡†æ¶</li><li>vue-router å®˜æ–¹æ’ä»¶ç®¡ç†è·¯ç”±</li><li>vue-resource Ajaxé€šä¿¡</li><li>Webpack æ„å»ºå·¥å…·</li><li>ES6+eslint eslint:es6ä»£ç é£æ ¼æ£€æŸ¥å·¥å…·</li></ul></blockquote><p>å·¥ç¨‹åŒ–ã€ç»„ä»¶åŒ–ã€æ¨¡å—åŒ–</p><p>ç§»åŠ¨ç«¯å¸¸ç”¨å¼€å‘æŠ€å·§</p><blockquote><ul><li>flexå¼¹æ€§å¸ƒå±€</li><li>CSS stickyfooter</li><li>çš„äº¤äº’è®¾è®¡</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 74-Vue.js2.5+cube-uié‡æ„é¥¿äº†ä¹ˆApp(ä¸€æœŸ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>00-ç« èŠ‚ç›®å½•</title>
      <link href="/imooc/74-vue-sell-1/00-catalog/"/>
      <url>/imooc/74-vue-sell-1/00-catalog/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="ç¬¬01ç« -è¯¾ç¨‹ç®€ä»‹ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬01ç« -è¯¾ç¨‹ç®€ä»‹ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬01ç«  è¯¾ç¨‹ç®€ä»‹ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬01ç«  è¯¾ç¨‹ç®€ä»‹ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>ä»‹ç»è¯¾ç¨‹çš„å­¦ä¹ ç›®æ ‡å’Œå­¦ä¹ å†…å®¹ã€‚</p></blockquote><ul><li>1-1 è¯¾ç¨‹ç®€ä»‹</li><li>1-2 è¯¾ç¨‹å®‰æ’</li></ul><h2 id="ç¬¬02ç« -Vuejsä»‹ç»ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬02ç« -Vuejsä»‹ç»ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬02ç«  Vuejsä»‹ç»ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬02ç«  Vuejsä»‹ç»ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>ä»å‰ç«¯å¼€å‘è¶‹åŠ¿åˆ†æå¼€å§‹ï¼Œå¼•å…¥ MVVM å¼€å‘æ¡†æ¶å’Œ Vue.jsï¼Œæ¥ç€å¯¹æ¯”æµè¡Œæ¡†æ¶Angular å’Œ Reactï¼Œæœ€åè¯¦ç»†ä»‹ç» Vue.js çš„æ ¸å¿ƒæ€æƒ³-æ•°æ®é©±åŠ¨å’Œç»„ä»¶åŒ–ã€‚</p></blockquote><ul><li>2-1 Vuejsä»‹ç»-è¿‘å¹´æ¥å‰ç«¯å¼€å‘è¶‹åŠ¿</li><li>2-2 Vuejsä»‹ç»-MVVMæ¡†æ¶</li><li>2-3 Vuejsä»‹ç»-ä»€ä¹ˆæ˜¯VuejsåŠVuejsç”Ÿæ€</li><li>2-4 Vuejsä»‹ç»-å¯¹æ¯”Angularã€React</li><li>2-5 Vuejsä»‹ç»-Vuejsæ ¸å¿ƒæ€æƒ³</li></ul><h2 id="ç¬¬03ç« -Vue-cli-å¼€å¯-Vuejs-é¡¹ç›®ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬03ç« -Vue-cli-å¼€å¯-Vuejs-é¡¹ç›®ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬03ç«  Vue-cli å¼€å¯ Vuejs é¡¹ç›®ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬03ç«  Vue-cli å¼€å¯ Vuejs é¡¹ç›®ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>ä»‹ç» Vue é¡¹ç›®çš„è„šæ‰‹æ¶ï¼Œå¦‚ä½•å®‰è£…ï¼Œå¯¹è„šæ‰‹æ¶ç”Ÿæˆçš„ç›®å½•æ–‡ä»¶åšä»‹ç»ï¼Œä»‹ç» Vue ç»„ä»¶çš„ç¼–å†™æ–¹æ³•ï¼Œæœ€åè¿è¡Œ demo é¡¹ç›®å¹¶ä»‹ç» webpack æ„å»ºè„šæœ¬æ¥è¯´æ˜ demo çš„è¿è¡ŒåŸç†ã€‚</p></blockquote><ul><li>3-1 Vue-cliä»‹ç»</li><li>3-2 Vue-cliå®‰è£…</li><li>3-3 é¡¹ç›®è¿è¡Œ</li><li>3-4 é¡¹ç›®æ–‡ä»¶ä»‹ç»</li><li>3-5 webpackæ‰“åŒ…ï¼ˆä¸Šï¼‰</li><li>3-6 webpackæ‰“åŒ…ï¼ˆä¸­ï¼‰</li><li>3-7 webpackæ‰“åŒ…ï¼ˆä¸‹ï¼‰</li></ul><h2 id="ç¬¬04ç« -é¡¹ç›®å®æˆ˜-å‡†å¤‡å·¥ä½œï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬04ç« -é¡¹ç›®å®æˆ˜-å‡†å¤‡å·¥ä½œï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬04ç«  é¡¹ç›®å®æˆ˜-å‡†å¤‡å·¥ä½œï¼ˆä¸€æœŸï¼‰"></a>ç¬¬04ç«  é¡¹ç›®å®æˆ˜-å‡†å¤‡å·¥ä½œï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>åˆ†æå¤–å– APP å•†å®¶é¡µé¢çš„éœ€æ±‚ï¼Œå‡†å¤‡å›¾ç‰‡èµ„æºï¼Œåˆ©ç”¨ icon-moon æŠŠ svg åˆ¶ä½œæˆå›¾æ ‡å­—ä½“ï¼Œå¯¹ä»£ç çš„ç›®å½•ç»“æ„è®¾è®¡ï¼Œæœ€å mock æµ‹è¯•æ•°æ®ã€‚</p></blockquote><ul><li>4-1 éœ€æ±‚åˆ†æ</li><li>4-2 é¡¹ç›®èµ„æºå‡†å¤‡</li><li>4-3 å›¾æ ‡å­—ä½“åˆ¶ä½œ</li><li>4-4 é¡¹ç›®ç›®å½•è®¾è®¡</li><li>4-5 mockæ•°æ®ï¼ˆæ¨¡æ‹Ÿåå°æ•°æ®ï¼‰</li></ul><h2 id="ç¬¬05ç« -é¡¹ç›®å®æˆ˜-é¡µé¢éª¨æ¶å¼€å‘ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬05ç« -é¡¹ç›®å®æˆ˜-é¡µé¢éª¨æ¶å¼€å‘ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬05ç«  é¡¹ç›®å®æˆ˜-é¡µé¢éª¨æ¶å¼€å‘ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬05ç«  é¡¹ç›®å®æˆ˜-é¡µé¢éª¨æ¶å¼€å‘ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>è®¾è®¡é¡µé¢çš„éª¨æ¶ï¼Œæ‹†åˆ†ç»„ä»¶ï¼Œå•†å“ã€è¯„è®ºå’Œå•†å®¶è¯¦æƒ…é¡µåˆ©ç”¨ Vue-router åšåˆ‡æ¢ï¼Œæœ€åè¿˜ä»‹ç»äº† flex å¼¹æ€§å¸ƒå±€ä»¥åŠç§»åŠ¨ç«¯ 1 åƒç´  border å®ç°çš„å°æŠ€å·§ã€‚</p></blockquote><ul><li>5-1 ç»„ä»¶æ‹†åˆ†ï¼ˆä¸Šï¼‰</li><li>5-2 ç»„ä»¶æ‹†åˆ†ï¼ˆä¸­ï¼‰</li><li>5-3 ç»„ä»¶æ‹†åˆ†ï¼ˆä¸‹ï¼‰</li><li>5-4 Vue-router(ä¸Š)</li><li>5-5 Vue-router(ä¸‹)</li><li>5-6 1åƒç´ borderå®ç°</li></ul><h2 id="ç¬¬06ç« -é¡¹ç›®å®æˆ˜-headerç»„ä»¶å¼€å‘ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬06ç« -é¡¹ç›®å®æˆ˜-headerç»„ä»¶å¼€å‘ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬06ç«  é¡¹ç›®å®æˆ˜-headerç»„ä»¶å¼€å‘ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬06ç«  é¡¹ç›®å®æˆ˜-headerç»„ä»¶å¼€å‘ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>ç¼–å†™ header å¤´éƒ¨ç»„ä»¶ï¼Œåº”ç”¨ Vue-resource ä»æœåŠ¡ç«¯è¯»å–æ•°æ®ï¼Œä»‹ç»å¦‚ä½•åœ¨ Vue.js ä¸­ä½¿ç”¨è¿‡æ¸¡åŠ¨ç”»ï¼Œå¦‚ä½•ç¼–å†™ css sticky footer å¸ƒå±€ï¼Œå¦‚ä½•ä»éœ€æ±‚ä¸­æŠ½è±¡å‡º star æ˜Ÿæ˜Ÿç»„ä»¶ã€‚</p></blockquote><ul><li>6-1 Vue-resourceåº”ç”¨ï¼ˆä¸Šï¼‰</li><li>6-2 Vue-resourceåº”ç”¨ï¼ˆä¸‹ï¼‰</li><li>6-3 å¤–éƒ¨ç»„ä»¶ï¼ˆ1ï¼‰</li><li>6-4 å¤–éƒ¨ç»„ä»¶ï¼ˆ2ï¼‰</li><li>6-5 å¤–éƒ¨ç»„ä»¶ï¼ˆ3ï¼‰</li><li>6-6 å¤–éƒ¨ç»„ä»¶ï¼ˆ4ï¼‰</li><li>6-7 å¤–éƒ¨ç»„ä»¶ï¼ˆ5ï¼‰</li><li>6-8 å¤–éƒ¨ç»„ä»¶ï¼ˆ6ï¼‰</li><li>6-9 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ1ï¼‰- å®ç°å¼¹å‡ºå±‚</li><li>6-10 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ2ï¼‰- CSS Sticky footer</li><li>6-11 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰- starç»„ä»¶æŠ½è±¡ï¼ˆä¸Šï¼‰</li><li>6-12 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ3ï¼‰- starç»„ä»¶æŠ½è±¡ï¼ˆä¸‹ï¼‰</li><li>6-13 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ4ï¼‰- starç»„ä»¶ä½¿ç”¨</li><li>6-14 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ5ï¼‰- å°æ ‡é¢˜è‡ªé€‚åº”ç»å…¸flexå¸ƒå±€å®ç°</li><li>6-15 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰- headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸Šï¼‰</li><li>6-16 è¯¦æƒ…å¼¹å±‚é¡µï¼ˆ6ï¼‰- headerå‰©ä½™ç»„ä»¶å®ç°ï¼ˆä¸‹ï¼‰</li></ul><h2 id="ç¬¬07ç« -é¡¹ç›®å®æˆ˜-goods-å•†å“åˆ—è¡¨é¡µå¼€å‘ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬07ç« -é¡¹ç›®å®æˆ˜-goods-å•†å“åˆ—è¡¨é¡µå¼€å‘ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬07ç«  é¡¹ç›®å®æˆ˜-goods å•†å“åˆ—è¡¨é¡µå¼€å‘ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬07ç«  é¡¹ç›®å®æˆ˜-goods å•†å“åˆ—è¡¨é¡µå¼€å‘ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>ç¼–å†™ goods å•†å“ç»„ä»¶ï¼ŒåŒ…æ‹¬å®ƒçš„å­ç»„ä»¶ shopcart è´­ç‰©è½¦ã€‚ä»‹ç»äº†å¦‚ä½•åœ¨ Vue.js åº”ç”¨ç¬¬ä¸‰æ–¹ JS æ’ä»¶ better-scrollå®ç°åˆ—è¡¨æ»šåŠ¨ï¼Œå¹¶é…åˆ Vue.js çš„è®¡ç®—å±æ€§æ¥å®ç°å·¦å³åˆ—è¡¨çš„è”åŠ¨ã€‚åº”ç”¨äº†è‡ªå®šä¹‰ Vue.js è¿‡æ¸¡åŠ¨ç”»å®ç°äº†è´­ç‰©è½¦çš„é£å…¥åŠ¨ç”»æ•ˆæœï¼Œä»‹ç»äº†åœ¨ Vue.jsä¸­çˆ¶å­ç»„ä»¶å¦‚ä½•é€šè®¯ã€‚â€¦</p></blockquote><ul><li>7-1 å¸ƒå±€ç¼–å†™</li><li>7-2 å·¦ä¾§menuå¸ƒå±€</li><li>7-3 å³ä¾§é£Ÿå“åˆ—è¡¨å¸ƒå±€ï¼ˆ1ï¼‰</li><li>7-4 å³ä¾§é£Ÿå“åˆ—è¡¨å¸ƒå±€ï¼ˆ2ï¼‰</li><li>7-5 å³ä¾§é£Ÿå“åˆ—è¡¨å¸ƒå±€ï¼ˆ3ï¼‰</li><li>7-6 better-scrollè¿ç”¨ï¼ˆ1ï¼‰</li><li>7-7 better-scrollè¿ç”¨ï¼ˆ2ï¼‰</li><li>7-8 better-scrollè¿ç”¨ï¼ˆ3ï¼‰</li><li>7-9 shopcartè´­ç‰©è½¦ç»„ä»¶ï¼ˆ1ï¼‰</li><li>7-10 shopcartè´­ç‰©è½¦ç»„ä»¶ï¼ˆ2ï¼‰</li><li>7-11 shopcartè´­ç‰©è½¦ç»„ä»¶ï¼ˆ3ï¼‰</li><li>7-12 shopcartè´­ç‰©è½¦ç»„ä»¶ï¼ˆ4ï¼‰</li><li>7-13 shopcartè´­ç‰©è½¦ç»„ä»¶ï¼ˆ5ï¼‰</li><li>7-14 shopcartè´­ç‰©è½¦ç»„ä»¶ï¼ˆ6ï¼‰</li><li>7-15 cartcontrolç»„ä»¶ï¼ˆ1ï¼‰</li><li>7-16 cartcontrolç»„ä»¶ï¼ˆ2ï¼‰</li><li>7-17 cartcontrolç»„ä»¶ï¼ˆ3ï¼‰</li><li>7-18 è´­ç‰©è½¦å°çƒåŠ¨ç”»å®ç°ï¼ˆ1ï¼‰</li><li>7-19 è´­ç‰©è½¦å°çƒåŠ¨ç”»å®ç°ï¼ˆ2ï¼‰</li><li>7-20 è´­ç‰©è½¦å°çƒåŠ¨ç”»å®ç°ï¼ˆ3ï¼‰</li><li>7-21 è´­ç‰©è½¦è¯¦æƒ…é¡µå®ç°ï¼ˆ1ï¼‰</li><li>7-22 è´­ç‰©è½¦è¯¦æƒ…é¡µå®ç°ï¼ˆ2ï¼‰</li><li>7-23 è´­ç‰©è½¦è¯¦æƒ…é¡µå®ç°ï¼ˆ3ï¼‰</li><li>7-24 è´­ç‰©è½¦è¯¦æƒ…é¡µå®ç°ï¼ˆ4ï¼‰</li></ul><h2 id="ç¬¬08ç« -é¡¹ç›®å®æˆ˜-food-å•†å“è¯¦æƒ…é¡µå®ç°ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬08ç« -é¡¹ç›®å®æˆ˜-food-å•†å“è¯¦æƒ…é¡µå®ç°ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬08ç«  é¡¹ç›®å®æˆ˜-food å•†å“è¯¦æƒ…é¡µå®ç°ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬08ç«  é¡¹ç›®å®æˆ˜-food å•†å“è¯¦æƒ…é¡µå®ç°ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>ç¼–å†™ food å•†å“è¯¦æƒ…é¡µç»„ä»¶ï¼Œä»‹ç»äº†å›¾ç‰‡å ä½çš„æŠ€å·§ï¼Œå¹¶ä»éœ€æ±‚ä¸­æŠ½è±¡å‡ºçš„ split åˆ†éš”ç»„ä»¶å’Œ ratingselect è¯„è®ºç»„ä»¶ï¼Œå®ç°è‡ªå®šä¹‰è¿‡æ»¤å™¨ datefilterã€‚</p></blockquote><ul><li>8-1 å•†å“è¯¦æƒ…é¡µå®ç°ï¼ˆ1ï¼‰</li><li>8-2 å•†å“è¯¦æƒ…é¡µå®ç°ï¼ˆ2ï¼‰</li><li>8-3 å•†å“è¯¦æƒ…é¡µå®ç°ï¼ˆ3ï¼‰</li><li>8-4 å•†å“è¯¦æƒ…é¡µå®ç°ï¼ˆ4ï¼‰</li><li>8-5 å•†å“è¯¦æƒ…é¡µå®ç°ï¼ˆ5ï¼‰</li><li>8-6 splitç»„ä»¶å®ç°</li><li>8-7 ratingselectç»„ä»¶ï¼ˆ1ï¼‰</li><li>8-8 ratingselectç»„ä»¶ï¼ˆ2ï¼‰</li><li>8-9 ratingselectç»„ä»¶ï¼ˆ3ï¼‰</li><li>8-10 ratingselectç»„ä»¶ï¼ˆ4ï¼‰</li><li>8-11 ratingselectç»„ä»¶ï¼ˆ5ï¼‰</li><li>8-12 è¯„ä»·åˆ—è¡¨ï¼ˆ1ï¼‰</li><li>8-13 è¯„ä»·åˆ—è¡¨ï¼ˆ2ï¼‰</li><li>8-14 è¯„ä»·åˆ—è¡¨ï¼ˆ3ï¼‰</li><li>8-15 è¯„ä»·åˆ—è¡¨ï¼ˆ4ï¼‰</li><li>8-16 è¯„ä»·åˆ—è¡¨ï¼ˆ5ï¼‰</li><li>8-17 è¯„ä»·åˆ—è¡¨ï¼ˆ6ï¼‰</li></ul><h2 id="ç¬¬09ç« -é¡¹ç›®å®æˆ˜-ratingsè¯„ä»·åˆ—è¡¨é¡µå®ç°ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬09ç« -é¡¹ç›®å®æˆ˜-ratingsè¯„ä»·åˆ—è¡¨é¡µå®ç°ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬09ç«  é¡¹ç›®å®æˆ˜-ratingsè¯„ä»·åˆ—è¡¨é¡µå®ç°ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬09ç«  é¡¹ç›®å®æˆ˜-ratingsè¯„ä»·åˆ—è¡¨é¡µå®ç°ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>ç¼–å†™ ratings è¯„ä»·åˆ—è¡¨é¡µï¼Œæ„Ÿå—åœ¨ Vue.js ä¸­å¤ç”¨ç»„ä»¶çš„å¥½å¤„ï¼Œå®ç°å¿«é€Ÿå¼€å‘ã€‚</p></blockquote><ul><li>9-1 ratingsç»„ä»¶å¼€å‘-overviewå¼€å‘ï¼ˆ1ï¼‰</li><li>9-2 ratingsç»„ä»¶å¼€å‘-overviewå¼€å‘ï¼ˆ2ï¼‰</li><li>9-3 ratingsç»„ä»¶å¼€å‘-overviewå¼€å‘ï¼ˆ3ï¼‰</li><li>9-4 ratingsç»„ä»¶å¼€å‘-è¯„ä»·åˆ—è¡¨ï¼ˆ1ï¼‰</li><li>9-5 ratingsç»„ä»¶å¼€å‘-è¯„ä»·åˆ—è¡¨ï¼ˆ2ï¼‰</li><li>9-6 ratingsç»„ä»¶å¼€å‘-è¯„ä»·åˆ—è¡¨ï¼ˆ3ï¼‰</li></ul><h2 id="ç¬¬10ç« -é¡¹ç›®å®æˆ˜-seller-å•†å®¶è¯¦æƒ…é¡µå®ç°ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬10ç« -é¡¹ç›®å®æˆ˜-seller-å•†å®¶è¯¦æƒ…é¡µå®ç°ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬10ç«  é¡¹ç›®å®æˆ˜-seller å•†å®¶è¯¦æƒ…é¡µå®ç°ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬10ç«  é¡¹ç›®å®æˆ˜-seller å•†å®¶è¯¦æƒ…é¡µå®ç°ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>ç¼–å†™ seller å•†å®¶è¯¦æƒ…é¡µï¼Œå®ç°ä¸€å¥—é€šç”¨ç§»åŠ¨ç«¯æ•°æ®å­˜å–æ–¹æ¡ˆï¼Œä»¥åŠå¯¹é¡¹ç›®åšä¸€äº›ä½“éªŒä¸Šçš„ä¼˜åŒ–ã€‚</p></blockquote><ul><li>10-1 sellerç»„ä»¶å¼€å‘-overviewå¼€å‘ï¼ˆ1ï¼‰</li><li>10-2 sellerç»„ä»¶å¼€å‘-overviewå¼€å‘ï¼ˆ2ï¼‰</li><li>10-3 sellerç»„ä»¶å¼€å‘-å…¬å‘Šä¸æ´»åŠ¨å¼€å‘ï¼ˆ1ï¼‰</li><li>10-4 sellerç»„ä»¶å¼€å‘-å…¬å‘Šä¸æ´»åŠ¨å¼€å‘ï¼ˆ2ï¼‰</li><li>10-5 sellerç»„ä»¶å¼€å‘-BScrollåº”ç”¨</li><li>10-6 sellerç»„ä»¶å¼€å‘-å•†å®¶å®æ™¯å›¾</li><li>10-7 sellerç»„ä»¶å¼€å‘-å•†å®¶ä¿¡æ¯</li><li>10-8 sellerç»„ä»¶å¼€å‘-æ”¶è—å•†å®¶ï¼ˆ1ï¼‰</li><li>10-9 sellerç»„ä»¶å¼€å‘-æ”¶è—å•†å®¶ï¼ˆ2ï¼‰</li><li>10-10 sellerç»„ä»¶å¼€å‘-æ”¶è—å•†å®¶</li><li>10-11 sellerç»„ä»¶å¼€å‘-ä½“éªŒä¼˜åŒ–</li></ul><h2 id="ç¬¬11ç« -é¡¹ç›®å®æˆ˜-é¡¹ç›®ç¼–è¯‘æ‰“åŒ…ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬11ç« -é¡¹ç›®å®æˆ˜-é¡¹ç›®ç¼–è¯‘æ‰“åŒ…ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬11ç«  é¡¹ç›®å®æˆ˜-é¡¹ç›®ç¼–è¯‘æ‰“åŒ…ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬11ç«  é¡¹ç›®å®æˆ˜-é¡¹ç›®ç¼–è¯‘æ‰“åŒ…ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>ä¸Šçº¿å‰çš„æœ€åä¸€æ­¥ï¼Œç¼–è¯‘æ‰“åŒ…Vue.js é¡¹ç›®ã€‚ä»‹ç»äº† webpack ç¼–è¯‘æ—¶çš„é…ç½®ï¼Œå¦‚ä½•åˆ©ç”¨node.js å¼€å¯ä¸€ä¸ªserveræœ¬åœ°è°ƒè¯•ã€‚</p></blockquote><ul><li>11-1 webpacké…ç½®ä»‹ç»</li><li>11-2 nodejsè°ƒè¯•</li></ul><h2 id="ç¬¬12ç« -è¯¾ç¨‹æ€»ç»“ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬12ç« -è¯¾ç¨‹æ€»ç»“ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬12ç«  è¯¾ç¨‹æ€»ç»“ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬12ç«  è¯¾ç¨‹æ€»ç»“ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>å¯¹è¯¾ç¨‹åšæ€»ç»“ï¼Œå¹¶åˆ—å‡ºäº†è¯¾ç¨‹æ‰€æåˆ°çš„ä¸»è¦çŸ¥è¯†ç‚¹çš„é“¾æ¥ï¼Œä½œä¸ºè¯¾ç¨‹çš„å»¶ä¼¸å­¦ä¹ ã€‚</p></blockquote><ul><li>12-1 è¯¾ç¨‹æ€»ç»“</li></ul><h2 id="ç¬¬13ç« -é¡¹ç›®ä»-vue-js1-0-å‘-2-0-å‡çº§ï¼ˆä¸€æœŸï¼‰"><a href="#ç¬¬13ç« -é¡¹ç›®ä»-vue-js1-0-å‘-2-0-å‡çº§ï¼ˆä¸€æœŸï¼‰" class="headerlink" title="ç¬¬13ç«  é¡¹ç›®ä» vue.js1.0 å‘ 2.0 å‡çº§ï¼ˆä¸€æœŸï¼‰"></a>ç¬¬13ç«  é¡¹ç›®ä» vue.js1.0 å‘ 2.0 å‡çº§ï¼ˆä¸€æœŸï¼‰</h2><blockquote><p>æœ¬ç« èŠ‚æŠŠé¡¹ç›®ä»1.0å‘2.0å‡çº§å‘å¤§å®¶åšäº†ç®€è¦çš„ä»‹ç»ã€‚</p></blockquote><ul><li>13-1 1.0å‡çº§2.0 é…ç½®æ–‡ä»¶ä¿®æ”¹</li><li>13-2 1.0å‡çº§2.0 æºç ä¿®æ”¹ï¼ˆä¸Šï¼‰</li><li>13-3 1.0å‡çº§2.0 æºç ä¿®æ”¹ï¼ˆä¸‹ï¼‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 74-Vue.js2.5+cube-uié‡æ„é¥¿äº†ä¹ˆApp(ä¸€æœŸ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>18-æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</title>
      <link href="/imooc/18-java-mode/"/>
      <url>/imooc/18-java-mode/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºå‹æ¨¡å¼"><a href="#åˆ›å»ºå‹æ¨¡å¼" class="headerlink" title="åˆ›å»ºå‹æ¨¡å¼"></a>åˆ›å»ºå‹æ¨¡å¼</h2><blockquote><p>å¯¹è±¡çš„åˆ›å»ºä¼šæ¶ˆè€—æ‰ç³»ç»Ÿçš„å¾ˆå¤šèµ„æºï¼Œæ‰€ä»¥å•ç‹¬å¯¹å¯¹è±¡çš„åˆ›å»ºè¿›è¡Œç ”ç©¶ï¼Œä»è€Œèƒ½å¤Ÿé«˜æ•ˆåœ°åˆ›å»ºå¯¹è±¡å°±æ˜¯åˆ›å»ºå‹æ¨¡å¼è¦æ¢è®¨çš„é—®é¢˜</p></blockquote><ol><li><a href="https://www.tuyrk.cn/imooc/112-singleton-mode">æ¨¡å¼çš„ç§˜å¯†â€”å•ä¾‹æ¨¡å¼</a></li><li><a href="https://www.tuyrk.cn/imooc/261-factory-mode">æ¨¡å¼çš„ç§˜å¯†â€”å·¥å‚æ¨¡å¼</a></li></ol><h2 id="ç»“æ„å‹æ¨¡å¼"><a href="#ç»“æ„å‹æ¨¡å¼" class="headerlink" title="ç»“æ„å‹æ¨¡å¼"></a>ç»“æ„å‹æ¨¡å¼</h2><blockquote><p>å¦‚ä½•è®¾è®¡å¯¹è±¡çš„ç»“æ„ã€ç»§æ‰¿å’Œä¾èµ–å…³ç³»ä¼šå½±å“åˆ°åç»­ç¨‹åºçš„ç»´æŠ¤æ€§ã€ä»£ç çš„å¥å£®æ€§ã€è€¦åˆæ€§ç­‰ï¼Œå› æ­¤å¯¹è±¡çš„ç»„æˆä»¥åŠå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å°±æˆäº†å¼€å‘äººå‘˜å…³æ³¨çš„ç„¦ç‚¹</p></blockquote><ol start="3"><li><a href="https://www.tuyrk.cn/imooc/214-proxy-mode">æ¨¡å¼çš„ç§˜å¯†â€”ä»£ç†æ¨¡å¼</a></li><li><a href="https://www.tuyrk.cn/imooc/146-adapter-mode">æ¨¡å¼çš„ç§˜å¯†â€”é€‚é…å™¨æ¨¡å¼</a></li></ol><h2 id="è¡Œä¸ºå‹æ¨¡å¼"><a href="#è¡Œä¸ºå‹æ¨¡å¼" class="headerlink" title="è¡Œä¸ºå‹æ¨¡å¼"></a>è¡Œä¸ºå‹æ¨¡å¼</h2><blockquote><p>å¦‚æœå¯¹è±¡çš„è¡Œä¸ºè®¾è®¡çš„å¥½ï¼Œé‚£ä¹ˆå¯¹è±¡çš„è¡Œä¸ºå°±ä¼šæ›´æ¸…æ™°ï¼Œå®ƒä»¬ä¹‹é—´çš„åä½œæ•ˆç‡å°±ä¼šæé«˜</p></blockquote><ol start="5"><li><a href="https://www.tuyrk.cn/imooc/415-observer-mode">è§‚å¯Ÿè€…æ¨¡å¼</a></li><li><a href="https://www.tuyrk.cn/imooc/257-responsibility-mode">æ¨¡å¼çš„ç§˜å¯†â€”è´£ä»»é“¾æ¨¡å¼</a></li><li><a href="https://www.tuyrk.cn/imooc/165-strategy-mode">æ¨¡å¼çš„ç§˜å¯†â€“ç­–ç•¥æ¨¡å¼</a></li><li><a href="https://www.tuyrk.cn/imooc/145-template-mode">æ¨¡å¼çš„ç§˜å¯†â€”æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a></li></ol><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><ol start="9"><li><a href="https://www.tuyrk.cn/imooc/1180-decorator-mode">è£…é¥°è€…æ¨¡å¼</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1180-è£…é¥°è€…æ¨¡å¼</title>
      <link href="/imooc/1180-decorator-mode/"/>
      <url>/imooc/1180-decorator-mode/</url>
      
        <content type="html"><![CDATA[<p>ç³»åˆ—è¯¾ç¨‹ï¼š<a href="https://www.tuyrk.cn/imooc/18-java-mode/">æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</a></p><blockquote><p><a href="https://www.imooc.com/learn/1180" target="_blank" rel="noopener">https://www.imooc.com/learn/1180</a></p><p>ç®€ä»‹ï¼šè£…é¥°è€…æ¨¡å¼æ˜¯java23ç§è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œ è‹±æ–‡å«Decorator Patternï¼Œåˆå«è£…é¥°è€…æ¨¡å¼ã€‚ è£…é¥°æ¨¡å¼æ˜¯åœ¨ä¸å¿…æ”¹å˜åŸç±»æ–‡ä»¶å’Œä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ã€‚ å®ƒæ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è£…é¥°æ¥åŒ…è£¹çœŸå®çš„å¯¹è±¡ æ”¹å˜äº†ä¼ ç»Ÿç»§æ‰¿å¢å¼ºå¯¹è±¡åŠŸèƒ½æ‰€å¸¦æ¥çš„å¼Šç«¯</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>æœ¬ç« å¯¹æœ¬è¯¾ç¨‹æ‰€å­¦å†…å®¹è¿›è¡Œä»‹ç»ã€‚</p></blockquote><h3 id="1-1-è£…é¥°è€…æ¨¡å¼çš„ç®€ä»‹-03-02"><a href="#1-1-è£…é¥°è€…æ¨¡å¼çš„ç®€ä»‹-03-02" class="headerlink" title="1-1 è£…é¥°è€…æ¨¡å¼çš„ç®€ä»‹ (03:02)"></a>1-1 è£…é¥°è€…æ¨¡å¼çš„ç®€ä»‹ (03:02)</h3><p>è¯¾ç¨‹å¤§çº²</p><blockquote><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è£…é¥°è€…æ¨¡å¼<br>è£…é¥°è€…æ¨¡å¼çš„æ¦‚å¿µåŠé€‚åº”ç¯å¢ƒ<br>è£…é¥°è€…æ¨¡å¼çš„ç»“æ„<br>è£…é¥°è€…æ¨¡å¼çš„å®ä¾‹æ¼”ç¤º<br>è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹<br>æ€»ç»“</p></blockquote><h2 id="ç¬¬2ç« -è£…é¥°è€…æ¨¡å¼æ¦‚å¿µ"><a href="#ç¬¬2ç« -è£…é¥°è€…æ¨¡å¼æ¦‚å¿µ" class="headerlink" title="ç¬¬2ç«  è£…é¥°è€…æ¨¡å¼æ¦‚å¿µ"></a>ç¬¬2ç«  è£…é¥°è€…æ¨¡å¼æ¦‚å¿µ</h2><blockquote><p>æœ¬ç« ä»‹ç»å¦‚ä½•ä½¿ç”¨è£…é¥°è€…æ¨¡å¼ï¼Œä»¥åŠè£…é¥°è€…æ¨¡å¼çš„æ¦‚å¿µå’Œé€‚åº”ç¯å¢ƒã€‚</p></blockquote><h3 id="2-1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è£…é¥°è€…æ¨¡å¼-06-11"><a href="#2-1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è£…é¥°è€…æ¨¡å¼-06-11" class="headerlink" title="2-1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è£…é¥°è€…æ¨¡å¼ (06:11)"></a>2-1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è£…é¥°è€…æ¨¡å¼ (06:11)</h3><p>è€ç‹è±†æµ†æ¡ˆä¾‹ï¼š</p><blockquote><p>è€ç‹è±†æµ†é…æ–¹ï¼šçº¯è±†æµ†ã€çº¢ç³–ã€çº¢è±†ã€ç‰›å¥¶ã€é¸¡è›‹<br>è±†æµ†ç”±çº¯è±†æµ†å’Œå…¶ä»–è¾…æ–™æ··åˆè€Œæˆï¼Œæ–°å¢è¾…æ–™åˆ™å¯ä»¥å¤šå‡ºå¾ˆå¤šç§ç»„åˆï¼ˆä¸€ç§ç»„åˆä¸€ä¸ªå­ç±»ï¼‰ï¼Œæ­¤æ—¶åˆ™ä¼šå‡ºç°ç±»çˆ†ç‚¸çš„æƒ…å†µï¼Œå¯¼è‡´ç¨‹åºéå¸¸è‡ƒè‚¿ã€‚<br>è§£å†³æ–¹æ¡ˆï¼šä¸€ç§è¾…æ–™ä¸€ä¸ªå­ç±»ï¼Œå­ç±»ä¹‹é—´å¯ä»¥ç›¸äº’ç»„åˆæ­é…ã€‚</p></blockquote><h3 id="2-2-è£…é¥°è€…æ¨¡å¼çš„æ¦‚å¿µåŠé€‚åº”ç¯å¢ƒ-03-52"><a href="#2-2-è£…é¥°è€…æ¨¡å¼çš„æ¦‚å¿µåŠé€‚åº”ç¯å¢ƒ-03-52" class="headerlink" title="2-2 è£…é¥°è€…æ¨¡å¼çš„æ¦‚å¿µåŠé€‚åº”ç¯å¢ƒ (03:52)"></a>2-2 è£…é¥°è€…æ¨¡å¼çš„æ¦‚å¿µåŠé€‚åº”ç¯å¢ƒ (03:52)</h3><p>è£…é¥°è€…æ¨¡å¼çš„æ¦‚å¿µ</p><blockquote><p>è£…é¥°è€…æ¨¡å¼åˆååŒ…è£…æ¨¡å¼ã€‚åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±æ‰©å±•åŠŸèƒ½è€Œè¨€ï¼Œå®ƒæ¯”ç”Ÿæˆå­ç±»çš„æ–¹å¼æ›´ä¸ºçµæ´»ã€‚</p></blockquote><p>è£…é¥°è€…æ¨¡å¼çš„é€‚åº”åœºæ™¯</p><blockquote><ul><li>ä»¥åŠ¨æ€çš„æ–¹å¼ç»™å¯¹è±¡æ·»åŠ èŒè´£</li><li>å¤„ç†é‚£äº›å¯ä»¥æ’¤é”€çš„èŒè´£</li><li>å½“é‡‡ç”¨ç”Ÿæˆå­ç±»çš„æ–¹æ³•è¿›è¡Œæ‰©å……æ—¶ï¼Œå¯èƒ½æœ‰å¤§é‡ç‹¬ç«‹çš„æ‰©å±•ï¼Œä¸ºæ”¯æŒæ¯ä¸€ç§ç»„åˆå°†äº§ç”Ÿå¤§é‡çš„å­ç±»ï¼Œä½¿å¾—å­ç±»æ•°é‡çˆ†ç‚¸æ€§å¢é•¿ï¼ˆè€ç‹è±†æµ†æ¡ˆä¾‹ï¼‰</li></ul></blockquote><p>é—®é¢˜ï¼š</p><ol><li><p>ç»§æ‰¿ä¸è£…é¥°è€…æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p></li><li><p>åœ¨å“ªç§åœºæ™¯ä½¿ç”¨ç»§æ‰¿ï¼Œåœ¨å“ªç§åœºæ™¯ä½¿ç”¨è£…é¥°è€…æ¨¡å¼</p></li></ol><h2 id="ç¬¬3ç« -è£…é¥°è€…æ¨¡å¼ç»“æ„"><a href="#ç¬¬3ç« -è£…é¥°è€…æ¨¡å¼ç»“æ„" class="headerlink" title="ç¬¬3ç«  è£…é¥°è€…æ¨¡å¼ç»“æ„"></a>ç¬¬3ç«  è£…é¥°è€…æ¨¡å¼ç»“æ„</h2><blockquote><p>æœ¬ç« ä»‹ç»è£…é¥°è€…æ¨¡å¼çš„ç»“æ„ã€‚</p></blockquote><h3 id="3-1-è£…é¥°è€…æ¨¡å¼çš„ç»„æˆéƒ¨åˆ†-07-35"><a href="#3-1-è£…é¥°è€…æ¨¡å¼çš„ç»„æˆéƒ¨åˆ†-07-35" class="headerlink" title="3-1 è£…é¥°è€…æ¨¡å¼çš„ç»„æˆéƒ¨åˆ† (07:35)"></a>3-1 è£…é¥°è€…æ¨¡å¼çš„ç»„æˆéƒ¨åˆ† (07:35)</h3><p>è£…é¥°è€…æ¨¡å¼çš„ç»“æ„</p><ol><li>æŠ½è±¡ç»„ä»¶ï¼ˆComponentï¼‰ï¼šç»™å‡ºä¸€ä¸ªæŠ½è±¡æ¥å£ï¼Œä»¥è§„èŒƒå‡†å¤‡æ¥æ”¶é™„åŠ è´£ä»»çš„å¯¹è±¡</li><li>è¢«è£…é¥°è€…ï¼ˆConcreteComponentï¼‰ï¼šComponentçš„å…·ä½“å®ç°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦è£…é¥°çš„å…·ä½“å¯¹è±¡</li><li>è£…é¥°è€…ç»„ä»¶ï¼ˆDecoratorï¼‰ï¼šæŒæœ‰ç»„ä»¶ï¼ˆComponentï¼‰å¯¹è±¡çš„å®ä¾‹å¼•ç”¨ï¼Œè¯¥ç±»çš„èŒè´£å°±æ˜¯ä¸ºäº†è£…é¥°å…·ä½“ç»„ä»¶å¯¹è±¡ï¼Œå®šä¹‰çš„åŸºç±»ã€‚</li><li>å…·ä½“è£…é¥°ï¼ˆConcreteDecoratorï¼‰ï¼šè´Ÿè´£ç»™æ„ä»¶å¯¹è±¡è£…é¥°é™„åŠ çš„åŠŸèƒ½ã€‚</li></ol><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gakmgrtweuj30n80hpjs8.jpg" alt="è£…é¥°è€…æ¨¡å¼ç±»å›¾" style="zoom:40%;" /><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gakmip2qglj30nc0hqdg7.jpg" alt="è£…é¥°è€…æ¨¡å¼å®ä¾‹" style="zoom:35%;" /><h2 id="ç¬¬4ç« -è£…é¥°è€…æ¨¡å¼çš„ç®€å•å…¥é—¨"><a href="#ç¬¬4ç« -è£…é¥°è€…æ¨¡å¼çš„ç®€å•å…¥é—¨" class="headerlink" title="ç¬¬4ç«  è£…é¥°è€…æ¨¡å¼çš„ç®€å•å…¥é—¨"></a>ç¬¬4ç«  è£…é¥°è€…æ¨¡å¼çš„ç®€å•å…¥é—¨</h2><blockquote><p>æœ¬ç« ä»‹ç»è£…é¥°è€…æ¨¡å¼å…¥é—¨ã€‚</p></blockquote><h3 id="4-1-è£…é¥°è€…æ¨¡å¼ç®€å•å…¥é—¨-23-09"><a href="#4-1-è£…é¥°è€…æ¨¡å¼ç®€å•å…¥é—¨-23-09" class="headerlink" title="4-1 è£…é¥°è€…æ¨¡å¼ç®€å•å…¥é—¨ (23:09)"></a>4-1 è£…é¥°è€…æ¨¡å¼ç®€å•å…¥é—¨ (23:09)</h3><ol><li><p>æŠ½è±¡ç»„ä»¶-é¥®å“</p><pre><code class="java">public interface Drink {    // é¥®å“ä»·æ ¼    double money();    // é¥®å“å“ç§æè¿°    String desc();}</code></pre></li><li><p>è¢«è£…é¥°è€…-è±†æµ†</p><pre><code class="java">public class Soya implements Drink {    @Override    public double money() {        return 5D;    }    @Override    public String desc() {        return &quot;çº¯è±†æµ†&quot;;    }}</code></pre></li><li><p>è£…é¥°è€…ç»„ä»¶-è£…é¥°å™¨</p><blockquote><ol><li>æŠ½è±¡ç±»</li><li>å®ç°æŠ½è±¡ç»„ä»¶æ¥å£</li><li>æŒæœ‰æŠ½è±¡æ¥å£çš„å¼•ç”¨</li></ol></blockquote><pre><code class="java">public abstract class Decorator implements Drink {    // å®šä¹‰ç§æœ‰çš„é¥®å“æ¥å£å¼•ç”¨    private Drink drink;    public Decorator(Drink drink) {        this.drink = drink;    }    @Override    public double money() {        return drink.money();    }    @Override    public String desc() {        return drink.desc();    }}</code></pre></li><li><p>å…·ä½“è£…é¥°-çº¢è±†</p><pre><code class="java">public class RedBean extends Decorator {    public RedBean(Drink drink) {        super(drink);    }    @Override    public double money() {        return super.money() + 3.2;    }    @Override    public String desc() {        return super.desc() + &quot;+çº¢è±†&quot;;    }}</code></pre></li><li><p>å…·ä½“è£…é¥°-é¸¡è›‹</p><pre><code class="java">public class Egg extends Decorator {    public Egg(Drink drink) {        super(drink);    }    @Override    public double money() {        return super.money() + 3.9;    }    @Override    public String desc() {        return super.desc() + &quot;+é¸¡è›‹&quot;;    }}</code></pre></li><li><p>å…·ä½“è£…é¥°-ç³–</p><pre><code class="java">public class Sugar extends Decorator {    public Sugar(Drink drink) {        super(drink);    }    @Override    public double money() {        return super.money() + 2.1;    }    @Override    public String desc() {        return super.desc() + &quot;+ç³–&quot;;    }}</code></pre></li><li><p>è£…é¥°è€…æ¨¡å¼æµ‹è¯•ç±»</p><pre><code class="java">public class DecoratorTest {    public static void main(String[] args) {        // å¼€å§‹æ­é…        // åˆ›å»ºè±†æµ†å¯¹è±¡        Drink soya = new Soya();        System.out.println(soya.money());        System.out.println(soya.desc());        // å‘çº¯è±†æµ†ä¸­åŠ å…¥çº¢è±†        Drink redBeanSoya = new RedBean(soya);        System.out.println(redBeanSoya.money());        System.out.println(redBeanSoya.desc());        // å‘çº¢è±†è±†æµ†ä¸­åŠ å…¥é¸¡è›‹        Drink redBeanSoyaEgg = new Egg(redBeanSoya);        System.out.println(redBeanSoyaEgg.money());        System.out.println(redBeanSoyaEgg.desc());        // éœ€è¦ç³–è±†æµ†        Drink sugarSoya = new Sugar(soya);        System.out.println(sugarSoya.money());        System.out.println(sugarSoya.desc());    }}</code></pre></li></ol><p>å½“æœ‰æ–°çš„è¾…æ–™å“ç§æ—¶ï¼ˆæ–°å¢å…·ä½“è£…é¥°ï¼‰ï¼š</p><ol><li><p>å…·ä½“è£…é¥°-è¥¿ç“œ</p><pre><code class="java">public class Watermelon extends Decorator {    public Watermelon(Drink drink) {        super(drink);    }    @Override    public double money() {        return super.money() + 4.0;    }    @Override    public String desc() {        return super.desc() + &quot;+è¥¿ç“œ&quot;;    }}</code></pre></li><li><p>æ–°å¢å…·ä½“è£…é¥°-åˆ›å»ºè¥¿ç“œå¯¹è±¡</p><pre><code class="java">Watermelon watermelonSugarSoya = new Watermelon(sugarSoya);System.out.println(watermelonSugarSoya.money());System.out.println(watermelonSugarSoya.desc());</code></pre></li></ol><p>å½“æœ‰æ–°çš„äº§å“æ—¶ï¼ˆæ–°å¢è¢«è£…é¥°è€…ï¼‰ï¼š</p><ol><li><p>è¢«è£…é¥°è€…-æœæ±</p><pre><code class="java">public class Fruit implements Drink {    @Override    public double money() {        return 6D;    }    @Override    public String desc() {        return &quot;æœæ±&quot;;    }}</code></pre></li><li><p>æ–°å¢è¢«è£…é¥°è€…-æ­é…æœæ±</p><pre><code class="java">Drink fruit = new Fruit();System.out.println(fruit.money());System.out.println(fruit.desc());Drink eggFruit = new Egg(fruit);System.out.println(eggFruit.money());System.out.println(eggFruit.desc());</code></pre></li></ol><h2 id="ç¬¬5ç« -è£…é¥°è€…æ¨¡å¼çš„çœŸå®åº”ç”¨"><a href="#ç¬¬5ç« -è£…é¥°è€…æ¨¡å¼çš„çœŸå®åº”ç”¨" class="headerlink" title="ç¬¬5ç«  è£…é¥°è€…æ¨¡å¼çš„çœŸå®åº”ç”¨"></a>ç¬¬5ç«  è£…é¥°è€…æ¨¡å¼çš„çœŸå®åº”ç”¨</h2><blockquote><p>æœ¬ç« ä»‹ç»è£…é¥°è€…æ¨¡å¼çš„çœŸå®åº”ç”¨ï¼ŒåŒ…æ‹¬åœºæ™¯åˆ†æå’Œå¦‚ä½•è§£å†³ä¹±ç é—®é¢˜ã€‚</p></blockquote><h3 id="5-1-è£…é¥°è€…æ¨¡å¼çœŸå®åœºæ™¯æ¡ˆä¾‹åˆ†æ-04-44"><a href="#5-1-è£…é¥°è€…æ¨¡å¼çœŸå®åœºæ™¯æ¡ˆä¾‹åˆ†æ-04-44" class="headerlink" title="5-1 è£…é¥°è€…æ¨¡å¼çœŸå®åœºæ™¯æ¡ˆä¾‹åˆ†æ (04:44)"></a>5-1 è£…é¥°è€…æ¨¡å¼çœŸå®åœºæ™¯æ¡ˆä¾‹åˆ†æ (04:44)</h3><p>çœŸå®åœºæ™¯æ¡ˆä¾‹åˆ†æï¼šè§£å†³ä¹±ç é—®é¢˜</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gakpwx8z5bj30yk0ih0u1.jpg" alt="å®¢æˆ·ç«¯æœåŠ¡å™¨ä¹±ç é—®é¢˜" style="zoom:35%;" /><h3 id="5-2-ä¹±ç äº§ç”ŸåŸå› ä»¥åŠæ™®é€šè§£å†³æ–¹å¼-20-02"><a href="#5-2-ä¹±ç äº§ç”ŸåŸå› ä»¥åŠæ™®é€šè§£å†³æ–¹å¼-20-02" class="headerlink" title="5-2 ä¹±ç äº§ç”ŸåŸå› ä»¥åŠæ™®é€šè§£å†³æ–¹å¼ (20:02)"></a>5-2 ä¹±ç äº§ç”ŸåŸå› ä»¥åŠæ™®é€šè§£å†³æ–¹å¼ (20:02)</h3><ol><li><p>åœ¨pom.xmlæ·»åŠ mavenä¾èµ–</p><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre></li><li><p>é…ç½®é¡¹ç›®å‚æ•°</p><pre><code class="properties"># application.propertiesspring.http.encoding.charset=ISO-8859-1# freemarkeré™æ€èµ„æºé…ç½®spring.freemarker.charset=UTF-8spring.freemarker.suffix=.html</code></pre></li><li><p>å®ç°formè¡¨å•</p><pre><code class="html">&lt;!--templates/html/form.html--&gt;&lt;form action=&quot;/code&quot; method=&quot;post&quot;&gt;    å§“å:&lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;&lt;br&gt;    çˆ±å¥½:&lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;æŠ½çƒŸ&quot;/&gt;æŠ½çƒŸ        &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;å–é…’&quot;/&gt;å–é…’        &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;çƒ«å¤´&quot;/&gt;çƒ«å¤´&lt;br&gt;    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/form&gt;</code></pre></li><li><pre><code class="java">@Controller@RequestMapping(&quot;/&quot;)public class CodeController {    @GetMapping(&quot;form&quot;)    public String form() {        return &quot;html/form&quot;;    }    @PostMapping(&quot;code&quot;)    public String code(HttpServletRequest request) {        // è·å–å§“å        String username = request.getParameter(&quot;username&quot;);        System.out.println(username);// Ã§Â¥ÂÃ§Â§Â˜Ã§ÂšÂ„Ã¥Â°ÂÃ¥Â²Â›Ã¥Â²Â›        // è·å–çˆ±å¥½        String[] hobbies = request.getParameterValues(&quot;hobby&quot;);        System.out.println(Arrays.toString(hobbies));// [Ã¦ÂŠÂ½Ã§ÂƒÂŸ, Ã¥Â–ÂÃ©Â…Â’, Ã§ÂƒÂ«Ã¥Â¤Â´]        return &quot;&quot;;    }}</code></pre></li></ol><p>è§£å†³ä¹±ç æ™®é€šæ–¹å¼</p><ol><li><p>é€šè¿‡getBytesè·å–ISO-8859-1çš„byteï¼Œå†è¿›è¡Œè½¬ç UTF-8</p><p>ç¼–ç è½¬æ¢å·¥å…·ç±»</p><pre><code class="java">public class CodeUtil {    /**     * ISO-8859-1è½¬UTF-8ç¼–ç      *     * @param codename éœ€è¦è¿›è¡Œè½¬ç çš„å­—ç¬¦ä¸²     * @return è½¬ç åçš„å­—ç¬¦ä¸²     */    public static String newCode(String codename) {        byte[] bytes = codename.getBytes(StandardCharsets.ISO_8859_1);        return new String(bytes, StandardCharsets.UTF_8);    }}</code></pre><pre><code class="java">System.out.println(CodeUtil.newCode(username));// ç¥ç§˜çš„å°å²›å²›for (String hobby : hobbies) {    System.out.println(CodeUtil.newCode(hobby));// æŠ½çƒŸ, å–é…’, çƒ«å¤´}</code></pre></li></ol><h3 id="5-3-è£…é¥°è€…æ¨¡å¼è§£å†³ä¹±ç é—®é¢˜-16-05"><a href="#5-3-è£…é¥°è€…æ¨¡å¼è§£å†³ä¹±ç é—®é¢˜-16-05" class="headerlink" title="5-3 è£…é¥°è€…æ¨¡å¼è§£å†³ä¹±ç é—®é¢˜ (16:05)"></a>5-3 è£…é¥°è€…æ¨¡å¼è§£å†³ä¹±ç é—®é¢˜ (16:05)</h3><ol><li><p>æŠ½è±¡ç»„ä»¶ï¼šServletRequest</p></li><li><p>è¢«è£…é¥°è€…ï¼šHttpServletRequest</p></li><li><p>è£…é¥°è€…ç»„ä»¶ï¼ˆè£…é¥°å™¨ï¼‰ï¼šDecorators</p><blockquote><p>éœ€è¦ç»§æ‰¿æ¨¡æ¿ç±»</p></blockquote><pre><code class="java">public class Decorators extends HttpServletRequestWrapper {    // æŒæœ‰æ¥å£çš„å¼•ç”¨    HttpServletRequest request;    public Decorators(HttpServletRequest request) {        super(request);        this.request = request;    }    @Override    public String getParameter(String name) {        return super.getParameter(name);    }    @Override    public String[] getParameterValues(String name) {        return super.getParameterValues(name);    }}</code></pre></li><li><p>å…·ä½“è£…é¥°-getParameter</p><blockquote><p>éœ€è¦ç»§æ‰¿è£…é¥°å™¨çš„ç±»</p></blockquote><pre><code class="java">public class Parameter extends Decorators {    public Parameter(HttpServletRequest request) {        super(request);    }    // å¯¹getParameterè¿›è¡Œå¢å¼º    @Override    public String getParameter(String name) {        String value = super.getParameter(name);        // è§£å†³ä¹±ç         byte[] bytes = value.getBytes(StandardCharsets.ISO_8859_1);        return new String(bytes, StandardCharsets.UTF_8);    }}</code></pre></li><li><p>å…·ä½“è£…é¥°-getParameterValues</p><pre><code class="java">public class ParameterValues extends Decorators {    public ParameterValues(HttpServletRequest request) {        super(request);    }    // å¯¹getParameterValuesè¿›è¡Œå¢å¼º    @Override    public String[] getParameterValues(String name) {        String[] values = super.getParameterValues(name);        for (int i = 0; i &lt; values.length; i++) {            byte[] bytes = values[i].getBytes(StandardCharsets.ISO_8859_1);            values[i] = new String(bytes, StandardCharsets.UTF_8);        }        return values;    }}</code></pre></li><li><p>ç¼–ç è½¬æ¢Filter</p><pre><code class="java">@WebFilter(filterName = &quot;code&quot;, urlPatterns = &quot;/code&quot;)public class CodeFilter implements Filter {    @Override    public void init(FilterConfig filterConfig) throws ServletException {    }    @Override    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {        HttpServletRequest request = (HttpServletRequest) servletRequest;        HttpServletRequest codeRequest = new Parameter(new ParameterValues(request));        filterChain.doFilter(codeRequest, servletResponse);    }    @Override    public void destroy() {    }}</code></pre></li><li><p>åœ¨å¯åŠ¨ç±»Application.javaæ·»åŠ <code>@ServletComponentScan</code>æ³¨è§£</p></li></ol><h3 id="5-4-è£…é¥°è€…æ¨¡å¼çš„ä¼˜åŒ–å†™æ³•-07-53"><a href="#5-4-è£…é¥°è€…æ¨¡å¼çš„ä¼˜åŒ–å†™æ³•-07-53" class="headerlink" title="5-4 è£…é¥°è€…æ¨¡å¼çš„ä¼˜åŒ–å†™æ³• (07:53)"></a>5-4 è£…é¥°è€…æ¨¡å¼çš„ä¼˜åŒ–å†™æ³• (07:53)</h3><p>ç”±è§£å†³ç¼–ç æ¡ˆä¾‹å¯ä»¥å¾—å‡ºï¼šè£…é¥°è€…æ¨¡å¼åŠŸèƒ½å¯æ‹†å¸</p><ol><li><p>å…·ä½“è£…é¥°</p><pre><code class="java">public class NewDecorator extends HttpServletRequestWrapper {    // æŒæœ‰æ¥å£çš„å¼•ç”¨    private HttpServletRequest request;    public NewDecorator(HttpServletRequest request) {        super(request);        this.request = request;    }    // å¯¹getParameterè¿›è¡Œå¢å¼º    @Override    public String getParameter(String name) {        String value = super.getParameter(name);        byte[] bytes = value.getBytes(StandardCharsets.ISO_8859_1);        return new String(bytes, StandardCharsets.UTF_8);    }    // å¯¹getParameterValuesè¿›è¡Œå¢å¼º    @Override    public String[] getParameterValues(String name) {        String[] values = super.getParameterValues(name);        for (int i = 0; i &lt; values.length; i++) {            byte[] bytes = values[i].getBytes(StandardCharsets.ISO_8859_1);            values[i] = new String(bytes, StandardCharsets.UTF_8);        }        return values;    }}</code></pre></li><li><p>ç¼–ç è½¬æ¢doFilter()æ–¹æ³•</p><pre><code class="java">public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {    HttpServletRequest request = (HttpServletRequest) servletRequest;    // ç®€åŒ–æ–¹å¼    HttpServletRequest codeRequest = new NewDecorator(request);    filterChain.doFilter(codeRequest, servletResponse);}</code></pre></li></ol><h3 id="5-5-ioæµä¸­çš„è£…é¥°è€…æ¨¡å¼çš„ç®€å•ä»‹ç»-06-30"><a href="#5-5-ioæµä¸­çš„è£…é¥°è€…æ¨¡å¼çš„ç®€å•ä»‹ç»-06-30" class="headerlink" title="5-5 ioæµä¸­çš„è£…é¥°è€…æ¨¡å¼çš„ç®€å•ä»‹ç» (06:30)"></a>5-5 ioæµä¸­çš„è£…é¥°è€…æ¨¡å¼çš„ç®€å•ä»‹ç» (06:30)</h3><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1galmv0frywj31q20ri109.jpg" alt="Java IOæµ" style="zoom:30%;" /><p>Javaä¸­IOæµçš„è£…é¥°è€…æ¨¡å¼</p><blockquote><p>BufferedInputStreamè¾ƒFileInputStreamè¯»å–é€Ÿåº¦å¿«ã€‚</p></blockquote><pre><code class="java">// æ„ä»¶æŠ½è±¡è·¯å¾„File file = new File(&quot;aaa.txt&quot;);// å…¬å…±fileå®ä¾‹æ„ä»¶aaa.txtæ–‡ä»¶FileInputStream fis = new FileInputStream(file);// ä½¿ç”¨ç¼“å†²è¾“å…¥æµBufferedInputStream bis = new BufferedInputStream(fis);</code></pre><h2 id="ç¬¬6ç« -è£…é¥°è€…æ¨¡å¼ä¼˜ç¼ºç‚¹åŠè¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬6ç« -è£…é¥°è€…æ¨¡å¼ä¼˜ç¼ºç‚¹åŠè¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬6ç«  è£…é¥°è€…æ¨¡å¼ä¼˜ç¼ºç‚¹åŠè¯¾ç¨‹æ€»ç»“"></a>ç¬¬6ç«  è£…é¥°è€…æ¨¡å¼ä¼˜ç¼ºç‚¹åŠè¯¾ç¨‹æ€»ç»“</h2><blockquote><p>æœ¬ç« ä»‹ç»è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ï¼Œå¹¶å¯¹è¯¾ç¨‹å†…å®¹è¿›è¡Œæ€»ç»“ã€‚</p></blockquote><h3 id="6-1-è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹-03-10"><a href="#6-1-è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹-03-10" class="headerlink" title="6-1 è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ (03:10)"></a>6-1 è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ (03:10)</h3><p>ä¼˜ç‚¹ï¼š</p><ul><li>ç›®çš„åœ¨äºæ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ã€‚è£…é¥°è€…æ¨¡å¼æä¾›æ¯”ç»§æ‰¿æ›´å¥½çš„çµæ´»æ€§<br>è£…é¥°æ˜¯åŠ¨æ€çš„ï¼Œè¿è¡Œæ—¶å¯ä»¥ä¿®æ”¹çš„ï¼›ç»§æ‰¿æ˜¯é™æ€çš„ï¼Œç¼–è¯‘æœŸä¾¿å·²ç¡®å®šå¥½</li><li>é€šè¿‡ä½¿ç”¨ä¸åŒçš„è£…é¥°ç±»åŠå¯¹å®ƒä»¬çš„æ’åˆ—ç»„åˆï¼Œå¯ä»¥åˆ›é€ å‡ºè®¸å¤šä¸åŒè¡Œä¸ºçš„ç»„åˆ</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>äº§ç”Ÿnewå¾ˆå¤šçš„å°å¯¹è±¡ï¼Œå¤§é‡çš„å°å¯¹è±¡ä¼šå ç”¨å†…å­˜</li><li>ç»„åˆæ–¹å¼å¾ˆå¤šï¼Œå¾ˆå®¹æ˜“å‡ºé”™</li></ul><h3 id="6-2-è£…é¥°è€…æ¨¡å¼çš„æ€»ç»“-02-47"><a href="#6-2-è£…é¥°è€…æ¨¡å¼çš„æ€»ç»“-02-47" class="headerlink" title="6-2 è£…é¥°è€…æ¨¡å¼çš„æ€»ç»“ (02:47)"></a>6-2 è£…é¥°è€…æ¨¡å¼çš„æ€»ç»“ (02:47)</h3><ul><li>ç†Ÿæ‚‰è£…é¥°è€…æ¨¡å¼çš„ç»“æ„<br>æŠ½è±¡ç»„ä»¶ã€è¢«è£…é¥°è€…ã€è£…é¥°å™¨ã€å…·ä½“è£…é¥°</li><li>äº†è§£è£…é¥°è€…æ¨¡å¼åœ¨ä½•ç§åœºæ™¯ä½¿ç”¨<br>å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå¢å¼ºã€åŠŸèƒ½è‡ªç”±ç»„åˆæ­é…</li><li>äº†è§£è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>145-æ¨¡å¼çš„ç§˜å¯†---æ¨¡æ¿æ–¹æ³•æ¨¡å¼</title>
      <link href="/imooc/145-template-mode/"/>
      <url>/imooc/145-template-mode/</url>
      
        <content type="html"><![CDATA[<p>ç³»åˆ—è¯¾ç¨‹ï¼š<a href="https://www.tuyrk.cn/imooc/18-java-mode/">æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</a></p><blockquote><p><a href="http://www.imooc.com/learn/145" target="_blank" rel="noopener">http://www.imooc.com/learn/145</a></p><p>ç®€ä»‹ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯åœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚é€šè¿‡æœ¬è§†é¢‘ï¼Œä½ å¯ä»¥äº†è§£ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå¦‚ä½•ç”¨ Java è¯­è¨€å®ç°æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚@Arthur å°†ç”¨ç®€å•ç”ŸåŠ¨çš„ä¾‹å­å¸¦ä½ é¢†ç•¥æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„çœŸæ„ï¼Œæœ€åè¿˜å°†ç”¨å®é™…çš„è¡Œä¸šæ¡ˆä¾‹å‘Šè¯‰ä½ æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„å¼ºå¤§åŠŸèƒ½ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -æ¨¡æ¿æ–¹æ³•æ¨¡å¼åˆæ¢"><a href="#ç¬¬1ç« -æ¨¡æ¿æ–¹æ³•æ¨¡å¼åˆæ¢" class="headerlink" title="ç¬¬1ç«  æ¨¡æ¿æ–¹æ³•æ¨¡å¼åˆæ¢"></a>ç¬¬1ç«  æ¨¡æ¿æ–¹æ³•æ¨¡å¼åˆæ¢</h2><blockquote><p>æœ¬ç« é€šè¿‡å®é™…ç”Ÿæ´»ä¸­çš„ä¾‹å­å¼•å‡ºæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„å®šä¹‰ï¼Œé€šè¿‡å’–å•¡ä¸èŒ¶çš„æ•…äº‹ï¼Œå¸¦é¢†å¤§å®¶è¿›å…¥æ¨¡æ¿æ–¹æ³•çš„ä¸–ç•Œ</p></blockquote><h3 id="1-1-ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼-09-36"><a href="#1-1-ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼-09-36" class="headerlink" title="1-1 ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (09:36)"></a>1-1 ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (09:36)</h3><p>å†…å®¹ä»‹ç»</p><blockquote><p>ä»€ä¹ˆæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼<br>å¦‚ä½•å®ç°æ¨¡æ¿æ–¹æ³•æ¨¡å¼<br>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç‰¹ç‚¹<br>æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨é¡¹ç›®ä¸­çš„åº”ç”¨</p></blockquote><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</p><blockquote><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªæ“ä½œçš„ç®—æ³•æ¡†æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ï¼Œä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•ç»“æ„çš„åŒæ—¶å°±é‡æ–°å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚</p></blockquote><p>æ¡ˆä¾‹ä»‹ç»ï¼šæç¥é¥®æ–™çš„é…ç½®æ¨¡æ¿</p><blockquote><ol><li>æŠŠæ°´ç…®æ²¸ï¼ˆboil waterï¼‰</li><li>æ³¡é¥®æ–™ï¼ˆbrewï¼‰</li><li>æŠŠé¥®æ–™å€’è¿›æ¯å­ï¼ˆpour in cupï¼‰</li><li>åŠ è°ƒå‘³æ–™ï¼ˆadd condimentsï¼‰</li></ol></blockquote><h2 id="ç¬¬2ç« -æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä»£ç å®ç°"><a href="#ç¬¬2ç« -æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä»£ç å®ç°" class="headerlink" title="ç¬¬2ç«  æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä»£ç å®ç°"></a>ç¬¬2ç«  æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä»£ç å®ç°</h2><blockquote><p>æœ¬ç« é€šè¿‡ Java ä»£ç å…·ä½“æ¼”ç¤ºäº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„å®ç°</p></blockquote><h3 id="2-1-ç”¨æŠ½è±¡åŸºç±»å®šä¹‰æ¡†æ¶-08-17"><a href="#2-1-ç”¨æŠ½è±¡åŸºç±»å®šä¹‰æ¡†æ¶-08-17" class="headerlink" title="2-1 ç”¨æŠ½è±¡åŸºç±»å®šä¹‰æ¡†æ¶ (08:17)"></a>2-1 ç”¨æŠ½è±¡åŸºç±»å®šä¹‰æ¡†æ¶ (08:17)</h3><p>ä»£ç ç¼–å†™</p><ol><li><p>æŠ½è±¡åŸºç±»ï¼Œä¸ºæ‰€æœ‰å­ç±»æä¾›ä¸€ä¸ªç®—æ³•æ¡†æ¶ã€‚æç¥é¥®æ–™</p><pre><code class="java">public abstract class RefreshBeverage {    // åˆ¶å¤‡é¥®æ–™çš„æ¨¡æ¿æ–¹æ³•    // å°è£…äº†æ‰€æœ‰å­ç±»å…±åŒéµå¾ªçš„ç®—æ³•æ¡†æ¶    public final void prepareBeverageTemplate() {        // æ­¥éª¤ä¸€ï¼šå°†æ°´ç…®æ²¸        boilWater();        // æ­¥éª¤äºŒï¼šæ³¡åˆ¶é¥®æ–™        brew();        // æ­¥éª¤ä¸‰ï¼šå°†é¥®æ–™å€’å…¥æ¯ä¸­        pourInCup();        // æ­¥éª¤å››ï¼šåŠ å…¥è°ƒå‘³æ–™        addCondiments();    }    // åŸºæœ¬æ–¹æ³•ï¼Œå°†æ°´ç…®æ²¸    private void boilWater() {        System.out.println(&quot;å°†æ°´ç…®æ²¸&quot;);    }    // æŠ½è±¡çš„åŸºæœ¬æ–¹æ³•ï¼Œæ³¡åˆ¶é¥®æ–™    protected abstract void brew();    // åŸºæœ¬æ–¹æ³•ï¼Œå°†é¥®æ–™å€’å…¥æ¯ä¸­    private void pourInCup() {        System.out.println(&quot;å°†é¥®æ–™å€’å…¥æ¯ä¸­&quot;);    }    // æŠ½è±¡çš„åŸºæœ¬æ–¹æ³•ï¼ŒåŠ å…¥è°ƒå‘³æ–™    protected abstract void addCondiments();}</code></pre></li></ol><h3 id="2-2-å…·ä½“å­ç±»å®ç°å»¶è¿Ÿæ­¥éª¤-08-31"><a href="#2-2-å…·ä½“å­ç±»å®ç°å»¶è¿Ÿæ­¥éª¤-08-31" class="headerlink" title="2-2 å…·ä½“å­ç±»å®ç°å»¶è¿Ÿæ­¥éª¤ (08:31)"></a>2-2 å…·ä½“å­ç±»å®ç°å»¶è¿Ÿæ­¥éª¤ (08:31)</h3><ol><li><p>å…·ä½“å­ç±»ï¼Œæä¾›äº†å’–å•¡çš„å…·ä½“å®ç°</p><pre><code class="java">public class Coffee extends RefreshBeverage {    @Override    protected void brew() {        System.out.println(&quot;ç”¨æ²¸æ°´å†²æ³¡å’–å•¡&quot;);    }    @Override    protected void addCondiments() {        System.out.println(&quot;åŠ å…¥ç³–å’Œç‰›å¥¶&quot;);    }}</code></pre></li><li><p>å…·ä½“å­ç±»ï¼Œæä¾›äº†åˆ¶å¤‡èŒ¶çš„å…·ä½“å®ç°</p><pre><code class="java">public class Tea extends RefreshBeverage {    @Override    protected void brew() {        System.out.println(&quot;ç”¨80åº¦çš„çƒ­æ°´æµ¸æ³¡èŒ¶å¶5åˆ†é’Ÿ&quot;);    }    @Override    protected void addCondiments() {        System.out.println(&quot;åŠ å…¥æŸ æª¬&quot;);    }}</code></pre></li><li><p>æµ‹è¯•ç±»</p><pre><code class="java">public class RefreshReverageTest {    public static void main(String[] args) {        System.out.println(&quot;åˆ¶å¤‡å’–å•¡...&quot;);        RefreshBeverage coffee = new Coffee();        coffee.prepareBeverageTemplate();        System.out.println(&quot;å’–å•¡å¥½äº†ï¼&quot;);        System.out.println(&quot;================&quot;);        System.out.println(&quot;åˆ¶å¤‡èŒ¶...&quot;);        RefreshBeverage tea = new Tea();        tea.prepareBeverageTemplate();        System.out.println(&quot;èŒ¶å¥½äº†ï¼&quot;);    }}</code></pre></li></ol><h3 id="2-3-é’©å­ä½¿å­ç±»æ›´çµæ´»-06-47"><a href="#2-3-é’©å­ä½¿å­ç±»æ›´çµæ´»-06-47" class="headerlink" title="2-3 é’©å­ä½¿å­ç±»æ›´çµæ´» (06:47)"></a>2-3 é’©å­ä½¿å­ç±»æ›´çµæ´» (06:47)</h3><p>ä¸šåŠ¡åœºæ™¯</p><blockquote><p>ç›®å‰çš„æç¥é¥®æ–™çš„æ­¥éª¤æ˜¯å›ºå®šçš„ï¼Œå½“æœ‰äº›äººä¸éœ€è¦åŠ å…¥è°ƒå‘³æ–™æ—¶ï¼Œä½¿ç”¨é’©å­æ–¹æ³•è¿›è¡Œä¸ªæ€§åŒ–æ‰©å±•</p></blockquote><p>ä»£ç ç¼–å†™</p><ol><li><p>æŠ½è±¡åŸºç±»ï¼Œä¸ºæ‰€æœ‰å­ç±»æä¾›ä¸€ä¸ªç®—æ³•æ¡†æ¶ã€‚æç¥é¥®æ–™</p><pre><code class="java">public abstract class RefreshBeverage {    // åˆ¶å¤‡é¥®æ–™çš„æ¨¡æ¿æ–¹æ³•    // å°è£…äº†æ‰€æœ‰å­ç±»å…±åŒéµå¾ªçš„ç®—æ³•æ¡†æ¶    public final void prepareBeverageTemplate() {        // æ­¥éª¤ä¸€ï¼šå°†æ°´ç…®æ²¸        boilWater();        // æ­¥éª¤äºŒï¼šæ³¡åˆ¶é¥®æ–™        brew();        // æ­¥éª¤ä¸‰ï¼šå°†é¥®æ–™å€’å…¥æ¯ä¸­        pourInCup();        // æ­¥éª¤å››ï¼šåŠ å…¥è°ƒå‘³æ–™        if (isCustomerWantsCondiments()) {            addCondiments();        }    }    // hookæ–¹æ³•ï¼ˆé’©å­å‡½æ•°ï¼‰æä¾›ä¸€ä¸ªé»˜è®¤æˆ–ç©ºçš„å®ç°ï¼Œå…·ä½“çš„å­ç±»å¯ä»¥è‡ªè¡Œå†³å®šæ˜¯å¦æŒ‚é’©ä»¥åŠå¦‚ä½•æŒ‚é’©    // è¯¢é—®ç”¨æˆ·æ˜¯å¦åŠ å…¥è°ƒæ–™    protected boolean isCustomerWantsCondiments() {        return true;// é»˜è®¤éœ€è¦åŠ å…¥è°ƒå‘³æ–™    }    // åŸºæœ¬æ–¹æ³•ï¼Œå°†æ°´ç…®æ²¸    protected void boilWater() {        System.out.println(&quot;å°†æ°´ç…®æ²¸&quot;);    }    // æŠ½è±¡çš„åŸºæœ¬æ–¹æ³•ï¼Œæ³¡åˆ¶é¥®æ–™    protected abstract void brew();    // åŸºæœ¬æ–¹æ³•ï¼Œå°†é¥®æ–™å€’å…¥æ¯ä¸­    private void pourInCup() {        System.out.println(&quot;å°†é¥®æ–™å€’å…¥æ¯ä¸­&quot;);    }    // æŠ½è±¡çš„åŸºæœ¬æ–¹æ³•ï¼ŒåŠ å…¥è°ƒå‘³æ–™    protected abstract void addCondiments();}</code></pre></li><li><p>å…·ä½“å­ç±»ï¼Œæä¾›äº†åˆ¶å¤‡èŒ¶çš„å…·ä½“å®ç°</p><pre><code class="java">public class Tea extends RefreshBeverage {    // å­ç±»é€šè¿‡è¦†ç›–çš„å½¢å¼é€‰æ‹©æŒ‚è½½é’©å­å‡½æ•°    @Override    protected boolean isCustomerWantsCondiments() {        return false;    }    @Override    protected void brew() {        System.out.println(&quot;ç”¨80åº¦çš„çƒ­æ°´æµ¸æ³¡èŒ¶å¶5åˆ†é’Ÿ&quot;);    }    @Override    protected void addCondiments() {        System.out.println(&quot;åŠ å…¥æŸ æª¬&quot;);    }}</code></pre></li></ol><h2 id="ç¬¬3ç« -æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ€»ç»“"><a href="#ç¬¬3ç« -æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ€»ç»“" class="headerlink" title="ç¬¬3ç«  æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ€»ç»“"></a>ç¬¬3ç«  æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ€»ç»“</h2><blockquote><p>æœ¬ç« æ€»ç»“äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„å®ç°è¦ç´ ï¼Œä»‹ç»äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨è¡Œä¸šä¸­çš„åº”ç”¨æ¡ˆä¾‹ã€‚</p></blockquote><h3 id="3-1-æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ€»ç»“-10-12"><a href="#3-1-æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ€»ç»“-10-12" class="headerlink" title="3-1 æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ€»ç»“ (10:12)"></a>3-1 æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ€»ç»“ (10:12)</h3><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„å®ç°è¦ç´ åˆ†æ</p><blockquote><p>æŠ½è±¡åŸºç±»</p><ol><li><p>åŸºæœ¬æ–¹æ³•ï¼šå¯¹å„ç§å…·ä½“å­ç±»è€Œè¨€æ˜¯ç›¸åŒï¼Œå…·æœ‰å…±æ€§çš„æ­¥éª¤</p></li><li><p>æŠ½è±¡æ–¹æ³•ï¼šåªçŸ¥é“å…·ä½“åŸåˆ™ï¼Œè€Œä¸çŸ¥é“å®ç°ç»†èŠ‚ï¼Œéœ€è¦å»¶è¿Ÿåˆ°å­ç±»å®ç°çš„æ­¥éª¤</p></li><li><p>é’©å­æ–¹æ³•ï¼šåœ¨åŸºç±»ä¸­æä¾›äº†ä¸€ä¸ªé»˜è®¤æˆ–ç©ºçš„å®ç°ï¼Œå­ç±»å¯é€šè¿‡è¦†ç›–çš„å½¢å¼é€‰æ‹©æŒ‚è½½é’©å­å‡½æ•°</p></li><li><p>æ¨¡æ¿æ–¹æ³•ï¼šTemplateæ–¹æ³•ï¼ˆfinalï¼‰ï¼Œå°†åŸºæœ¬æ–¹æ³•ã€æŠ½è±¡æ–¹æ³•ã€é’©å­æ–¹æ³•æŒ‰ç…§ä¸šåŠ¡é€»è¾‘çš„è¦æ±‚ï¼Œæ±‡æ€»è€Œæˆä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ã€‚<br>ä¸€å®šè¦å£°æ˜ä¸ºfinalï¼Œä»¥é˜²æ­¢è¢«å­ç±»å¤å†™ã€‚å­ç±»å¯æ›¿æ¢çˆ¶ç±»ä¸­çš„å¯å˜é€»è¾‘ï¼Œä½†ä¸èƒ½æ”¹å˜æ•´ä½“é€»è¾‘ç»“æ„</p></li></ol><p>å…·ä½“å­ç±»</p><ol><li>å®ç°åŸºç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼šä»¥æä¾›ä¸ªæ€§åŒ–çš„ã€å…·ä½“çš„ã€ç‹¬ç‰¹çš„å®ç°</li><li>è¦†ç›–é’©å­æ–¹æ³•ï¼šæ›´åŠ ä¸ªæ€§åŒ–çš„å½±å“æ¨¡æ¿æ–¹æ³•å±€éƒ¨çš„è¡Œä¸º</li></ol></blockquote><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„å®ç°è¦ç´ </p><blockquote><p>å‡†å¤‡ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå°†éƒ¨åˆ†é€»è¾‘ä»¥å…·ä½“æ–¹æ³•çš„å½¢å¼å®ç°ï¼Œç„¶åå£°æ˜ä¸€äº›æŠ½è±¡æ–¹æ³•äº¤ç”±å­ç±»å®ç°å‰©ä½™é€»è¾‘ï¼Œç”¨é’©å­æ–¹æ³•ç»™ä¸å­ç±»æ›´å¤§çš„çµæ´»æ€§ã€‚æœ€åå°†æ–¹æ³•æ±‡æ€»æ„æˆä¸€ä¸ªä¸å¯æ”¹å˜çš„æ¨¡æ¿æ–¹æ³•ã€‚</p></blockquote><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„é€‚ç”¨åœºæ™¯</p><blockquote><ol><li>ç®—æ³•æˆ–æ“ä½œéµå¾ªç›¸ä¼¼çš„é€»è¾‘</li><li>é‡æ„æ—¶ï¼ˆæŠŠç›¸åŒçš„ä»£ç æŠ½å–åˆ°çˆ¶ç±»ä¸­ï¼‰</li><li>é‡è¦ã€å¤æ‚çš„ç®—æ³•ï¼Œæ ¸å¿ƒç®—æ³•è®¾è®¡ä¸ºæ¨¡æ¿ç®—æ³•</li></ol></blockquote><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä¼˜ç‚¹</p><blockquote><p>å°è£…æ€§å¥½ï¼šå°è£…äº†ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶ï¼Œå°†ç®—æ³•çš„å…·ä½“æ­¥éª¤å°è£…æˆä¸€ä¸ªé€šç”¨çš„æ¨¡æ¿æ–¹æ³•<br>å¤ç”¨æ€§å¥½ï¼šæŠ½å–å…±æ€§çš„æ–¹å¼ï¼Œå¤§éƒ¨åˆ†ä»£ç åœ¨çˆ¶ç±»å®ç°ï¼Œä¸ªæ€§åŒ–é€»è¾‘ç”±å­ç±»å®ç°<br>å±è”½ç»†èŠ‚ï¼šå¾ˆå¤šå…±æ€§ä½œä¸ºç§æœ‰æ–¹æ³•åœ¨æŠ½è±¡åŸºç±»ä¸­å®ç°ï¼Œå¯¹å­ç±»å±è”½äº†å¾ˆå¤šç»†èŠ‚<br>ä¾¿äºç»´æŠ¤ï¼šå¥½çš„å¤ç”¨æ€§å¯ä»¥å‡å°‘ä»£ç æ¡†æ¶çš„è®¾è®¡ï¼Œæ”¯æŒæ›´å¥½çµæ´»çš„ä¸šåŠ¡å˜æ›´</p></blockquote><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç¼ºç‚¹</p><blockquote><p>Javaå•ç»§æ‰¿ã€‚ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿äºä¸€ä¸ªçˆ¶ç±»<br>æ¯ä¸€ä¸ªä¸åŒçš„å®ç°éƒ½éœ€è¦ä¸€ä¸ªå­ç±»æ¥å®ç°ï¼Œå¯¼è‡´ç±»çš„ä¸ªæ•°å¢åŠ ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ åºå¤§</p></blockquote><h3 id="3-2-è¡Œä¸šæ¡ˆä¾‹åˆ†äº«-03-34"><a href="#3-2-è¡Œä¸šæ¡ˆä¾‹åˆ†äº«-03-34" class="headerlink" title="3-2 è¡Œä¸šæ¡ˆä¾‹åˆ†äº« (03:34)"></a>3-2 è¡Œä¸šæ¡ˆä¾‹åˆ†äº« (03:34)</h3><p>å¤§å‹ç³»ç»Ÿçš„æ—¥å¿—åˆ†æå¤„ç†</p><ul><li><p>ç§ç±»ç¹å¤šæ•°æ®å·¨å¤§çš„æ—¥å¿—</p></li><li><p>æŠ½å–å…±æ€§</p></li><li><p>è·å¾—è§„å¾‹</p><ol><li>è·å¾—æ–‡ä»¶ï¼šæŠ½è±¡åŸºç±»</li><li>æ‰“å¼€æ–‡ä»¶ï¼šæŠ½è±¡åŸºç±»</li><li>è¯»å–æ—¥å¿—ç»“æ„ï¼šæŠ½è±¡åŸºç±»</li><li><em>å¤„ç†å•è¡Œæ—¥å¿—</em>ï¼šä¸ªæ€§åŒ–éœ€æ±‚ï¼Œå»¶è¿Ÿåˆ°å­ç±»å®ç°</li><li>æ¸…ç†å·¥ä½œï¼šæŠ½è±¡åŸºç±»</li></ol><p>é’©å­å‡½æ•°ï¼š<code>beforeProcessOneFile();</code>ã€<code>afterProcessOneFile();</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>165-æ¨¡å¼çš„ç§˜å¯†---ç­–ç•¥æ¨¡å¼</title>
      <link href="/imooc/165-strategy-mode/"/>
      <url>/imooc/165-strategy-mode/</url>
      
        <content type="html"><![CDATA[<p>ç³»åˆ—è¯¾ç¨‹ï¼š<a href="https://www.tuyrk.cn/imooc/18-java-mode/">æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</a></p><blockquote><p><a href="http://www.imooc.com/learn/165" target="_blank" rel="noopener">http://www.imooc.com/learn/165</a></p><p>ç®€ä»‹ï¼šç­–ç•¥æ¨¡å¼æ˜¯åœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚åœ¨æœ¬è§†é¢‘ä¸­ï¼Œ@Arthur å°†ç”¨ç®€å•ç”ŸåŠ¨çš„ä¾‹å­å¸¦ä½ é¢†ç•¥ç­–ç•¥æ¨¡å¼çš„çœŸæ„ã€å¦‚ä½•ç”¨ Java è¯­è¨€å®ç°ç­–ç•¥æ¨¡å¼ã€æœ€åè¿˜å°†ç”¨å®é™…çš„è¡Œä¸šæ¡ˆä¾‹å‘Šè¯‰ä½ ç­–ç•¥æ¨¡å¼çš„å¼ºå¤§åŠŸèƒ½ã€‚å°ä¼™ä¼´ä»¬ï¼Œè¿˜ç­‰ä»€ä¹ˆå‘¢ï¼Œå¿«æ¥åŠ å…¥å­¦ä¹ å§ï¼ï¼</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -å¼•å­ï¼šä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼"><a href="#ç¬¬1ç« -å¼•å­ï¼šä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç¬¬1ç«  å¼•å­ï¼šä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼"></a>ç¬¬1ç«  å¼•å­ï¼šä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼</h2><blockquote><p>æœ¬ç« é€šè¿‡åˆ†æå­—å¤„ç†è½¯ä»¶å¤„ç†æ’ç‰ˆå’Œåœ¨çº¿è´­ç‰©æ”¯ä»˜çš„åœºæ™¯ï¼Œå¼•å…¥ç­–ç•¥æ¨¡å¼çš„æ¦‚å¿µã€‚é’ˆå¯¹æ¦‚å¿µè®¾è®¡äº†ä¸€ä¸ªè™šæ‹Ÿçš„åº”ç”¨ï¼Œåˆ†æåº”ç”¨éœ€æ±‚ã€‚</p></blockquote><h3 id="1-1-ç­–ç•¥æ¨¡å¼ç®€ä»‹-06-27"><a href="#1-1-ç­–ç•¥æ¨¡å¼ç®€ä»‹-06-27" class="headerlink" title="1-1 ç­–ç•¥æ¨¡å¼ç®€ä»‹ (06:27)"></a>1-1 ç­–ç•¥æ¨¡å¼ç®€ä»‹ (06:27)</h3><p>è¯¾ç¨‹å¤§çº²</p><blockquote><p>ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼<br>ç­–ç•¥æ¨¡å¼å¦‚ä½•å®ç°<br>ç­–ç•¥æ¨¡å¼æ€»ç»“ç¯‡ï¼šé€‚ç”¨åœºæ™¯ã€ä¼˜ç¼ºç‚¹<br>å®ä¾‹æ¡ˆä¾‹åˆ†äº«</p></blockquote><p>æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ç­–ç•¥</p><blockquote><p>Wordæ–‡æ¡£ä¸­çš„æ’ç‰ˆå¸ƒå±€æ–¹å¼<br>è´­ç‰©æ”¯ä»˜è¿‡ç¨‹ä¸­é€‰æ‹©æ”¯ä»˜æ¸ é“</p></blockquote><p>æ¡ˆä¾‹ç¤ºæ„å›¾</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gadlrfqla3j319i0pknmh.jpg" alt="æ¡ˆä¾‹ç¤ºæ„å›¾" style="zoom:35%;" /><p>ç­–ç•¥æ¨¡å¼çš„å®šä¹‰</p><blockquote><p>ç­–ç•¥æ¨¡å¼å°†å¯å˜çš„éƒ¨åˆ†ä»ç¨‹åºä¸­æŠ½è±¡åˆ†ç¦»æˆç®—æ³•æ¥å£ï¼Œåœ¨è¯¥æ¥å£ä¸‹åˆ†åˆ«å°è£…ä¸€ç³»åˆ—ç®—æ³•å®ç°ï¼Œå¹¶ä½¿ä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä»è€Œå¯¼è‡´å®¢æˆ·ç«¯ç¨‹åºç‹¬ç«‹äºç®—æ³•çš„æ”¹å˜ã€‚</p></blockquote><h2 id="ç¬¬2ç« -å…‰è£ä¸æ¢¦æƒ³â€”â€”é¸­å­åº”ç”¨ï¼šç­–ç•¥æ¨¡å¼çš„å®ç°"><a href="#ç¬¬2ç« -å…‰è£ä¸æ¢¦æƒ³â€”â€”é¸­å­åº”ç”¨ï¼šç­–ç•¥æ¨¡å¼çš„å®ç°" class="headerlink" title="ç¬¬2ç«  å…‰è£ä¸æ¢¦æƒ³â€”â€”é¸­å­åº”ç”¨ï¼šç­–ç•¥æ¨¡å¼çš„å®ç°"></a>ç¬¬2ç«  å…‰è£ä¸æ¢¦æƒ³â€”â€”é¸­å­åº”ç”¨ï¼šç­–ç•¥æ¨¡å¼çš„å®ç°</h2><blockquote><p>é€šè¿‡ä»£ç çš„ç¼–å†™ï¼Œå‰–æç­–ç•¥æ¨¡å¼çš„å®ç°</p></blockquote><h3 id="2-1-å…‰è£ä¸æ¢¦æƒ³ï¼šæ¨¡æ‹Ÿåº”ç”¨èƒŒæ™¯ä»‹ç»-02-49"><a href="#2-1-å…‰è£ä¸æ¢¦æƒ³ï¼šæ¨¡æ‹Ÿåº”ç”¨èƒŒæ™¯ä»‹ç»-02-49" class="headerlink" title="2-1 å…‰è£ä¸æ¢¦æƒ³ï¼šæ¨¡æ‹Ÿåº”ç”¨èƒŒæ™¯ä»‹ç» (02:49)"></a>2-1 å…‰è£ä¸æ¢¦æƒ³ï¼šæ¨¡æ‹Ÿåº”ç”¨èƒŒæ™¯ä»‹ç» (02:49)</h3><p>æ¨¡æ‹Ÿåº”ç”¨èƒŒæ™¯</p><blockquote><p>é€šè¿‡ä»£ç æ¥å®ç°ç­–ç•¥æ¨¡å¼ï¼Œé€šè¿‡å¼€å‘ä¸é‡æ„è™šæ‹Ÿåº”ç”¨ã€‚ä½¿ç”¨ç­–ç•¥æ¨¡å¼å®ç°ï¼šåœ¨ä¸å˜æ›´ä»£ç æ¡†æ¶çš„å‰æä¸‹ï¼Œé€šè¿‡å¼€å‘ä¸é‡æ„ï¼Œä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Œä¸æ–­æ‹¥æŠ±éœ€æ±‚çš„å˜åŒ–ï¼Œä»è€Œæ»¡è¶³å®¢æˆ·éœ€æ±‚</p></blockquote><p>é¡¹ç›®èƒŒæ™¯ï¼šé¸­å­åº”ç”¨</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gadlyz4j7yj31dy0kpk8w.jpg" alt="é¡¹ç›®èƒŒæ™¯ï¼šé¸­å­åº”ç”¨" style="zoom:30%;" /><h3 id="2-2-æ±‚ç´¢ä¹‹è·¯ï¼šé¸­å­å¦‚ä½•æ‰èƒ½é£-07-05"><a href="#2-2-æ±‚ç´¢ä¹‹è·¯ï¼šé¸­å­å¦‚ä½•æ‰èƒ½é£-07-05" class="headerlink" title="2-2 æ±‚ç´¢ä¹‹è·¯ï¼šé¸­å­å¦‚ä½•æ‰èƒ½é£ (07:05)"></a>2-2 æ±‚ç´¢ä¹‹è·¯ï¼šé¸­å­å¦‚ä½•æ‰èƒ½é£ (07:05)</h3><blockquote><p>åŸæœ‰åŠŸèƒ½</p></blockquote><p>ä»£ç ç¼–å†™</p><ol><li><p>è¶…ç±»ï¼Œæ‰€æœ‰çš„é¸­å­éƒ½è¦ç»§æ‰¿æ­¤ç±»ã€‚æŠ½è±¡äº†é¸­å­çš„è¡Œä¸ºï¼šæ˜¾ç¤ºå’Œé¸£å«</p><pre><code class="java">public abstract class Duck {    // é¸­å­å‘å‡ºå«å£°ã€‚é€šç”¨è¡Œä¸ºï¼Œç”±è¶…ç±»å®ç°    public void quack() {        System.out.println(&quot;å˜å˜å˜...&quot;);    }    // æ˜¾ç¤ºé¸­å­çš„å¤–è§‚ã€‚é¸­å­çš„å¤–è§‚å„ä¸ç›¸åŒï¼Œå£°æ˜ä¸ºabstractï¼Œç”±å­ç±»å®ç°    public abstract void display();}</code></pre></li><li><p>ç»¿å¤´é¸­</p><pre><code class="java">public class MallardDuck extends Duck {    @Override    public void display() {        System.out.println(&quot;æˆ‘çš„å¤´æ˜¯ç»¿è‰²çš„&quot;);    }}</code></pre></li><li><p>çº¢å¤´é¸­</p><pre><code class="java">public class RedHeadDuck extends Duck {    @Override    public void display() {        System.out.println(&quot;æˆ‘çš„å¤´æ˜¯çº¢è‰²çš„&quot;);    }}</code></pre></li></ol><h3 id="2-3-æŸ³æš—èŠ±æ˜ï¼šç­–ç•¥è®©é¸­å­é£ä¸Šå¤©-07-13"><a href="#2-3-æŸ³æš—èŠ±æ˜ï¼šç­–ç•¥è®©é¸­å­é£ä¸Šå¤©-07-13" class="headerlink" title="2-3 æŸ³æš—èŠ±æ˜ï¼šç­–ç•¥è®©é¸­å­é£ä¸Šå¤© (07:13)"></a>2-3 æŸ³æš—èŠ±æ˜ï¼šç­–ç•¥è®©é¸­å­é£ä¸Šå¤© (07:13)</h3><p>ä»€ä¹ˆæ˜¯ç»„åˆ</p><blockquote><p><strong>åœ¨ç±»ä¸­å¢åŠ ä¸€ä¸ªç§æœ‰åŸŸï¼Œå¼•ç”¨å¦ä¸€ä¸ªå·²æœ‰çš„ç±»çš„å®ä¾‹ï¼Œé€šè¿‡è°ƒç”¨å¼•ç”¨å®ä¾‹çš„æ–¹æ³•ä»è€Œè·å¾—æ–°çš„åŠŸèƒ½ï¼Œè¿™ç§è®¾è®¡è¢«ç§°ä½œç»„åˆï¼ˆæˆ–å¤åˆï¼‰</strong></p></blockquote><p>åœ¨åŸæœ‰åŠŸèƒ½çš„åŸºç¡€ä¸Šæ–°å¢é£è¡Œçš„åŠŸèƒ½</p><ol><li><p>ç»§æ‰¿ã€‚åœ¨çˆ¶ç±»ä¸­æä¾›å®ç°æ–¹æ³•ï¼Œå­ç±»é€šè¿‡ç»§æ‰¿è·å¾—çˆ¶ç±»ä¸­çš„é£è¡Œè¡Œä¸º</p><pre><code class="java">public void fly(){    System.out.println(&quot;ç”¨ç¿…è†€é£è¡Œ&quot;);}</code></pre><p>ä¼˜ç‚¹ï¼šç®€å•æ˜“ç”¨ï¼Œå·²æœ‰åº”ç”¨å¯ä»¥å¿«é€Ÿæ·»åŠ é£è¡Œçš„èƒ½åŠ›</p><p>ç¼ºç‚¹ï¼šç²—æš´ä¸‘é™‹ï¼Œä¸å…·æœ‰çµæ´»æ€§ï¼Œå¯¹æœªæ¥å˜æ›´æ”¯æŒå·®</p></li><li><p>æŠ½è±¡æ–¹æ³•ã€‚åœ¨çˆ¶ç±»ä¸­æä¾›æŠ½è±¡æ–¹æ³•ï¼Œå¼ºè¿«å­ç±»æ˜¯è‡ªå·±çš„é£è¡Œè¡Œä¸º</p><pre><code class="java">public abstract void fly();</code></pre><p>ä¼˜ç‚¹ï¼šè¶³å¤Ÿçµæ´»ã€‚ä¸ä¼šå¿˜è®°å¤å†™ä»£ç </p><p>ç¼ºç‚¹ï¼šæ¯ä¸ªå­ç±»éƒ½è¦å®ç°ä¸€éä»£ç ï¼Œå³ä½¿æ˜¯ç›¸åŒçš„è¡Œä¸ºä¹Ÿä¸ä¾‹å¤–ã€‚ä»£ç é‡å¤ï¼Œæ²¡æœ‰å¤ç”¨ä»£ç ã€‚å¦‚æœæœ‰ä¸€ä¸ªBUGï¼Œä¿®æ”¹ç›¸å½“éº»çƒ¦ã€‚</p><p><strong>ç»§æ‰¿æ˜¯é‡ç”¨ä»£ç çš„åˆ©å™¨ï¼Œä½†ç»§æ‰¿å¹¶ä¸æ€»æ˜¯æœ€å¥½çš„å·¥å…·</strong></p></li><li><p>ç»„åˆã€‚å°†é£è¡Œè¡Œä¸ºæŠ½è±¡ä¸ºæ¥å£ï¼Œåœ¨çˆ¶ç±»ä¸­æŒæœ‰è¯¥æ¥å£ï¼Œå¹¶ç”±è¯¥æ¥å£ä»£ç†é£è¡Œè¡Œä¸º</p><pre><code class="java">public interface FlyingStrategy {    void performFly();}</code></pre><pre><code class="java">private FlyingStrategy flyingStrategy;public void fly() {    flyingStrategy.performFly();}</code></pre><p>ä¼˜ç‚¹ï¼šè¶³å¤Ÿçµæ´»ã€‚å¤ç”¨ä»£ç ï¼Œæ›´æ˜“äºç»´æŠ¤</p><p>ç¼ºç‚¹ï¼šç­–ç•¥ç±»ä¼šå¢å¤šï¼Œæ‰€æœ‰ç­–ç•¥ç±»éƒ½éœ€è¦å¯¹å¤–æš´éœ²</p><p>Favor composition over inheritance<br><strong>å¤åˆä¼˜å…ˆäºç»§æ‰¿</strong>/<strong>å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿</strong></p></li></ol><h3 id="2-4-è„šè¸å®åœ°ï¼šç”¨ä»£ç æ”¾é£é¸­å­-07-00"><a href="#2-4-è„šè¸å®åœ°ï¼šç”¨ä»£ç æ”¾é£é¸­å­-07-00" class="headerlink" title="2-4 è„šè¸å®åœ°ï¼šç”¨ä»£ç æ”¾é£é¸­å­ (07:00)"></a>2-4 è„šè¸å®åœ°ï¼šç”¨ä»£ç æ”¾é£é¸­å­ (07:00)</h3><blockquote><p>æ·»åŠ ç­–ç•¥æ¥å£ï¼Œå®ç°é¸­å­é£è¡Œ</p></blockquote><p>ä»£ç ç¼–å†™</p><ol><li><p>ç­–ç•¥æ¥å£ï¼Œå®ç°é¸­å­çš„é£è¡Œè¡Œä¸º</p><pre><code class="java">public interface FlyingStrategy {    // é£è¡Œè¡Œä¸ºçš„æ–¹æ³•    void performFly();}</code></pre></li><li><p>å®ç°é¸­å­çš„é£è¡Œè¡Œä¸ºï¼Œç”¨ç¿…è†€é£è¡Œçš„ç±»</p><pre><code class="java">public class FlyWithWin implements FlyingStrategy {    @Override    public void performFly() {        System.out.println(&quot;æŒ¯ç¿…é«˜é£&quot;);    }}</code></pre></li><li><p>è¶…ç±»ï¼Œæ‰€æœ‰çš„é¸­å­éƒ½è¦ç»§æ‰¿æ­¤ç±»ã€‚æŠ½è±¡äº†é¸­å­çš„è¡Œä¸ºï¼šæ˜¾ç¤ºå’Œé¸£å«</p><pre><code class="java">@Datapublic abstract class Duck {    // é¸­å­å‘å‡ºå«å£°ï¼Œé€šç”¨è¡Œä¸ºï¼Œç”±è¶…ç±»å®ç°    public void quack() {        System.out.println(&quot;å˜å˜å˜...&quot;);    }    // æ˜¾ç¤ºé¸­å­çš„å¤–è§‚ï¼Œé¸­å­çš„å¤–è§‚å„ä¸ç›¸åŒï¼Œå£°æ˜ä¸ºabstractï¼Œç”±å­ç±»å®ç°    public abstract void display();    /*=====æ–°å¢ä»£ç å®ç°é£è¡ŒåŠŸèƒ½=====*/    // ç»„åˆè¿›é£è¡Œçš„ç­–ç•¥æ¥å£    private FlyingStrategy flyingStrategy;    // é¸­å­çš„é£è¡ŒåŠŸèƒ½    public void fly() {        // ç”±é£è¡Œç­–ç•¥æ¥å£æ‰§è¡Œé£è¡Œçš„åŠ¨ä½œ        flyingStrategy.performFly();    }}</code></pre></li><li><p>ç»¿å¤´é¸­ã€‚ä¼ å…¥é£è¡Œç­–ç•¥</p><pre><code class="java">public class MallardDuck extends Duck {    public MallardDuck() {        super.setFlyingStrategy(new FlyWithWin());    }    @Override    public void display() {        System.out.println(&quot;æˆ‘çš„å¤´æ˜¯ç»¿è‰²çš„&quot;);    }}</code></pre></li><li><p>çº¢å¤´é¸­ã€‚ä¼ å…¥é£è¡Œç­–ç•¥</p><pre><code class="java">public class RedHeadDuck extends Duck {    public RedHeadDuck() {        super.setFlyingStrategy(new FlyWithWin());    }    @Override    public void display() {        System.out.println(&quot;æˆ‘çš„å¤´æ˜¯çº¢è‰²çš„&quot;);    }}</code></pre></li><li><p>æµ‹è¯•ç±»</p><pre><code class="java">public class DuckTest {    public static void main(String[] args) {        // Duck duck = new MallardDuck();        // Duck duck = new RedHeadDuck();        Duck duck = new SpaceDuck();        duck.display();        duck.quack();        duck.fly();    }}</code></pre></li></ol><h3 id="2-5-æ‹¥æŠ±å˜åŒ–ï¼šç”¨ç­–ç•¥æ¨¡å¼æä¾›é«˜å¤ç”¨æ€§ä»£ç -06-53"><a href="#2-5-æ‹¥æŠ±å˜åŒ–ï¼šç”¨ç­–ç•¥æ¨¡å¼æä¾›é«˜å¤ç”¨æ€§ä»£ç -06-53" class="headerlink" title="2-5 æ‹¥æŠ±å˜åŒ–ï¼šç”¨ç­–ç•¥æ¨¡å¼æä¾›é«˜å¤ç”¨æ€§ä»£ç  (06:53)"></a>2-5 æ‹¥æŠ±å˜åŒ–ï¼šç”¨ç­–ç•¥æ¨¡å¼æä¾›é«˜å¤ç”¨æ€§ä»£ç  (06:53)</h3><blockquote><p>å¤ç”¨ä»£ç ï¼Œæ–°å¢ç­–ç•¥æ–¹å¼</p></blockquote><p>ä¸šåŠ¡åœºæ™¯</p><blockquote><p>éœ€è¦å¢åŠ æ©¡èƒ¶é¸­ã€å¤§é»„é¸­ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼Œä¸ä¼šé£è¡Œã€‚<br>ä¸ä¼šé£ä¹Ÿæ˜¯ä¸€ç§é£è¡Œè¡Œä¸ºï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è‰¯å¥½çš„æŠ½è±¡å¤ç”¨ä»£ç </p></blockquote><p>ä»£ç ç¼–å†™</p><ol><li><p>å®ç°é¸­å­çš„é£è¡Œè¡Œä¸ºï¼Œä¸ä¼šé£è¡Œçš„ç­–ç•¥ç±»</p><pre><code class="java">public class FlyNoWay implements FlyingStrategy {    @Override    public void performFly() {        System.out.println(&quot;æˆ‘ä¸ä¼šé£è¡Œï¼&quot;);    }}</code></pre></li><li><p>æ©¡èƒ¶é¸­</p><pre><code class="java">public class RubberDuck extends Duck {    public RubberDuck() {        super.setFlyingStrategy(new FlyNoWay());    }    @Override    public void display() {        System.out.println(&quot;æˆ‘å…¨èº«å‘é»„ï¼Œå˜´å·´å¾ˆçº¢&quot;);    }    @Override    public void quack() {        System.out.println(&quot;å˜~å˜~å˜~&quot;);    }}</code></pre></li><li><p>å¤§é»„é¸­</p><pre><code class="java">public class BigYellowDuck extends Duck {    public BigYellowDuck() {        super.setFlyingStrategy(new FlyNoWay());    }    @Override    public void display() {        System.out.println(&quot;æˆ‘èº«ä½“å¾ˆå¤§ï¼Œå…¨èº«é»„é»„&quot;);    }}</code></pre></li><li><p>æµ‹è¯•ç±»</p><pre><code class="java">public class DuckTest {    public static void main(String[] args) {        // Duck duck = new RubberDuck();        Duck duck = new BigYellowDuck();        duck.display();        duck.quack();        duck.fly();    }}</code></pre></li></ol><h3 id="2-6-ä¸‡å˜ä¸ç¦»å…¶å®—ï¼šå‘å®‡å®™è¿›å†›-04-33"><a href="#2-6-ä¸‡å˜ä¸ç¦»å…¶å®—ï¼šå‘å®‡å®™è¿›å†›-04-33" class="headerlink" title="2-6 ä¸‡å˜ä¸ç¦»å…¶å®—ï¼šå‘å®‡å®™è¿›å†› (04:33)"></a>2-6 ä¸‡å˜ä¸ç¦»å…¶å®—ï¼šå‘å®‡å®™è¿›å†› (04:33)</h3><blockquote><p> æ–°å¢ç­–ç•¥æ–¹å¼</p></blockquote><p>ä¸šåŠ¡åœºæ™¯</p><blockquote><p>ç°åœ¨åˆéœ€å¢åŠ å¤ªç©ºé¸­ï¼Œå¤ªç©ºé¸­ä¸èƒ½è‡ªå·±é£è¡Œï¼Œéœ€è¦å€ŸåŠ©å…ˆè¿›çš„ç§‘å­¦æŠ€æœ¯ã€‚</p></blockquote><p>ä»£ç ç¼–å†™</p><ol><li><p>å®ç°é¸­å­çš„é£è¡Œè¡Œä¸ºï¼Œä½¿ç”¨ç«ç®­é£è¡Œç­–ç•¥ç±»</p><pre><code class="java">public class FlyWithRocket implements FlyingStrategy {    @Override    public void performFly() {        System.out.println(&quot;ç”¨ç«ç®­åœ¨å¤ªç©ºé¨æ¸¸&quot;);    }}</code></pre></li><li><p>å¤ªç©ºé¸­</p><pre><code class="java">public class SpaceDuck extends Duck {    public SpaceDuck() {        super();        super.setFlyingStrategy(new FlyWithRocket());    }    @Override    public void display() {        System.out.println(&quot;æˆ‘å¤´æˆ´å®‡èˆªç›”&quot;);    }    @Override    public void quack() {        System.out.println(&quot;æˆ‘é€šè¿‡æ— çº¿ç”µä¸ä½ é€šä¿¡&quot;);    }}</code></pre></li><li><p>æµ‹è¯•ç±»</p><pre><code class="java">public class DuckTest {    public static void main(String[] args) {        Duck duck = null;        duck = new SpaceDuck();        duck.display();        duck.quack();        duck.fly();    }}</code></pre></li></ol><h2 id="ç¬¬3ç« -æ€»ç»“ç¯‡"><a href="#ç¬¬3ç« -æ€»ç»“ç¯‡" class="headerlink" title="ç¬¬3ç«  æ€»ç»“ç¯‡"></a>ç¬¬3ç«  æ€»ç»“ç¯‡</h2><blockquote><p>æœ¬ç« åœ¨æ¦‚å¿µå¼•å…¥å’Œä»£ç å®æˆ˜çš„åŸºç¡€ä¸Šï¼Œç»“åˆä»£ç ä¸­çš„ç»†èŠ‚æ€»ç»“äº†ç­–ç•¥æ¨¡å®ç°è¦ç´ ï¼Œé€‚ç”¨åœºæ™¯ï¼Œä¼˜ç¼ºç‚¹ã€‚æœ€åé€šè¿‡ä¸€ä¸ªè¡Œä¸šæ¡ˆä¾‹åˆ†äº«ï¼Œä»‹ç»äº†å®é™…å·¥ä½œä¸­çš„ç­–ç•¥æ¨¡å¼åº”ç”¨ã€‚</p></blockquote><h3 id="3-1-çŸ¥è¯†ç‚¹æ€»ç»“-06-37"><a href="#3-1-çŸ¥è¯†ç‚¹æ€»ç»“-06-37" class="headerlink" title="3-1 çŸ¥è¯†ç‚¹æ€»ç»“ (06:37)"></a>3-1 çŸ¥è¯†ç‚¹æ€»ç»“ (06:37)</h3><p>ç­–ç•¥æ¨¡å¼ä¸­çš„è®¾è®¡åŸåˆ™</p><blockquote><p>æ‰¾å‡ºåº”ç”¨ä¸­éœ€è¦å˜åŒ–çš„éƒ¨åˆ†ï¼ŒæŠŠä»–ä»¬ç‹¬ç«‹å‡ºæ¥ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦å˜åŒ–çš„ä»£ç æ··åœ¨ä¸€èµ·<br>é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é¢å‘å®ç°ç¼–ç¨‹<br>å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿</p></blockquote><p>ç­–ç•¥æ¨¡å¼çš„å®ç°</p><blockquote><p>é€šè¿‡åˆ†ç¦»å˜åŒ–å¾—å‡ºçš„ç­–ç•¥æ¥å£Strategy<br>Strategyæ¥å£çš„å®ç°ç±»<br>å®¢æˆ·ç¨‹åºä¸­æœ‰ä¸€ä¸ªStrategy<br>åœ¨å®¢æˆ·ç¨‹åºä¸­é€‰æ‹©å’Œç»„è£…æ­£ç¡®çš„Strategyå®ç°ç±»</p></blockquote><p>ç­–ç•¥æ¨¡å¼ä¼˜ç‚¹</p><blockquote><p>ä½¿ç”¨äº†ç»„åˆï¼Œä½¿æ¶æ„æ›´åŠ çµæ´»<br>å¯Œæœ‰å¼¹æ€§ï¼Œå¯ä»¥è¾ƒå¥½çš„åº”å¯¹å˜åŒ–ï¼ˆå¼€é—­åŸåˆ™ï¼‰<br>æ›´å¥½çš„ä»£ç å¤ç”¨æ€§ï¼ˆç›¸å¯¹äºç»§æ‰¿ï¼‰<br>æ¶ˆé™¤å¤§é‡çš„æ¡ä»¶è¯­å¥</p></blockquote><p>ç­–ç•¥æ¨¡å¼ç¼ºç‚¹</p><blockquote><p>å®¢æˆ·ä»£ç éœ€è¦äº†è§£æ¯ä¸ªç­–ç•¥å®ç°çš„ç»†èŠ‚<br>å¢åŠ äº†å¯¹è±¡çš„æ•°ç›®</p></blockquote><p>ç­–ç•¥æ¨¡å¼çš„é€‚ç”¨åœºæ™¯</p><blockquote><p>è®¸å¤šç›¸å…³çš„ç±»ä»…ä»…æ˜¯è¡Œä¸ºå·®å¼‚<br>è¿è¡Œæ—¶é€‰å–ä¸åŒçš„ç®—æ³•å˜ä½“<br>é€šè¿‡æ¡ä»¶è¯­å¥åœ¨å¤šä¸ªåˆ†æ”¯ä¸­é€‰æ‹©å…¶ä¸­ä¸€ä¸ª</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>257-æ¨¡å¼çš„ç§˜å¯†---è´£ä»»é“¾æ¨¡å¼</title>
      <link href="/imooc/257-responsibility-mode/"/>
      <url>/imooc/257-responsibility-mode/</url>
      
        <content type="html"><![CDATA[<p>ç³»åˆ—è¯¾ç¨‹ï¼š<a href="https://www.tuyrk.cn/imooc/18-java-mode/">æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</a></p><blockquote><p><a href="http://www.imooc.com/learn/257" target="_blank" rel="noopener">http://www.imooc.com/learn/257</a></p><p>ç®€ä»‹ï¼šè´£ä»»é“¾æ¨¡å¼åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘å·¥ä½œä¸­éšå¤„å¯è§ï¼Œä½†å´å¹¶ä¸ä¸€å®šå”¯ä½ æ‰€ç†ŸçŸ¥ã€‚é€šè¿‡æœ¬è§†é¢‘ï¼Œä½ å¯ä»¥äº†è§£ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼ï¼Œå¦‚ä½•ç”¨ Java è¯­è¨€å®ç°ç­–ç•¥æ¨¡å¼ã€‚ ä½œè€…å°†ç”¨ç®€å•ç”ŸåŠ¨çš„ä¾‹å­å¸¦ä½ è®¤è¯†è´£ä»»é“¾æ¨¡å¼çš„ï¼Œé€šè¿‡å­¦ä¹ ï¼Œç†è§£æ¨¡å¼å­¦ä¹ çš„è¦ä¹‰ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼"><a href="#ç¬¬1ç« -ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="ç¬¬1ç«  ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼"></a>ç¬¬1ç«  ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼</h2><blockquote><p>æœ¬ç« é€šè¿‡åˆ†æå‡»é¼“ä¼ èŠ±å’Œè´­æˆ¿æŠ˜æ‰£ç”³è¯·åœºæ™¯ï¼Œå¼•å…¥è´£ä»»é“¾æ¨¡å¼çš„æ¦‚å¿µã€‚é’ˆå¯¹æ¦‚å¿µè®¾è®¡äº†ä¸€ä¸ªè™šæ‹Ÿçš„åº”ç”¨ï¼Œåˆ†æåº”ç”¨éœ€æ±‚ã€‚</p></blockquote><h3 id="1-1-ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼-10-12"><a href="#1-1-ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼-10-12" class="headerlink" title="1-1 ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼ (10:12)"></a>1-1 ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼ (10:12)</h3><p>è¯¾ç¨‹å¤§çº²</p><blockquote><p>ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼<br>å¦‚ä½•å®ç°è´£ä»»é“¾æ¨¡å¼<br>è´£ä»»é“¾æ¨¡å¼å¦‚ä½•è§£è€¦<br>è´£ä»»é“¾æ¨¡å¼çš„åº”ç”¨</p></blockquote><p>æ¡ˆä¾‹ï¼šå”®æ¥¼æ¡ˆä¾‹</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gacg5tmqv7j310m0ew43e.jpg" alt="æ¡ˆä¾‹ï¼šå”®æ¥¼æ¡ˆä¾‹" style="zoom:35%;" /><p>è´£ä»»é“¾æ¨¡å¼å®šä¹‰</p><blockquote><p>è´£ä»»é“¾æ¨¡å¼å°†æ¥æ”¶è€…å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶åœ¨è¯¥é“¾ä¸Šä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡å¤„ç†å®ƒã€‚é€šè¿‡è®©æ›´å¤šå¯¹è±¡æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œé¿å…è¯·æ±‚å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆã€‚</p></blockquote><p>è´£ä»»é“¾æ¨¡å¼ç±»å›¾</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gacg7av0mhj30uc0fg0vb.jpg" alt="è´£ä»»é“¾æ¨¡å¼ç±»å›¾" style="zoom:45%;" /><blockquote><p>åœ¨è´£ä»»é“¾æ¨¡å¼ä¸­ï¼Œä½œä¸ºè¯·æ±‚æ¥æ”¶è€…çš„å¤šä¸ªå¯¹è±¡é€šè¿‡å¯¹å…¶åç»§çš„å¼•ç”¨è€Œè¿æ¥èµ·æ¥å½¢æˆä¸€æ¡é“¾ã€‚è¯·æ±‚åœ¨è¿™æ¡é“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°é“¾ä¸ŠæŸä¸€ä¸ªæ¥æ”¶è€…å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚æ¯ä¸ªæ¥æ”¶è€…éƒ½å¯ä»¥é€‰æ‹©è‡ªè¡Œå¤„ç†è¯·æ±‚æˆ–æ˜¯å‘åç»§ä¼ é€’è¯·æ±‚ã€‚</p></blockquote><h2 id="ç¬¬2ç« -æœ‰æ±‚å¿…åº”çš„é”€å”®é˜Ÿä¼ï¼šæ€æ ·å®ç°è´£ä»»é“¾æ¨¡å¼"><a href="#ç¬¬2ç« -æœ‰æ±‚å¿…åº”çš„é”€å”®é˜Ÿä¼ï¼šæ€æ ·å®ç°è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="ç¬¬2ç«  æœ‰æ±‚å¿…åº”çš„é”€å”®é˜Ÿä¼ï¼šæ€æ ·å®ç°è´£ä»»é“¾æ¨¡å¼"></a>ç¬¬2ç«  æœ‰æ±‚å¿…åº”çš„é”€å”®é˜Ÿä¼ï¼šæ€æ ·å®ç°è´£ä»»é“¾æ¨¡å¼</h2><blockquote><p>é€šè¿‡ä»£ç çš„ç¼–å†™è´£ä»»é“¾æ¨¡å¼çš„å®ç°</p></blockquote><h3 id="2-1-æœ‰æ±‚å¿…åº”çš„é”€å”®å›¢é˜Ÿ-08-33"><a href="#2-1-æœ‰æ±‚å¿…åº”çš„é”€å”®å›¢é˜Ÿ-08-33" class="headerlink" title="2-1 æœ‰æ±‚å¿…åº”çš„é”€å”®å›¢é˜Ÿ (08:33)"></a>2-1 æœ‰æ±‚å¿…åº”çš„é”€å”®å›¢é˜Ÿ (08:33)</h3><p>ä¸åŒçš„è§’è‰²æ‹¥æœ‰ä¸åŒçš„æŠ˜æ‰£æƒé™</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gacgbaggkqj30wu0e6agx.jpg" alt="ä¸åŒçš„è§’è‰²æ‹¥æœ‰ä¸åŒçš„æŠ˜æ‰£æƒé™" style="zoom:40%;" /><p>ä»£ç ç¼–å†™</p><ol><li><p>ä»·æ ¼å¤„ç†äººï¼Œè´Ÿè´£å¤„ç†å®¢æˆ·æŠ˜æ‰£ç”³è¯·</p><pre><code class="java">@Datapublic abstract class PriceHandler {    // è´£ä»»é“¾çš„ç›´æ¥åç»§ï¼Œç”¨äºä¼ é€’è¯·æ±‚    protected PriceHandler successor;    // å¤„ç†æŠ˜æ‰£ç”³è¯·    public abstract void processDiscount(float discount);    // åˆ›å»ºPriceHandlerçš„å·¥å‚æ–¹æ³•    public static PriceHandler createPriceHandler() {        // åˆ›å»ºå¯¹è±¡        PriceHandler sales = new Sales();        PriceHandler manager = new Manager();        PriceHandler director = new Director();        PriceHandler vp = new VicePresident();        PriceHandler ceo = new CEO();        // æŒ‡å®šç›´æ¥åç»§        sales.setSuccessor(manager);        manager.setSuccessor(director);        director.setSuccessor(vp);        vp.setSuccessor(ceo);        // è¿”å›é”€å”®äººå‘˜        return sales;    }}</code></pre></li><li><p>é”€å”®ï¼Œå¯ä»¥æ‰¹å‡†5%ä»¥å†…çš„æŠ˜æ‰£</p><pre><code class="java">public class Sales extends PriceHandler {    @Override    public void processDiscount(float discount) {        if (discount &lt;= 0.05) {            System.out.format(&quot;%sæ‰¹å‡†äº†æŠ˜æ‰£ï¼š%.2f%n&quot;, this.getClass().getName(), discount);        } else {            successor.processDiscount(discount);        }    }}</code></pre></li><li><p>é”€å”®ç»ç†ï¼Œå¯ä»¥æ‰¹å‡†30%ä»¥å†…çš„æŠ˜æ‰£</p><pre><code class="java">public class Manager extends PriceHandler {    @Override    public void processDiscount(float discount) {        if (discount &lt;= 0.3) {            System.out.format(&quot;%sæ‰¹å‡†äº†æŠ˜æ‰£ï¼š%.2f%n&quot;, this.getClass().getName(), discount);        } else {            successor.processDiscount(discount);        }    }}</code></pre></li><li><p>é”€å”®æ€»ç›‘ï¼Œå¯ä»¥æ‰¹å‡†40%ä»¥å†…çš„æŠ˜æ‰£</p><pre><code class="java">public class Director extends PriceHandler {    @Override    public void processDiscount(float discount) {        if (discount &lt;= 0.4) {            System.out.format(&quot;%sæ‰¹å‡†äº†æŠ˜æ‰£ï¼š%.2f%n&quot;, this.getClass().getName(), discount);        } else {            successor.processDiscount(discount);        }    }}</code></pre></li><li><p>é”€å”®å‰¯æ€»è£ï¼Œå¯ä»¥æ‰¹å‡†50%ä»¥å†…çš„æŠ˜æ‰£</p><pre><code class="java">public class VicePresident extends PriceHandler {    @Override    public void processDiscount(float discount) {        if (discount &lt;= 0.5) {            System.out.format(&quot;%sæ‰¹å‡†äº†æŠ˜æ‰£ï¼š%.2f%n&quot;, this.getClass().getName(), discount);        } else {            successor.processDiscount(discount);        }    }}</code></pre></li><li><p>CEOï¼Œå¯ä»¥æ‰¹å‡†55%ä»¥å†…çš„æŠ˜æ‰£ã€‚æŠ˜æ‰£è¶…è¿‡55%å°±æ‹’ç»ç”³è¯·</p><pre><code class="java">public class CEO extends PriceHandler {    @Override    public void processDiscount(float discount) {        if (discount &lt;= 0.55) {            System.out.format(&quot;%sæ‰¹å‡†äº†æŠ˜æ‰£ï¼š%.2f%n&quot;, this.getClass().getName(), discount);        } else {            System.out.format(&quot;%sæ‹’ç»äº†æŠ˜æ‰£ï¼š%.2f%n&quot;, this.getClass().getName(), discount);        }    }}</code></pre></li></ol><h3 id="2-2-åƒå§¿ç™¾æ€çš„å®¢æˆ·è¯·æ±‚-10-43"><a href="#2-2-åƒå§¿ç™¾æ€çš„å®¢æˆ·è¯·æ±‚-10-43" class="headerlink" title="2-2 åƒå§¿ç™¾æ€çš„å®¢æˆ·è¯·æ±‚ (10:43)"></a>2-2 åƒå§¿ç™¾æ€çš„å®¢æˆ·è¯·æ±‚ (10:43)</h3><ol><li><p>å®¢æˆ·ï¼Œè¯·æ±‚æŠ˜æ‰£</p><pre><code class="java">@Datapublic class Customer {    private PriceHandler priceHandler;    public void requestDiscount(float discount) {        priceHandler.processDiscount(discount);    }}</code></pre></li><li><p>æµ‹è¯•ç±»ï¼Œå®¢æˆ·å‘èµ·æŠ˜æ‰£è¯·æ±‚</p><pre><code class="java">public class Test {    public static void main(String[] args) {        Customer customer = new Customer();        customer.setPriceHandler(PriceHandler.createPriceHandler());        Random random = new Random();        IntStream.rangeClosed(1, 100).forEach(i -&gt; {            System.out.print(i + &quot;:&quot;);            customer.requestDiscount(random.nextFloat());        });    }}</code></pre></li></ol><h3 id="2-3-ä¸ç®¡æ€ä¹ˆå˜æŠ˜æ‰£ä½ å¾—æ‰¹-08-33"><a href="#2-3-ä¸ç®¡æ€ä¹ˆå˜æŠ˜æ‰£ä½ å¾—æ‰¹-08-33" class="headerlink" title="2-3 ä¸ç®¡æ€ä¹ˆå˜æŠ˜æ‰£ä½ å¾—æ‰¹ (08:33)"></a>2-3 ä¸ç®¡æ€ä¹ˆå˜æŠ˜æ‰£ä½ å¾—æ‰¹ (08:33)</h3><blockquote><p>å‘è´£ä»»é“¾ä¸­æ·»åŠ æ–°çš„å¤„ç†å¯¹è±¡</p></blockquote><p>ä»£ç ç¼–å†™</p><ol><li><p>é”€å”®å°ç»„é•¿ï¼Œå¯ä»¥æ‰¹å‡†15%ä»¥å†…çš„æŠ˜æ‰£</p><pre><code class="java">public class Lead extends PriceHandler {    @Override    public void processDiscount(float discount) {        if (discount &lt;= 0.15) {            System.out.format(&quot;%sæ‰¹å‡†äº†æŠ˜æ‰£ï¼š%.2f%n&quot;, this.getClass().getName(), discount);        } else {            successor.processDiscount(discount);        }    }}</code></pre></li><li><p>åˆ›å»ºPriceHandlerçš„å·¥å‚ç±»</p><p>å·¥å‚æ–¹æ³•çš„å®è´¨ä¸åœ¨äºå®ƒçš„ä¼ å…¥å‚æ•°ï¼Œè€Œåœ¨äºå®ƒçš„è¿”å›ç»“æœã€‚ä»è¡Œä¸ºä¸Šè¿”å›ä¸€ä¸ªæŠ½è±¡çš„å¯¹è±¡ï¼Œè€Œéä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ã€‚</p><pre><code class="java">public class PriceHandlerFactory {    public static PriceHandler createPriceHandler() {        // åˆ›å»ºå¯¹è±¡        PriceHandler sales = new Sales();        PriceHandler lead = new Lead();        PriceHandler manager = new Manager();        PriceHandler director = new Director();        PriceHandler vp = new VicePresident();        PriceHandler ceo = new CEO();        // æŒ‡å®šç›´æ¥åç»§        sales.setSuccessor(lead);        lead.setSuccessor(manager);        manager.setSuccessor(director);        director.setSuccessor(vp);        vp.setSuccessor(ceo);        // è¿”å›é”€å”®äººå‘˜        return sales;    }}</code></pre></li><li><p>æµ‹è¯•ç±»ï¼Œå®¢æˆ·å‘èµ·æŠ˜æ‰£è¯·æ±‚</p><pre><code class="java">public class Test {    public static void main(String[] args) {        Customer customer = new Customer();        customer.setPriceHandler(PriceHandlerFactory.createPriceHandler());        Random random = new Random();        IntStream.rangeClosed(1, 100).forEach(i -&gt; {            System.out.print(i + &quot;:&quot;);            customer.requestDiscount(random.nextFloat());        });    }}</code></pre></li></ol><p>æ‰©å±•ï¼šOOè®¾è®¡åŸåˆ™</p><h2 id="ç¬¬3ç« -å‰–æè´£ä»»é“¾æ¨¡å¼"><a href="#ç¬¬3ç« -å‰–æè´£ä»»é“¾æ¨¡å¼" class="headerlink" title="ç¬¬3ç«  å‰–æè´£ä»»é“¾æ¨¡å¼"></a>ç¬¬3ç«  å‰–æè´£ä»»é“¾æ¨¡å¼</h2><blockquote><p>æœ¬ç« åœ¨æ¦‚å¿µå¼•å…¥å’Œä»£ç å®æˆ˜çš„åŸºç¡€ä¸Šï¼Œå‰–æè´£ä»»é“¾çš„ç‰¹ç‚¹ï¼Œåˆ†æè´£ä»»é“¾å¦‚ä½•å®ç°è§£è€¦ã€‚</p></blockquote><h3 id="3-1-å‰–æè´£ä»»é“¾æ¨¡å¼-08-08"><a href="#3-1-å‰–æè´£ä»»é“¾æ¨¡å¼-08-08" class="headerlink" title="3-1 å‰–æè´£ä»»é“¾æ¨¡å¼ (08:08)"></a>3-1 å‰–æè´£ä»»é“¾æ¨¡å¼ (08:08)</h3><p>åˆ©äºè§£è€¦</p><blockquote><p>å‘å‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“é“¾ä¸Šçš„å“ªä¸€ä¸ªæ¥æ”¶è€…ä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œä»è€Œå®ç°äº†å®¢æˆ·ç«¯å’Œæ¥æ”¶è€…ä¹‹é—´çš„è§£è€¦ã€‚</p></blockquote><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gachln072nj30js09mabb.jpg" alt="è´£ä»»é“¾æ¨¡å¼" style="zoom:50%;" /><p>è´£ä»»é“¾æ¨¡å¼ç¼ºç‚¹</p><blockquote><ol><li>æ—¶é—´ï¼šåœ¨å•ä¸ªHandlerå¯¹è±¡çš„æ—¶é—´å¾ˆçŸ­ï¼Œä½†æ˜¯åœ¨éå†æ•´æ¡é“¾æ—¶ä¼šèŠ±è´¹è¾ƒé•¿çš„æ—¶é—´</li><li>å†…å­˜ï¼šåœ¨åˆ›å»ºæ•´æ¡é“¾æ—¶ï¼Œä¼šåˆ›å»ºå¾ˆå¤šç±»ï¼Œå¯¼è‡´å†…å­˜å¢åŠ ï¼Œæˆä¸ºæ€§èƒ½è¡°å‡ç‚¹ã€‚</li></ol></blockquote><h2 id="ç¬¬4ç« -è´£ä»»é“¾æ¨¡å¼çš„å®é™…åº”ç”¨"><a href="#ç¬¬4ç« -è´£ä»»é“¾æ¨¡å¼çš„å®é™…åº”ç”¨" class="headerlink" title="ç¬¬4ç«  è´£ä»»é“¾æ¨¡å¼çš„å®é™…åº”ç”¨"></a>ç¬¬4ç«  è´£ä»»é“¾æ¨¡å¼çš„å®é™…åº”ç”¨</h2><blockquote><p>ä»‹ç»è´£ä»»é“¾æ¨¡å¼åœ¨å®é™…ä¸­çš„ä½¿ç”¨æƒ…å†µ</p></blockquote><h3 id="4-1-è´£ä»»é“¾æ¨¡å¼çš„åº”ç”¨-06-46"><a href="#4-1-è´£ä»»é“¾æ¨¡å¼çš„åº”ç”¨-06-46" class="headerlink" title="4-1 è´£ä»»é“¾æ¨¡å¼çš„åº”ç”¨ (06:46)"></a>4-1 è´£ä»»é“¾æ¨¡å¼çš„åº”ç”¨ (06:46)</h3><ol><li><p>Javaçš„å¼‚å¸¸æœºåˆ¶ï¼šException Handing</p><blockquote><p>å¼‚å¸¸æ˜¯è¯·æ±‚ï¼Œè°ƒç”¨æ ˆä¸­çš„æ¯ä¸€çº§æ˜¯ä¸€ä¸ªHandlerï¼Œè¿™äº›æ ˆä¸­Handlerå…±åŒæ„å»ºæˆä¸€ä¸ªè´£ä»»é“¾ï¼Œæ ˆé¡¶å…ƒç´ å°±æ˜¯ä¸Šä¸€çº§å…ƒç´ çš„ç›´æ¥åç»§</p></blockquote><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gachwvq1raj30ou0bwgqc.jpg" alt="Javaçš„å¼‚å¸¸æœºåˆ¶" style="zoom:50%;" /></li><li><p>JavaScriptçš„äº‹ä»¶æ¨¡å‹ï¼šJavaScript Event Model</p><blockquote><p>æ¯ä¸€ä¸ªdomèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªHandlerï¼Œå½“ç‚¹å‡»<code>&lt;td&gt;</code>èŠ‚ç‚¹æ—¶ï¼Œå®ƒæ‰€å¯¹åº”çš„çˆ¶èŠ‚ç‚¹å°±æ˜¯è¯¥Handlerçš„ç›´æ¥åç»§ï¼Œè¿™ä¸ªHandlerå¯ä»¥é€‰æ‹©åœ¨è‡ªå·±çš„å±‚çº§å¤„ç†æ‰ç‚¹å‡»äº‹ä»¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸å¤„ç†ï¼Œç›´æ¥å‘åç»§ä¼ é€’</p></blockquote><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gaci0b82oqj30mk0gedm4.jpg" alt="JavaScriptçš„äº‹ä»¶æ¨¡å‹" style="zoom:50%;" /></li><li><p>JavaWebå¼€å‘è¿‡æ»¤å™¨é“¾ï¼šFilterChain in Web</p><p>å¦‚ï¼šç¼–ç Filter</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gaci2t2rvsj30qe0aegn7.jpg" alt="ç¼–ç Filter" style="zoom:35%;" /><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gaci3ny42nj30gy0ckwhc.jpg" alt="FilterChain in Web" style="zoom:50%;" /><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gaci6jdsoej30q209g76i.jpg" alt="FilterChain in Web" style="zoom:50%;" /><p>åœ¨<code>doFilter()</code>æ–¹æ³•å°¾éƒ¨è°ƒç”¨<code>filterChain.doFilter()</code>ï¼Œå°†requestå¯¹è±¡å‘ä¸‹ä¼ é€’ï¼Œé¿å…é“¾æ¡ä¸­æ–­ã€‚</p></li><li><p>Spring Securityå®‰å…¨æ¡†æ¶</p><p>åœ¨Spring Securityä¸­é€šè¿‡å¾ˆå¤šFilterç±»æ„æˆäº†ä¸€æ¡é“¾æ¡æ¥å¤„ç†HTTPè¯·æ±‚ï¼Œä»è€Œä¸ºåº”ç”¨æä¾›äº†è®¤è¯ä¸æˆæƒçš„æœåŠ¡</p></li></ol><p>ä¸€ç‚¹ä½“ä¼š</p><blockquote><p>å°†è®¾è®¡æ¨¡å¼çš„æ€æƒ³ä¸OOï¼ˆObject Orientedï¼‰åŸåˆ™ç›¸å…³è”<br>åœ¨è®¾è®¡æ¨¡å¼ä¸­å‘ç°OOåŸåˆ™å¯ä»¥åŠ æ·±ç†è§£å’Œè®°å¿†<br>æœ€é‡è¦çš„æ˜¯è¦å»<strong>ç†è§£æ¨¡å¼å¦‚ä½•ä½¿æˆ‘ä»¬å»åº”å¯¹å˜åŒ–</strong><br>å¦‚ä½•è®©æˆ‘ä»¬èƒ½å¤Ÿç”¨ä¸€ç§æŠ½è±¡çš„æ–¹å¼æ¥ç¼–ç¨‹</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ORACLEåˆ†é¡µæŸ¥è¯¢SQLè¯­å¥</title>
      <link href="/sql/paging-query-sql/"/>
      <url>/sql/paging-query-sql/</url>
      
        <content type="html"><![CDATA[<ol><li><p>æ— ORDER BYæ’åºçš„å†™æ³•ã€‚(æ•ˆç‡æœ€é«˜)</p><blockquote><p>ç»è¿‡æµ‹è¯•ï¼Œæ­¤æ–¹æ³•æˆæœ¬æœ€ä½ï¼ŒåªåµŒå¥—ä¸€å±‚ï¼Œé€Ÿåº¦æœ€å¿«ï¼å³ä½¿æŸ¥è¯¢çš„æ•°æ®é‡å†å¤§ï¼Œä¹Ÿå‡ ä¹ä¸å—å½±å“ï¼Œé€Ÿåº¦ä¾ç„¶ï¼</p></blockquote><pre><code class="sql">SELECT *FROM (SELECT ROWNUM AS rowno, t.*      FROM emp t      WHERE hire_date BETWEEN TO_DATE (&#39;20060501&#39;, &#39;yyyymmdd&#39;)                      AND TO_DATE (&#39;20060731&#39;, &#39;yyyymmdd&#39;)      AND ROWNUM &lt;= 20) table_aliasWHERE table_alias.rowno &gt;= 10;</code></pre></li><li><p>æœ‰ORDER BYæ’åºçš„å†™æ³•ã€‚(æ•ˆç‡è¾ƒé«˜)</p><blockquote><p>(ç»è¿‡æµ‹è¯•ï¼Œæ­¤æ–¹æ³•éšç€æŸ¥è¯¢èŒƒå›´çš„æ‰©å¤§ï¼Œé€Ÿåº¦ä¹Ÿä¼šè¶Šæ¥è¶Šæ…¢å“¦ï¼)</p></blockquote><pre><code class="sql">SELECT *FROM (SELECT tt.*, ROWNUM AS rowno      FROM (SELECT t.*            FROM emp t            WHERE hire_date BETWEEN TO_DATE (&#39;20060501&#39;, &#39;yyyymmdd&#39;)                            AND TO_DATE (&#39;20060731&#39;, &#39;yyyymmdd&#39;)            ORDER BY create_time DESC, emp_no) tt         ) table_aliasWHERE table_alias.rowno &gt;= 10AND table_alias.rowno &lt;= 20;</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>415-è§‚å¯Ÿè€…æ¨¡å¼</title>
      <link href="/imooc/415-observer-mode/"/>
      <url>/imooc/415-observer-mode/</url>
      
        <content type="html"><![CDATA[<p>ç³»åˆ—è¯¾ç¨‹ï¼š<a href="https://www.tuyrk.cn/imooc/18-java-mode/">æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</a></p><blockquote><p><a href="http://www.imooc.com/learn/415" target="_blank" rel="noopener">http://www.imooc.com/learn/415</a></p><p>ç®€ä»‹ï¼šæœ¬è¯¾ç¨‹é€šè¿‡ä¸€ä¸ªå¤©æ°”é¢„æŠ¥çš„å‘å¸ƒå’Œè®¢é˜…æ¡ˆä¾‹ï¼Œæ¥è®²è§£è§‚å¯Ÿè€…æ¨¡å¼åœ¨Javaé¡¹ç›®ä¸­çš„åº”ç”¨ã€‚ä¸»è¦åŒ…æ‹¬è§‚å¯Ÿè€…æ¨¡å¼çš„ç»“æ„ï¼Œè§‚å¯Ÿè€…æ¨¡å¼çš„ä¸¤ç§å®ç°æ–¹å¼æ¨æ¨¡å‹å’Œæ‹‰æ¨¡å‹ï¼Œä»¥åŠä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ç­‰å†…å®¹ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -æ¦‚è¿°"><a href="#ç¬¬1ç« -æ¦‚è¿°" class="headerlink" title="ç¬¬1ç«  æ¦‚è¿°"></a>ç¬¬1ç«  æ¦‚è¿°</h2><blockquote><p>æœ¬ç« é¦–å…ˆä»‹ç»äº†è¯¾ç¨‹çš„å­¦ä¹ å†…å®¹å’Œè§‚å¯Ÿè€…çš„æ¦‚å¿µï¼Œç„¶åä»‹ç»äº†ä¸€ä¸ªåº”ç”¨è§‚å¯Ÿè€…æ¨¡å¼çš„åœºæ™¯ï¼Œè¯¥åœºæ™¯å°†ä½œä¸ºæ¡ˆä¾‹è´¯ç©¿æ•´ä¸ªè¯¾ç¨‹ã€‚</p></blockquote><h3 id="1-1-è¯¾ç¨‹ç®€ä»‹-07-29"><a href="#1-1-è¯¾ç¨‹ç®€ä»‹-07-29" class="headerlink" title="1-1 è¯¾ç¨‹ç®€ä»‹ (07:29)"></a>1-1 è¯¾ç¨‹ç®€ä»‹ (07:29)</h3><p>è§‚å¯Ÿè€…æ¨¡å¼çš„å®šä¹‰</p><blockquote><p>å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ã€‚å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p></blockquote><p>æ¡ˆä¾‹æµç¨‹å›¾</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1ga5usfsg9uj30xq0h8k0e.jpg" alt="è§‚å¯Ÿè€…æ¨¡å¼æµç¨‹å›¾" style="zoom:35%;" /><h2 id="ç¬¬2ç« -è§‚å¯Ÿè€…æ¨¡å¼å®æˆ˜"><a href="#ç¬¬2ç« -è§‚å¯Ÿè€…æ¨¡å¼å®æˆ˜" class="headerlink" title="ç¬¬2ç«  è§‚å¯Ÿè€…æ¨¡å¼å®æˆ˜"></a>ç¬¬2ç«  è§‚å¯Ÿè€…æ¨¡å¼å®æˆ˜</h2><blockquote><p>æœ¬ç« ä»‹ç»è§‚å¯Ÿè€…æ¨¡å¼çš„ç»“æ„ï¼Œä»¥åŠå¦‚ä½•ç”¨é€šç”¨ä»£ç å®ç°ç¬¬ä¸€ç« ç»™å‡ºçš„åœºæ™¯é—®é¢˜ã€‚</p></blockquote><h3 id="2-1-è§‚å¯Ÿè€…æ¨¡å¼çš„ç»“æ„å’Œè¯´æ˜-02-00"><a href="#2-1-è§‚å¯Ÿè€…æ¨¡å¼çš„ç»“æ„å’Œè¯´æ˜-02-00" class="headerlink" title="2-1 è§‚å¯Ÿè€…æ¨¡å¼çš„ç»“æ„å’Œè¯´æ˜ (02:00)"></a>2-1 è§‚å¯Ÿè€…æ¨¡å¼çš„ç»“æ„å’Œè¯´æ˜ (02:00)</h3><p>è§‚å¯Ÿè€…æ¨¡å¼ç»“æ„</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1ga5uyn7ge2j312w09qgrf.jpg" alt="è§‚å¯Ÿè€…æ¨¡å¼ç»“æ„" style="zoom:35%;" /><p>è§‚å¯Ÿè€…æ¨¡å¼ç±»å›¾</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1ga5uzsfjttj30pc0fwjyz.jpg" alt="è§‚å¯Ÿè€…æ¨¡å¼ç±»å›¾" style="zoom:40%;" /><p>ConcreteSubjectæ˜¯Subjectæ¥å£çš„å®ç°ç±»<br>ConcreteObserveræ˜¯Observeræ¥å£çš„å®ç°ç±»</p><h3 id="2-2-å­¦ä¹ è§‚å¯Ÿè€…æ¨¡å¼é€šç”¨ä»£ç -14-25"><a href="#2-2-å­¦ä¹ è§‚å¯Ÿè€…æ¨¡å¼é€šç”¨ä»£ç -14-25" class="headerlink" title="2-2 å­¦ä¹ è§‚å¯Ÿè€…æ¨¡å¼é€šç”¨ä»£ç  (14:25)"></a>2-2 å­¦ä¹ è§‚å¯Ÿè€…æ¨¡å¼é€šç”¨ä»£ç  (14:25)</h3><p>å®ç°æ­¥éª¤</p><blockquote><ol><li>ç›®æ ‡å¯¹è±¡çš„å®šä¹‰</li><li>å…·ä½“çš„ç›®æ ‡å¯¹è±¡çš„å®šä¹‰</li><li>è§‚å¯Ÿè€…çš„æ¥å£å®šä¹‰</li><li>è§‚å¯Ÿè€…çš„å…·ä½“å®ç°</li></ol></blockquote><p>ä»£ç ç¼–å†™ï¼š</p><ol><li><p>ç›®æ ‡ç±»ï¼Œç›®æ ‡å¯¹è±¡Subject.java</p><blockquote><p>å®ƒçŸ¥é“è§‚å¯Ÿå®ƒçš„è§‚å¯Ÿè€…ï¼Œå¹¶æä¾›æ³¨å†Œï¼ˆæ·»åŠ ï¼‰å’Œåˆ é™¤è§‚å¯Ÿè€…çš„æ¥å£</p></blockquote><pre><code class="java">public class Subject {    // ç”¨æ¥ä¿å­˜æ³¨å†Œçš„è§‚å¯Ÿè€…å¯¹è±¡    private List&lt;Observer&gt; observers = new ArrayList&lt;&gt;();    // å¢åŠ è§‚å¯Ÿè€…    public void attach(Observer observer) {        observers.add(observer);    }    // åˆ é™¤é›†åˆä¸­æŒ‡å®šçš„è§‚å¯Ÿè€…    public void detach(Observer observer) {        observers.remove(observer);    }    // é€šçŸ¥æ‰€æœ‰æ³¨å†Œçš„è§‚å¯Ÿè€…å¯¹è±¡    protected void notifyObserver() {        observers.forEach(observer -&gt; observer.update(this));    }}</code></pre></li><li><p>è§‚å¯Ÿè€…æ¥å£Observer.java</p><blockquote><p>å®šä¹‰ä¸€ä¸ªæ›´æ–°çš„æ¥å£ç»™é‚£äº›åœ¨ç›®æ ‡å¯¹è±¡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™è¢«é€šçŸ¥çš„å¯¹è±¡</p></blockquote><pre><code class="java">public interface Observer {    /**     * æ›´æ–°çš„æ¥å£     *     * @param subject ä¼ å…¥çš„ç›®æ ‡å¯¹è±¡ï¼Œæ–¹ä¾¿è·å–ç›¸åº”çš„ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€     */    void update(Subject subject);}</code></pre></li><li><p>å…·ä½“çš„ç›®æ ‡å¯¹è±¡ConcreteSubject.java</p><blockquote><p>è´Ÿè´£æŠŠæœ‰å…³çŠ¶æ€å­˜å…¥åˆ°ç›¸åº”çš„è§‚å¯Ÿè€…å¯¹è±¡ä¸­</p></blockquote><pre><code class="java">@Getterpublic class ConcreteSubject extends Subject {    // ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€    private String subjectState;    public void setSubjectState(String subjectState) {        this.subjectState = subjectState;        // å½“çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé€šçŸ¥è§‚å¯Ÿè€…        this.notifyObserver();    }}</code></pre></li><li><p>å…·ä½“çš„è§‚å¯Ÿè€…å¯¹è±¡ConcreteObserver.java</p><blockquote><p>å®ç°æ›´æ–°çš„æ–¹æ³•ï¼Œä½¿è‡ªèº«çš„çŠ¶æ€å’Œç›®æ ‡çš„çŠ¶æ€ä¿æŒä¸€è‡´</p></blockquote><pre><code class="java">@Getterpublic class ConcreteObserver implements Observer {    // è§‚å¯Ÿè€…çš„çŠ¶æ€    private String observerState;    /**     * è·å–ç›®æ ‡ç±»çš„çŠ¶æ€ï¼ŒåŒæ­¥åˆ°è§‚å¯Ÿè€…çš„çŠ¶æ€ä¸­     *     * @param subject ä¼ å…¥çš„ç›®æ ‡å¯¹è±¡ï¼Œæ–¹ä¾¿è·å–ç›¸åº”çš„ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€     */    @Override    public void update(Subject subject) {        observerState = ((ConcreteSubject) subject).getSubjectState();    }}</code></pre></li></ol><h3 id="2-3-æ”¹é€ é€šç”¨ä»£ç è§£å†³åœºæ™¯é—®é¢˜-18-14"><a href="#2-3-æ”¹é€ é€šç”¨ä»£ç è§£å†³åœºæ™¯é—®é¢˜-18-14" class="headerlink" title="2-3 æ”¹é€ é€šç”¨ä»£ç è§£å†³åœºæ™¯é—®é¢˜ (18:14)"></a>2-3 æ”¹é€ é€šç”¨ä»£ç è§£å†³åœºæ™¯é—®é¢˜ (18:14)</h3><blockquote><p>è®¢é˜…å¤©æ°”</p></blockquote><p>ä»£ç ç¼–å†™ï¼š</p><ol><li><p>ç®¡ç†è®¢é˜…è€…åˆ—è¡¨WeatherSubject.java</p><pre><code class="java">public class WeatherSubject {    // è®¢é˜…è€…åˆ—è¡¨    private List&lt;Observer&gt; observers = new ArrayList&lt;&gt;();    // æŠŠè®¢é˜…å¤©æ°”çš„äººå¢åŠ åˆ°è®¢é˜…è€…åˆ—è¡¨ä¸­    public void attach(Observer observer) {        observers.add(observer);    }    // åˆ é™¤é›†åˆä¸­çš„æŒ‡å®šè®¢é˜…å¤©æ°”çš„äºº    public void detach(Observer observer) {        observers.remove(observer);    }    // é€šçŸ¥æ‰€æœ‰å·²ç»è®¢é˜…å¤©æ°”çš„äºº    protected void notifyObserver() {        observers.forEach(observer -&gt; observer.update(this));    }}</code></pre></li><li><p>è§‚å¯Ÿè€…æ¥å£Observer.java</p><blockquote><p>å®šä¹‰ä¸€ä¸ªæ›´æ–°çš„æ¥å£ï¼Œç»™é‚£äº›åœ¨ç›®æ ‡å¯¹è±¡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™è¢«é€šçŸ¥çš„å¯¹è±¡</p></blockquote><pre><code class="java">public interface Observer {    /**     * æ›´æ–°çš„æ¥å£     *     * @param subject ä¼ å…¥çš„ç›®æ ‡å¯¹è±¡ï¼Œæ–¹ä¾¿è·å–ç›¸åº”çš„ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€     */    void update(WeatherSubject subject);}</code></pre></li><li><p>å…·ä½“çš„ç›®æ ‡å¯¹è±¡ConcreteWeatherSubject.java</p><blockquote><p>è´Ÿè´£æŠŠæœ‰å…³çŠ¶æ€å­˜å…¥åˆ°ç›¸åº”çš„è§‚å¯Ÿè€…å¯¹è±¡ä¸­</p></blockquote><pre><code class="java">@Getterpublic class ConcreteWeatherSubject extends WeatherSubject {    // è·å–å¤©æ°”çš„å†…å®¹ä¿¡æ¯    private String weatherContent;    public void setWeatherContent(String weatherContent) {        this.weatherContent = weatherContent;        // å†…å®¹æœ‰äº†ï¼Œè¯´æ˜å¤©æ°”æ›´æ–°äº†ï¼Œé€šçŸ¥æ‰€æœ‰è®¢é˜…çš„äºº        this.notifyObserver();    }}</code></pre></li><li><p>å…·ä½“çš„è§‚å¯Ÿè€…å¯¹è±¡ConcreteObserver.java</p><blockquote><p>å®ç°æ›´æ–°çš„æ–¹æ³•ï¼Œä½¿è‡ªèº«çš„çŠ¶æ€å’Œç›®æ ‡çš„çŠ¶æ€ä¿æŒä¸€è‡´</p></blockquote><pre><code class="java">@Datapublic class ConcreteObserver implements Observer {    // è§‚å¯Ÿè€…çš„åç§°ï¼Œæ˜¯è°æ”¶åˆ°äº†è¿™ä¸ªä¿¡æ¯    private String observerName;    // å¤©æ°”çš„å†…å®¹ä¿¡æ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯ä»ç›®æ ‡å¤„è·å–    private String weatherContent;    // æé†’çš„å†…å®¹ï¼Œä¸åŒçš„è§‚å¯Ÿè€…æé†’ä¸åŒçš„å†…å®¹    private String remindThing;    /**     * è·å–ç›®æ ‡ç±»çš„çŠ¶æ€ï¼ŒåŒæ­¥åˆ°è§‚å¯Ÿè€…çš„å¯¹è±¡ä¸­     *     * @param subject ä¼ å…¥çš„ç›®æ ‡å¯¹è±¡ï¼Œæ–¹ä¾¿è·å–ç›¸åº”çš„ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€     */    @Override    public void update(WeatherSubject subject) {        this.weatherContent = ((ConcreteWeatherSubject) subject).getWeatherContent();        System.out.println(observerName + &quot;æ”¶åˆ°äº†å¤©æ°”ä¿¡æ¯ï¼š&quot; + weatherContent + &quot;ï¼Œå‡†å¤‡å»åšï¼š&quot; + remindThing);    }}</code></pre></li><li><p>è®¢é˜…å¤©æ°”-æµ‹è¯•ç±»Client.java</p><pre><code class="java">public class Client {    public static void main(String[] args) {        // 1. åˆ›å»ºç›®æ ‡        ConcreteWeatherSubject weather = new ConcreteWeatherSubject();        // 2. åˆ›å»ºè§‚å¯Ÿè€…        ConcreteObserver girlObserver = new ConcreteObserver();        girlObserver.setObserverName(&quot;å¥³æœ‹å‹&quot;);        girlObserver.setRemindThing(&quot;çº¦ä¼š&quot;);        ConcreteObserver mumObserver = new ConcreteObserver();        mumObserver.setObserverName(&quot;è€å¦ˆ&quot;);        mumObserver.setRemindThing(&quot;è¶…å¸‚æ‰“æŠ˜&quot;);        // 3. æ³¨å†Œè§‚å¯Ÿè€…        weather.attach(girlObserver);        weather.attach(mumObserver);        // 4. ç›®æ ‡å‘å¸ƒå¤©æ°”        weather.setWeatherContent(&quot;æ˜å¤©å¤©æ°”æ™´æœ—&quot;);    }}</code></pre></li></ol><h2 id="ç¬¬3ç« -è§‚å¯Ÿè€…æ¨¡å¼è¯¦è§£"><a href="#ç¬¬3ç« -è§‚å¯Ÿè€…æ¨¡å¼è¯¦è§£" class="headerlink" title="ç¬¬3ç«  è§‚å¯Ÿè€…æ¨¡å¼è¯¦è§£"></a>ç¬¬3ç«  è§‚å¯Ÿè€…æ¨¡å¼è¯¦è§£</h2><blockquote><p>æœ¬ç« ä¸»è¦ä»‹ç»è§‚å¯Ÿè€…æ¨¡å¼å®ç°çš„ä¸¤ç§æ–¹å¼æ¨æ¨¡å‹å’Œæ‹‰æ¨¡å‹ï¼Œåˆ©ç”¨Javaæä¾›çš„è§‚å¯Ÿè€…å®ç°ç¬¬ä¸€ç« çš„åœºæ™¯é—®é¢˜ï¼Œè§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p></blockquote><h3 id="3-1-è®¤è¯†è§‚å¯Ÿè€…æ¨¡å¼-06-32"><a href="#3-1-è®¤è¯†è§‚å¯Ÿè€…æ¨¡å¼-06-32" class="headerlink" title="3-1 è®¤è¯†è§‚å¯Ÿè€…æ¨¡å¼ (06:32)"></a>3-1 è®¤è¯†è§‚å¯Ÿè€…æ¨¡å¼ (06:32)</h3><p>ç›®æ ‡ä¸è§‚å¯Ÿè€…ä¹‹é—´çš„å…³ç³»</p><blockquote><p>ä¸€å¯¹å¤šçš„å…³ç³»<br>ä¸€å¯¹ä¸€çš„å…³ç³»ï¼ˆå¦‚æœè§‚å¯Ÿè€…åªæœ‰ä¸€ä¸ªï¼‰<br>å¤šå¯¹ä¸€çš„å…³ç³»ï¼šå¦‚æœç›®æ ‡æœ‰å¤šä¸ªï¼Œå³ä¸€ä¸ªè§‚å¯Ÿè€…è®¢é˜…å¤šä¸ªç›®æ ‡ï¼Œæ­¤æ—¶ä¸åº”è¯¥åªä½¿ç”¨ä¸€ä¸ªupdateæ–¹æ³•ï¼Œåº”è¯¥ä¸€ä¸ªç›®æ ‡å¯¹åº”ä¸€ä¸ªupdateæ–¹æ³•ã€‚</p></blockquote><p>å•å‘ä¾èµ–</p><blockquote><p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…å’Œç›®æ ‡æ˜¯å•å‘ä¾èµ–ï¼Œåªæœ‰è§‚å¯Ÿè€…ä¾èµ–ç›®æ ‡ï¼Œè€Œä¸æ˜¯ç›®æ ‡ä¾èµ–è§‚å¯Ÿè€…ã€‚<br>ä¸»åŠ¨æƒæŒæ¡åœ¨ç›®æ ‡æ‰‹ä¸­ï¼Œåªæœ‰ç›®æ ‡çŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦é€šçŸ¥è§‚å¯Ÿè€…ã€‚</p></blockquote><p>å‘½åå»ºè®®</p><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼åˆè¢«ç§°ä¸ºå‘å¸ƒè®¢é˜…æ¨¡å¼<br>ç›®æ ‡æ¥å£çš„å®šä¹‰ï¼Œå»ºè®®åœ¨åç§°åé¢è·ŸSubject<br>è§‚å¯Ÿè€…æ¥å£çš„å®šä¹‰ï¼Œå»ºè®®åœ¨åç§°åé¢è·ŸObserver<br>è§‚å¯Ÿè€…æ¥å£çš„æ›´æ–°æ–¹æ³•ï¼Œå»ºè®®åç§°ä¸ºupdate</p></blockquote><p>è§¦å‘é€šçŸ¥çš„æ—¶æœº</p><blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ˜¯åœ¨å®Œæˆäº†çŠ¶æ€ç»´æŠ¤åè§¦å‘ã€‚<br>å› ä¸ºé€šçŸ¥ä¼šä¼ é€’æ•°æ®ï¼Œä¸èƒ½å…ˆé€šçŸ¥ï¼Œåæ”¹æ•°æ®ï¼Œè¿™ä¼šå¯¼è‡´è§‚å¯Ÿè€…å’Œç›®æ ‡å¯¹è±¡çŠ¶æ€ä¸ä¸€è‡´ã€‚</p></blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼çš„è°ƒç”¨é¡ºåºç¤ºæ„å›¾</p><ul><li><p>å‡†å¤‡é˜¶æ®µ</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1ga5x8a3zbcj30q00fcaeb.jpg" alt="è§‚å¯Ÿè€…æ¨¡å¼çš„è°ƒç”¨é¡ºåºç¤ºæ„å›¾-å‡†å¤‡é˜¶æ®µ" style="zoom:40%;" /></li><li><p>è¿è¡Œé˜¶æ®µ</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1ga5x9yj30xj30t80f0gpl.jpg" alt="è§‚å¯Ÿè€…æ¨¡å¼çš„è°ƒç”¨é¡ºåºç¤ºæ„å›¾-è¿è¡Œé˜¶æ®µ" style="zoom:40%;" /></li></ul><p>é€šçŸ¥çš„é¡ºåº</p><blockquote><p>ä»ç†è®ºä¸Šæ¥è¯´ï¼Œå½“ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…çš„æ—¶å€™ï¼Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚<br>å› æ­¤ï¼Œè§‚å¯Ÿè€…å®ç°çš„åŠŸèƒ½ï¼Œç»å¯¹ä¸èƒ½ä¾èµ–äºé€šçŸ¥çš„é¡ºåº<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤šä¸ªè§‚å¯Ÿè€…ä¹‹é—´çš„é¡ºåºæ˜¯å¹³è¡Œçš„ï¼Œç›¸äº’ä¸åº”è¯¥æœ‰å…ˆåä¾èµ–çš„å…³ç³»ã€‚</p></blockquote><h3 id="3-2-å®ç°çš„ä¸¤ç§æ–¹å¼ï¼šæ¨æ¨¡å‹å’Œæ‹‰æ¨¡å‹-07-50"><a href="#3-2-å®ç°çš„ä¸¤ç§æ–¹å¼ï¼šæ¨æ¨¡å‹å’Œæ‹‰æ¨¡å‹-07-50" class="headerlink" title="3-2 å®ç°çš„ä¸¤ç§æ–¹å¼ï¼šæ¨æ¨¡å‹å’Œæ‹‰æ¨¡å‹ (07:50)"></a>3-2 å®ç°çš„ä¸¤ç§æ–¹å¼ï¼šæ¨æ¨¡å‹å’Œæ‹‰æ¨¡å‹ (07:50)</h3><p>æ¨æ¨¡å‹</p><blockquote><p>ç›®æ ‡å¯¹è±¡ä¸»åŠ¨å‘è§‚å¯Ÿè€…æ¨é€ç›®æ ‡çš„è¯¦ç»†ä¿¡æ¯<br>æ¨é€çš„ä¿¡æ¯é€šå¸¸æ˜¯ç›®æ ‡å¯¹è±¡çš„å…¨éƒ¨æˆ–éƒ¨åˆ†æ•°æ®<br>ç›¸å½“äºåœ¨å¹¿æ’­é€šè®¯</p></blockquote><p>æ‹‰æ¨¡å‹ï¼ˆç¬¬äºŒç« çš„å®ç°å±äºæ‹‰æ¨¡å‹ï¼‰</p><blockquote><p>ç›®æ ‡å¯¹è±¡åœ¨é€šçŸ¥è§‚å¯Ÿè€…çš„æ—¶å€™ï¼Œåªä¼ é€’å°‘é‡ä¿¡æ¯<br>å¦‚æœè§‚å¯Ÿè€…éœ€è¦æ›´å…·ä½“çš„ä¿¡æ¯ï¼Œç”±è§‚å¯Ÿè€…ä¸»åŠ¨åˆ°ç›®æ ‡å¯¹è±¡ä¸­è·å–<br>ç›¸å½“äºæ˜¯è§‚å¯Ÿè€…ä»ç›®æ ‡å¯¹è±¡ä¸­æ‹‰æ•°æ®<br>ä¸€èˆ¬è¿™ç§æ¨¡å‹çš„å®ç°ä¸­ï¼Œä¼šæŠŠç›®æ ‡å¯¹è±¡è‡ªèº«é€šè¿‡updateæ–¹æ³•ä¼ é€’ç»™è§‚å¯Ÿè€…</p></blockquote><p>ä¸¤ç§æ¨¡å‹çš„åŒºåˆ«</p><blockquote><p>æ¨æ¨¡å‹æ˜¯å‡å®šç›®æ ‡å¯¹è±¡çŸ¥é“è§‚å¯Ÿè€…éœ€è¦çš„æ•°æ®<br>æ¨æ¨¡å‹ä¼šä½¿è§‚å¯Ÿè€…å¯¹è±¡éš¾ä»¥å¤ç”¨ã€‚updateæ–¹æ³•æ˜¯æŒ‰éœ€å®šåˆ¶çš„ï¼Œå¯èƒ½æ²¡æœ‰å…¼é¡¾æœªè€ƒè™‘åˆ°çš„æƒ…å†µã€‚</p><p>æ‹‰æ¨¡å‹æ˜¯ç›®æ ‡å¯¹è±¡ä¸çŸ¥é“è§‚å¯Ÿè€…å…·ä½“éœ€è¦ä»€ä¹ˆæ•°æ®ï¼Œå› æ­¤æŠŠè‡ªèº«ä¼ é€’ç»™è§‚å¯Ÿè€…ï¼Œç”±è§‚å¯Ÿè€…æ¥å–å€¼<br>æ‹‰æ¨¡å‹ä¸‹ï¼Œupdateæ–¹æ³•çš„å‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡æœ¬èº«ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥é€‚åº”å„ç§æƒ…å†µçš„éœ€è¦</p></blockquote><h3 id="3-3-åˆ©ç”¨Javaæä¾›çš„è§‚å¯Ÿè€…å®ç°-16-56"><a href="#3-3-åˆ©ç”¨Javaæä¾›çš„è§‚å¯Ÿè€…å®ç°-16-56" class="headerlink" title="3-3 åˆ©ç”¨Javaæä¾›çš„è§‚å¯Ÿè€…å®ç° (16:56)"></a>3-3 åˆ©ç”¨Javaæä¾›çš„è§‚å¯Ÿè€…å®ç° (16:56)</h3><p>Javaå®ç°ä¸è‡ªå·±å®ç°çš„å¯¹æ¯”</p><blockquote><ol><li>ä¸éœ€è¦å†å®šä¹‰è§‚å¯Ÿè€…å’Œç›®æ ‡çš„æ¥å£ï¼ŒJDKå·²å®šä¹‰</li><li>å…·ä½“çš„ç›®æ ‡å®ç°é‡Œé¢ä¸éœ€è¦å†ç»´æŠ¤è§‚å¯Ÿè€…çš„æ³¨å†Œä¿¡æ¯ï¼ŒJDKåœ¨Observableç±»é‡Œé¢å·²å®ç°</li><li>è§¦å‘é€šçŸ¥çš„æ–¹å¼æœ‰ä¸€ç‚¹å˜åŒ–ï¼Œè¦å…ˆè°ƒç”¨setChangedæ–¹æ³•ï¼Œè¿™æ˜¯ä¸ºäº†å®ç°æ›´ç²¾ç¡®çš„è§¦å‘æ§åˆ¶</li><li>å…·ä½“è§‚å¯Ÿè€…çš„å®ç°é‡Œé¢ï¼Œupdateæ–¹æ³•èƒ½<strong>åŒæ—¶æ”¯æŒ</strong>æ¨æ¨¡å‹å’Œæ‹‰æ¨¡å‹</li></ol></blockquote><p>ä»£ç ç¼–å†™</p><blockquote><p>ä½¿ç”¨JDKå®ç°è§‚å¯Ÿè€…æ¨¡å¼</p></blockquote><ol><li><p>å¤©æ°”ç›®æ ‡å…·ä½“å®ç°ç±»ConcreteWeatherSubject.java</p><pre><code class="java">@Getterpublic class ConcreteWeatherSubject extends Observable {    // å¤©æ°”æƒ…å†µçš„å†…å®¹    private String content;    public void setContent(String content) {        this.content = content;        // å¤©æ°”æƒ…å†µæœ‰äº†ï¼Œå°±è¦é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…        // åœ¨Javaä¸­ä½¿ç”¨Observeræ¨¡å¼æ—¶ï¼Œéœ€è¦å…ˆè°ƒç”¨setChangedæ–¹æ³•        this.setChanged();        // è°ƒç”¨é€šçŸ¥æ–¹æ³•-æ¨æ¨¡å‹        this.notifyObservers(content);        // è°ƒç”¨é€šçŸ¥æ–¹æ³•-æ‹‰æ¨¡å‹        /*this.notifyObservers();*/    }}</code></pre></li><li><p>å…·ä½“çš„è§‚å¯Ÿè€…å¯¹è±¡ConcreteObserver.java</p><pre><code class="java">@Datapublic class ConcreteObserver implements Observer {    // è§‚å¯Ÿè€…çš„åç§°ï¼Œæ˜¯è°æ”¶åˆ°äº†è¿™ä¸ªä¿¡æ¯    private String observerName;    @Override    public void update(Observable o, Object arg) {        // æ¨æ¨¡å‹        System.out.println(observerName + &quot;æ”¶åˆ°äº†æ¶ˆæ¯ï¼Œç›®æ ‡å¯¹è±¡æ¨é€è¿‡æ¥çš„æ˜¯ï¼š&quot; + arg);        // æ‹‰æ¨¡å‹        ConcreteWeatherSubject weatherSubject = (ConcreteWeatherSubject) o;        System.out.println(observerName + &quot;æ”¶åˆ°äº†æ¶ˆæ¯ï¼Œä¸»åŠ¨åˆ°ç›®æ ‡å¯¹è±¡ä¸­å»æ‹‰ï¼š&quot; + weatherSubject.getContent());    }}</code></pre></li><li><p>è®¢é˜…å¤©æ°”-æµ‹è¯•ç±»Client.java</p><pre><code class="java">public class Client {    public static void main(String[] args) {        // 1. åˆ›å»ºç›®æ ‡        ConcreteWeatherSubject weather = new ConcreteWeatherSubject();        // 2. åˆ›å»ºè§‚å¯Ÿè€…        ConcreteObserver girlObserver = new ConcreteObserver();        girlObserver.setObserverName(&quot;å¥³æœ‹å‹&quot;);        ConcreteObserver mumObserver = new ConcreteObserver();        mumObserver.setObserverName(&quot;è€å¦ˆ&quot;);        // 3. æ³¨å†Œè§‚å¯Ÿè€…        weather.addObserver(girlObserver);        weather.addObserver(mumObserver);        // 4. ç›®æ ‡å‘å¸ƒå¤©æ°”        weather.setContent(&quot;æ˜å¤©å¤©æ°”æ™´æœ—&quot;);    }}</code></pre></li></ol><h3 id="3-4-è§‚å¯Ÿè€…ä¼˜ç¼ºç‚¹-03-46"><a href="#3-4-è§‚å¯Ÿè€…ä¼˜ç¼ºç‚¹-03-46" class="headerlink" title="3-4 è§‚å¯Ÿè€…ä¼˜ç¼ºç‚¹ (03:46)"></a>3-4 è§‚å¯Ÿè€…ä¼˜ç¼ºç‚¹ (03:46)</h3><p>ä¼˜ç‚¹</p><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼å®ç°äº†è§‚å¯Ÿè€…å’Œç›®æ ‡ä¹‹é—´çš„æŠ½è±¡è€¦åˆ</p><p>è§‚å¯Ÿè€…æ¨¡å¼å®ç°äº†åŠ¨æ€è”åŠ¨ï¼ˆæ‰€è°“è”åŠ¨æ˜¯æŒ‡åšä¸€ä¸ªæ“ä½œä¼šå¼•èµ·å…¶ä»–ç›¸å…³çš„æ“ä½œï¼‰</p><p>è§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒå¹¿æ’­é€šä¿¡</p></blockquote><p>ç¼ºç‚¹</p><blockquote><p>å¯èƒ½ä¼šå¼•èµ·æ— è°“çš„æ“ä½œ</p></blockquote><h3 id="3-5-ä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼-03-33"><a href="#3-5-ä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼-03-33" class="headerlink" title="3-5 ä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ (03:33)"></a>3-5 ä½•æ—¶ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ (03:33)</h3><p>è§‚å¯Ÿè€…æ¨¡å¼çš„æœ¬è´¨ï¼š<strong>è§¦å‘è”åŠ¨</strong></p><p>å»ºè®®åœ¨ä»¥ä¸‹æƒ…å†µä¸­é€‰ç”¨è§‚å¯Ÿè€…æ¨¡å¼</p><blockquote><ol><li>å½“ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢çš„æ“ä½œä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢çš„çŠ¶æ€å˜åŒ–</li><li>å¦‚æœåœ¨æ›´æ”¹ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦åŒæ—¶è¿å¸¦æ”¹å˜å…¶ä»–çš„å¯¹è±¡ï¼Œè€Œä¸”ä¸çŸ¥é“ç©¶ç«Ÿåº”è¯¥æœ‰å¤šå°‘å¯¹è±¡éœ€è¦è¢«è¿å¸¦æ”¹å˜</li><li>å½“ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œä½†æ˜¯åˆå¸Œæœ›è¿™ä¸ªå¯¹è±¡å’Œè¢«å®ƒé€šçŸ¥çš„å¯¹è±¡æ˜¯æ¾æ•£è€¦åˆçš„</li></ol></blockquote><h2 id="ç¬¬4ç« -è§‚å¯Ÿè€…æ¨¡å¼è¡ç”Ÿ"><a href="#ç¬¬4ç« -è§‚å¯Ÿè€…æ¨¡å¼è¡ç”Ÿ" class="headerlink" title="ç¬¬4ç«  è§‚å¯Ÿè€…æ¨¡å¼è¡ç”Ÿ"></a>ç¬¬4ç«  è§‚å¯Ÿè€…æ¨¡å¼è¡ç”Ÿ</h2><blockquote><p>æœ¬ç« ä¸»è¦ä»‹ç»å¦‚ä½•åŒºåˆ«å¯¹å¾…è§‚å¯Ÿè€…åœºæ™¯é—®é¢˜ä»¥åŠä»£ç å®ç°ã€‚</p></blockquote><h3 id="4-1-åŒºåˆ«å¯¹å¾…è§‚å¯Ÿè€…åœºæ™¯é—®é¢˜-03-41"><a href="#4-1-åŒºåˆ«å¯¹å¾…è§‚å¯Ÿè€…åœºæ™¯é—®é¢˜-03-41" class="headerlink" title="4-1 åŒºåˆ«å¯¹å¾…è§‚å¯Ÿè€…åœºæ™¯é—®é¢˜ (03:41)"></a>4-1 åŒºåˆ«å¯¹å¾…è§‚å¯Ÿè€…åœºæ™¯é—®é¢˜ (03:41)</h3><p>éœ€æ±‚æ€»ç»“</p><blockquote><p>åŒºåˆ«å¯¹å¾…è§‚å¯Ÿè€…<br>æ ¹æ®éœ€è¦ï¼Œä¸åŒçš„å¤©æ°”æƒ…å†µæ¥é€šçŸ¥ä¸åŒçš„è§‚å¯Ÿè€…</p><p>å¥³æœ‹å‹åªæƒ³æ¥æ”¶ã€Œä¸‹é›¨ã€çš„å¤©æ°”é¢„æŠ¥<br>è€å¦ˆæƒ³è¦æ¥æ”¶ã€Œä¸‹é›¨ã€æˆ–ã€Œä¸‹é›ªã€çš„å¤©æ°”é¢„æŠ¥</p></blockquote><p>è§£å†³æ€è·¯</p><blockquote><p>å½“å¤©æ°”æ›´æ–°æ—¶ï¼Œåœ¨ç›®æ ‡å¤©æ°”ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸ç¬¦åˆè§‚å¯Ÿè€…çš„æ¡ä»¶ï¼Œåˆ™ä¸è¿›è¡Œé€šçŸ¥</p></blockquote><p>å®ç°æ­¥éª¤</p><blockquote><ol><li>å®šä¹‰ç›®æ ‡çš„æŠ½è±¡ç±»å’Œè§‚å¯Ÿè€…çš„æ¥å£</li><li>å®ç°ç›®æ ‡çš„ç±»å’Œè§‚å¯Ÿè€…æ¥å£</li><li>ç¼–å†™æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•</li></ol></blockquote><h3 id="4-2-ä»£ç ç¤ºä¾‹è§£å†³åœºæ™¯é—®é¢˜-07-52"><a href="#4-2-ä»£ç ç¤ºä¾‹è§£å†³åœºæ™¯é—®é¢˜-07-52" class="headerlink" title="4-2 ä»£ç ç¤ºä¾‹è§£å†³åœºæ™¯é—®é¢˜ (07:52)"></a>4-2 ä»£ç ç¤ºä¾‹è§£å†³åœºæ™¯é—®é¢˜ (07:52)</h3><ol><li><p>å¤©æ°”ç›®æ ‡æŠ½è±¡ç±»AbstractWeatherSubject.java</p><pre><code class="java">public abstract class AbstractWeatherSubject {    // ç”¨æ¥ä¿å­˜æ³¨å†Œçš„è§‚å¯Ÿè€…å¯¹è±¡    protected List&lt;Observer&gt; observers = new ArrayList&lt;&gt;();    // å¢åŠ è§‚å¯Ÿè€…æ·»åŠ åˆ°è®¢é˜…åˆ—è¡¨ä¸­    public void attach(Observer observer) {        observers.add(observer);    }    // åˆ é™¤é›†åˆä¸­æŒ‡å®šçš„è§‚å¯Ÿè€…    public void detach(Observer observer) {        observers.remove(observer);    }    // åŒºåˆ«é€šçŸ¥è§‚å¯Ÿè€…-ç”±å­ç±»å®ç°    protected abstract void notifyObservers();}</code></pre></li></ol><h3 id="4-3-è§‚å¯Ÿè€…æ¥å£-01-38"><a href="#4-3-è§‚å¯Ÿè€…æ¥å£-01-38" class="headerlink" title="4-3 è§‚å¯Ÿè€…æ¥å£ (01:38)"></a>4-3 è§‚å¯Ÿè€…æ¥å£ (01:38)</h3><ol start="2"><li><p>è§‚å¯Ÿè€…æ¥å£</p><blockquote><p>å®šä¹‰ä¸€ä¸ªæ›´æ–°çš„æ¥å£æ–¹æ³•ï¼Œç»™é‚£äº›åœ¨ç›®æ ‡å¯¹è±¡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™è¢«é€šçŸ¥çš„è§‚å¯Ÿè€…å¯¹è±¡è°ƒç”¨</p></blockquote><pre><code class="java">public interface Observer {    /**     * æ›´æ–°çš„æ¥å£     *     * @param weatherSubject ä¼ å…¥çš„ç›®æ ‡å¯¹è±¡ï¼Œæ–¹ä¾¿è·å–ç›¸åº”çš„ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€     */    void update(AbstractWeatherSubject weatherSubject);    // è·å–è§‚å¯Ÿè€…åç§°    String getObserverName();    // è®¾ç½®è§‚å¯Ÿè€…åç§°    void setObserverName(String observerName);}</code></pre></li></ol><h3 id="4-4-ç›®æ ‡å®ç°ç±»-07-24"><a href="#4-4-ç›®æ ‡å®ç°ç±»-07-24" class="headerlink" title="4-4 ç›®æ ‡å®ç°ç±» (07:24)"></a>4-4 ç›®æ ‡å®ç°ç±» (07:24)</h3><ol start="3"><li><p>å¤©æ°”ç›®æ ‡çš„å®ç°ç±»ConcreteWeatherSubject.java</p><pre><code class="java">@Getterpublic class ConcreteWeatherSubject extends AbstractWeatherSubject {    // ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€    // å¤©æ°”æƒ…å†µï¼šæ™´å¤©ã€ä¸‹é›¨ã€ä¸‹é›ª    private String weatherContent;    public void setWeatherContent(String weatherContent) {        this.weatherContent = weatherContent;        this.notifyObservers();    }    @Override    protected void notifyObservers() {        // éå†æ‰€æœ‰æ³¨å†Œçš„è§‚å¯Ÿè€…        this.observers.forEach(observer -&gt; {            /*            è§„åˆ™æ˜¯ï¼š                1. ã€Œå¥³æœ‹å‹ã€éœ€è¦ã€Œä¸‹é›¨ã€çš„æ¡ä»¶é€šçŸ¥ï¼Œå…¶ä»–æ¡ä»¶ä¸é€šçŸ¥                2. ã€Œè€å¦ˆã€éœ€è¦ã€Œä¸‹é›¨ã€æˆ–ã€Œä¸‹é›ªã€çš„æ¡ä»¶é€šçŸ¥ï¼Œå…¶ä»–æ¡ä»¶ä¸é€šçŸ¥             */            // 1. å¦‚æœå¤©æ°”æ˜¯æ™´å¤©            // do nothing...            // 2. å¦‚æœå¤©æ°”æ˜¯ä¸‹é›¨            if (Objects.equals(&quot;ä¸‹é›¨&quot;, this.getWeatherContent())) {                if (Objects.equals(&quot;å¥³æœ‹å‹&quot;, observer.getObserverName())) {                    observer.update(this);                }                if (Objects.equals(&quot;è€å¦ˆ&quot;, observer.getObserverName())) {                    observer.update(this);                }            }            // 3. å¦‚æœå¤©æ°”æ˜¯ä¸‹é›ª            if (Objects.equals(&quot;ä¸‹é›ª&quot;, this.getWeatherContent())) {                if (Objects.equals(&quot;è€å¦ˆ&quot;, observer.getObserverName())) {                    observer.update(this);                }            }        });    }}</code></pre></li></ol><h3 id="4-5-è§‚å¯Ÿè€…æ¥å£ç±»çš„å®ç°-05-01"><a href="#4-5-è§‚å¯Ÿè€…æ¥å£ç±»çš„å®ç°-05-01" class="headerlink" title="4-5 è§‚å¯Ÿè€…æ¥å£ç±»çš„å®ç° (05:01)"></a>4-5 è§‚å¯Ÿè€…æ¥å£ç±»çš„å®ç° (05:01)</h3><ol start="4"><li><p>è§‚å¯Ÿè€…çš„å®ç°ç±»ConcreteObserver.java</p><pre><code class="java">@Datapublic class ConcreteObserver implements Observer {    // è§‚å¯Ÿè€…çš„åç§°ï¼Œæ˜¯è°æ”¶åˆ°äº†è¿™ä¸ªæ¶ˆæ¯    private String observerName;    // å¤©æ°”çš„å†…å®¹ä¿¡æ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯ä»ç›®æ ‡å¤„è·å–    private String weatherContent;    // æé†’çš„å†…å®¹ï¼Œä¸åŒçš„è§‚å¯Ÿè€…æé†’ä¸åŒçš„å†…å®¹    private String remindThing;    /**     * è·å–ç›®æ ‡ç±»çš„çŠ¶æ€ï¼ŒåŒæ­¥åˆ°è§‚å¯Ÿè€…çš„çŠ¶æ€ä¸­     *     * @param weatherSubject ä¼ å…¥çš„ç›®æ ‡å¯¹è±¡ï¼Œæ–¹ä¾¿è·å–ç›¸åº”çš„ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€     */    @Override    public void update(AbstractWeatherSubject weatherSubject) {        this.weatherContent = ((ConcreteWeatherSubject) weatherSubject).getWeatherContent();        System.out.println(observerName + &quot;æ”¶åˆ°äº†å¤©æ°”ä¿¡æ¯&quot; + weatherContent + &quot;ï¼Œå‡†å¤‡å»åš&quot; + remindThing);    }}</code></pre></li></ol><h3 id="4-6-æµ‹è¯•-06-24"><a href="#4-6-æµ‹è¯•-06-24" class="headerlink" title="4-6 æµ‹è¯• (06:24)"></a>4-6 æµ‹è¯• (06:24)</h3><ol start="5"><li><p>åŒºåˆ«å¯¹å¾…è§‚å¯Ÿè€…-æµ‹è¯•ç±»Client.java</p><pre><code class="java">public class Client {    @Test    public void test1() {        // 1. åˆ›å»ºç›®æ ‡        ConcreteWeatherSubject weatherSubject = new ConcreteWeatherSubject();        // 2. åˆ›å»ºè§‚å¯Ÿè€…        ConcreteObserver girlObserver = new ConcreteObserver();        girlObserver.setObserverName(&quot;å¥³æœ‹å‹&quot;);        girlObserver.setRemindThing(&quot;å®…åœ¨å®¶é‡Œ&quot;);        ConcreteObserver mumObserver = new ConcreteObserver();        mumObserver.setObserverName(&quot;è€å¦ˆ&quot;);        mumObserver.setRemindThing(&quot;æ”¶è¡£æœå•¦&quot;);        // 3. æ³¨å†Œè§‚å¯Ÿè€…        weatherSubject.attach(girlObserver);        weatherSubject.attach(mumObserver);        // 4. ç›®æ ‡å‘å¸ƒå¤©æ°”        weatherSubject.setWeatherContent(&quot;ä¸‹é›ª&quot;);        weatherSubject.setWeatherContent(&quot;ä¸‹é›¨&quot;);        weatherSubject.setWeatherContent(&quot;ä¸‹å†°é›¹&quot;);    }}</code></pre></li></ol><h2 id="ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>æœ¬ç« å¯¹æœ¬è¯¾ç¨‹å­¦ä¹ çš„å†…å®¹è¿›è¡Œæ€»ç»“ï¼Œå¸®åŠ©å°ä¼™ä¼´ä»¬å·©å›ºæ‰€å­¦çŸ¥è¯†ã€‚</p></blockquote><h3 id="5-1-è¯¾ç¨‹æ€»ç»“-02-16"><a href="#5-1-è¯¾ç¨‹æ€»ç»“-02-16" class="headerlink" title="5-1 è¯¾ç¨‹æ€»ç»“ (02:16)"></a>5-1 è¯¾ç¨‹æ€»ç»“ (02:16)</h3><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼ç®€ä»‹ï¼šåœºæ™¯æè¿°<br>è§‚å¯Ÿè€…æ¨¡å¼å®æˆ˜ï¼šæ¨¡å¼åŸç†<br>è§‚å¯Ÿè€…æ¨¡å¼è¯¦è§£ï¼šæ¨æ‹‰æ¨¡å‹ã€JDKå®ç°ã€ä¼˜ç¼ºç‚¹ã€ä½•æ—¶ä½¿ç”¨<br>è§‚å¯Ÿè€…æ¨¡å¼è¡ç”Ÿï¼šåŒºåˆ«å¯¹å¾…è§‚å¯Ÿè€…</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>146-æ¨¡å¼çš„ç§˜å¯†---é€‚é…å™¨æ¨¡å¼</title>
      <link href="/imooc/146-adapter-mode/"/>
      <url>/imooc/146-adapter-mode/</url>
      
        <content type="html"><![CDATA[<p>ç³»åˆ—è¯¾ç¨‹ï¼š<a href="https://www.tuyrk.cn/imooc/18-java-mode/">æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</a></p><blockquote><p><a href="https://www.imooc.com/learn/146" target="_blank" rel="noopener">https://www.imooc.com/learn/146</a></p><p>ç®€ä»‹ï¼šæ‰€è°“é€‚é…å™¨ï¼Œå°±æ˜¯è¿æ¥â€œæºâ€å’Œâ€œç›®æ ‡â€çš„çº½å¸¦ã€‚æœ¬è¯¾ç¨‹ç”±ç”Ÿæ´»ä¸­å¸¸è§çš„ä¾‹å­å…¥æ‰‹ï¼Œæ·±å…¥æµ…å‡ºçš„è®²è§£é€‚é…å™¨æ¨¡å¼çš„å«ä¹‰ä»¥åŠè¯¥æ¨¡å¼çš„è§’è‰²å…³ç³»ï¼Œè®²è§£åœ¨é€‚é…å™¨æ¨¡å¼ä¸­å¦‚ä½•é€šè¿‡â€œç»„åˆâ€å’Œâ€œç»§æ‰¿â€å®ç°ä»£ç é‡ç”¨ï¼Œä¸ºä½ çš„ Java è¾¾äººé”»é€ æ·»ç –åŠ ç“¦</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -é€‚é…å™¨æ¨¡å¼ç®€ä»‹"><a href="#ç¬¬1ç« -é€‚é…å™¨æ¨¡å¼ç®€ä»‹" class="headerlink" title="ç¬¬1ç«  é€‚é…å™¨æ¨¡å¼ç®€ä»‹"></a>ç¬¬1ç«  é€‚é…å™¨æ¨¡å¼ç®€ä»‹</h2><blockquote><p>é€šè¿‡ç”Ÿæ´»ä¸­çš„é€‚é…å™¨ï¼Œå¼•å¯¼å¤§å®¶äº†è§£ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼</p></blockquote><h3 id="1-1-ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼-03-13"><a href="#1-1-ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼-03-13" class="headerlink" title="1-1 ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼ (03:13)"></a>1-1 ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼ (03:13)</h3><p>ç”Ÿæ´»ä¸­çš„é€‚é…å™¨</p><blockquote><p>ç¿»è¯‘è½¯ä»¶<br>æ’åº§é€‚é…å™¨</p></blockquote><p>é€‚é…å™¨æ¨¡å¼å®šä¹‰</p><blockquote><p>é€‚é…å™¨æ¨¡å¼å°†ä¸€ä¸ªç±»çš„æ¥å£ï¼Œè½¬æ¢æˆå®¢æˆ·æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥åœ¨ä¸€èµ·å·¥ä½œ</p></blockquote><p>é€‚é…å™¨æ¨¡å¼ç±»å›¾</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1ga3gitkzjoj30x40f2wmr.jpg" alt="é€‚é…å™¨æ¨¡å¼ç±»å›¾" style="zoom:40%;" /><p>é€‚é…å™¨åˆ†ç±»</p><blockquote><ol><li><p>èšåˆï¼ˆç»„åˆï¼‰<br>å®šä¹‰ï¼šé‡‡ç”¨èšåˆï¼ˆç»„åˆï¼‰æ–¹å¼çš„é€‚é…å™¨ç§°ä¸ºå¯¹è±¡é€‚é…å™¨<br>ç‰¹ç‚¹ï¼šæŠŠâ€œè¢«é€‚é…è€…â€ä½œä¸ºä¸€ä¸ªå¯¹è±¡èšåˆåˆ°é€‚é…å™¨ç±»ä¸­ï¼Œä»¥ä¿®æ”¹ç›®æ ‡æ¥å£åŒ…è£…è¢«é€‚é…è€…</p></li><li><p>ç»§æ‰¿<br>å®šä¹‰ï¼šé‡‡ç”¨ç»§æ‰¿æ–¹å¼çš„é€‚é…å™¨ç§°ä¸ºç±»é€‚é…å™¨<br>ç‰¹ç‚¹ï¼šé€šè¿‡å¤šé‡ç»§æ‰¿ä¸å…¼å®¹æ¥å£ï¼Œå®ç°å¯¹ç›®æ ‡æ¥å£çš„åŒ¹é…ï¼Œå•ä¸€çš„ä¸ºæŸä¸ªç±»è€Œå®ç°é€‚é…</p></li></ol></blockquote><h2 id="ç¬¬2ç« -é€‚é…å™¨æ¨¡å¼çš„å®ç°"><a href="#ç¬¬2ç« -é€‚é…å™¨æ¨¡å¼çš„å®ç°" class="headerlink" title="ç¬¬2ç«  é€‚é…å™¨æ¨¡å¼çš„å®ç°"></a>ç¬¬2ç«  é€‚é…å™¨æ¨¡å¼çš„å®ç°</h2><blockquote><p>åˆ†åˆ«é‡‡ç”¨ç»„åˆå’Œç»§æ‰¿çš„æ–¹å¼å®ç°é€‚é…å™¨æ¨¡å¼ï¼Œå¹¶è®²è§£ä¸¤ç§è®¾è®¡æ¨¡å¼çš„åŒºåˆ«</p></blockquote><h3 id="2-1-ä½¿ç”¨ç»„åˆçš„æ–¹å¼å®ç°æ’åº§é€‚é…å™¨-08-00"><a href="#2-1-ä½¿ç”¨ç»„åˆçš„æ–¹å¼å®ç°æ’åº§é€‚é…å™¨-08-00" class="headerlink" title="2-1 ä½¿ç”¨ç»„åˆçš„æ–¹å¼å®ç°æ’åº§é€‚é…å™¨ (08:00)"></a>2-1 ä½¿ç”¨ç»„åˆçš„æ–¹å¼å®ç°æ’åº§é€‚é…å™¨ (08:00)</h3><p>æ€ä»¬å®ç°çš„ï¼Ÿ</p><ol><li>å®ç°ç›®æ ‡æ¥å£ ThreePlug</li><li>èšåˆGbTwoPlugç±»åˆ°å½“å‰é€‚é…å™¨ç±»ä¸­ä¸ºæˆå‘˜å˜é‡</li><li>æŠŠâ€è¢«é€‚é…è€…â€ä½œä¸ºä¸€ä¸ªå¯¹è±¡èšåˆåˆ°é€‚é…å™¨ç±»ä¸­ï¼Œä»¥ä¿®æ”¹ç›®æ ‡æ¥å£åŒ…è£…è¢«é€‚é…è€…</li></ol><p>ä»£ç ç¼–å†™</p><ol><li><p>ä¸‰ç›¸æ’åº§æ¥å£ThreePlug.java</p><pre><code class="java">public interface ThreePlug {    // ä½¿ç”¨ä¸‰ç›¸ç”µæµä¾›ç”µ    void powerWithThree();}</code></pre></li><li><p>äºŒç›¸æ’åº§æ¥å£GbTwoPlug.java</p><pre><code class="java">public class GbTwoPlug {    // ä½¿ç”¨äºŒç›¸ç”µæµä¾›ç”µ    public void powerWithTwo() {        System.out.println(&quot;ä½¿ç”¨äºŒç›¸ç”µæµä¾›ç”µ&quot;);    }}</code></pre></li><li><p>äºŒç›¸è½¬ä¸‰ç›¸çš„æ’åº§é€‚é…å™¨-èšåˆæ–¹å¼TwoPlugAdapter.java</p><pre><code class="java">public class TwoPlugAdapter implements ThreePlug{    private GbTwoPlug twoPlug;    public TwoPlugAdapter(GbTwoPlug twoPlug) {        this.twoPlug = twoPlug;    }    @Override    public void powerWithThree() {        System.out.println(&quot;é€šè¿‡è½¬æ¢-èšåˆæ–¹å¼&quot;);        twoPlug.powerWithTwo();    }}</code></pre></li><li><p>ç¬”è®°æœ¬ç”µè„‘NoteBook.java</p><pre><code class="java">public class NoteBook {    // æœŸæœ›ä½¿ç”¨ä¸‰ç›¸æ’åº§è¿›è¡Œå……ç”µ    private ThreePlug threePlug;    public NoteBook(ThreePlug threePlug) {        this.threePlug = threePlug;    }    // ä½¿ç”¨æ’åº§è¿›è¡Œå……ç”µ    public void charge() {        threePlug.powerWithThree();    }    public static void main(String[] args) {        GbTwoPlug twoPlug = new GbTwoPlug();        // ä½¿ç”¨äºŒç›¸è½¬ä¸‰ç›¸çš„é€‚é…å™¨        ThreePlug threePlug = new TwoPlugAdapter(twoPlug);        // ä½¿ç”¨ä¸‰ç›¸æ’åº§è¿›è¡Œå……ç”µ        NoteBook noteBook = new NoteBook(threePlug);        noteBook.charge();    }}</code></pre></li></ol><h3 id="2-2-ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼å®ç°æ’åº§é€‚é…å™¨-05-10"><a href="#2-2-ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼å®ç°æ’åº§é€‚é…å™¨-05-10" class="headerlink" title="2-2 ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼å®ç°æ’åº§é€‚é…å™¨ (05:10)"></a>2-2 ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼å®ç°æ’åº§é€‚é…å™¨ (05:10)</h3><p>ä»£ç ç¼–å†™ï¼š</p><ol><li><p>äºŒç›¸è½¬ä¸‰ç›¸çš„æ’åº§é€‚é…å™¨-ç»§æ‰¿æ–¹å¼TwoPlugAdapterExtends.java</p><pre><code class="java">public class TwoPlugAdapterExtends extends GbTwoPlug implements ThreePlug {    @Override    public void powerWithThree() {        System.out.println(&quot;é€šè¿‡è½¬æ¢-ç»§æ‰¿æ–¹å¼&quot;);        this.powerWithTwo();    }}</code></pre></li><li><p>ç¬”è®°æœ¬ç”µè„‘NoteBook.java</p><pre><code class="java">public class NoteBook {    // æœŸæœ›ä½¿ç”¨ä¸‰ç›¸æ’åº§è¿›è¡Œå……ç”µ    private ThreePlug threePlug;    public NoteBook(ThreePlug threePlug) {        this.threePlug = threePlug;    }    // ä½¿ç”¨æ’åº§è¿›è¡Œå……ç”µ    public void charge() {        threePlug.powerWithThree();    }    public static void main(String[] args) {        ThreePlug threePlug = new TwoPlugAdapterExtends();        NoteBook noteBook = new NoteBook(threePlug);        noteBook.charge();    }}</code></pre></li></ol><p>   ç±»é€‚é…å™¨</p><blockquote><p>ç±»é€‚é…å™¨æ¨¡å¼é€šè¿‡å¤šé‡ç»§æ‰¿ä¸å…¼å®¹æ¥å£ï¼Œå®ç°å¯¹ç›®æ ‡æ¥å£çš„åŒ¹é…ï¼Œå•ä¸€çš„ä¸ºæŸä¸ªç±»è€Œå®ç°é€‚é…ï¼ˆJavaç±»å•ä¸€ç»§æ‰¿ï¼‰</p></blockquote>   <img src="https://tva1.sinaimg.cn/large/006tNbRwgy1ga3hwd5cxaj30to0c6q8t.jpg" alt="ç±»é€‚é…å™¨" style="zoom:45%;" /><h2 id="ç¬¬3ç« -é€‚é…å™¨æ¨¡å¼æ€»ç»“"><a href="#ç¬¬3ç« -é€‚é…å™¨æ¨¡å¼æ€»ç»“" class="headerlink" title="ç¬¬3ç«  é€‚é…å™¨æ¨¡å¼æ€»ç»“"></a>ç¬¬3ç«  é€‚é…å™¨æ¨¡å¼æ€»ç»“</h2><blockquote><p>å¼•å…¥é€‚é…å™¨çš„å˜ä½“ï¼Œå¯å‘çµæ´»ä½¿ç”¨é€‚é…å™¨ã€‚è¯´æ˜äº†é€‚é…å™¨åœ¨å¼€å‘ä¸­ä½“ç°çš„ä½œç”¨</p></blockquote><h3 id="3-1-é€‚é…å™¨æ¨¡å¼çš„æ€»ç»“-01-58"><a href="#3-1-é€‚é…å™¨æ¨¡å¼çš„æ€»ç»“-01-58" class="headerlink" title="3-1 é€‚é…å™¨æ¨¡å¼çš„æ€»ç»“ (01:58)"></a>3-1 é€‚é…å™¨æ¨¡å¼çš„æ€»ç»“ (01:58)</h3><p>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³</p><blockquote><p>åªè¦æ˜¯æŠŠä¸å…¼å®¹çš„è½¬åŒ–æˆå…¼å®¹çš„ã€åŒ¹é…çš„ï¼Œæˆ‘ä»¬å°±å«å®ƒé€‚é…å™¨</p></blockquote><p>æ¨¡å¼çš„å˜ä½“</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1ga3h2mrlv3j30u60bejya.jpg" alt="æ¨¡å¼çš„å˜ä½“" style="zoom:45%;" /><p>é€‚é…å™¨çš„ä½œç”¨</p><blockquote><ol><li><p>é€æ˜ï¼šé€šè¿‡é€‚é…å™¨ï¼Œå®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨åŒä¸€ä¸ªæ¥å£ï¼Œå› è€Œå¯¹å®¢æˆ·ç«¯æ¥è¯´æ˜¯é€æ˜çš„ã€‚è¿™æ ·åšæ›´ç®€å•ã€æ›´ç›´æ¥ã€æ›´ç´§å‡‘</p></li><li><p>é‡ç”¨ï¼šå¤ç”¨äº†ç°å­˜çš„ç±»ï¼Œè§£å†³äº†ç°å­˜ç±»å’Œå¤ç”¨ç¯å¢ƒè¦æ±‚ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p></li><li><p>ä½è€¦åˆï¼šå°†<strong>ç›®æ ‡ç±»</strong>å’Œ<strong>é€‚é…è€…ç±»</strong>è§£è€¦ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªé€‚é…å™¨ç±»é‡ç”¨ç°æœ‰çš„é€‚é…è€…ç±»ï¼Œè€Œæ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç ï¼ˆéµå¾ªå¼€é—­åŸåˆ™ï¼‰</p><p>å¼€é—­åŸåˆ™ï¼šå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾</p></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ›´æ”¹ä½œè€…ä¿¡æ¯</title>
      <link href="/changing-author-info/"/>
      <url>/changing-author-info/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://help.github.com/cn/github/using-git/changing-author-info" target="_blank" rel="noopener">https://help.github.com/cn/github/using-git/changing-author-info</a></p></blockquote><p>ä¿®æ”¹é‚®ç®±å¯¼è‡´æäº¤ç»¿è‰²æ ‡è¯†æ¡†æ¶ˆå¤±ã€‚</p><p>è¦æ›´æ”¹ç°æœ‰æäº¤ä¸­è®°å½•çš„åç§°å’Œ/æˆ–ç”µå­é‚®ä»¶åœ°å€ï¼Œæ‚¨å¿…é¡»é‡å†™ Git ä»“åº“çš„æ•´ä¸ªå†å²è®°å½•ã€‚</p><h3 id="ä½¿ç”¨è„šæœ¬æ›´æ”¹ä»“åº“çš„-Git-å†å²è®°å½•"><a href="#ä½¿ç”¨è„šæœ¬æ›´æ”¹ä»“åº“çš„-Git-å†å²è®°å½•" class="headerlink" title="ä½¿ç”¨è„šæœ¬æ›´æ”¹ä»“åº“çš„ Git å†å²è®°å½•"></a>ä½¿ç”¨è„šæœ¬æ›´æ”¹ä»“åº“çš„ Git å†å²è®°å½•</h3><p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç”¨äºæ›´æ”¹ä»»ä½•æäº¤çš„è„šæœ¬ï¼Œå¯å°†æ­¤å‰åœ¨ä½œè€…æˆ–æäº¤è€…å­—æ®µä¸­å¡«å†™çš„æ—§ç”µå­é‚®ä»¶åœ°å€æ›´æ”¹ä¸ºæ­£ç¡®çš„åç§°å’Œç”µå­é‚®ä»¶åœ°å€ã€‚</p><p><strong>æ³¨</strong>ï¼šè¿è¡Œæ­¤è„šæœ¬ä¼šé‡å†™æ‰€æœ‰ä»“åº“åä½œè€…çš„å†å²è®°å½•ã€‚ å®Œæˆè¿™äº›æ­¥éª¤åï¼Œä»»ä½•æ‹¥æœ‰å¤åˆ»æˆ–å…‹éš†çš„äººéƒ½å¿…é¡»è·å–é‡å†™çš„å†å²è®°å½•ï¼Œå¹¶å°†ä»»ä½•æœ¬åœ°æ›´æ”¹å˜åŸºä¸ºé‡å†™çš„å†å²è®°å½•ã€‚</p><p>è¿è¡Œæ­¤è„šæœ¬ä¹‹å‰ï¼Œæ‚¨éœ€è¦ï¼š</p><ul><li>æ˜¾ç¤ºåœ¨è¦æ›´æ”¹çš„ä½œè€…/æäº¤è€…å­—æ®µä¸­çš„æ—§ç”µå­é‚®ä»¶åœ°å€</li><li>è¦å°†æ­¤ç±»æäº¤å½’å› äºçš„æ­£ç¡®åç§°å’Œç”µå­é‚®ä»¶åœ°å€</li></ul><ol><li><p>æ‰“å¼€ Terminalï¼ˆç»ˆç«¯ï¼‰ã€‚</p></li><li><p>ä¸ºä»“åº“åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„è£¸å…‹éš†ï¼š</p><pre><code class="shell">git clone --bare https://github.com/user/repo.gitcd repo.git</code></pre></li><li><p>å¤åˆ¶å¹¶ç²˜è´´è„šæœ¬ï¼Œæ ¹æ®æ‚¨æ”¶é›†çš„ä¿¡æ¯æ›¿æ¢ä»¥ä¸‹å˜é‡ï¼š</p><ul><li><code>OLD_EMAIL</code></li><li><code>CORRECT_NAME</code></li><li><code>CORRECT_EMAIL</code></li></ul><pre><code class="shell">#!/bin/shgit filter-branch --env-filter &#39;OLD_EMAIL=&quot;your-old-email@example.com&quot;CORRECT_NAME=&quot;Your Correct Name&quot;CORRECT_EMAIL=&quot;your-correct-email@example.com&quot;if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]then    export GIT_COMMITTER_NAME=&quot;$CORRECT_NAME&quot;    export GIT_COMMITTER_EMAIL=&quot;$CORRECT_EMAIL&quot;fiif [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]then    export GIT_AUTHOR_NAME=&quot;$CORRECT_NAME&quot;    export GIT_AUTHOR_EMAIL=&quot;$CORRECT_EMAIL&quot;fi&#39; --tag-name-filter cat -- --branches --tags</code></pre></li><li><p>æŒ‰ <strong>Enter</strong> é”®ä»¥è¿è¡Œè„šæœ¬ã€‚</p></li><li><p>å®¡æŸ¥æ–°çš„ Git å†å²è®°å½•ä»¥æŸ¥æ‰¾é”™è¯¯ã€‚</p></li><li><p>å°†æ›´æ­£çš„å†å²è®°å½•æ¨é€åˆ° GitHubï¼š</p><pre><code class="shell">git push --force --tags origin &#39;refs/heads/*&#39;</code></pre></li><li><p>æ¸…ç†ä¸´æ—¶å…‹éš†ï¼š</p><pre><code class="shell">cd ..rm -rf repo.git</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>214-æ¨¡å¼çš„ç§˜å¯†---ä»£ç†æ¨¡å¼</title>
      <link href="/imooc/214-proxy-mode/"/>
      <url>/imooc/214-proxy-mode/</url>
      
        <content type="html"><![CDATA[<p>ç³»åˆ—è¯¾ç¨‹ï¼š<a href="https://www.tuyrk.cn/imooc/18-java-mode/">æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</a></p><blockquote><p><a href="http://www.imooc.com/learn/214" target="_blank" rel="noopener">http://www.imooc.com/learn/214</a></p><p>ç®€ä»‹ï¼šä»£ç†æ¨¡å¼æ˜¯ä¸€ç§éå¸¸é‡è¦çš„è®¾è®¡æ¨¡å¼ï¼Œåœ¨ Java è¯­è¨€ä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼ŒåŒ…æ‹¬Spring AOP çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼Œéƒ½å’Œä»£ç†æ¨¡å¼æœ‰å¯†åˆ‡å…³ç³»ã€‚ä»€ä¹ˆåœºæ™¯ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Ÿä»£ç†æ¨¡å¼å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæœ¬èŠ‚è¯¾ç¨‹å°†å¸¦ä½ é¢†ç•¥ä»£ç†æ¨¡å¼çš„å¥¥å¦™ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -ä»£ç†æ¨¡å¼æ¦‚å¿µä»‹ç»"><a href="#ç¬¬1ç« -ä»£ç†æ¨¡å¼æ¦‚å¿µä»‹ç»" class="headerlink" title="ç¬¬1ç«  ä»£ç†æ¨¡å¼æ¦‚å¿µä»‹ç»"></a>ç¬¬1ç«  ä»£ç†æ¨¡å¼æ¦‚å¿µä»‹ç»</h2><blockquote><p>æœ¬ç« è®²è¿°äº†ä»£ç†æ¨¡å¼çš„åˆ†ç±»ã€åº”ç”¨åœºæ™¯åŠä½œç”¨</p></blockquote><h3 id="1-1-ä»£ç†æ¨¡å¼æ¦‚å¿µåŠåˆ†ç±»-04-57"><a href="#1-1-ä»£ç†æ¨¡å¼æ¦‚å¿µåŠåˆ†ç±»-04-57" class="headerlink" title="1-1 ä»£ç†æ¨¡å¼æ¦‚å¿µåŠåˆ†ç±» (04:57)"></a>1-1 ä»£ç†æ¨¡å¼æ¦‚å¿µåŠåˆ†ç±» (04:57)</h3><p>å­¦ä¹ æœ¬è¯¾ç¨‹åŸºç¡€</p><blockquote><p>é¢å‘å¯¹è±¡çš„è®¾è®¡æ€ç»´<br>äº†è§£å¤šæ€çš„æ¦‚å¿µ<br>äº†è§£åå°„æœºåˆ¶</p></blockquote><p>è¯¾ç¨‹ç›®æ ‡</p><blockquote><p>ä»£ç†æ¨¡å¼åŸºæœ¬æ¦‚å¿µåŠåˆ†ç±»<br>äº†è§£ä»£ç†æ¨¡å¼å¼€å‘ä¸­åº”ç”¨åœºæ™¯<br>æŒæ¡ä»£ç†æ¨¡å¼å®ç°æ–¹å¼<br>ç†è§£JDKåŠ¨æ€ä»£ç†å®ç°</p></blockquote><p>ä»£ç†æ¨¡å¼å®šä¹‰</p><blockquote><p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®<br>ä»£ç†å¯¹è±¡èµ·åˆ°ä¸­ä»‹ä½œç”¨ï¼Œå¯å»æ‰åŠŸèƒ½æœåŠ¡æˆ–æ·»åŠ é¢å¤–çš„æœåŠ¡</p></blockquote><p>å¸¸è§çš„å‡ ç§ä»£ç†æ¨¡å¼</p><blockquote><p>è¿œç¨‹ä»£ç†ï¼ˆRemote Proxyï¼‰ï¼šä¸ºä¸€ä¸ªä½äºä¸åŒåœ°ç†ç©ºé—´çš„å¯¹è±¡æä¾›å±€åŸŸç½‘ä»£è¡¨å¯¹è±¡ã€‚ç±»ä¼¼äºå®¢æˆ·ç«¯æœåŠ¡å™¨è¿™ç§æ¨¡å¼ï¼Œæ˜¯è¿œç¨‹é€šä¿¡çš„ç¼©å½±<br>è™šæ‹Ÿä»£ç†ï¼ˆVirtual Proxyï¼‰ï¼šæ ¹æ®éœ€è¦å°†èµ„æºæ¶ˆè€—å¾ˆå¤§çš„å¯¹è±¡è¿›è¡Œå»¶è¿Ÿï¼ŒçœŸæ­£éœ€è¦çš„æ—¶å€™è¿›è¡Œåˆ›å»º<br>ä¿æŠ¤ä»£ç†ï¼ˆProtect Proxyï¼‰ï¼šæ§åˆ¶å¯¹è±¡çš„è®¿é—®æƒé™<br>æ™ºèƒ½ä»£ç†ï¼ˆSmart Reference Proxyï¼‰ï¼šæä¾›å¯¹ç›®æ ‡å¯¹è±¡é¢å¤–çš„æœåŠ¡</p></blockquote><h2 id="ç¬¬2ç« -å¸¸ç”¨ä»£ç†æ¨¡å¼åŸç†"><a href="#ç¬¬2ç« -å¸¸ç”¨ä»£ç†æ¨¡å¼åŸç†" class="headerlink" title="ç¬¬2ç«  å¸¸ç”¨ä»£ç†æ¨¡å¼åŸç†"></a>ç¬¬2ç«  å¸¸ç”¨ä»£ç†æ¨¡å¼åŸç†</h2><blockquote><p>æœ¬ç« ä»‹ç»é™æ€ä»£ç†ã€åŠ¨æ€ä»£ç†å®ç°åŸç†ã€‚å¹¶é€šè¿‡æ¡ˆä¾‹è®²è§£ JDK åŠ¨æ€ä»£ç†ä»¥åŠä½¿ç”¨ cglib å®ç°åŠ¨æ€ä»£ç†</p></blockquote><p>æ™ºèƒ½å¼•ç”¨ä»£ç†</p><blockquote><p>é™æ€ä»£ç†<br>åŠ¨æ€ä»£ç†</p></blockquote><h3 id="2-1-é™æ€ä»£ç†æ¦‚å¿µåŠå®ç°-09-32"><a href="#2-1-é™æ€ä»£ç†æ¦‚å¿µåŠå®ç°-09-32" class="headerlink" title="2-1 é™æ€ä»£ç†æ¦‚å¿µåŠå®ç° (09:32)"></a>2-1 é™æ€ä»£ç†æ¦‚å¿µåŠå®ç° (09:32)</h3><p>é™æ€ä»£ç†å®šä¹‰</p><blockquote><p>ä»£ç†å’Œè¢«ä»£ç†å¯¹è±¡åœ¨ä»£ç†ä¹‹å‰æ˜¯ç¡®å®šçš„ã€‚ä»–ä»¬éƒ½å®ç°ç›¸åŒçš„æ¥å£æˆ–è€…ç»§æ‰¿ç›¸åŒçš„æŠ½è±¡ç±»</p></blockquote><p>é™æ€ä»£ç†å›¾</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9yud2gy5yj30qo0jcjxj.jpg" alt="image-20191216203507152" style="zoom:35%;" /><p>é™æ€ä»£ç†</p><blockquote><p>ç»§æ‰¿æ–¹å¼<br>èšåˆæ–¹å¼</p></blockquote><p>ä»£ç ç¼–å†™</p><ol><li><p>å¯è¡Œé©¶çš„æ¥å£Moveable.java</p><pre><code class="java">public interface Moveable {    // è¡Œé©¶çš„æ–¹æ³•    void move();}</code></pre></li><li><p>ä¸€è¾†è½¦å®ç°å¯è¡Œé©¶çš„æ¥å£Car.java</p><pre><code class="java">public class Car implements Moveable {    @Override    public void move() {        // è®°å½•æ±½è½¦è¡Œé©¶çš„æ—¶é—´        /*long startTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦å¼€å§‹è¡Œé©¶...&quot;);*/        // å®ç°å¼€è½¦        try {            System.out.println(&quot;æ±½è½¦è¡Œé©¶ä¸­...&quot;);            Thread.sleep(new Random().nextInt(1000));        } catch (InterruptedException e) { }        /*long endTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦ç»“æŸè¡Œé©¶...æ±½è½¦è¡Œé©¶æ—¶é—´ï¼š&quot; + (endTime - startTime) + &quot;æ¯«ç§’&quot;);*/    }}</code></pre></li><li><p>ä½¿ç”¨ç»§æ‰¿æ–¹å¼å®ç°é™æ€ä»£ç†Car2.java</p><pre><code class="java">public class Car2 extends Car {    @Override    public void move() {        // è®°å½•æ±½è½¦è¡Œé©¶çš„æ—¶é—´        long startTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦å¼€å§‹è¡Œé©¶...&quot;);        super.move();        long endTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦ç»“æŸè¡Œé©¶...æ±½è½¦è¡Œé©¶æ—¶é—´ï¼š&quot; + (endTime - startTime) + &quot;æ¯«ç§’&quot;);    }}</code></pre></li><li><p>ä½¿ç”¨èšåˆæ–¹å¼å®ç°é™æ€ä»£ç†Car3.java</p><pre><code class="java">public class Car3 implements Moveable {    private Car car;    public Car3(Car car) {        super();        this.car = car;    }    @Override    public void move() {        // è®°å½•æ±½è½¦è¡Œé©¶çš„æ—¶é—´        long startTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦å¼€å§‹è¡Œé©¶...&quot;);        car.move();        long endTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦ç»“æŸè¡Œé©¶...æ±½è½¦è¡Œé©¶æ—¶é—´ï¼š&quot; + (endTime - startTime) + &quot;æ¯«ç§’&quot;);    }}</code></pre></li><li><p>é™æ€ä»£ç†æµ‹è¯•ç±»Client.java</p><pre><code class="java">public class Client {    public static void main(String[] args) {        // 1. åœ¨æ‰§è¡Œé€»è¾‘ä»£ç å‰åæ·»åŠ ä¿¡æ¯        /*Moveable car1 = new Car();        car1.move();*/        // 2. ä½¿ç”¨ç»§æ‰¿æ–¹å¼å®ç°é™æ€ä»£ç†        /*Moveable car2 = new Car2();        car2.move();*/        // 3. ä½¿ç”¨èšåˆæ–¹å¼å®ç°é™æ€ä»£ç†        Car car = new Car();        Moveable car3 = new Car3(car);        car3.move();    }}</code></pre></li></ol><h3 id="2-2-èšåˆæ¯”ç»§æ‰¿æ›´é€‚åˆä»£ç†æ¨¡å¼-06-21"><a href="#2-2-èšåˆæ¯”ç»§æ‰¿æ›´é€‚åˆä»£ç†æ¨¡å¼-06-21" class="headerlink" title="2-2 èšåˆæ¯”ç»§æ‰¿æ›´é€‚åˆä»£ç†æ¨¡å¼ (06:21)"></a>2-2 èšåˆæ¯”ç»§æ‰¿æ›´é€‚åˆä»£ç†æ¨¡å¼ (06:21)</h3><p>åœºæ™¯åˆ†æ</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9yve0p9zqj31io0u07wh.jpg" alt="å®ç°åŠŸèƒ½å åŠ " style="zoom:25%;" /><p>ä»£ç†ç±»åŠŸèƒ½å åŠ </p><blockquote><ol><li>è®°å½•æ—¥å¿—</li><li>è®°å½•æ—¶é—´</li><li>æƒé™åŠŸèƒ½</li></ol></blockquote><ul><li><p>ä½¿ç”¨ç»§æ‰¿æ–¹å¼</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9yvfjlv03j30ta0e40zg.jpg" alt="ä½¿ç”¨ç»§æ‰¿æ–¹å¼" style="zoom:40%;" /><p>ä½¿ç”¨ç»§æ‰¿æ–¹å¼æ¥å®ç°ä»£ç†åŠŸèƒ½çš„å åŠ ï¼Œä»£ç†ç±»ä¼šæ— é™çš„è†¨èƒ€ä¸‹å»ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼ä¸æ¨èä½¿ç”¨ã€‚</p></li><li><p>ä½¿ç”¨èšåˆæ–¹å¼ï¼Œé€šè¿‡ä»£ç æ¼”ç¤º</p></li></ul><p>ä»£ç ç¼–å†™</p><ol><li><p>æ±½è½¦æ—¥å¿—åŠŸèƒ½çš„ä»£ç†CarLogProxy.java</p><pre><code class="java">public class CarLogProxy implements Moveable {    private Moveable m;    // å› ä¸ºä»£ç†ç±»å’Œè¢«ä»£ç†ç±»éƒ½æ˜¯å®ç°äº†ç›¸åŒçš„æ¥å£ï¼Œæ‰€ä»¥æ„é€ æ–¹æ³•ä¼ é€’çš„å¯¹è±¡ä¹Ÿæ˜¯å¯ä»¥æ˜¯Moveableå¯¹è±¡    public CarLogProxy(Moveable m) {        super();        this.m = m;    }    @Override    public void move() {        System.out.println(&quot;æ—¥å¿—å¼€å§‹&quot;);        m.move();        System.out.println(&quot;æ—¥å¿—ç»“æŸ&quot;);    }}</code></pre></li><li><p>æ±½è½¦è¡Œé©¶æ—¶é—´çš„ä»£ç†CarTimeProxy.java</p><pre><code class="java">public class CarTimeProxy implements Moveable {    private Moveable m;    // å› ä¸ºä»£ç†ç±»å’Œè¢«ä»£ç†ç±»éƒ½æ˜¯å®ç°äº†ç›¸åŒçš„æ¥å£ï¼Œæ‰€ä»¥æ„é€ æ–¹æ³•ä¼ é€’çš„å¯¹è±¡ä¹Ÿæ˜¯å¯ä»¥æ˜¯Moveableå¯¹è±¡    public CarTimeProxy(Moveable m) {        super();        this.m = m;    }    @Override    public void move() {        // è®°å½•æ±½è½¦è¡Œé©¶çš„æ—¶é—´        long startTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦å¼€å§‹è¡Œé©¶...&quot;);        m.move();        long endTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦ç»“æŸè¡Œé©¶...æ±½è½¦è¡Œé©¶æ—¶é—´ï¼š&quot; + (endTime - startTime) + &quot;æ¯«ç§’&quot;);    }}</code></pre></li><li><p>é™æ€ä»£ç†æµ‹è¯•ç±»-åŠŸèƒ½å åŠ çš„èšåˆæ–¹å¼Client.java</p><pre><code class="java">public class Client {    public static void main(String[] args) {     Car car = new Car();        CarLogProxy clp = new CarLogProxy(car);        CarTimeProxy ctp = new CarTimeProxy(clp);        ctp.move();    }}</code></pre><pre><code>æ±½è½¦å¼€å§‹è¡Œé©¶...æ—¥å¿—å¼€å§‹æ±½è½¦è¡Œé©¶ä¸­...æ—¥å¿—ç»“æŸæ±½è½¦ç»“æŸè¡Œé©¶...æ±½è½¦è¡Œé©¶æ—¶é—´ï¼š845æ¯«ç§’</code></pre></li></ol><p>æ€è€ƒï¼šCarTimeProxyåªæ˜¯å¯¹æ±½è½¦æ—¶é—´ä»£ç†ï¼Œå¦‚æœæ­¤æ—¶éœ€è¦å¯¹ç«è½¦ã€è‡ªè¡Œè½¦è¿›è¡Œæ—¶é—´ä»£ç†æ€ä»¬åŠï¼Ÿè¿˜éœ€è¦é‡æ–°å†™ç«è½¦æ—¶é—´ä»£ç†ç±»ã€æ±½è½¦æ—¶é—´ä»£ç†ç±»ä¹ˆï¼Ÿ</p><h3 id="2-3-äº†è§£-JDK-åŠ¨æ€ä»£ç†-08-52"><a href="#2-3-äº†è§£-JDK-åŠ¨æ€ä»£ç†-08-52" class="headerlink" title="2-3 äº†è§£ JDK åŠ¨æ€ä»£ç† (08:52)"></a>2-3 äº†è§£ JDK åŠ¨æ€ä»£ç† (08:52)</h3><p>åœºæ™¯åˆ†æ</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9ywn8g86yj31dm0nids3.jpg" alt="å¤šç§ç±»çš„æ—¶é—´ä»£ç†" style="zoom:25%;" /><p>æœ‰æ²¡æœ‰æ–¹æ³•åŠ¨æ€äº§ç”Ÿä»£ç†ï¼Œå®ç°å¯¹ä¸åŒç±»ã€ä¸åŒæ–¹æ³•çš„ä»£ç†å‘¢ï¼Ÿ</p><p>JDKåŠ¨æ€ä»£ç†ç±»å›¾</p><blockquote><p>JavaåŠ¨æ€ä»£ç†æœºåˆ¶ä»¥å·§å¦™çš„æ–¹å¼å®ç°äº†ä»£ç†æ¨¡å¼çš„è®¾è®¡ç†å¿µ</p></blockquote><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9ywswu2xgj31ba0a2whb.jpg" alt="JDKåŠ¨æ€ä»£ç†ç±»å›¾" style="zoom:25%;" /><p>JavaåŠ¨æ€ä»£ç†ç±»ä½äº<code>java.lang.reflect</code>åŒ…ä¸‹ï¼Œä¸€èˆ¬ä¸»è¦æ¶‰åŠåˆ°ä»¥ä¸‹ä¸¤ä¸ªç±»ï¼š</p><blockquote><ul><li><p><code>Interface InvocationHandler</code>ï¼šè¯¥æ¥å£ä¸­ä»…å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•</p><p><code>public Object invoke(Object obj, Method method, Object[] args)</code></p><p>åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œç¬¬ä¸€å‚æ•°<code>obj</code>ä¸€èˆ¬æ˜¯æŒ‡ä»£ç†ç±»ï¼Œ<code>method</code>æ˜¯è¢«ä»£ç†çš„æ–¹æ³•ï¼Œ<code>args</code>ä¸ºè¯¥æ–¹æ³•çš„å‚æ•°æ•°ç»„ã€‚</p><p>è¿™ä¸ªæŠ½è±¡æ–¹æ³•åœ¨ä»£ç†ç±»ä¸­åŠ¨æ€å®ç°ã€‚</p></li><li><p>Proxyï¼šè¯¥ç±»å³ä¸ºåŠ¨æ€ä»£ç†ç±»</p><p><code>static Object newProxyInstance(ClassLoader loader, Class[] interfaces, InvocationHandler h)</code></p><p>è¿”å›ä»£ç†ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¿”å›åçš„ä»£ç†ç±»å¯ä»¥å½“åšè¢«ä»£ç†ç±»ä½¿ç”¨</p><p>ï¼ˆå¯ä½¿ç”¨è¢«ä»£ç†ç±»çš„åœ¨æ¥å£ä¸­å£°æ˜è¿‡çš„æ–¹æ³•ï¼‰</p></li></ul></blockquote><p>åŠ¨æ€ä»£ç†å®ç°æ­¥éª¤</p><blockquote><ol><li>åˆ›å»ºä¸€ä¸ªå®ç°InvocationHandleræ¥å£çš„ç±»ï¼Œå®ƒå¿…é¡»å®ç°invokeæ–¹æ³•(å®ç°ä¸šåŠ¡é€»è¾‘)</li><li>åˆ›å»ºè¢«ä»£ç†çš„ç±»ä»¥åŠæ¥å£</li><li>è°ƒç”¨Proxyçš„é™æ€æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªä»£ç†ç±»<br>Proxy.newProxyInstance(CLassLoader loader, Class[] interfaces, InvocationHandler h)</li><li>é€šè¿‡ä»£ç†è°ƒç”¨æ–¹æ³•</li></ol></blockquote><p>ä»£ç ç¼–å†™</p><ol><li><p>ä½¿ç”¨JDKåŠ¨æ€ä»£ç†-å¯¹æ—¶é—´ä¸Šçš„å¤„ç†TimeHandler.java</p><pre><code class="java">public class TimeHandler implements InvocationHandler {    private Object target;    public TimeHandler(Object target) {        super();        this.target = target;    }    /**     * JDKåŠ¨æ€ä»£ç†     * @param proxy  è¢«ä»£ç†å¯¹è±¡     * @param method è¢«ä»£ç†å¯¹è±¡æ–¹æ³•     * @param args   æ–¹æ³•çš„å‚æ•°     * @return æ–¹æ³•çš„è¿”å›å€¼     */    @Override    public Object invoke(Object proxy, Method method, Object[] args) throws InvocationTargetException, IllegalAccessException {        long startTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦å¼€å§‹è¡Œé©¶...&quot;);        method.invoke(target, args);        long endTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦ç»“æŸè¡Œé©¶...æ±½è½¦è¡Œé©¶æ—¶é—´ï¼š&quot; + (endTime - startTime) + &quot;æ¯«ç§’&quot;);        return null;    }}</code></pre></li><li><p>JDKåŠ¨æ€ä»£ç†æµ‹è¯•ç±»Test.java</p><pre><code class="java">public class Test {    public static void main(String[] args) {        Car car = new Car();        InvocationHandler h = new TimeHandler(car);        Class&lt;? extends Car&gt; cls = car.getClass();        // ä½¿ç”¨Proxyç±»newProxyInstanceæ–¹æ³•åŠ¨æ€åˆ›å»ºä»£ç†ç±»        /*          loader ç±»åŠ è½½å™¨          interfaces å®ç°æ¥å£          h InvocationHandler         */        Moveable m = (Moveable)Proxy.newProxyInstance(cls.getClassLoader(), cls.getInterfaces(), h);        m.move();    }}</code></pre></li></ol><p>æ‰€è°“Dynamic Proxyæ˜¯è¿™æ ·ä¸€ç§class</p><blockquote><p>å®ƒæ˜¯åœ¨è¿è¡Œæ—¶ç”Ÿæˆçš„class<br>è¯¥classéœ€è¦å®ç°ä¸€ç»„interface<br>ä½¿ç”¨åŠ¨æ€ä»£ç†ç±»æ—¶ï¼Œå¿…é¡»å®ç°InvocationHandleræ¥å£</p></blockquote><h3 id="2-4-ä½¿ç”¨-cglib-åŠ¨æ€äº§ç”Ÿä»£ç†-07-44"><a href="#2-4-ä½¿ç”¨-cglib-åŠ¨æ€äº§ç”Ÿä»£ç†-07-44" class="headerlink" title="2-4 ä½¿ç”¨ cglib åŠ¨æ€äº§ç”Ÿä»£ç† (07:44)"></a>2-4 ä½¿ç”¨ cglib åŠ¨æ€äº§ç”Ÿä»£ç† (07:44)</h3><p>JDKåŠ¨æ€ä»£ç†ä¸CGLIBåŠ¨æ€ä»£ç†åŒºåˆ«</p><blockquote><p>JDKåŠ¨æ€ä»£ç†</p><ol><li>åªèƒ½ä»£ç†å®ç°äº†æ¥å£çš„ç±»</li><li>æ²¡æœ‰å®ç°æ¥å£çš„ç±»ä¸èƒ½å®ç°JDKçš„åŠ¨æ€ä»£ç†</li></ol><p>CGLIBåŠ¨æ€ä»£ç†</p><ol><li>é’ˆå¯¹ç±»æ¥å®ç°ä»£ç†çš„</li><li>å¯¹æŒ‡å®šç›®æ ‡ç±»äº§ç”Ÿä¸€ä¸ªå­ç±»ï¼Œé€šè¿‡æ–¹æ³•æ‹¦æˆªæŠ€æœ¯æ‹¦æˆªæ‰€æœ‰çˆ¶ç±»æ–¹æ³•çš„è°ƒç”¨</li><li>å› ä¸ºæ˜¯ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼ï¼Œæ‰€ä»¥ä¸èƒ½å¯¹finalä¿®é¥°çš„ç±»æ¥è¿›è¡Œä»£ç†</li></ol></blockquote><p>ä»£ç ç¼–å†™</p><ol><li><p>æ·»åŠ ç›¸å…³ä¾èµ–</p><pre><code class="java">&lt;!-- https://mvnrepository.com/artifact/cglib/cglib-nodep --&gt;&lt;dependency&gt;    &lt;groupId&gt;cglib&lt;/groupId&gt;    &lt;artifactId&gt;cglib-nodep&lt;/artifactId&gt;    &lt;version&gt;3.3.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;&lt;dependency&gt;    &lt;groupId&gt;commons-io&lt;/groupId&gt;    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;    &lt;version&gt;2.6&lt;/version&gt;&lt;/dependency&gt;</code></pre></li><li><p>ä»£ç†ç±»CglibProxy.java</p><pre><code class="java">public class CglibProxy implements MethodInterceptor {    private Enhancer enhancer = new Enhancer();    public Object getProxy(Class clazz) {        // è®¾ç½®åˆ›å»ºå­ç±»çš„ç±»ï¼Œå³ä¸ºå“ªä¸ªç±»äº§ç”Ÿä»£ç†ç±»        enhancer.setSuperclass(clazz);        enhancer.setCallback(this);        return enhancer.create();    }    /**     * æ‹¦æˆªæ‰€æœ‰ç›®æ ‡ç±»æ–¹æ³•çš„è°ƒç”¨     *     * @param o ç›®æ ‡ç±»çš„å®ä¾‹     * @param method ç›®æ ‡æ–¹æ³•çš„åå°„å¯¹è±¡     * @param objects æ–¹æ³•çš„å‚æ•°     * @param methodProxy ä»£ç†ç±»çš„å®ä¾‹     * @return æ–¹æ³•çš„è¿”å›å€¼     * @throws Throwable     */    @Override    public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable {        System.out.println(&quot;æ—¥å¿—å¼€å§‹...&quot;);        // ä»£ç†ç±»è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•        methodProxy.invokeSuper(o, objects);        System.out.println(&quot;æ—¥å¿—ç»“æŸ...&quot;);        return null;    }}</code></pre></li><li><p>ç«è½¦Train.java</p><pre><code class="java">public class Train implements Moveable {    @Override    public void move() {        System.out.println(&quot;ç«è½¦ğŸš„è¡Œé©¶ä¸­&quot;);    }}</code></pre><p>å¦‚éœ€å†æœ‰é£æœºç±»åˆ™æ­¥éª¤4ï¼š</p></li><li><p>é£æœºPlain.java</p><pre><code class="java">public class Plain implements Moveable {    @Override    public void move() {        System.out.println(&quot;é£æœºâœˆè¡Œé©¶ä¸­&quot;);    }}</code></pre></li><li><p>CGLIBä»£ç†çš„æµ‹è¯•ç±»Client.java</p><pre><code class="java">public class Client {    public static void main(String[] args) {        CglibProxy cglibProxy = new CglibProxy();        Train t = (Train) cglibProxy.getProxy(Train.class);        t.move();        Plain p = (Plain) cglibProxy.getProxy(Plain.class);        p.move();    }}</code></pre></li></ol><h2 id="ç¬¬3ç« -è‡ªå®šä¹‰ç±»æ¨¡æ‹Ÿ-JDK-åŠ¨æ€ä»£ç†çš„å®ç°"><a href="#ç¬¬3ç« -è‡ªå®šä¹‰ç±»æ¨¡æ‹Ÿ-JDK-åŠ¨æ€ä»£ç†çš„å®ç°" class="headerlink" title="ç¬¬3ç«  è‡ªå®šä¹‰ç±»æ¨¡æ‹Ÿ JDK åŠ¨æ€ä»£ç†çš„å®ç°"></a>ç¬¬3ç«  è‡ªå®šä¹‰ç±»æ¨¡æ‹Ÿ JDK åŠ¨æ€ä»£ç†çš„å®ç°</h2><blockquote><p>æœ¬ç« é€šè¿‡ç¼–å†™è‡ªå®šä¹‰ç±»ï¼Œæ¨¡æ‹Ÿ JDK åŠ¨æ€ä»£ç†çš„å®ç°ï¼Œå¸®åŠ©å¤§å®¶æ·±å…¥ç†è§£ JDK åŠ¨æ€ä»£ç†çš„å®ç°åŸç†ä¸æœºåˆ¶</p></blockquote><h3 id="3-1-æ¨¡æ‹Ÿ-JDK-åŠ¨æ€ä»£ç†å®ç°æ€è·¯åˆ†æåŠç®€å•å®ç°-15-55"><a href="#3-1-æ¨¡æ‹Ÿ-JDK-åŠ¨æ€ä»£ç†å®ç°æ€è·¯åˆ†æåŠç®€å•å®ç°-15-55" class="headerlink" title="3-1 æ¨¡æ‹Ÿ JDK åŠ¨æ€ä»£ç†å®ç°æ€è·¯åˆ†æåŠç®€å•å®ç° (15:55)"></a>3-1 æ¨¡æ‹Ÿ JDK åŠ¨æ€ä»£ç†å®ç°æ€è·¯åˆ†æåŠç®€å•å®ç° (15:55)</h3><p>åŠ¨æ€ä»£ç†å®ç°æ€è·¯</p><blockquote><p>å®ç°åŠŸèƒ½ï¼šé€šè¿‡Proxyçš„newProxyInstanceè¿”å›ä»£ç†å¯¹è±¡</p><ol><li>å£°æ˜ä¸€æ®µæºç ï¼ˆåŠ¨æ€äº§ç”Ÿä»£ç†ï¼‰</li><li>ç¼–è¯‘ç¼–ç ï¼ˆJDK Compiler APIï¼‰ï¼Œäº§ç”Ÿæ–°çš„ç±»ï¼ˆä»£ç†ç±»ï¼‰</li><li>å°†è¿™ä¸ªç±»loadåˆ°å†…å­˜å½“ä¸­ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆä»£ç†å¯¹è±¡ï¼‰</li><li>returnä»£ç†å¯¹è±¡</li></ol></blockquote><p>æ³¨ï¼šä»¥ä¸‹ä»£ç ä¸ºæ•™å¸ˆæºç ï¼Œåœ¨GitHubå­¦ä¹ é¡¹ç›®ä»£ç ä¸­å·²åš<strong>æ”¹è¿›ï¼šæ–¹æ³•å¯ä¼ é€’å‚æ•°</strong></p><p>ä»£ç ç¼–å†™</p><ol><li><p>æ¨¡æ‹ŸJDKåŠ¨æ€ä»£ç†-ä¸šåŠ¡å¤„ç†ç±»InvocationHandler.java</p><pre><code class="java">public interface InvocationHandler {    /**     * @param obj    è¢«ä»£ç†å¯¹è±¡     * @param method è¢«ä»£ç†å¯¹è±¡æ–¹æ³•     */    void invoke(Object obj, Method method);}</code></pre></li><li><p>æ¨¡æ‹ŸJDKåŠ¨æ€ä»£ç†-ä»£ç†ç±»Proxy.java</p><pre><code class="java">public class Proxy {    public static Object newProxyInstance(Class infce, InvocationHandler h)            throws IOException, ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {        String rt = &quot;\r\n&quot;;        StringBuilder methodStr = new StringBuilder();        for (Method m : infce.getMethods()) {            methodStr.                    append(&quot;@Override&quot;).append(rt).                    append(&quot;public void &quot;).append(m.getName()).append(&quot;() {&quot;).append(rt)                    .append(&quot;    try {&quot;).append(rt)                    .append(&quot;        Method md = &quot;).append(infce.getName()).append(&quot;.class.getMethod(\&quot;&quot;).append(m.getName()).append(&quot;\&quot;);&quot;).append(rt)                    .append(&quot;        h.invoke(this, md);&quot;).append(rt)                    .append(&quot;    } catch (Exception e) {&quot;).append(rt)                    .append(&quot;        e.printStackTrace();&quot;).append(rt)                    .append(&quot;    }&quot;).append(rt)                    .append(&quot;}&quot;).append(rt);        }        String str = &quot;package com.tuyrk.analog_jdkproxy;&quot; + rt +                &quot;import com.tuyrk.analog_jdkproxy.InvocationHandler;&quot; + rt +                &quot;import java.lang.reflect.Method;&quot; + rt +                &quot;public class $Proxy0 implements &quot; + infce.getName() + &quot; {&quot; + rt +                &quot;    private InvocationHandler h;&quot; + rt +                &quot;    public $Proxy0(InvocationHandler h) {&quot; + rt +                &quot;        this.h = h;&quot; + rt +                &quot;    }&quot; + rt +                methodStr + rt +                &quot;}&quot; + rt;        // äº§ç”Ÿä»£ç†ç±»çš„Javaæ–‡ä»¶        String filename = System.getProperty(&quot;user.dir&quot;) + &quot;/214-proxy-mode/target/classes/com/tuyrk/analog_jdkproxy/$Proxy0.java&quot;;        File file = new File(filename);        FileUtils.writeStringToFile(file, str, StandardCharsets.UTF_8);        // ç¼–è¯‘-æ‹¿åˆ°ç¼–è¯‘å™¨        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();        // æ–‡ä»¶ç®¡ç†è€…        StandardJavaFileManager fileMgr = compiler.getStandardFileManager(null, null, null);        // è·å–æ–‡ä»¶        Iterable&lt;? extends JavaFileObject&gt; units = fileMgr.getJavaFileObjects(filename);        // ç¼–è¯‘ä»»åŠ¡        CompilationTask task = compiler.getTask(null, fileMgr, null, null, null, units);        // è¿›è¡Œç¼–è¯‘        task.call();        fileMgr.close();        // è·å–ç±»åŠ è½½å™¨        ClassLoader cl = ClassLoader.getSystemClassLoader();        // åŠ è½½åˆ°å†…å­˜        Class&lt;?&gt; c = cl.loadClass(&quot;com.tuyrk.analog_jdkproxy.$Proxy0&quot;);        // è·å–æ„é€ å™¨        Constructor&lt;?&gt; ctr = c.getConstructor(InvocationHandler.class);        return ctr.newInstance(h);    }}</code></pre></li><li><p>æ¨¡æ‹ŸJDKåŠ¨æ€ä»£ç†-æ—¶é—´ä¸šåŠ¡é€»è¾‘å¤„ç†TimeHandler.java</p><pre><code class="java">public class TimeHandler implements InvocationHandler {    private Object target;    public TimeHandler(Object target) {        super();        this.target = target;    }    @Override    public void invoke(Object obj, Method method) {        long startTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦å¼€å§‹è¡Œé©¶...&quot;);        method.invoke(target);        long endTime = System.currentTimeMillis();        System.out.println(&quot;æ±½è½¦ç»“æŸè¡Œé©¶...æ±½è½¦è¡Œé©¶æ—¶é—´ï¼š&quot; + (endTime - startTime) + &quot;æ¯«ç§’&quot;);    }}</code></pre></li><li><p>æ¨¡æ‹ŸJDKåŠ¨æ€ä»£ç†-æµ‹è¯•ç±»Client.java</p><pre><code class="java">public class Client {    public static void main(String[] args) throws Exception {     Car car = new Car();        InvocationHandler h = new TimeHandler(car);        Moveable m = (Moveable)Proxy.newProxyInstance(Moveable.class, h);        m.move();    }}</code></pre></li></ol><h2 id="ç¬¬4ç« -ä»£ç†æ¨¡å¼æ€»ç»“"><a href="#ç¬¬4ç« -ä»£ç†æ¨¡å¼æ€»ç»“" class="headerlink" title="ç¬¬4ç«  ä»£ç†æ¨¡å¼æ€»ç»“"></a>ç¬¬4ç«  ä»£ç†æ¨¡å¼æ€»ç»“</h2><blockquote><p>æ€»ç»“ä»£ç†æ¨¡å¼åˆ†ç±»ã€åº”ç”¨åœºæ™¯ã€å®ç°åŸç†ã€å®ç°æ–¹å¼åŠå®ç°æ–¹å¼ä¼˜ç¼ºç‚¹</p></blockquote><h3 id="4-1-è¯¾ç¨‹æ€»ç»“-03-47"><a href="#4-1-è¯¾ç¨‹æ€»ç»“-03-47" class="headerlink" title="4-1 è¯¾ç¨‹æ€»ç»“ (03:47)"></a>4-1 è¯¾ç¨‹æ€»ç»“ (03:47)</h3><blockquote><p>ä»£ç†æ¨¡å¼æ¦‚å¿µã€åˆ†ç±»åŠåº”ç”¨åœºæ™¯<br>é™æ€ä»£ç†ï¼ˆç»§æ‰¿ã€èšåˆï¼‰<br>JDKåŠ¨æ€ä»£ç†å®ç°æ—¥å¿—å¤„ç†åŠŸèƒ½<br>æ¨¡æ‹ŸJDKåŠ¨æ€ä»£ç†å®ç°</p></blockquote><p>ä¸ºä»€ä¹ˆåªè®²è§£äº†æ™ºèƒ½å¼•ç”¨ä»£ç†ï¼Ÿ</p><ul><li>æ™ºèƒ½å¼•ç”¨ä»£ç†åº”ç”¨æœ€å¹¿ï¼Œå¦‚æ—¥å¿—å¤„ç†ã€æƒé™å¤„ç†ã€äº‹åŠ¡å¤„ç†</li></ul><p>ä»£ç†æ¨¡å¼-åŠ¨æ€ä»£ç†ï¼š</p><blockquote><p>ä¸æ”¹å˜åŸæœ‰ç±»çš„æƒ…å†µä¸‹ï¼Œå¢åŠ ä¸€äº›é¢å¤–çš„ä¸šåŠ¡é€»è¾‘ã€‚AOP</p></blockquote><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1ga0w09naq0j30tk0bywhs.jpg" alt="ä»£ç†æ¨¡å¼-åŠ¨æ€ä»£ç†" style="zoom:50%;" /><p>ä»£ç†æ¨¡å¼ï¼š</p><blockquote><ul><li>ä»£ç†æ¨¡å¼åŸºæœ¬æ¦‚å¿µåŠåˆ†ç±»</li><li>é™æ€ä»£ç†æ¦‚å¿µåŠå®ä¾‹</li><li>åŠ¨æ€ä»£ç†æ¦‚å¿µåŠå®ä¾‹</li><li>æ¨¡æ‹ŸJDKåŠ¨æ€ä»£ç†å®ç°</li><li>è¯¾ç¨‹æ€»ç»“</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>261-æ¨¡å¼çš„ç§˜å¯†---å·¥å‚æ¨¡å¼</title>
      <link href="/imooc/261-factory-mode/"/>
      <url>/imooc/261-factory-mode/</url>
      
        <content type="html"><![CDATA[<p>ç³»åˆ—è¯¾ç¨‹ï¼š<a href="https://www.tuyrk.cn/imooc/18-java-mode/">æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</a></p><blockquote><p><a href="http://www.imooc.com/learn/261" target="_blank" rel="noopener">http://www.imooc.com/learn/261</a></p><p>ç®€ä»‹ï¼šå·¥å‚æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯åœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨éå¸¸å¹¿æ³›çš„è®¾è®¡æ¨¡å¼ã€‚ä¸»è¦ç”¨äºå®ç°å°†å¯¹è±¡çš„å®ä¾‹åŒ–éƒ¨åˆ†å–å‡ºæ¥ï¼Œè¿›è€Œä¼˜åŒ–ç³»ç»Ÿæ¶æ„ï¼Œå¢å¼ºç³»ç»Ÿçš„æ‰©å±•æ€§ã€‚æœ¬è¯¾ç¨‹å³å°†è®²è§£Javaä¸­çš„å·¥å‚æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„åº”ç”¨ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -å·¥å‚æ¨¡å¼æ¦‚è¿°"><a href="#ç¬¬1ç« -å·¥å‚æ¨¡å¼æ¦‚è¿°" class="headerlink" title="ç¬¬1ç«  å·¥å‚æ¨¡å¼æ¦‚è¿°"></a>ç¬¬1ç«  å·¥å‚æ¨¡å¼æ¦‚è¿°</h2><blockquote><p>æœ¬ç« ä¸»è¦ä»‹ç»å·¥å‚æ¨¡å¼çš„åŸºæœ¬æ¦‚å¿µã€‚</p></blockquote><h3 id="1-1-å·¥å‚æ¨¡å¼æ¦‚è¿°-10-29"><a href="#1-1-å·¥å‚æ¨¡å¼æ¦‚è¿°-10-29" class="headerlink" title="1-1 å·¥å‚æ¨¡å¼æ¦‚è¿° (10:29)"></a>1-1 å·¥å‚æ¨¡å¼æ¦‚è¿° (10:29)</h3><p>ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ</p><blockquote><p>è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“</p></blockquote><p>åº”ç”¨è®¾è®¡æ¨¡å¼çš„å¥½å¤„ï¼Ÿ</p><blockquote><p>è®¾è®¡æ¨¡å¼æ˜¯ä¼˜ç§€çš„ä½¿ç”¨æ¡ˆä¾‹<br>ä½¿ç”¨è®¾è®¡æ¨¡å¼å¯æé«˜ä»£ç çš„é‡ç”¨æ€§<br>è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£<br>ä¿è¯ä»£ç å¯é æ€§</p></blockquote><p>é‡ç‚¹å†…å®¹</p><blockquote><ul><li>å·¥å‚æ¨¡å¼çš„æ¦‚å¿µ</li><li>å·¥å‚æ¨¡å¼çš„æ„å›¾</li><li>å·¥å‚æ¨¡å¼çš„åº”ç”¨åœºæ™¯</li><li>å·¥å‚æ¨¡å¼çš„è®¾è®¡æ€æƒ³</li><li>å·¥å‚æ¨¡å¼çš„å¥½å¤„</li></ul></blockquote><p>å·¥å‚æ¨¡å¼çš„æ¦‚å¿µ</p><blockquote><p>å®ä¾‹åŒ–å¯¹è±¡ï¼Œç”¨å·¥å‚æ–¹æ³•ä»£æ›¿newæ“ä½œ<br>å·¥å‚æ¨¡å¼åŒ…æ‹¬å·¥å‚æ–¹æ³•æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼<br>æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ‰©å±•</p></blockquote><p>å·¥å‚æ¨¡å¼çš„æ„å›¾</p><blockquote><p>å®šä¹‰ä¸€ä¸ªæ¥å£æ¥åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯è®©å­ç±»æ¥å†³å®šå“ªäº›ç±»éœ€è¦è¢«å®ä¾‹åŒ–<br>å·¥å‚æ–¹æ³•æŠŠå®ä¾‹åŒ–çš„å·¥ä½œæ¨è¿Ÿåˆ°å­ç±»ä¸­å»å®ç°</p></blockquote><p>ä»€ä¹ˆæƒ…å†µä¸‹é€‚åˆå·¥å‚æ¨¡å¼</p><blockquote><p>æœ‰ä¸€ç»„ç±»ä¼¼çš„å¯¹è±¡éœ€è¦åˆ›å»º<br>åœ¨ç¼–ç æ—¶ä¸èƒ½é¢„è§éœ€è¦åˆ›å»ºå“ªç§ç±»çš„å®ä¾‹<br>ç³»ç»Ÿéœ€è¦è€ƒè™‘æ‰©å±•æ€§ï¼Œä¸åº”ä¾èµ–äºäº§å“ç±»å®ä¾‹å¦‚ä½•è¢«åˆ›å»ºã€ç»„åˆå’Œè¡¨è¾¾çš„ç»†èŠ‚</p></blockquote><p>é¡¹ç›®ä¸­çš„ç°çŠ¶</p><blockquote><p>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ç»å¸¸é¢ä¸´ç€â€œå¯¹è±¡â€çš„åˆ›å»ºå·¥ä½œï¼Œç”±äºéœ€æ±‚çš„å˜åŒ–ï¼Œè¿™ä¸ªå¯¹è±¡å¯èƒ½éšä¹‹ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†å®ƒå´æ‹¥æœ‰æ¯”è¾ƒç¨³å®šçš„æ¥å£ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸€ç§å°è£…æœºåˆ¶æ¥éš”ç¦»å‡ºè¿™ä¸ªæ˜“å˜å¯¹è±¡çš„å˜åŒ–ï¼Œä»è€Œä¿è¯ç³»ç»Ÿä¸­å…¶ä»–ä¾èµ–è¯¥å¯¹è±¡çš„å¯¹è±¡ä¸éšç€éœ€æ±‚å˜åŒ–è€Œå˜åŒ–ã€‚</p></blockquote><p>åŸºäºé¡¹ç›®ç°çŠ¶å°†ä»£ç è¿›è¡Œå¦‚ä¸‹è®¾è®¡</p><blockquote><ol><li>å°½é‡æ¾è€¦åˆï¼Œä¸€ä¸ªå¯¹è±¡çš„ä¾èµ–å¯¹è±¡çš„å˜åŒ–ä¸æœ¬èº«æ— å…³</li><li>å…·ä½“äº§å“ä¸å®¢æˆ·ç«¯å‰¥ç¦»ï¼Œè´£ä»»åˆ†å‰²</li></ol></blockquote><p>å·¥å‚æ–¹æ³•æ¨¡å¼ç±»å›¾</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9xivji6hxj30wd0dg74w.jpg" alt="å·¥å‚æ–¹æ³•æ¨¡å¼ç±»å›¾" style="zoom:40%;" /><p>æŠ½è±¡å·¥å‚æ¨¡å¼ç±»å›¾</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9xiw8hc24j30v20irabj.jpg" alt="æŠ½è±¡å·¥å‚æ¨¡å¼ç±»å›¾" style="zoom:50%;" /><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9xixfipxsj30zt0ijjsh.jpg" alt="å·¥å‚äº§å“æ—" style="zoom:40%;" /><h2 id="ç¬¬2ç« -å·¥å‚æ¨¡å¼åº”ç”¨"><a href="#ç¬¬2ç« -å·¥å‚æ¨¡å¼åº”ç”¨" class="headerlink" title="ç¬¬2ç«  å·¥å‚æ¨¡å¼åº”ç”¨"></a>ç¬¬2ç«  å·¥å‚æ¨¡å¼åº”ç”¨</h2><blockquote><p>æœ¬ç« é€šè¿‡æ¡ˆä¾‹æ¼”ç¤ºå·¥å‚æ¨¡å¼çš„åº”ç”¨ã€‚</p></blockquote><h3 id="2-1-å·¥å‚æ¨¡å¼åº”ç”¨-22-18"><a href="#2-1-å·¥å‚æ¨¡å¼åº”ç”¨-22-18" class="headerlink" title="2-1 å·¥å‚æ¨¡å¼åº”ç”¨ (22:18)"></a>2-1 å·¥å‚æ¨¡å¼åº”ç”¨ (22:18)</h3><ol><li><p>å‘å‹æ¥å£HairInterface.java</p><pre><code class="java">public interface HairInterface {    // ç”»å‘å‹    void draw();}</code></pre></li><li><p>å·¦ååˆ†å‘å‹LeftHair.java</p><pre><code class="java">public class LeftHair implements HairInterface {    @Override    public void draw() {        System.out.println(&quot;å·¦ååˆ†å‘å‹&quot;);    }}</code></pre></li><li><p>å³ååˆ†å‘å‹RightHair.java</p><pre><code class="java">public class RightHair implements HairInterface {    @Override    public void draw() {        System.out.println(&quot;å³ååˆ†å‘å‹&quot;);    }}</code></pre></li><li><p>ä¸­åˆ†å‘å‹InHair.java</p><pre><code class="java">public class InHair implements HairInterface {    @Override    public void draw() {        System.out.println(&quot;ä¸­åˆ†å‘å‹&quot;);    }}</code></pre></li><li><p>é…ç½®æ–‡ä»¶application.properties</p><pre><code class="java">left=com.tuyrk.hair.impl.LeftHairright=com.tuyrk.hair.impl.RightHairin=com.tuyrk.hair.impl.InHair</code></pre></li><li><p>propertiesæ–‡ä»¶çš„è¯»å–å·¥å…·ç±»PropertiesReader.java</p><pre><code class="java">public class PropertiesReader {    // è·å–é…ç½®æ–‡ä»¶çš„å±æ€§    public static Map&lt;String, String&gt; getProperties() {        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();        try {            Resource resource = new ClassPathResource(&quot;application.properties&quot;);            Properties props = PropertiesLoaderUtils.loadProperties(resource);            Enumeration&lt;?&gt; en = props.propertyNames();            while (en.hasMoreElements()) {                String key = (String) en.nextElement();                String property = props.getProperty(key);                map.put(key, property);            }        } catch (IOException e) {}        return map;    }}</code></pre></li><li><p>å‘å‹å·¥å‚HairFactory.java</p><pre><code class="java">public class HairFactory {    /**     * æ ¹æ®ç±»å‹æ¥åˆ›å»ºå¯¹è±¡     * @param key å‘å‹ç§ç±»     * @return å‘å‹å®ä¾‹     */    public HairInterface getHair(String key) {        if (&quot;left&quot;.equals(key)) {            return new LeftHair();        } else if (&quot;right&quot;.equals(key)) {            return new RightHair();        }        return null;    }    /**     * æ ¹æ®ç±»çš„åç§°æ¥ç”Ÿäº§å¯¹è±¡     * @param className ç±»å     * @return å‘å‹å®ä¾‹     */    public HairInterface getHairByClass(String className) {        try {            return (HairInterface) Class.forName(className).newInstance();        } catch (Exception e) {}        return null;    }    /**     * æ ¹æ®ç±»çš„åç§°æ¥ç”Ÿäº§å¯¹è±¡     * @param key ç±»åå¯¹åº”åç§°     * @return å‘å‹å®ä¾‹     */    public HairInterface getHairByClassKey(String key) {        try {            Map&lt;String, String&gt; map = PropertiesReader.getProperties();            return (HairInterface) Class.forName(map.get(key)).newInstance();        } catch (Exception e) {}        return null;    }}</code></pre></li><li><p>æµ‹è¯•ç±»Test.java</p><pre><code class="jaa">public class Test {    public static void main(String[] args) {        // æ¯éœ€è¦åˆ›å»ºä¸€ä¸ªå‘å‹éƒ½éœ€è¦é‡æ–°newï¼Œå¹¶ä¸”è°ƒç”¨draw()        /*HairInterface left = new LeftHair();        left.draw();        HairInterface right = new RightHair();        right.draw();*/        // if-elseå®ç°        /*HairFactory factory = new HairFactory();        HairInterface left = factory.getHair(&quot;left&quot;);        left.draw();*/        // classNameå®ç°        /*HairFactory factory = new HairFactory();         *//*HairInterface left = factory.getHairByClass(&quot;com.tuyrk.hair.impl.LeftHair&quot;);*//*        HairInterface left = factory.getHairByClass(LeftHair.class.getName());        left.draw();*/        // è¯»å–propertieså®ç°        HairFactory factory = new HairFactory();        HairInterface hair = factory.getHairByClassKey(&quot;in&quot;);        hair.draw();    }}</code></pre></li></ol><h2 id="ç¬¬3ç« -æŠ½è±¡å·¥å‚æ¨¡å¼åº”ç”¨"><a href="#ç¬¬3ç« -æŠ½è±¡å·¥å‚æ¨¡å¼åº”ç”¨" class="headerlink" title="ç¬¬3ç«  æŠ½è±¡å·¥å‚æ¨¡å¼åº”ç”¨"></a>ç¬¬3ç«  æŠ½è±¡å·¥å‚æ¨¡å¼åº”ç”¨</h2><blockquote><p>æœ¬ç« é€šè¿‡æ¡ˆä¾‹æ¼”ç¤ºæŠ½è±¡å·¥å‚æ¨¡å¼çš„åº”ç”¨</p></blockquote><h3 id="3-1-æŠ½è±¡å·¥å‚æ¨¡å¼åº”ç”¨-12-34"><a href="#3-1-æŠ½è±¡å·¥å‚æ¨¡å¼åº”ç”¨-12-34" class="headerlink" title="3-1 æŠ½è±¡å·¥å‚æ¨¡å¼åº”ç”¨ (12:34)"></a>3-1 æŠ½è±¡å·¥å‚æ¨¡å¼åº”ç”¨ (12:34)</h3><ol><li><p>ç”·å­©Boy.java</p><pre><code class="java">public interface Boy {    void drawMan();}</code></pre></li><li><p>å¥³å­©Girl.java</p><pre><code class="java">public interface Girl {    void drawWomen();}</code></pre></li><li><p>æ–°å¹´ç³»åˆ—çš„ç”·å­©HNBoy.java</p><pre><code class="java">public class HNBoy implements Boy {    @Override    public void drawMan() {        System.out.println(&quot;æ–°å¹´ç”·å­©&quot;);    }}</code></pre></li><li><p>æ–°å¹´ç³»åˆ—çš„å¥³å­©HNGirl.java</p><pre><code class="java">public class HNGirl implements Girl {    @Override    public void drawWomen() {        System.out.println(&quot;æ–°å¹´å¥³å­©&quot;);    }}</code></pre></li><li><p>åœ£è¯ç³»åˆ—çš„ç”·å­©MCBoy.java</p><pre><code class="java">public class MCBoy implements Boy {    @Override    public void drawMan() {        System.out.println(&quot;åœ£è¯ç”·å­©&quot;);    }}</code></pre></li><li><p>åœ£è¯ç³»åˆ—çš„å¥³å­©MCGirl.java</p><pre><code class="java">public class MCGirl implements Girl {    @Override    public void drawWomen() {        System.out.println(&quot;åœ£è¯å¥³å­©&quot;);    }}</code></pre></li><li><p>äººç‰©çš„å®ç°æ¥å£PersonFactory.java</p><pre><code class="java">public interface PersonFactory {    // ç”·å­©æ¥å£    Boy getBoy();    // å¥³å­©æ¥å£    Girl getGirl();}</code></pre></li><li><p>æ–°å¹´ç³»åˆ—å·¥å‚HNFactory.java</p><pre><code class="java">public class HNFactory implements PersonFactory {    @Override    public Boy getBoy() {        return new HNBoy();    }    @Override    public Girl getGirl() {        return new HNGirl();    }}</code></pre></li><li><p>åœ£è¯ç³»åˆ—å·¥å‚MCFactory.java</p><pre><code class="java">public class MCFactory implements PersonFactory {    @Override    public Boy getBoy() {        return new MCBoy();    }    @Override    public Girl getGirl() {        return new MCGirl();    }}</code></pre></li><li><p>æµ‹è¯•ç±»Test.java</p><pre><code class="java">public class Test {    public static void main(String[] args) {        // åœ£è¯å¥³å­©        PersonFactory mcFactory = new MCFactory();        Girl girl = mcFactory.getGirl();        girl.drawWomen();// åœ£è¯å¥³å­©        // æ–°å¹´ç”·å­©        PersonFactory hnFactory = new HNFactory();        Boy boy = hnFactory.getBoy();        boy.drawMan();// æ–°å¹´ç”·å­©    }}</code></pre></li></ol><h2 id="ç¬¬4ç« -æ€»ç»“"><a href="#ç¬¬4ç« -æ€»ç»“" class="headerlink" title="ç¬¬4ç«  æ€»ç»“"></a>ç¬¬4ç«  æ€»ç»“</h2><blockquote><p>æ€»ç»“å·¥å‚æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„åº”ç”¨ã€‚</p></blockquote><h3 id="4-1-æ€»ç»“-06-06"><a href="#4-1-æ€»ç»“-06-06" class="headerlink" title="4-1 æ€»ç»“ (06:06)"></a>4-1 æ€»ç»“ (06:06)</h3><p>åœºæ™¯åº”ç”¨</p><ul><li><p>JDBC</p><p>æ˜¯ä¸€ç§ç”¨äºæ‰§è¡ŒSQLè¯­å¥çš„Java APIï¼Œå¯ä»¥ä¸ºå¤šç§å…³ç³»æ•°æ®åº“æä¾›ç»Ÿä¸€è®¿é—®ï¼Œå®ƒç”±ä¸€ç»„ç”¨Javaè¯­è¨€ç¼–å†™çš„ç±»å’Œæ¥å£ç»„æˆ</p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1g9xm3aowguj30o806mt8w.jpg" alt="JDBC" style="zoom:75%;" /></li><li><p>Spring BeanFactory</p><p>BeanFactoryï¼Œä½œä¸ºSpringåŸºç¡€çš„IoCå®¹å™¨ï¼Œæ˜¯Springçš„ä¸€ä¸ªBeanå·¥å‚ã€‚å¦‚æœå•ä»å·¥å‚æ¨¡å¼çš„è§’åº¦æ€è€ƒï¼Œä»–å°±æ˜¯ç”¨æ¥â€œç”Ÿäº§Beanâ€ï¼Œç„¶åæä¾›ç»™å®¢æˆ·ç«¯ã€‚</p><p>Beançš„å®ä¾‹åŒ–è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>è°ƒç”¨Beançš„é»˜è®¤æ„é€ æ–¹æ³•ï¼Œæˆ–æŒ‡å®šçš„æ„é€ æ–¹æ³•ï¼Œç”Ÿæˆbeanå®ä¾‹ï¼ˆæš‚ç§°ä¸ºinstance1ï¼‰</li><li>å¦‚æœBeançš„é…ç½®æ–‡ä»¶ä¸­æ³¨å…¥äº†Beanå±æ€§å€¼ï¼Œåˆ™åœ¨instance1åŸºç¡€ä¸Šè¿›è¡Œå±æ€§æ³¨å…¥å½¢æˆinstance2ï¼Œè¿™ç§æ³¨å…¥æ˜¯è¦†ç›–æ€§çš„ã€‚</li><li>å¦‚æœBeanå®ç°äº†InitializingBeanæ¥å£ï¼Œåˆ™è°ƒç”¨afterPropertiesSet()æ–¹æ³•ï¼Œæ¥æ”¹å˜æˆ–æ“ä½œinstance2ï¼Œå¾—åˆ°instance3</li><li>å¦‚æœBeançš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šäº†init-method=â€initâ€å±æ€§ï¼Œåˆ™ä¼šè°ƒç”¨æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œåˆ™åœ¨instance3çš„åŸºç¡€ä¸Šè°ƒç”¨åˆå§‹åŒ–æ–¹æ³•init()ï¼Œå°†å¯¹è±¡æœ€ç»ˆåˆå§‹åŒ–ä¸ºinstance4ï¼›å½“ç„¶ï¼Œè¿™ä¸ªåˆå§‹åŒ–çš„åå­—æ˜¯ä»»æ„çš„ã€‚</li></ol></li></ul><p>å·¥å‚æ–¹æ³•æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼å¯¹æ¯”</p><blockquote><p>å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§æç«¯æƒ…å†µä¸‹çš„æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥çœ‹æˆæ˜¯å·¥å‚æ¨¡å¼çš„æ¨å¹¿ã€‚<br>å·¥å‚æ¨¡å¼ç”¨æ¥åˆ›å»ºä¸€ä¸ªäº§å“çš„ç­‰çº§ç»“æ„ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯ç”¨æ¥åˆ›å»ºå¤šä¸ªäº§å“çš„ç­‰çº§ç»“æ„<br>å·¥å‚æ¨¡å¼åªæœ‰ä¸€ä¸ªæŠ½è±¡äº§å“ç±»ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼æœ‰å¤šä¸ªæŠ½è±¡äº§å“ç±»</p></blockquote><p>å·¥å‚æ¨¡å¼çš„å®ç°å¸®åŠ©æˆ‘ä»¬</p><blockquote><p>ç³»ç»Ÿå¯ä»¥åœ¨ä¸ä¿®æ”¹å…·ä½“å·¥å‚è§’è‰²çš„æƒ…å†µä¸‹å¼•è¿›æ–°çš„äº§å“<br>å®¢æˆ·ç«¯ä¸å¿…å…³å¿ƒå¯¹è±¡å¦‚ä½•åˆ›å»ºï¼Œæ˜ç¡®äº†èŒè´£<br>æ›´å¥½çš„ç†è§£é¢å‘å¯¹è±¡çš„åŸåˆ™ã€‚é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸è¦é¢å‘å®ç°ç¼–ç¨‹</p></blockquote><p>å·¥å‚æ¨¡å¼é€‚ç”¨äºå“ªäº›åœºæ™¯</p><blockquote><p>ä¸€ä¸ªç³»ç»Ÿåº”å½“ä¸ä¾èµ–äºäº§å“ç±»å®ä¾‹è¢«åˆ›ç«‹ï¼Œç»„æˆå’Œè¡¨ç¤ºçš„ç»†èŠ‚ã€‚è¿™å¯¹æ‰€æœ‰å½¢æ€çš„å·¥å‚æ¨¡å¼éƒ½æ˜¯é‡è¦çš„<br>è¿™ä¸ªç³»ç»Ÿçš„äº§å“æœ‰è‡³å°‘ä¸€ä¸ªçš„äº§å“æ—<br>åŒå±äºä¸€ä¸ªäº§å“æ—çš„äº§å“æ˜¯è®¾è®¡æˆåœ¨ä¸€èµ·ä½¿ç”¨çš„ã€‚è¿™ä¸ªçº¦æŸå¿…é¡»å¾—åœ¨ç³»ç»Ÿçš„è®¾è®¡ä¸­ä½“ç°å‡ºæ¥<br>ä¸åŒçš„äº§å“ä»¥ä¸€ç³»åˆ—çš„æ¥å£çš„é¢è²Œå‡ºç°ï¼Œä»è€Œä½¿ç³»ç»Ÿä¸ä¾èµ–äºæ¥å£å®ç°çš„ç»†èŠ‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7.2-æœ¬æ‰‹å†Œä¸“æœ‰åè¯</title>
      <link href="/alibaba-p3c/72-proper-noun/"/>
      <url>/alibaba-p3c/72-proper-noun/</url>
      
        <content type="html"><![CDATA[<ol><li>POJOï¼ˆPlain Ordinary Java Objectï¼‰: åœ¨æœ¬æ‰‹å†Œä¸­ï¼ŒPOJOä¸“æŒ‡åªæœ‰setter / getter / toStringçš„ç®€å•ç±»ï¼ŒåŒ…æ‹¬DO/DTO/BO/VOç­‰ã€‚ </li><li>GAVï¼ˆGroupIdã€ArtifactIdã€Versionï¼‰: Mavenåæ ‡ï¼Œæ˜¯ç”¨æ¥å”¯ä¸€æ ‡è¯†jaråŒ…ã€‚</li><li>OOPï¼ˆObject Oriented Programmingï¼‰: æœ¬æ‰‹å†Œæ³›æŒ‡ç±»ã€å¯¹è±¡çš„ç¼–ç¨‹å¤„ç†æ–¹å¼ã€‚ </li><li>ORMï¼ˆObject Relation Mappingï¼‰: å¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå¯¹è±¡é¢†åŸŸæ¨¡å‹ä¸åº•å±‚æ•°æ®ä¹‹é—´çš„è½¬æ¢ï¼Œæœ¬æ–‡æ³›æŒ‡iBATIS, mybatisç­‰æ¡†æ¶ã€‚ </li><li>NPEï¼ˆjava.lang.NullPointerExceptionï¼‰: ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ </li><li>SOAï¼ˆService-Oriented Architectureï¼‰: é¢å‘æœåŠ¡æ¶æ„ï¼Œå®ƒå¯ä»¥æ ¹æ®éœ€æ±‚é€šè¿‡ç½‘ç»œå¯¹æ¾æ•£è€¦åˆçš„ç²—ç²’åº¦åº”ç”¨ç»„ä»¶è¿›è¡Œåˆ†å¸ƒå¼éƒ¨ç½²ã€ç»„åˆå’Œä½¿ç”¨ï¼Œæœ‰åˆ©äºæå‡ç»„ä»¶å¯é‡ç”¨æ€§ï¼Œå¯ç»´æŠ¤æ€§ã€‚ </li><li>ä¸€æ–¹åº“: æœ¬å·¥ç¨‹å†…éƒ¨å­é¡¹ç›®æ¨¡å—ä¾èµ–çš„åº“ï¼ˆjaråŒ…ï¼‰ã€‚ </li><li>äºŒæ–¹åº“: å…¬å¸å†…éƒ¨å‘å¸ƒåˆ°ä¸­å¤®ä»“åº“ï¼Œå¯ä¾›å…¬å¸å†…éƒ¨å…¶å®ƒåº”ç”¨ä¾èµ–çš„åº“ï¼ˆjaråŒ…ï¼‰ã€‚ </li><li>ä¸‰æ–¹åº“: å…¬å¸ä¹‹å¤–çš„å¼€æºåº“ï¼ˆjaråŒ…ï¼‰ã€‚ </li><li>IDEï¼ˆIntegrated Development Environmentï¼‰: ç”¨äºæä¾›ç¨‹åºå¼€å‘ç¯å¢ƒçš„åº”ç”¨ç¨‹åºï¼Œä¸€èˆ¬åŒ…æ‹¬ä»£ç ç¼–è¾‘å™¨ã€ç¼–è¯‘å™¨ã€è°ƒè¯•å™¨å’Œå›¾å½¢ç”¨æˆ·ç•Œé¢ç­‰å·¥å…·ï¼Œæœ¬ã€Šæ‰‹å†Œã€‹æ³›æŒ‡IntelliJ IDEAå’Œeclipseã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7.1-ç‰ˆæœ¬å†å²</title>
      <link href="/alibaba-p3c/71-history-version/"/>
      <url>/alibaba-p3c/71-history-version/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>ç‰ˆæœ¬å·</th><th align="left">æ›´æ–°æ—¥æœŸ</th><th align="left">å¤‡æ³¨</th></tr></thead><tbody><tr><td>1.0.0</td><td align="left">2017.2.9</td><td align="left">é˜¿é‡Œå·´å·´é›†å›¢æ­£å¼å¯¹å¤–å‘å¸ƒ</td></tr><tr><td>1.0.1</td><td align="left">2017.2.13</td><td align="left">1ï¼‰ä¿®æ­£String[]çš„å‰åçŸ›ç›¾ã€‚2ï¼‰vmä¿®æ­£æˆvelocityã€‚3ï¼‰ä¿®æ­£countdownæè¿°é”™è¯¯ã€‚</td></tr><tr><td>1.0.2</td><td align="left">2017.2.20</td><td align="left">1ï¼‰å»é™¤æ–‡åº•æ°´å°ã€‚2ï¼‰æ•°æ®ç±»å‹ä¸­å¼•ç”¨å¤ªé˜³ç³»å¹´é¾„é—®é¢˜ã€‚3ï¼‰ä¿®æ­£å…³äºå¼‚å¸¸å’Œæ–¹æ³•ç­¾åçš„éƒ¨åˆ†æè¿°ã€‚4ï¼‰ä¿®æ­£finalæè¿°ã€‚5ï¼‰å»é™¤Comparatoréƒ¨åˆ†æè¿°ã€‚</td></tr><tr><td>1.1.0</td><td align="left">2017.2.27</td><td align="left">1ï¼‰å¢åŠ å‰è¨€ã€‚2ï¼‰å¢åŠ &lt;? extends T&gt;æè¿°å’Œè¯´æ˜ã€‚3ï¼‰å¢åŠ ç‰ˆæœ¬å†å²ã€‚4ï¼‰å¢åŠ ä¸“æœ‰åè¯è§£é‡Š</td></tr><tr><td>1.1.1</td><td align="left">2017.3.31</td><td align="left">ä¿®æ­£é¡µç æ€»æ•°å’Œéƒ¨åˆ†ç¤ºä¾‹ã€‚</td></tr><tr><td>1.2.0</td><td align="left">2017.5.20</td><td align="left">1ï¼‰æ ¹æ®äº‘æ –ç¤¾åŒºçš„â€œèšèƒ½èŠâ€æ´»åŠ¨åé¦ˆï¼Œå¯¹æ‰‹å†Œçš„é¡µç ã€æ’ç‰ˆã€æè¿°è¿›è¡Œä¿®æ­£ã€‚2ï¼‰å¢åŠ finalçš„é€‚ç”¨åœºæ™¯æè¿°ã€‚3ï¼‰å¢åŠ å…³äºé”çš„ç²’åº¦çš„è¯´æ˜ã€‚4ï¼‰å¢åŠ â€œæŒ‡å®šé›†åˆå¤§å°â€çš„è¯¦ç»†è¯´æ˜ä»¥åŠæ­£åä¾‹ã€‚5ï¼‰å¢åŠ å«è¯­å¥çš„ç¤ºä¾‹ä»£ç ã€‚6ï¼‰æ˜ç¡®æ•°æ®åº“è¡¨ç¤ºåˆ é™¤æ¦‚å¿µçš„å­—æ®µåä¸ºis_deleted</td></tr><tr><td>1.3.0</td><td align="left">2017.9.25</td><td align="left">å¢åŠ å•å…ƒæµ‹è¯•è§„çº¦ï¼ˆPDFç»ˆæç‰ˆï¼‰ï¼Œé˜¿é‡Œå¼€æºçš„IDEä»£ç è§„çº¦æ£€æµ‹æ’ä»¶ï¼š<a href="https://github.com/alibaba/p3c" target="_blank" rel="noopener">ç‚¹æ­¤ä¸‹è½½</a> æ›´å¤šåŠæ—¶ä¿¡æ¯ï¼Œè¯·å…³æ³¨ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹å®˜æ–¹å…¬ä¼—å·ï¼š<img src="images/QRcode.jpg" alt="QRcode"></td></tr><tr><td>1.3.1</td><td align="left">2017.11.30</td><td align="left">ä¿®æ­£éƒ¨åˆ†æè¿°ï¼›é‡‡ç”¨å’ŒP3Cå¼€æºIDEæ£€æµ‹æ’ä»¶ç›¸åŒçš„Apache2.0åè®®ã€‚</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6.3-æœåŠ¡å™¨</title>
      <link href="/alibaba-p3c/63-server/"/>
      <url>/alibaba-p3c/63-server/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€æ¨èã€‘é«˜å¹¶å‘æœåŠ¡å™¨å»ºè®®è°ƒå°TCPåè®®çš„<code>time_wait</code>è¶…æ—¶æ—¶é—´ã€‚ è¯´æ˜ï¼šæ“ä½œç³»ç»Ÿé»˜è®¤240ç§’åï¼Œæ‰ä¼šå…³é—­å¤„äº<code>time_wait</code>çŠ¶æ€çš„è¿æ¥ï¼Œåœ¨é«˜å¹¶å‘è®¿é—®ä¸‹ï¼ŒæœåŠ¡å™¨ç«¯ä¼šå› ä¸ºå¤„äº<code>time_wait</code>çš„è¿æ¥æ•°å¤ªå¤šï¼Œå¯èƒ½æ— æ³•å»ºç«‹æ–°çš„è¿æ¥ï¼Œæ‰€ä»¥éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šè°ƒå°æ­¤ç­‰å¾…å€¼ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šåœ¨linuxæœåŠ¡å™¨ä¸Šè¯·é€šè¿‡å˜æ›´/etc/sysctl.confæ–‡ä»¶å»ä¿®æ”¹è¯¥ç¼ºçœå€¼ï¼ˆç§’ï¼‰ï¼š<pre>net.ipv4.tcp_fin_timeout = 30</pre></li><li>ã€æ¨èã€‘è°ƒå¤§æœåŠ¡å™¨æ‰€æ”¯æŒçš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ï¼ˆFile Descriptorï¼Œç®€å†™ä¸ºfdï¼‰ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä¸»æµæ“ä½œç³»ç»Ÿçš„è®¾è®¡æ˜¯å°†TCP/UDPè¿æ¥é‡‡ç”¨ä¸æ–‡ä»¶ä¸€æ ·çš„æ–¹å¼å»ç®¡ç†ï¼Œå³ä¸€ä¸ªè¿æ¥å¯¹åº”äºä¸€ä¸ªfdã€‚ä¸»æµçš„linuxæœåŠ¡å™¨é»˜è®¤æ‰€æ”¯æŒæœ€å¤§fdæ•°é‡ä¸º1024ï¼Œå½“å¹¶å‘è¿æ¥æ•°å¾ˆå¤§æ—¶å¾ˆ<br>å®¹æ˜“å› ä¸ºfdä¸è¶³è€Œå‡ºç°â€œopen too many filesâ€é”™è¯¯ï¼Œå¯¼è‡´æ–°çš„è¿æ¥æ— æ³•å»ºç«‹ã€‚ å»ºè®®å°†linuxæœåŠ¡å™¨æ‰€æ”¯æŒçš„æœ€å¤§å¥æŸ„æ•°è°ƒé«˜æ•°å€ï¼ˆä¸æœåŠ¡å™¨çš„å†…å­˜æ•°é‡ç›¸å…³ï¼‰ã€‚ </li><li>ã€æ¨èã€‘ç»™JVMè®¾ç½®-XX:+HeapDumpOnOutOfMemoryErrorå‚æ•°ï¼Œè®©JVMç¢°åˆ°OOMåœºæ™¯æ—¶è¾“å‡ºdumpä¿¡æ¯ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šOOMçš„å‘ç”Ÿæ˜¯æœ‰æ¦‚ç‡çš„ï¼Œç”šè‡³æœ‰è§„å¾‹åœ°ç›¸éš”æ•°æœˆæ‰å‡ºç°ä¸€ä¾‹ï¼Œå‡ºç°æ—¶çš„ç°åœºä¿¡æ¯å¯¹æŸ¥é”™éå¸¸æœ‰ä»·å€¼ã€‚ </li><li>ã€æ¨èã€‘åœ¨çº¿ä¸Šç”Ÿäº§ç¯å¢ƒï¼ŒJVMçš„Xmså’ŒXmxè®¾ç½®ä¸€æ ·å¤§å°çš„å†…å­˜å®¹é‡ï¼Œé¿å…åœ¨GC åè°ƒæ•´å †å¤§å°å¸¦æ¥çš„å‹åŠ›ã€‚ </li><li>ã€å‚è€ƒã€‘æœåŠ¡å™¨å†…éƒ¨é‡å®šå‘ä½¿ç”¨forwardï¼›å¤–éƒ¨é‡å®šå‘åœ°å€ä½¿ç”¨URLæ‹¼è£…å·¥å…·ç±»æ¥ç”Ÿæˆï¼Œå¦åˆ™ä¼šå¸¦æ¥URLç»´æŠ¤ä¸ä¸€è‡´çš„é—®é¢˜å’Œæ½œåœ¨çš„å®‰å…¨é£é™©ã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6.2-äºŒæ–¹åº“ä¾èµ–</title>
      <link href="/alibaba-p3c/62-lib-depend/"/>
      <url>/alibaba-p3c/62-lib-depend/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘å®šä¹‰GAVéµä»ä»¥ä¸‹è§„åˆ™ï¼š<br>1ï¼‰ <code>G</code>roupIDæ ¼å¼ï¼šcom.{å…¬å¸/BU }.ä¸šåŠ¡çº¿.[å­ä¸šåŠ¡çº¿]ï¼Œæœ€å¤š4çº§ã€‚<br><span style="color:orange">è¯´æ˜</span>ï¼š{å…¬å¸/BU} ä¾‹å¦‚ï¼šalibaba/taobao/tmall/aliexpressç­‰BUä¸€çº§ï¼›å­ä¸šåŠ¡çº¿å¯é€‰ã€‚<br><span style="color:green">æ­£ä¾‹</span>ï¼šcom.taobao.jstorm æˆ– com.alibaba.dubbo.register<br><br>2ï¼‰ <code>A</code>rtifactIDæ ¼å¼ï¼šäº§å“çº¿å-æ¨¡å—åã€‚è¯­ä¹‰ä¸é‡å¤ä¸é—æ¼ï¼Œå…ˆåˆ°ä¸­å¤®ä»“åº“å»æŸ¥è¯ä¸€ä¸‹ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šdubbo-client / fastjson-api / jstorm-tool<br>3ï¼‰ <code>V</code>ersionï¼šè¯¦ç»†è§„å®šå‚è€ƒä¸‹æ–¹ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘äºŒæ–¹åº“ç‰ˆæœ¬å·å‘½åæ–¹å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·<br>1ï¼‰ <strong>ä¸»ç‰ˆæœ¬å·</strong>ï¼šäº§å“æ–¹å‘æ”¹å˜ï¼Œæˆ–è€…å¤§è§„æ¨¡APIä¸å…¼å®¹ï¼Œæˆ–è€…æ¶æ„ä¸å…¼å®¹å‡çº§ã€‚<br>2ï¼‰ <strong>æ¬¡ç‰ˆæœ¬å·</strong>ï¼šä¿æŒç›¸å¯¹å…¼å®¹æ€§ï¼Œå¢åŠ ä¸»è¦åŠŸèƒ½ç‰¹æ€§ï¼Œå½±å“èŒƒå›´æå°çš„APIä¸å…¼å®¹ä¿®æ”¹ã€‚<br>3ï¼‰ <strong>ä¿®è®¢å·</strong>ï¼šä¿æŒå®Œå…¨å…¼å®¹æ€§ï¼Œä¿®å¤BUGã€æ–°å¢æ¬¡è¦åŠŸèƒ½ç‰¹æ€§ç­‰ã€‚<br>è¯´æ˜ï¼šæ³¨æ„èµ·å§‹ç‰ˆæœ¬å·å¿…é¡»ä¸ºï¼š<em>1.0.0</em>ï¼Œè€Œä¸æ˜¯0.0.1   æ­£å¼å‘å¸ƒçš„ç±»åº“å¿…é¡»å…ˆå»ä¸­å¤®ä»“åº“è¿›è¡ŒæŸ¥è¯ï¼Œä½¿ç‰ˆæœ¬å·æœ‰å»¶ç»­æ€§ï¼Œæ­£å¼ç‰ˆæœ¬å·ä¸å…è®¸è¦†ç›–å‡çº§ã€‚å¦‚å½“å‰ç‰ˆæœ¬ï¼š1.3.3ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªåˆç†çš„ç‰ˆæœ¬å·ï¼š1.3.4 æˆ– 1.4.0 æˆ– 2.0.0 </li><li>ã€å¼ºåˆ¶ã€‘çº¿ä¸Šåº”ç”¨ä¸è¦ä¾èµ–SNAPSHOTç‰ˆæœ¬ï¼ˆå®‰å…¨åŒ…é™¤å¤–ï¼‰ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä¸ä¾èµ–SNAPSHOTç‰ˆæœ¬æ˜¯ä¿è¯åº”ç”¨å‘å¸ƒçš„å¹‚ç­‰æ€§ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥åŠ å¿«ç¼–è¯‘æ—¶çš„æ‰“åŒ…æ„å»ºã€‚  </li><li>ã€å¼ºåˆ¶ã€‘äºŒæ–¹åº“çš„æ–°å¢æˆ–å‡çº§ï¼Œä¿æŒé™¤åŠŸèƒ½ç‚¹ä¹‹å¤–çš„å…¶å®ƒjaråŒ…ä»²è£ç»“æœä¸å˜ã€‚å¦‚æœæœ‰æ”¹å˜ï¼Œå¿…é¡»æ˜ç¡®è¯„ä¼°å’ŒéªŒè¯ï¼Œå»ºè®®è¿›è¡Œ<code>dependency:resolve</code>å‰åä¿¡æ¯æ¯”å¯¹ï¼Œå¦‚æœä»²è£ç»“æœå®Œå…¨ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆé€šè¿‡<code>dependency:tree</code>å‘½ä»¤ï¼Œæ‰¾å‡ºå·®å¼‚ç‚¹ï¼Œè¿›è¡Œ<code>&lt;excludes&gt;</code>æ’é™¤jaråŒ…ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘äºŒæ–¹åº“é‡Œå¯ä»¥å®šä¹‰æšä¸¾ç±»å‹ï¼Œå‚æ•°å¯ä»¥ä½¿ç”¨æšä¸¾ç±»å‹ï¼Œä½†æ˜¯æ¥å£è¿”å›å€¼ä¸å…è®¸ä½¿ç”¨æšä¸¾ç±»å‹æˆ–è€…åŒ…å«æšä¸¾ç±»å‹çš„POJOå¯¹è±¡ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ä¾èµ–äºä¸€ä¸ªäºŒæ–¹åº“ç¾¤æ—¶ï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„ç‰ˆæœ¬å˜é‡ï¼Œé¿å…ç‰ˆæœ¬å·ä¸ä¸€è‡´ã€‚ <br><br><span style="color:orange">è¯´æ˜</span>ï¼šä¾èµ–springframework-core,-context,-beansï¼Œå®ƒä»¬éƒ½æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå˜é‡æ¥ä¿å­˜ç‰ˆæœ¬ï¼š${spring.version}ï¼Œå®šä¹‰ä¾èµ–çš„æ—¶å€™ï¼Œå¼•ç”¨è¯¥ç‰ˆæœ¬ã€‚</li><li>ã€å¼ºåˆ¶ã€‘ç¦æ­¢åœ¨å­é¡¹ç›®çš„pomä¾èµ–ä¸­å‡ºç°ç›¸åŒçš„GroupIdï¼Œç›¸åŒçš„ArtifactIdï¼Œä½†æ˜¯ä¸åŒçš„Versionã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šåœ¨æœ¬åœ°è°ƒè¯•æ—¶ä¼šä½¿ç”¨å„å­é¡¹ç›®æŒ‡å®šçš„ç‰ˆæœ¬å·ï¼Œä½†æ˜¯åˆå¹¶æˆä¸€ä¸ªwarï¼Œåªèƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬å·å‡ºç°åœ¨æœ€åçš„libç›®å½•ä¸­ã€‚å¯èƒ½å‡ºç°çº¿ä¸‹è°ƒè¯•æ˜¯æ­£ç¡®çš„ï¼Œå‘å¸ƒåˆ°çº¿ä¸Šå´å‡ºæ•…éšœçš„é—®é¢˜ã€‚ </li><li>ã€æ¨èã€‘æ‰€æœ‰pomæ–‡ä»¶ä¸­çš„ä¾èµ–å£°æ˜æ”¾åœ¨<code>&lt;dependencies&gt;</code>è¯­å¥å—ä¸­ï¼Œæ‰€æœ‰ç‰ˆæœ¬ä»²è£æ”¾åœ¨<code>&lt;dependencyManagement&gt;</code>è¯­å¥å—ä¸­ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼š<code>&lt;dependencyManagement&gt;</code>é‡Œåªæ˜¯å£°æ˜ç‰ˆæœ¬ï¼Œå¹¶ä¸å®ç°å¼•å…¥ï¼Œå› æ­¤å­é¡¹ç›®éœ€è¦æ˜¾å¼çš„å£°æ˜ä¾èµ–ï¼Œversionå’Œscopeéƒ½è¯»å–è‡ªçˆ¶pomã€‚è€Œ<code>&lt;dependencies&gt;</code>æ‰€æœ‰å£°æ˜åœ¨ä¸»pomçš„<code>&lt;dependencies&gt;</code>é‡Œçš„ä¾èµ–éƒ½ä¼šè‡ªåŠ¨å¼•å…¥ï¼Œå¹¶é»˜è®¤è¢«æ‰€æœ‰çš„å­é¡¹ç›®ç»§æ‰¿ã€‚ </li><li>ã€æ¨èã€‘äºŒæ–¹åº“ä¸è¦æœ‰é…ç½®é¡¹ï¼Œæœ€ä½é™åº¦ä¸è¦å†å¢åŠ é…ç½®é¡¹ã€‚ </li><li>ã€å‚è€ƒã€‘ä¸ºé¿å…åº”ç”¨äºŒæ–¹åº“çš„ä¾èµ–å†²çªé—®é¢˜ï¼ŒäºŒæ–¹åº“å‘å¸ƒè€…åº”å½“éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š<br><br>1ï¼‰ç²¾ç®€å¯æ§åŸåˆ™ã€‚ç§»é™¤ä¸€åˆ‡ä¸å¿…è¦çš„APIå’Œä¾èµ–ï¼ŒåªåŒ…å« Service APIã€å¿…è¦çš„é¢†åŸŸæ¨¡å‹å¯¹è±¡ã€Utilsç±»ã€å¸¸é‡ã€æšä¸¾ç­‰ã€‚å¦‚æœä¾èµ–å…¶å®ƒäºŒæ–¹åº“ï¼Œå°½é‡æ˜¯providedå¼•å…¥ï¼Œè®©äºŒæ–¹åº“ä½¿ç”¨è€…å»ä¾èµ–å…·ä½“ç‰ˆæœ¬å·ï¼›æ— logå…·ä½“å®ç°ï¼Œåªä¾èµ–æ—¥å¿—æ¡†æ¶ã€‚<br><br>2ï¼‰ç¨³å®šå¯è¿½æº¯åŸåˆ™ã€‚æ¯ä¸ªç‰ˆæœ¬çš„å˜åŒ–åº”è¯¥è¢«è®°å½•ï¼ŒäºŒæ–¹åº“ç”±è°ç»´æŠ¤ï¼Œæºç åœ¨å“ªé‡Œï¼Œéƒ½éœ€è¦èƒ½æ–¹ä¾¿æŸ¥åˆ°ã€‚é™¤éç”¨æˆ·ä¸»åŠ¨å‡çº§ç‰ˆæœ¬ï¼Œå¦åˆ™å…¬å…±äºŒæ–¹åº“çš„è¡Œä¸ºä¸åº”è¯¥å‘ç”Ÿå˜åŒ–ã€‚  </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6.1-å·¥ç¨‹ç»“æ„</title>
      <link href="/alibaba-p3c/61-app-layer/"/>
      <url>/alibaba-p3c/61-app-layer/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-åº”ç”¨åˆ†å±‚"><a href="#ä¸€-åº”ç”¨åˆ†å±‚" class="headerlink" title="(ä¸€) åº”ç”¨åˆ†å±‚"></a>(ä¸€) åº”ç”¨åˆ†å±‚</h2><ol><li><p>ã€æ¨èã€‘å›¾ä¸­é»˜è®¤ä¸Šå±‚ä¾èµ–äºä¸‹å±‚ï¼Œç®­å¤´å…³ç³»è¡¨ç¤ºå¯ç›´æ¥ä¾èµ–ï¼Œå¦‚ï¼šå¼€æ”¾æ¥å£å±‚å¯ä»¥ä¾èµ–äºWebå±‚ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¾èµ–äºServiceå±‚ï¼Œä¾æ­¤ç±»æ¨ï¼š<br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghosi0phj30dm0bpgmc.jpg" alt="åº”ç”¨åˆ†å±‚"></p><ul><li>å¼€æ”¾æ¥å£å±‚ï¼šå¯ç›´æ¥å°è£…Serviceæ–¹æ³•æš´éœ²æˆRPCæ¥å£ï¼›é€šè¿‡Webå°è£…æˆhttpæ¥å£ï¼›è¿›è¡Œç½‘å…³å®‰å…¨æ§åˆ¶ã€æµé‡æ§åˆ¶ç­‰ã€‚ </li><li>ç»ˆç«¯æ˜¾ç¤ºå±‚ï¼šå„ä¸ªç«¯çš„æ¨¡æ¿æ¸²æŸ“å¹¶æ‰§è¡Œæ˜¾ç¤ºçš„å±‚ã€‚å½“å‰ä¸»è¦æ˜¯velocityæ¸²æŸ“ï¼ŒJSæ¸²æŸ“ï¼ŒJSPæ¸²æŸ“ï¼Œç§»åŠ¨ç«¯å±•ç¤ºç­‰ã€‚ </li><li>Webå±‚ï¼šä¸»è¦æ˜¯å¯¹è®¿é—®æ§åˆ¶è¿›è¡Œè½¬å‘ï¼Œå„ç±»åŸºæœ¬å‚æ•°æ ¡éªŒï¼Œæˆ–è€…ä¸å¤ç”¨çš„ä¸šåŠ¡ç®€å•å¤„ç†ç­‰ã€‚ </li><li>Serviceå±‚ï¼šç›¸å¯¹å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚ã€‚ </li><li>Managerå±‚ï¼šé€šç”¨ä¸šåŠ¡å¤„ç†å±‚ï¼Œå®ƒæœ‰å¦‚ä¸‹ç‰¹å¾ï¼š<br><br>1ï¼‰ å¯¹ç¬¬ä¸‰æ–¹å¹³å°å°è£…çš„å±‚ï¼Œé¢„å¤„ç†è¿”å›ç»“æœåŠè½¬åŒ–å¼‚å¸¸ä¿¡æ¯ï¼›<br><br>2ï¼‰ å¯¹Serviceå±‚é€šç”¨èƒ½åŠ›çš„ä¸‹æ²‰ï¼Œå¦‚ç¼“å­˜æ–¹æ¡ˆã€ä¸­é—´ä»¶é€šç”¨å¤„ç†ï¼›<br><br>3ï¼‰ ä¸DAOå±‚äº¤äº’ï¼Œå¯¹å¤šä¸ªDAOçš„ç»„åˆå¤ç”¨ã€‚</li><li>DAOå±‚ï¼šæ•°æ®è®¿é—®å±‚ï¼Œä¸åº•å±‚MySQLã€Oracleã€Hbaseç­‰è¿›è¡Œæ•°æ®äº¤äº’ã€‚ </li><li>å¤–éƒ¨æ¥å£æˆ–ç¬¬ä¸‰æ–¹å¹³å°ï¼šåŒ…æ‹¬å…¶å®ƒéƒ¨é—¨RPCå¼€æ”¾æ¥å£ï¼ŒåŸºç¡€å¹³å°ï¼Œå…¶å®ƒå…¬å¸çš„HTTPæ¥å£ã€‚</li></ul></li><li><p>ã€å‚è€ƒã€‘ï¼ˆåˆ†å±‚å¼‚å¸¸å¤„ç†è§„çº¦ï¼‰åœ¨DAOå±‚ï¼Œäº§ç”Ÿçš„å¼‚å¸¸ç±»å‹æœ‰å¾ˆå¤šï¼Œæ— æ³•ç”¨ç»†ç²’åº¦çš„å¼‚å¸¸è¿›è¡Œcatchï¼Œä½¿ç”¨catch(Exception e)æ–¹å¼ï¼Œå¹¶throw new DAOException(e)ï¼Œä¸éœ€è¦æ‰“å°æ—¥å¿—ï¼Œå› ä¸ºæ—¥å¿—åœ¨Manager/Serviceå±‚ä¸€å®šéœ€è¦æ•è·å¹¶æ‰“å°åˆ°æ—¥å¿—æ–‡ä»¶ä¸­å»ï¼Œå¦‚æœåŒå°æœåŠ¡å™¨å†æ‰“æ—¥å¿—ï¼Œæµªè´¹æ€§èƒ½å’Œå­˜å‚¨ã€‚åœ¨Serviceå±‚å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¿…é¡»è®°å½•å‡ºé”™æ—¥å¿—åˆ°ç£ç›˜ï¼Œå°½å¯èƒ½å¸¦ä¸Šå‚æ•°ä¿¡æ¯ï¼Œç›¸å½“äºä¿æŠ¤æ¡ˆå‘ç°åœºã€‚å¦‚æœManagerå±‚ä¸ServiceåŒæœºéƒ¨ç½²ï¼Œæ—¥å¿—æ–¹å¼ä¸DAOå±‚å¤„ç†ä¸€è‡´ï¼Œå¦‚æœæ˜¯å•ç‹¬éƒ¨ç½²ï¼Œåˆ™é‡‡ç”¨ä¸Serviceä¸€è‡´çš„å¤„ç†æ–¹å¼ã€‚Webå±‚ç»ä¸åº”è¯¥ç»§ç»­å¾€ä¸ŠæŠ›å¼‚å¸¸ï¼Œå› ä¸ºå·²ç»å¤„äºé¡¶å±‚ï¼Œå¦‚æœæ„è¯†åˆ°è¿™ä¸ªå¼‚å¸¸å°†å¯¼è‡´é¡µé¢æ— æ³•æ­£å¸¸æ¸²æŸ“ï¼Œé‚£ä¹ˆå°±åº”è¯¥è·³è½¬åˆ°å‹å¥½é”™è¯¯é¡µé¢ï¼ŒåŠ ä¸Šç”¨æˆ·å®¹æ˜“ç†è§£çš„é”™è¯¯æç¤ºä¿¡æ¯ã€‚å¼€æ”¾æ¥å£å±‚è¦å°†å¼‚å¸¸å¤„ç†æˆé”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯æ–¹å¼è¿”å›ã€‚</p></li><li><p>ã€å‚è€ƒã€‘åˆ†å±‚é¢†åŸŸæ¨¡å‹è§„çº¦ï¼š</p><ul><li>DOï¼ˆData Objectï¼‰ï¼šä¸æ•°æ®åº“è¡¨ç»“æ„ä¸€ä¸€å¯¹åº”ï¼Œé€šè¿‡DAOå±‚å‘ä¸Šä¼ è¾“æ•°æ®æºå¯¹è±¡ã€‚</li><li>DTOï¼ˆData Transfer Objectï¼‰ï¼šæ•°æ®ä¼ è¾“å¯¹è±¡ï¼ŒServiceæˆ–Managerå‘å¤–ä¼ è¾“çš„å¯¹è±¡ã€‚</li><li>BOï¼ˆBusiness Objectï¼‰ï¼šä¸šåŠ¡å¯¹è±¡ã€‚ç”±Serviceå±‚è¾“å‡ºçš„å°è£…ä¸šåŠ¡é€»è¾‘çš„å¯¹è±¡ã€‚</li><li>AOï¼ˆApplication Objectï¼‰ï¼šåº”ç”¨å¯¹è±¡ã€‚åœ¨Webå±‚ä¸Serviceå±‚ä¹‹é—´æŠ½è±¡çš„å¤ç”¨å¯¹è±¡æ¨¡å‹ï¼Œæä¸ºè´´è¿‘å±•ç¤ºå±‚ï¼Œå¤ç”¨åº¦ä¸é«˜ã€‚</li><li>VOï¼ˆView Objectï¼‰ï¼šæ˜¾ç¤ºå±‚å¯¹è±¡ï¼Œé€šå¸¸æ˜¯Webå‘æ¨¡æ¿æ¸²æŸ“å¼•æ“å±‚ä¼ è¾“çš„å¯¹è±¡ã€‚</li><li>Queryï¼šæ•°æ®æŸ¥è¯¢å¯¹è±¡ï¼Œå„å±‚æ¥æ”¶ä¸Šå±‚çš„æŸ¥è¯¢è¯·æ±‚ã€‚æ³¨æ„è¶…è¿‡2ä¸ªå‚æ•°çš„æŸ¥è¯¢å°è£…ï¼Œç¦æ­¢ä½¿ç”¨Mapç±»æ¥ä¼ è¾“ã€‚</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5.4-ORMæ˜ å°„</title>
      <link href="/alibaba-p3c/54-orm/"/>
      <url>/alibaba-p3c/54-orm/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ã€å¼ºåˆ¶ã€‘åœ¨è¡¨æŸ¥è¯¢ä¸­ï¼Œä¸€å¾‹ä¸è¦ä½¿ç”¨ * ä½œä¸ºæŸ¥è¯¢çš„å­—æ®µåˆ—è¡¨ï¼Œéœ€è¦å“ªäº›å­—æ®µå¿…é¡»æ˜ç¡®å†™æ˜ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼š1ï¼‰å¢åŠ æŸ¥è¯¢åˆ†æå™¨è§£ææˆæœ¬ã€‚2ï¼‰å¢å‡å­—æ®µå®¹æ˜“ä¸resultMapé…ç½®ä¸ä¸€è‡´ã€‚ </p></li><li><p>ã€å¼ºåˆ¶ã€‘POJOç±»çš„å¸ƒå°”å±æ€§ä¸èƒ½åŠ isï¼Œè€Œæ•°æ®åº“å­—æ®µå¿…é¡»åŠ is_ï¼Œè¦æ±‚åœ¨resultMapä¸­è¿›è¡Œå­—æ®µä¸å±æ€§ä¹‹é—´çš„æ˜ å°„ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå‚è§å®šä¹‰POJOç±»ä»¥åŠæ•°æ®åº“å­—æ®µå®šä¹‰è§„å®šï¼Œåœ¨<resultMap>ä¸­å¢åŠ æ˜ å°„ï¼Œæ˜¯å¿…é¡»çš„ã€‚åœ¨MyBatis Generatorç”Ÿæˆçš„ä»£ç ä¸­ï¼Œéœ€è¦è¿›è¡Œå¯¹åº”çš„ä¿®æ”¹ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘ä¸è¦ç”¨resultClasså½“è¿”å›å‚æ•°ï¼Œå³ä½¿æ‰€æœ‰ç±»å±æ€§åä¸æ•°æ®åº“å­—æ®µä¸€ä¸€å¯¹åº”ï¼Œä¹Ÿéœ€è¦å®šä¹‰ï¼›åè¿‡æ¥ï¼Œæ¯ä¸€ä¸ªè¡¨ä¹Ÿå¿…ç„¶æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šé…ç½®æ˜ å°„å…³ç³»ï¼Œä½¿å­—æ®µä¸DOç±»è§£è€¦ï¼Œæ–¹ä¾¿ç»´æŠ¤ã€‚ </p></li><li><p>ã€å¼ºåˆ¶ã€‘sql.xmlé…ç½®å‚æ•°ä½¿ç”¨ï¼š#{}ï¼Œ#param# ä¸è¦ä½¿ç”¨${} æ­¤ç§æ–¹å¼å®¹æ˜“å‡ºç°SQLæ³¨å…¥ã€‚ </p></li><li><p>ã€å¼ºåˆ¶ã€‘iBATISè‡ªå¸¦çš„queryForList(String statementName,int start,int size)ä¸æ¨èä½¿ç”¨ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå…¶å®ç°æ–¹å¼æ˜¯åœ¨æ•°æ®åº“å–åˆ°statementNameå¯¹åº”çš„SQLè¯­å¥çš„æ‰€æœ‰è®°å½•ï¼Œå†é€šè¿‡subListå–start,sizeçš„å­é›†åˆã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š</p><pre><code> Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();     map.put(&quot;start&quot;, start);     map.put(&quot;size&quot;, size);</code></pre></li><li><p>ã€å¼ºåˆ¶ã€‘ä¸å…è®¸ç›´æ¥æ‹¿HashMapä¸Hashtableä½œä¸ºæŸ¥è¯¢ç»“æœé›†çš„è¾“å‡ºã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šresultClass=â€Hashtableâ€ï¼Œä¼šç½®å…¥å­—æ®µåå’Œå±æ€§å€¼ï¼Œä½†æ˜¯å€¼çš„ç±»å‹ä¸å¯æ§ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘æ›´æ–°æ•°æ®è¡¨è®°å½•æ—¶ï¼Œå¿…é¡»åŒæ—¶æ›´æ–°è®°å½•å¯¹åº”çš„gmt_modifiedå­—æ®µå€¼ä¸ºå½“å‰æ—¶é—´ã€‚</p></li><li><p>ã€æ¨èã€‘ä¸è¦å†™ä¸€ä¸ªå¤§è€Œå…¨çš„æ•°æ®æ›´æ–°æ¥å£ã€‚ä¼ å…¥ä¸ºPOJOç±»ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯è‡ªå·±çš„ç›®æ ‡æ›´æ–°å­—æ®µï¼Œéƒ½è¿›è¡Œupdate table set c1=value1,c2=value2,c3=value3; è¿™æ˜¯ä¸å¯¹çš„ã€‚æ‰§è¡ŒSQLæ—¶ï¼Œä¸è¦æ›´æ–°æ— æ”¹åŠ¨çš„å­—æ®µï¼Œä¸€æ˜¯æ˜“å‡ºé”™ï¼›äºŒæ˜¯æ•ˆç‡ä½ï¼›ä¸‰æ˜¯å¢åŠ binlogå­˜å‚¨ã€‚ </p></li><li><p>ã€å‚è€ƒã€‘<code>@Transactional</code>äº‹åŠ¡ä¸è¦æ»¥ç”¨ã€‚äº‹åŠ¡ä¼šå½±å“æ•°æ®åº“çš„QPSï¼Œå¦å¤–ä½¿ç”¨äº‹åŠ¡çš„åœ°æ–¹éœ€è¦è€ƒè™‘å„æ–¹é¢çš„å›æ»šæ–¹æ¡ˆï¼ŒåŒ…æ‹¬ç¼“å­˜å›æ»šã€æœç´¢å¼•æ“å›æ»šã€æ¶ˆæ¯è¡¥å¿ã€ç»Ÿè®¡ä¿®æ­£ç­‰ã€‚ </p></li><li><p>ã€å‚è€ƒã€‘<code>&lt;isEqual&gt;</code>ä¸­çš„compareValueæ˜¯ä¸å±æ€§å€¼å¯¹æ¯”çš„å¸¸é‡ï¼Œä¸€èˆ¬æ˜¯æ•°å­—ï¼Œè¡¨ç¤ºç›¸ç­‰æ—¶å¸¦ä¸Šæ­¤æ¡ä»¶ï¼›<code>&lt;isNotEmpty&gt;</code>è¡¨ç¤ºä¸ä¸ºç©ºä¸”ä¸ä¸ºnullæ—¶æ‰§è¡Œï¼›<code>&lt;isNotNull&gt;</code>è¡¨ç¤ºä¸ä¸ºnullå€¼æ—¶æ‰§è¡Œã€‚  </p></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5.3-SQLè¯­å¥</title>
      <link href="/alibaba-p3c/53-sql/"/>
      <url>/alibaba-p3c/53-sql/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘ä¸è¦ä½¿ç”¨count(åˆ—å)æˆ–count(å¸¸é‡)æ¥æ›¿ä»£count(<em>)ï¼Œcount(</em>)æ˜¯SQL92å®šä¹‰çš„æ ‡å‡†ç»Ÿè®¡è¡Œæ•°çš„è¯­æ³•ï¼Œè·Ÿæ•°æ®åº“æ— å…³ï¼Œè·ŸNULLå’ŒéNULLæ— å…³ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šcount(*)ä¼šç»Ÿè®¡å€¼ä¸ºNULLçš„è¡Œï¼Œè€Œcount(åˆ—å)ä¸ä¼šç»Ÿè®¡æ­¤åˆ—ä¸ºNULLå€¼çš„è¡Œã€‚ </li><li>ã€å¼ºåˆ¶ã€‘count(distinct col) è®¡ç®—è¯¥åˆ—é™¤NULLä¹‹å¤–çš„ä¸é‡å¤è¡Œæ•°ï¼Œæ³¨æ„ count(distinct col1, col2) å¦‚æœå…¶ä¸­ä¸€åˆ—å…¨ä¸ºNULLï¼Œé‚£ä¹ˆå³ä½¿å¦ä¸€åˆ—æœ‰ä¸åŒçš„å€¼ï¼Œä¹Ÿè¿”å›ä¸º0ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å½“æŸä¸€åˆ—çš„å€¼å…¨æ˜¯NULLæ—¶ï¼Œcount(col)çš„è¿”å›ç»“æœä¸º0ï¼Œä½†sum(col)çš„è¿”å›ç»“æœä¸ºNULLï¼Œå› æ­¤ä½¿ç”¨sum()æ—¶éœ€æ³¨æ„NPEé—®é¢˜ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼æ¥é¿å…sumçš„NPEé—®é¢˜ï¼š<pre>SELECT IF(ISNULL(SUM(g)),0,SUM(g)) FROM table; </pre></li><li>ã€å¼ºåˆ¶ã€‘ä½¿ç”¨<code>ISNULL()</code>æ¥åˆ¤æ–­æ˜¯å¦ä¸ºNULLå€¼ã€‚ è¯´æ˜ï¼šNULLä¸ä»»ä½•å€¼çš„ç›´æ¥æ¯”è¾ƒéƒ½ä¸ºNULLã€‚<br>1ï¼‰ <code>NULL&lt;&gt;NULL</code>çš„è¿”å›ç»“æœæ˜¯NULLï¼Œè€Œä¸æ˜¯<code>false</code>ã€‚<br>2ï¼‰ <code>NULL=NULL</code>çš„è¿”å›ç»“æœæ˜¯NULLï¼Œè€Œä¸æ˜¯<code>true</code>ã€‚<br>3ï¼‰ <code>NULL&lt;&gt;1</code>çš„è¿”å›ç»“æœæ˜¯NULLï¼Œè€Œä¸æ˜¯<code>true</code>ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ åœ¨ä»£ç ä¸­å†™åˆ†é¡µæŸ¥è¯¢é€»è¾‘æ—¶ï¼Œè‹¥countä¸º0åº”ç›´æ¥è¿”å›ï¼Œé¿å…æ‰§è¡Œåé¢çš„åˆ†é¡µè¯­å¥ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ä¸å¾—ä½¿ç”¨å¤–é”®ä¸çº§è”ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä»¥å­¦ç”Ÿå’Œæˆç»©çš„å…³ç³»ä¸ºä¾‹ï¼Œå­¦ç”Ÿè¡¨ä¸­çš„student_idæ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆæˆç»©è¡¨ä¸­çš„student_idåˆ™ä¸ºå¤–é”®ã€‚å¦‚æœæ›´æ–°å­¦ç”Ÿè¡¨ä¸­çš„student_idï¼ŒåŒæ—¶è§¦å‘æˆç»©è¡¨ä¸­çš„student_idæ›´æ–°ï¼Œå³ä¸ºçº§è”æ›´æ–°ã€‚å¤–é”®ä¸çº§è”æ›´æ–°é€‚ç”¨äºå•æœºä½å¹¶å‘ï¼Œä¸é€‚åˆåˆ†å¸ƒå¼ã€é«˜å¹¶å‘é›†ç¾¤ï¼›çº§è”æ›´æ–°æ˜¯å¼ºé˜»å¡ï¼Œå­˜åœ¨æ•°æ®åº“æ›´æ–°é£æš´çš„é£é™©ï¼›å¤–é”®å½±å“æ•°æ®åº“çš„æ’å…¥é€Ÿåº¦ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œå­˜å‚¨è¿‡ç¨‹éš¾ä»¥è°ƒè¯•å’Œæ‰©å±•ï¼Œæ›´æ²¡æœ‰ç§»æ¤æ€§ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ•°æ®è®¢æ­£ï¼ˆç‰¹åˆ«æ˜¯åˆ é™¤ã€ä¿®æ”¹è®°å½•æ“ä½œï¼‰æ—¶ï¼Œè¦å…ˆselectï¼Œé¿å…å‡ºç°è¯¯åˆ é™¤ï¼Œç¡®è®¤æ— è¯¯æ‰èƒ½æ‰§è¡Œæ›´æ–°è¯­å¥ã€‚ </li><li>ã€æ¨èã€‘inæ“ä½œèƒ½é¿å…åˆ™é¿å…ï¼Œè‹¥å®åœ¨é¿å…ä¸äº†ï¼Œéœ€è¦ä»”ç»†è¯„ä¼°inåè¾¹çš„é›†åˆå…ƒç´ æ•°é‡ï¼Œæ§åˆ¶åœ¨1000ä¸ªä¹‹å†…ã€‚ </li><li>ã€å‚è€ƒã€‘å¦‚æœæœ‰å…¨çƒåŒ–éœ€è¦ï¼Œæ‰€æœ‰çš„å­—ç¬¦å­˜å‚¨ä¸è¡¨ç¤ºï¼Œå‡ä»¥utf-8ç¼–ç ï¼Œæ³¨æ„å­—ç¬¦ç»Ÿè®¡å‡½æ•°çš„åŒºåˆ«ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼š<pre>SELECT LENGTH("è½»æ¾å·¥ä½œ")ï¼› è¿”å›ä¸º12SELECT CHARACTER_LENGTH("è½»æ¾å·¥ä½œ")ï¼› è¿”å›ä¸º4</pre>å¦‚æœéœ€è¦å­˜å‚¨è¡¨æƒ…ï¼Œé‚£ä¹ˆé€‰æ‹©utf8mb4æ¥è¿›è¡Œå­˜å‚¨ï¼Œæ³¨æ„å®ƒä¸utf-8ç¼–ç çš„åŒºåˆ«ã€‚ </li><li>ã€å‚è€ƒã€‘ TRUNCATE TABLE æ¯” DELETE é€Ÿåº¦å¿«ï¼Œä¸”ä½¿ç”¨çš„ç³»ç»Ÿå’Œäº‹åŠ¡æ—¥å¿—èµ„æºå°‘ï¼Œä½†TRUNCATEæ— äº‹åŠ¡ä¸”ä¸è§¦å‘triggerï¼Œæœ‰å¯èƒ½é€ æˆäº‹æ•…ï¼Œæ•…ä¸å»ºè®®åœ¨å¼€å‘ä»£ç ä¸­ä½¿ç”¨æ­¤è¯­å¥ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šTRUNCATE TABLE åœ¨åŠŸèƒ½ä¸Šä¸ä¸å¸¦ WHERE å­å¥çš„ DELETE è¯­å¥ç›¸åŒã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5.2-ç´¢å¼•è§„çº¦</title>
      <link href="/alibaba-p3c/52-dbi-statute/"/>
      <url>/alibaba-p3c/52-dbi-statute/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘ä¸šåŠ¡ä¸Šå…·æœ‰å”¯ä¸€ç‰¹æ€§çš„å­—æ®µï¼Œå³ä½¿æ˜¯å¤šä¸ªå­—æ®µçš„ç»„åˆï¼Œä¹Ÿå¿…é¡»å»ºæˆå”¯ä¸€ç´¢å¼•ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä¸è¦ä»¥ä¸ºå”¯ä¸€ç´¢å¼•å½±å“äº†inserté€Ÿåº¦ï¼Œè¿™ä¸ªé€Ÿåº¦æŸè€—å¯ä»¥å¿½ç•¥ï¼Œä½†æé«˜æŸ¥æ‰¾é€Ÿåº¦æ˜¯æ˜æ˜¾çš„ï¼›å¦å¤–ï¼Œå³ä½¿åœ¨åº”ç”¨å±‚åšäº†éå¸¸å®Œå–„çš„æ ¡éªŒæ§åˆ¶ï¼Œåªè¦æ²¡æœ‰å”¯ä¸€ç´¢å¼•ï¼Œæ ¹æ®å¢¨è²å®šå¾‹ï¼Œå¿…ç„¶æœ‰è„æ•°æ®äº§ç”Ÿã€‚ </li><li>ã€å¼ºåˆ¶ã€‘è¶…è¿‡ä¸‰ä¸ªè¡¨ç¦æ­¢joinã€‚éœ€è¦joinçš„å­—æ®µï¼Œæ•°æ®ç±»å‹å¿…é¡»ç»å¯¹ä¸€è‡´ï¼›å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶ï¼Œä¿è¯è¢«å…³è”çš„å­—æ®µéœ€è¦æœ‰ç´¢å¼•ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå³ä½¿åŒè¡¨joinä¹Ÿè¦æ³¨æ„è¡¨ç´¢å¼•ã€SQLæ€§èƒ½ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘åœ¨varcharå­—æ®µä¸Šå»ºç«‹ç´¢å¼•æ—¶ï¼Œå¿…é¡»æŒ‡å®šç´¢å¼•é•¿åº¦ï¼Œæ²¡å¿…è¦å¯¹å…¨å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œæ ¹æ®å®é™…æ–‡æœ¬åŒºåˆ†åº¦å†³å®šç´¢å¼•é•¿åº¦å³å¯ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šç´¢å¼•çš„é•¿åº¦ä¸åŒºåˆ†åº¦æ˜¯ä¸€å¯¹çŸ›ç›¾ä½“ï¼Œä¸€èˆ¬å¯¹å­—ç¬¦ä¸²ç±»å‹æ•°æ®ï¼Œé•¿åº¦ä¸º20çš„ç´¢å¼•ï¼ŒåŒºåˆ†åº¦ä¼šé«˜è¾¾90%ä»¥ä¸Šï¼Œå¯ä»¥ä½¿ç”¨count(distinct left(åˆ—å, ç´¢å¼•é•¿åº¦))/count(*)çš„åŒºåˆ†åº¦æ¥ç¡®å®šã€‚ </li><li>ã€å¼ºåˆ¶ã€‘é¡µé¢æœç´¢ä¸¥ç¦å·¦æ¨¡ç³Šæˆ–è€…å…¨æ¨¡ç³Šï¼Œå¦‚æœéœ€è¦è¯·èµ°æœç´¢å¼•æ“æ¥è§£å†³ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šç´¢å¼•æ–‡ä»¶å…·æœ‰B-Treeçš„æœ€å·¦å‰ç¼€åŒ¹é…ç‰¹æ€§ï¼Œå¦‚æœå·¦è¾¹çš„å€¼æœªç¡®å®šï¼Œé‚£ä¹ˆæ— æ³•ä½¿ç”¨æ­¤ç´¢å¼•ã€‚</li><li>ã€æ¨èã€‘å¦‚æœæœ‰order byçš„åœºæ™¯ï¼Œè¯·æ³¨æ„åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§ã€‚order by æœ€åçš„å­—æ®µæ˜¯ç»„åˆç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”æ”¾åœ¨ç´¢å¼•ç»„åˆé¡ºåºçš„æœ€åï¼Œé¿å…å‡ºç°file_sortçš„æƒ…å†µï¼Œå½±å“æŸ¥è¯¢æ€§èƒ½ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šwhere a=? and b=? order by c; ç´¢å¼•ï¼ša_b_c<br><br><span style="color:red">åä¾‹</span>ï¼šç´¢å¼•ä¸­æœ‰èŒƒå›´æŸ¥æ‰¾ï¼Œé‚£ä¹ˆç´¢å¼•æœ‰åºæ€§æ— æ³•åˆ©ç”¨ï¼Œå¦‚ï¼šWHERE a&gt;10 ORDER BY b; ç´¢å¼•a_bæ— æ³•æ’åºã€‚ </li><li>ã€æ¨èã€‘åˆ©ç”¨è¦†ç›–ç´¢å¼•æ¥è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œé¿å…å›è¡¨ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœä¸€æœ¬ä¹¦éœ€è¦çŸ¥é“ç¬¬11ç« æ˜¯ä»€ä¹ˆæ ‡é¢˜ï¼Œä¼šç¿»å¼€ç¬¬11ç« å¯¹åº”çš„é‚£ä¸€é¡µå—ï¼Ÿç›®å½•æµè§ˆä¸€ä¸‹å°±å¥½ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯èµ·åˆ°è¦†ç›–ç´¢å¼•çš„ä½œç”¨ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šèƒ½å¤Ÿå»ºç«‹ç´¢å¼•çš„ç§ç±»åˆ†ä¸ºä¸»é”®ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€æ™®é€šç´¢å¼•ä¸‰ç§ï¼Œè€Œè¦†ç›–ç´¢å¼•åªæ˜¯ä¸€ç§æŸ¥è¯¢çš„ä¸€ç§æ•ˆæœï¼Œç”¨explainçš„ç»“æœï¼Œextraåˆ—ä¼šå‡ºç°ï¼šusing indexã€‚ </li><li>ã€æ¨èã€‘åˆ©ç”¨å»¶è¿Ÿå…³è”æˆ–è€…å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šMySQLå¹¶ä¸æ˜¯è·³è¿‡offsetè¡Œï¼Œè€Œæ˜¯å–offset+Nè¡Œï¼Œç„¶åè¿”å›æ”¾å¼ƒå‰offsetè¡Œï¼Œè¿”å›Nè¡Œï¼Œé‚£å½“offsetç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæ•ˆç‡å°±éå¸¸çš„ä½ä¸‹ï¼Œè¦ä¹ˆæ§åˆ¶è¿”å›çš„æ€»é¡µæ•°ï¼Œè¦ä¹ˆå¯¹è¶…è¿‡ç‰¹å®šé˜ˆå€¼çš„é¡µæ•°è¿›è¡ŒSQLæ”¹å†™ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šå…ˆå¿«é€Ÿå®šä½éœ€è¦è·å–çš„idæ®µï¼Œç„¶åå†å…³è”ï¼š       <pre>SELECT a.* FROM è¡¨1 a, (select id from è¡¨1 where æ¡ä»¶ LIMIT 100000,20 ) b where a.id=b.id </pre></li><li>ã€æ¨èã€‘ SQLæ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼šè‡³å°‘è¦è¾¾åˆ° range çº§åˆ«ï¼Œè¦æ±‚æ˜¯refçº§åˆ«ï¼Œå¦‚æœå¯ä»¥æ˜¯constsæœ€å¥½ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼š<br>1ï¼‰consts å•è¡¨ä¸­æœ€å¤šåªæœ‰ä¸€ä¸ªåŒ¹é…è¡Œï¼ˆä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•ï¼‰ï¼Œåœ¨ä¼˜åŒ–é˜¶æ®µå³å¯è¯»å–åˆ°æ•°æ®ã€‚<br>2ï¼‰ref æŒ‡çš„æ˜¯ä½¿ç”¨æ™®é€šçš„ç´¢å¼•ï¼ˆnormal indexï¼‰ã€‚<br>3ï¼‰range å¯¹ç´¢å¼•è¿›è¡ŒèŒƒå›´æ£€ç´¢ã€‚ <br><span style="color:red">åä¾‹</span>ï¼šexplainè¡¨çš„ç»“æœï¼Œtype=indexï¼Œç´¢å¼•ç‰©ç†æ–‡ä»¶å…¨æ‰«æï¼Œé€Ÿåº¦éå¸¸æ…¢ï¼Œè¿™ä¸ªindexçº§åˆ«æ¯”è¾ƒrangeè¿˜ä½ï¼Œä¸å…¨è¡¨æ‰«ææ˜¯å°å·«è§å¤§å·«ã€‚ </li><li>ã€æ¨èã€‘å»ºç»„åˆç´¢å¼•çš„æ—¶å€™ï¼ŒåŒºåˆ†åº¦æœ€é«˜çš„åœ¨æœ€å·¦è¾¹ã€‚ <br><span style="color:green">æ­£ä¾‹</span>ï¼šå¦‚æœwhere a=? and b=? ï¼Œaåˆ—çš„å‡ ä¹æ¥è¿‘äºå”¯ä¸€å€¼ï¼Œé‚£ä¹ˆåªéœ€è¦å•å»ºidx_aç´¢å¼•å³å¯ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå­˜åœ¨éç­‰å·å’Œç­‰å·æ··åˆåˆ¤æ–­æ¡ä»¶æ—¶ï¼Œåœ¨å»ºç´¢å¼•æ—¶ï¼Œè¯·æŠŠç­‰å·æ¡ä»¶çš„åˆ—å‰ç½®ã€‚å¦‚ï¼šwhere a&gt;? and b=? é‚£ä¹ˆå³ä½¿açš„åŒºåˆ†åº¦æ›´é«˜ï¼Œä¹Ÿå¿…é¡»æŠŠbæ”¾åœ¨ç´¢å¼•çš„æœ€å‰åˆ—ã€‚ </li><li>ã€æ¨èã€‘é˜²æ­¢å› å­—æ®µç±»å‹ä¸åŒé€ æˆçš„éšå¼è½¬æ¢ï¼Œå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ </li><li>ã€å‚è€ƒã€‘åˆ›å»ºç´¢å¼•æ—¶é¿å…æœ‰å¦‚ä¸‹æç«¯è¯¯è§£ï¼š  1ï¼‰å®æ»¥å‹¿ç¼ºã€‚è®¤ä¸ºä¸€ä¸ªæŸ¥è¯¢å°±éœ€è¦å»ºä¸€ä¸ªç´¢å¼•ã€‚  2ï¼‰å®ç¼ºå‹¿æ»¥ã€‚è®¤ä¸ºç´¢å¼•ä¼šæ¶ˆè€—ç©ºé—´ã€ä¸¥é‡æ‹–æ…¢æ›´æ–°å’Œæ–°å¢é€Ÿåº¦ã€‚  3ï¼‰æŠµåˆ¶æƒŸä¸€ç´¢å¼•ã€‚è®¤ä¸ºä¸šåŠ¡çš„æƒŸä¸€æ€§ä¸€å¾‹éœ€è¦åœ¨åº”ç”¨å±‚é€šè¿‡â€œå…ˆæŸ¥åæ’â€æ–¹å¼è§£å†³ã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5.1-å»ºè¡¨è§„çº¦</title>
      <link href="/alibaba-p3c/51-create-table-statute/"/>
      <url>/alibaba-p3c/51-create-table-statute/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-å»ºè¡¨è§„çº¦"><a href="#ä¸€-å»ºè¡¨è§„çº¦" class="headerlink" title="(ä¸€) å»ºè¡¨è§„çº¦"></a>(ä¸€) å»ºè¡¨è§„çº¦</h2><ol><li>ã€å¼ºåˆ¶ã€‘è¡¨è¾¾æ˜¯ä¸å¦æ¦‚å¿µçš„å­—æ®µï¼Œå¿…é¡»ä½¿ç”¨is_xxxçš„æ–¹å¼å‘½åï¼Œæ•°æ®ç±»å‹æ˜¯unsigned tinyintï¼ˆ 1è¡¨ç¤ºæ˜¯ï¼Œ0è¡¨ç¤ºå¦ï¼‰ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä»»ä½•å­—æ®µå¦‚æœä¸ºéè´Ÿæ•°ï¼Œå¿…é¡»æ˜¯<code>unsigned</code>ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šè¡¨è¾¾é€»è¾‘åˆ é™¤çš„å­—æ®µå<code>is_deleted</code>ï¼Œ1è¡¨ç¤ºåˆ é™¤ï¼Œ0è¡¨ç¤ºæœªåˆ é™¤ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘è¡¨åã€å­—æ®µåå¿…é¡»ä½¿ç”¨å°å†™å­—æ¯æˆ–æ•°å­—ï¼Œç¦æ­¢å‡ºç°æ•°å­—å¼€å¤´ï¼Œç¦æ­¢ä¸¤ä¸ªä¸‹åˆ’çº¿ä¸­é—´åªå‡ºç°æ•°å­—ã€‚æ•°æ®åº“å­—æ®µåçš„ä¿®æ”¹ä»£ä»·å¾ˆå¤§ï¼Œå› ä¸ºæ— æ³•è¿›è¡Œé¢„å‘å¸ƒï¼Œæ‰€ä»¥å­—æ®µåç§°éœ€è¦æ…é‡è€ƒè™‘ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šMySQLåœ¨Windowsä¸‹ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†åœ¨Linuxä¸‹é»˜è®¤æ˜¯åŒºåˆ†å¤§å°å†™ã€‚å› æ­¤ï¼Œæ•°æ®åº“åã€è¡¨åã€å­—æ®µåï¼Œéƒ½ä¸å…è®¸å‡ºç°ä»»ä½•å¤§å†™å­—æ¯ï¼Œé¿å…èŠ‚å¤–ç”Ÿæã€‚ <br><span style="color:green">æ­£ä¾‹</span>ï¼šaliyun_adminï¼Œrdc_configï¼Œlevel3_name <br><span style="color:red">åä¾‹</span>ï¼šAliyunAdminï¼ŒrdcConfigï¼Œlevel_3_name </li><li>ã€å¼ºåˆ¶ã€‘è¡¨åä¸ä½¿ç”¨å¤æ•°åè¯ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šè¡¨ååº”è¯¥ä»…ä»…è¡¨ç¤ºè¡¨é‡Œé¢çš„å®ä½“å†…å®¹ï¼Œä¸åº”è¯¥è¡¨ç¤ºå®ä½“æ•°é‡ï¼Œå¯¹åº”äºDOç±»åä¹Ÿæ˜¯å•æ•°å½¢å¼ï¼Œç¬¦åˆè¡¨è¾¾ä¹ æƒ¯ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ç¦ç”¨ä¿ç•™å­—ï¼Œå¦‚<code>desc</code>ã€<code>range</code>ã€<code>match</code>ã€<code>delayed</code>ç­‰ï¼Œè¯·å‚è€ƒMySQLå®˜æ–¹ä¿ç•™å­—ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ä¸»é”®ç´¢å¼•åä¸ºpk_å­—æ®µåï¼›å”¯ä¸€ç´¢å¼•åä¸ºuk_å­—æ®µåï¼›æ™®é€šç´¢å¼•ååˆ™ä¸ºidx_å­—æ®µåã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼špk_ å³primary keyï¼›uk_ å³ unique keyï¼›idx_ å³indexçš„ç®€ç§°ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å°æ•°ç±»å‹ä¸ºdecimalï¼Œç¦æ­¢ä½¿ç”¨floatå’Œdoubleã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šfloatå’Œdoubleåœ¨å­˜å‚¨çš„æ—¶å€™ï¼Œå­˜åœ¨ç²¾åº¦æŸå¤±çš„é—®é¢˜ï¼Œå¾ˆå¯èƒ½åœ¨å€¼çš„æ¯”è¾ƒæ—¶ï¼Œå¾—åˆ°ä¸æ­£ç¡®çš„ç»“æœã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®èŒƒå›´è¶…è¿‡decimalçš„èŒƒå›´ï¼Œå»ºè®®å°†æ•°æ®æ‹†æˆæ•´æ•°å’Œå°æ•°åˆ†å¼€å­˜å‚¨ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å¦‚æœå­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦å‡ ä¹ç›¸ç­‰ï¼Œä½¿ç”¨charå®šé•¿å­—ç¬¦ä¸²ç±»å‹ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘varcharæ˜¯å¯å˜é•¿å­—ç¬¦ä¸²ï¼Œä¸é¢„å…ˆåˆ†é…å­˜å‚¨ç©ºé—´ï¼Œé•¿åº¦ä¸è¦è¶…è¿‡5000ï¼Œå¦‚æœå­˜å‚¨é•¿åº¦å¤§äºæ­¤å€¼ï¼Œå®šä¹‰å­—æ®µç±»å‹ä¸ºtextï¼Œç‹¬ç«‹å‡ºæ¥ä¸€å¼ è¡¨ï¼Œç”¨ä¸»é”®æ¥å¯¹åº”ï¼Œé¿å…å½±å“å…¶å®ƒå­—æ®µç´¢å¼•æ•ˆç‡ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘è¡¨å¿…å¤‡ä¸‰å­—æ®µï¼šid, gmt_create, gmt_modifiedã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå…¶ä¸­idå¿…ä¸ºä¸»é”®ï¼Œç±»å‹ä¸ºunsigned bigintã€å•è¡¨æ—¶è‡ªå¢ã€æ­¥é•¿ä¸º1ã€‚gmt_create, gmt_modifiedçš„ç±»å‹å‡ä¸ºdatetimeç±»å‹ï¼Œå‰è€…ç°åœ¨æ—¶è¡¨ç¤ºä¸»åŠ¨åˆ›å»ºï¼Œåè€…è¿‡å»åˆ†è¯è¡¨ç¤ºè¢«åŠ¨æ›´æ–°ã€‚ </li><li>ã€æ¨èã€‘è¡¨çš„å‘½åæœ€å¥½æ˜¯åŠ ä¸Šâ€œä¸šåŠ¡åç§°_è¡¨çš„ä½œç”¨â€ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šalipay_task / force_project / trade_config </li><li>ã€æ¨èã€‘åº“åä¸åº”ç”¨åç§°å°½é‡ä¸€è‡´ã€‚ </li><li>ã€æ¨èã€‘å¦‚æœä¿®æ”¹å­—æ®µå«ä¹‰æˆ–å¯¹å­—æ®µè¡¨ç¤ºçš„çŠ¶æ€è¿½åŠ æ—¶ï¼Œéœ€è¦åŠæ—¶æ›´æ–°å­—æ®µæ³¨é‡Šã€‚ </li><li>ã€æ¨èã€‘å­—æ®µå…è®¸é€‚å½“å†—ä½™ï¼Œä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œä½†å¿…é¡»è€ƒè™‘æ•°æ®ä¸€è‡´ã€‚å†—ä½™å­—æ®µåº”éµå¾ªï¼š<br>1ï¼‰ä¸æ˜¯é¢‘ç¹ä¿®æ”¹çš„å­—æ®µã€‚<br>2ï¼‰ä¸æ˜¯varcharè¶…é•¿å­—æ®µï¼Œæ›´ä¸èƒ½æ˜¯textå­—æ®µã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šå•†å“ç±»ç›®åç§°ä½¿ç”¨é¢‘ç‡é«˜ï¼Œå­—æ®µé•¿åº¦çŸ­ï¼Œåç§°åŸºæœ¬ä¸€æˆä¸å˜ï¼Œå¯åœ¨ç›¸å…³è”çš„è¡¨ä¸­å†—ä½™å­˜å‚¨ç±»ç›®åç§°ï¼Œé¿å…å…³è”æŸ¥è¯¢ã€‚ </li><li>ã€æ¨èã€‘å•è¡¨è¡Œæ•°è¶…è¿‡500ä¸‡è¡Œæˆ–è€…å•è¡¨å®¹é‡è¶…è¿‡2GBï¼Œæ‰æ¨èè¿›è¡Œåˆ†åº“åˆ†è¡¨ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœé¢„è®¡ä¸‰å¹´åçš„æ•°æ®é‡æ ¹æœ¬è¾¾ä¸åˆ°è¿™ä¸ªçº§åˆ«ï¼Œè¯·ä¸è¦åœ¨åˆ›å»ºè¡¨æ—¶å°±åˆ†åº“åˆ†è¡¨ã€‚ </li><li>ã€å‚è€ƒã€‘åˆé€‚çš„å­—ç¬¦å­˜å‚¨é•¿åº¦ï¼Œä¸ä½†èŠ‚çº¦æ•°æ®åº“è¡¨ç©ºé—´ã€èŠ‚çº¦ç´¢å¼•å­˜å‚¨ï¼Œæ›´é‡è¦çš„æ˜¯æå‡æ£€ç´¢é€Ÿåº¦ã€‚ <br><span style="color:green">æ­£ä¾‹</span>ï¼šå¦‚ä¸‹è¡¨ï¼Œå…¶ä¸­æ— ç¬¦å·å€¼å¯ä»¥é¿å…è¯¯å­˜è´Ÿæ•°ï¼Œä¸”æ‰©å¤§äº†è¡¨ç¤ºèŒƒå›´ã€‚ </li></ol><table><thead><tr><th>å¯¹è±¡</th><th align="left">å¹´é¾„åŒºé—´</th><th align="left">ç±»å‹</th><th align="left">å­—èŠ‚</th></tr></thead><tbody><tr><td>äºº</td><td align="left">150å²ä¹‹å†…</td><td align="left">unsigned tinyint</td><td align="left">1</td></tr><tr><td>é¾Ÿ</td><td align="left">æ•°ç™¾å²</td><td align="left">unsigned smallint</td><td align="left">2</td></tr><tr><td>æé¾™åŒ–çŸ³</td><td align="left">æ•°åƒä¸‡å²</td><td align="left">unsigned int</td><td align="left">4</td></tr><tr><td>å¤ªé˜³</td><td align="left">çº¦50äº¿å¹´</td><td align="left">unsigned bigint</td><td align="left">8</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4.1-å®‰å…¨è§„çº¦</title>
      <link href="/alibaba-p3c/41-security-statute/"/>
      <url>/alibaba-p3c/41-security-statute/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘éš¶å±äºç”¨æˆ·ä¸ªäººçš„é¡µé¢æˆ–è€…åŠŸèƒ½å¿…é¡»è¿›è¡Œæƒé™æ§åˆ¶æ ¡éªŒã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šé˜²æ­¢æ²¡æœ‰åšæ°´å¹³æƒé™æ ¡éªŒå°±å¯éšæ„è®¿é—®ã€ä¿®æ”¹ã€åˆ é™¤åˆ«äººçš„æ•°æ®ï¼Œæ¯”å¦‚æŸ¥çœ‹ä»–äººçš„ç§ä¿¡å†…å®¹ã€ä¿®æ”¹ä»–äººçš„è®¢å•ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ç”¨æˆ·æ•æ„Ÿæ•°æ®ç¦æ­¢ç›´æ¥å±•ç¤ºï¼Œå¿…é¡»å¯¹å±•ç¤ºæ•°æ®è¿›è¡Œè„±æ•ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä¸ªäººæ‰‹æœºå·ç æ˜¾ç¤ºä¸º:158****9119ï¼Œéšè—ä¸­é—´4ä½ï¼Œé˜²æ­¢éšç§æ³„éœ²ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ç”¨æˆ·è¾“å…¥çš„SQLå‚æ•°ä¸¥æ ¼ä½¿ç”¨å‚æ•°ç»‘å®šæˆ–è€…METADATAå­—æ®µå€¼é™å®šï¼Œé˜²æ­¢SQLæ³¨å…¥ï¼Œç¦æ­¢å­—ç¬¦ä¸²æ‹¼æ¥SQLè®¿é—®æ•°æ®åº“ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ç”¨æˆ·è¯·æ±‚ä¼ å…¥çš„ä»»ä½•å‚æ•°å¿…é¡»åšæœ‰æ•ˆæ€§éªŒè¯ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¿½ç•¥å‚æ•°æ ¡éªŒå¯èƒ½å¯¼è‡´ï¼š <ul><li>page sizeè¿‡å¤§å¯¼è‡´å†…å­˜æº¢å‡º </li><li>æ¶æ„order byå¯¼è‡´æ•°æ®åº“æ…¢æŸ¥è¯¢ </li><li>ä»»æ„é‡å®šå‘ </li><li>SQLæ³¨å…¥ </li><li>ååºåˆ—åŒ–æ³¨å…¥ </li><li>æ­£åˆ™è¾“å…¥æºä¸²æ‹’ç»æœåŠ¡ReDoS<br><br><span style="color:orange">è¯´æ˜</span>ï¼šJavaä»£ç ç”¨æ­£åˆ™æ¥éªŒè¯å®¢æˆ·ç«¯çš„è¾“å…¥ï¼Œæœ‰äº›æ­£åˆ™å†™æ³•éªŒè¯æ™®é€šç”¨æˆ·è¾“å…¥æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæ”»å‡»äººå‘˜ä½¿ç”¨çš„æ˜¯ç‰¹æ®Šæ„é€ çš„å­—ç¬¦ä¸²æ¥éªŒè¯ï¼Œæœ‰å¯èƒ½å¯¼è‡´æ­»å¾ªç¯çš„ç»“æœã€‚ </li></ul></li><li>ã€å¼ºåˆ¶ã€‘ç¦æ­¢å‘HTMLé¡µé¢è¾“å‡ºæœªç»å®‰å…¨è¿‡æ»¤æˆ–æœªæ­£ç¡®è½¬ä¹‰çš„ç”¨æˆ·æ•°æ®ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘è¡¨å•ã€AJAXæäº¤å¿…é¡»æ‰§è¡ŒCSRFå®‰å…¨è¿‡æ»¤ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šCSRF(Cross-site request forgery)è·¨ç«™è¯·æ±‚ä¼ªé€ æ˜¯ä¸€ç±»å¸¸è§ç¼–ç¨‹æ¼æ´ã€‚å¯¹äºå­˜åœ¨CSRFæ¼æ´çš„åº”ç”¨/ç½‘ç«™ï¼Œæ”»å‡»è€…å¯ä»¥äº‹å…ˆæ„é€ å¥½URLï¼Œåªè¦å—å®³è€…ç”¨æˆ·ä¸€è®¿é—®ï¼Œåå°ä¾¿åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…æƒ…å†µä¸‹å¯¹æ•°æ®åº“ä¸­ç”¨æˆ·å‚æ•°è¿›è¡Œç›¸åº”ä¿®æ”¹ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘åœ¨ä½¿ç”¨å¹³å°èµ„æºï¼Œè­¬å¦‚çŸ­ä¿¡ã€é‚®ä»¶ã€ç”µè¯ã€ä¸‹å•ã€æ”¯ä»˜ï¼Œå¿…é¡»å®ç°æ­£ç¡®çš„é˜²é‡æ”¾é™åˆ¶ï¼Œå¦‚æ•°é‡é™åˆ¶ã€ç–²åŠ³åº¦æ§åˆ¶ã€éªŒè¯ç æ ¡éªŒï¼Œé¿å…è¢«æ»¥åˆ·å¯¼è‡´èµ„æŸã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æ³¨å†Œæ—¶å‘é€éªŒè¯ç åˆ°æ‰‹æœºï¼Œå¦‚æœæ²¡æœ‰é™åˆ¶æ¬¡æ•°å’Œé¢‘ç‡ï¼Œé‚£ä¹ˆå¯ä»¥åˆ©ç”¨æ­¤åŠŸèƒ½éªšæ‰°åˆ°å…¶å®ƒç”¨æˆ·ï¼Œå¹¶é€ æˆçŸ­ä¿¡å¹³å°èµ„æºæµªè´¹ã€‚ </li><li>ã€æ¨èã€‘å‘è´´ã€è¯„è®ºã€å‘é€å³æ—¶æ¶ˆæ¯ç­‰ç”¨æˆ·ç”Ÿæˆå†…å®¹çš„åœºæ™¯å¿…é¡»å®ç°é˜²åˆ·ã€æ–‡æœ¬å†…å®¹è¿ç¦è¯è¿‡æ»¤ç­‰é£æ§ç­–ç•¥ã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3.1-å•å…ƒæµ‹è¯•</title>
      <link href="/alibaba-p3c/31-unit-test/"/>
      <url>/alibaba-p3c/31-unit-test/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘å¥½çš„å•å…ƒæµ‹è¯•å¿…é¡»éµå®ˆAIRåŸåˆ™ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå•å…ƒæµ‹è¯•åœ¨çº¿ä¸Šè¿è¡Œæ—¶ï¼Œæ„Ÿè§‰åƒç©ºæ°”ï¼ˆAIRï¼‰ä¸€æ ·å¹¶ä¸å­˜åœ¨ï¼Œä½†åœ¨æµ‹è¯•è´¨é‡çš„ä¿éšœä¸Šï¼Œå´æ˜¯éå¸¸å…³é”®çš„ã€‚å¥½çš„å•å…ƒæµ‹è¯•å®è§‚ä¸Šæ¥è¯´ï¼Œå…·æœ‰è‡ªåŠ¨åŒ–ã€ç‹¬ç«‹æ€§ã€å¯é‡å¤æ‰§è¡Œçš„ç‰¹ç‚¹ã€‚ <ul><li>Aï¼šAutomaticï¼ˆè‡ªåŠ¨åŒ–ï¼‰ </li><li>Iï¼šIndependentï¼ˆç‹¬ç«‹æ€§ï¼‰ </li><li>Rï¼šRepeatableï¼ˆå¯é‡å¤ï¼‰ </li></ul></li><li>ã€å¼ºåˆ¶ã€‘å•å…ƒæµ‹è¯•åº”è¯¥æ˜¯å…¨è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œå¹¶ä¸”éäº¤äº’å¼çš„ã€‚æµ‹è¯•ç”¨ä¾‹é€šå¸¸æ˜¯è¢«å®šæœŸæ‰§è¡Œçš„ï¼Œæ‰§è¡Œè¿‡ç¨‹å¿…é¡»å®Œå…¨è‡ªåŠ¨åŒ–æ‰æœ‰æ„ä¹‰ã€‚è¾“å‡ºç»“æœéœ€è¦äººå·¥æ£€æŸ¥çš„æµ‹è¯•ä¸æ˜¯ä¸€ä¸ªå¥½çš„å•å…ƒæµ‹è¯•ã€‚å•å…ƒæµ‹è¯•ä¸­ä¸å‡†ä½¿ç”¨System.outæ¥è¿›è¡Œäººè‚‰éªŒè¯ï¼Œå¿…é¡»ä½¿ç”¨assertæ¥éªŒè¯ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ä¿æŒå•å…ƒæµ‹è¯•çš„ç‹¬ç«‹æ€§ã€‚ä¸ºäº†ä¿è¯å•å…ƒæµ‹è¯•ç¨³å®šå¯é ä¸”ä¾¿äºç»´æŠ¤ï¼Œå•å…ƒæµ‹è¯•ç”¨ä¾‹ä¹‹é—´å†³ä¸èƒ½äº’ç›¸è°ƒç”¨ï¼Œä¹Ÿä¸èƒ½ä¾èµ–æ‰§è¡Œçš„å…ˆåæ¬¡åºã€‚ <br><span style="color:red">åä¾‹</span>ï¼šmethod2éœ€è¦ä¾èµ–method1çš„æ‰§è¡Œï¼Œå°†æ‰§è¡Œç»“æœä½œä¸ºmethod2çš„è¾“å…¥ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å•å…ƒæµ‹è¯•æ˜¯å¯ä»¥é‡å¤æ‰§è¡Œçš„ï¼Œä¸èƒ½å—åˆ°å¤–ç•Œç¯å¢ƒçš„å½±å“ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå•å…ƒæµ‹è¯•é€šå¸¸ä¼šè¢«æ”¾åˆ°æŒç»­é›†æˆä¸­ï¼Œæ¯æ¬¡æœ‰ä»£ç check inæ—¶å•å…ƒæµ‹è¯•éƒ½ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœå•æµ‹å¯¹å¤–éƒ¨ç¯å¢ƒï¼ˆç½‘ç»œã€æœåŠ¡ã€ä¸­é—´ä»¶ç­‰ï¼‰æœ‰ä¾èµ–ï¼Œå®¹æ˜“å¯¼è‡´æŒç»­é›†æˆæœºåˆ¶çš„ä¸å¯ç”¨ã€‚ <br><span style="color:green">æ­£ä¾‹</span>ï¼šä¸ºäº†ä¸å—å¤–ç•Œç¯å¢ƒå½±å“ï¼Œè¦æ±‚è®¾è®¡ä»£ç æ—¶å°±æŠŠSUTçš„ä¾èµ–æ”¹æˆæ³¨å…¥ï¼Œåœ¨æµ‹è¯•æ—¶ç”¨spring è¿™æ ·çš„DIæ¡†æ¶æ³¨å…¥ä¸€ä¸ªæœ¬åœ°ï¼ˆå†…å­˜ï¼‰å®ç°æˆ–è€…Mockå®ç°ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å¯¹äºå•å…ƒæµ‹è¯•ï¼Œè¦ä¿è¯æµ‹è¯•ç²’åº¦è¶³å¤Ÿå°ï¼Œæœ‰åŠ©äºç²¾ç¡®å®šä½é—®é¢˜ã€‚å•æµ‹ç²’åº¦è‡³å¤šæ˜¯ç±»çº§åˆ«ï¼Œä¸€èˆ¬æ˜¯æ–¹æ³•çº§åˆ«ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šåªæœ‰æµ‹è¯•ç²’åº¦å°æ‰èƒ½åœ¨å‡ºé”™æ—¶å°½å¿«å®šä½åˆ°å‡ºé”™ä½ç½®ã€‚å•æµ‹ä¸è´Ÿè´£æ£€æŸ¥è·¨ç±»æˆ–è€…è·¨ç³»ç»Ÿçš„äº¤äº’é€»è¾‘ï¼Œé‚£æ˜¯é›†æˆæµ‹è¯•çš„é¢†åŸŸã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ ¸å¿ƒä¸šåŠ¡ã€æ ¸å¿ƒåº”ç”¨ã€æ ¸å¿ƒæ¨¡å—çš„å¢é‡ä»£ç ç¡®ä¿å•å…ƒæµ‹è¯•é€šè¿‡ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæ–°å¢ä»£ç åŠæ—¶è¡¥å……å•å…ƒæµ‹è¯•ï¼Œå¦‚æœæ–°å¢ä»£ç å½±å“äº†åŸæœ‰å•å…ƒæµ‹è¯•ï¼Œè¯·åŠæ—¶ä¿®æ­£ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å•å…ƒæµ‹è¯•ä»£ç å¿…é¡»å†™åœ¨å¦‚ä¸‹å·¥ç¨‹ç›®å½•ï¼šsrc/test/javaï¼Œä¸å…è®¸å†™åœ¨ä¸šåŠ¡ä»£ç ç›®å½•ä¸‹ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæºç æ„å»ºæ—¶ä¼šè·³è¿‡æ­¤ç›®å½•ï¼Œè€Œå•å…ƒæµ‹è¯•æ¡†æ¶é»˜è®¤æ˜¯æ‰«ææ­¤ç›®å½•ã€‚ </li><li>ã€æ¨èã€‘å•å…ƒæµ‹è¯•çš„åŸºæœ¬ç›®æ ‡ï¼šè¯­å¥è¦†ç›–ç‡è¾¾åˆ°70%ï¼›æ ¸å¿ƒæ¨¡å—çš„è¯­å¥è¦†ç›–ç‡å’Œåˆ†æ”¯è¦†ç›–ç‡éƒ½è¦è¾¾åˆ°100%<br><br><span style="color:orange">è¯´æ˜</span>ï¼šåœ¨å·¥ç¨‹è§„çº¦çš„åº”ç”¨åˆ†å±‚ä¸­æåˆ°çš„DAOå±‚ï¼ŒManagerå±‚ï¼Œå¯é‡ç”¨åº¦é«˜çš„Serviceï¼Œéƒ½åº”è¯¥è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚   </li><li>ã€æ¨èã€‘ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç éµå®ˆBCDEåŸåˆ™ï¼Œä»¥ä¿è¯è¢«æµ‹è¯•æ¨¡å—çš„äº¤ä»˜è´¨é‡ã€‚ <ul><li>Bï¼šBorderï¼Œè¾¹ç•Œå€¼æµ‹è¯•ï¼ŒåŒ…æ‹¬å¾ªç¯è¾¹ç•Œã€ç‰¹æ®Šå–å€¼ã€ç‰¹æ®Šæ—¶é—´ç‚¹ã€æ•°æ®é¡ºåºç­‰ã€‚ </li><li>Cï¼šCorrectï¼Œæ­£ç¡®çš„è¾“å…¥ï¼Œå¹¶å¾—åˆ°é¢„æœŸçš„ç»“æœã€‚ </li><li>Dï¼šDesignï¼Œä¸è®¾è®¡æ–‡æ¡£ç›¸ç»“åˆï¼Œæ¥ç¼–å†™å•å…ƒæµ‹è¯•ã€‚ </li><li>Eï¼šErrorï¼Œå¼ºåˆ¶é”™è¯¯ä¿¡æ¯è¾“å…¥ï¼ˆå¦‚ï¼šéæ³•æ•°æ®ã€å¼‚å¸¸æµç¨‹ã€éä¸šåŠ¡å…è®¸è¾“å…¥ç­‰ï¼‰ï¼Œå¹¶å¾—åˆ°é¢„æœŸçš„ç»“æœã€‚ </li></ul></li><li>ã€æ¨èã€‘å¯¹äºæ•°æ®åº“ç›¸å…³çš„æŸ¥è¯¢ï¼Œæ›´æ–°ï¼Œåˆ é™¤ç­‰æ“ä½œï¼Œä¸èƒ½å‡è®¾æ•°æ®åº“é‡Œçš„æ•°æ®æ˜¯å­˜åœ¨çš„ï¼Œæˆ–è€…ç›´æ¥æ“ä½œæ•°æ®åº“æŠŠæ•°æ®æ’å…¥è¿›å»ï¼Œè¯·ä½¿ç”¨ç¨‹åºæ’å…¥æˆ–è€…å¯¼å…¥æ•°æ®çš„æ–¹å¼æ¥å‡†å¤‡æ•°æ®ã€‚ <br><span style="color:red">åä¾‹</span>ï¼šåˆ é™¤æŸä¸€è¡Œæ•°æ®çš„å•å…ƒæµ‹è¯•ï¼Œåœ¨æ•°æ®åº“ä¸­ï¼Œå…ˆç›´æ¥æ‰‹åŠ¨å¢åŠ ä¸€è¡Œä½œä¸ºåˆ é™¤ç›®æ ‡ï¼Œä½†æ˜¯è¿™ä¸€è¡Œæ–°å¢æ•°æ®å¹¶ä¸ç¬¦åˆä¸šåŠ¡æ’å…¥è§„åˆ™ï¼Œå¯¼è‡´æµ‹è¯•ç»“æœå¼‚å¸¸ã€‚ </li><li>ã€æ¨èã€‘å’Œæ•°æ®åº“ç›¸å…³çš„å•å…ƒæµ‹è¯•ï¼Œå¯ä»¥è®¾å®šè‡ªåŠ¨å›æ»šæœºåˆ¶ï¼Œä¸ç»™æ•°æ®åº“é€ æˆè„æ•°æ®ã€‚æˆ–è€…å¯¹å•å…ƒæµ‹è¯•äº§ç”Ÿçš„æ•°æ®æœ‰æ˜ç¡®çš„å‰åç¼€æ ‡è¯†ã€‚ <br><span style="color:green">æ­£ä¾‹</span>ï¼šåœ¨RDCå†…éƒ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œä½¿ç”¨RDC_UNIT_TEST_çš„å‰ç¼€æ ‡è¯†æ•°æ®ã€‚ </li><li>ã€æ¨èã€‘å¯¹äºä¸å¯æµ‹çš„ä»£ç å»ºè®®åšå¿…è¦çš„é‡æ„ï¼Œä½¿ä»£ç å˜å¾—å¯æµ‹ï¼Œé¿å…ä¸ºäº†è¾¾åˆ°æµ‹è¯•è¦æ±‚è€Œä¹¦å†™ä¸è§„èŒƒæµ‹è¯•ä»£ç ã€‚ </li><li>ã€æ¨èã€‘åœ¨è®¾è®¡è¯„å®¡é˜¶æ®µï¼Œå¼€å‘äººå‘˜éœ€è¦å’Œæµ‹è¯•äººå‘˜ä¸€èµ·ç¡®å®šå•å…ƒæµ‹è¯•èŒƒå›´ï¼Œå•å…ƒæµ‹è¯•æœ€å¥½è¦†ç›–æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼ˆUCï¼‰ã€‚ </li><li>ã€æ¨èã€‘å•å…ƒæµ‹è¯•ä½œä¸ºä¸€ç§è´¨é‡ä¿éšœæ‰‹æ®µï¼Œä¸å»ºè®®é¡¹ç›®å‘å¸ƒåè¡¥å……å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œå»ºè®®åœ¨é¡¹ç›®ææµ‹å‰å®Œæˆå•å…ƒæµ‹è¯•ã€‚ </li><li>ã€å‚è€ƒã€‘ä¸ºäº†æ›´æ–¹ä¾¿åœ°è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä¸šåŠ¡ä»£ç åº”é¿å…ä»¥ä¸‹æƒ…å†µï¼š<ul><li>æ„é€ æ–¹æ³•ä¸­åšçš„äº‹æƒ…è¿‡å¤šã€‚ </li><li>å­˜åœ¨è¿‡å¤šçš„å…¨å±€å˜é‡å’Œé™æ€æ–¹æ³•ã€‚ </li><li>å­˜åœ¨è¿‡å¤šçš„å¤–éƒ¨ä¾èµ–ã€‚ </li><li>å­˜åœ¨è¿‡å¤šçš„æ¡ä»¶è¯­å¥ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¤šå±‚æ¡ä»¶è¯­å¥å»ºè®®ä½¿ç”¨å«è¯­å¥ã€ç­–ç•¥æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ç­‰æ–¹å¼é‡æ„ã€‚ </li></ul></li><li>ã€å‚è€ƒã€‘ä¸è¦å¯¹å•å…ƒæµ‹è¯•å­˜åœ¨å¦‚ä¸‹è¯¯è§£ï¼š <ul><li>é‚£æ˜¯æµ‹è¯•åŒå­¦å¹²çš„äº‹æƒ…ã€‚æœ¬æ–‡æ˜¯å¼€å‘æ‰‹å†Œï¼Œå‡¡æ˜¯æœ¬æ–‡å†…å®¹éƒ½æ˜¯ä¸å¼€å‘åŒå­¦å¼ºç›¸å…³çš„ã€‚</li><li>å•å…ƒæµ‹è¯•ä»£ç æ˜¯å¤šä½™çš„ã€‚æ±½è½¦çš„æ•´ä½“åŠŸèƒ½ä¸å„å•å…ƒéƒ¨ä»¶çš„æµ‹è¯•æ­£å¸¸ä¸å¦æ˜¯å¼ºç›¸å…³çš„ã€‚ </li><li>å•å…ƒæµ‹è¯•ä»£ç ä¸éœ€è¦ç»´æŠ¤ã€‚ä¸€å¹´åŠè½½åï¼Œé‚£ä¹ˆå•å…ƒæµ‹è¯•å‡ ä¹å¤„äºåºŸå¼ƒçŠ¶æ€ã€‚ </li><li>å•å…ƒæµ‹è¯•ä¸çº¿ä¸Šæ•…éšœæ²¡æœ‰è¾©è¯å…³ç³»ã€‚å¥½çš„å•å…ƒæµ‹è¯•èƒ½å¤Ÿæœ€å¤§é™åº¦åœ°è§„é¿çº¿ä¸Šæ•…éšœã€‚ </li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2.2-æ—¥å¿—è§„çº¦</title>
      <link href="/alibaba-p3c/22-log-statute/"/>
      <url>/alibaba-p3c/22-log-statute/</url>
      
        <content type="html"><![CDATA[<h2 id="tags-ä»£ç è§„èŒƒ"><a href="#tags-ä»£ç è§„èŒƒ" class="headerlink" title="tags: [ä»£ç è§„èŒƒ]"></a>tags: [ä»£ç è§„èŒƒ]</h2><ol><li>ã€å¼ºåˆ¶ã€‘åº”ç”¨ä¸­ä¸å¯ç›´æ¥ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿï¼ˆLog4jã€Logbackï¼‰ä¸­çš„APIï¼Œè€Œåº”ä¾èµ–ä½¿ç”¨æ—¥å¿—æ¡†æ¶SLF4Jä¸­çš„APIï¼Œä½¿ç”¨é—¨é¢æ¨¡å¼çš„æ—¥å¿—æ¡†æ¶ï¼Œæœ‰åˆ©äºç»´æŠ¤å’Œå„ä¸ªç±»çš„æ—¥å¿—å¤„ç†æ–¹å¼ç»Ÿä¸€ã€‚ <pre>import org.slf4j.Logger;import org.slf4j.LoggerFactory;private static final Logger logger = LoggerFactory.getLogger(Abc.class);  </pre></li><li>ã€å¼ºåˆ¶ã€‘æ—¥å¿—æ–‡ä»¶æ¨èè‡³å°‘ä¿å­˜15å¤©ï¼Œå› ä¸ºæœ‰äº›å¼‚å¸¸å…·å¤‡ä»¥â€œå‘¨â€ä¸ºé¢‘æ¬¡å‘ç”Ÿçš„ç‰¹ç‚¹ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘åº”ç”¨ä¸­çš„æ‰©å±•æ—¥å¿—ï¼ˆå¦‚æ‰“ç‚¹ã€ä¸´æ—¶ç›‘æ§ã€è®¿é—®æ—¥å¿—ç­‰ï¼‰å‘½åæ–¹å¼ï¼šappName_logType_logName.logã€‚logType:æ—¥å¿—ç±»å‹ï¼Œæ¨èåˆ†ç±»æœ‰stats/monitor/visitç­‰ï¼›logName:æ—¥å¿—æè¿°ã€‚è¿™ç§å‘½åçš„å¥½å¤„ï¼šé€šè¿‡æ–‡ä»¶åå°±å¯çŸ¥é“æ—¥å¿—æ–‡ä»¶å±äºä»€ä¹ˆåº”ç”¨ï¼Œä»€ä¹ˆç±»å‹ï¼Œä»€ä¹ˆç›®çš„ï¼Œä¹Ÿæœ‰åˆ©äºå½’ç±»æŸ¥æ‰¾ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šmppserveråº”ç”¨ä¸­å•ç‹¬ç›‘æ§æ—¶åŒºè½¬æ¢å¼‚å¸¸ï¼Œå¦‚ï¼š<br>mppserver_monitor_timeZoneConvert.log<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæ¨èå¯¹æ—¥å¿—è¿›è¡Œåˆ†ç±»ï¼Œå¦‚å°†é”™è¯¯æ—¥å¿—å’Œä¸šåŠ¡æ—¥å¿—åˆ†å¼€å­˜æ”¾ï¼Œä¾¿äºå¼€å‘äººå‘˜æŸ¥çœ‹ï¼Œä¹Ÿä¾¿äºé€šè¿‡æ—¥å¿—å¯¹ç³»ç»Ÿè¿›è¡ŒåŠæ—¶ç›‘æ§ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å¯¹trace/debug/infoçº§åˆ«çš„æ—¥å¿—è¾“å‡ºï¼Œå¿…é¡»ä½¿ç”¨æ¡ä»¶è¾“å‡ºå½¢å¼æˆ–è€…ä½¿ç”¨å ä½ç¬¦çš„æ–¹å¼ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šlogger.debug(â€œProcessing trade with id: â€œ + id + â€œ and symbol: â€œ + symbol); å¦‚æœæ—¥å¿—çº§åˆ«æ˜¯warnï¼Œä¸Šè¿°æ—¥å¿—ä¸ä¼šæ‰“å°ï¼Œä½†æ˜¯ä¼šæ‰§è¡Œå­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œï¼Œå¦‚æœsymbolæ˜¯å¯¹è±¡ï¼Œä¼šæ‰§è¡ŒtoString()æ–¹æ³•ï¼Œæµªè´¹äº†ç³»ç»Ÿèµ„æºï¼Œæ‰§è¡Œäº†ä¸Šè¿°æ“ä½œï¼Œæœ€ç»ˆæ—¥å¿—å´æ²¡æœ‰æ‰“å°ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š <pre>ï¼ˆæ¡ä»¶ï¼‰    if (logger.isDebugEnabled()) {       logger.debug("Processing trade with id: " + id + " and symbol: " + symbol);      }  </pre>     <br><span style="color:green">æ­£ä¾‹</span>ï¼š <pre>ï¼ˆå ä½ç¬¦ï¼‰        logger.debug("Processing trade with id: {} and symbol : {} ", id, symbol);   </pre></li><li>ã€å¼ºåˆ¶ã€‘é¿å…é‡å¤æ‰“å°æ—¥å¿—ï¼Œæµªè´¹ç£ç›˜ç©ºé—´ï¼ŒåŠ¡å¿…åœ¨log4j.xmlä¸­è®¾ç½®additivity=falseã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š<br>   <code>&lt;logger name=&quot;com.taobao.dubbo.config&quot; additivity=&quot;false&quot;&gt;</code></li><li>ã€å¼ºåˆ¶ã€‘å¼‚å¸¸ä¿¡æ¯åº”è¯¥åŒ…æ‹¬ä¸¤ç±»ä¿¡æ¯ï¼šæ¡ˆå‘ç°åœºä¿¡æ¯å’Œå¼‚å¸¸å †æ ˆä¿¡æ¯ã€‚å¦‚æœä¸å¤„ç†ï¼Œé‚£ä¹ˆé€šè¿‡å…³é”®å­—throwså¾€ä¸ŠæŠ›å‡ºã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š<pre>logger.error(å„ç±»å‚æ•°æˆ–è€…å¯¹è±¡toString + "_" + e.getMessage(), e);</pre> </li><li>ã€æ¨èã€‘è°¨æ…åœ°è®°å½•æ—¥å¿—ã€‚ç”Ÿäº§ç¯å¢ƒç¦æ­¢è¾“å‡ºdebugæ—¥å¿—ï¼›æœ‰é€‰æ‹©åœ°è¾“å‡ºinfoæ—¥å¿—ï¼›å¦‚æœä½¿ç”¨warnæ¥è®°å½•åˆšä¸Šçº¿æ—¶çš„ä¸šåŠ¡è¡Œä¸ºä¿¡æ¯ï¼Œä¸€å®šè¦æ³¨æ„æ—¥å¿—è¾“å‡ºé‡çš„é—®é¢˜ï¼Œé¿å…æŠŠæœåŠ¡å™¨ç£ç›˜æ’‘çˆ†ï¼Œå¹¶è®°å¾—åŠæ—¶åˆ é™¤è¿™äº›è§‚å¯Ÿæ—¥å¿—ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šå¤§é‡åœ°è¾“å‡ºæ— æ•ˆæ—¥å¿—ï¼Œä¸åˆ©äºç³»ç»Ÿæ€§èƒ½æå‡ï¼Œä¹Ÿä¸åˆ©äºå¿«é€Ÿå®šä½é”™è¯¯ç‚¹ã€‚è®°å½•æ—¥å¿—æ—¶è¯·æ€è€ƒï¼šè¿™äº›æ—¥å¿—çœŸçš„æœ‰äººçœ‹å—ï¼Ÿçœ‹åˆ°è¿™æ¡æ—¥å¿—ä½ èƒ½åšä»€ä¹ˆï¼Ÿèƒ½ä¸èƒ½ç»™é—®é¢˜æ’æŸ¥å¸¦æ¥å¥½å¤„ï¼Ÿ </li><li>ã€æ¨èã€‘å¯ä»¥ä½¿ç”¨warnæ—¥å¿—çº§åˆ«æ¥è®°å½•ç”¨æˆ·è¾“å…¥å‚æ•°é”™è¯¯çš„æƒ…å†µï¼Œé¿å…ç”¨æˆ·æŠ•è¯‰æ—¶ï¼Œæ— æ‰€é€‚ä»ã€‚å¦‚éå¿…è¦ï¼Œè¯·ä¸è¦åœ¨æ­¤åœºæ™¯æ‰“å‡ºerrorçº§åˆ«ï¼Œé¿å…é¢‘ç¹æŠ¥è­¦ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæ³¨æ„æ—¥å¿—è¾“å‡ºçš„çº§åˆ«ï¼Œerrorçº§åˆ«åªè®°å½•ç³»ç»Ÿé€»è¾‘å‡ºé”™ã€å¼‚å¸¸æˆ–è€…é‡è¦çš„é”™è¯¯ä¿¡æ¯ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2.1-å¼‚å¸¸æ—¥å¿—</title>
      <link href="/alibaba-p3c/21-exception/"/>
      <url>/alibaba-p3c/21-exception/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-å¼‚å¸¸å¤„ç†"><a href="#ä¸€-å¼‚å¸¸å¤„ç†" class="headerlink" title="(ä¸€) å¼‚å¸¸å¤„ç†"></a>(ä¸€) å¼‚å¸¸å¤„ç†</h2><ol><li>ã€å¼ºåˆ¶ã€‘Java ç±»åº“ä¸­å®šä¹‰çš„å¯ä»¥é€šè¿‡é¢„æ£€æŸ¥æ–¹å¼è§„é¿çš„RuntimeExceptionå¼‚å¸¸ä¸åº”è¯¥é€šè¿‡catch çš„æ–¹å¼æ¥å¤„ç†ï¼Œæ¯”å¦‚ï¼šNullPointerExceptionï¼ŒIndexOutOfBoundsExceptionç­‰ç­‰ã€‚<br><span style="color:orange">è¯´æ˜</span>ï¼šæ— æ³•é€šè¿‡é¢„æ£€æŸ¥çš„å¼‚å¸¸é™¤å¤–ï¼Œæ¯”å¦‚ï¼Œåœ¨è§£æå­—ç¬¦ä¸²å½¢å¼çš„æ•°å­—æ—¶ï¼Œä¸å¾—ä¸é€šè¿‡catch NumberFormatExceptionæ¥å®ç°ã€‚ <br><span style="color:green">æ­£ä¾‹</span>ï¼š<pre>if (obj != null) {...} </pre><br><span style="color:red">åä¾‹</span>ï¼š<pre>try { obj.method() } catch (NullPointerException e) {â€¦}</pre></li><li>ã€å¼ºåˆ¶ã€‘å¼‚å¸¸ä¸è¦ç”¨æ¥åšæµç¨‹æ§åˆ¶ï¼Œæ¡ä»¶æ§åˆ¶ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¼‚å¸¸è®¾è®¡çš„åˆè¡·æ˜¯è§£å†³ç¨‹åºè¿è¡Œä¸­çš„å„ç§æ„å¤–æƒ…å†µï¼Œä¸”å¼‚å¸¸çš„å¤„ç†æ•ˆç‡æ¯”æ¡ä»¶åˆ¤æ–­æ–¹å¼è¦ä½å¾ˆå¤šã€‚ </li><li>ã€å¼ºåˆ¶ã€‘catchæ—¶è¯·åˆ†æ¸…ç¨³å®šä»£ç å’Œéç¨³å®šä»£ç ï¼Œç¨³å®šä»£ç æŒ‡çš„æ˜¯æ— è®ºå¦‚ä½•ä¸ä¼šå‡ºé”™çš„ä»£ç ã€‚å¯¹äºéç¨³å®šä»£ç çš„catchå°½å¯èƒ½è¿›è¡ŒåŒºåˆ†å¼‚å¸¸ç±»å‹ï¼Œå†åšå¯¹åº”çš„å¼‚å¸¸å¤„ç†ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¯¹å¤§æ®µä»£ç è¿›è¡Œtry-catchï¼Œä½¿ç¨‹åºæ— æ³•æ ¹æ®ä¸åŒçš„å¼‚å¸¸åšå‡ºæ­£ç¡®çš„åº”æ¿€ååº”ï¼Œä¹Ÿä¸åˆ©äºå®šä½é—®é¢˜ï¼Œè¿™æ˜¯ä¸€ç§ä¸è´Ÿè´£ä»»çš„è¡¨ç°ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šç”¨æˆ·æ³¨å†Œçš„åœºæ™¯ä¸­ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥éæ³•å­—ç¬¦ï¼Œæˆ–ç”¨æˆ·åç§°å·²å­˜åœ¨ï¼Œæˆ–ç”¨æˆ·è¾“å…¥å¯†ç è¿‡äºç®€å•ï¼Œåœ¨ç¨‹åºä¸Šä½œå‡ºåˆ†é—¨åˆ«ç±»çš„åˆ¤æ–­ï¼Œå¹¶æç¤ºç»™ç”¨æˆ·ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ•è·å¼‚å¸¸æ˜¯ä¸ºäº†å¤„ç†å®ƒï¼Œä¸è¦æ•è·äº†å´ä»€ä¹ˆéƒ½ä¸å¤„ç†è€ŒæŠ›å¼ƒä¹‹ï¼Œå¦‚æœä¸æƒ³å¤„ç†å®ƒï¼Œè¯·å°†è¯¥å¼‚å¸¸æŠ›ç»™å®ƒçš„è°ƒç”¨è€…ã€‚æœ€å¤–å±‚çš„ä¸šåŠ¡ä½¿ç”¨è€…ï¼Œå¿…é¡»å¤„ç†å¼‚å¸¸ï¼Œå°†å…¶è½¬åŒ–ä¸ºç”¨æˆ·å¯ä»¥ç†è§£çš„å†…å®¹ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æœ‰tryå—æ”¾åˆ°äº†äº‹åŠ¡ä»£ç ä¸­ï¼Œcatchå¼‚å¸¸åï¼Œå¦‚æœéœ€è¦å›æ»šäº‹åŠ¡ï¼Œä¸€å®šè¦æ³¨æ„æ‰‹åŠ¨å›æ»šäº‹åŠ¡ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘finallyå—å¿…é¡»å¯¹èµ„æºå¯¹è±¡ã€æµå¯¹è±¡è¿›è¡Œå…³é—­ï¼Œæœ‰å¼‚å¸¸ä¹Ÿè¦åštry-catchã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœJDK7åŠä»¥ä¸Šï¼Œå¯ä»¥ä½¿ç”¨try-with-resourcesæ–¹å¼ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ä¸è¦åœ¨finallyå—ä¸­ä½¿ç”¨returnã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šfinallyå—ä¸­çš„returnè¿”å›åæ–¹æ³•ç»“æŸæ‰§è¡Œï¼Œä¸ä¼šå†æ‰§è¡Œtryå—ä¸­çš„returnè¯­å¥ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ•è·å¼‚å¸¸ä¸æŠ›å¼‚å¸¸ï¼Œå¿…é¡»æ˜¯å®Œå…¨åŒ¹é…ï¼Œæˆ–è€…æ•è·å¼‚å¸¸æ˜¯æŠ›å¼‚å¸¸çš„çˆ¶ç±»ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœé¢„æœŸå¯¹æ–¹æŠ›çš„æ˜¯ç»£çƒï¼Œå®é™…æ¥åˆ°çš„æ˜¯é“…çƒï¼Œå°±ä¼šäº§ç”Ÿæ„å¤–æƒ…å†µã€‚ </li><li>ã€æ¨èã€‘æ–¹æ³•çš„è¿”å›å€¼å¯ä»¥ä¸ºnullï¼Œä¸å¼ºåˆ¶è¿”å›ç©ºé›†åˆï¼Œæˆ–è€…ç©ºå¯¹è±¡ç­‰ï¼Œå¿…é¡»æ·»åŠ æ³¨é‡Šå……åˆ†<br><br><span style="color:orange">è¯´æ˜</span>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè¿”å›nullå€¼ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šæœ¬æ‰‹å†Œæ˜ç¡®é˜²æ­¢NPEæ˜¯è°ƒç”¨è€…çš„è´£ä»»ã€‚å³ä½¿è¢«è°ƒç”¨æ–¹æ³•è¿”å›ç©ºé›†åˆæˆ–è€…ç©ºå¯¹è±¡ï¼Œå¯¹è°ƒç”¨è€…æ¥è¯´ï¼Œä¹Ÿå¹¶éé«˜æ•æ— å¿§ï¼Œå¿…é¡»è€ƒè™‘åˆ°è¿œç¨‹è°ƒç”¨å¤±è´¥ã€åºåˆ—åŒ–å¤±è´¥ã€è¿è¡Œæ—¶å¼‚å¸¸ç­‰åœºæ™¯è¿”å›nullçš„æƒ…å†µã€‚ </li><li>ã€æ¨èã€‘é˜²æ­¢NPEï¼Œæ˜¯ç¨‹åºå‘˜çš„åŸºæœ¬ä¿®å…»ï¼Œæ³¨æ„NPEäº§ç”Ÿçš„åœºæ™¯ï¼š<br>1ï¼‰è¿”å›ç±»å‹ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼ŒreturnåŒ…è£…æ•°æ®ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨æ‹†ç®±æœ‰å¯èƒ½äº§ç”ŸNPEã€‚<br><span style="color:red">åä¾‹</span>ï¼špublic int f() { return Integerå¯¹è±¡}ï¼Œ å¦‚æœä¸ºnullï¼Œè‡ªåŠ¨è§£ç®±æŠ›NPEã€‚<br>2ï¼‰ æ•°æ®åº“çš„æŸ¥è¯¢ç»“æœå¯èƒ½ä¸ºnullã€‚<br>3ï¼‰ é›†åˆé‡Œçš„å…ƒç´ å³ä½¿isNotEmptyï¼Œå–å‡ºçš„æ•°æ®å…ƒç´ ä¹Ÿå¯èƒ½ä¸ºnullã€‚<br>4ï¼‰ è¿œç¨‹è°ƒç”¨è¿”å›å¯¹è±¡æ—¶ï¼Œä¸€å¾‹è¦æ±‚è¿›è¡Œç©ºæŒ‡é’ˆåˆ¤æ–­ï¼Œé˜²æ­¢NPEã€‚<br>5ï¼‰ å¯¹äºSessionä¸­è·å–çš„æ•°æ®ï¼Œå»ºè®®NPEæ£€æŸ¥ï¼Œé¿å…ç©ºæŒ‡é’ˆã€‚<br>6ï¼‰ çº§è”è°ƒç”¨obj.getA().getB().getC()ï¼›ä¸€è¿ä¸²è°ƒç”¨ï¼Œæ˜“äº§ç”ŸNPEã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šä½¿ç”¨JDK8çš„Optionalç±»æ¥é˜²æ­¢NPEé—®é¢˜ã€‚ </li><li>ã€æ¨èã€‘å®šä¹‰æ—¶åŒºåˆ†unchecked / checked å¼‚å¸¸ï¼Œé¿å…ç›´æ¥æŠ›å‡ºnew RuntimeException()ï¼Œæ›´ä¸å…è®¸æŠ›å‡ºExceptionæˆ–è€…Throwableï¼Œåº”ä½¿ç”¨æœ‰ä¸šåŠ¡å«ä¹‰çš„è‡ªå®šä¹‰å¼‚å¸¸ã€‚æ¨èä¸šç•Œå·²å®šä¹‰è¿‡çš„è‡ªå®šä¹‰å¼‚å¸¸ï¼Œå¦‚ï¼šDAOException / ServiceExceptionç­‰ã€‚ </li><li>ã€å‚è€ƒã€‘å¯¹äºå…¬å¸å¤–çš„http/apiå¼€æ”¾æ¥å£å¿…é¡»ä½¿ç”¨â€œé”™è¯¯ç â€ï¼›è€Œåº”ç”¨å†…éƒ¨æ¨èå¼‚å¸¸æŠ›å‡ºï¼›è·¨åº”ç”¨é—´RPCè°ƒç”¨ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨Resultæ–¹å¼ï¼Œå°è£…isSuccess()æ–¹æ³•ã€â€œé”™è¯¯ç â€ã€â€œé”™è¯¯ç®€çŸ­ä¿¡æ¯â€ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå…³äºRPCæ–¹æ³•è¿”å›æ–¹å¼ä½¿ç”¨Resultæ–¹å¼çš„ç†ç”±ï¼š<br><br>1ï¼‰ä½¿ç”¨æŠ›å¼‚å¸¸è¿”å›æ–¹å¼ï¼Œè°ƒç”¨æ–¹å¦‚æœæ²¡æœ‰æ•è·åˆ°å°±ä¼šäº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯ã€‚<br>2ï¼‰å¦‚æœä¸åŠ æ ˆä¿¡æ¯ï¼Œåªæ˜¯newè‡ªå®šä¹‰å¼‚å¸¸ï¼ŒåŠ å…¥è‡ªå·±çš„ç†è§£çš„error messageï¼Œå¯¹äºè°ƒç”¨ç«¯è§£å†³é—®é¢˜çš„å¸®åŠ©ä¸ä¼šå¤ªå¤šã€‚å¦‚æœåŠ äº†æ ˆä¿¡æ¯ï¼Œåœ¨é¢‘ç¹è°ƒç”¨å‡ºé”™çš„æƒ…å†µä¸‹ï¼Œæ•°æ®åºåˆ—åŒ–å’Œä¼ è¾“çš„æ€§èƒ½æŸè€—ä¹Ÿæ˜¯é—®é¢˜ã€‚ </li><li>ã€å‚è€ƒã€‘é¿å…å‡ºç°é‡å¤çš„ä»£ç ï¼ˆDonâ€™t Repeat Yourselfï¼‰ï¼Œå³DRYåŸåˆ™ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šéšæ„å¤åˆ¶å’Œç²˜è´´ä»£ç ï¼Œå¿…ç„¶ä¼šå¯¼è‡´ä»£ç çš„é‡å¤ï¼Œåœ¨ä»¥åéœ€è¦ä¿®æ”¹æ—¶ï¼Œéœ€è¦ä¿®æ”¹æ‰€æœ‰çš„å‰¯æœ¬ï¼Œå®¹æ˜“é—æ¼ã€‚å¿…è¦æ—¶æŠ½å–å…±æ€§æ–¹æ³•ï¼Œæˆ–è€…æŠ½è±¡å…¬å…±ç±»ï¼Œç”šè‡³æ˜¯ç»„ä»¶åŒ–ã€‚ <br><span style="color:green">æ­£ä¾‹</span>ï¼šä¸€ä¸ªç±»ä¸­æœ‰å¤šä¸ªpublicæ–¹æ³•ï¼Œéƒ½éœ€è¦è¿›è¡Œæ•°è¡Œç›¸åŒçš„å‚æ•°æ ¡éªŒæ“ä½œï¼Œè¿™ä¸ªæ—¶å€™è¯·æŠ½å–ï¼š <pre>private boolean checkParam(DTO dto) {...}</pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.9-å…¶ä»–</title>
      <link href="/alibaba-p3c/19-other/"/>
      <url>/alibaba-p3c/19-other/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘åœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œåˆ©ç”¨å¥½å…¶é¢„ç¼–è¯‘åŠŸèƒ½ï¼Œå¯ä»¥æœ‰æ•ˆåŠ å¿«æ­£åˆ™åŒ¹é…é€Ÿåº¦ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä¸è¦åœ¨æ–¹æ³•ä½“å†…å®šä¹‰ï¼šPattern pattern = Pattern.compile(è§„åˆ™); </li><li>ã€å¼ºåˆ¶ã€‘velocityè°ƒç”¨POJOç±»çš„å±æ€§æ—¶ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨å±æ€§åå–å€¼å³å¯ï¼Œæ¨¡æ¿å¼•æ“ä¼šè‡ªåŠ¨æŒ‰è§„èŒƒè°ƒç”¨POJOçš„getXxx()ï¼Œå¦‚æœæ˜¯booleanåŸºæœ¬æ•°æ®ç±»å‹å˜é‡ï¼ˆbooleanå‘½åä¸éœ€è¦åŠ iså‰ç¼€ï¼‰ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨isXxx()æ–¹æ³•ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šæ³¨æ„å¦‚æœæ˜¯BooleanåŒ…è£…ç±»å¯¹è±¡ï¼Œä¼˜å…ˆè°ƒç”¨getXxx()çš„æ–¹æ³•ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘åå°è¾“é€ç»™é¡µé¢çš„å˜é‡å¿…é¡»åŠ $!{var}â€”â€”ä¸­é—´çš„æ„Ÿå¹å·ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœvar=nullæˆ–è€…ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ${var}ä¼šç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ³¨æ„ Math.random() è¿™ä¸ªæ–¹æ³•è¿”å›æ˜¯doubleç±»å‹ï¼Œæ³¨æ„å–å€¼çš„èŒƒå›´ 0â‰¤x&lt;1ï¼ˆèƒ½å¤Ÿå–åˆ°é›¶å€¼ï¼Œæ³¨æ„é™¤é›¶å¼‚å¸¸ï¼‰ï¼Œå¦‚æœæƒ³è·å–æ•´æ•°ç±»å‹çš„éšæœºæ•°ï¼Œä¸è¦å°†xæ”¾å¤§10çš„è‹¥å¹²å€ç„¶åå–æ•´ï¼Œç›´æ¥ä½¿ç”¨Randomå¯¹è±¡çš„<code>nextInt</code>æˆ–è€…<code>nextLong</code>æ–¹æ³•ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘è·å–å½“å‰æ¯«ç§’æ•°<pre>System.currentTimeMillis();</pre> è€Œä¸æ˜¯<pre>new Date().getTime();</pre> <span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœæƒ³è·å–æ›´åŠ ç²¾ç¡®çš„çº³ç§’çº§æ—¶é—´å€¼ï¼Œä½¿ç”¨<code>System.nanoTime()</code>çš„æ–¹å¼ã€‚åœ¨JDK8ä¸­ï¼Œé’ˆå¯¹ç»Ÿè®¡æ—¶é—´ç­‰åœºæ™¯ï¼Œæ¨èä½¿ç”¨<code>Instant</code>ç±»ã€‚ </li><li>ã€æ¨èã€‘ä¸è¦åœ¨è§†å›¾æ¨¡æ¿ä¸­åŠ å…¥ä»»ä½•å¤æ‚çš„é€»è¾‘ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šæ ¹æ®MVCç†è®ºï¼Œè§†å›¾çš„èŒè´£æ˜¯å±•ç¤ºï¼Œä¸è¦æŠ¢æ¨¡å‹å’Œæ§åˆ¶å™¨çš„æ´»ã€‚ </li><li>ã€æ¨èã€‘ä»»ä½•æ•°æ®ç»“æ„çš„æ„é€ æˆ–åˆå§‹åŒ–ï¼Œéƒ½åº”æŒ‡å®šå¤§å°ï¼Œé¿å…æ•°æ®ç»“æ„æ— é™å¢é•¿åƒå…‰å†…å­˜ã€‚ </li><li>ã€æ¨èã€‘åŠæ—¶æ¸…ç†ä¸å†ä½¿ç”¨çš„ä»£ç æ®µæˆ–é…ç½®ä¿¡æ¯ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¯¹äºåƒåœ¾ä»£ç æˆ–è¿‡æ—¶é…ç½®ï¼Œåšå†³æ¸…ç†å¹²å‡€ï¼Œé¿å…ç¨‹åºè¿‡åº¦è‡ƒè‚¿ï¼Œä»£ç å†—ä½™ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šå¯¹äºæš‚æ—¶è¢«æ³¨é‡Šæ‰ï¼Œåç»­å¯èƒ½æ¢å¤ä½¿ç”¨çš„ä»£ç ç‰‡æ–­ï¼Œåœ¨æ³¨é‡Šä»£ç ä¸Šæ–¹ï¼Œç»Ÿä¸€è§„å®šä½¿ç”¨ä¸‰ä¸ªæ–œæ (<code>///</code>)æ¥è¯´æ˜æ³¨é‡Šæ‰ä»£ç çš„ç†ç”±ã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.8-æ³¨é‡Šè§„çº¦</title>
      <link href="/alibaba-p3c/18-annotation-statute/"/>
      <url>/alibaba-p3c/18-annotation-statute/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘ç±»ã€ç±»å±æ€§ã€ç±»æ–¹æ³•çš„æ³¨é‡Šå¿…é¡»ä½¿ç”¨Javadocè§„èŒƒï¼Œä½¿ç”¨/<em>*å†…å®¹</em>/æ ¼å¼ï¼Œä¸å¾—ä½¿ç”¨// xxxæ–¹å¼ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šåœ¨IDEç¼–è¾‘çª—å£ä¸­ï¼ŒJavadocæ–¹å¼ä¼šæç¤ºç›¸å…³æ³¨é‡Šï¼Œç”ŸæˆJavadocå¯ä»¥æ­£ç¡®è¾“å‡ºç›¸åº”æ³¨é‡Šï¼›åœ¨IDEä¸­ï¼Œå·¥ç¨‹è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¸è¿›å…¥æ–¹æ³•å³å¯æ‚¬æµ®æç¤ºæ–¹æ³•ã€å‚æ•°ã€è¿”å›å€¼çš„æ„ä¹‰ï¼Œæé«˜é˜…è¯»æ•ˆç‡ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼ˆåŒ…æ‹¬æ¥å£ä¸­çš„æ–¹æ³•ï¼‰å¿…é¡»è¦ç”¨Javadocæ³¨é‡Šã€é™¤äº†è¿”å›å€¼ã€å‚æ•°ã€å¼‚å¸¸è¯´æ˜å¤–ï¼Œè¿˜å¿…é¡»æŒ‡å‡ºè¯¥æ–¹æ³•åšä»€ä¹ˆäº‹æƒ…ï¼Œå®ç°ä»€ä¹ˆåŠŸèƒ½ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¯¹å­ç±»çš„å®ç°è¦æ±‚ï¼Œæˆ–è€…è°ƒç”¨æ³¨æ„äº‹é¡¹ï¼Œè¯·ä¸€å¹¶è¯´æ˜ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ‰€æœ‰çš„ç±»éƒ½å¿…é¡»æ·»åŠ åˆ›å»ºè€…å’Œåˆ›å»ºæ—¥æœŸã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ–¹æ³•å†…éƒ¨å•è¡Œæ³¨é‡Šï¼Œåœ¨è¢«æ³¨é‡Šè¯­å¥ä¸Šæ–¹å¦èµ·ä¸€è¡Œï¼Œä½¿ç”¨<code>//</code>æ³¨é‡Šã€‚æ–¹æ³•å†…éƒ¨å¤šè¡Œæ³¨é‡Šä½¿ç”¨<code>/* */</code>æ³¨é‡Šï¼Œæ³¨æ„ä¸ä»£ç å¯¹é½ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ‰€æœ‰çš„æšä¸¾ç±»å‹å­—æ®µå¿…é¡»è¦æœ‰æ³¨é‡Šï¼Œè¯´æ˜æ¯ä¸ªæ•°æ®é¡¹çš„ç”¨é€”ã€‚ </li><li>ã€æ¨èã€‘ä¸å…¶â€œåŠåŠå­â€è‹±æ–‡æ¥æ³¨é‡Šï¼Œä¸å¦‚ç”¨ä¸­æ–‡æ³¨é‡ŠæŠŠé—®é¢˜è¯´æ¸…æ¥šã€‚ä¸“æœ‰åè¯ä¸å…³é”®å­—ä¿æŒè‹±æ–‡åŸæ–‡å³å¯ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šâ€œTCPè¿æ¥è¶…æ—¶â€è§£é‡Šæˆâ€œä¼ è¾“æ§åˆ¶åè®®è¿æ¥è¶…æ—¶â€ï¼Œç†è§£åè€Œè´¹è„‘ç­‹ã€‚ </li><li>ã€æ¨èã€‘ä»£ç ä¿®æ”¹çš„åŒæ—¶ï¼Œæ³¨é‡Šä¹Ÿè¦è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ï¼Œå°¤å…¶æ˜¯å‚æ•°ã€è¿”å›å€¼ã€å¼‚å¸¸ã€æ ¸å¿ƒé€»è¾‘ç­‰çš„ä¿®æ”¹ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä»£ç ä¸æ³¨é‡Šæ›´æ–°ä¸åŒæ­¥ï¼Œå°±åƒè·¯ç½‘ä¸å¯¼èˆªè½¯ä»¶æ›´æ–°ä¸åŒæ­¥ä¸€æ ·ï¼Œå¦‚æœå¯¼èˆªè½¯ä»¶ä¸¥é‡æ»åï¼Œå°±å¤±å»äº†å¯¼èˆªçš„æ„ä¹‰ã€‚ </li><li>ã€å‚è€ƒã€‘è°¨æ…æ³¨é‡Šæ‰ä»£ç ã€‚åœ¨ä¸Šæ–¹è¯¦ç»†è¯´æ˜&lt;ï¼Œè€Œä¸æ˜¯ç®€å•åœ°æ³¨é‡Šæ‰ã€‚å¦‚æœæ— ç”¨ï¼Œåˆ™åˆ é™¤ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä»£ç è¢«æ³¨é‡Šæ‰æœ‰ä¸¤ç§å¯èƒ½æ€§ï¼š<br>1ï¼‰åç»­ä¼šæ¢å¤æ­¤æ®µä»£ç é€»è¾‘ã€‚<br>2ï¼‰æ°¸ä¹…ä¸ç”¨ã€‚å‰è€…å¦‚æœæ²¡æœ‰å¤‡æ³¨ä¿¡æ¯ï¼Œéš¾ä»¥çŸ¥æ™“æ³¨é‡ŠåŠ¨æœºã€‚åè€…å»ºè®®ç›´æ¥åˆ æ‰ï¼ˆä»£ç ä»“åº“ä¿å­˜äº†å†å²ä»£ç ï¼‰ã€‚ </li><li>ã€å‚è€ƒã€‘å¯¹äºæ³¨é‡Šçš„è¦æ±‚ï¼šç¬¬ä¸€ã€èƒ½å¤Ÿå‡†ç¡®ååº”è®¾è®¡æ€æƒ³å’Œä»£ç é€»è¾‘ï¼›ç¬¬äºŒã€èƒ½å¤Ÿæè¿°ä¸šåŠ¡å«ä¹‰ï¼Œä½¿åˆ«çš„ç¨‹åºå‘˜èƒ½å¤Ÿè¿…é€Ÿäº†è§£åˆ°ä»£ç èƒŒåçš„ä¿¡æ¯ã€‚å®Œå…¨æ²¡æœ‰æ³¨é‡Šçš„å¤§æ®µä»£ç å¯¹äºé˜…è¯»è€…å½¢åŒ<br>å¤©ä¹¦ï¼Œæ³¨é‡Šæ˜¯ç»™è‡ªå·±çœ‹çš„ï¼Œå³ä½¿éš”å¾ˆé•¿æ—¶é—´ï¼Œä¹Ÿèƒ½æ¸…æ™°ç†è§£å½“æ—¶çš„æ€è·¯ï¼›æ³¨é‡Šä¹Ÿæ˜¯ç»™ç»§ä»»è€…çœ‹çš„ï¼Œä½¿å…¶èƒ½å¤Ÿå¿«é€Ÿæ¥æ›¿è‡ªå·±çš„å·¥ä½œã€‚ </li><li>ã€å‚è€ƒã€‘å¥½çš„å‘½åã€ä»£ç ç»“æ„æ˜¯è‡ªè§£é‡Šçš„ï¼Œæ³¨é‡ŠåŠ›æ±‚ç²¾ç®€å‡†ç¡®ã€è¡¨è¾¾åˆ°ä½ã€‚é¿å…å‡ºç°æ³¨é‡Šçš„ä¸€ä¸ªæç«¯ï¼šè¿‡å¤šè¿‡æ»¥çš„æ³¨é‡Šï¼Œä»£ç çš„é€»è¾‘ä¸€æ—¦ä¿®æ”¹ï¼Œä¿®æ”¹æ³¨é‡Šæ˜¯ç›¸å½“å¤§çš„è´Ÿæ‹…ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼š<pre><code>// put elephant into fridge  put(elephant, fridge);      æ–¹æ³•åputï¼ŒåŠ ä¸Šä¸¤ä¸ªæœ‰æ„ä¹‰çš„å˜é‡åelephantå’Œfridgeï¼Œå·²ç»è¯´æ˜äº†è¿™æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Œè¯­ä¹‰æ¸…æ™°çš„ä»£ç ä¸éœ€è¦é¢å¤–çš„æ³¨é‡Šã€‚ </code></pre></li><li>ã€å‚è€ƒã€‘ç‰¹æ®Šæ³¨é‡Šæ ‡è®°ï¼Œè¯·æ³¨æ˜æ ‡è®°äººä¸æ ‡è®°æ—¶é—´ã€‚æ³¨æ„åŠæ—¶å¤„ç†è¿™äº›æ ‡è®°ï¼Œé€šè¿‡æ ‡è®°æ‰«æï¼Œç»å¸¸æ¸…ç†æ­¤ç±»æ ‡è®°ã€‚çº¿ä¸Šæ•…éšœæœ‰æ—¶å€™å°±æ˜¯æ¥æºäºè¿™äº›æ ‡è®°å¤„çš„ä»£ç ã€‚<br>1ï¼‰ å¾…åŠäº‹å®œï¼ˆ<strong>TODO</strong>ï¼‰:ï¼ˆ æ ‡è®°äººï¼Œæ ‡è®°æ—¶é—´ï¼Œ[é¢„è®¡å¤„ç†æ—¶é—´]ï¼‰    è¡¨ç¤ºéœ€è¦å®ç°ï¼Œä½†ç›®å‰è¿˜æœªå®ç°çš„åŠŸèƒ½ã€‚è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªJavadocçš„æ ‡ç­¾ï¼Œç›®å‰çš„Javadocè¿˜æ²¡æœ‰å®ç°ï¼Œä½†å·²ç»è¢«å¹¿æ³›ä½¿ç”¨ã€‚åªèƒ½åº”ç”¨äºç±»ï¼Œæ¥å£å’Œæ–¹æ³•ï¼ˆå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªJavadocæ ‡ç­¾ï¼‰ã€‚<br>2ï¼‰ é”™è¯¯ï¼Œä¸èƒ½å·¥ä½œï¼ˆ<strong>FIXME</strong>ï¼‰:ï¼ˆæ ‡è®°äººï¼Œæ ‡è®°æ—¶é—´ï¼Œ[é¢„è®¡å¤„ç†æ—¶é—´]ï¼‰    åœ¨æ³¨é‡Šä¸­ç”¨FIXMEæ ‡è®°æŸä»£ç æ˜¯é”™è¯¯çš„ï¼Œè€Œä¸”ä¸èƒ½å·¥ä½œï¼Œéœ€è¦åŠæ—¶çº æ­£çš„æƒ…å†µã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.7-æ§åˆ¶è¯­å¥</title>
      <link href="/alibaba-p3c/17-control-statement/"/>
      <url>/alibaba-p3c/17-control-statement/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘åœ¨ä¸€ä¸ªswitchå—å†…ï¼Œæ¯ä¸ªcaseè¦ä¹ˆé€šè¿‡break/returnç­‰æ¥ç»ˆæ­¢ï¼Œè¦ä¹ˆæ³¨é‡Šè¯´æ˜ç¨‹åºå°†ç»§ç»­æ‰§è¡Œåˆ°å“ªä¸€ä¸ªcaseä¸ºæ­¢ï¼›åœ¨ä¸€ä¸ªswitchå—å†…ï¼Œéƒ½å¿…é¡»åŒ…å«ä¸€ä¸ªdefaultè¯­å¥å¹¶ä¸”æ”¾åœ¨æœ€åï¼Œå³ä½¿ç©ºä»£ç ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘åœ¨if/else/for/while/doè¯­å¥ä¸­å¿…é¡»ä½¿ç”¨å¤§æ‹¬å·ã€‚å³ä½¿åªæœ‰ä¸€è¡Œä»£ç ï¼Œé¿å…é‡‡ç”¨å•è¡Œçš„ç¼–ç æ–¹å¼ï¼š<pre>if (condition) statements;</pre></li><li>ã€å¼ºåˆ¶ã€‘åœ¨é«˜å¹¶å‘åœºæ™¯ä¸­ï¼Œé¿å…ä½¿ç”¨â€ç­‰äºâ€åˆ¤æ–­ä½œä¸ºä¸­æ–­æˆ–é€€å‡ºçš„æ¡ä»¶ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœå¹¶å‘æ§åˆ¶æ²¡æœ‰å¤„ç†å¥½ï¼Œå®¹æ˜“äº§ç”Ÿç­‰å€¼åˆ¤æ–­è¢«â€œå‡»ç©¿â€çš„æƒ…å†µï¼Œä½¿ç”¨å¤§äºæˆ–å°äºçš„åŒºé—´åˆ¤æ–­æ¡ä»¶æ¥ä»£æ›¿ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šåˆ¤æ–­å‰©ä½™å¥–å“æ•°é‡ç­‰äº0æ—¶ï¼Œç»ˆæ­¢å‘æ”¾å¥–å“ï¼Œä½†å› ä¸ºå¹¶å‘å¤„ç†é”™è¯¯å¯¼è‡´å¥–å“æ•°é‡ç¬é—´å˜æˆäº†è´Ÿæ•°ï¼Œè¿™æ ·çš„è¯ï¼Œæ´»åŠ¨æ— æ³•ç»ˆæ­¢ã€‚ </li><li>ã€æ¨èã€‘è¡¨è¾¾å¼‚å¸¸çš„åˆ†æ”¯æ—¶ï¼Œå°‘ç”¨if-elseæ–¹å¼ï¼Œè¿™ç§æ–¹å¼å¯ä»¥æ”¹å†™æˆï¼š <pre><code> if (condition) {                 ...                 return obj;     }    // æ¥ç€å†™elseçš„ä¸šåŠ¡é€»è¾‘ä»£ç ; </code></pre><br><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœéå¾—ä½¿ç”¨if()â€¦else if()â€¦elseâ€¦æ–¹å¼è¡¨è¾¾é€»è¾‘ï¼Œã€å¼ºåˆ¶ã€‘é¿å…åç»­ä»£ç ç»´æŠ¤å›°éš¾ï¼Œè¯·å‹¿è¶…è¿‡3å±‚ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šè¶…è¿‡3å±‚çš„ if-else çš„é€»è¾‘åˆ¤æ–­ä»£ç å¯ä»¥ä½¿ç”¨å«è¯­å¥ã€ç­–ç•¥æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ç­‰æ¥å®ç°ï¼Œå…¶ä¸­å«è¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š <pre><code>public void today() {      if (isBusy()) {      System.out.println(â€œchange time.â€);               return; }       if (isFree()) {     System.out.println(â€œgo to travel.â€);                return;     }  System.out.println(â€œstay at home to learn Alibaba Java Coding Guidelines.â€);      return; } </code></pre></li><li>ã€æ¨èã€‘é™¤å¸¸ç”¨æ–¹æ³•ï¼ˆå¦‚getXxx/isXxxï¼‰ç­‰å¤–ï¼Œä¸è¦åœ¨æ¡ä»¶åˆ¤æ–­ä¸­æ‰§è¡Œå…¶å®ƒå¤æ‚çš„è¯­å¥ï¼Œå°†å¤æ‚é€»è¾‘åˆ¤æ–­çš„ç»“æœèµ‹å€¼ç»™ä¸€ä¸ªæœ‰æ„ä¹‰çš„å¸ƒå°”å˜é‡åï¼Œä»¥æé«˜å¯è¯»æ€§ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¾ˆå¤šifè¯­å¥å†…çš„é€»è¾‘ç›¸å½“å¤æ‚ï¼Œé˜…è¯»è€…éœ€è¦åˆ†ææ¡ä»¶è¡¨è¾¾å¼çš„æœ€ç»ˆç»“æœï¼Œæ‰èƒ½æ˜ç¡®ä»€ä¹ˆæ ·çš„æ¡ä»¶æ‰§è¡Œä»€ä¹ˆæ ·çš„è¯­å¥ï¼Œé‚£ä¹ˆï¼Œå¦‚æœé˜…è¯»è€…åˆ†æé€»è¾‘è¡¨è¾¾å¼é”™è¯¯å‘¢ï¼Ÿ <br><span style="color:green">æ­£ä¾‹</span>ï¼š <pre><code>// ä¼ªä»£ç å¦‚ä¸‹ final boolean existed = (file.open(fileName, &quot;w&quot;) != null) &amp;&amp; (...) || (...); if (existed) {    ... }  </code></pre><span style="color:red">åä¾‹</span>ï¼š<pre><code>if ((file.open(fileName, &quot;w&quot;) != null) &amp;&amp; (...) || (...)) {     ... }</code></pre></li><li>ã€æ¨èã€‘å¾ªç¯ä½“ä¸­çš„è¯­å¥è¦è€ƒé‡æ€§èƒ½ï¼Œä»¥ä¸‹æ“ä½œå°½é‡ç§»è‡³å¾ªç¯ä½“å¤–å¤„ç†ï¼Œå¦‚å®šä¹‰å¯¹è±¡ã€å˜é‡ã€è·å–æ•°æ®åº“è¿æ¥ï¼Œè¿›è¡Œä¸å¿…è¦çš„try-catchæ“ä½œï¼ˆè¿™ä¸ªtry-catchæ˜¯å¦å¯ä»¥ç§»è‡³å¾ªç¯ä½“å¤–ï¼‰ã€‚ </li><li>ã€æ¨èã€‘é¿å…é‡‡ç”¨å–åé€»è¾‘è¿ç®—ç¬¦ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå–åé€»è¾‘ä¸åˆ©äºå¿«é€Ÿç†è§£ï¼Œå¹¶ä¸”å–åé€»è¾‘å†™æ³•å¿…ç„¶å­˜åœ¨å¯¹åº”çš„æ­£å‘é€»è¾‘å†™æ³•ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šä½¿ç”¨if (x &lt; 628) æ¥è¡¨è¾¾ x å°äº628ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šä½¿ç”¨if (!(x &gt;= 628)) æ¥è¡¨è¾¾ x å°äº628ã€‚</li><li>ã€æ¨èã€‘æ¥å£å…¥å‚ä¿æŠ¤ï¼Œè¿™ç§åœºæ™¯å¸¸è§çš„æ˜¯ç”¨ä½œæ‰¹é‡æ“ä½œçš„æ¥å£ã€‚ </li><li>ã€å‚è€ƒã€‘ä¸‹åˆ—æƒ…å½¢ï¼Œéœ€è¦è¿›è¡Œå‚æ•°æ ¡éªŒï¼š<br>1ï¼‰ è°ƒç”¨é¢‘æ¬¡ä½çš„æ–¹æ³•ã€‚<br>2ï¼‰ æ‰§è¡Œæ—¶é—´å¼€é”€å¾ˆå¤§çš„æ–¹æ³•ã€‚æ­¤æƒ…å½¢ä¸­ï¼Œå‚æ•°æ ¡éªŒæ—¶é—´å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œä½†å¦‚æœå› ä¸ºå‚æ•°é”™è¯¯å¯¼è‡´ä¸­é—´æ‰§è¡Œå›é€€ï¼Œæˆ–è€…é”™è¯¯ï¼Œé‚£å¾—ä¸å¿å¤±ã€‚<br>3ï¼‰ éœ€è¦æé«˜ç¨³å®šæ€§å’Œå¯ç”¨æ€§çš„æ–¹æ³•ã€‚<br>4ï¼‰ å¯¹å¤–æä¾›çš„å¼€æ”¾æ¥å£ï¼Œä¸ç®¡æ˜¯RPC/API/HTTPæ¥å£ã€‚<br>5ï¼‰ æ•æ„Ÿæƒé™å…¥å£ã€‚ </li><li>ã€å‚è€ƒã€‘ä¸‹åˆ—æƒ…å½¢ï¼Œä¸éœ€è¦è¿›è¡Œå‚æ•°æ ¡éªŒï¼š<br><br>1ï¼‰ ææœ‰å¯èƒ½è¢«å¾ªç¯è°ƒç”¨çš„æ–¹æ³•ã€‚ä½†åœ¨æ–¹æ³•è¯´æ˜é‡Œå¿…é¡»æ³¨æ˜å¤–éƒ¨å‚æ•°æ£€æŸ¥è¦æ±‚ã€‚<br><br>2ï¼‰ åº•å±‚è°ƒç”¨é¢‘åº¦æ¯”è¾ƒé«˜çš„æ–¹æ³•ã€‚æ¯•ç«Ÿæ˜¯åƒçº¯å‡€æ°´è¿‡æ»¤çš„æœ€åä¸€é“ï¼Œå‚æ•°é”™è¯¯ä¸å¤ªå¯èƒ½åˆ°åº•å±‚æ‰ä¼šæš´éœ²é—®é¢˜ã€‚ä¸€èˆ¬DAOå±‚ä¸Serviceå±‚éƒ½åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­ï¼Œéƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸­ï¼Œæ‰€ä»¥DAOçš„å‚æ•°æ ¡éªŒï¼Œå¯ä»¥çœç•¥ã€‚<br><br>3ï¼‰ è¢«å£°æ˜æˆprivateåªä¼šè¢«è‡ªå·±ä»£ç æ‰€è°ƒç”¨çš„æ–¹æ³•ï¼Œå¦‚æœèƒ½å¤Ÿç¡®å®šè°ƒç”¨æ–¹æ³•çš„ä»£ç ä¼ å…¥å‚æ•°å·²ç»åšè¿‡æ£€æŸ¥æˆ–è€…è‚¯å®šä¸ä¼šæœ‰é—®é¢˜ï¼Œæ­¤æ—¶å¯ä»¥ä¸æ ¡éªŒå‚æ•°ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.6-å¹¶å‘å¤„ç†</title>
      <link href="/alibaba-p3c/16-concurrent/"/>
      <url>/alibaba-p3c/16-concurrent/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘è·å–å•ä¾‹å¯¹è±¡éœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå…¶ä¸­çš„æ–¹æ³•ä¹Ÿè¦ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šèµ„æºé©±åŠ¨ç±»ã€å·¥å…·ç±»ã€å•ä¾‹å·¥å‚ç±»éƒ½éœ€è¦æ³¨æ„ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘åˆ›å»ºçº¿ç¨‹æˆ–çº¿ç¨‹æ± æ—¶è¯·æŒ‡å®šæœ‰æ„ä¹‰çš„çº¿ç¨‹åç§°ï¼Œæ–¹ä¾¿å‡ºé”™æ—¶å›æº¯ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š<pre><code> public class TimerTaskThread extends Thread {           public TimerTaskThread() {                 super.setName(&quot;TimerTaskThread&quot;);              ...      } }</code></pre></li><li>ã€å¼ºåˆ¶ã€‘çº¿ç¨‹èµ„æºå¿…é¡»é€šè¿‡çº¿ç¨‹æ± æä¾›ï¼Œä¸å…è®¸åœ¨åº”ç”¨ä¸­è‡ªè¡Œæ˜¾å¼åˆ›å»ºçº¿ç¨‹ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„æ˜¯å‡å°‘åœ¨åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¸Šæ‰€èŠ±çš„æ—¶é—´ä»¥åŠç³»ç»Ÿèµ„æºçš„å¼€é”€ï¼Œè§£å†³èµ„æºä¸è¶³çš„é—®é¢˜ã€‚å¦‚æœä¸ä½¿ç”¨çº¿ç¨‹æ± ï¼Œæœ‰å¯èƒ½é€ æˆç³»ç»Ÿåˆ›å»ºå¤§é‡åŒç±»çº¿ç¨‹è€Œå¯¼è‡´æ¶ˆè€—å®Œå†…å­˜æˆ–è€…â€œè¿‡åº¦åˆ‡æ¢â€çš„é—®é¢˜ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨Executorså»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ThreadPoolExecutorçš„æ–¹å¼ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šExecutorsè¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯å¦‚ä¸‹ï¼š<br>1ï¼‰<code>FixedThreadPool</code>å’Œ<code>SingleThreadPool</code>:   å…è®¸çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ä¸ºInteger.MAX_VALUEï¼Œå¯èƒ½ä¼šå †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´OOMã€‚<br>2ï¼‰<code>CachedThreadPool</code>å’Œ<code>ScheduledThreadPool</code>:   å…è®¸çš„åˆ›å»ºçº¿ç¨‹æ•°é‡ä¸ºInteger.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´OOMã€‚</li><li>ã€å¼ºåˆ¶ã€‘SimpleDateFormat æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ç±»ï¼Œä¸€èˆ¬ä¸è¦å®šä¹‰ä¸ºstaticå˜é‡ï¼Œå¦‚æœå®šä¹‰ä¸ºstaticï¼Œå¿…é¡»åŠ é”ï¼Œæˆ–è€…ä½¿ç”¨DateUtilså·¥å…·ç±»ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šæ³¨æ„çº¿ç¨‹å®‰å…¨ï¼Œä½¿ç”¨<code>DateUtils</code>ã€‚äº¦æ¨èå¦‚ä¸‹å¤„ç†ï¼š <pre><code>private static final ThreadLocal&lt;DateFormat&gt; df = new ThreadLocal&lt;DateFormat&gt;() {         Override         protected DateFormat initialValue() {              return new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);         }    };</code></pre><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœæ˜¯JDK8çš„åº”ç”¨ï¼Œå¯ä»¥ä½¿ç”¨<code>Instant</code>ä»£æ›¿<code>Date</code>ï¼Œ<code>LocalDateTime</code>ä»£æ›¿<code>Calendar</code>ï¼Œ<code>DateTimeFormatter</code>ä»£æ›¿<code>SimpleDateFormat</code>ï¼Œå®˜æ–¹ç»™å‡ºçš„è§£é‡Šï¼š<blockquote><p>simple beautiful strong immutable thread-safeã€‚</p></blockquote></li><li>ã€å¼ºåˆ¶ã€‘é«˜å¹¶å‘æ—¶ï¼ŒåŒæ­¥è°ƒç”¨åº”è¯¥å»è€ƒé‡é”çš„æ€§èƒ½æŸè€—ã€‚èƒ½ç”¨æ— é”æ•°æ®ç»“æ„ï¼Œå°±ä¸è¦ç”¨é”ï¼›èƒ½é”åŒºå—ï¼Œå°±ä¸è¦é”æ•´ä¸ªæ–¹æ³•ä½“ï¼›èƒ½ç”¨å¯¹è±¡é”ï¼Œå°±ä¸è¦ç”¨ç±»é”ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šå°½å¯èƒ½ä½¿åŠ é”çš„ä»£ç å—å·¥ä½œé‡å°½å¯èƒ½çš„å°ï¼Œé¿å…åœ¨é”ä»£ç å—ä¸­è°ƒç”¨RPCæ–¹æ³•ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å¯¹å¤šä¸ªèµ„æºã€æ•°æ®åº“è¡¨ã€å¯¹è±¡åŒæ—¶åŠ é”æ—¶ï¼Œéœ€è¦ä¿æŒä¸€è‡´çš„åŠ é”é¡ºåºï¼Œå¦åˆ™å¯èƒ½ä¼šé€ æˆæ­»é”ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šçº¿ç¨‹ä¸€éœ€è¦å¯¹è¡¨Aã€Bã€Cä¾æ¬¡å…¨éƒ¨åŠ é”åæ‰å¯ä»¥è¿›è¡Œæ›´æ–°æ“ä½œï¼Œé‚£ä¹ˆçº¿ç¨‹äºŒçš„åŠ é”é¡ºåºä¹Ÿå¿…é¡»æ˜¯Aã€Bã€Cï¼Œå¦åˆ™å¯èƒ½å‡ºç°æ­»é”ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å¹¶å‘ä¿®æ”¹åŒä¸€è®°å½•æ—¶ï¼Œé¿å…æ›´æ–°ä¸¢å¤±ï¼Œéœ€è¦åŠ é”ã€‚è¦ä¹ˆåœ¨åº”ç”¨å±‚åŠ é”ï¼Œè¦ä¹ˆåœ¨ç¼“å­˜åŠ é”ï¼Œè¦ä¹ˆåœ¨æ•°æ®åº“å±‚ä½¿ç”¨ä¹è§‚é”ï¼Œä½¿ç”¨versionä½œä¸ºæ›´æ–°ä¾æ®ã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šå¦‚æœæ¯æ¬¡è®¿é—®å†²çªæ¦‚ç‡å°äº20%ï¼Œæ¨èä½¿ç”¨ä¹è§‚é”ï¼Œå¦åˆ™ä½¿ç”¨æ‚²è§‚é”ã€‚ä¹è§‚é”çš„é‡è¯•æ¬¡æ•°ä¸å¾—å°äº3æ¬¡ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†å®šæ—¶ä»»åŠ¡æ—¶ï¼ŒTimerè¿è¡Œå¤šä¸ªTimeTaskæ—¶ï¼Œåªè¦å…¶ä¸­ä¹‹ä¸€æ²¡æœ‰æ•è·æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå…¶å®ƒä»»åŠ¡ä¾¿ä¼šè‡ªåŠ¨ç»ˆæ­¢è¿è¡Œï¼Œä½¿ç”¨<code>ScheduledExecutorService</code>åˆ™æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚ </li><li>ã€æ¨èã€‘ä½¿ç”¨<code>CountDownLatch</code>è¿›è¡Œå¼‚æ­¥è½¬åŒæ­¥æ“ä½œï¼Œæ¯ä¸ªçº¿ç¨‹é€€å‡ºå‰å¿…é¡»è°ƒç”¨countDownæ–¹æ³•ï¼Œçº¿ç¨‹æ‰§è¡Œä»£ç æ³¨æ„catchå¼‚å¸¸ï¼Œç¡®ä¿countDownæ–¹æ³•è¢«æ‰§è¡Œåˆ°ï¼Œé¿å…ä¸»çº¿ç¨‹æ— æ³•æ‰§è¡Œè‡³awaitæ–¹æ³•ï¼Œç›´åˆ°è¶…æ—¶æ‰è¿”å›ç»“æœã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šæ³¨æ„ï¼Œå­çº¿ç¨‹æŠ›å‡ºå¼‚å¸¸å †æ ˆï¼Œä¸èƒ½åœ¨ä¸»çº¿ç¨‹try-catchåˆ°ã€‚ </li><li>ã€æ¨èã€‘é¿å…Randomå®ä¾‹è¢«å¤šçº¿ç¨‹ä½¿ç”¨ï¼Œè™½ç„¶å…±äº«è¯¥å®ä¾‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†ä¼šå› ç«äº‰åŒä¸€seed å¯¼è‡´çš„æ€§èƒ½ä¸‹é™ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šRandomå®ä¾‹åŒ…æ‹¬java.util.Random çš„å®ä¾‹æˆ–è€… Math.random()çš„æ–¹å¼ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šåœ¨JDK7ä¹‹åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨API ThreadLocalRandomï¼Œè€Œåœ¨ JDK7ä¹‹å‰ï¼Œéœ€è¦ç¼–ç ä¿è¯æ¯ä¸ªçº¿ç¨‹æŒæœ‰ä¸€ä¸ªå®ä¾‹ã€‚ </li><li>ã€æ¨èã€‘åœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œé€šè¿‡åŒé‡æ£€æŸ¥é”ï¼ˆdouble-checked lockingï¼‰å®ç°å»¶è¿Ÿåˆå§‹åŒ–çš„ä¼˜åŒ–é—®é¢˜éšæ‚£(å¯å‚è€ƒ The â€œDouble-Checked Locking is Brokenâ€ Declaration)ï¼Œæ¨èè§£å†³æ–¹æ¡ˆä¸­è¾ƒä¸ºç®€å•ä¸€ç§ï¼ˆé€‚ç”¨äºJDK5åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰ï¼Œå°†ç›®æ ‡å±æ€§å£°æ˜ä¸º volatileå‹ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼š<pre><code>class Singleton {       private Helper helper = null;      public Helper getHelper() {        if (helper == null)       synchronized(this) {              if (helper == null)                helper = new Helper();          }            return helper;      }      // other methods and fields...  }</code></pre></li><li>ã€å‚è€ƒã€‘volatileè§£å†³å¤šçº¿ç¨‹å†…å­˜ä¸å¯è§é—®é¢˜ã€‚å¯¹äºä¸€å†™å¤šè¯»ï¼Œæ˜¯å¯ä»¥è§£å†³å˜é‡åŒæ­¥é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå¤šå†™ï¼ŒåŒæ ·æ— æ³•è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚å¦‚æœæ˜¯count++æ“ä½œï¼Œä½¿ç”¨å¦‚ä¸‹ç±»å®ç°ï¼š<pre><code>AtomicInteger count = new AtomicInteger(); count.addAndGet(1); </code></pre>å¦‚æœæ˜¯JDK8ï¼Œæ¨èä½¿ç”¨<code>LongAdder</code>å¯¹è±¡ï¼Œæ¯”<code>AtomicLong</code>æ€§èƒ½æ›´å¥½ï¼ˆå‡å°‘ä¹è§‚é”çš„é‡è¯•æ¬¡æ•°ï¼‰ã€‚</li><li>ã€å‚è€ƒã€‘ HashMapåœ¨å®¹é‡ä¸å¤Ÿè¿›è¡Œresizeæ—¶ç”±äºé«˜å¹¶å‘å¯èƒ½å‡ºç°æ­»é“¾ï¼Œå¯¼è‡´CPUé£™å‡ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨å…¶å®ƒæ•°æ®ç»“æ„æˆ–åŠ é”æ¥è§„é¿æ­¤é£é™©ã€‚ </li><li>ã€å‚è€ƒã€‘<code>ThreadLocal</code>æ— æ³•è§£å†³å…±äº«å¯¹è±¡çš„æ›´æ–°é—®é¢˜ï¼Œ<code>ThreadLocal</code>å¯¹è±¡å»ºè®®ä½¿ç”¨staticä¿®é¥°ã€‚è¿™ä¸ªå˜é‡æ˜¯é’ˆå¯¹ä¸€ä¸ªçº¿ç¨‹å†…æ‰€æœ‰æ“ä½œå…±äº«çš„ï¼Œæ‰€ä»¥è®¾ç½®ä¸ºé™æ€å˜é‡ï¼Œæ‰€æœ‰æ­¤ç±»å®ä¾‹å…±äº«æ­¤é™æ€å˜é‡ ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç±»ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨æ—¶è£…è½½ï¼Œåªåˆ†é…ä¸€å—å­˜å‚¨ç©ºé—´ï¼Œæ‰€æœ‰æ­¤ç±»çš„å¯¹è±¡(åªè¦æ˜¯è¿™ä¸ªçº¿ç¨‹å†…å®šä¹‰çš„)éƒ½å¯ä»¥æ“æ§è¿™ä¸ªå˜é‡ã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.5-é›†åˆå¤„ç†</title>
      <link href="/alibaba-p3c/15-collection/"/>
      <url>/alibaba-p3c/15-collection/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ã€å¼ºåˆ¶ã€‘å…³äº<code>hashCode</code>å’Œ<code>equals</code>çš„å¤„ç†ï¼Œéµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š<br><br>1ï¼‰ åªè¦é‡å†™<code>equals</code>ï¼Œå°±å¿…é¡»é‡å†™<code>hashCode</code>ã€‚<br><br>2ï¼‰ å› ä¸ºSetå­˜å‚¨çš„æ˜¯ä¸é‡å¤çš„å¯¹è±¡ï¼Œä¾æ®<code>hashCode</code>å’Œ<code>equals</code>è¿›è¡Œåˆ¤æ–­ï¼Œæ‰€ä»¥Setå­˜å‚¨çš„å¯¹è±¡å¿…é¡»é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚<br><br>3ï¼‰ å¦‚æœè‡ªå®šä¹‰å¯¹è±¡ä½œä¸ºMapçš„é”®ï¼Œé‚£ä¹ˆå¿…é¡»é‡å†™<code>hashCode</code>å’Œ<code>equals</code>ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šStringé‡å†™äº†hashCodeå’Œequalsæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥éå¸¸æ„‰å¿«åœ°ä½¿ç”¨Stringå¯¹è±¡ä½œä¸ºkeyæ¥ä½¿ç”¨ã€‚ </p></li><li><p>ã€å¼ºåˆ¶ã€‘ ArrayListçš„subListç»“æœä¸å¯å¼ºè½¬æˆArrayListï¼Œå¦åˆ™ä¼šæŠ›å‡ºClassCastExceptionå¼‚å¸¸ï¼Œå³java.util.RandomAccessSubList cannot be cast to java.util.ArrayList.<br><br><span style="color:orange">è¯´æ˜</span>ï¼šsubList è¿”å›çš„æ˜¯ ArrayList çš„å†…éƒ¨ç±» SubListï¼Œå¹¶ä¸æ˜¯ ArrayList ï¼Œè€Œæ˜¯ ArrayList çš„ä¸€ä¸ªè§†å›¾ï¼Œå¯¹äºSubListå­åˆ—è¡¨çš„æ‰€æœ‰æ“ä½œæœ€ç»ˆä¼šåæ˜ åˆ°åŸåˆ—è¡¨ä¸Šã€‚ </p></li><li><p>ã€å¼ºåˆ¶ã€‘åœ¨subListåœºæ™¯ä¸­ï¼Œ<strong>é«˜åº¦æ³¨æ„</strong>å¯¹åŸé›†åˆå…ƒç´ ä¸ªæ•°çš„ä¿®æ”¹ï¼Œä¼šå¯¼è‡´å­åˆ—è¡¨çš„éå†ã€å¢åŠ ã€åˆ é™¤å‡ä¼šäº§ç”ŸConcurrentModificationException å¼‚å¸¸ã€‚ </p></li><li><p>ã€å¼ºåˆ¶ã€‘ä½¿ç”¨é›†åˆè½¬æ•°ç»„çš„æ–¹æ³•ï¼Œå¿…é¡»ä½¿ç”¨é›†åˆçš„toArray(T[] array)ï¼Œä¼ å…¥çš„æ˜¯ç±»å‹å®Œå…¨ä¸€æ ·çš„æ•°ç»„ï¼Œå¤§å°å°±æ˜¯<code>list.size()</code>ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä½¿ç”¨toArrayå¸¦å‚æ–¹æ³•ï¼Œå…¥å‚åˆ†é…çš„æ•°ç»„ç©ºé—´ä¸å¤Ÿå¤§æ—¶ï¼ŒtoArrayæ–¹æ³•å†…éƒ¨å°†é‡æ–°åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¹¶è¿”å›æ–°æ•°ç»„åœ°å€ï¼›å¦‚æœæ•°ç»„å…ƒç´ ä¸ªæ•°å¤§äºå®é™…æ‰€éœ€ï¼Œä¸‹æ ‡ä¸º[ list.size() ]çš„æ•°ç»„å…ƒç´ å°†è¢«ç½®ä¸ºnullï¼Œå…¶å®ƒæ•°ç»„å…ƒç´ ä¿æŒåŸå€¼ï¼Œå› æ­¤æœ€å¥½å°†æ–¹æ³•å…¥å‚æ•°ç»„å¤§å°å®šä¹‰ä¸é›†åˆå…ƒç´ ä¸ªæ•°ä¸€è‡´ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š </p><pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;(2);      list.add(&quot;guan&quot;);     list.add(&quot;bao&quot;);       String[] array = new String[list.size()];      array = list.toArray(array);</code></pre><p><span style="color:red">åä¾‹</span>ï¼šç›´æ¥ä½¿ç”¨toArrayæ— å‚æ–¹æ³•å­˜åœ¨é—®é¢˜ï¼Œæ­¤æ–¹æ³•è¿”å›å€¼åªèƒ½æ˜¯Object[]ç±»ï¼Œè‹¥å¼ºè½¬å…¶å®ƒç±»å‹æ•°ç»„å°†å‡ºç°ClassCastExceptioné”™è¯¯ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘ä½¿ç”¨å·¥å…·ç±»Arrays.asList()æŠŠæ•°ç»„è½¬æ¢æˆé›†åˆæ—¶ï¼Œä¸èƒ½ä½¿ç”¨å…¶ä¿®æ”¹é›†åˆç›¸å…³çš„æ–¹æ³•ï¼Œå®ƒçš„add/remove/clearæ–¹æ³•ä¼šæŠ›å‡ºUnsupportedOperationExceptionå¼‚å¸¸ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šasListçš„è¿”å›å¯¹è±¡æ˜¯ä¸€ä¸ªArrayså†…éƒ¨ç±»ï¼Œå¹¶æ²¡æœ‰å®ç°é›†åˆçš„ä¿®æ”¹æ–¹æ³•ã€‚Arrays.asListä½“ç°çš„æ˜¯é€‚é…å™¨æ¨¡å¼ï¼Œåªæ˜¯è½¬æ¢æ¥å£ï¼Œåå°çš„æ•°æ®ä»æ˜¯æ•°ç»„ã€‚</p><pre><code>String[] str = new String[] { &quot;you&quot;, &quot;wu&quot; };     List list = Arrays.asList(str); </code></pre><p>ç¬¬ä¸€ç§æƒ…å†µï¼šlist.add(â€œyangguanbaoâ€); è¿è¡Œæ—¶å¼‚å¸¸ã€‚<br><br>ç¬¬äºŒç§æƒ…å†µï¼šstr[0] = â€œgujinâ€; é‚£ä¹ˆlist.get(0)ä¹Ÿä¼šéšä¹‹ä¿®æ”¹ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘æ³›å‹é€šé…ç¬¦<code>&lt;? extends T&gt;</code>æ¥æ¥æ”¶è¿”å›çš„æ•°æ®ï¼Œæ­¤å†™æ³•çš„æ³›å‹é›†åˆä¸èƒ½ä½¿ç”¨addæ–¹æ³•ï¼Œè€Œ<code>&lt;? super T&gt;</code>ä¸èƒ½ä½¿ç”¨getæ–¹æ³•ï¼Œä½œä¸ºæ¥å£è°ƒç”¨èµ‹å€¼æ—¶æ˜“å‡ºé”™ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæ‰©å±•è¯´ä¸€ä¸‹PECS(Producer Extends Consumer Super)åŸåˆ™ï¼šç¬¬ä¸€ã€é¢‘ç¹å¾€å¤–è¯»å–å†…å®¹çš„ï¼Œé€‚åˆç”¨&lt;? extends T&gt;ã€‚ç¬¬äºŒã€ç»å¸¸å¾€é‡Œæ’å…¥çš„ï¼Œé€‚åˆç”¨<code>&lt;? super T&gt;</code>ã€‚ </p></li><li><p>ã€å¼ºåˆ¶ã€‘ä¸è¦åœ¨foreachå¾ªç¯é‡Œè¿›è¡Œå…ƒç´ çš„remove/addæ“ä½œã€‚removeå…ƒç´ è¯·ä½¿ç”¨Iteratoræ–¹å¼ï¼Œå¦‚æœå¹¶å‘æ“ä½œï¼Œéœ€è¦å¯¹Iteratorå¯¹è±¡åŠ é”ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š </p><pre><code> Iterator&lt;String&gt; iterator = list.iterator();  while (iterator.hasNext()) {                 String item = iterator.next();                               if (åˆ é™¤å…ƒç´ çš„æ¡ä»¶) {                                        iterator.remove();                              }       }</code></pre><p><span style="color:red">åä¾‹</span>ï¼š</p><pre><code> List&lt;String&gt; list = new ArrayList&lt;String&gt;();       list.add(&quot;1&quot;);       list.add(&quot;2&quot;);       for (String item : list) {             if (&quot;1&quot;.equals(item)) {                     list.remove(item);                }    }</code></pre><p><span style="color:orange">è¯´æ˜</span>ï¼šä»¥ä¸Šä»£ç çš„æ‰§è¡Œç»“æœè‚¯å®šä¼šå‡ºä¹å¤§å®¶çš„æ„æ–™ï¼Œé‚£ä¹ˆè¯•ä¸€ä¸‹æŠŠâ€œ1â€æ¢æˆâ€œ2â€ï¼Œä¼šæ˜¯åŒæ ·çš„ç»“æœå—ï¼Ÿ</p></li><li><p>ã€å¼ºåˆ¶ã€‘ åœ¨JDK7ç‰ˆæœ¬åŠä»¥ä¸Šï¼Œ<code>Comparator</code>è¦æ»¡è¶³å¦‚ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼Œä¸ç„¶<code>Arrays.sort</code>ï¼Œ<code>Collections.sort</code>ä¼šæŠ¥IllegalArgumentExceptionå¼‚å¸¸ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä¸‰ä¸ªæ¡ä»¶å¦‚ä¸‹ï¼š<br><br>1ï¼‰ xï¼Œyçš„æ¯”è¾ƒç»“æœå’Œyï¼Œxçš„æ¯”è¾ƒç»“æœç›¸åã€‚<br><br>2ï¼‰ x&gt;yï¼Œy&gt;zï¼Œåˆ™x&gt;zã€‚<br><br>3ï¼‰ x=yï¼Œåˆ™xï¼Œzæ¯”è¾ƒç»“æœå’Œyï¼Œzæ¯”è¾ƒç»“æœç›¸åŒã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šä¸‹ä¾‹ä¸­æ²¡æœ‰å¤„ç†ç›¸ç­‰çš„æƒ…å†µï¼Œå®é™…ä½¿ç”¨ä¸­å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸ï¼š</p><pre><code> new Comparator&lt;Student&gt;() {                  @Override                 public int compare(Student o1, Student o2) {                       return o1.getId() &gt; o2.getId() ? 1 : -1;              }   };  </code></pre></li><li><p>ã€æ¨èã€‘é›†åˆåˆå§‹åŒ–æ—¶ï¼ŒæŒ‡å®šé›†åˆåˆå§‹å€¼å¤§å°ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šHashMapä½¿ç”¨HashMap(int initialCapacity) åˆå§‹åŒ–ï¼Œ<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šinitialCapacity = (éœ€è¦å­˜å‚¨çš„å…ƒç´ ä¸ªæ•° / è´Ÿè½½å› å­) + 1ã€‚æ³¨æ„è´Ÿè½½å› å­ï¼ˆå³loader factorï¼‰é»˜è®¤ä¸º0.75ï¼Œå¦‚æœæš‚æ—¶æ— æ³•ç¡®å®šåˆå§‹å€¼å¤§å°ï¼Œè¯·è®¾ç½®ä¸º16ï¼ˆå³é»˜è®¤å€¼ï¼‰ã€‚ <br><span style="color:red">åä¾‹</span>ï¼šHashMapéœ€è¦æ”¾ç½®1024ä¸ªå…ƒç´ ï¼Œç”±äºæ²¡æœ‰è®¾ç½®å®¹é‡åˆå§‹å¤§å°ï¼Œéšç€å…ƒç´ ä¸æ–­å¢åŠ ï¼Œå®¹é‡7æ¬¡è¢«è¿«æ‰©å¤§ï¼Œresizeéœ€è¦é‡å»ºhashè¡¨ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚ </p></li><li><p>ã€æ¨èã€‘ä½¿ç”¨entrySetéå†Mapç±»é›†åˆKVï¼Œè€Œä¸æ˜¯keySetæ–¹å¼è¿›è¡Œéå†ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼škeySetå…¶å®æ˜¯éå†äº†2æ¬¡ï¼Œä¸€æ¬¡æ˜¯è½¬ä¸ºIteratorå¯¹è±¡ï¼Œå¦ä¸€æ¬¡æ˜¯ä»hashMapä¸­å–å‡ºkeyæ‰€å¯¹åº”çš„valueã€‚è€ŒentrySetåªæ˜¯éå†äº†ä¸€æ¬¡å°±æŠŠkeyå’Œvalueéƒ½æ”¾åˆ°äº†entryä¸­ï¼Œæ•ˆç‡æ›´é«˜ã€‚å¦‚æœæ˜¯JDK8ï¼Œä½¿ç”¨Map.forEachæ–¹æ³•ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼švalues()è¿”å›çš„æ˜¯Vå€¼é›†åˆï¼Œæ˜¯ä¸€ä¸ªlisté›†åˆå¯¹è±¡ï¼›keySet()è¿”å›çš„æ˜¯Kå€¼é›†åˆï¼Œæ˜¯ä¸€ä¸ªSeté›†åˆå¯¹è±¡ï¼›entrySet()è¿”å›çš„æ˜¯K-Vå€¼ç»„åˆé›†åˆã€‚ </p></li><li><p>ã€æ¨èã€‘é«˜åº¦æ³¨æ„Mapç±»é›†åˆK/Vèƒ½ä¸èƒ½å­˜å‚¨nullå€¼çš„æƒ…å†µï¼Œå¦‚ä¸‹è¡¨æ ¼ï¼š</p><pre><code>| é›†åˆç±»            | Key          | Value        | Super       | è¯´æ˜                   ||-------------------|--------------|--------------|-------------|------------------------|| Hashtable         | ä¸å…è®¸ä¸ºnull | ä¸å…è®¸ä¸ºnull | Dictionary  | çº¿ç¨‹å®‰å…¨               || ConcurrentHashMap | ä¸å…è®¸ä¸ºnull | ä¸å…è®¸ä¸ºnull | AbstractMap | é”åˆ†æ®µæŠ€æœ¯ï¼ˆJDK8:CASï¼‰  || TreeMap           | ä¸å…è®¸ä¸ºnull | å…è®¸ä¸ºnull   | AbstractMap | çº¿ç¨‹ä¸å®‰å…¨             || HashMap           | å…è®¸ä¸ºnull   | å…è®¸ä¸ºnull   | AbstractMap | çº¿ç¨‹ä¸å®‰å…¨             |</code></pre><p><span style="color:red">åä¾‹</span>ï¼š ç”±äºHashMapçš„å¹²æ‰°ï¼Œå¾ˆå¤šäººè®¤ä¸ºConcurrentHashMapæ˜¯å¯ä»¥ç½®å…¥nullå€¼ï¼Œè€Œäº‹å®ä¸Šï¼Œå­˜å‚¨nullå€¼æ—¶ä¼šæŠ›å‡ºNPEå¼‚å¸¸ã€‚</p></li><li><p>ã€å‚è€ƒã€‘åˆç†åˆ©ç”¨å¥½é›†åˆçš„æœ‰åºæ€§(sort)å’Œç¨³å®šæ€§(order)ï¼Œé¿å…é›†åˆçš„æ— åºæ€§(unsort)å’Œä¸ç¨³å®šæ€§(unorder)å¸¦æ¥çš„è´Ÿé¢å½±å“ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæœ‰åºæ€§æ˜¯æŒ‡éå†çš„ç»“æœæ˜¯æŒ‰æŸç§æ¯”è¾ƒè§„åˆ™ä¾æ¬¡æ’åˆ—çš„ã€‚ç¨³å®šæ€§æŒ‡é›†åˆæ¯æ¬¡éå†çš„å…ƒç´ æ¬¡åºæ˜¯ä¸€å®šçš„ã€‚å¦‚ï¼šArrayListæ˜¯order/unsortï¼›HashMapæ˜¯unorder/unsortï¼›TreeSetæ˜¯order/sortã€‚ </p></li><li><p>ã€å‚è€ƒã€‘åˆ©ç”¨Setå…ƒç´ å”¯ä¸€çš„ç‰¹æ€§ï¼Œå¯ä»¥å¿«é€Ÿå¯¹ä¸€ä¸ªé›†åˆè¿›è¡Œå»é‡æ“ä½œï¼Œé¿å…ä½¿ç”¨Listçš„containsæ–¹æ³•è¿›è¡Œéå†ã€å¯¹æ¯”ã€å»é‡æ“ä½œã€‚ </p></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.4-OOPè§„çº¦</title>
      <link href="/alibaba-p3c/14-oop-statute/"/>
      <url>/alibaba-p3c/14-oop-statute/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘é¿å…é€šè¿‡ä¸€ä¸ªç±»çš„å¯¹è±¡å¼•ç”¨è®¿é—®æ­¤ç±»çš„é™æ€å˜é‡æˆ–é™æ€æ–¹æ³•ï¼Œæ— è°“å¢åŠ ç¼–è¯‘å™¨è§£ææˆæœ¬ï¼Œç›´æ¥ç”¨<strong>ç±»å</strong>æ¥è®¿é—®å³å¯ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ‰€æœ‰çš„è¦†å†™æ–¹æ³•ï¼Œå¿…é¡»åŠ @Overrideæ³¨è§£ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šgetObject()ä¸get0bject()çš„é—®é¢˜ã€‚ä¸€ä¸ªæ˜¯å­—æ¯çš„Oï¼Œä¸€ä¸ªæ˜¯æ•°å­—çš„0ï¼ŒåŠ @Overrideå¯ä»¥å‡†ç¡®åˆ¤æ–­æ˜¯å¦è¦†ç›–æˆåŠŸã€‚å¦å¤–ï¼Œå¦‚æœåœ¨æŠ½è±¡ç±»ä¸­å¯¹æ–¹æ³•ç­¾åè¿›è¡Œä¿®æ”¹ï¼Œå…¶å®ç°ç±»ä¼šé©¬ä¸Šç¼–è¯‘æŠ¥é”™ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ç›¸åŒå‚æ•°ç±»å‹ï¼Œç›¸åŒä¸šåŠ¡å«ä¹‰ï¼Œæ‰å¯ä»¥ä½¿ç”¨Javaçš„å¯å˜å‚æ•°ï¼Œé¿å…ä½¿ç”¨Objectã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¯å˜å‚æ•°å¿…é¡»æ”¾ç½®åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åã€‚ï¼ˆæå€¡åŒå­¦ä»¬å°½é‡ä¸ç”¨å¯å˜å‚æ•°ç¼–ç¨‹ï¼‰<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š<pre><code>public User getUsers(String type, Integer... ids) {...} </code></pre></li><li>ã€å¼ºåˆ¶ã€‘å¤–éƒ¨æ­£åœ¨è°ƒç”¨æˆ–è€…äºŒæ–¹åº“ä¾èµ–çš„æ¥å£ï¼Œä¸å…è®¸ä¿®æ”¹æ–¹æ³•ç­¾åï¼Œé¿å…å¯¹æ¥å£è°ƒç”¨æ–¹äº§ç”Ÿå½±å“ã€‚æ¥å£è¿‡æ—¶å¿…é¡»åŠ <code>@Deprecated</code>æ³¨è§£ï¼Œå¹¶æ¸…æ™°åœ°è¯´æ˜é‡‡ç”¨çš„æ–°æ¥å£æˆ–è€…æ–°æœåŠ¡æ˜¯ä»€ä¹ˆã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ä¸èƒ½ä½¿ç”¨è¿‡æ—¶çš„ç±»æˆ–æ–¹æ³•ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šjava.net.URLDecoder ä¸­çš„æ–¹æ³•decode(String encodeStr) è¿™ä¸ªæ–¹æ³•å·²ç»è¿‡æ—¶ï¼Œåº”è¯¥ä½¿ç”¨åŒå‚æ•°decode(String source, String encode)ã€‚æ¥å£æä¾›æ–¹æ—¢ç„¶æ˜ç¡®æ˜¯è¿‡æ—¶æ¥å£ï¼Œé‚£ä¹ˆæœ‰ä¹‰åŠ¡åŒæ—¶æä¾›æ–°çš„æ¥å£ï¼›ä½œä¸ºè°ƒç”¨æ–¹æ¥è¯´ï¼Œæœ‰ä¹‰åŠ¡å»è€ƒè¯è¿‡æ—¶æ–¹æ³•çš„æ–°å®ç°æ˜¯ä»€ä¹ˆã€‚ </li><li>ã€å¼ºåˆ¶ã€‘Objectçš„equalsæ–¹æ³•å®¹æ˜“æŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œåº”ä½¿ç”¨å¸¸é‡æˆ–ç¡®å®šæœ‰å€¼çš„å¯¹è±¡æ¥è°ƒç”¨equalsã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šâ€testâ€.equals(object);<br><br><span style="color:red">åä¾‹</span>ï¼šobject.equals(â€œtestâ€);<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæ¨èä½¿ç”¨java.util.Objects#equalsï¼ˆJDK7å¼•å…¥çš„å·¥å…·ç±»ï¼‰</li><li>ã€å¼ºåˆ¶ã€‘æ‰€æœ‰çš„ç›¸åŒç±»å‹çš„åŒ…è£…ç±»å¯¹è±¡ä¹‹é—´å€¼çš„æ¯”è¾ƒï¼Œå…¨éƒ¨ä½¿ç”¨equalsæ–¹æ³•æ¯”è¾ƒã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¯¹äºInteger var = ?  åœ¨-128è‡³127èŒƒå›´å†…çš„èµ‹å€¼ï¼ŒIntegerå¯¹è±¡æ˜¯åœ¨IntegerCache.cacheäº§ç”Ÿï¼Œä¼šå¤ç”¨å·²æœ‰å¯¹è±¡ï¼Œè¿™ä¸ªåŒºé—´å†…çš„Integerå€¼å¯ä»¥ç›´æ¥ä½¿ç”¨==è¿›è¡Œåˆ¤æ–­ï¼Œä½†æ˜¯è¿™ä¸ªåŒºé—´ä¹‹å¤–çš„æ‰€æœ‰æ•°æ®ï¼Œéƒ½ä¼šåœ¨å †ä¸Šäº§ç”Ÿï¼Œå¹¶ä¸ä¼šå¤ç”¨å·²æœ‰å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤§å‘ï¼Œæ¨èä½¿ç”¨equalsæ–¹æ³•è¿›è¡Œåˆ¤æ–­ã€‚ </li><li>å…³äºåŸºæœ¬æ•°æ®ç±»å‹ä¸åŒ…è£…æ•°æ®ç±»å‹çš„ä½¿ç”¨æ ‡å‡†å¦‚ä¸‹ï¼š<br><br>1ï¼‰ ã€å¼ºåˆ¶ã€‘æ‰€æœ‰çš„POJOç±»å±æ€§å¿…é¡»ä½¿ç”¨åŒ…è£…æ•°æ®ç±»å‹ã€‚<br><br>2ï¼‰ ã€å¼ºåˆ¶ã€‘RPCæ–¹æ³•çš„è¿”å›å€¼å’Œå‚æ•°å¿…é¡»ä½¿ç”¨åŒ…è£…æ•°æ®ç±»å‹ã€‚<br><br>3ï¼‰ ã€æ¨èã€‘æ‰€æœ‰çš„å±€éƒ¨å˜é‡ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šPOJOç±»å±æ€§æ²¡æœ‰åˆå€¼æ˜¯æé†’ä½¿ç”¨è€…åœ¨éœ€è¦ä½¿ç”¨æ—¶ï¼Œå¿…é¡»è‡ªå·±æ˜¾å¼åœ°è¿›è¡Œèµ‹å€¼ï¼Œä»»ä½•NPEé—®é¢˜ï¼Œæˆ–è€…å…¥åº“æ£€æŸ¥ï¼Œéƒ½ç”±ä½¿ç”¨è€…æ¥ä¿è¯ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šæ•°æ®åº“çš„æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯nullï¼Œå› ä¸ºè‡ªåŠ¨æ‹†ç®±ï¼Œç”¨åŸºæœ¬æ•°æ®ç±»å‹æ¥æ”¶æœ‰NPEé£é™©ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šæ¯”å¦‚æ˜¾ç¤ºæˆäº¤æ€»é¢æ¶¨è·Œæƒ…å†µï¼Œå³æ­£è´Ÿx%ï¼Œxä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè°ƒç”¨çš„RPCæœåŠ¡ï¼Œè°ƒç”¨ä¸æˆåŠŸæ—¶ï¼Œè¿”å›çš„æ˜¯é»˜è®¤å€¼ï¼Œé¡µé¢æ˜¾ç¤ºä¸º0%ï¼Œè¿™æ˜¯ä¸åˆç†çš„ï¼Œåº”è¯¥æ˜¾ç¤ºæˆä¸­åˆ’çº¿ã€‚æ‰€ä»¥åŒ…è£…æ•°æ®ç±»å‹çš„nullå€¼ï¼Œèƒ½å¤Ÿè¡¨ç¤ºé¢å¤–çš„ä¿¡æ¯ï¼Œå¦‚ï¼šè¿œç¨‹è°ƒç”¨å¤±è´¥ï¼Œå¼‚å¸¸é€€å‡ºã€‚ </li><li>ã€å¼ºåˆ¶ã€‘å®šä¹‰DO/DTO/VOç­‰POJOç±»æ—¶ï¼Œä¸è¦è®¾å®šä»»ä½•å±æ€§<strong>é»˜è®¤å€¼</strong>ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šPOJOç±»çš„gmtCreateé»˜è®¤å€¼ä¸ºnew Date();ä½†æ˜¯è¿™ä¸ªå±æ€§åœ¨æ•°æ®æå–æ—¶å¹¶æ²¡æœ‰ç½®å…¥å…·ä½“å€¼ï¼Œåœ¨æ›´æ–°å…¶å®ƒå­—æ®µæ—¶åˆé™„å¸¦æ›´æ–°äº†æ­¤å­—æ®µï¼Œå¯¼è‡´åˆ›å»ºæ—¶é—´è¢«ä¿®æ”¹æˆå½“å‰æ—¶é—´ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘åºåˆ—åŒ–ç±»æ–°å¢å±æ€§æ—¶ï¼Œè¯·ä¸è¦ä¿®æ”¹serialVersionUIDå­—æ®µï¼Œé¿å…ååºåˆ—å¤±è´¥ï¼›å¦‚æœå®Œå…¨ä¸å…¼å®¹å‡çº§ï¼Œé¿å…ååºåˆ—åŒ–æ··ä¹±ï¼Œé‚£ä¹ˆè¯·ä¿®æ”¹serialVersionUIDå€¼ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæ³¨æ„serialVersionUIDä¸ä¸€è‡´ä¼šæŠ›å‡ºåºåˆ—åŒ–è¿è¡Œæ—¶å¼‚å¸¸ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘æ„é€ æ–¹æ³•é‡Œé¢ç¦æ­¢åŠ å…¥ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œå¦‚æœæœ‰åˆå§‹åŒ–é€»è¾‘ï¼Œè¯·æ”¾åœ¨initæ–¹æ³•ä¸­ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘POJOç±»å¿…é¡»å†™toStringæ–¹æ³•ã€‚ä½¿ç”¨IDEä¸­çš„å·¥å…·ï¼šsource&gt; generate toStringæ—¶ï¼Œå¦‚æœç»§æ‰¿äº†å¦ä¸€ä¸ªPOJOç±»ï¼Œæ³¨æ„åœ¨å‰é¢åŠ ä¸€ä¸‹super.toStringã€‚ <br><span style="color:orange">è¯´æ˜</span>ï¼šåœ¨æ–¹æ³•æ‰§è¡ŒæŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨POJOçš„toString()æ–¹æ³•æ‰“å°å…¶å±æ€§å€¼ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜ã€‚ </li><li>ã€æ¨èã€‘ä½¿ç”¨ç´¢å¼•è®¿é—®ç”¨Stringçš„splitæ–¹æ³•å¾—åˆ°çš„æ•°ç»„æ—¶ï¼Œéœ€åšæœ€åä¸€ä¸ªåˆ†éš”ç¬¦åæœ‰æ— å†…å®¹çš„æ£€æŸ¥ï¼Œå¦åˆ™ä¼šæœ‰æŠ›IndexOutOfBoundsExceptionçš„é£é™©ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼š<pre><code>String str = &quot;a,b,c,,&quot;;  String[] ary = str.split(&quot;,&quot;);  // é¢„æœŸå¤§äº3ï¼Œç»“æœæ˜¯3 System.out.println(ary.length);</code></pre></li><li>ã€æ¨èã€‘å½“ä¸€ä¸ªç±»æœ‰å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œæˆ–è€…å¤šä¸ªåŒåæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åº”è¯¥æŒ‰é¡ºåºæ”¾ç½®åœ¨ä¸€èµ·ï¼Œä¾¿äºé˜…è¯»ï¼Œæ­¤æ¡è§„åˆ™ä¼˜å…ˆäºç¬¬15æ¡è§„åˆ™ã€‚ </li><li>ã€æ¨èã€‘ ç±»å†…æ–¹æ³•å®šä¹‰çš„é¡ºåºä¾æ¬¡æ˜¯ï¼šå…¬æœ‰æ–¹æ³•æˆ–ä¿æŠ¤æ–¹æ³• &gt; ç§æœ‰æ–¹æ³• &gt; getter/setteræ–¹æ³•ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå…¬æœ‰æ–¹æ³•æ˜¯ç±»çš„è°ƒç”¨è€…å’Œç»´æŠ¤è€…æœ€å…³å¿ƒçš„æ–¹æ³•ï¼Œé¦–å±å±•ç¤ºæœ€å¥½ï¼›ä¿æŠ¤æ–¹æ³•è™½ç„¶åªæ˜¯å­ç±»å…³å¿ƒï¼Œä¹Ÿå¯èƒ½æ˜¯â€œæ¨¡æ¿è®¾è®¡æ¨¡å¼â€ä¸‹çš„æ ¸å¿ƒæ–¹æ³•ï¼›è€Œç§æœ‰æ–¹æ³•å¤–éƒ¨ä¸€èˆ¬ä¸éœ€è¦ç‰¹åˆ«å…³å¿ƒï¼Œæ˜¯ä¸€ä¸ªé»‘ç›’å®ç°ï¼›å› ä¸ºæ‰¿è½½çš„ä¿¡æ¯ä»·å€¼è¾ƒä½ï¼Œæ‰€æœ‰Serviceå’ŒDAOçš„getter/setteræ–¹æ³•æ”¾åœ¨ç±»ä½“æœ€åã€‚ </li><li>ã€æ¨èã€‘setteræ–¹æ³•ä¸­ï¼Œå‚æ•°åç§°ä¸ç±»æˆå‘˜å˜é‡åç§°ä¸€è‡´ï¼Œthis.æˆå‘˜å = å‚æ•°åã€‚åœ¨getter/setteræ–¹æ³•ä¸­ï¼Œä¸è¦å¢åŠ ä¸šåŠ¡é€»è¾‘ï¼Œå¢åŠ æ’æŸ¥é—®é¢˜çš„éš¾åº¦ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼š<pre><code>public Integer getData() {        if (condition) {      return this.data + 100;    } else {     return this.data - 100;   }  }</code></pre></li><li>ã€æ¨èã€‘å¾ªç¯ä½“å†…ï¼Œå­—ç¬¦ä¸²çš„è¿æ¥æ–¹å¼ï¼Œä½¿ç”¨StringBuilderçš„appendæ–¹æ³•è¿›è¡Œæ‰©å±•ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šåç¼–è¯‘å‡ºçš„å­—èŠ‚ç æ–‡ä»¶æ˜¾ç¤ºæ¯æ¬¡å¾ªç¯éƒ½ä¼šnewå‡ºä¸€ä¸ªStringBuilderå¯¹è±¡ï¼Œç„¶åè¿›è¡Œappendæ“ä½œï¼Œæœ€åé€šè¿‡toStringæ–¹æ³•è¿”å›Stringå¯¹è±¡ï¼Œé€ æˆå†…å­˜èµ„æºæµªè´¹ã€‚  <br><span style="color:red">åä¾‹</span>ï¼š<pre><code>String str = &quot;start&quot;;for (int i = 0; i &lt; 100; i++) {  str = str + &quot;hello&quot;;      }</code></pre></li><li>ã€æ¨èã€‘finalå¯ä»¥å£°æ˜ç±»ã€æˆå‘˜å˜é‡ã€æ–¹æ³•ã€ä»¥åŠæœ¬åœ°å˜é‡ï¼Œä¸‹åˆ—æƒ…å†µä½¿ç”¨finalå…³é”®å­—ï¼š<br><br>1ï¼‰ ä¸å…è®¸è¢«ç»§æ‰¿çš„ç±»ï¼Œå¦‚ï¼šStringç±»ã€‚<br><br>2ï¼‰ ä¸å…è®¸ä¿®æ”¹å¼•ç”¨çš„åŸŸå¯¹è±¡ï¼Œå¦‚ï¼šPOJOç±»çš„åŸŸå˜é‡ã€‚<br><br>3ï¼‰ ä¸å…è®¸è¢«é‡å†™çš„æ–¹æ³•ï¼Œå¦‚ï¼šPOJOç±»çš„setteræ–¹æ³•ã€‚<br><br>4ï¼‰ ä¸å…è®¸è¿è¡Œè¿‡ç¨‹ä¸­é‡æ–°èµ‹å€¼çš„å±€éƒ¨å˜é‡ã€‚<br><br>5ï¼‰ é¿å…ä¸Šä¸‹æ–‡é‡å¤ä½¿ç”¨ä¸€ä¸ªå˜é‡ï¼Œä½¿ç”¨finalæè¿°å¯ä»¥å¼ºåˆ¶é‡æ–°å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œæ–¹ä¾¿æ›´å¥½åœ°è¿›è¡Œé‡æ„ã€‚ </li><li>ã€æ¨èã€‘æ…ç”¨Objectçš„cloneæ–¹æ³•æ¥æ‹·è´å¯¹è±¡ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¯¹è±¡çš„cloneæ–¹æ³•é»˜è®¤æ˜¯æµ…æ‹·è´ï¼Œè‹¥æƒ³å®ç°æ·±æ‹·è´éœ€è¦é‡å†™cloneæ–¹æ³•å®ç°å±æ€§å¯¹è±¡çš„æ‹·è´ã€‚ </li><li>ã€æ¨èã€‘ç±»æˆå‘˜ä¸æ–¹æ³•è®¿é—®æ§åˆ¶ä»ä¸¥ï¼š<br><br>1ï¼‰ å¦‚æœä¸å…è®¸å¤–éƒ¨ç›´æ¥é€šè¿‡newæ¥åˆ›å»ºå¯¹è±¡ï¼Œé‚£ä¹ˆæ„é€ æ–¹æ³•å¿…é¡»æ˜¯privateã€‚<br><br>2ï¼‰ å·¥å…·ç±»ä¸å…è®¸æœ‰publicæˆ–defaultæ„é€ æ–¹æ³•ã€‚<br><br>3ï¼‰ ç±»éstaticæˆå‘˜å˜é‡å¹¶ä¸”ä¸å­ç±»å…±äº«ï¼Œå¿…é¡»æ˜¯protectedã€‚<br><br>4ï¼‰ ç±»éstaticæˆå‘˜å˜é‡å¹¶ä¸”ä»…åœ¨æœ¬ç±»ä½¿ç”¨ï¼Œå¿…é¡»æ˜¯privateã€‚<br><br>5ï¼‰ ç±»staticæˆå‘˜å˜é‡å¦‚æœä»…åœ¨æœ¬ç±»ä½¿ç”¨ï¼Œå¿…é¡»æ˜¯privateã€‚<br><br>6ï¼‰ è‹¥æ˜¯staticæˆå‘˜å˜é‡ï¼Œå¿…é¡»è€ƒè™‘æ˜¯å¦ä¸ºfinalã€‚<br><br>7ï¼‰ ç±»æˆå‘˜æ–¹æ³•åªä¾›ç±»å†…éƒ¨è°ƒç”¨ï¼Œå¿…é¡»æ˜¯privateã€‚<br><br>8ï¼‰ ç±»æˆå‘˜æ–¹æ³•åªå¯¹ç»§æ‰¿ç±»å…¬å¼€ï¼Œé‚£ä¹ˆé™åˆ¶ä¸ºprotectedã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šä»»ä½•ç±»ã€æ–¹æ³•ã€å‚æ•°ã€å˜é‡ï¼Œä¸¥æ§è®¿é—®èŒƒå›´ã€‚è¿‡äºå®½æ³›çš„è®¿é—®èŒƒå›´ï¼Œä¸åˆ©äºæ¨¡å—è§£è€¦ã€‚æ€è€ƒï¼šå¦‚æœæ˜¯ä¸€ä¸ªprivateçš„æ–¹æ³•ï¼Œæƒ³åˆ é™¤å°±åˆ é™¤ï¼Œå¯æ˜¯ä¸€ä¸ªpublicçš„serviceæˆå‘˜æ–¹æ³•æˆ–æˆå‘˜å˜é‡ï¼Œåˆ é™¤ä¸€ä¸‹ï¼Œä¸å¾—æ‰‹å¿ƒå†’ç‚¹æ±—å—ï¼Ÿå˜é‡åƒè‡ªå·±çš„å°å­©ï¼Œå°½é‡åœ¨è‡ªå·±çš„è§†çº¿å†…ï¼Œå˜é‡ä½œç”¨åŸŸå¤ªå¤§ï¼Œæ— é™åˆ¶çš„åˆ°å¤„è·‘ï¼Œé‚£ä¹ˆä½ ä¼šæ‹…å¿ƒçš„ã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.3-ä»£ç æ ¼å¼</title>
      <link href="/alibaba-p3c/13-code-format/"/>
      <url>/alibaba-p3c/13-code-format/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ã€å¼ºåˆ¶ã€‘å¤§æ‹¬å·çš„ä½¿ç”¨çº¦å®šã€‚å¦‚æœæ˜¯å¤§æ‹¬å·å†…ä¸ºç©ºï¼Œåˆ™ç®€æ´åœ°å†™æˆ<code>{}</code>å³å¯ï¼Œä¸éœ€è¦æ¢è¡Œï¼›å¦‚æœæ˜¯éç©ºä»£ç å—åˆ™ï¼š<br><br>1ï¼‰ å·¦å¤§æ‹¬å·å‰ä¸æ¢è¡Œã€‚<br><br>2ï¼‰ å·¦å¤§æ‹¬å·åæ¢è¡Œã€‚<br><br>3ï¼‰ å³å¤§æ‹¬å·å‰æ¢è¡Œã€‚<br><br>4ï¼‰ å³å¤§æ‹¬å·åè¿˜æœ‰elseç­‰ä»£ç åˆ™ä¸æ¢è¡Œï¼›è¡¨ç¤ºç»ˆæ­¢çš„å³å¤§æ‹¬å·åå¿…é¡»æ¢è¡Œã€‚ </p></li><li><p>ã€å¼ºåˆ¶ã€‘ å·¦å°æ‹¬å·å’Œå­—ç¬¦ä¹‹é—´ä¸å‡ºç°ç©ºæ ¼ï¼›åŒæ ·ï¼Œå³å°æ‹¬å·å’Œå­—ç¬¦ä¹‹é—´ä¹Ÿä¸å‡ºç°ç©ºæ ¼ã€‚è¯¦è§ç¬¬5æ¡ä¸‹æ–¹æ­£ä¾‹æç¤ºã€‚<br><br><span style="color:red">åä¾‹</span>ï¼š</p><pre><code>if (ç©ºæ ¼a == bç©ºæ ¼)</code></pre></li><li><p>ã€å¼ºåˆ¶ã€‘if/for/while/switch/doç­‰ä¿ç•™å­—ä¸æ‹¬å·ä¹‹é—´éƒ½å¿…é¡»åŠ ç©ºæ ¼ã€‚ </p></li><li><p>ã€å¼ºåˆ¶ã€‘ä»»ä½•äºŒç›®ã€ä¸‰ç›®è¿ç®—ç¬¦çš„å·¦å³ä¸¤è¾¹éƒ½éœ€è¦åŠ ä¸€ä¸ªç©ºæ ¼ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šè¿ç®—ç¬¦åŒ…æ‹¬èµ‹å€¼è¿ç®—ç¬¦=ã€é€»è¾‘è¿ç®—ç¬¦&amp;&amp;ã€åŠ å‡ä¹˜é™¤ç¬¦å·ç­‰ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘é‡‡ç”¨4ä¸ªç©ºæ ¼ç¼©è¿›ï¼Œç¦æ­¢ä½¿ç”¨tabå­—ç¬¦ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼š<br> å¦‚æœä½¿ç”¨tabç¼©è¿›ï¼Œå¿…é¡»è®¾ç½®1ä¸ªtabä¸º4ä¸ªç©ºæ ¼ã€‚IDEAè®¾ç½®tabä¸º4ä¸ªç©ºæ ¼æ—¶ï¼Œè¯·å‹¿å‹¾é€‰<code>Use tab character</code>ï¼›è€Œåœ¨eclipseä¸­ï¼Œå¿…é¡»å‹¾é€‰<code>insert spaces for tabs</code>ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š ï¼ˆæ¶‰åŠ1-5ç‚¹ï¼‰</p><pre><code>   public static void main(String[] args) {       // ç¼©è¿›4ä¸ªç©ºæ ¼       String say = &quot;hello&quot;;       // è¿ç®—ç¬¦çš„å·¦å³å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼       int flag = 0;       // å…³é”®è¯ifä¸æ‹¬å·ä¹‹é—´å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œæ‹¬å·å†…çš„fä¸å·¦æ‹¬å·ï¼Œ0ä¸å³æ‹¬å·ä¸éœ€è¦ç©ºæ ¼       if (flag == 0) {           System.out.println(say);       }       // å·¦å¤§æ‹¬å·å‰åŠ ç©ºæ ¼ä¸”ä¸æ¢è¡Œï¼›å·¦å¤§æ‹¬å·åæ¢è¡Œ       if (flag == 1) {           System.out.println(&quot;world&quot;);           // å³å¤§æ‹¬å·å‰æ¢è¡Œï¼Œå³å¤§æ‹¬å·åæœ‰elseï¼Œä¸ç”¨æ¢è¡Œ       } else {           System.out.println(&quot;ok&quot;);           // åœ¨å³å¤§æ‹¬å·åç›´æ¥ç»“æŸï¼Œåˆ™å¿…é¡»æ¢è¡Œ       }   }</code></pre></li><li><p>ã€å¼ºåˆ¶ã€‘æ³¨é‡Šçš„åŒæ–œçº¿ä¸æ³¨é‡Šå†…å®¹ä¹‹é—´æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š</p><pre><code>// è¿™æ˜¯ç¤ºä¾‹æ³¨é‡Šï¼Œè¯·æ³¨æ„åœ¨åŒæ–œçº¿ä¹‹åæœ‰ä¸€ä¸ªç©ºæ ¼  String ygb = new String(); </code></pre></li><li><p>ã€å¼ºåˆ¶ã€‘å•è¡Œå­—ç¬¦æ•°é™åˆ¶ä¸è¶…è¿‡120ä¸ªï¼Œè¶…å‡ºéœ€è¦æ¢è¡Œï¼Œæ¢è¡Œæ—¶éµå¾ªå¦‚ä¸‹åŸåˆ™ï¼š<br><br>1ï¼‰ç¬¬äºŒè¡Œç›¸å¯¹ç¬¬ä¸€è¡Œç¼©è¿›4ä¸ªç©ºæ ¼ï¼Œä»ç¬¬ä¸‰è¡Œå¼€å§‹ï¼Œä¸å†ç»§ç»­ç¼©è¿›ï¼Œå‚è€ƒç¤ºä¾‹ã€‚<br><br>2ï¼‰è¿ç®—ç¬¦ä¸ä¸‹æ–‡ä¸€èµ·æ¢è¡Œã€‚<br><br>3ï¼‰æ–¹æ³•è°ƒç”¨çš„ç‚¹ç¬¦å·ä¸ä¸‹æ–‡ä¸€èµ·æ¢è¡Œã€‚<br><br>4ï¼‰ æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå¤šä¸ªå‚æ•°ï¼Œéœ€è¦æ¢è¡Œæ—¶ï¼Œåœ¨é€—å·åè¿›è¡Œã€‚<br><br>5ï¼‰ åœ¨æ‹¬å·å‰ä¸è¦æ¢è¡Œï¼Œè§åä¾‹ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š</p><pre><code>StringBuffer sb = new StringBuffer();  // è¶…è¿‡120ä¸ªå­—ç¬¦çš„æƒ…å†µä¸‹ï¼Œæ¢è¡Œç¼©è¿›4ä¸ªç©ºæ ¼ï¼Œç‚¹å·å’Œæ–¹æ³•åç§°ä¸€èµ·æ¢è¡Œ sb.append(&quot;zi&quot;).append(&quot;xin&quot;)...                .append(&quot;huang&quot;)...                .append(&quot;huang&quot;)...                .append(&quot;huang&quot;);</code></pre><p><br><span style="color:red">åä¾‹</span>ï¼š</p><pre><code>StringBuffer sb = new StringBuffer();  // è¶…è¿‡120ä¸ªå­—ç¬¦çš„æƒ…å†µä¸‹ï¼Œä¸è¦åœ¨æ‹¬å·å‰æ¢è¡Œ  sb.append(&quot;zi&quot;).append(&quot;xin&quot;)...append      (&quot;huang&quot;);    // å‚æ•°å¾ˆå¤šçš„æ–¹æ³•è°ƒç”¨å¯èƒ½è¶…è¿‡120ä¸ªå­—ç¬¦ï¼Œä¸è¦åœ¨é€—å·å‰æ¢è¡Œ  method(args1, args2, args3, ... , argsX); </code></pre></li><li><p>ã€å¼ºåˆ¶ã€‘æ–¹æ³•å‚æ•°åœ¨å®šä¹‰å’Œä¼ å…¥æ—¶ï¼Œå¤šä¸ªå‚æ•°é€—å·åè¾¹å¿…é¡»åŠ ç©ºæ ¼ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šä¸‹ä¾‹ä¸­å®å‚çš„â€aâ€,åè¾¹å¿…é¡»è¦æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚ </p><pre><code>method(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;); </code></pre></li><li><p>ã€å¼ºåˆ¶ã€‘IDEçš„text file encodingè®¾ç½®ä¸ºUTF-8; IDEä¸­æ–‡ä»¶çš„æ¢è¡Œç¬¦ä½¿ç”¨Unixæ ¼å¼ï¼Œä¸è¦ä½¿ç”¨Windowsæ ¼å¼ã€‚ </p></li><li><p>ã€æ¨èã€‘æ²¡æœ‰å¿…è¦å¢åŠ è‹¥å¹²ç©ºæ ¼æ¥ä½¿æŸä¸€è¡Œçš„å­—ç¬¦ä¸ä¸Šä¸€è¡Œå¯¹åº”ä½ç½®çš„å­—ç¬¦å¯¹é½ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š </p><pre><code>int a = 3;  long b = 4L;  float c = 5F;  StringBuffer sb = new StringBuffer();</code></pre><p><span style="color:orange">è¯´æ˜</span>ï¼šå¢åŠ sbè¿™ä¸ªå˜é‡ï¼Œå¦‚æœéœ€è¦å¯¹é½ï¼Œåˆ™ç»™aã€bã€céƒ½è¦å¢åŠ å‡ ä¸ªç©ºæ ¼ï¼Œåœ¨å˜é‡æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œæ˜¯éå¸¸ç´¯èµ˜çš„äº‹æƒ…ã€‚ </p></li><li><p>ã€æ¨èã€‘ä¸åŒé€»è¾‘ã€ä¸åŒè¯­ä¹‰ã€ä¸åŒä¸šåŠ¡çš„ä»£ç ä¹‹é—´æ’å…¥ä¸€ä¸ªç©ºè¡Œåˆ†éš”å¼€æ¥ä»¥æå‡å¯è¯»æ€§ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæ²¡æœ‰å¿…è¦æ’å…¥<strong>å¤šä¸ªç©ºè¡Œ</strong>è¿›è¡Œéš”å¼€ã€‚ </p></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.2-å¸¸é‡å®šä¹‰</title>
      <link href="/alibaba-p3c/12-const-define/"/>
      <url>/alibaba-p3c/12-const-define/</url>
      
        <content type="html"><![CDATA[<ol><li>ã€å¼ºåˆ¶ã€‘ä¸å…è®¸ä»»ä½•é­”æ³•å€¼ï¼ˆå³æœªç»é¢„å…ˆå®šä¹‰çš„å¸¸é‡ï¼‰ç›´æ¥å‡ºç°åœ¨ä»£ç ä¸­ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼š<pre><code>String key = &quot;Id#taobao_&quot; + tradeId;       cache.put(key, value); </code></pre></li><li>ã€å¼ºåˆ¶ã€‘longæˆ–è€…Longåˆå§‹èµ‹å€¼æ—¶ï¼Œä½¿ç”¨å¤§å†™çš„Lï¼Œä¸èƒ½æ˜¯å°å†™çš„lï¼Œå°å†™å®¹æ˜“è·Ÿæ•°å­—1æ··æ·†ï¼Œé€ æˆè¯¯è§£ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼š<pre>Long a = 2l;</pre> å†™çš„æ˜¯æ•°å­—çš„<code>21</code>ï¼Œè¿˜æ˜¯Longå‹çš„<code>2</code>? </li><li>ã€æ¨èã€‘ä¸è¦ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ç±»ç»´æŠ¤æ‰€æœ‰å¸¸é‡ï¼ŒæŒ‰å¸¸é‡åŠŸèƒ½è¿›è¡Œå½’ç±»ï¼Œåˆ†å¼€ç»´æŠ¤ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå¤§è€Œå…¨çš„å¸¸é‡ç±»ï¼Œéå¾—ä½¿ç”¨æŸ¥æ‰¾åŠŸèƒ½æ‰èƒ½å®šä½åˆ°ä¿®æ”¹çš„å¸¸é‡ï¼Œä¸åˆ©äºç†è§£å’Œç»´æŠ¤ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šç¼“å­˜ç›¸å…³å¸¸é‡æ”¾åœ¨ç±»CacheConstsä¸‹ï¼›ç³»ç»Ÿé…ç½®ç›¸å…³å¸¸é‡æ”¾åœ¨ç±»ConfigConstsä¸‹ã€‚ </li><li>ã€æ¨èã€‘å¸¸é‡çš„å¤ç”¨å±‚æ¬¡æœ‰äº”å±‚ï¼šè·¨åº”ç”¨å…±äº«å¸¸é‡ã€åº”ç”¨å†…å…±äº«å¸¸é‡ã€å­å·¥ç¨‹å†…å…±äº«å¸¸é‡ã€åŒ…å†…å…±äº«å¸¸é‡ã€ç±»å†…å…±äº«å¸¸é‡ã€‚<br>1ï¼‰ è·¨åº”ç”¨å…±äº«å¸¸é‡ï¼šæ”¾ç½®åœ¨äºŒæ–¹åº“ä¸­ï¼Œé€šå¸¸æ˜¯client.jarä¸­çš„constantç›®å½•ä¸‹ã€‚<br>2ï¼‰ åº”ç”¨å†…å…±äº«å¸¸é‡ï¼šæ”¾ç½®åœ¨ä¸€æ–¹åº“ä¸­ï¼Œé€šå¸¸æ˜¯å­æ¨¡å—ä¸­çš„constantç›®å½•ä¸‹ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šæ˜“æ‡‚å˜é‡ä¹Ÿè¦ç»Ÿä¸€å®šä¹‰æˆåº”ç”¨å†…å…±äº«å¸¸é‡ï¼Œä¸¤ä½æ”»åŸå¸ˆåœ¨ä¸¤ä¸ªç±»ä¸­åˆ†åˆ«å®šä¹‰äº†è¡¨ç¤ºâ€œæ˜¯â€çš„å˜é‡ï¼š<pre><code> ç±»Aä¸­ï¼špublic static final String YES = &quot;yes&quot;; ç±»Bä¸­ï¼špublic static final String YES = &quot;y&quot;; A.YES.equals(B.YES) é¢„æœŸæ˜¯trueï¼Œä½†å®é™…è¿”å›ä¸ºfalseï¼Œå¯¼è‡´çº¿ä¸Šé—®é¢˜ã€‚</code></pre>3ï¼‰ å­å·¥ç¨‹å†…éƒ¨å…±äº«å¸¸é‡ï¼šå³åœ¨å½“å‰å­å·¥ç¨‹çš„constantç›®å½•ä¸‹ã€‚<br>4ï¼‰ åŒ…å†…å…±äº«å¸¸é‡ï¼šå³åœ¨å½“å‰åŒ…ä¸‹å•ç‹¬çš„constantç›®å½•ä¸‹ã€‚<br>5ï¼‰ ç±»å†…å…±äº«å¸¸é‡ï¼šç›´æ¥åœ¨ç±»å†…éƒ¨private static finalå®šä¹‰ã€‚ </li><li>ã€æ¨èã€‘å¦‚æœå˜é‡å€¼ä»…åœ¨ä¸€ä¸ªå›ºå®šèŒƒå›´å†…å˜åŒ–ç”¨enumç±»å‹æ¥å®šä¹‰ã€‚ è¯´æ˜ï¼šå¦‚æœå­˜åœ¨åç§°ä¹‹å¤–çš„å»¶ä¼¸å±æ€§ä½¿ç”¨enumç±»å‹ï¼Œä¸‹é¢æ­£ä¾‹ä¸­çš„æ•°å­—å°±æ˜¯å»¶ä¼¸ä¿¡æ¯ï¼Œè¡¨ç¤ºä¸€å¹´ä¸­çš„ç¬¬å‡ ä¸ªå­£èŠ‚ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š <pre><code>public enum SeasonEnum {          SPRING(1), SUMMER(2), AUTUMN(3), WINTER(4);       int seq;        SeasonEnum(int seq){                    this.seq = seq;            } } </code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.1-å‘½åé£æ ¼</title>
      <link href="/alibaba-p3c/11-naming-style/"/>
      <url>/alibaba-p3c/11-naming-style/</url>
      
        <content type="html"><![CDATA[<h2 id="ï¼ˆä¸€ï¼‰å‘½åé£æ ¼"><a href="#ï¼ˆä¸€ï¼‰å‘½åé£æ ¼" class="headerlink" title="ï¼ˆä¸€ï¼‰å‘½åé£æ ¼"></a>ï¼ˆä¸€ï¼‰å‘½åé£æ ¼</h2><ol><li>ã€å¼ºåˆ¶ã€‘ä»£ç ä¸­çš„å‘½åå‡ä¸èƒ½ä»¥<strong>ä¸‹åˆ’çº¿æˆ–ç¾å…ƒç¬¦å·</strong>å¼€å§‹ï¼Œä¹Ÿä¸èƒ½ä»¥<strong>ä¸‹åˆ’çº¿æˆ–ç¾å…ƒç¬¦å·</strong>ç»“æŸã€‚<br> <br><span style="color:red">åä¾‹</span>ï¼š<code>_name / __name / $name / name_ / name$ / name__</code></li><li>ã€å¼ºåˆ¶ã€‘ä»£ç ä¸­çš„å‘½åä¸¥ç¦ä½¿ç”¨æ‹¼éŸ³ä¸è‹±æ–‡æ··åˆçš„æ–¹å¼ï¼Œæ›´ä¸å…è®¸ç›´æ¥ä½¿ç”¨ä¸­æ–‡çš„æ–¹å¼ã€‚<br> <br><span style="color:orange">è¯´æ˜</span>ï¼šæ­£ç¡®çš„è‹±æ–‡æ‹¼å†™å’Œè¯­æ³•å¯ä»¥è®©é˜…è¯»è€…æ˜“äºç†è§£ï¼Œé¿å…æ­§ä¹‰ã€‚æ³¨æ„ï¼Œå³ä½¿çº¯æ‹¼éŸ³å‘½åæ–¹å¼ä¹Ÿè¦é¿å…é‡‡ç”¨ã€‚<br> <br><span style="color:green">æ­£ä¾‹</span>ï¼šalibaba / taobao / youku / hangzhou ç­‰å›½é™…é€šç”¨çš„åç§°ï¼Œå¯è§†åŒè‹±æ–‡ã€‚<br> <br><span style="color:red">åä¾‹</span>ï¼šDaZhePromotion [æ‰“æŠ˜] / getPingfenByName() [è¯„åˆ†] / int æŸå˜é‡ = 3 </li><li>ã€å¼ºåˆ¶ã€‘ç±»åä½¿ç”¨<code>UpperCamelCase</code>é£æ ¼ï¼Œä½†ä»¥ä¸‹æƒ…å½¢ä¾‹å¤–ï¼šDO / BO / DTO / VO / AO / POç­‰ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šMarcoPolo / UserDO / XmlService / TcpUdpDeal / TaPromotion<br><br><span style="color:red">åä¾‹</span>ï¼šmacroPolo / UserDo / XMLService / TCPUDPDeal / TAPromotion </li><li>ã€å¼ºåˆ¶ã€‘æ–¹æ³•åã€å‚æ•°åã€æˆå‘˜å˜é‡ã€å±€éƒ¨å˜é‡éƒ½ç»Ÿä¸€ä½¿ç”¨<code>lowerCamelCase</code>é£æ ¼ï¼Œå¿…é¡»éµä»é©¼å³°å½¢å¼ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š localValue / getHttpMessage() / inputUserId </li><li>ã€å¼ºåˆ¶ã€‘å¸¸é‡å‘½åå…¨éƒ¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€ï¼ŒåŠ›æ±‚è¯­ä¹‰è¡¨è¾¾å®Œæ•´æ¸…æ¥šï¼Œä¸è¦å«Œåå­—é•¿ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šMAX_STOCK_COUNT<br><br><span style="color:red">åä¾‹</span>ï¼šMAX_COUNT </li><li>ã€å¼ºåˆ¶ã€‘æŠ½è±¡ç±»å‘½åä½¿ç”¨Abstractæˆ–Baseå¼€å¤´ï¼›å¼‚å¸¸ç±»å‘½åä½¿ç”¨Exceptionç»“å°¾ï¼›æµ‹è¯•ç±»å‘½åä»¥å®ƒè¦æµ‹è¯•çš„ç±»åå¼€å§‹ï¼Œä»¥Testç»“å°¾ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘ç±»å‹ä¸ä¸­æ‹¬å·ç´§æŒ¨ç›¸è¿æ¥å®šä¹‰æ•°ç»„ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šå®šä¹‰æ•´å½¢æ•°ç»„<code>int[] arrayDemo;</code><br><br><span style="color:red">åä¾‹</span>ï¼šåœ¨mainå‚æ•°ä¸­ï¼Œä½¿ç”¨<code>String args[]</code>æ¥å®šä¹‰ã€‚ </li><li>ã€å¼ºåˆ¶ã€‘POJOç±»ä¸­å¸ƒå°”ç±»å‹çš„å˜é‡ï¼Œéƒ½ä¸è¦åŠ iså‰ç¼€ï¼Œå¦åˆ™éƒ¨åˆ†æ¡†æ¶è§£æä¼šå¼•èµ·åºåˆ—åŒ–é”™è¯¯ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šå®šä¹‰ä¸ºåŸºæœ¬æ•°æ®ç±»å‹<code>Boolean isDeletedï¼›</code>çš„å±æ€§ï¼Œå®ƒçš„æ–¹æ³•ä¹Ÿæ˜¯<code>isDeleted()</code>ï¼ŒRPCæ¡†æ¶åœ¨åå‘è§£æçš„æ—¶å€™ï¼Œâ€œè¯¯ä»¥ä¸ºâ€å¯¹åº”çš„å±æ€§åç§°æ˜¯deletedï¼Œå¯¼è‡´å±æ€§è·å–ä¸åˆ°ï¼Œè¿›è€ŒæŠ›å‡ºå¼‚å¸¸ã€‚</li><li>ã€å¼ºåˆ¶ã€‘åŒ…åç»Ÿä¸€ä½¿ç”¨å°å†™ï¼Œç‚¹åˆ†éš”ç¬¦ä¹‹é—´æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè‡ªç„¶è¯­ä¹‰çš„è‹±è¯­å•è¯ã€‚åŒ…åç»Ÿä¸€ä½¿ç”¨å•æ•°å½¢å¼ï¼Œä½†æ˜¯ç±»åå¦‚æœæœ‰å¤æ•°å«ä¹‰ï¼Œç±»åå¯ä»¥ä½¿ç”¨å¤æ•°å½¢å¼ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šåº”ç”¨å·¥å…·ç±»åŒ…åä¸ºcom.alibaba.ai.utilã€ç±»åä¸ºMessageUtilsï¼ˆæ­¤è§„åˆ™å‚è€ƒspringçš„æ¡†æ¶ç»“æ„ï¼‰ </li><li>ã€å¼ºåˆ¶ã€‘æœç»å®Œå…¨ä¸è§„èŒƒçš„ç¼©å†™ï¼Œé¿å…æœ›æ–‡ä¸çŸ¥ä¹‰ã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šAbstractClassâ€œç¼©å†™â€å‘½åæˆAbsClassï¼›conditionâ€œç¼©å†™â€å‘½åæˆ condiï¼Œæ­¤ç±»éšæ„ç¼©å†™ä¸¥é‡é™ä½äº†ä»£ç çš„å¯é˜…è¯»æ€§ã€‚ </li><li>ã€æ¨èã€‘ä¸ºäº†è¾¾åˆ°ä»£ç è‡ªè§£é‡Šçš„ç›®æ ‡ï¼Œä»»ä½•è‡ªå®šä¹‰ç¼–ç¨‹å…ƒç´ åœ¨å‘½åæ—¶ï¼Œä½¿ç”¨å°½é‡å®Œæ•´çš„å•è¯ç»„åˆæ¥è¡¨è¾¾å…¶æ„ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šä»è¿œç¨‹ä»“åº“æ‹‰å–ä»£ç çš„ç±»å‘½åä¸ºPullCodeFromRemoteRepositoryã€‚<br><br><span style="color:red">åä¾‹</span>ï¼šå˜é‡int a; çš„éšæ„å‘½åæ–¹å¼ã€‚ </li><li>ã€æ¨èã€‘å¦‚æœæ¨¡å—ã€æ¥å£ã€ç±»ã€æ–¹æ³•ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ï¼Œåœ¨å‘½åæ—¶ä½“ç°å‡ºå…·ä½“æ¨¡å¼ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šå°†è®¾è®¡æ¨¡å¼ä½“ç°åœ¨åå­—ä¸­ï¼Œæœ‰åˆ©äºé˜…è¯»è€…å¿«é€Ÿç†è§£æ¶æ„è®¾è®¡ç†å¿µã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼š<pre><code>public class OrderFactory;public class LoginProxy;public class ResourceObserver; </code></pre></li><li>ã€æ¨èã€‘æ¥å£ç±»ä¸­çš„æ–¹æ³•å’Œå±æ€§ä¸è¦åŠ ä»»ä½•ä¿®é¥°ç¬¦å·ï¼ˆpublic ä¹Ÿä¸è¦åŠ ï¼‰ï¼Œä¿æŒä»£ç çš„ç®€æ´æ€§ï¼Œå¹¶åŠ ä¸Šæœ‰æ•ˆçš„Javadocæ³¨é‡Šã€‚å°½é‡ä¸è¦åœ¨æ¥å£é‡Œå®šä¹‰å˜é‡ï¼Œå¦‚æœä¸€å®šè¦å®šä¹‰å˜é‡ï¼Œè‚¯å®šæ˜¯ä¸æ¥å£æ–¹æ³•ç›¸å…³ï¼Œå¹¶ä¸”æ˜¯æ•´ä¸ªåº”ç”¨çš„åŸºç¡€å¸¸é‡ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šæ¥å£æ–¹æ³•ç­¾åvoid f(); æ¥å£åŸºç¡€å¸¸é‡String COMPANY = â€œalibabaâ€;<br><br><span style="color:red">åä¾‹</span>ï¼šæ¥å£æ–¹æ³•å®šä¹‰public abstract void f();<br><br><span style="color:orange">è¯´æ˜</span>ï¼šJDK8ä¸­æ¥å£å…è®¸æœ‰é»˜è®¤å®ç°ï¼Œé‚£ä¹ˆè¿™ä¸ªdefaultæ–¹æ³•ï¼Œæ˜¯å¯¹æ‰€æœ‰å®ç°ç±»éƒ½æœ‰ä»·å€¼çš„é»˜è®¤å®ç°ã€‚ </li><li>æ¥å£å’Œå®ç°ç±»çš„å‘½åæœ‰ä¸¤å¥—è§„åˆ™ï¼š<br>  1ï¼‰ã€å¼ºåˆ¶ã€‘å¯¹äºServiceå’ŒDAOç±»ï¼ŒåŸºäºSOAçš„ç†å¿µï¼Œæš´éœ²å‡ºæ¥çš„æœåŠ¡ä¸€å®šæ˜¯æ¥å£ï¼Œå†…éƒ¨çš„å®ç°ç±»ç”¨Implçš„åç¼€ä¸æ¥å£åŒºåˆ«ã€‚<br>  <br><span style="color:green">æ­£ä¾‹</span>ï¼šCacheServiceImplå®ç°CacheServiceæ¥å£ã€‚<br><br>  2ï¼‰ ã€æ¨èã€‘ å¦‚æœæ˜¯å½¢å®¹èƒ½åŠ›çš„æ¥å£åç§°ï¼Œå–å¯¹åº”çš„å½¢å®¹è¯ä¸ºæ¥å£åï¼ˆé€šå¸¸æ˜¯â€“ableçš„å½¢å¼ï¼‰ã€‚<br>  <br><span style="color:green">æ­£ä¾‹</span>ï¼šAbstractTranslatorå®ç° Translatableã€‚ </li><li>ã€å‚è€ƒã€‘æšä¸¾ç±»åå»ºè®®å¸¦ä¸ŠEnumåç¼€ï¼Œæšä¸¾æˆå‘˜åç§°éœ€è¦å…¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€ã€‚<br><br><span style="color:orange">è¯´æ˜</span>ï¼šæšä¸¾å…¶å®å°±æ˜¯ç‰¹æ®Šçš„å¸¸é‡ç±»ï¼Œä¸”æ„é€ æ–¹æ³•è¢«é»˜è®¤å¼ºåˆ¶æ˜¯ç§æœ‰ã€‚<br><br><span style="color:green">æ­£ä¾‹</span>ï¼šæšä¸¾åå­—ä¸ºProcessStatusEnumçš„æˆå‘˜åç§°ï¼šSUCCESS / UNKNOWN_REASONã€‚ </li><li>ã€å‚è€ƒã€‘å„å±‚å‘½åè§„çº¦ï¼š<br>A) Service/DAOå±‚æ–¹æ³•å‘½åè§„çº¦<br><br>  1ï¼‰ è·å–å•ä¸ªå¯¹è±¡çš„æ–¹æ³•ç”¨getä½œå‰ç¼€ã€‚<br>  <br>2ï¼‰ è·å–å¤šä¸ªå¯¹è±¡çš„æ–¹æ³•ç”¨listä½œå‰ç¼€ã€‚<br>  <br>3ï¼‰ è·å–ç»Ÿè®¡å€¼çš„æ–¹æ³•ç”¨countä½œå‰ç¼€ã€‚<br>  4ï¼‰ æ’å…¥çš„æ–¹æ³•ç”¨save/insertä½œå‰ç¼€ã€‚<br>  5ï¼‰ åˆ é™¤çš„æ–¹æ³•ç”¨remove/deleteä½œå‰ç¼€ã€‚<br>  6ï¼‰ ä¿®æ”¹çš„æ–¹æ³•ç”¨updateä½œå‰ç¼€ã€‚<br><br>B) é¢†åŸŸæ¨¡å‹å‘½åè§„çº¦ <br><br>  1ï¼‰ æ•°æ®å¯¹è±¡ï¼šxxxDOï¼Œxxxå³ä¸ºæ•°æ®è¡¨åã€‚<br>  2ï¼‰ æ•°æ®ä¼ è¾“å¯¹è±¡ï¼šxxxDTOï¼Œxxxä¸ºä¸šåŠ¡é¢†åŸŸç›¸å…³çš„åç§°ã€‚<br>  3ï¼‰ å±•ç¤ºå¯¹è±¡ï¼šxxxVOï¼Œxxxä¸€èˆ¬ä¸ºç½‘é¡µåç§°ã€‚<br>  4ï¼‰ POJOæ˜¯DO/DTO/BO/VOçš„ç»Ÿç§°ï¼Œç¦æ­¢å‘½åæˆxxxPOJOã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>112-æ¨¡å¼çš„ç§˜å¯†---å•ä¾‹æ¨¡å¼</title>
      <link href="/imooc/112-singleton-mode/"/>
      <url>/imooc/112-singleton-mode/</url>
      
        <content type="html"><![CDATA[<p>ç³»åˆ—è¯¾ç¨‹ï¼š<a href="https://www.tuyrk.cn/imooc/18-java-mode/">æ¨¡å¼å®—å¸ˆå…»æˆå®å…¸ä¹‹Javaç‰ˆ</a></p><blockquote><p><a href="http://www.imooc.com/learn/112" target="_blank" rel="noopener">http://www.imooc.com/learn/112</a></p><p>ç®€ä»‹ï¼šè®¾è®¡æ¨¡å¼æ˜¯å‰è¾ˆä»¬åœ¨å¤šå¹´å¼€å‘å·¥ä½œä¸­ç»éªŒçš„æ€»ç»“ï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€å¯é æ€§å’Œè§„èŒƒæ€§ï¼Œè®©ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œè€Œå•ä¾‹æ¨¡å¼æ˜¯åœ¨Javaä¸­æœ€é‡è¦ã€æœ€ç®€å•ã€æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥æ­å¼€å®ƒçš„ç¥ç§˜é¢çº±å§ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -å•ä¾‹æ¨¡å¼ç®€ä»‹"><a href="#ç¬¬1ç« -å•ä¾‹æ¨¡å¼ç®€ä»‹" class="headerlink" title="ç¬¬1ç«  å•ä¾‹æ¨¡å¼ç®€ä»‹"></a>ç¬¬1ç«  å•ä¾‹æ¨¡å¼ç®€ä»‹</h2><blockquote><p>æœ¬ç« èŠ‚è®©æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ è®¾è®¡æ¨¡å¼å’Œå•ä¾‹æ¨¡å¼çš„ç›¸å…³æ¦‚å¿µã€ä½œç”¨åŠåˆ†ç±»</p></blockquote><h3 id="1-1-å•ä¾‹æ¨¡å¼ç®€ä»‹-03-43"><a href="#1-1-å•ä¾‹æ¨¡å¼ç®€ä»‹-03-43" class="headerlink" title="1-1 å•ä¾‹æ¨¡å¼ç®€ä»‹ (03:43)"></a>1-1 å•ä¾‹æ¨¡å¼ç®€ä»‹ (03:43)</h3><p>å•ä¾‹æ¨¡å¼</p><blockquote><ul><li>æ¦‚å¿µåŠåº”ç”¨åœºæ™¯</li><li>é¥¿æ±‰æ¨¡å¼</li><li>æ‡’æ±‰æ¨¡å¼</li><li>é¥¿æ±‰æ¨¡å¼å’Œæ‡’æ±‰æ¨¡å¼çš„åŒºåˆ«</li></ul></blockquote><p>ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼ˆDesign Patternï¼‰</p><blockquote><p>æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€<br>ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“</p></blockquote><p>ç›®çš„</p><blockquote><p>ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€<br>è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§</p></blockquote><p>è®¾è®¡æ¨¡å¼ï¼ˆ23ç§ï¼‰ï¼šå•ä¾‹æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€åŸå‹æ¨¡å¼</p><p>å•ä¾‹è®¾è®¡æ¨¡å¼</p><blockquote><p>æœ‰äº›å¯¹è±¡æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªã€‚æ¯”å¦‚ï¼šé…ç½®æ–‡ä»¶ã€å·¥å…·ç±»ã€çº¿ç¨‹æ± ã€ç¼“å­˜ã€æ—¥å¿—å¯¹è±¡ç­‰<br>å¦‚æœåˆ›é€ å‡ºå¤šä¸ªå®ä¾‹ï¼Œå°±ä¼šå¯¼è‡´è®¸å¤šé—®é¢˜ï¼Œæ¯”å¦‚å ç”¨è¿‡å¤šèµ„æºï¼Œä¸ä¸€è‡´çš„ç»“æœç­‰ã€‚<br>å•ä¾‹æ¨¡å¼ä¿è¯æ•´ä¸ªåº”ç”¨ä¸­æŸä¸ªå®ä¾‹æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª</p></blockquote><h2 id="ç¬¬2ç« -å•ä¾‹æ¨¡å¼çš„å®ç°"><a href="#ç¬¬2ç« -å•ä¾‹æ¨¡å¼çš„å®ç°" class="headerlink" title="ç¬¬2ç«  å•ä¾‹æ¨¡å¼çš„å®ç°"></a>ç¬¬2ç«  å•ä¾‹æ¨¡å¼çš„å®ç°</h2><blockquote><p>æœ¬ç« èŠ‚ä¸»è¦è®²è§£å•ä¾‹æ¨¡å¼ä¸­çš„é¥¿æ±‰æ¨¡å¼å’Œæ‡’æ±‰æ¨¡å¼çš„å®ç°</p></blockquote><ul><li>æ‡’æ±‰æ¨¡å¼</li><li>é¥¿æ±‰æ¨¡å¼</li></ul><h3 id="2-1-å•ä¾‹æ¨¡å¼çš„é¥¿æ±‰å¼å®ç°-10-18"><a href="#2-1-å•ä¾‹æ¨¡å¼çš„é¥¿æ±‰å¼å®ç°-10-18" class="headerlink" title="2-1 å•ä¾‹æ¨¡å¼çš„é¥¿æ±‰å¼å®ç° (10:18)"></a>2-1 å•ä¾‹æ¨¡å¼çš„é¥¿æ±‰å¼å®ç° (10:18)</h3><ol><li><p>Singletonç±»ç¼–å†™</p><pre><code class="java">public class Singleton {    // 1. å°†æ„é€ æ–¹æ³•ç§æœ‰åŒ–ï¼Œä¸å…è®¸å¤–éƒ¨ç›´æ¥åˆ›å»ºå¯¹è±¡ã€‚    private Singleton() {    }    // 2. åˆ›å»ºç±»çš„å”¯ä¸€å®ä¾‹ï¼Œä½¿ç”¨private staticä¿®é¥°    // æ­¤å¤„ä»£ç åœ¨ä½•æ—¶åŠ è½½ï¼Ÿ    private static Singleton instance = new Singleton();    // 3. æä¾›ä¸€ä¸ªç”¨äºè·å–å®ä¾‹çš„æ–¹æ³•ï¼Œä½¿ç”¨public staticä¿®é¥°    public static Singleton getInstance() {        return instance;    }}</code></pre></li><li><p>SingletonTestæµ‹è¯•ç±»ç¼–å†™</p><pre><code class="java">public class SingletonTest {    public static void main(String[] args) {        Singleton s1 = Singleton.getInstance();        Singleton s2 = Singleton.getInstance();        System.out.println(s1 == s2);// true    }}</code></pre></li></ol><p>æ€è€ƒæ­¤ä»£ç åœ¨ä½•æ—¶åŠ è½½ï¼Ÿ</p><pre><code class="java">private static Singleton instance = new Singleton();</code></pre><ul><li>å½“ç±»è¢«åŠ è½½çš„æ—¶å€™åŠ è½½ï¼Œä¸è®ºå…¶ä»–ç¨‹åºæ˜¯å¦è°ƒç”¨ã€‚è¢«ç§°ä¸ºé¥¿æ±‰æ¨¡å¼</li></ul><h3 id="2-2-å•ä¾‹æ¨¡å¼çš„æ‡’æ±‰å¼å®ç°-04-23"><a href="#2-2-å•ä¾‹æ¨¡å¼çš„æ‡’æ±‰å¼å®ç°-04-23" class="headerlink" title="2-2 å•ä¾‹æ¨¡å¼çš„æ‡’æ±‰å¼å®ç° (04:23)"></a>2-2 å•ä¾‹æ¨¡å¼çš„æ‡’æ±‰å¼å®ç° (04:23)</h3><ol><li><p>Singleton2ç±»ç¼–å†™</p><pre><code class="java">public class Singleton2 {    // 1. å°†æ„é€ æ–¹æ³•ç§æœ‰åŒ–ï¼Œä¸å…è®¸å¤–éƒ¨ç›´æ¥åˆ›å»ºå¯¹è±¡    private Singleton2() {    }    // 2. å£°æ˜ç±»çš„å”¯ä¸€å®ä¾‹ï¼Œä½¿ç”¨private staticä¿®é¥°    private static Singleton2 instance;    // 3. æä¾›ä¸€ä¸ªç”¨äºè·å–å®ä¾‹çš„æ–¹æ³•ï¼Œä½¿ç”¨public staticä¿®é¥°    public static Singleton2 getInstance() {        if (instance == null) {            instance = new Singleton2();        }        return instance;    }}</code></pre></li><li><p>SingletonTestæµ‹è¯•ç±»ç¼–å†™</p><pre><code class="java">public class SingletonTest {    public static void main(String[] args) {        Singleton2 s3 = Singleton2.getInstance();        Singleton2 s4 = Singleton2.getInstance();        System.out.println(s3 == s4);// true    }}</code></pre></li></ol><h2 id="ç¬¬3ç« -â€œé¥¿æ±‰æ¨¡å¼â€å’Œâ€œæ‡’æ±‰æ¨¡å¼â€çš„åŒºåˆ«"><a href="#ç¬¬3ç« -â€œé¥¿æ±‰æ¨¡å¼â€å’Œâ€œæ‡’æ±‰æ¨¡å¼â€çš„åŒºåˆ«" class="headerlink" title="ç¬¬3ç«  â€œé¥¿æ±‰æ¨¡å¼â€å’Œâ€œæ‡’æ±‰æ¨¡å¼â€çš„åŒºåˆ«"></a>ç¬¬3ç«  â€œé¥¿æ±‰æ¨¡å¼â€å’Œâ€œæ‡’æ±‰æ¨¡å¼â€çš„åŒºåˆ«</h2><blockquote><p>ç†è§£é¥¿æ±‰æ¨¡å¼å’Œæ‡’æ±‰æ¨¡å¼çš„åŒºåˆ«ï¼Œæ´»å­¦æ´»ç”¨</p></blockquote><h3 id="3-1-â€œé¥¿æ±‰å¼â€-pk-â€œæ‡’æ±‰å¼â€-01-52"><a href="#3-1-â€œé¥¿æ±‰å¼â€-pk-â€œæ‡’æ±‰å¼â€-01-52" class="headerlink" title="3-1 â€œé¥¿æ±‰å¼â€ pk â€œæ‡’æ±‰å¼â€ (01:52)"></a>3-1 â€œé¥¿æ±‰å¼â€ pk â€œæ‡’æ±‰å¼â€ (01:52)</h3><p>åŒºåˆ«ï¼š</p><ol><li>é¥¿æ±‰æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯åŠ è½½ç±»æ—¶æ¯”è¾ƒæ…¢ï¼Œä½†è¿è¡Œæ—¶è·å–å¯¹è±¡çš„é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œçº¿ç¨‹å®‰å…¨</li><li>æ‡’æ±‰æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯åŠ è½½ç±»æ—¶æ¯”è¾ƒå¿«ï¼Œä½†è¿è¡Œæ—¶è·å–å¯¹è±¡çš„é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œçº¿ç¨‹ä¸å®‰å…¨</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>139-è¯¾ç¨‹ç»“æŸï¼Œå†…å®¹å›é¡¾ï¼Œä¸‹å­£å†…å®¹é¢„å‘Š</title>
      <link href="/wang-thread/139-summary/"/>
      <url>/wang-thread/139-summary/</url>
      
        <content type="html"><![CDATA[<p>Synchronizedå…³é”®å­—å¹¶ä¸ä¼šæ¯”å…¶ä»–æ˜¾å¼é”æ€§èƒ½å·®ã€‚ï¼ˆåº•å±‚å·²ç»è¿‡ä¼˜åŒ–ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>138-ç»™çº¿ç¨‹æ± å¢åŠ è‡ªåŠ¨æ‰©å……çº¿ç¨‹æ•°é‡ï¼Œä»¥åŠé—²æ—¶è‡ªåŠ¨å›æ”¶çš„åŠŸèƒ½</title>
      <link href="/wang-thread/138-thread-pool-expan/"/>
      <url>/wang-thread/138-thread-pool-expan/</url>
      
        <content type="html"><![CDATA[<pre><code class="java">public class SimpleThreadPool extends Thread {    // æœ€å°çº¿ç¨‹æ•°é‡    private int min;    // æ´»è·ƒçº¿ç¨‹æ•°é‡    private int active;    // æœ€å¤§çº¿ç¨‹æ•°é‡    private int max;    // ä¼ å‚çº¿ç¨‹æ± å¤§å°(å½“å‰çº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„æ•°é‡)    private int size;    // çº¿ç¨‹é˜Ÿåˆ—çš„å¤§å°    private final int queueSize;    // æ‹’ç»ç­–ç•¥    private final DiscardPolicy discardPolicy;    // çº¿ç¨‹æ± æ˜¯å¦è¢«é”€æ¯    private volatile boolean destroy = false;    // é»˜è®¤çº¿ç¨‹é˜Ÿåˆ—çš„å¤§å°    private static final int DEFAULT_TASK_QUEUE_SIZE = 2000;    // é»˜è®¤æ‹’ç»ç­–ç•¥-æŠ›å‡ºå¼‚å¸¸    public static final DiscardPolicy DEFAULT_DISCARD_POLICY = () -&gt; {        throw new DiscardException(&quot;Discard This Task.&quot;);    };    // çº¿ç¨‹åè‡ªå¢åºå·    private static AtomicInteger sequence = new AtomicInteger();    // çº¿ç¨‹åå‰ç¼€    private static final String THREAD_PREFIX = &quot;SIMPLE_THREAD_POOL-&quot;;    // çº¿ç¨‹ç»„    private static final ThreadGroup GROUP = new ThreadGroup(&quot;Pool_Group&quot;);    // ä»»åŠ¡é˜Ÿåˆ—    private static final LinkedList&lt;Runnable&gt; TASK_QUEUE = new LinkedList&lt;&gt;();    // çº¿ç¨‹é˜Ÿåˆ—    private static final List&lt;WorkerTask&gt; THREAD_QUEUE = new ArrayList&lt;&gt;();    public SimpleThreadPool() {        this(4, 8, 12, DEFAULT_TASK_QUEUE_SIZE, DEFAULT_DISCARD_POLICY);    }    /**     * æ„é€ æ–¹æ³•     * @param min           æœ€å°çº¿ç¨‹æ•°é‡     * @param active        æ´»è·ƒçº¿ç¨‹æ•°é‡     * @param max           æœ€å¤§çº¿ç¨‹æ•°é‡     * @param queueSize     çº¿ç¨‹é˜Ÿåˆ—çš„å¤§å°     * @param discardPolicy æ‹’ç»ç­–ç•¥     */    public SimpleThreadPool(int min, int active, int max, int queueSize, DiscardPolicy discardPolicy) {        this.min = min;        this.active = active;        this.max = max;        this.queueSize = queueSize;        this.discardPolicy = discardPolicy;        init();    }    @Override    public void run() {        while (!destroy) {            System.out.printf(&quot;Pool#Min:%d,Active:%d,Max:%d,Current:%d,QueueSize:%d\n&quot;,                    this.min, this.active, this.max, this.size, TASK_QUEUE.size());            try {                Thread.sleep(5_000L);                // ä»»åŠ¡é˜Ÿåˆ—æ•°é‡è¿‡å¤§ï¼Œçº¿ç¨‹é˜Ÿåˆ—çš„æ•°é‡æ‰©å……åˆ°active                if (size &lt; active &amp;&amp; active &lt; TASK_QUEUE.size()) {                    IntStream.range(size, active).forEach(i -&gt; createWorkTask());                    size = active;                    System.out.println(&quot;The Pool incremented to active.&quot;);                }                // ä»»åŠ¡é˜Ÿåˆ—æ•°é‡è¿‡å¤§ï¼Œçº¿ç¨‹é˜Ÿåˆ—çš„æ•°é‡æ‰©å……åˆ°max                else if (size &lt; max &amp;&amp; max &lt; TASK_QUEUE.size()) {                    IntStream.range(active, max).forEach(i -&gt; createWorkTask());                    size = max;                    System.out.println(&quot;The Pool incremented to max.&quot;);                }                // é˜²æ­¢æ–°æ’å…¥ä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡ä½¿ç”¨çº¿ç¨‹é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚                synchronized (THREAD_QUEUE) {                    // ä»»åŠ¡é˜Ÿåˆ—æ•°é‡ä¸ºç©ºï¼Œçº¿ç¨‹é˜Ÿåˆ—çš„æ•°é‡å‡å°‘åˆ°active                    if (size &gt; active &amp;&amp; TASK_QUEUE.isEmpty()) {                        System.out.println(&quot;=========Reduce=========&quot;);                        int releaseSize = size - active;                        for (Iterator&lt;WorkerTask&gt; it = THREAD_QUEUE.iterator(); it.hasNext(); ) {                            if (releaseSize &lt;= 0) {                                break;                            }                            WorkerTask task = it.next();                            task.interrupt();                            task.close();                            it.remove();                            releaseSize--;                        }                        size = active;                    }                }            } catch (InterruptedException e) {                e.printStackTrace();            }        }    }    private void init() {        IntStream.range(0, this.min).forEach(i -&gt; createWorkTask());        this.size = this.min;        this.start();    }    private void createWorkTask() {        WorkerTask task = new WorkerTask(GROUP, THREAD_PREFIX + (sequence.getAndIncrement()));        task.start();        THREAD_QUEUE.add(task);    }    // æäº¤ä»»åŠ¡    public void submit(Runnable runnable) {        // å¦‚æœçº¿ç¨‹æ± è¢«é”€æ¯ï¼Œä¸èƒ½æ·»åŠ ä»»åŠ¡åˆ°ä»»åŠ¡é˜Ÿåˆ—        if (destroy) {            throw new IllegalThreadStateException(&quot;The thread pool already destroy and not allow submit task.&quot;);        }        synchronized (TASK_QUEUE) {            // ä»»åŠ¡é˜Ÿåˆ—æ•°é‡è¶…è¿‡é˜ˆå€¼ï¼Œåˆ™æ‰§è¡Œæ‹’ç»ç­–ç•¥            if (TASK_QUEUE.size() &gt; queueSize) {                discardPolicy.discard();            }            TASK_QUEUE.addLast(runnable);            TASK_QUEUE.notifyAll();        }    }    // å…³é—­çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹    public void shutdown() throws InterruptedException {        // å½“ä»»åŠ¡é˜Ÿåˆ—è¿˜æœ‰ä»»åŠ¡ï¼Œåˆ™ç¨å¾®ç­‰å¾…ã€‚        while (!TASK_QUEUE.isEmpty()) {            Thread.sleep(50);        }        // åˆ¤æ–­çº¿ç¨‹ä¸­æœ‰æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡        synchronized (THREAD_QUEUE) {            int initVal = THREAD_QUEUE.size();            while (initVal &gt; 0) {                for (WorkerTask task : THREAD_QUEUE) {                    if (task.getTaskState() == TaskState.BLOCKED) {                        task.interrupt();                        task.close();                        initVal--;                    } else {                        Thread.sleep(10);                    }                }            }        }        System.out.println(&quot;Group active count is &quot; + GROUP.activeCount());        this.destroy = true;        System.out.println(&quot;The thread pool disposed.&quot;);    }    // å°è£…ä»»åŠ¡ç±»    private static class WorkerTask extends Thread {        private volatile TaskState taskState = TaskState.FREE;        public TaskState getTaskState() {            return this.taskState;        }        public WorkerTask(ThreadGroup group, String name) {            super(group, name);        }        @Override        public void run() {            OUTER:            while (this.taskState != TaskState.DEAD) {                Runnable runnable;                synchronized (TASK_QUEUE) {                    // ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿›å…¥é˜»å¡çŠ¶æ€                    while (TASK_QUEUE.isEmpty()) {                        try {                            this.taskState = TaskState.BLOCKED;                            TASK_QUEUE.wait();                        } catch (InterruptedException e) {                            System.out.println(&quot;Closed.&quot;);                            break OUTER;                        }                    }                    // ä»»åŠ¡é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œå–å‡ºä»»åŠ¡                    runnable = TASK_QUEUE.removeFirst();                }                // ä»»åŠ¡ä¸ä¸ºç©ºï¼Œåˆ™æ‰§è¡Œä»»åŠ¡                if (runnable != null) {                    this.taskState = TaskState.RUNNING;                    runnable.run();                    this.taskState = TaskState.FREE;                }            }        }        public void close() {            this.taskState = TaskState.DEAD;        }    }    // çº¿ç¨‹çŠ¶æ€    private enum TaskState {        FREE, RUNNING, BLOCKED, DEAD    }    // æ‹’ç»ç­–ç•¥    public interface DiscardPolicy {        void discard() throws DiscardException;    }    // æ‹’ç»ç­–ç•¥å¼‚å¸¸    public static class DiscardException extends RuntimeException {        public DiscardException(String message) {            super(message);        }    }}</code></pre><pre><code class="java">public static void main(String[] args) throws InterruptedException {    SimpleThreadPool threadPool = new SimpleThreadPool();    IntStream.rangeClosed(1, 40).forEach(i -&gt; {        threadPool.submit(() -&gt; {            System.out.printf(&quot;The runnable %d be serviced by %s start.\n&quot;, i, Thread.currentThread().getName());            Thread.sleep(3_000L);            System.out.printf(&quot;The runnable %d be serviced by %s finished.\n&quot;, i, Thread.currentThread().getName());        });    });    Thread.sleep(30_000L);    threadPool.shutdown();// å…³é—­çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹}</code></pre><p>å‡çº§æ”¹é€ ï¼š</p><ul><li><p>æ‰¹æ¬¡å¤„ç†ä»»åŠ¡</p></li><li><p>å¤„ç†å®Œæˆåç«‹å³è¿”å›ç»“æœ</p></li><li><p>ç«‹å³shutdownï¼Œå¹¶è¿”å›æœªæ‰§è¡Œå®Œæˆçš„<code>List&lt;Runnable&gt;</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>137-ç»™çº¿ç¨‹æ± å¢åŠ æ‹’ç»ç­–ç•¥ä»¥åŠåœæ­¢æ–¹æ³•</title>
      <link href="/wang-thread/137-thread-pool-discard/"/>
      <url>/wang-thread/137-thread-pool-discard/</url>
      
        <content type="html"><![CDATA[<p>æ‹’ç»ç­–ç•¥ï¼šçº¿ç¨‹æ± ä¸èƒ½æ— é™çš„æäº¤ä»»åŠ¡ï¼Œå½“çº¿ç¨‹å¤„ç†ä¸è¿‡æ¥æ—¶ï¼Œä»»åŠ¡å°±ä¼šç§¯å‹åˆ°ä»»åŠ¡é˜Ÿåˆ—ã€‚å½“ä»»åŠ¡æ•°é‡è¾¾åˆ°é˜ˆå€¼æ—¶å°±ä¼šæ‰§è¡Œä¸€äº›æ“ä½œæ‹’ç»å†æ¬¡åŠ å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ã€‚</p><pre><code class="java">public class SimpleThreadPool {    // ä¼ å‚çº¿ç¨‹æ± å¤§å°    private final int size;    // çº¿ç¨‹é˜Ÿåˆ—çš„å¤§å°    private final int queueSize;    // æ‹’ç»ç­–ç•¥    private final DiscardPolicy discardPolicy;    // çº¿ç¨‹æ± æ˜¯å¦è¢«é”€æ¯    private volatile boolean destory = false;    // é»˜è®¤çº¿ç¨‹æ± å¤§å°    private static final int DEFAULT_SIZE = 10;    // é»˜è®¤çº¿ç¨‹é˜Ÿåˆ—çš„å¤§å°    private static final int DEFAULT_TASK_QUEUE_SIZE = 2000;    // é»˜è®¤æ‹’ç»ç­–ç•¥-æŠ›å‡ºå¼‚å¸¸    public static final DiscardPolicy DEFAULT_DISCARD_POLICY = () -&gt; {        throw new DiscardException(&quot;&quot;);    };    // çº¿ç¨‹åè‡ªå¢åºå·    private static AtomicInteger sequence = new AtomicInteger();    // çº¿ç¨‹åå‰ç¼€    private static final String THREAD_PREFIX = &quot;SIMPLE_THREAD_POOL-&quot;;    // çº¿ç¨‹ç»„    private static final ThreadGroup GROUP = new ThreadGroup(&quot;Pool_Group&quot;);    // ä»»åŠ¡é˜Ÿåˆ—    private static final LinkedList&lt;Runnable&gt; TASK_QUEUE = new LinkedList&lt;&gt;();    // çº¿ç¨‹é˜Ÿåˆ—    private static final List&lt;WorkerTask&gt; THREAD_QUEUE = new ArrayList&lt;&gt;();    public SimpleThreadPool() {        this(DEFAULT_SIZE, DEFAULT_TASK_QUEUE_SIZE, DEFAULT_DISCARD_POLICY);    }    public SimpleThreadPool(int size, int queueSize, DiscardPolicy discardPolicy) {        this.size = size;        this.queueSize = queueSize;        this.discardPolicy = discardPolicy;        init();    }    private void init() {        for (int i = 0; i &lt; size; i++) {            createWorkTask();        }    }    private void createWorkTask() {        WorkerTask task = new WorkerTask(GROUP, THREAD_PREFIX + (sequence.getAndIncrement()));        task.start();        THREAD_QUEUE.add(task);    }    // æäº¤ä»»åŠ¡    public void submit(Runnable runnable) {        // å¦‚æœçº¿ç¨‹æ± è¢«é”€æ¯ï¼Œä¸èƒ½æ·»åŠ ä»»åŠ¡åˆ°ä»»åŠ¡é˜Ÿåˆ—        if (destory) {            throw new IllegalThreadStateException(&quot;The thread pool already destroy and not allow submit task.&quot;);        }        synchronized (TASK_QUEUE) {            // ä»»åŠ¡é˜Ÿåˆ—æ•°é‡è¶…è¿‡é˜ˆå€¼ï¼Œåˆ™æ‰§è¡Œæ‹’ç»ç­–ç•¥            if (TASK_QUEUE.size() &gt; queueSize) {                discardPolicy.discard();            }            TASK_QUEUE.addLast(runnable);            TASK_QUEUE.notifyAll();        }    }    // å…³é—­çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹    public void shutdown() throws InterruptedException {        // å½“ä»»åŠ¡é˜Ÿåˆ—è¿˜æœ‰ä»»åŠ¡ï¼Œåˆ™ç¨å¾®ç­‰å¾…ã€‚        while (!TASK_QUEUE.isEmpty()) {            Thread.sleep(50);        }        // åˆ¤æ–­çº¿ç¨‹ä¸­æœ‰æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡        int initVal = THREAD_QUEUE.size();        while (initVal &gt; 0) {            for (WorkerTask task : THREAD_QUEUE) {                if (task.getTaskState() == TaskState.BLOCKED) {                    task.interrupt();                    task.close();                    initVal--;                } else {                    Thread.sleep(10);                }            }        }        this.destory = true;        System.out.println(&quot;The thread pool disposed.&quot;);    }    public int getSize() {        return size;    }    public int getQueueSize() {        return queueSize;    }    public boolean destory() {        return destory;    }    // å°è£…ä»»åŠ¡ç±»    private static class WorkerTask extends Thread {        private volatile TaskState taskState = TaskState.FREE;        public TaskState getTaskState() {            return this.taskState;        }        public WorkerTask(ThreadGroup group, String name) {            super(group, name);        }        @Override        public void run() {            OUTER:            while (this.taskState != TaskState.DEAD) {                Runnable runnable;                synchronized (TASK_QUEUE) {                    // ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿›å…¥é˜»å¡çŠ¶æ€                    while (TASK_QUEUE.isEmpty()) {                        try {                            this.taskState = TaskState.BLOCKED;                            TASK_QUEUE.wait();                        } catch (InterruptedException e) {                            break OUTER;                        }                    }                    // ä»»åŠ¡é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œå–å‡ºä»»åŠ¡                    runnable = TASK_QUEUE.removeFirst();                }                // ä»»åŠ¡ä¸ä¸ºç©ºï¼Œåˆ™æ‰§è¡Œä»»åŠ¡                if (runnable != null) {                    this.taskState = TaskState.RUNNING;                    runnable.run();                    this.taskState = TaskState.FREE;                }            }        }        public void close() {            this.taskState = TaskState.DEAD;        }    }    // çº¿ç¨‹çŠ¶æ€    private enum TaskState {        FREE, RUNNING, BLOCKED, DEAD    }    // æ‹’ç»ç­–ç•¥    public interface DiscardPolicy {        void discard() throws DiscardException;    }    // æ‹’ç»ç­–ç•¥å¼‚å¸¸    public static class DiscardException extends RuntimeException {        public DiscardException(String message) {            super(message);        }    }}</code></pre><pre><code class="java">public static void main(String[] args) throws InterruptedException {    SimpleThreadPool threadPool = new SimpleThreadPool();    /*SimpleThreadPool threadPool = new SimpleThreadPool(6, 10, SimpleThreadPool.DEFAULT_DISCARD_POLICY);*/    IntStream.rangeClosed(1, 40).forEach(i -&gt; {        threadPool.submit(() -&gt; {            System.out.printf(&quot;The runnable %d be serviced by %s start.\n&quot;, i, Thread.currentThread().getName());            Thread.sleep(10_000);            System.out.printf(&quot;The runnable %d be serviced by %s finished.\n&quot;, i, Thread.currentThread().getName());        });    });    Thread.sleep(10_000);    threadPool.shutdown();// å…³é—­çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹    threadPool.submit(() -&gt; System.out.println(&quot;çº¿ç¨‹æ± è¢«é”€æ¯ï¼Œä¸èƒ½æ·»åŠ ä»»åŠ¡åˆ°ä»»åŠ¡é˜Ÿåˆ—&quot;));}</code></pre><p>ä¸‹èŠ‚è¯¾å†…å®¹ï¼š</p><ol><li>çº¿ç¨‹æ± å®šæœŸè¾“å‡ºç°åœ¨çš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ã€‚</li><li>å®šä¹‰minã€activeã€max</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>136-è‡ªå®šä¹‰ä¸ªç®€å•çš„çº¿ç¨‹æ± å¹¶ä¸”æµ‹è¯•</title>
      <link href="/wang-thread/136-costum-thread-pool/"/>
      <url>/wang-thread/136-costum-thread-pool/</url>
      
        <content type="html"><![CDATA[<pre><code class="java">public class SimpleThreadPool {    // ä¼ å‚çº¿ç¨‹æ± å¤§å°    private final int size;    // é»˜è®¤çº¿ç¨‹æ± å¤§å°    private static final int DEFAULT_SIZE = 10;    // çº¿ç¨‹åè‡ªå¢åºå·    private static AtomicInteger sequence = new AtomicInteger();    // çº¿ç¨‹åå‰ç¼€    private static final String THREAD_PREFIX = &quot;SIMPLE_THREAD_POOL-&quot;;    // çº¿ç¨‹ç»„    private static final ThreadGroup GROUP = new ThreadGroup(&quot;Pool_Group&quot;);    // ä»»åŠ¡é˜Ÿåˆ—    private static final LinkedList&lt;Runnable&gt; TASK_QUEUE = new LinkedList&lt;&gt;();    // çº¿ç¨‹é˜Ÿåˆ—    private static final List&lt;WorkerTask&gt; THREAD_QUEUE = new ArrayList&lt;&gt;();    public SimpleThreadPool() {        this(DEFAULT_SIZE);    }    public SimpleThreadPool(int size) {        this.size = size;        init();    }    private void init() {        for (int i = 0; i &lt; size; i++) {            createWorkTask();        }    }    private void createWorkTask() {        WorkerTask task = new WorkerTask(GROUP, THREAD_PREFIX + (sequence.getAndIncrement()));        task.start();        THREAD_QUEUE.add(task);    }    // æäº¤ä»»åŠ¡    public void submit(Runnable runnable) {        synchronized (TASK_QUEUE) {            TASK_QUEUE.addLast(runnable);            TASK_QUEUE.notifyAll();        }    }    // å°è£…ä»»åŠ¡ç±»    private static class WorkerTask extends Thread {        private volatile TaskState taskState = TaskState.FREE;        public TaskState getTaskState() {            return this.taskState;        }        public WorkerTask(ThreadGroup group, String name) {            super(group, name);        }        @Override        public void run() {            OUTER:            while (this.taskState != TaskState.DEAD) {                Runnable runnable;                synchronized (TASK_QUEUE) {                    // ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿›å…¥é˜»å¡çŠ¶æ€                    while (TASK_QUEUE.isEmpty()) {                        try {                            this.taskState = TaskState.BLOCKED;                            TASK_QUEUE.wait();                        } catch (InterruptedException e) {                            break OUTER;                        }                    }                    // ä»»åŠ¡é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œå–å‡ºä»»åŠ¡ã€‚å¾ˆå¿«                    runnable = TASK_QUEUE.removeFirst();                }                // ä»»åŠ¡ä¸ä¸ºç©ºï¼Œåˆ™æ‰§è¡Œä»»åŠ¡ã€‚å¾ˆæ…¢                if (runnable != null) {                    this.taskState = TaskState.RUNNING;                    runnable.run();                    this.taskState = TaskState.FREE;                }            }        }        public void close() {            this.taskState = TaskState.DEAD;        }    }    // çº¿ç¨‹çŠ¶æ€    private enum TaskState {        FREE, RUNNING, BLOCKED, DEAD    }}</code></pre><pre><code class="java">public static void main(String[] args) {    SimpleThreadPool threadPool = new SimpleThreadPool();    IntStream.rangeClosed(1, 40).forEach(i -&gt; {        threadPool.submit(() -&gt; {            System.out.printf(&quot;The runnable %d be serviced by %s start.\n&quot;, i, Thread.currentThread().getName());            Thread.sleep(10_000);            System.out.printf(&quot;The runnable %d be serviced by %s finished.\n&quot;, i, Thread.currentThread().getName());        });    });}</code></pre><p>å®ç°äº†ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿˜æœªæ”¯æŒæ‹’ç»ç­–ç•¥ã€‚</p><p>ç›®å‰åªæœ‰initï¼Œè¿˜éœ€å®ç°activeï¼Œmax</p><p>è¿˜éœ€å®ç°åœæ­¢çº¿ç¨‹æ± ï¼ˆshutdownï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>135-çº¿ç¨‹æ± åŸç†ä¸è‡ªå®šä¹‰çº¿ç¨‹æ± </title>
      <link href="/wang-thread/135-thread-pool-theory/"/>
      <url>/wang-thread/135-thread-pool-theory/</url>
      
        <content type="html"><![CDATA[<p>JUCåŒ…å·²ç»å®ç°äº†éå¸¸å¥½ç”¨çš„çº¿ç¨‹æ± ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¤§å¤šéƒ½ä½¿ç”¨JUCåŒ…ä¸‹çš„çº¿ç¨‹æ± ã€‚</p><p>è‡ªå®šä¹‰çº¿ç¨‹æ± å¯ä»¥å¸®åŠ©ç†è§£çº¿ç¨‹æ± çš„å·¥ä½œåŸç†</p><p>æ²¡æœ‰çº¿ç¨‹æ± çš„å¼Šç«¯ï¼šå¤šæ¬¡åˆ›å»ºã€é”€æ¯çº¿ç¨‹ä¼šæµªè´¹å¤§é‡æ—¶é—´ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šæ¯”å¦‚æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™å°±ä¼šï¼ˆåœ¨çº¿ç¨‹æ± ï¼‰åˆ›å»ºä¸€äº›çº¿ç¨‹ï¼Œç„¶åæœ‰è¯·æ±‚è®¿é—®çš„æ—¶å€™å°±ä¼šä½¿ç”¨å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹åšä»»åŠ¡ï¼Œå½“è¯·æ±‚æ“ä½œç»“æŸåçº¿ç¨‹å¹¶ä¸ä¼šé”€æ¯ï¼Œè€Œæ˜¯å°†çº¿ç¨‹åˆå›å½’åˆ°çº¿ç¨‹æ± ä¸­ã€‚ä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¾ªç¯å¯å›æ”¶åˆ©ç”¨ï¼Œå¯ä»¥å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚åœ¨æœåŠ¡å™¨å…³é—­çš„æ—¶å€™æ‰ä¼šå…³é—­çº¿ç¨‹ã€‚</p><p>çº¿ç¨‹æ± æ¦‚å¿µï¼š</p><ol><li>ä»»åŠ¡é˜Ÿåˆ—ï¼šå­˜å‚¨å¾…æ‰§è¡Œçš„ä»»åŠ¡</li><li>æ‹’ç»ç­–ç•¥ï¼šè¯·æ±‚ä»»åŠ¡è¿‡å¤šï¼Œæ‹’ç»ä¸€éƒ¨åˆ†ä»»åŠ¡<ul><li>æŠ›å‡ºå¼‚å¸¸ã€ç›´æ¥ä¸¢å¼ƒã€é˜»å¡è¯·æ±‚ã€ä¸´æ—¶é˜Ÿåˆ—</li></ul></li><li>initï¼ˆminï¼‰</li><li>active</li><li>max</li></ol><p>min&lt;=active&lt;=max</p><p>çº¿ç¨‹æ± é€šç”¨è§„åˆ™ï¼š</p><ol><li>é¦–å…ˆçº¿ç¨‹æ± åˆ›å»ºminä¸ªçº¿ç¨‹ï¼Œå¦‚æœå¤„ç†çº¿ç¨‹è¿‡å¤šä¼šé€‚é‡å¢åŠ åˆ°activeï¼Œæ›´å¤šåˆ™å¢åŠ åˆ°maxã€‚å¦‚æœçº¿ç¨‹æ•°é‡è¶…è¿‡äº†maxåˆ™ä¼šæ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœä»»åŠ¡é˜Ÿåˆ—æ»¡äº†åˆ™ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚</li><li>çº¿ç¨‹æ‰§è¡Œå¦‚æœè¿‡äº†é¡¶å³°æœŸï¼ˆæ¯”å¦‚åŒåä¸€ï¼‰éœ€è¦å‡å°‘çº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„æ•°æ®åˆ°activeï¼ˆçº¿ç¨‹è¿‡å¤šåˆ‡æ¢ä¸Šä¸‹æ–‡ä¼šå½±å“åº”ç”¨æ€§èƒ½ï¼‰ï¼Œå¦‚æœæœ‰è¿‡å¤šçš„ä»»åŠ¡åˆ™åˆå¢åŠ çº¿ç¨‹æ•°é‡ã€‚</li></ol><p>çº¿ç¨‹æ± å¼‚æ­¥ä»»åŠ¡ã€æ‰¹é‡ä»»åŠ¡</p><p>ä½¿ç”¨åˆ°çº¿ç¨‹æ± çš„å¼€æºé¡¹ç›®ï¼šQuartzã€Control-M</p><p>è¡¥å……ï¼š<a href="https://www.cnblogs.com/ibigboy/p/11298004.html" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆé˜¿é‡ŒJavaè§„çº¦ç¦æ­¢ä½¿ç”¨Javaå†…ç½®Executorsåˆ›å»ºçº¿ç¨‹æ± ï¼Ÿ</a></p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2å°æ—¶Spring Bootçº¢åŒ…ç¨‹åº å°½æ˜¾æå®¢æµªæ¼«Style</title>
      <link href="/imooc/328-2Hours-SpringBoot/"/>
      <url>/imooc/328-2Hours-SpringBoot/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://coding.imooc.com/class/chapter/328.html" target="_blank" rel="noopener">2å°æ—¶Spring Bootçº¢åŒ…ç¨‹åº å°½æ˜¾æå®¢æµªæ¼«Style</a></p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -ã€æƒŠé¸¿ä¸€ç¥ã€‘èŠ±çµ®å¼•å¯¼"><a href="#ç¬¬1ç« -ã€æƒŠé¸¿ä¸€ç¥ã€‘èŠ±çµ®å¼•å¯¼" class="headerlink" title="ç¬¬1ç«  ã€æƒŠé¸¿ä¸€ç¥ã€‘èŠ±çµ®å¼•å¯¼"></a>ç¬¬1ç«  ã€æƒŠé¸¿ä¸€ç¥ã€‘èŠ±çµ®å¼•å¯¼</h2><blockquote><p>å¯¼å­¦å°†ä»¥å¹½é»˜é£è¶£çš„é£æ ¼ï¼Œè®©ä½ äº†è§£ä¸€ä¸‹æ™®ç½—å¤§ä¼—çœ¼ä¸­çš„â€œç¨‹åºå‘˜â€ã€‚</p></blockquote><h3 id="1-1-ã€å¼€ç¯‡æœ‰æƒŠå–œã€‘ç²¾å½©èŠ±çµ®ä¹‹è¯¾ç¨‹å¼•å¯¼"><a href="#1-1-ã€å¼€ç¯‡æœ‰æƒŠå–œã€‘ç²¾å½©èŠ±çµ®ä¹‹è¯¾ç¨‹å¼•å¯¼" class="headerlink" title="1-1 ã€å¼€ç¯‡æœ‰æƒŠå–œã€‘ç²¾å½©èŠ±çµ®ä¹‹è¯¾ç¨‹å¼•å¯¼"></a>1-1 ã€å¼€ç¯‡æœ‰æƒŠå–œã€‘ç²¾å½©èŠ±çµ®ä¹‹è¯¾ç¨‹å¼•å¯¼</h3><p>SpringBootä½¿é…ç½®ã€éƒ¨ç½²ã€ç¼–ç ã€ç›‘æ§å˜å¾—ç®€å•ã€‚</p><p> SpringMVC =&gt; SpringBoot</p><p>SpringBootçš„ç‰¹ç‚¹ï¼š</p><blockquote><ol><li>åŒ–ç¹ä¸ºç®€ï¼Œç®€åŒ–é…ç½®</li><li>å¤‡å—å…³æ³¨ï¼Œæ˜¯ä¸‹ä¸€ä»£æ¡†æ¶</li><li>å¾®æœåŠ¡çš„å…¥é—¨çº§å¾®æ¡†æ¶</li></ol></blockquote><p>SpringBoot ==&gt; SpringCloud ==&gt; å¾®æœåŠ¡</p><p>è¯¾ç¨‹ä»‹ç»ï¼š</p><blockquote><ol><li>ç¬¬ä¸€ä¸ªSpringBootç¨‹åº</li><li>è‡ªå®šä¹‰å±æ€§é…ç½®</li><li>Controllerçš„ä½¿ç”¨</li><li>spring-data-jpa</li><li>äº‹åŠ¡ç®¡ç†</li></ol></blockquote><p>æ³¨ï¼š</p><blockquote><ol><li>å…·å¤‡å¿…è¦çš„å‰ç½®çŸ¥è¯†<ul><li>åˆ©ç”¨mavenæ„å»ºé¡¹ç›®</li><li>Springæ³¨è§£</li><li>RESTful API</li></ul></li><li>ä¸éœ€è¦å»å­¦SpringMVC</li><li>Javaã€Mavenç­‰ç‰ˆæœ¬ä¿æŒä¸€è‡´</li></ol></blockquote><h2 id="ç¬¬2ç« -ã€åˆé‡ã€‘åè€Œè®ºâ€œé“â€ä¹‹SpringBoot"><a href="#ç¬¬2ç« -ã€åˆé‡ã€‘åè€Œè®ºâ€œé“â€ä¹‹SpringBoot" class="headerlink" title="ç¬¬2ç«  ã€åˆé‡ã€‘åè€Œè®ºâ€œé“â€ä¹‹SpringBoot"></a>ç¬¬2ç«  ã€åˆé‡ã€‘åè€Œè®ºâ€œé“â€ä¹‹SpringBoot</h2><blockquote><p>ä¸SpringBootåˆé‡ã€‚åè€Œè®ºâ€œé“â€ä¹‹SpringBootæ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><h3 id="2-1-åˆé‡SpringBoot"><a href="#2-1-åˆé‡SpringBoot" class="headerlink" title="2-1 åˆé‡SpringBoot"></a>2-1 åˆé‡SpringBoot</h3><h2 id="ç¬¬3ç« -ã€åˆè¯†ã€‘ä»å‰ï¼Œè½¦é©¬å¾ˆæ…¢ï¼Œä¹¦ä¿¡å¾ˆè¿œï¼Œä¸€ç”Ÿåªå¤Ÿçˆ±ä¸€äºº"><a href="#ç¬¬3ç« -ã€åˆè¯†ã€‘ä»å‰ï¼Œè½¦é©¬å¾ˆæ…¢ï¼Œä¹¦ä¿¡å¾ˆè¿œï¼Œä¸€ç”Ÿåªå¤Ÿçˆ±ä¸€äºº" class="headerlink" title="ç¬¬3ç«  ã€åˆè¯†ã€‘ä»å‰ï¼Œè½¦é©¬å¾ˆæ…¢ï¼Œä¹¦ä¿¡å¾ˆè¿œï¼Œä¸€ç”Ÿåªå¤Ÿçˆ±ä¸€äºº"></a>ç¬¬3ç«  ã€åˆè¯†ã€‘ä»å‰ï¼Œè½¦é©¬å¾ˆæ…¢ï¼Œä¹¦ä¿¡å¾ˆè¿œï¼Œä¸€ç”Ÿåªå¤Ÿçˆ±ä¸€äºº</h2><blockquote><p>äººç”Ÿç¬¬ä¸€ä¸ªSpringBootç¨‹åº</p></blockquote><h3 id="3-1-äººç”Ÿä¸­ç¬¬ä¸€ä¸ªSpringBootç¨‹åº"><a href="#3-1-äººç”Ÿä¸­ç¬¬ä¸€ä¸ªSpringBootç¨‹åº" class="headerlink" title="3-1 äººç”Ÿä¸­ç¬¬ä¸€ä¸ªSpringBootç¨‹åº"></a>3-1 äººç”Ÿä¸­ç¬¬ä¸€ä¸ªSpringBootç¨‹åº</h3><p>ç‰ˆæœ¬ä¸€è‡´ï¼š</p><pre><code class="shell">java -versionmvn -version</code></pre><p>SpringBootç‰ˆæœ¬ï¼š</p><blockquote><p>SNAPSHOTï¼ˆå¿«ç…§ç‰ˆï¼‰åªåšä¸€ä¸ªå­˜æ¡£ï¼Œå¹¶ä¸æ˜¯Linuxç‰ˆæœ¬.</p></blockquote><p>é…ç½®Mavené˜¿é‡Œäº‘é•œåƒåœ°å€ï¼š</p><pre><code class="xml">&lt;!-- settings.xml --&gt;&lt;mirror&gt;    &lt;id&gt;nexus-aliyun&lt;/id&gt;    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;    &lt;name&gt;Nexus aliyun&lt;/name&gt;    &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;&lt;/mirror&gt;</code></pre><p>è¯·æ±‚æ–¹æ³•æ³¨è§£ï¼š</p><blockquote><ol><li>æ–°ç‰ˆ@GetMapping(â€œ/helloâ€)</li><li>è€ç‰ˆ@RequestMapping(value=â€/hel1oâ€ï¼Œmethod=RequestMethod.GET)</li></ol></blockquote><p>Sprint Booté‡Œå†…åµŒäº†ä¸€ä¸ªTomcat</p><pre><code class="shell"># å¯åŠ¨SpringBootç¨‹åºmvn spring-boot:run# ç¨‹åºæ‰“åŒ…mvn clean package# è¿è¡Œç¨‹åºjava -jar -Dspring.profiles.active=prod luckymoney.jar</code></pre><h2 id="ç¬¬4ç« -ã€å›å­ä¹‹äº¤-æ·¡å¦‚æ°´ã€‘"><a href="#ç¬¬4ç« -ã€å›å­ä¹‹äº¤-æ·¡å¦‚æ°´ã€‘" class="headerlink" title="ç¬¬4ç«  ã€å›å­ä¹‹äº¤-æ·¡å¦‚æ°´ã€‘"></a>ç¬¬4ç«  ã€å›å­ä¹‹äº¤-æ·¡å¦‚æ°´ã€‘</h2><blockquote><p>SpringBooté…ç½®çŸ¥å¤šå°‘</p></blockquote><h3 id="4-1-é¡¹ç›®å±æ€§é…ç½®çŸ¥å¤šå°‘"><a href="#4-1-é¡¹ç›®å±æ€§é…ç½®çŸ¥å¤šå°‘" class="headerlink" title="4-1 é¡¹ç›®å±æ€§é…ç½®çŸ¥å¤šå°‘"></a>4-1 é¡¹ç›®å±æ€§é…ç½®çŸ¥å¤šå°‘</h3><p>é¡¹ç›®é…ç½®ï¼š</p><pre><code class="properties"># application.propertiesserver.port=8081server.servlet.context-path=/luckymonel</code></pre><pre><code class="yaml">servert:   port: 8081  servlet:     context-path: /luckymoneyminMoney: 1description: æœ€å°‘è¦å‘${minMoney}å…ƒlimit:   minMoney: 1  maxMoney: 10  description: æœ€å°‘è¦å‘${limit.minMone}å…ƒï¼Œæœ€å¤š${limit.maxMoney}å…ƒ</code></pre><p>å•é…ç½®å±æ€§å€¼ï¼š</p><pre><code class="java">@Value(&quot;${minMoney}&quot;)private BigDecimal minMoney;@Value(&quot;${description}&quot;)private String description;</code></pre><p>ç»„é¡¹ç›®å±æ€§å€¼ï¼š</p><pre><code class="java">@Data@Component@ConfigurationProperties(prefix = &quot;limit&quot;)public class LimitConfig {    private BigDecimal minMoney;    private BigDecimal maxMoney;    private String description;}</code></pre><pre><code class="java">@Autowired private LimitConfig limitConfig;</code></pre><p>é¡¹ç›®ç¯å¢ƒï¼š</p><ul><li><p>application-dev.ymlï¼šå¼€å‘ç¯å¢ƒçš„é…ç½®</p></li><li><p>application-prod.ymlæ˜¯ç”Ÿäº§ç¯å¢ƒçš„é…ç½®</p></li><li><p>application-test.ymlæ˜¯æµ‹è¯•ç¯å¢ƒçš„é…ç½®</p></li><li><p>application.ymlä¸­é…ç½®è¦è¿ç”¨çš„ç¯å¢ƒé…ç½®</p><pre><code class="yaml">spring:  profiles:    active: dev</code></pre><pre><code class="shell">mvn clean packagejava -jar -Dspring.profiles.active=prod luckymoney.jar</code></pre></li></ul><p>é…ç½®æ€»ç»“ï¼š</p><blockquote><p>@Value<br>@Component<br>@ConfigurationProperties</p></blockquote><h2 id="ç¬¬5ç« -ã€äººç”Ÿè‹¥åªå¦‚åˆè§ã€‘ä»â€œç¨‹åºâ€çš„å…¥å£å¼€å§‹"><a href="#ç¬¬5ç« -ã€äººç”Ÿè‹¥åªå¦‚åˆè§ã€‘ä»â€œç¨‹åºâ€çš„å…¥å£å¼€å§‹" class="headerlink" title="ç¬¬5ç«  ã€äººç”Ÿè‹¥åªå¦‚åˆè§ã€‘ä»â€œç¨‹åºâ€çš„å…¥å£å¼€å§‹"></a>ç¬¬5ç«  ã€äººç”Ÿè‹¥åªå¦‚åˆè§ã€‘ä»â€œç¨‹åºâ€çš„å…¥å£å¼€å§‹</h2><blockquote><p>è¿˜è®°å¾—ã€ŠåŒ—äº¬ä¸œè·¯çš„æ—¥å­ã€‹é‚£é¦–æ­Œâ€¦.å¼€å§‹çš„å¼€å§‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯å­©å­â€¦ç°åœ¨æœ¬ç« å†…å®¹å°†ä»åŸºäºSpringBootçš„â€œçº¢åŒ…æ”¶å‘ â€ç¨‹åºçš„å…¥å£å¼€å§‹ï¼Œå®ç°æå®¢ä¸“å±çš„æµªæ¼«çº¢åŒ…è¡¨ç™½ç¨‹åºå­¦ä¹ ä¹‹æ—…ã€‚æ‘’å¼ƒæ¯ç‡¥ä¹å‘³çš„ç†è®ºï¼Œè®©ä½ å°½æƒ…æ’¸ä¸€æŠŠçº¢åŒ…ä»£ç ï¼ŒShowä¸€åœºæ³•å¼æµªæ¼«ã€‚â€¦</p></blockquote><h3 id="5-1-Controller-ä»çº¢åŒ…ç¨‹åºçš„å…¥å£å¼€å§‹"><a href="#5-1-Controller-ä»çº¢åŒ…ç¨‹åºçš„å…¥å£å¼€å§‹" class="headerlink" title="5-1 Controller:ä»çº¢åŒ…ç¨‹åºçš„å…¥å£å¼€å§‹"></a>5-1 Controller:ä»çº¢åŒ…ç¨‹åºçš„å…¥å£å¼€å§‹</h3><table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>@Controller</td><td>å¤„ç†httpè¯·æ±‚</td></tr><tr><td>@RestController</td><td>Spring4ä¹‹åæ–°åŠ çš„æ³¨è§£ï¼ŒåŸæ¥è¿”å›JSONéœ€è¦@ResponseBodyé…åˆ@Controller</td></tr><tr><td>@RequestMapping</td><td>é…ç½®urlæ˜ å°„</td></tr></tbody></table><p>æ¨¡æ¿çš„ä½¿ç”¨ï¼š</p><ol><li><p>æ·»åŠ POMä¾èµ–</p><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre></li><li><p>åˆ›å»ºæ–‡ä»¶/resources/templates/index.html</p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;æ¬¢è¿å­¦ä¹ SpringBoot!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</code></pre></li><li><p>ä½¿ç”¨æ¨¡æ¿</p><pre><code class="java">@Controllerpublic class HelloController {    @Autowired    private LimitConfig limitConfig;    @GetMapping(&quot;/hello&quot;)    public String say() {        return &quot;index&quot;;    }}</code></pre></li></ol><p>æ³¨ï¼š</p><blockquote><ol><li>@Controller + @ResponseBody = @RestController</li><li>@GetMapping({â€œ/helloâ€, â€œ/hiâ€})</li><li>ç±»æ³¨è§£@RequestMapping(â€œ/helloâ€)</li></ol></blockquote><table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>@PathVariable</td><td>è·å–URLä¸­çš„æ•°æ®</td></tr><tr><td>@RequestParam</td><td>è·å–è¯·æ±‚å‚æ•°çš„å€¼</td></tr></tbody></table><p> æ³¨ï¼š</p><blockquote><ol><li><p>/luckymoney/hello/say/100</p><p>@GetMapping(value=â€/{id}/sayâ€)</p><p>@PathVariable(â€œidâ€) Integer id</p></li><li><p>/luckymoney/hello/say?id=100</p><p>@RequestParam(value=â€idâ€, required=false, defaultValue=â€0â€) Integer id</p></li></ol></blockquote><p>æ³¨ï¼š</p><ul><li><strong>Postä½¿ç”¨form-data</strong></li><li><strong>Putä½¿ç”¨x-www-form-urlencoded</strong></li></ul><h2 id="ç¬¬6ç« -ã€æ”¶è·äººç”Ÿâ€çº¢é¢œâ€çŸ¥å·±ã€‘"><a href="#ç¬¬6ç« -ã€æ”¶è·äººç”Ÿâ€çº¢é¢œâ€çŸ¥å·±ã€‘" class="headerlink" title="ç¬¬6ç«  ã€æ”¶è·äººç”Ÿâ€çº¢é¢œâ€çŸ¥å·±ã€‘"></a>ç¬¬6ç«  ã€æ”¶è·äººç”Ÿâ€çº¢é¢œâ€çŸ¥å·±ã€‘</h2><blockquote><p>æ”¶è·â€œå¥³ç¥â€æ€»æ˜¯éœ€è¦å¥—è·¯çš„ï¼Œæ­£æ‰€è°“â€œè‡ªå¤æ·±æƒ…ç•™ä¸ä½ï¼Œæ€»æ˜¯å¥—è·¯å¾—äººå¿ƒâ€</p></blockquote><h3 id="6-1-å…³äºçº¢åŒ…æ”¶å‘ä¹‹æ“ä½œæ•°æ®åº“-ä¸Š"><a href="#6-1-å…³äºçº¢åŒ…æ”¶å‘ä¹‹æ“ä½œæ•°æ®åº“-ä¸Š" class="headerlink" title="6-1 å…³äºçº¢åŒ…æ”¶å‘ä¹‹æ“ä½œæ•°æ®åº“(ä¸Š)"></a>6-1 å…³äºçº¢åŒ…æ”¶å‘ä¹‹æ“ä½œæ•°æ®åº“(ä¸Š)</h3><p>æ•°æ®åº“æ“ä½œ</p><blockquote><p>Spring-Data-Jpa -&gt; MySQL</p></blockquote><p>Spring-Data-JPA</p><blockquote><p>JPA(Java Persistence API)å®šä¹‰äº†ä¸€ç³»åˆ—å¯¹è±¡æŒä¹…åŒ–çš„æ ‡å‡†ï¼Œç›®å‰å®ç°è¿™ä¸€è§„èŒƒçš„äº§å“æœ‰Hibernateã€TopLinkç­‰ã€‚</p><p>Spring-Data-JPAå°±æ˜¯å¯¹Hibernateçš„æ•´åˆ</p></blockquote><p>RESTful APIè®¾è®¡ï¼š</p><table><thead><tr><th>è¯·æ±‚ç±»å‹</th><th>è¯·æ±‚è·¯å¾„</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>GET</td><td>/luckymoneys</td><td>è·å–çº¢åŒ…åˆ—è¡¨</td></tr><tr><td>POST</td><td>/luckymoneys</td><td>åˆ›å»ºä¸€ä¸ªçº¢åŒ…</td></tr><tr><td>GET</td><td>/luckymoneys/id</td><td>é€šè¿‡idæŸ¥è¯¢çº¢åŒ…</td></tr><tr><td>PUT</td><td>/luckymoneys/id</td><td>é€šè¿‡idæ›´æ–°çº¢åŒ…</td></tr></tbody></table><p>æ­¥éª¤ï¼š</p><ol><li><p>æ·»åŠ POMä¾èµ–</p><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.springf ramework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;mysql&lt;/groupId&gt;    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre></li><li><p>é…ç½®æ•°æ®åº“ä¿¡æ¯å’ŒSpring-Data-JPAä¿¡æ¯</p><pre><code class="yaml">spring:   datasource:     driver-class-name: com.mysql.cj.jdbc.Driver    ur1: jdbc:mysql://127.0.0.1:3306/luckymoney?characterEncoding=utf-8    username: root    password: 123456  jpa:     hibernate:       ddl-auto: create    show-sql: true</code></pre><p>MySQLå¯è§†åŒ–å·¥å…·ï¼š</p><ul><li>Macï¼šSequel Pro</li><li>Windowsï¼šNavicat</li></ul><p>ddl-autoå‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>create</td><td>è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ã€‚æ¯æ¬¡ç¨‹åºè¿è¡Œéƒ½ä¼šåˆ›å»ºç©ºè¡¨ï¼Œå¦‚æœå·²å­˜åœ¨åˆ™ä¼šå…ˆåˆ é™¤è¡¨</td></tr><tr><td>create-drop</td><td>åº”ç”¨åœä¸‹æ¥çš„æ—¶å€™å°±ä¼šæŠŠè¡¨åˆ é™¤</td></tr><tr><td>none</td><td>ä¸åšä»»ä½•æ“ä½œã€‚</td></tr><tr><td>update</td><td>è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ã€‚å½“å·²å­˜åœ¨è¡¨åˆ™ä¸ä¼šæ“ä½œ</td></tr><tr><td>validate</td><td>éªŒè¯å®ä½“å±æ€§æ˜¯å¦å’Œè¡¨ç»“æ„ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™ä¼šæŠ¥é”™ã€‚</td></tr></tbody></table></li><li><p>åˆ›å»ºå®ä½“ç±»</p><pre><code class="java">@Entitypublic class Luckymoney {    @Id    @GenerateValue    private Integer id;    private BigDecimal money;    /** å‘é€æ–¹ */    private String producer;    /** æ¥æ”¶æ–¹ */    private String consumer;    // æ— å‚æ„é€ å‡½æ•°ã€‚å¿…é¡»è¦æœ‰ï¼Œå¦åˆ™æŠ¥é”™    // ...getter and setter...}</code></pre></li><li><p>è¿è¡Œç¨‹åº</p></li></ol><h3 id="6-2-å…³äºçº¢åŒ…æ”¶å‘ä¹‹æ“ä½œæ•°æ®åº“-ä¸‹"><a href="#6-2-å…³äºçº¢åŒ…æ”¶å‘ä¹‹æ“ä½œæ•°æ®åº“-ä¸‹" class="headerlink" title="6-2 å…³äºçº¢åŒ…æ”¶å‘ä¹‹æ“ä½œæ•°æ®åº“(ä¸‹)"></a>6-2 å…³äºçº¢åŒ…æ”¶å‘ä¹‹æ“ä½œæ•°æ®åº“(ä¸‹)</h3><ol><li><p>Dao</p><pre><code class="java">public interface LuckmoneyRepository extends JpaRepository&lt;Luckymoney, Integer&gt; {}</code></pre></li><li><p>Controller</p><pre><code class="java">@RestControllerpublic class LuckymoneyController {    @Autowired    private LuckmoneyRepository repository;    @Autowired    private LuckymoneyService service;    /**     * è·å–çº¢åŒ…åˆ—è¡¨     */    @GetMapping(&quot;/luckymoneys&quot;)    public List&lt;Luckymoney&gt; list() {        return repository.findAll();    }    /**     * åˆ›å»ºçº¢åŒ…(å‘çº¢åŒ…)     */    @PostMapping(&quot;/luckymoneys&quot;)    public Luckymoney create(@RequestParam(&quot;producer&quot;) String producer,                             @RequestParam(&quot;money&quot;) BigDecimal money) {        Luckymoney luckymoney = new Luckymoney();        luckymoney.setProducer(producer);        luckymoney.setMoney(money);        return repository.save(luckymoney);    }    /**     * é€šè¿‡idæŸ¥è¯¢çº¢åŒ…     */    @GetMapping(&quot;/luckymoneys/{id}&quot;)    public Luckymoney findById(@PathVariable(&quot;id&quot;) Integer id) {        return repository.findById(id).orElse(null);    }    /**     * æ›´æ–°çº¢åŒ…(é¢†çº¢åŒ…)     */    @PutMapping(&quot;/luckymoneys/{id}&quot;)    public Luckymoney update(@PathVariable(&quot;id&quot;) Integer id,                             @RequestParam(&quot;consumer&quot;) String consumer) {        Optional&lt;Luckymoney&gt; optional = repository.findById(id);        if (optional.isPresent()) { // å¦‚æœæœ‰å†…å®¹ã€‚            Luckymoney luckymoney = optional.get();// è·å–æ•°æ®            luckymoney.setConsumer(consumer);            return repository.save(luckymoney);        }        return null;    }}</code></pre></li></ol><p>æ³¨ï¼š</p><ul><li><strong>Postä½¿ç”¨form-data</strong></li><li><strong>Putä½¿ç”¨x-www-form-urlencoded</strong></li></ul><h2 id="ç¬¬7ç« -ã€æå®šå¹¶å‘å°±è¦åœ¨ä¸€èµ·ã€‘"><a href="#ç¬¬7ç« -ã€æå®šå¹¶å‘å°±è¦åœ¨ä¸€èµ·ã€‘" class="headerlink" title="ç¬¬7ç«  ã€æå®šå¹¶å‘å°±è¦åœ¨ä¸€èµ·ã€‘"></a>ç¬¬7ç«  ã€æå®šå¹¶å‘å°±è¦åœ¨ä¸€èµ·ã€‘</h2><blockquote><p>æå®šå¹¶å‘ï¼Œä»»ä½•å‹åŠ›éƒ½æ— æ³•é˜»æŒ¡æˆ‘ä»¬åœ¨ä¸€èµ·</p></blockquote><h3 id="7-1-å…³äºäº‹åŠ¡ï¼šçº¢åŒ…å¹¶å‘ä¸­çš„äº‹åŠ¡"><a href="#7-1-å…³äºäº‹åŠ¡ï¼šçº¢åŒ…å¹¶å‘ä¸­çš„äº‹åŠ¡" class="headerlink" title="7-1 å…³äºäº‹åŠ¡ï¼šçº¢åŒ…å¹¶å‘ä¸­çš„äº‹åŠ¡"></a>7-1 å…³äºäº‹åŠ¡ï¼šçº¢åŒ…å¹¶å‘ä¸­çš„äº‹åŠ¡</h3><p>äº‹åŠ¡ï¼š</p><blockquote><p>æ•°æ®åº“äº‹åŠ¡ï¼Œæ˜¯æŒ‡ä½œä¸ºå•ä¸ªé€»è¾‘å·¥ä½œå•å…ƒæ‰§è¡Œçš„ä¸€ç³»åˆ—æ“ä½œï¼Œè¦ä¹ˆå®Œå…¨åœ°æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨åœ°ä¸æ‰§è¡Œã€‚</p></blockquote><p>å®ç°å®åŠ¡æ“ä½œï¼š</p><ol><li><p>ç¼–å†™Serviceå‘é€ä¸¤ä¸ªçº¢åŒ…</p><pre><code class="java">@Servicepublic class LuckymoneyService {    @Autowired    private LuckmoneyRepository repository;    /**     * äº‹åŠ¡ æŒ‡æ•°æ®åº“äº‹åŠ¡     * æ‰£åº“å­˜ &gt; åˆ›å»ºè®¢å•     */    @Transactional    public void createTwo() {        Luckymoney luckymoney1 = new Luckymoney();        luckymoney1.setProducer(&quot;å»–å¸ˆå…„&quot;);        luckymoney1.setMoney(new BigDecimal(&quot;520&quot;));        repository.save(luckymoney1);        Luckymoney luckymoney2 = new Luckymoney();        luckymoney2.setProducer(&quot;å»–å¸ˆå…„&quot;);        luckymoney2.setMoney(new BigDecimal(&quot;1314&quot;));        repository.save(luckymoney2);    }}</code></pre></li><li><p>è°ƒç”¨Serviceæ–¹æ³•å‘é€çº¢åŒ…</p><pre><code class="java">@PostMapping(&quot;/luckymoneys/two&quot;)public void createTwo() {    service.createTwo();}</code></pre></li></ol><p>äº‹åŠ¡å¤±è´¥åŸå› ï¼šæ•°æ®åº“é»˜è®¤ä¸ºMyISAMä¸æ”¯æŒäº‹ç‰©å›æ»šï¼Œéœ€è¦è®¾ç½®ä¸ºInnoDB</p><p>è§£å†³æ–¹æ³•ï¼š æ”¹ä¸ºINNODB</p><p>æ›´æ”¹è¯­å¥ï¼š</p><pre><code class="mysql">ALTER TABLE luckymoney ENGINE=INNODB;</code></pre><p>äº‹åŠ¡å¤±è´¥åŸå› ï¼šSpringBoot2.*å®ä½“çš„é»˜è®¤å¼•æ“ä¸ºMyISAMä¸æ”¯æŒäº‹åŠ¡ï¼Œéœ€è¦é…ç½®å¼•æ“ä¸ºä¸ºinnoDB<br>è§£å†³æ–¹æ³•ï¼šåœ¨application.ymlæ·»åŠ é…ç½®</p><pre><code class="yaml">spring:     jpa:         database-platform: org.hibernate.dialect.MySQL5InnoDBDialect</code></pre><blockquote><p>åªæœ‰æŸ¥è¯¢çš„æ—¶å€™ä¸åŠ äº‹åŠ¡ï¼Œå…¶å®ƒä»»ä½•æ“ä½œéƒ½è¦åŠ äº‹åŠ¡ã€‚</p><p>è¿›è¡Œæ·»åŠ æ“ä½œçš„æ—¶å€™ï¼Œå¦‚æœè¦æ±‚ï¼Œè¦ä¹ˆå…¨éƒ¨æ·»åŠ æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</p><p>@Transactionaläº‹åŠ¡å¤„ç†æ³¨è§£çš„ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨Serviceè¿›è¡Œäº‹åŠ¡å¤„ç†</p></blockquote><h2 id="ç¬¬8ç« -ã€æ—¶å…‰ä¸è€æˆ‘ä»¬ä¸æ•£ã€‘"><a href="#ç¬¬8ç« -ã€æ—¶å…‰ä¸è€æˆ‘ä»¬ä¸æ•£ã€‘" class="headerlink" title="ç¬¬8ç«  ã€æ—¶å…‰ä¸è€æˆ‘ä»¬ä¸æ•£ã€‘"></a>ç¬¬8ç«  ã€æ—¶å…‰ä¸è€æˆ‘ä»¬ä¸æ•£ã€‘</h2><blockquote><p>æ—¶å…‰ä¸è€ï¼Œæˆ‘ä»¬ä¸æ•£ã€‚ä»â€œå®æˆ˜è¯¾ç¨‹â€å†æ¬¡å‡ºå‘ï¼Ÿæˆ‘ä»¬ä¸€èµ·çº¦ï¼Ÿ</p></blockquote><h3 id="8-1-æ€»ç»“ï¼šç²¾åæç‚¼ï¼Œç»å…¸å†ç°"><a href="#8-1-æ€»ç»“ï¼šç²¾åæç‚¼ï¼Œç»å…¸å†ç°" class="headerlink" title="8-1 æ€»ç»“ï¼šç²¾åæç‚¼ï¼Œç»å…¸å†ç°"></a>8-1 æ€»ç»“ï¼šç²¾åæç‚¼ï¼Œç»å…¸å†ç°</h3><ol><li><p>SpringBootä»‹ç»</p><ul><li><p>æ˜¯ä»€ä¹ˆ</p><p>SpringBootæ˜¯æ–°ä¸€ä»£æ¡†æ¶ï¼Œç®€åŒ–äº†å¼€å‘è¿‡ç¨‹ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚åº•å±‚è¿˜æ˜¯Spring</p></li><li><p>ä¸ºä»€ä¹ˆè¦å­¦</p><p>å¥½å¤„å¤šï¼Œå‘å±•è¶‹åŠ¿</p></li></ul></li><li><p>ç¬¬ä¸€ä¸ªSpringBootåº”ç”¨</p><ul><li>IDEAåˆ›å»º</li><li>å®˜ç½‘ä¸‹è½½åˆ›å»º</li></ul></li><li><p>é¡¹ç›®é…ç½®</p><ul><li>å•ä¸ªé…ç½®@Value</li><li>å¯¹è±¡é…ç½®@ConfigurationProperties</li><li>åŒºåˆ†ç¯å¢ƒï¼šå¼€å‘ã€ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¸åŒçš„é…ç½®</li></ul></li><li><p>Controllerçš„ä½¿ç”¨</p><ul><li>æ–¹å¼<ul><li>Controller</li><li>ResponseBody</li><li>RestController</li></ul></li><li>è·å–å‚æ•°<ul><li>PathVariable</li><li>RequestParam</li></ul></li></ul></li><li><p>æ•°æ®åº“æ“ä½œ</p><ul><li><p>Spring-Data-JPA</p><p>extents JpaRepository</p><ul><li>save()</li><li>findById</li><li>findAll</li></ul></li></ul></li><li><p>äº‹åŠ¡</p><p>ç‰¹æŒ‡æ•°æ®åº“çš„äº‹åŠ¡</p><p>@Transactional</p></li></ol><p>å»–å¸ˆå…„è¯¾ç¨‹å­¦ä¹ é¡ºåºï¼š</p><ol><li>SpringBootå…¥é—¨</li><li>SpringBootè¿›é˜¶</li><li>SpringBootå¾®ä¿¡ç‚¹é¤å®æˆ˜</li><li>SpringCloudå¾®æœåŠ¡å®æˆ˜</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¾ç¨‹è„šæœ¬</title>
      <link href="/imooc/219-docker/00-script/"/>
      <url>/imooc/219-docker/00-script/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="Dockerè™šæ‹Ÿæœºå¸¸ç”¨å‘½ä»¤"><a href="#Dockerè™šæ‹Ÿæœºå¸¸ç”¨å‘½ä»¤" class="headerlink" title="Dockerè™šæ‹Ÿæœºå¸¸ç”¨å‘½ä»¤"></a>Dockerè™šæ‹Ÿæœºå¸¸ç”¨å‘½ä»¤</h2><ol><li><p>å…ˆæ›´æ–°è½¯ä»¶åŒ…</p><pre><code class="shell">yum -y update</code></pre></li><li><p>å®‰è£…Dockerè™šæ‹Ÿæœº</p><pre><code class="shell">yum install -y docker</code></pre></li><li><p>è¿è¡Œã€é‡å¯ã€å…³é—­Dockerè™šæ‹Ÿæœº</p><pre><code class="shell">service docker startservice docker startservice docker stop</code></pre></li><li><p>æœç´¢é•œåƒ</p><pre><code class="shell">docker search é•œåƒåç§°</code></pre></li><li><p>ä¸‹è½½é•œåƒ</p><pre><code class="shell">docker pull é•œåƒåç§°</code></pre></li><li><p>æŸ¥çœ‹é•œåƒ</p><pre><code class="shell">docker images</code></pre></li><li><p>åˆ é™¤é•œåƒ</p><pre><code class="shell">docker rmi é•œåƒåç§°</code></pre></li><li><p>è¿è¡Œå®¹å™¨</p><pre><code class="shell">docker run å¯åŠ¨å‚æ•°  é•œåƒåç§°</code></pre></li><li><p>æŸ¥çœ‹å®¹å™¨åˆ—è¡¨</p><pre><code class="shell">docker ps -a</code></pre></li><li><p>åœæ­¢ã€æŒ‚èµ·ã€æ¢å¤å®¹å™¨</p><pre><code class="shell">docker stop å®¹å™¨IDdocker pause å®¹å™¨IDdocker unpase å®¹å™¨ID</code></pre></li><li><p>æŸ¥çœ‹å®¹å™¨ä¿¡æ¯</p><pre><code class="shell">docker inspect å®¹å™¨ID</code></pre></li><li><p>åˆ é™¤å®¹å™¨</p><pre><code class="shell">docker rm å®¹å™¨ID</code></pre></li><li><p>æ•°æ®å·ç®¡ç†</p><pre><code class="shell">docker volume create æ•°æ®å·åç§°  #åˆ›å»ºæ•°æ®å·docker volume rm æ•°æ®å·åç§°  #åˆ é™¤æ•°æ®å·docker volume inspect æ•°æ®å·åç§°  #æŸ¥çœ‹æ•°æ®å·</code></pre></li><li><p>ç½‘ç»œç®¡ç†</p><pre><code class="shell">docker network ls æŸ¥çœ‹ç½‘ç»œä¿¡æ¯docker network create --subnet=ç½‘æ®µ ç½‘ç»œåç§°docker network rm ç½‘ç»œåç§°</code></pre></li><li><p>é¿å…VMè™šæ‹ŸæœºæŒ‚èµ·æ¢å¤ä¹‹åï¼ŒDockerè™šæ‹Ÿæœºæ–­ç½‘</p><pre><code class="shell">vi /etc/sysctl.conf</code></pre></li></ol><pre><code>æ–‡ä»¶ä¸­æ·»åŠ `net.ipv4.ip_forward=1`è¿™ä¸ªé…ç½®```shell#é‡å¯ç½‘ç»œæœåŠ¡systemctl  restart network```</code></pre><h2 id="å®‰è£…PXCé›†ç¾¤ï¼Œè´Ÿè½½å‡è¡¡ï¼ŒåŒæœºçƒ­å¤‡"><a href="#å®‰è£…PXCé›†ç¾¤ï¼Œè´Ÿè½½å‡è¡¡ï¼ŒåŒæœºçƒ­å¤‡" class="headerlink" title="å®‰è£…PXCé›†ç¾¤ï¼Œè´Ÿè½½å‡è¡¡ï¼ŒåŒæœºçƒ­å¤‡"></a>å®‰è£…PXCé›†ç¾¤ï¼Œè´Ÿè½½å‡è¡¡ï¼ŒåŒæœºçƒ­å¤‡</h2><ol><li><p>å®‰è£…PXCé•œåƒ</p><pre><code class="shell">docker pull percona/percona-xtradb-cluster</code></pre></li><li><p>ä¸ºPXCé•œåƒæ”¹å</p><pre><code class="shell">docker tag percona/percona-xtradb-cluster pxc</code></pre></li><li><p>åˆ›å»ºnet1ç½‘æ®µ</p><pre><code class="shell">docker network create --subnet=172.18.0.0/16 net1</code></pre></li><li><p>åˆ›å»º5ä¸ªæ•°æ®å·</p><pre><code class="shell">docker volume create --name v1docker volume create --name v2docker volume create --name v3docker volume create --name v4docker volume create --name v5</code></pre></li><li><p>åˆ›å»ºå¤‡ä»½æ•°æ®å·ï¼ˆç”¨äºçƒ­å¤‡ä»½æ•°æ®ï¼‰</p><pre><code class="shell">docker volume create --name backup</code></pre></li><li><p>åˆ›å»º5èŠ‚ç‚¹çš„PXCé›†ç¾¤</p><p>æ³¨æ„ï¼Œæ¯ä¸ªMySQLå®¹å™¨åˆ›å»ºä¹‹åï¼Œå› ä¸ºè¦æ‰§è¡ŒPXCçš„åˆå§‹åŒ–å’ŒåŠ å…¥é›†ç¾¤ç­‰å·¥ä½œï¼Œè€å¿ƒç­‰å¾…1åˆ†é’Ÿå·¦å³å†ç”¨å®¢æˆ·ç«¯è¿æ¥MySQLã€‚å¦å¤–ï¼Œå¿…é¡»ç¬¬1ä¸ªMySQLèŠ‚ç‚¹å¯åŠ¨æˆåŠŸï¼Œç”¨MySQLå®¢æˆ·ç«¯èƒ½è¿æ¥ä¸Šä¹‹åï¼Œå†å»åˆ›å»ºå…¶ä»–MySQLèŠ‚ç‚¹ã€‚</p><pre><code class="shell">#åˆ›å»ºç¬¬1ä¸ªMySQLèŠ‚ç‚¹docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=abc123456 -e CLUSTER_NAME=PXC -e XTRABACKUP_PASSWORD=abc123456 -v v1:/var/lib/mysql -v backup:/data --privileged --name=node1 --net=net1 --ip 172.18.0.2 pxc#åˆ›å»ºç¬¬2ä¸ªMySQLèŠ‚ç‚¹docker run -d -p 3307:3306 -e MYSQL_ROOT_PASSWORD=abc123456 -e CLUSTER_NAME=PXC -e XTRABACKUP_PASSWORD=abc123456 -e CLUSTER_JOIN=node1 -v v2:/var/lib/mysql -v backup:/data --privileged --name=node2 --net=net1 --ip 172.18.0.3 pxc#åˆ›å»ºç¬¬3ä¸ªMySQLèŠ‚ç‚¹docker run -d -p 3308:3306 -e MYSQL_ROOT_PASSWORD=abc123456 -e CLUSTER_NAME=PXC -e XTRABACKUP_PASSWORD=abc123456 -e CLUSTER_JOIN=node1 -v v3:/var/lib/mysql --privileged --name=node3 --net=net1 --ip 172.18.0.4 pxc#åˆ›å»ºç¬¬4ä¸ªMySQLèŠ‚ç‚¹docker run -d -p 3309:3306 -e MYSQL_ROOT_PASSWORD=abc123456 -e CLUSTER_NAME=PXC -e XTRABACKUP_PASSWORD=abc123456 -e CLUSTER_JOIN=node1 -v v4:/var/lib/mysql --privileged --name=node4 --net=net1 --ip 172.18.0.5 pxc#åˆ›å»ºç¬¬5ä¸ªMySQLèŠ‚ç‚¹docker run -d -p 3310:3306 -e MYSQL_ROOT_PASSWORD=abc123456 -e CLUSTER_NAME=PXC -e XTRABACKUP_PASSWORD=abc123456 -e CLUSTER_JOIN=node1 -v v5:/var/lib/mysql -v backup:/data --privileged --name=node5 --net=net1 --ip 172.18.0.6 pxc</code></pre></li><li><p>å®‰è£…Haproxyé•œåƒ</p><pre><code class="shell">docker pull haproxy</code></pre></li><li><p>å®¿ä¸»æœºä¸Šç¼–å†™Haproxyé…ç½®æ–‡ä»¶</p><pre><code class="shell">vi /home/soft/haproxy.cfg</code></pre><p>é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><pre><code class="properties">global    #å·¥ä½œç›®å½•    chroot /usr/local/etc/haproxy    #æ—¥å¿—æ–‡ä»¶ï¼Œä½¿ç”¨rsyslogæœåŠ¡ä¸­local5æ—¥å¿—è®¾å¤‡ï¼ˆ/var/log/local5ï¼‰ï¼Œç­‰çº§info    log 127.0.0.1 local5 info    #å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ    daemondefaults    log    global    mode    http    #æ—¥å¿—æ ¼å¼    option    httplog    #æ—¥å¿—ä¸­ä¸è®°å½•è´Ÿè½½å‡è¡¡çš„å¿ƒè·³æ£€æµ‹è®°å½•    option    dontlognull    #è¿æ¥è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰    timeout connect 5000    #å®¢æˆ·ç«¯è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰    timeout client  50000    #æœåŠ¡å™¨è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰    timeout server  50000#ç›‘æ§ç•Œé¢listen  admin_stats    #ç›‘æ§ç•Œé¢çš„è®¿é—®çš„IPå’Œç«¯å£    bind  0.0.0.0:8888    #è®¿é—®åè®®    mode        http    #URIç›¸å¯¹åœ°å€    stats uri   /dbs    #ç»Ÿè®¡æŠ¥å‘Šæ ¼å¼    stats realm     Global\ statistics    #ç™»é™†å¸æˆ·ä¿¡æ¯    stats auth  admin:abc123456#æ•°æ®åº“è´Ÿè½½å‡è¡¡listen  proxy-mysql    #è®¿é—®çš„IPå’Œç«¯å£    bind  0.0.0.0:3306    #ç½‘ç»œåè®®    mode  tcp    #è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆè½®è¯¢ç®—æ³•ï¼‰    #è½®è¯¢ç®—æ³•ï¼šroundrobin    #æƒé‡ç®—æ³•ï¼šstatic-rr    #æœ€å°‘è¿æ¥ç®—æ³•ï¼šleastconn    #è¯·æ±‚æºIPç®—æ³•ï¼šsource    balance  roundrobin    #æ—¥å¿—æ ¼å¼    option  tcplog    #åœ¨MySQLä¸­åˆ›å»ºä¸€ä¸ªæ²¡æœ‰æƒé™çš„haproxyç”¨æˆ·ï¼Œå¯†ç ä¸ºç©ºã€‚Haproxyä½¿ç”¨è¿™ä¸ªè´¦æˆ·å¯¹MySQLæ•°æ®åº“å¿ƒè·³æ£€æµ‹    option  mysql-check user haproxy    server  MySQL_1 172.18.0.2:3306 check weight 1 maxconn 2000    server  MySQL_2 172.18.0.3:3306 check weight 1 maxconn 2000    server  MySQL_3 172.18.0.4:3306 check weight 1 maxconn 2000    server  MySQL_4 172.18.0.5:3306 check weight 1 maxconn 2000    server  MySQL_5 172.18.0.6:3306 check weight 1 maxconn 2000    #ä½¿ç”¨keepaliveæ£€æµ‹æ­»é“¾    option  tcpka</code></pre></li><li><p>åˆ›å»ºä¸¤ä¸ªHaproxyå®¹å™¨</p><pre><code class="shell">#åˆ›å»ºç¬¬1ä¸ªHaproxyè´Ÿè½½å‡è¡¡æœåŠ¡å™¨docker run -it -d -p 4001:8888 -p 4002:3306 -v /home/soft/haproxy:/usr/local/etc/haproxy --name h1 --privileged --net=net1 --ip 172.18.0.7 haproxy#è¿›å…¥h1å®¹å™¨ï¼Œå¯åŠ¨Haproxydocker exec -it h1 bashhaproxy -f /usr/local/etc/haproxy/haproxy.cfg#åˆ›å»ºç¬¬2ä¸ªHaproxyè´Ÿè½½å‡è¡¡æœåŠ¡å™¨docker run -it -d -p 4003:8888 -p 4004:3306 -v /home/soft/haproxy:/usr/local/etc/haproxy --name h2 --privileged --net=net1 --ip 172.18.0.8 haproxy#è¿›å…¥h2å®¹å™¨ï¼Œå¯åŠ¨Haproxydocker exec -it h2 bashhaproxy -f /usr/local/etc/haproxy/haproxy.cfg</code></pre></li><li><p>Haproxyå®¹å™¨å†…å®‰è£…Keepalivedï¼Œè®¾ç½®è™šæ‹ŸIP</p><pre><code class="shell">#è¿›å…¥h1å®¹å™¨docker exec -it h1 bash#æ›´æ–°è½¯ä»¶åŒ…apt-get update#å®‰è£…VIMapt-get install vim#å®‰è£…Keepalivedapt-get install keepalived#ç¼–è¾‘Keepalivedé…ç½®æ–‡ä»¶ï¼ˆå‚è€ƒä¸‹æ–¹é…ç½®æ–‡ä»¶ï¼‰vim /etc/keepalived/keepalived.conf#å¯åŠ¨Keepalivedservice keepalived start#å®¿ä¸»æœºæ‰§è¡Œpingå‘½ä»¤ping 172.18.0.201</code></pre><p>é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code>vrrp_instance  VI_1 {    state  MASTER    interface  eth0    virtual_router_id  51    priority  100    advert_int  1    authentication {        auth_type  PASS        auth_pass  123456    }    virtual_ipaddress {        172.18.0.201    }}</code></pre><pre><code class="shell">#è¿›å…¥h2å®¹å™¨docker exec -it h2 bash#æ›´æ–°è½¯ä»¶åŒ…apt-get update#å®‰è£…VIMapt-get install vim#å®‰è£…Keepalivedapt-get install keepalived#ç¼–è¾‘Keepalivedé…ç½®æ–‡ä»¶vim /etc/keepalived/keepalived.conf#å¯åŠ¨Keepalivedservice keepalived start#å®¿ä¸»æœºæ‰§è¡Œpingå‘½ä»¤ping 172.18.0.201</code></pre><p>é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="shell">vrrp_instance  VI_1 {    state  MASTER    interface  eth0    virtual_router_id  51    priority  100    advert_int  1    authentication {        auth_type  PASS        auth_pass  123456    }    virtual_ipaddress {        172.18.0.201    }}</code></pre></li><li><p>å®¿ä¸»æœºå®‰è£…Keepalivedï¼Œå®ç°åŒå‡»çƒ­å¤‡</p><pre><code class="shell">#å®¿ä¸»æœºæ‰§è¡Œå®‰è£…Keepalivedyum -y install keepalived#ä¿®æ”¹Keepalivedé…ç½®æ–‡ä»¶vi /etc/keepalived/keepalived.conf#å¯åŠ¨Keepalivedservice keepalived start</code></pre><p>Keepalivedé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><pre><code class="shell">vrrp_instance VI_1 {    state MASTER    interface ens33    virtual_router_id 51    priority 100    advert_int 1    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {           192.168.99.150    }}virtual_server 192.168.99.150 8888 {    delay_loop 3    lb_algo rr    lb_kind NAT    persistence_timeout 50    protocol TCP    real_server 172.18.0.201 8888 {        weight 1    }}virtual_server 192.168.99.150 3306 {    delay_loop 3    lb_algo rr    lb_kind NAT    persistence_timeout 50    protocol TCP    real_server 172.18.0.201 3306 {        weight 1    }}</code></pre></li><li><p>çƒ­å¤‡ä»½æ•°æ®</p><pre><code class="shell">#è¿›å…¥node1å®¹å™¨docker exec -it node1 bash#æ›´æ–°è½¯ä»¶åŒ…apt-get update#å®‰è£…çƒ­å¤‡å·¥å…·apt-get install percona-xtrabackup-24#å…¨é‡çƒ­å¤‡innobackupex --user=root --password=abc123456 /data/backup/full</code></pre></li><li><p>å†·è¿˜åŸæ•°æ®<br>åœæ­¢å…¶ä½™4ä¸ªèŠ‚ç‚¹ï¼Œå¹¶åˆ é™¤èŠ‚ç‚¹</p><pre><code class="shell">docker stop node2docker stop node3docker stop node4docker stop node5docker rm node2docker rm node3docker rm node4docker rm node5</code></pre><p>node1å®¹å™¨ä¸­åˆ é™¤MySQLçš„æ•°æ®</p><pre><code class="shell">#åˆ é™¤æ•°æ®rm -rf /var/lib/mysql/*#æ¸…ç©ºäº‹åŠ¡innobackupex --user=root --password=abc123456 --apply-back /data/backup/full/2018-04-15_05-09-07/#è¿˜åŸæ•°æ®innobackupex --user=root --password=abc123456 --copy-back  /data/backup/full/2018-04-15_05-09-07/</code></pre><p>é‡æ–°åˆ›å»ºå…¶ä½™4ä¸ªèŠ‚ç‚¹ï¼Œç»„ä»¶PXCé›†ç¾¤</p></li></ol><h2 id="å®‰è£…Redisï¼Œé…ç½®RedisClusteré›†ç¾¤"><a href="#å®‰è£…Redisï¼Œé…ç½®RedisClusteré›†ç¾¤" class="headerlink" title="å®‰è£…Redisï¼Œé…ç½®RedisClusteré›†ç¾¤"></a>å®‰è£…Redisï¼Œé…ç½®RedisClusteré›†ç¾¤</h2><ol><li><p>å®‰è£…Redisé•œåƒ</p><pre><code class="shell">docker pull yyyyttttwwww/redis</code></pre></li><li><p>åˆ›å»ºnet2ç½‘æ®µ</p><pre><code class="shell">docker network create --subnet=172.19.0.0/16 net2</code></pre></li><li><p>åˆ›å»º6èŠ‚ç‚¹Rediså®¹å™¨</p><pre><code class="shell">docker run -it -d --name r1 -p 5001:6379 --net=net2 --ip 172.19.0.2 redis bashdocker run -it -d --name r2 -p 5002:6379 --net=net2 --ip 172.19.0.3 redis bashdocker run -it -d --name r3 -p 5003:6379 --net=net2 --ip 172.19.0.4 redis bashdocker run -it -d --name r4 -p 5004:6379 --net=net2 --ip 172.19.0.5 redis bashdocker run -it -d --name r5 -p 5005:6379 --net=net2 --ip 172.19.0.6 redis bash</code></pre></li><li><p>å¯åŠ¨6èŠ‚ç‚¹RedisæœåŠ¡å™¨</p><pre><code class="shell">#è¿›å…¥r1èŠ‚ç‚¹docker exec -it r1 bashcp /home/redis/redis.conf /usr/redis/redis.confcd /usr/redis/src./redis-server ../redis.conf#è¿›å…¥r2èŠ‚ç‚¹docker exec -it r2 bashcp /home/redis/redis.conf /usr/redis/redis.confcd /usr/redis/src./redis-server ../redis.conf#è¿›å…¥r3èŠ‚ç‚¹docker exec -it r3 bashcp /home/redis/redis.conf /usr/redis/redis.confcd /usr/redis/src./redis-server ../redis.conf#è¿›å…¥r4èŠ‚ç‚¹docker exec -it r4 bashcp /home/redis/redis.conf /usr/redis/redis.confcd /usr/redis/src./redis-server ../redis.conf#è¿›å…¥r5èŠ‚ç‚¹docker exec -it r5 bashcp /home/redis/redis.conf /usr/redis/redis.confcd /usr/redis/src./redis-server ../redis.conf#è¿›å…¥r6èŠ‚ç‚¹docker exec -it r6 bashcp /home/redis/redis.conf /usr/redis/redis.confcd /usr/redis/src./redis-server ../redis.conf</code></pre></li><li><p>åˆ›å»ºClusteré›†ç¾¤</p><pre><code class="shell">#åœ¨r1èŠ‚ç‚¹ä¸Šæ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤cd /usr/redis/srcmkdir -p ../clustercp redis-trib.rb ../cluster/cd ../cluster#åˆ›å»ºClusteré›†ç¾¤./redis-trib.rb create --replicas 1 172.19.0.2:6379 172.19.0.3:6379 172.19.0.4:6379 172.19.0.5:6379 172.19.0.6:6379 172.19.0.7:6379</code></pre></li></ol><h2 id="æ‰“åŒ…éƒ¨ç½²åç«¯é¡¹ç›®"><a href="#æ‰“åŒ…éƒ¨ç½²åç«¯é¡¹ç›®" class="headerlink" title="æ‰“åŒ…éƒ¨ç½²åç«¯é¡¹ç›®"></a>æ‰“åŒ…éƒ¨ç½²åç«¯é¡¹ç›®</h2><ol><li><p>è¿›å…¥äººäººå¼€æºåç«¯é¡¹ç›®ï¼Œæ‰§è¡Œæ‰“åŒ…ï¼ˆä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ›´æ”¹ç«¯å£ï¼Œæ‰“åŒ…ä¸‰æ¬¡ç”Ÿæˆä¸‰ä¸ªJARæ–‡ä»¶ï¼‰</p><pre><code class="shell">mvn clean install -Dmaven.test.skip=true</code></pre></li><li><p>å®‰è£…Javaé•œåƒ</p><pre><code class="shell">docker pull java</code></pre></li><li><p>åˆ›å»º3èŠ‚ç‚¹Javaå®¹å™¨</p><pre><code class="shell">#åˆ›å»ºæ•°æ®å·ï¼Œä¸Šä¼ JARæ–‡ä»¶docker volume create j1#å¯åŠ¨å®¹å™¨docker run -it -d --name j1 -v j1:/home/soft --net=host java#è¿›å…¥j1å®¹å™¨docker exec -it j1 bash#å¯åŠ¨Javaé¡¹ç›®nohup java -jar /home/soft/renren-fast.jar#åˆ›å»ºæ•°æ®å·ï¼Œä¸Šä¼ JARæ–‡ä»¶docker volume create j2#å¯åŠ¨å®¹å™¨docker run -it -d --name j2 -v j2:/home/soft --net=host java#è¿›å…¥j1å®¹å™¨docker exec -it j2 bash#å¯åŠ¨Javaé¡¹ç›®nohup java -jar /home/soft/renren-fast.jar#åˆ›å»ºæ•°æ®å·ï¼Œä¸Šä¼ JARæ–‡ä»¶docker volume create j3#å¯åŠ¨å®¹å™¨docker run -it -d --name j3 -v j3:/home/soft --net=host java#è¿›å…¥j1å®¹å™¨docker exec -it j3 bash#å¯åŠ¨Javaé¡¹ç›®nohup java -jar /home/soft/renren-fast.jar</code></pre></li><li><p>å®‰è£…Nginxé•œåƒ</p><pre><code class="shell">docker pull nginx</code></pre></li><li><p>åˆ›å»ºNginxå®¹å™¨ï¼Œé…ç½®è´Ÿè½½å‡è¡¡</p><p>å®¿ä¸»æœºä¸Š/home/n1/nginx.confé…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="properties">user  nginx;worker_processes  1;error_log  /var/log/nginx/error.log warn;pid        /var/run/nginx.pid;events {    worker_connections  1024;}http {    include       /etc/nginx/mime.types;    default_type  application/octet-stream;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  /var/log/nginx/access.log  main;    sendfile        on;    #tcp_nopush     on;    keepalive_timeout  65;    #gzip  on;    proxy_redirect          off;    proxy_set_header        Host $host;    proxy_set_header        X-Real-IP $remote_addr;    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;    client_max_body_size    10m;    client_body_buffer_size   128k;    proxy_connect_timeout   5s;    proxy_send_timeout      5s;    proxy_read_timeout      5s;    proxy_buffer_size        4k;    proxy_buffers           4 32k;    proxy_busy_buffers_size  64k;    proxy_temp_file_write_size 64k;    upstream tomcat {        server 192.168.99.104:6001;        server 192.168.99.104:6002;        server 192.168.99.104:6003;    }    server {        listen       6101;        server_name  192.168.99.104;        location / {            proxy_pass   http://tomcat;            index  index.html index.htm;        }    }}</code></pre><p>åˆ›å»ºç¬¬1ä¸ªNginxèŠ‚ç‚¹</p><pre><code class="shell">docker run -it -d --name n1 -v /home/n1/nginx.conf:/etc/nginx/nginx.conf --net=host --privileged nginx</code></pre><p>å®¿ä¸»æœºä¸Š/home/n2/nginx.confé…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="properties">user  nginx;worker_processes  1;error_log  /var/log/nginx/error.log warn;pid        /var/run/nginx.pid;events {    worker_connections  1024;}http {    include       /etc/nginx/mime.types;    default_type  application/octet-stream;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  /var/log/nginx/access.log  main;    sendfile        on;    #tcp_nopush     on;    keepalive_timeout  65;    #gzip  on;    proxy_redirect          off;    proxy_set_header        Host $host;    proxy_set_header        X-Real-IP $remote_addr;    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;    client_max_body_size    10m;    client_body_buffer_size   128k;    proxy_connect_timeout   5s;    proxy_send_timeout      5s;    proxy_read_timeout      5s;    proxy_buffer_size        4k;    proxy_buffers           4 32k;    proxy_busy_buffers_size  64k;    proxy_temp_file_write_size 64k;    upstream tomcat {        server 192.168.99.104:6001;        server 192.168.99.104:6002;        server 192.168.99.104:6003;    }    server {        listen       6102;        server_name  192.168.99.104;        location / {            proxy_pass   http://tomcat;            index  index.html index.htm;        }    }}</code></pre><p>åˆ›å»ºç¬¬2ä¸ªNginxèŠ‚ç‚¹</p><pre><code class="shell">docker run -it -d --name n2 -v /home/n2/nginx.conf:/etc/nginx/nginx.conf --net=host --privileged nginx</code></pre></li><li><p>åœ¨Nginxå®¹å™¨å®‰è£…Keepalived</p><pre><code class="shell">#è¿›å…¥n1èŠ‚ç‚¹docker exec -it n1 bash#æ›´æ–°è½¯ä»¶åŒ…apt-get update#å®‰è£…VIMapt-get install vim#å®‰è£…Keepalivedapt-get install keepalived#ç¼–è¾‘Keepalivedé…ç½®æ–‡ä»¶(å¦‚ä¸‹)vim /etc/keepalived/keepalived.conf#å¯åŠ¨Keepalivedservice keepalived start</code></pre><pre><code>vrrp_instance VI_1 {    state MASTER    interface ens33    virtual_router_id 51    priority 100    advert_int 1    authentication {        auth_type PASS        auth_pass 123456    }    virtual_ipaddress {        192.168.99.151    }}virtual_server 192.168.99.151 6201 {    delay_loop 3    lb_algo rr    lb_kind NAT    persistence_timeout 50    protocol TCP    real_server 192.168.99.104 6101 {        weight 1    }}</code></pre><pre><code class="shell">#è¿›å…¥n1èŠ‚ç‚¹docker exec -it n2 bash#æ›´æ–°è½¯ä»¶åŒ…apt-get update#å®‰è£…VIMapt-get install vim#å®‰è£…Keepalivedapt-get install keepalived#ç¼–è¾‘Keepalivedé…ç½®æ–‡ä»¶(å¦‚ä¸‹)vim /etc/keepalived/keepalived.conf#å¯åŠ¨Keepalivedservice keepalived start</code></pre><pre><code class="shell">vrrp_instance VI_1 {    state MASTER    interface ens33    virtual_router_id 51    priority 100    advert_int 1    authentication {        auth_type PASS        auth_pass 123456    }    virtual_ipaddress {        192.168.99.151    }}virtual_server 192.168.99.151 6201 {    delay_loop 3    lb_algo rr    lb_kind NAT    persistence_timeout 50    protocol TCP    real_server 192.168.99.104 6102 {        weight 1    }}</code></pre></li></ol><h2 id="æ‰“åŒ…éƒ¨ç½²åç«¯é¡¹ç›®-1"><a href="#æ‰“åŒ…éƒ¨ç½²åç«¯é¡¹ç›®-1" class="headerlink" title="æ‰“åŒ…éƒ¨ç½²åç«¯é¡¹ç›®"></a>æ‰“åŒ…éƒ¨ç½²åç«¯é¡¹ç›®</h2><ol><li><p>åœ¨å‰ç«¯é¡¹ç›®è·¯å¾„ä¸‹æ‰§è¡Œæ‰“åŒ…æŒ‡ä»¤</p><pre><code class="shell">npm run build</code></pre></li><li><p>buildç›®å½•çš„æ–‡ä»¶æ‹·è´åˆ°å®¿ä¸»æœºçš„/home/fn1/renren-vueã€/home/fn2/renren-vueã€/home/fn3/renren-vueçš„ç›®å½•ä¸‹é¢</p></li><li><p>åˆ›å»º3èŠ‚ç‚¹çš„Nginxï¼Œéƒ¨ç½²å‰ç«¯é¡¹ç›®</p><p>å®¿ä¸»æœº/home/fn1/nginx.confçš„é…ç½®æ–‡ä»¶</p><pre><code>user  nginx;worker_processes  1;error_log  /var/log/nginx/error.log warn;pid        /var/run/nginx.pid;events {    worker_connections  1024;}http {    include       /etc/nginx/mime.types;    default_type  application/octet-stream;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  /var/log/nginx/access.log  main;    sendfile        on;    #tcp_nopush     on;    keepalive_timeout  65;    #gzip  on;    proxy_redirect          off;    proxy_set_header        Host $host;    proxy_set_header        X-Real-IP $remote_addr;    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;    client_max_body_size    10m;    client_body_buffer_size   128k;    proxy_connect_timeout   5s;    proxy_send_timeout      5s;    proxy_read_timeout      5s;    proxy_buffer_size        4k;    proxy_buffers           4 32k;    proxy_busy_buffers_size  64k;    proxy_temp_file_write_size 64k;    server {        listen 6501;        server_name  192.168.99.104;        location  /  {            root  /home/fn1/renren-vue;            index  index.html;        }    }}</code></pre><pre><code class="shell">#å¯åŠ¨ç¬¬fn1èŠ‚ç‚¹docker run -it -d --name fn1 -v /home/fn1/nginx.conf:/etc/nginx/nginx.conf -v /home/fn1/renren-vue:/home/fn1/renren-vue --privileged --net=host nginx</code></pre><p>å®¿ä¸»æœº/home/fn2/nginx.confçš„é…ç½®æ–‡ä»¶</p><pre><code class="shell">user  nginx;worker_processes  1;error_log  /var/log/nginx/error.log warn;pid        /var/run/nginx.pid;events {    worker_connections  1024;}http {    include       /etc/nginx/mime.types;    default_type  application/octet-stream;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  /var/log/nginx/access.log  main;    sendfile        on;    #tcp_nopush     on;    keepalive_timeout  65;    #gzip  on;    proxy_redirect          off;    proxy_set_header        Host $host;    proxy_set_header        X-Real-IP $remote_addr;    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;    client_max_body_size    10m;    client_body_buffer_size   128k;    proxy_connect_timeout   5s;    proxy_send_timeout      5s;    proxy_read_timeout      5s;    proxy_buffer_size        4k;    proxy_buffers           4 32k;    proxy_busy_buffers_size  64k;    proxy_temp_file_write_size 64k;    server {        listen 6502;        server_name  192.168.99.104;        location  /  {            root  /home/fn2/renren-vue;            index  index.html;        }    }}</code></pre><pre><code class="shell">#å¯åŠ¨ç¬¬fn2èŠ‚ç‚¹docker run -it -d --name fn2 -v /home/fn2/nginx.conf:/etc/nginx/nginx.conf -v /home/fn2/renren-vue:/home/fn2/renren-vue --privileged --net=host nginx</code></pre><p>å®¿ä¸»æœº/home/fn3/nginx.confçš„é…ç½®æ–‡ä»¶</p><pre><code class="shell">user  nginx;worker_processes  1;error_log  /var/log/nginx/error.log warn;pid        /var/run/nginx.pid;events {    worker_connections  1024;}http {    include       /etc/nginx/mime.types;    default_type  application/octet-stream;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  /var/log/nginx/access.log  main;    sendfile        on;    #tcp_nopush     on;    keepalive_timeout  65;    #gzip  on;    proxy_redirect          off;    proxy_set_header        Host $host;    proxy_set_header        X-Real-IP $remote_addr;    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;    client_max_body_size    10m;    client_body_buffer_size   128k;    proxy_connect_timeout   5s;    proxy_send_timeout      5s;    proxy_read_timeout      5s;    proxy_buffer_size        4k;    proxy_buffers           4 32k;    proxy_busy_buffers_size  64k;    proxy_temp_file_write_size 64k;    server {        listen 6503;        server_name  192.168.99.104;        location  /  {            root  /home/fn3/renren-vue;            index  index.html;        }    }}</code></pre><p>å¯åŠ¨fn3èŠ‚ç‚¹</p><pre><code class="shell">#å¯åŠ¨ç¬¬fn3èŠ‚ç‚¹docker run -it -d --name fn3 -v /home/fn3/nginx.conf:/etc/nginx/nginx.conf -v /home/fn3/renren-vue:/home/fn3/renren-vue --privileged --net=host nginx</code></pre></li><li><p>é…ç½®è´Ÿè½½å‡è¡¡</p><p>å®¿ä¸»æœº/home/ff1/nginx.confé…ç½®æ–‡ä»¶</p><pre><code class="shell">user  nginx;worker_processes  1;error_log  /var/log/nginx/error.log warn;pid        /var/run/nginx.pid;events {    worker_connections  1024;}http {    include       /etc/nginx/mime.types;    default_type  application/octet-stream;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  /var/log/nginx/access.log  main;    sendfile        on;    #tcp_nopush     on;    keepalive_timeout  65;    #gzip  on;    proxy_redirect          off;    proxy_set_header        Host $host;    proxy_set_header        X-Real-IP $remote_addr;    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;    client_max_body_size    10m;    client_body_buffer_size   128k;    proxy_connect_timeout   5s;    proxy_send_timeout      5s;    proxy_read_timeout      5s;    proxy_buffer_size        4k;    proxy_buffers           4 32k;    proxy_busy_buffers_size  64k;    proxy_temp_file_write_size 64k;    upstream fn {        server 192.168.99.104:6501;        server 192.168.99.104:6502;        server 192.168.99.104:6503;    }    server {        listen       6601;        server_name  192.168.99.104;        location / {            proxy_pass   http://fn;            index  index.html index.htm;        }    }}</code></pre><pre><code class="shell">#å¯åŠ¨ff1èŠ‚ç‚¹docker run -it -d --name ff1 -v /home/ff1/nginx.conf:/etc/nginx/nginx.conf --net=host --privileged nginx</code></pre><p>å®¿ä¸»æœº/home/ff2/nginx.confé…ç½®æ–‡ä»¶</p><pre><code class="shell">user  nginx;worker_processes  1;error_log  /var/log/nginx/error.log warn;pid        /var/run/nginx.pid;events {    worker_connections  1024;}http {    include       /etc/nginx/mime.types;    default_type  application/octet-stream;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  /var/log/nginx/access.log  main;    sendfile        on;    #tcp_nopush     on;    keepalive_timeout  65;    #gzip  on;    proxy_redirect          off;    proxy_set_header        Host $host;    proxy_set_header        X-Real-IP $remote_addr;    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;    client_max_body_size    10m;    client_body_buffer_size   128k;    proxy_connect_timeout   5s;    proxy_send_timeout      5s;    proxy_read_timeout      5s;    proxy_buffer_size        4k;    proxy_buffers           4 32k;    proxy_busy_buffers_size  64k;    proxy_temp_file_write_size 64k;    upstream fn {        server 192.168.99.104:6501;        server 192.168.99.104:6502;        server 192.168.99.104:6503;    }    server {        listen       6602;        server_name  192.168.99.104;        location / {            proxy_pass   http://fn;            index  index.html index.htm;        }    }}</code></pre><pre><code class="shell">#å¯åŠ¨ff2èŠ‚ç‚¹docker run -it -d --name ff2 -v /home/ff2/nginx.conf:/etc/nginx/nginx.conf --net=host --privileged nginx</code></pre></li><li><p>é…ç½®åŒæœºçƒ­å¤‡</p><pre><code class="shell">#è¿›å…¥ff1èŠ‚ç‚¹docker exec -it ff1 bash#æ›´æ–°è½¯ä»¶åŒ…apt-get update#å®‰è£…VIMapt-get install vim#å®‰è£…Keepalivedapt-get install keepalived#ç¼–è¾‘Keepalivedé…ç½®æ–‡ä»¶(å¦‚ä¸‹)vim /etc/keepalived/keepalived.conf#å¯åŠ¨Keepalivedservice keepalived start</code></pre><pre><code class="shell">vrrp_instance VI_1 {    state MASTER    interface ens33    virtual_router_id 52    priority 100    advert_int 1    authentication {        auth_type PASS        auth_pass 123456    }    virtual_ipaddress {        192.168.99.152    }}virtual_server 192.168.99.151 6701 {    delay_loop 3    lb_algo rr    lb_kind NAT    persistence_timeout 50    protocol TCP    real_server 192.168.99.104 6601 {        weight 1    }}</code></pre><pre><code class="shell">#è¿›å…¥ff1èŠ‚ç‚¹docker exec -it ff2 bash#æ›´æ–°è½¯ä»¶åŒ…apt-get update#å®‰è£…VIMapt-get install vim#å®‰è£…Keepalivedapt-get install keepalived#ç¼–è¾‘Keepalivedé…ç½®æ–‡ä»¶(å¦‚ä¸‹)vim /etc/keepalived/keepalived.conf#å¯åŠ¨Keepalivedservice keepalived start</code></pre><pre><code class="shell">vrrp_instance VI_1 {    state MASTER    interface ens33    virtual_router_id 52    priority 100    advert_int 1    authentication {        auth_type PASS        auth_pass 123456    }    virtual_ipaddress {        192.168.99.152    }}virtual_server 192.168.99.151 6701 {    delay_loop 3    lb_algo rr    lb_kind NAT    persistence_timeout 50    protocol TCP    real_server 192.168.99.104 6602 {        weight 1    }}</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬09ç« -è¯¾ç¨‹æ€»ç»“</title>
      <link href="/imooc/219-docker/09-summary/"/>
      <url>/imooc/219-docker/09-summary/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å›é¡¾renren-fastæ¡ˆä¾‹çš„éƒ¨ç½²æ¶æ„</p></blockquote><p>@[TOC]</p><h3 id="9-1-è¯¾ç¨‹æ€»ç»“"><a href="#9-1-è¯¾ç¨‹æ€»ç»“" class="headerlink" title="9-1 è¯¾ç¨‹æ€»ç»“"></a>9-1 è¯¾ç¨‹æ€»ç»“</h3><p>éƒ¨ç½²æµç¨‹ï¼š</p><p>ã€æ•°æ®åº“ã€‘-ã€Redisã€‘-ã€åç«¯é¡¹ç›®ã€‘-ã€å‰ç«¯é¡¹ç›®ã€‘</p><p>å‰ç«¯éƒ¨ç½²æ–¹æ¡ˆï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1okfdej30om07b0t2.jpg" alt="å‰ç«¯éƒ¨ç½²æ–¹æ¡ˆ" style="zoom:50%;" /><p>åç«¯éƒ¨ç½²æ–¹æ¡ˆï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1pgdzqj30ow07g3yt.jpg" alt="åç«¯éƒ¨ç½²æ–¹æ¡ˆ" style="zoom:50%;" /><p>æ•°æ®åº“é›†ç¾¤éƒ¨ç½²æ–¹æ¡ˆï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1qboknj30t70acdgb.jpg" alt="æ•°æ®åº“é›†ç¾¤éƒ¨ç½²æ–¹æ¡ˆ" style="zoom:50%;" /><p>Redisé›†ç¾¤éƒ¨ç½²æ–¹æ¡ˆï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1qt38kj30ht06xwek.jpg" alt="Redisé›†ç¾¤éƒ¨ç½²æ–¹æ¡ˆ" style="zoom:50%;" /><p>å­¦ä¹ æˆæœï¼š</p><ul><li><p>é€šè¿‡Dockerç¯å¢ƒä¸­éƒ¨ç½²æ•°æ®åº“ã€é«˜é€Ÿç¼“å­˜å’Œå‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¯ä»¥ä¸¾ä¸€åä¸‰ï¼Œåœ¨Dockerä¸­éƒ¨ç½²æ›´åŠ å¤æ‚çš„å¤§å‹é¡¹ç›®</p><p>ã€å‰åç«¯åˆ†ç¦»é¡¹ç›®ã€‘â€“æ¼”è¿›â€“ã€å¾®æœåŠ¡ã€‘</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬08ç« -äº‘å¹³å°éƒ¨ç½²å‰åç«¯åˆ†ç¦»</title>
      <link href="/imooc/219-docker/08-cloud-deploy/"/>
      <url>/imooc/219-docker/08-cloud-deploy/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬è¯¾ç¨‹çš„æ¡ˆä¾‹æ—¢å¯ä»¥éƒ¨ç½²åœ¨æœ¬åœ°ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨äº‘å¹³å°ï¼Œæœ¬ç« æˆ‘ä»¬å°†æ¯”è¾ƒé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€ç™¾åº¦äº‘çš„ç‰¹ç‚¹ï¼Œä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼Œä»‹ç»äº‘ä¸»æœºçš„è´­ä¹°å’Œä½¿ç”¨ï¼Œä»¥åŠåœ¨é˜¿é‡Œäº‘ECSä¸»æœºä¸Šéƒ¨ç½²æœ¬è¯¾ç¨‹çš„ç›¸å…³ç¨‹åºã€‚</p></blockquote><p>@[TOC]</p><h3 id="8-1-äº‘ç«¯éƒ¨ç½²"><a href="#8-1-äº‘ç«¯éƒ¨ç½²" class="headerlink" title="8-1 äº‘ç«¯éƒ¨ç½²"></a>8-1 äº‘ç«¯éƒ¨ç½²</h3><p>äº‘å¹³å°åˆ†ç±»ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1nl1gcj30m80ag0t7.jpg" alt="äº‘å¹³å°åˆ†ç±»" style="zoom: 50%;" /><ul><li><p>IaaS</p><p>æä¾›è™šæ‹Ÿä¸»æœºï¼Œå„ç§ç¡¬ä»¶é…ç½®çš„æ”¯æŒ</p></li><li><p>PaaS</p><p>è™šæ‹Ÿæœºæä¾›MySQLï¼ŒTomcatç­‰è½¯ä»¶</p></li><li><p>SaaS</p><p>è™šæ‹Ÿæœºæä¾›å®šåˆ¶å¼€å‘ç³»ç»Ÿ</p></li></ul><p>å›½å†…ä¸»æµäº‘å¹³å°ï¼š</p><ul><li><p>ç™¾åº¦äº‘</p><p>å€¾å‘äºGoogleçš„è®¾è®¡æ€è·¯ï¼Œåˆ©ç”¨æœç´¢å¼•æ“çš„æŠ€æœ¯ç‰¹é•¿åœ¨åŸºç¡€è®¾æ–½ä¸Šå°è£…PaaSäº‘å’ŒSaaSäº‘ï¼Œä¾‹å¦‚åˆ†å¸ƒå¼æ•°æ®è®¡ç®—ï¼Œæµ·é‡æ•°æ®å¤„ç†</p></li><li><p>é˜¿é‡Œäº‘</p><p>å€¾å‘äºäºšé©¬é€Šçš„è®¾è®¡æ€è·¯ï¼Œè½¬ç§ŸåŸºç¡€è®¾æ–½ï¼ˆIaaSã€PaaSï¼‰ã€‚AWS</p></li><li><p>è…¾è®¯äº‘</p><p>PaaSäº‘</p></li></ul><pre><code class="shell"># æ›´æ–°è½¯ä»¶# CentOSyum -y update# Ubuntuapt-get update# å®‰è£…Dockeryum -y install docker# å¯åŠ¨Dockerè™šæ‹Ÿæœºservice docker start# å®‰è£…PXCé•œåƒdocker pull parcona/percona-xtradb-clusterdocker tag parcona/percona-xtradb-cluster pxcdocker rmi parcona/percona-xtradb-cluster# åˆ©ç”¨æœåŠ¡å™¨ç§æœ‰IPï¼Œæ­å»ºSwarmé›†ç¾¤docker swarm init --listen-addr 172.31.8.139 -advertise-addr 172.31.8.139# åˆ›å»ºå…±äº«ç½‘ç»œdocker network create -d overlay --attachable net1# åˆ›å»ºæ•°æ®åº“èŠ‚ç‚¹çš„æ•°æ®å·docker volume create v1docker volume create backup# åˆ›å»ºæ•°æ®åº“èŠ‚ç‚¹docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -e CLUSTER_NAME=PXC -e XTRABACKUP_PASSWORD=123456 -v v1:/var/lib/mysql -v backup:/data --privileged --name=node1 --net=net1 pxc# å¼€æ”¾å®¿ä¸»æœº3306ç«¯å£</code></pre><p>å¼€æ”¾é˜¿é‡Œäº‘å®¿ä¸»æœºç«¯å£ï¼š</p><p>ã€äº‘æœåŠ¡å™¨ECSã€‘-ã€ç½‘ç»œå’Œå®‰å…¨ã€‘-ã€å®‰å…¨ç»„ã€‘-ã€é…ç½®è§„åˆ™ã€‘-ã€å¿«é€Ÿåˆ›å»ºè§„åˆ™ã€‘</p>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬07ç« -è¯¾åä½œä¸š</title>
      <link href="/imooc/219-docker/07-homework/"/>
      <url>/imooc/219-docker/07-homework/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¿—è¯è¯´â€œé¸¡è›‹ä¸è¦æ”¾åœ¨åŒä¸€ä¸ªç¯®å­é‡Œâ€ï¼Œæ‰€ä»¥è¦å¯¹æœ¬åœ°éƒ¨ç½²æ–¹æ¡ˆæ”¹é€ æˆè·¨ä¸»æœºçš„è¿è¥å¹³å°ã€‚æˆ‘ä»¬å°†åˆ›å»ºå››ä¸ªLinuxä¸»æœºï¼Œåˆ©ç”¨SwarmæŠ€æœ¯ç»„å»ºDockeré›†ç¾¤ã€‚é€šè¿‡Swarmçš„å…±äº«ç½‘ç»œï¼Œç»„å»ºèµ·å¤šä¸»æœºå¤šå®¹å™¨åˆ†å¸ƒå¼éƒ¨ç½²çš„è¿è¥å¹³å°ã€‚</p></blockquote><p>@[TOC]</p><h3 id="7-1-è¯¾åä½œä¸šï¼ˆä¸Šï¼‰"><a href="#7-1-è¯¾åä½œä¸šï¼ˆä¸Šï¼‰" class="headerlink" title="7-1 è¯¾åä½œä¸šï¼ˆä¸Šï¼‰"></a>7-1 è¯¾åä½œä¸šï¼ˆä¸Šï¼‰</h3><ol><li>åˆ›å»ºSwarmé›†ç¾¤</li><li>æ­å»ºPXCé›†ç¾¤</li></ol><blockquote><p>å¦‚æœæ‰€æœ‰èŠ‚ç‚¹éƒ½éƒ¨ç½²åœ¨åŒä¸€å°å®¿ä¸»æœºä¸­ï¼Œå½“å®¿ä¸»æœºå®•æœºç¨‹åºå°†ä¼šå´©æºƒã€‚</p><p>æ­¤æ—¶ï¼Œåº”é‡‡ç”¨å¤šå®¿ä¸»æœºéƒ¨ç½²ä¸åŒçš„èŠ‚ç‚¹ã€‚</p></blockquote><p>Docker Swarmï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gimo8truj30rs0kd3zq.jpg" alt="å¤šå®¿ä¸»æœºéƒ¨ç½²-Docker Swarm" style="zoom: 30%;" /><p>Google K8Sï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gimnqf0dj30ro0kh3zp.jpg" alt="å¤šå®¿ä¸»æœºéƒ¨ç½²-Google K8S" style="zoom:30%;" /><p>Dockerä¸‰å‰‘å®¢ï¼š</p><ul><li><p>docker-machineï¼šå®¹å™¨æœåŠ¡</p></li><li><p>docker-composeï¼šè„šæœ¬æ‰§è¡ŒæœåŠ¡</p></li><li><p>docker-swarmï¼šå®¹å™¨é›†ç¾¤</p></li></ul><p>docker-swarmå»ä¸­å¿ƒåŒ–çš„è®¾è®¡</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gimoro5yj316g0e60ui.jpg" alt="docker-swarmå»ä¸­å¿ƒåŒ–çš„è®¾è®¡" style="zoom:40%;" /><p>æ³¨ï¼š</p><ul><li><p>ManagerèŠ‚ç‚¹æ˜¯ç®¡ç†swarmé›†ç¾¤ï¼Œæ‰¿æ‹…workerèŠ‚ç‚¹çš„å·¥ä½œ</p></li><li><p>WorkerèŠ‚ç‚¹æ˜¯è¿è¡Œå®¹å™¨éƒ¨ç½²é¡¹ç›®</p><p>MangerèŠ‚ç‚¹å’ŒWorkerèŠ‚ç‚¹éƒ½å¯é…ç½®å¤šèŠ‚ç‚¹</p></li></ul><p>åˆ›å»ºSwarmé›†ç¾¤ï¼š</p><pre><code class="shell">docker swarm init</code></pre><p>æ³¨ï¼š</p><ul><li><p><code>listen-addr ip:port</code>ï¼šç®¡ç†è€…èŠ‚ç‚¹</p><p>åˆ›å»ºSwarmé›†ç¾¤æ—¶ï¼Œå¿…é¡»åº”è¯¥å«æœ‰ä¸€ä¸ªç®¡ç†è€…èŠ‚ç‚¹</p><p>ä¸å­˜åœ¨æ²¡æœ‰ç®¡ç†è€…çš„Swarmé›†ç¾¤</p></li><li><p><code>advertise-addr ip</code>ï¼šå¹¿æ’­åœ°å€</p><p>å…¶ä»–èŠ‚ç‚¹è®¿é—®å¹¿æ’­åœ°å€çš„IPèƒ½åŠ å…¥åˆ°Swarmé›†ç¾¤</p></li></ul><p>åŠ å…¥Swarmé›†ç¾¤ï¼š</p><blockquote><p>åˆ›å»ºSwarmé›†ç¾¤åï¼Œå‘½ä»¤è¡Œä¼šå‡ºç°æç¤ºæ–‡å­—ã€‚åªéœ€å°†è¯¥æ–‡å­—å¤åˆ¶åˆ°å…¶ä»–DockerèŠ‚ç‚¹å¹¶æ‰§è¡Œå³å¯åŠ å…¥Swarmé›†ç¾¤ã€‚æ­¤æ–¹æ³•åªèƒ½ä»¥Workerçš„èº«ä»½åŠ å…¥é›†ç¾¤ã€‚</p></blockquote><pre><code class="shell"># åœ¨ç®¡ç†è€…èŠ‚ç‚¹æ‰§è¡Œ...docker swarm join-token managerdocker swarm join-token worker</code></pre><p>æ³¨ï¼š</p><ul><li>æ·»åŠ manageræˆ–è€…workerèŠ‚ç‚¹åˆ°é›†ç¾¤ï¼Œåªè¦æ‰§è¡Œå¯¹åº”çš„å‘½ä»¤å³å¯</li></ul><p>åˆ›å»º4ä¸ªCentosç³»ç»ŸæœåŠ¡å™¨ã€‚</p><p>1ã€2å·æœåŠ¡å™¨ä¸ºmanagerèŠ‚ç‚¹ï¼Œ3ã€4å·æœåŠ¡å™¨ä¸ºworkerèŠ‚ç‚¹ã€‚</p><pre><code class="shell"># 1å·æœåŠ¡å™¨docker swarm initdocker swarm join-token managerdocker swarm join-token worker# 2å·æœåŠ¡å™¨ docker swarm join-token managerdocker swarm join --token ....... IP:PORT# 3å·æœåŠ¡å™¨ docker swarm join-token workerdocker swarm join --token ....... IP:PORT# 4å·æœåŠ¡å™¨ docker swarm join-token workerdocker swarm join --token ....... IP:PORT</code></pre><p>æŸ¥çœ‹Swarmé›†ç¾¤èŠ‚ç‚¹ï¼š</p><pre><code class="shell">docker node ls</code></pre><p>æ³¨ï¼š</p><ul><li>åªå¯ä»¥åœ¨ManagerèŠ‚ç‚¹æ‰§è¡Œè¯¥å‘½ä»¤</li></ul><p>æŸ¥çœ‹Swarmé›†ç¾¤ç½‘ç»œï¼š</p><pre><code class="shell">docker network ls# è¾“å‡º.... ingress overlay swarm</code></pre><p>åˆ›å»ºå…±äº«ç½‘ç»œ</p><pre><code class="shell">docker network create -d overlay --attachable share_net_name</code></pre><p>æ³¨ï¼š</p><ul><li>ingressç½‘ç»œç”¨äºç®¡ç†Swarmé›†ç¾¤ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºæ–°çš„å…±äº«ç½‘ç»œä¼ è¾“ä¸šåŠ¡æ•°æ®ã€‚</li></ul><p>åˆ›å»ºå¤šå®¿ä¸»æœºPXCé›†ç¾¤ï¼š</p><pre><code class="shell"># å®‰è£…PXCé•œåƒdocker pull percona/percona-xtradb-cluster# å¯¹PXCé•œåƒè¿›è¡Œæ”¹ådocker tag percona/percona-xtradb-cluster pxcdocker rmi percona/percona-xtradb-cluster# åˆ›å»ºæ•°æ®å·docker volume create v1docker volume create backup# åˆ›å»ºPXCå®¹å™¨docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -e CLUSTER_NAME=PXC -e XTRABACKUP_PASSWORD=123456 -v v1:/var/lib/mysql -v backup:/data --privileged --name=node1 --net=share_net_name pxc</code></pre><p>åˆ›å»ºå®¹å™¨ï¼š</p><pre><code class="shell">docker run -it --net=share_net_name ...</code></pre><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1fl31hj30qg07amy6.jpg" alt="åˆ›å»ºå¤šå®¿ä¸»æœºPXCå®¹å™¨" style="zoom:33%;" /><h3 id="7-2-è¯¾åä½œä¸šï¼ˆä¸­ï¼‰"><a href="#7-2-è¯¾åä½œä¸šï¼ˆä¸­ï¼‰" class="headerlink" title="7-2 è¯¾åä½œä¸šï¼ˆä¸­ï¼‰"></a>7-2 è¯¾åä½œä¸šï¼ˆä¸­ï¼‰</h3><ol><li>Swarmå®¹å™¨é›†ç¾¤</li><li>é€€å‡ºSwarmé›†ç¾¤</li></ol><p>æŸ¥çœ‹å®¹å™¨çš„IPåœ°å€</p><pre><code class="shell"># 1å·æœåŠ¡å™¨# æŸ¥çœ‹Dockerå®¹å™¨çš„IPåœ°å€docker inspect node1docker inspect node2</code></pre><p>Swarmå®¹å™¨é›†ç¾¤</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1i88iaj318o0llwl8.jpg" alt="å®¹å™¨é›†ç¾¤" style="zoom:30%;" /><p>Swarmåªæ˜¯ç®¡ç†å®¹å™¨çŠ¶æ€ï¼Œæ²¡æœ‰å®ç°è´Ÿè½½å‡è¡¡</p><p>å®¹å™¨é›†ç¾¤é€‚åˆåœºæ™¯ï¼š</p><ul><li><p>å®¹å™¨é›†ç¾¤ä¸é€‚åˆæœ‰çŠ¶æ€ç¨‹åºï¼Œä¾‹å¦‚æ•°æ®åº“ã€ç¼“å­˜ç­‰ã€‚</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1iw2rdj30vo0e9gnp.jpg" alt="å®¹å™¨é›†ç¾¤æ•°æ®åº“ç¨‹åº" style="zoom:45%;" /></li></ul><p>åªæ˜¯ç”¨DockerSwarmæä¾›çš„å…±äº«ç½‘ç»œï¼Œè€Œä¸è½»æ˜“ä½¿ç”¨DockerSwarmå®¹å™¨é›†ç¾¤</p><p>é€€å‡ºSwarmé›†ç¾¤ï¼š</p><ol><li><p>ä¸»åŠ¨é€€å‡º</p><pre><code class="shell">docker swarm leave --force</code></pre><p>æ³¨ï¼š</p><ul><li>ManagerèŠ‚ç‚¹é€€å‡ºé›†ç¾¤å¿…é¡»è¦ä½¿ç”¨â€“forceå‚æ•°</li></ul></li><li><p>è¢«åŠ¨é€€å‡º</p><pre><code class="shell"># æŸ¥çœ‹Dockeré›†ç¾¤çš„èŠ‚ç‚¹ådocker node ls# é™çº§æ“ä½œï¼Œå°†managerèŠ‚ç‚¹é™çº§ä¸ºworkerèŠ‚ç‚¹docker node demote node_name# åœæ­¢DockeræœåŠ¡service docker stop# åˆ é™¤DockerèŠ‚ç‚¹docker node rm node_name</code></pre><p>æ³¨ï¼š</p><ul><li>åˆ é™¤ä»»ä½•çš„èŠ‚ç‚¹å¿…é¡»è¦å…ˆåœæ­¢ä»–çš„DockeræœåŠ¡</li><li>ManagerèŠ‚ç‚¹å¿…é¡»å…ˆé™çº§ä¸ºWorkerèŠ‚ç‚¹ï¼Œç„¶åå†å»åˆ é™¤</li></ul></li></ol><h3 id="7-3-è¯¾åä½œä¸šï¼ˆä¸‹ï¼‰"><a href="#7-3-è¯¾åä½œä¸šï¼ˆä¸‹ï¼‰" class="headerlink" title="7-3 è¯¾åä½œä¸šï¼ˆä¸‹ï¼‰"></a>7-3 è¯¾åä½œä¸šï¼ˆä¸‹ï¼‰</h3><ol><li>å›¾å½¢åŒ–ç•Œé¢éƒ¨ç½²</li></ol><p>ä½¿ç”¨Portainerç®¡ç†Dockerï¼š</p><ul><li><p>å®‰è£…Portaineré•œåƒ</p><pre><code class="shell">docker pull portainer/portainer</code></pre></li></ul><p>å¼€æ”¾Dockerç½‘ç»œç®¡ç†ç«¯å£ï¼š</p><pre><code class="shell"># ç¼–è¾‘é…ç½®æ–‡ä»¶vim /etc/sysconfig/docker# é‡å¯Dockerservice docker restart</code></pre><p>æ³¨ï¼š</p><ul><li><p>åœ¨é…ç½®æ–‡ä»¶ç»“å°¾æ·»åŠ å¼€æ”¾Dockerå¼€å‘2375ç«¯å£çš„å‚æ•°</p><pre><code class="shell">OPTIONS=&#39;-Htcp://0.0.0.0:2375 -H unix:///var/run/docker.sock&#39;</code></pre></li></ul><p>å¯åŠ¨Portainerå®¹å™¨ï¼š</p><pre><code class="shell">docker run -d -p 9000:9000 portainer/portainer -H tcp://192.168.99.196:2375</code></pre><p>è®¿é—®Portainerç®¡ç†ç•Œé¢ï¼š<a href="192.168.99.196:9000" target="_blank" rel="noopener">192.168.99.196:9000</a></p><p>å›¾å½¢ç•Œé¢çš„WorkerèŠ‚ç‚¹æ— æ³•æ˜¾ç¤ºSwarmå…±äº«ç½‘ç»œï¼Œä½†æ˜¯WorkerèŠ‚ç‚¹å¯ä»¥ä½¿ç”¨Swarmå…±äº«ç½‘ç»œåˆ›å»ºå®¹å™¨ï¼Œæ‰€ä»¥åªèƒ½åœ¨å‘½ä»¤è¡Œåˆ›å»ºä½¿ç”¨Swarmå…±äº«ç½‘ç»œçš„å®¹å™¨ã€‚</p><p>å››å°ä¸»æœºä¹‹ä¸Šçš„PXCéƒ¨ç½²æ–¹æ¡ˆï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1jwjsuj31c00k9gpi.jpg" alt="å››å°ä¸»æœºä¹‹ä¸Šçš„PXCéƒ¨ç½²æ–¹æ¡ˆ" style="zoom:33%;" /><p>æ³¨ï¼š</p><ul><li>Keepalivedå¿…é¡»å®‰è£…åœ¨Haproxyæ‰€åœ¨çš„å®¹å™¨é‡Œã€‚</li></ul><p>å››å°ä¸»æœºä¹‹ä¸Šçš„å‰ç«¯é¡¹ç›®éƒ¨ç½²æ–¹æ¡ˆï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1kupvnj31c40kdq6a.jpg" alt="å››å°ä¸»æœºä¹‹ä¸Šçš„å‰ç«¯é¡¹ç›®éƒ¨ç½²æ–¹æ¡ˆ" style="zoom:33%;" />]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬06ç« -éƒ¨ç½²å‰åç«¯åˆ†ç¦»é¡¹ç›®</title>
      <link href="/imooc/219-docker/06-front-back-deploy/"/>
      <url>/imooc/219-docker/06-front-back-deploy/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é™¤äº†MySQLå’ŒRedisè¦ä½¿ç”¨é›†ç¾¤å¤–ï¼Œä¸šåŠ¡çš„èŠ‚ç‚¹çš„éƒ¨ç½²ä¹Ÿè¦ä½¿ç”¨é›†ç¾¤æ–¹æ¡ˆï¼Œæ‰èƒ½ä¿è¯é«˜æ€§èƒ½ã€é«˜è´Ÿè½½å’Œé«˜å¯ç”¨ã€‚è¿™ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹ æ‰“åŒ…å‰ç«¯VUEé¡¹ç›®å’Œåç«¯SpringBooté¡¹ç›®ï¼Œä»¥é›†ç¾¤çš„æ–¹å¼éƒ¨ç½²åœ¨Dockerå®¹å™¨å†…ã€‚</p></blockquote><p>@[TOC]</p><h3 id="6-1-åç«¯é¡¹ç›®åç«¯é¡¹ç›®éƒ¨ç½²ä¸è´Ÿè½½å‡è¡¡"><a href="#6-1-åç«¯é¡¹ç›®åç«¯é¡¹ç›®éƒ¨ç½²ä¸è´Ÿè½½å‡è¡¡" class="headerlink" title="6-1 åç«¯é¡¹ç›®åç«¯é¡¹ç›®éƒ¨ç½²ä¸è´Ÿè½½å‡è¡¡"></a>6-1 åç«¯é¡¹ç›®åç«¯é¡¹ç›®éƒ¨ç½²ä¸è´Ÿè½½å‡è¡¡</h3><ol><li><p>åœ¨MySQLé›†ç¾¤å¯¼å…¥é¡¹ç›®SQLæ–‡ä»¶ã€‚</p></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆæ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Redisè¿æ¥ä¿¡æ¯ã€Tomcatç«¯å£ï¼‰</p><pre><code class="yaml">redis:    ## å•èŠ‚ç‚¹    # host: localhsot    # port: 6379    # password:     ## é›†ç¾¤    cluster:        nodes:        - 172.19.0.2:6379        - 172.19.0.3:6379        - 172.19.0.4:6379        - 172.19.0.5:6379        - 172.19.0.6:6379        - 172.19.0.7:6379</code></pre></li><li><p>åˆ©ç”¨Mavenæ‰“åŒ…å·¥ç¨‹</p><ul><li><p>renren-faståŒ…å«äº†tomcat.jaræ–‡ä»¶ï¼Œæ‰€ä»¥å·¥ç¨‹æ‰“åŒ…æˆJARæ–‡ä»¶å°±èƒ½ç‹¬ç«‹è¿è¡Œ</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi13ldb3j30no09tjse.jpg" alt="æ‰“åŒ…éƒ¨ç½²æµç¨‹" style="zoom:33%;" /></li></ul></li></ol><pre><code> Mavenæ‰“åŒ…æŒ‡ä»¤ - è¿›å…¥renren-fastç›®å½•ï¼Œæ‰§è¡Œmvnå‘½ä»¤   ```shell   mvn clean install -Dmaven.test.skip=true   ```   æ³¨ï¼š   - `clean`ï¼šè¡¨ç¤ºæ¸…é™¤ä¹‹å‰çš„JARæ–‡ä»¶   - `install`ï¼šæ„å‘³ç€æ‰“åŒ…åˆ°æœ¬åœ°   - `-Dmaven.test.skip`ï¼šä»£è¡¨è·³è¿‡æµ‹è¯•ä»£ç </code></pre><ol start="4"><li><p>è¿è¡ŒJavaå®¹å™¨éƒ¨ç½²åå°é¡¹ç›®</p><ul><li><p>è¿è¡ŒJavaå®¹å™¨ï¼Œéƒ¨ç½²å¹¶è¿è¡ŒJARæ–‡ä»¶</p><pre><code class="shell"># åˆ›å»ºDockerå·ï¼Œå¹¶ä¸Šä¼ JARè‡³Dockerå·docker volume create volume_name1ls /var/lib/docker/volumes/volume_name1/_data/# è¿è¡ŒJavaå®¹å™¨docker run -it -d --name container_name -v volume_name1:/home/soft --net=host java# è¿›å…¥Javaå®¹å™¨docker exec -it container_name bash# è¿è¡ŒJavaç¨‹åºnohup java -jar /home/soft/renren-fast.jar &amp;</code></pre></li></ul></li></ol><ol start="5"><li><p>åå°ç¨‹åºè´Ÿè½½å‡è¡¡</p><ul><li><p>Nginxæ˜¯æ€§èƒ½éå¸¸å‡ºè‰²çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œæœ€å¤§å¯ä»¥æ”¯æŒ8ä¸‡/ç§’çš„å¹¶å‘è®¿é—®</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi14yjzgj30og0dxq4e.jpg" alt="Nginxè´Ÿè½½å‡è¡¡ç¤ºæ„å›¾" style="zoom:33%;" /><p>æ³¨ï¼šHaproxyå¯¹TCP/IPæ”¯æŒå¾ˆå¥½ï¼›Nginxå¯¹HTTPæ”¯æŒå¾ˆå¥½ã€‚</p></li><li><p>æ­¥éª¤ï¼š</p><ol><li><p>å®‰è£…Nginxé•œåƒ</p><ul><li><p>Dockerä»“åº“æä¾›äº†Nginxé•œåƒï¼Œä¸‹è½½å®‰è£…å³å¯ã€‚</p><pre><code class="shell">docker pull nginx</code></pre></li></ul></li><li><p>Nginxé…ç½®æ–‡ä»¶</p><pre><code class="conf"># Javaå®¹å™¨è´Ÿè½½å‡è¡¡upstream upstream_name {    server 192.168.99.104:6001;# Javaå®¹å™¨IPä¸ç«¯å£å·    server 192.168.99.104:6002;    server 192.168.99.104:6003;}# NginxæœåŠ¡server {    listen 6101;    server_name 192.168.99.104;    location / {        proxy_pass http://upstream_name;        index index.html index.htm;    }}</code></pre></li><li><p>å¯åŠ¨Nginxå®¹å™¨</p><pre><code class="shell"># å°†Nginxé…ç½®æ–‡ä»¶ä¸Šä¼ è‡³/homels /homedocker run -it -d --name container_name -v /home/nginx.conf:/etc/nginx/nginx.conf --net=host --privileged nginx</code></pre><p>æ³¨ï¼šDockeræ•°æ®å·åªèƒ½æ˜ å°„ç›®å½•ï¼Œä¸èƒ½æ˜ å°„æ–‡ä»¶ã€‚</p></li></ol></li></ul></li></ol><h3 id="6-2-åç«¯é¡¹ç›®åŒæœºçƒ­å¤‡è´Ÿè½½å‡è¡¡"><a href="#6-2-åç«¯é¡¹ç›®åŒæœºçƒ­å¤‡è´Ÿè½½å‡è¡¡" class="headerlink" title="6-2 åç«¯é¡¹ç›®åŒæœºçƒ­å¤‡è´Ÿè½½å‡è¡¡"></a>6-2 åç«¯é¡¹ç›®åŒæœºçƒ­å¤‡è´Ÿè½½å‡è¡¡</h3><p>åˆ©ç”¨Keepalivedå®ç°åŒæœºçƒ­å¤‡</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi19n70wj30vg0eagoy.jpg" alt="Keepalivedå®ç°åŒæœºçƒ­å¤‡ç¤ºæ„å›¾" style="zoom:50%;" /><pre><code class="shell"># è¿›å…¥container_name1å®¹å™¨docker exec -it container_name1 bash# å®‰è£…Keepalivedapt-get updateapt-get install Keepalived# å®‰è£…vimç¼–è¾‘å™¨apt-get install vim# ä¿®æ”¹Keepalivedé…ç½®æ–‡ä»¶vi /etc/keepalived/keepalived.conf# å¯åŠ¨Keepalivedservice Keepalived start# é€€å‡ºdockerå®¹å™¨exitping 192.168.99.151</code></pre><pre><code class="shell"># /etc/keepalived/keepalived.confvrrp_instance VI_1 {    state MASTER    interface ens33 # ç½‘å¡è®¾ç½®ï¼Œä½¿ç”¨å®¿ä¸»æœºç½‘ç»œ    virtual_router_id 51    priority 100    advert_int 1    authentication {        auth_type PASS        auth_pass 123456    }    vritual_ipaddress {        192.168.99.151    }}virtual_server 192.168.99.151 6201 {    delay_loop 3    lb_algo rr    lb_kind NAT    persistence_timeout 50    protocol TCP    real_server 192.168.99.104 6101 {# è½¬å‘çš„IP        weight 1    }}</code></pre><h3 id="6-3-å‰ç«¯é¡¹ç›®åç«¯é¡¹ç›®éƒ¨ç½²ä¸è´Ÿè½½å‡è¡¡"><a href="#6-3-å‰ç«¯é¡¹ç›®åç«¯é¡¹ç›®éƒ¨ç½²ä¸è´Ÿè½½å‡è¡¡" class="headerlink" title="6-3 å‰ç«¯é¡¹ç›®åç«¯é¡¹ç›®éƒ¨ç½²ä¸è´Ÿè½½å‡è¡¡"></a>6-3 å‰ç«¯é¡¹ç›®åç«¯é¡¹ç›®éƒ¨ç½²ä¸è´Ÿè½½å‡è¡¡</h3><p>åˆ©ç”¨Webpackæ‰“åŒ…å·¥ç¨‹</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1bbyiij30t80dygps.jpg" alt="Webpackæ‰“åŒ…å·¥ç¨‹" style="zoom:50%;" /><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1csksnj30r007amyi.jpg" alt="å‰ç«¯é¡¹ç›®è¿è¡Œ" style="zoom:33%;" /><ol><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><pre><code class="js">// /static/conf/index-prod.js// apiæ¥å£è¯·æ±‚åœ°å€window.SITE_CONFIG[&#39;baseUrl&#39;] = &#39;http://192.168.99.151:6201/renren-fast&#39;;</code></pre></li><li><p>æ‰“åŒ…å‰ç«¯é¡¹ç›®</p><ul><li><p>æ‰§è¡ŒWebpackæ‰“åŒ…æŒ‡ä»¤</p><pre><code class="shell">npm run build</code></pre></li></ul></li></ol><pre><code> npmå®‰è£…è¾ƒæ…¢å¯ä»¥ä½¿ç”¨[æ·˜å®NPMé•œåƒ](https://npm.taobao.org) ä½¿ç”¨æ·˜å®NPMé•œåƒå®šåˆ¶çš„cnpmï¼ˆgzipå‹ç¼©æ”¯æŒï¼‰å‘½ä»¤è¡Œå·¥å…·ä»£æ›¿é»˜è®¤çš„npmï¼š ```shell npm install -g cnpm --registry=https://registry.npm.taobao.org ```</code></pre><ul><li><p>æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶éœ€è¦æ‹·è´åˆ°Nginxä¸­è¿è¡Œ</p><pre><code class="conf">server {    listen 6501;# NGINXåˆ†é…çš„ç«¯å£    server_name 192.168.99.104;# NGINXåˆ†é…çš„IPã€‚ä¸ºå®¿ä¸»æœºIP    location / {        root /home/fn1/renren-vue;        index index.html;    }}</code></pre></li></ul><ol start="3"><li><p>åˆ›å»ºå¹¶è¿è¡ŒNginxå®¹å™¨</p><pre><code class="shell">docker run -it -d --name container_name1 -v /home/fn1/nginx.conf:/etc/nginx/nginx.conf -v /home/fn1/renren-vue:/home/fn1/renren-vue --privileged --net=host nginx</code></pre></li></ol><ol start="4"><li><p>åˆ©ç”¨Keepalivedå®ç°åŒæœºçƒ­å¤‡</p>   <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi1ewuhvj31980digpo.jpg" alt="Keepalivedå®ç°å‰ç«¯åŒæœºçƒ­å¤‡" style="zoom: 33%;" /><ol><li><p>åˆ›å»º3ä¸ªå‰ç«¯é¡¹ç›®èŠ‚ç‚¹</p></li><li><p>åˆ›å»º2ä¸ªNginxèŠ‚ç‚¹åšè´Ÿè½½å‡è¡¡</p><pre><code class="shell"># ff1/nginx.confupstream fn {    server 192.168.99.104:6501;    server 192.168.99.104:6502;    server 192.168.99.104:6503;}server {    listen       6601;    server_name  192.168.99.104;     location / {          proxy_pass   http://fn;        index  index.html index.htm;      }  }</code></pre></li><li><p>å®‰è£…Keepalivedå®ç°åŒæœºçƒ­å¤‡</p><p>è§ä¸‹ä¸€èŠ‚ã€‚ã€‚</p></li></ol></li></ol><h3 id="6-4-å‰ç«¯é¡¹ç›®åŒæœºçƒ­å¤‡è´Ÿè½½å‡è¡¡"><a href="#6-4-å‰ç«¯é¡¹ç›®åŒæœºçƒ­å¤‡è´Ÿè½½å‡è¡¡" class="headerlink" title="6-4 å‰ç«¯é¡¹ç›®åŒæœºçƒ­å¤‡è´Ÿè½½å‡è¡¡"></a>6-4 å‰ç«¯é¡¹ç›®åŒæœºçƒ­å¤‡è´Ÿè½½å‡è¡¡</h3><pre><code class="shell">#è¿›å…¥ff1èŠ‚ç‚¹docker exec -it ff1 bash#æ›´æ–°è½¯ä»¶åŒ…apt-get update#å®‰è£…VIMapt-get install vim#å®‰è£…Keepalivedapt-get install keepalived#ç¼–è¾‘Keepalivedé…ç½®æ–‡ä»¶(å¦‚ä¸‹)vim /etc/keepalived/keepalived.conf#å¯åŠ¨Keepalivedservice keepalived start</code></pre><pre><code class="shell"># /etc/keepalived/keepalived.confvrrp_instance VI_1 {   state MASTER   interface ens33 # ç½‘å¡ã€‚   virtual_router_id 52   priority 100   advert_int 1   authentication {       auth_type PASS       auth_pass 123456   }   virtual_ipaddress {       192.168.99.152# è™šæ‹ŸIP   }}virtual_server 192.168.99.151 6701 {   delay_loop 3   lb_algo rr   lb_kind NAT   persistence_timeout 50   protocol TCP   real_server 192.168.99.104 6601 {       weight 1   }}</code></pre><p>æ³¨ï¼šVMè™šæ‹Ÿæœºå¯¹Keepalivedæ”¯æŒä¸å‹å¥½ã€‚å½“VMè™šæ‹ŸæœºæŒ‚èµ·é‡æ–°æ¢å¤åï¼Œå®¿ä¸»æœºä¼šPINGä¸é€šKeepalivedçš„è™šæ‹ŸIPï¼Œæ­¤æ—¶éœ€è¦è¿›å…¥å®¹å™¨é‡å¯KeepalivedæœåŠ¡ã€‚</p><pre><code class="shell">service keepalived restart</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬05ç« -æ­å»ºRedisé›†ç¾¤</title>
      <link href="/imooc/219-docker/05-redis-cluster/"/>
      <url>/imooc/219-docker/05-redis-cluster/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Redisé«˜é€Ÿç¼“å­˜å¯ä»¥å‡å°‘æ•°æ®åº“IOçš„å‹åŠ›ï¼Œåœ¨ç§’æ€å•†å“ã€æŠ¢çº¢åŒ…ç­‰ä¸šåŠ¡ä¸­é¢‘ç¹ç”¨åˆ°ã€‚è¿™ä¸€ç« æˆ‘ä»¬è¦å­¦ä¹ çš„æ˜¯ä¸ºrenren-fasté¡¹ç›®æ­å»º6èŠ‚ç‚¹çš„RedisClusteré›†ç¾¤ã€‚</p></blockquote><p>@[TOC]</p><h3 id="5-1-Redisé«˜é€Ÿç¼“å­˜ä»‹ç»"><a href="#5-1-Redisé«˜é€Ÿç¼“å­˜ä»‹ç»" class="headerlink" title="5-1 Redisé«˜é€Ÿç¼“å­˜ä»‹ç»"></a>5-1 Redisé«˜é€Ÿç¼“å­˜ä»‹ç»</h3><p>é«˜é€Ÿç¼“å­˜ä»‹ç»ï¼š</p><ul><li>é«˜é€Ÿç¼“å­˜åˆ©ç”¨å†…å­˜ä¿å­˜æ•°æ®ï¼Œè¯»å†™é€Ÿåº¦è¿œè¿œè¶…ç¡¬ç›˜</li><li>é«˜é€Ÿç¼“å­˜å¯ä»¥å‡å°‘I/Oæ“ä½œï¼Œé™ä½I/Oå‹åŠ›</li><li><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi10gsqsj30ys0ipn4a.jpg" alt="é«˜é€Ÿç¼“å­˜ä»‹ç»-æ·˜å®ç½‘" style="zoom:50%;" /></li></ul><p>Redisä»‹ç»ï¼š</p><ul><li>Redisæ˜¯Wmwareå¼€å‘çš„å¼€æºå…è´¹çš„KVå‹NoSQLç¼“å­˜äº§å“</li><li>Rediså…·æœ‰å¾ˆå¥½çš„æ€§èƒ½ï¼Œæœ€å¤šå¯ä»¥æä¾›10ä¸‡æ¬¡/ç§’çš„è¯»å†™</li><li>ç›®å‰æ–°æµªå¾®åšå›¢é˜Ÿç»„å»ºäº†ä¸–ç•Œä¸Šæœ€å¤§è§„æ¨¡çš„Redisé›†ç¾¤</li></ul><p>Redisé›†ç¾¤ä»‹ç»ï¼š</p><ul><li>Redisç›®å‰çš„é›†ç¾¤æ–¹æ¡ˆåˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š<ol><li>RedisClusterï¼šå®˜æ–¹æ¨èï¼Œæ²¡æœ‰ä¸­å¿ƒèŠ‚ç‚¹</li><li>Codisï¼šä¸­é—´ä»¶äº§å“ï¼Œå­˜åœ¨ä¸­å¿ƒèŠ‚ç‚¹ã€‚360å…¬å¸æ¨å‡ºã€‚</li><li>Twemproxyï¼šä¸­é—´ä»¶äº§å“ï¼Œå­˜åœ¨ä¸­å¿ƒèŠ‚ç‚¹ã€‚</li></ol></li></ul><p>RedisClusterï¼š</p><ul><li>æ— ä¸­å¿ƒèŠ‚ç‚¹ï¼Œå®¢æˆ·ç«¯ä¸RedisèŠ‚ç‚¹ç›´è¿ï¼Œä¸éœ€è¦ä¸­é—´ä»£ç†å±‚</li><li>æ•°æ®å¯ä»¥è¢«åˆ†ç‰‡å­˜å‚¨</li><li>ç®¡ç†æ–¹ä¾¿ï¼Œåç»­å¯è‡ªè¡Œå¢åŠ æˆ–æ‘˜é™¤èŠ‚ç‚¹</li><li><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi11ony7j31100mpwiq.jpg" alt="RedisClusterç¤ºæ„å›¾" style="zoom:50%;" /></li></ul><h3 id="5-2-Redisä¸»ä»åŒæ­¥"><a href="#5-2-Redisä¸»ä»åŒæ­¥" class="headerlink" title="5-2 Redisä¸»ä»åŒæ­¥"></a>5-2 Redisä¸»ä»åŒæ­¥</h3><p>ä¸»ä»åŒæ­¥ï¼š</p><ul><li><p>Redisé›†ç¾¤ä¸­çš„æ•°æ®åº“å¤åˆ¶æ˜¯é€šè¿‡ä¸»ä»åŒæ­¥æ¥å®ç°çš„</p></li><li><p>ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰æŠŠæ•°æ®åˆ†å‘ç»™ä»èŠ‚ç‚¹ï¼ˆSlaveï¼‰</p></li><li><p>ä¸»ä»åŒæ­¥çš„å¥½å¤„åœ¨äºé«˜å¯ç”¨ï¼ŒRedisèŠ‚ç‚¹æœ‰å†—ä½™è®¾è®¡</p><p>Master â€”å¤åˆ¶â€”&gt; Slave</p></li></ul><p>Redisé›†ç¾¤é«˜å¯ç”¨ï¼š</p><ul><li><p>Redisé›†ç¾¤ä¸­åº”è¯¥åŒ…å«å¥‡æ•°ä¸ªMasterï¼Œè‡³å°‘åº”è¯¥æœ‰3ä¸ªMAster</p></li><li><p>Redisé›†ç¾¤ä¸­æ¯ä¸ªMateréƒ½åº”è¯¥æœ‰Slave</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi131rwoj30y00bpju6.jpg" alt="Redisé›†ç¾¤ä¸­Masterä¸SlaveèŠ‚ç‚¹çš„å…³ç³»" style="zoom:33%;" /></li></ul><p>Redisé›†ç¾¤ä¸ºä½•ä¸é…ç½®è´Ÿè½½å‡è¡¡ï¼Ÿ</p><ul><li>åå°ç¨‹åºä½¿ç”¨äº†Springæ¶æ„ï¼Œè€ŒSpringè‡ªåŠ¨å®ç°äº†è´Ÿè½½å‡è¡¡</li></ul><h3 id="5-3-é…ç½®RedisClusteré›†ç¾¤"><a href="#5-3-é…ç½®RedisClusteré›†ç¾¤" class="headerlink" title="5-3 é…ç½®RedisClusteré›†ç¾¤"></a>5-3 é…ç½®RedisClusteré›†ç¾¤</h3><p>å®‰è£…Redisé•œåƒ</p><ul><li><p>å¯¼å…¥æœ¬åœ°Redisé•œåƒæ–‡ä»¶ï¼Œè¿è¡ŒRediså®¹å™¨</p><pre><code class="shell">docker pull yyyyttttwwww/redisdocker run -it -d --name redis_name1 -p 5001:6379 --net=network_name1 --ip 172.19.0.2 redis bash</code></pre></li></ul><p>è§£é™¤Dockeré›†ç¾¤</p><pre><code class="shell">docker swarm leave -f</code></pre><p>æŸ¥çœ‹Dockerå†…éƒ¨ç½‘ç»œ</p><pre><code class="shell">docker network ls</code></pre><p>åˆ é™¤Dockerç½‘ç»œ</p><pre><code class="shell">docker network rm docker_network_name</code></pre><p>åˆ›å»ºDockerç½‘ç»œ</p><pre><code class="shell">docker network create -subnet=172.19.0.0/16 net2</code></pre><p>è¿›å…¥Redisçš„Dockerå®¹å™¨</p><pre><code class="shell">docker exec -it redis_name1 bash</code></pre><p>é…ç½®RedisèŠ‚ç‚¹ï¼š</p><pre><code class="shell">/usr/redis/redis.confdaemonize yes                    # ä»¥åå°è¿›ç¨‹è¿è¡Œcluster-enabled yes                # å¼€å¯é›†ç¾¤cluster-config-file nodes.conf    # é›†ç¾¤é…ç½®æ–‡ä»¶cluster-node-timeout 15000        # è¶…æ—¶æ—¶é—´appendonly yes                    # å¼€å¯AOFæ¨¡å¼</code></pre><p>å¯åŠ¨Redisï¼š</p><pre><code class="shell">cd /usr/redis/src./redis-server ../redis.conf</code></pre><p>å®‰è£…redis-trib.rb</p><ul><li><p>redis-tribæ˜¯åŸºäºRubyçš„Redisé›†ç¾¤å‘½ä»¤è¡Œå·¥å…·</p><pre><code class="shell">cp /usr/redis/src/redis-trib.rb /usr/redis/clustercd /usr/redis/clusterapt-get install rubyapt-get install rubygemsgem install redis</code></pre></li></ul><p>åˆ›å»ºRedisé›†ç¾¤</p><ul><li><p>åˆ©ç”¨redis-trib.rbåˆ›å»ºRedisé›†ç¾¤</p><pre><code class="shell">./redis-trib.rb create --replicas 1 172.19.0.2:6379 172.19.0.3:6379 172.19.0.4:6379 172.19.0.5:6379 172.19.0.6:6379 172.19.0.7:6379</code></pre><p>æ³¨ï¼š</p><ul><li><code>--replicas 1</code>ï¼šå‚æ•°è¡¨ç¤ºä¸ºæ¯ä¸ªä¸»èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªä»èŠ‚ç‚¹</li></ul></li></ul><p>æš‚åœDockerå®¹å™¨</p><pre><code class="shell">docker pause container_name</code></pre><p>æ¢å¤Dockerå®¹å™¨</p><pre><code class="shell">docker unpause container_name</code></pre><p>æŸ¥çœ‹Redisé›†ç¾¤èŠ‚ç‚¹çš„è¿è¡ŒçŠ¶å†µ</p><pre><code class="shell">cluster nodes</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬04ç« -æ­å»ºMySQLé›†ç¾¤</title>
      <link href="/imooc/219-docker/04-mysql-cluster/"/>
      <url>/imooc/219-docker/04-mysql-cluster/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¤§å‹é¡¹ç›®çš„æŒä¹…å±‚éƒ½ä¼šé€‰æ‹©æ•°æ®åº“é›†ç¾¤ï¼Œæœ¬é—¨è¯¾ç¨‹é€‰æ‹©çš„æ˜¯MySQLé¢†åŸŸä¸­æœ€æˆç†Ÿå¯é çš„PXCï¼ˆPercona XtraDB Clusterï¼‰é›†ç¾¤æ–¹æ¡ˆã€‚åœ¨æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬ä¼šå­¦ä¹ åœ¨Dockerå®¹å™¨ä¸­åˆ’åˆ†ç½‘æ®µï¼Œåˆ›å»ºPXCå®¹å™¨å’Œç»„å»º5èŠ‚ç‚¹çš„PXCé›†ç¾¤ã€‚</p></blockquote><p>@[TOC]</p><h3 id="4-1-MySQLé›†ç¾¤æ–¹æ¡ˆä»‹ç»"><a href="#4-1-MySQLé›†ç¾¤æ–¹æ¡ˆä»‹ç»" class="headerlink" title="4-1 MySQLé›†ç¾¤æ–¹æ¡ˆä»‹ç»"></a>4-1 MySQLé›†ç¾¤æ–¹æ¡ˆä»‹ç»</h3><p>å•èŠ‚ç‚¹æ•°æ®åº“çš„å¼Šç—…</p><ul><li>å¤§å‹äº’è”ç½‘ç¨‹åºç”¨æˆ·ç¾¤ä½“åºå¤§ï¼Œæ‰€ä»¥æ¶æ„å¿…é¡»è¦ç‰¹æ®Šè®¾è®¡</li><li>å•èŠ‚ç‚¹çš„æ•°æ®åº“æ— æ³•æ»¡è¶³æ€§èƒ½ä¸Šçš„è¦æ±‚</li><li>å•èŠ‚ç‚¹çš„æ•°æ®åº“æ²¡æœ‰å†—ä½™è®¾è®¡ï¼Œæ— æ³•æ»¡è¶³é«˜å¯ç”¨</li></ul><p>å•èŠ‚ç‚¹MySQLçš„æ€§èƒ½ç“¶é¢ˆ</p><ul><li>2016å¹´æ˜¥èŠ‚å¾®ä¿¡çº¢åŒ…å·¨å¤§ä¸šåŠ¡é‡ï¼Œæ•°æ®åº“æ‰¿å—å·¨å¤§è´Ÿè½½</li></ul><p>å¸¸è§MySQLé›†ç¾¤æ–¹æ¡ˆ</p><ul><li><p>Replication</p><p>é€Ÿåº¦å¿«ã€å¼±ä¸€è‡´æ€§ã€ä½ä»·å€¼</p><p>æ—¥å¿—ã€æ–°é—»ã€å¸–å­</p></li><li><p>PXC</p><p>é€Ÿåº¦æ…¢ã€å¼ºä¸€è‡´æ€§ã€é«˜ä»·å€¼</p><p>è®¢å•ã€è´¦æˆ·ã€è´¢åŠ¡</p></li></ul><p>PXCåŸç†</p><blockquote><p>æ·˜å®ç½‘çš„æ•°æ®åº“é›†ç¾¤ä¹Ÿå€Ÿé‰´äº†PXCé›†ç¾¤æ–¹æ¡ˆ</p></blockquote><ul><li><p>PXCï¼ˆPercona XtraDB Clusterï¼‰</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0iurljj30jr0a1aca.jpg" alt="PXCï¼ˆPercona XtraDB Clusterï¼‰" style="zoom:33%;" /></li><li><p>å»ºè®®PXCä½¿ç”¨PerconaServerï¼ˆMySQLæ”¹è¿›ç‰ˆï¼Œæ€§èƒ½æå‡å¾ˆå¤§ï¼‰</p></li></ul><p>PXCæ–¹æ¡ˆä¸Replicationæ–¹æ¡ˆçš„å¯¹æ¯”</p><ul><li><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0jxp2dj30pt0g0gob.jpg" alt="PXCæ–¹æ¡ˆ" style="zoom:33%;" /><p>åŒå‘åŒæ­¥</p></li><li><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0kupa5j30hu0bv3zs.jpg" alt="Replicationæ–¹æ¡ˆ" style="zoom:33%;" /><p>å•å‘åŒæ­¥</p></li></ul><p>PXCçš„æ•°æ®å¼ºä¸€è‡´æ€§</p><ul><li><p>PXCé‡‡ç”¨åŒæ­¥å¤åˆ¶ï¼Œäº‹åŠ¡åœ¨æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹è¦ä¹ˆåŒæ—¶æäº¤ï¼Œè¦ä¹ˆä¸æäº¤</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0m9qu1j30n40do771.jpg" alt="PXCåŒæ­¥å¤åˆ¶æœºåˆ¶" style="zoom:33%;" /></li><li><p>Replicationé‡‡ç”¨å¼‚æ­¥å¤åˆ¶ï¼Œæ— æ³•ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0n3wzhj30m808iab8.jpg" alt="Replicationå¼‚æ­¥å¤åˆ¶æœºåˆ¶" style="zoom:33%;" /></li></ul><pre><code class="mysql">STOP SLAVE;# åœæ­¢slaveèŠ‚ç‚¹çš„æ•°æ®åº“åŒæ­¥å…³è”SHOW SLAVE STATUS;# æŸ¥çœ‹slaveèŠ‚ç‚¹çš„æ•°æ®åŒæ­¥çŠ¶æ€ï¼ˆSlave_IO_Runningã€Slave_SQL_Runningï¼‰</code></pre><p>å…³é—­é˜²ç«å¢™ç«¯å£ï¼š</p><blockquote><p>Centosé˜²ç«å¢™ä½¿ç”¨firewallå‘½ä»¤</p><p>Ubuntué˜²ç«å¢™ä½¿ç”¨iptableså‘½ä»¤</p></blockquote><pre><code class="shell">iptables -A INPUT -p tcp -dport 4567 -j DROPiptables -A OUTPUT -p tcp -dport 4567 -j DROP</code></pre><h3 id="4-2-åˆ›å»ºMySQLé›†ç¾¤"><a href="#4-2-åˆ›å»ºMySQLé›†ç¾¤" class="headerlink" title="4-2 åˆ›å»ºMySQLé›†ç¾¤"></a>4-2 åˆ›å»ºMySQLé›†ç¾¤</h3><p>PXCé›†ç¾¤å®‰è£…ä»‹ç»</p><blockquote><p>PXCé›†ç¾¤åªèƒ½å®‰è£…åœ¨Linuxç³»ç»Ÿæˆ–Dockerå®¹å™¨</p></blockquote><ul><li><p>Dockerçš„é•œåƒä»“åº“ä¸­åŒ…å«äº†PXCæ•°æ®åº“é•œåƒï¼Œ<a href="https://hub.docker.com/r/percona/percona-xtradb-cluster/" target="_blank" rel="noopener">ä¸‹è½½</a>å³å¯</p><pre><code class="shell">docker pull percona/percona-xtradb-cluster</code></pre></li></ul><p>å®‰è£…PXCé•œåƒ</p><ul><li><p>ä¸‹è½½æˆ–è€…å¯¼å…¥æœ¬åœ°é•œåƒ</p><pre><code class="shell"># ä¸‹è½½é•œåƒå®‰è£…docker pull percona/percona-xtradb-cluster# å¯¼å…¥æœ¬åœ°é•œåƒå®‰è£…docker load &lt; /home/soft/pxc.tar.gz</code></pre><pre><code class="shell"># ä¿®æ”¹é•œåƒåç§°docker tag old_image_name new_image_namedocker rmi old_image_name</code></pre></li></ul><p>åˆ›å»ºå†…éƒ¨ç½‘ç»œ</p><ul><li><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œéœ€è¦ç»™PCXé›†ç¾¤å®ä¾‹åˆ›å»ºDockerå†…éƒ¨ç½‘ç»œ</p><pre><code class="shell"># åˆ›å»ºå†…éƒ¨ç½‘æ®µdocker network create network_name# æŸ¥çœ‹ç½‘æ®µç›¸å…³ä¿¡æ¯docker network inspect network_name# åˆ é™¤ç½‘æ®µdocker network rm network_name</code></pre><p>Dockerå†…ç½®ç½‘æ®µï¼š172.17.0.*</p><p>åˆ›å»ºç½‘æ®µ1ï¼š172.18.0.*</p><p>åˆ›å»ºç½‘æ®µ2ï¼š172.19.0.*</p><p>åˆ›å»ºç½‘æ®µ3ï¼š172.20.0.*</p><p>â€¦ä»¥æ­¤ç±»æ¨â€¦</p></li></ul><p>  åˆ›å»ºè‡ªå®šä¹‰ç«¯å£ç½‘æ®µï¼š</p><pre><code class="shell">  docker network create --subnet=172.18.0.0/24 network_name</code></pre><p>Dockerå®¹å™¨ä½¿ç”¨åŸåˆ™ï¼š</p><ol><li>ä¸€æ—¦åˆ›å»ºå‡ºDockerå®¹å™¨ï¼Œå°½é‡ä¸è¦åœ¨å®¹å™¨å†…ä¿å­˜ä¸šåŠ¡æ•°æ®ï¼Œåº”å°†ä¸šåŠ¡æ•°æ®ä¿å­˜åœ¨å®¿ä¸»æœºé‡Œã€‚åº”ä½¿ç”¨ç›®å½•æ˜ å°„æœºåˆ¶</li><li>PXCè¿è¡Œåœ¨Dockerå®¹å™¨æ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨æ˜ å°„çš„ç›®å½•ï¼ŒPXCå®¹å™¨ä¼šå¯åŠ¨é—ªé€€ã€‚æ­¤æ—¶åº”ä½¿ç”¨Dockerå·æ˜ å°„ç›®å½•</li></ol><p>åˆ›å»ºDockerå·</p><ul><li><p>å®¹å™¨ä¸­çš„PXCèŠ‚ç‚¹æ˜ å°„æ•°æ®ç›®å½•çš„è§£å†³åŠæ³•</p><pre><code class="shell">docker volume create volume_namedocker volume create --name volume_name</code></pre></li></ul><p>æŸ¥çœ‹Dockerå·ä¿¡æ¯</p><pre><code class="shell">docker volume inspect volume_name</code></pre><p>åˆ é™¤Dockerå·</p><pre><code class="shell">docker volume rm volume_name</code></pre><p>åˆ›å»ºPXCå®¹å™¨</p><ul><li><p>åªéœ€è¦å‘PXCé•œåƒä¼ å…¥è¿è¡Œå‚æ•°å°±èƒ½åˆ›å»ºå‡ºPXCå®¹å™¨</p><pre><code class="shell">docker run -d -p 3306:3306-v volume_name1:/var/lib/mysql-e MYSQL_ROOT_PASSWORD=mysql_root_password-e CLUSTER_NAME=cluster_name-e XTRABACKUP_PASSWORD=xtrabackup_password--prilileged --name=container_name --net=network_name --ip 172.18.0.2pxc</code></pre><p>æ³¨ï¼š</p><ul><li><code>-d</code>ï¼šåå°è¿è¡Œå®¹å™¨</li></ul></li></ul><p>åˆ›å»ºPXCå®¹å™¨é›†ç¾¤</p><pre><code class="shell">docker volume create --name volume_name1docker volume create --name volume_name2docker volume create --name volume_name3docker volume create --name volume_name4docker volume create --name volume_name5docker run -d -p 3306:3306 -v volume_name1:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=mysql_root_password -e CLUSTER_NAME=cluster_name -e XTRABACKUP_PASSWORD=xtrabackup_password --prilileged --name=container_name1 --net=network_name --ip 172.18.0.2 pxcdocker run -d -p 3307:3306 -v volume_name2:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=mysql_root_password -e CLUSTER_NAME=cluster_name -e XTRABACKUP_PASSWORD=xtrabackup_password -e CLUSTER_JOIN=container_name1 --prilileged --name=container_name2 --net=network_name --ip 172.18.0.3 pxcdocker run -d -p 3308:3306 -v volume_name3:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=mysql_root_password -e CLUSTER_NAME=cluster_name -e XTRABACKUP_PASSWORD=xtrabackup_password -e CLUSTER_JOIN=container_name1 --prilileged --name=container_name3 --net=network_name --ip 172.18.0.4 pxcdocker run -d -p 3309:3306 -v volume_name4:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=mysql_root_password -e CLUSTER_NAME=cluster_name -e XTRABACKUP_PASSWORD=xtrabackup_password -e CLUSTER_JOIN=container_name1 --prilileged --name=container_name4 --net=network_name --ip 172.18.0.5 pxcdocker run -d -p 3310:3306 -v volume_name5:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=mysql_root_password -e CLUSTER_NAME=cluster_name -e XTRABACKUP_PASSWORD=xtrabackup_password -e CLUSTER_JOIN=container_name1 --prilileged --name=container_name5 --net=network_name --ip 172.18.0.6 pxc</code></pre><p>æ•°æ®åº“å®¢æˆ·ç«¯è¿æ¥</p><blockquote><p>ip:å®¿ä¸»æœºIP<br>port:å®¿ä¸»æœºä¸å®¹å™¨æ˜ å°„çš„ç«¯å£<br>username:åˆ›å»ºå®ä¾‹çš„æ•°æ®åº“ç”¨æˆ·åï¼ˆé»˜è®¤rootï¼‰<br>password:åˆ›å»ºå®ä¾‹çš„æ•°æ®åº“å¯†ç </p></blockquote><h3 id="4-3-æ•°æ®åº“è´Ÿè½½å‡è¡¡"><a href="#4-3-æ•°æ®åº“è´Ÿè½½å‡è¡¡" class="headerlink" title="4-3 æ•°æ®åº“è´Ÿè½½å‡è¡¡"></a>4-3 æ•°æ®åº“è´Ÿè½½å‡è¡¡</h3><blockquote><p>æ•°æ®åº“çš„è´Ÿè½½å‡è¡¡ï¼šæ•°æ®è¯·æ±‚å‡åŒ€çš„å‘é€ç»™æ¯ä¸€ä¸ªæ•°æ®èŠ‚ç‚¹</p></blockquote><p>æ•°æ®åº“è´Ÿè½½å‡è¡¡çš„å¿…è¦æ€§ï¼š</p><ul><li><p>è™½ç„¶æ­å»ºäº†é›†ç¾¤ï¼Œä½†æ˜¯ä¸ä½¿ç”¨æ•°æ®åº“è´Ÿè½½å‡è¡¡ï¼Œå•èŠ‚ç‚¹å¤„ç†æ‰€æœ‰è¯·æ±‚ï¼Œè´Ÿè½½é«˜ï¼Œæ€§èƒ½å·®</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0o6a7kj30v00cxgni.jpg" alt="æ•°æ®åº“å•èŠ‚ç‚¹" style="zoom:33%;" /></li><li><p>ä½¿ç”¨Haproxyåšè´Ÿè½½å‡è¡¡ï¼Œè¯·æ±‚è¢«å‡åŒ€åˆ†å‘ç»™æ¯ä¸ªèŠ‚ç‚¹ï¼Œå•èŠ‚ç‚¹è´Ÿè½½ä½ï¼Œæ€§èƒ½å¥½</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0p7lmej30ug0hp42c.jpg" alt="æ•°æ®åº“è´Ÿè½½å‡è¡¡" style="zoom:33%;" /></li></ul><p>è´Ÿè½½å‡è¡¡ä¸­é—´ä»¶å¯¹æ¯”</p><table><thead><tr><th>æ¯”è¾ƒ</th><th>Haproxy</th><th>Nginx</th><th>Apache</th><th>LVS</th></tr></thead><tbody><tr><td>æ˜¯å¦å…è´¹</td><td>å…è´¹</td><td>å…è´¹</td><td>å…è´¹</td><td>å…è´¹</td></tr><tr><td>æ”¯æŒè™šæ‹Ÿæœº</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å¦</td></tr><tr><td>HTTPåè®®</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>TCP/IPåè®®</td><td>æ”¯æŒ</td><td>åˆšåˆšæ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ”¯æŒæ’ä»¶</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ€§èƒ½</td><td>å¥½</td><td>å¥½</td><td>ä¸€èˆ¬</td><td>æœ€å¥½</td></tr></tbody></table><p>å®‰è£…Haproxyé•œåƒ</p><ul><li><p>Dockerä»“åº“ä¸­ä¿å­˜äº†Haproxyçš„é•œåƒï¼Œåªéœ€ä¸‹è½½å³å¯</p><pre><code class="shell">docker pull haproxy</code></pre></li></ul><p>åˆ›å»ºHaproxyé…ç½®æ–‡ä»¶</p><blockquote><p>é¦–å…ˆåœ¨å®¿ä¸»æœºåˆ›å»ºHaproxyçš„é…ç½®æ–‡ä»¶ï¼Œç„¶åå°†å…¶æ–‡ä»¶æ˜ å°„åˆ°Haproxyçš„Dockerå®¹å™¨</p></blockquote><ul><li><p>é…ç½®æ–‡ä»¶è¯¦æƒ…å¯ä»¥<a href="https://zhangge.net/5125.html" target="_blank" rel="noopener">å‚è€ƒ</a></p><pre><code class="shell">touch /home/soft/haproxy.cfg</code></pre><pre><code class="shell">global    # å·¥ä½œç›®å½•    chroot /usr/local/etc/haproxy    # æ—¥å¿—æ–‡ä»¶ï¼Œä½¿ç”¨rsyslogæœåŠ¡ä¸­local5æ—¥å¿—è®¾å¤‡ï¼ˆ/var/log/local5ï¼‰ï¼Œç­‰çº§info    log 127.0.0.1 local5 info    # å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ    daemondefaults    log global    mode http    # æ—¥å¿—æ ¼å¼    option httplog    # æ—¥å¿—ä¸­ä¸è®°å½•è´Ÿè½½å‡è¡¡çš„å¿ƒè·³æ£€æµ‹è®°å½•    option dontlognull    # è¿æ¥è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰    timeout connect 5000    # å®¢æˆ·ç«¯è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰    timeout client 50000    # æœåŠ¡å™¨è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰    timeout server 50000# ç›‘æ§ç•Œé¢listen admin_stats    # ç›‘æ§ç•Œé¢çš„è®¿é—®çš„IPå’Œç«¯å£    bind 0.0.0.0:8888    # è®¿é—®åè®®    mode http    # URIç›¸å¯¹åœ°å€    stats uri /dbs    # ç»Ÿè®¡æŠ¥å‘Šæ ¼å¼    stats realm Clobal\ statistics    # ç™»å½•è´¦æˆ·ä¿¡æ¯    stats auth admin:123456# æ•°æ®åº“è´Ÿè½½å‡è¡¡listen proxy-mysql    # è®¿é—®çš„IPå’Œç«¯å£    bind 0.0.0.0:3306    # ç½‘ç»œåè®®    mode tcp    # è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆè½®è¯¢ç®—æ³•ï¼‰    # è½®è¯¢ç®—æ³•ï¼šroundrobin    # æƒé‡ç®—æ³•ï¼šstatic-rr    # æœ€å°‘è¿æ¥ç®—æ³•ï¼šleastconn    # è¯·æ±‚æºIPç®—æ³•ï¼šsource    balance roundrobin    # æ—¥å¿—æ ¼å¼    option tcplog    # åœ¨MySQLä¸­åˆ›å»ºä¸€ä¸ªæ²¡æœ‰æƒé™çš„haproxyç”¨æˆ·ï¼Œå¯†ç ä¸ºç©ºã€‚Haproxyä½¿ç”¨è¿™ä¸ªè´¦æˆ·å¯¹MySQLæ•°æ®åº“å¿ƒè·³æ£€æµ‹    option mysql-check user haproxy    server MySQL_1 172.18.0.2:3306 check weight 1 maxconn 2000    server MySQL_2 172.18.0.3:3306 check weight 1 maxconn 2000    server MySQL_3 172.18.0.4:3306 check weight 1 maxconn 2000    server MySQL_4 172.18.0.5:3306 check weight 1 maxconn 2000    server MySQL_5 172.18.0.6:3306 check weight 1 maxconn 2000    # ä½¿ç”¨keepaliveæ£€æµ‹æ­»é“¾    option tcpka</code></pre></li></ul><p>åˆ›å»ºHaproxyå®¹å™¨</p><pre><code class="shell">docker run -it -d-p 4001:8888 -p 4002:3306-v /home/soft/haproxy:/usr/local/etc/haproxy--name container_name --privileged --net=network_namehaproxyhaproxy -f /usr/local/etc/haproxy/haproxy.cfg</code></pre><p>è¿›å…¥åå°è¿è¡Œçš„Dockerå®¹å™¨</p><pre><code class="shell">docker exec -it container_name bash</code></pre><p>åˆ›å»ºæ²¡æœ‰æƒé™çš„haproxyç”¨æˆ·ï¼Œå¯†ç ä¸ºç©º</p><p>Haproxyä½¿ç”¨è¿™ä¸ªè´¦æˆ·å¯¹MySQLæ•°æ®åº“å¿ƒè·³æ£€æµ‹</p><pre><code class="mysql">create user &#39;haproxy&#39;@&#39;%&#39; identified by &#39;&#39;;</code></pre><p>å…³é—­æ•°æ®åº“èŠ‚ç‚¹</p><pre><code class="shell">docker stop container_name1</code></pre><h3 id="4-4-è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼ˆä¸Šï¼‰"><a href="#4-4-è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼ˆä¸Šï¼‰" class="headerlink" title="4-4 è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼ˆä¸Šï¼‰"></a>4-4 è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼ˆä¸Šï¼‰</h3><p>ä¸ºä»€ä¹ˆè¦é‡‡ç”¨åŒæœºçƒ­å¤‡ï¼Ÿ</p><ul><li><p>å•èŠ‚ç‚¹Haproxyä¸å…·å¤‡é«˜å¯ç”¨ï¼Œå¿…é¡»è¦æœ‰å†—ä½™è®¾è®¡</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0qd4wjj30xc0c5gnb.jpg" alt="å•èŠ‚ç‚¹Haproxyéƒ¨ç½²å›¾" style="zoom:33%;" /></li></ul><p>è™šæ‹ŸIPåœ°å€</p><blockquote><p>è™šæ‹ŸIPæ˜¯HaproxyåŒæœºçƒ­å¤‡æ–¹æ¡ˆçš„å…³é”®æŠ€æœ¯</p></blockquote><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0rdszyj30y40cmwhs.jpg" alt="è™šæ‹ŸIPåœ°å€" style="zoom:33%;" /><p>åˆ©ç”¨Keepalivedå®ç°åŒæœºçƒ­å¤‡</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0sauamj30n80cyq5b.jpg" alt="åŒæœºçƒ­å¤‡çš„å…·ä½“ç»†èŠ‚" style="zoom:33%;" /><p>HaproxyåŒæœºçƒ­å¤‡æ–¹æ¡ˆ</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0v5ovhj31js0gatfu.jpg" alt="åŒæœºçƒ­å¤‡çš„æ¶æ„è®¾è®¡" style="zoom:33%;" /><p>Dockerå†…çš„è™šæ‹ŸIPä¸èƒ½è¢«å¤–ç½‘ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©å®¿ä¸»æœºKeepalivedæ˜ å°„æˆå¤–ç½‘å¯ä»¥è®¿é—®çš„è™šæ‹ŸIP</p><p>å®‰è£…Keepalived</p><ul><li><p>Keepalivedå¿…é¡»è¦å®‰è£…åœ¨Haproxyæ‰€åœ¨çš„å®¹å™¨ä¹‹å†…</p><pre><code class="shell">docker exec -it container_name bash# å› ä¸ºHaproxyæ˜¯ä½¿ç”¨Ubuntuç³»ç»Ÿåˆ›å»ºå‡ºæ¥çš„ï¼Œæ‰€ä»¥æ­¤æ—¶å®‰è£…Keepalivedéœ€è¦ä½¿ç”¨apt-getæŒ‡ä»¤apt-get updateapt-get install keepalived</code></pre></li></ul><p>Keepalivedé…ç½®æ–‡ä»¶</p><ul><li><p>Keepalivedçš„é…ç½®æ–‡ä»¶æ˜¯<code>/etc/keepalived/keepalived.conf</code></p><pre><code class="shell">apt-get install vimvim /etc/keepalived/keepalived.conf</code></pre><pre><code class="shell">vrrp_instance  CONF_NAME {    state  MASTER    interface  eth0    virtual_router_id  51    priority  100    advert_int  1    authentication {        auth_type  PASS        auth_pass  123456    }    virtual_ipaddress {        172.18.0.201    }}</code></pre><p>æ³¨ï¼š</p><ul><li><p><code>CONF_NAME</code>ï¼šé…ç½®ä¿¡æ¯åå­—ï¼Œå¯è‡ªå®šä¹‰</p></li><li><p><code>state  MASTER</code>ï¼šKeepalivedçš„èº«ä»½ï¼ˆMASTERä¸»æœåŠ¡ï¼ŒBACKUPå¤‡æœåŠ¡å™¨ï¼‰ã€‚ä¸»æœåŠ¡è¦æŠ¢å è™šæ‹ŸIPï¼Œå¤‡æœåŠ¡å™¨ä¸ä¼šæŠ¢å è™šæ‹ŸIPã€‚</p></li><li><p><code>interface  eth0</code>ï¼šç½‘å¡è®¾å¤‡ã€‚eth0æ˜¯ç½‘å¡åå­—ï¼ŒDockerè™šæ‹Ÿæœºçš„ç½‘å¡ã€‚</p></li><li><p><code>virtual_router_id  51</code>ï¼šè™šæ‹Ÿè·¯ç”±æ ‡è¯†ï¼ŒMASTERå’ŒBACKUPçš„è™šæ‹Ÿè·¯ç”±æ ‡è¯†å¿…é¡»ä¸€è‡´ã€‚æ ‡è¯†å¯ä»¥æ˜¯0~255</p></li><li><p><code>priority  100</code>ï¼šMASTERæƒé‡ è¦ é«˜äºBACKUPï¼Œæ•°æ®è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜</p></li><li><p><code>advert_int  1</code>ï¼šMASTERä¸BACKUPèŠ‚ç‚¹é—´åŒæ­¥æ£€æŸ¥ï¼ˆå¿ƒè·³æ£€æµ‹ï¼‰çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’ã€‚ä¸»å¤‡ä¹‹é—´å¿…é¡»ä¸€è‡´ã€‚</p></li><li><p><code>authentication</code>ï¼šä¸»ä»æœåŠ¡å™¨éªŒè¯æ–¹å¼ã€‚ä¸»å¤‡å¿…é¡»ä½¿ç”¨ç›¸åŒçš„å¯†ç æ‰èƒ½æ­£å¸¸é€šä¿¡ã€‚å¿ƒè·³æ£€æµ‹ç™»å½•KeepalivedèŠ‚ç‚¹ï¼Œå¼€æ”¾è´¦å·å¯†ç ã€‚</p></li><li><p><code>virtual_ipaddress</code>ï¼šè™šæ‹ŸIPåœ°å€ã€‚å¯ä»¥è®¾ç½®å¤šä¸ªè™šæ‹ŸIPåœ°å€ï¼Œæ¯è¡Œä¸€ä¸ª</p></li></ul></li></ul><p>å¯åŠ¨Keepalived</p><ul><li><p>å¯åŠ¨Keepalivedä¹‹åï¼Œå®¿ä¸»æœºå¯ä»¥PINGé€šè™šæ‹ŸIP</p><pre><code class="shell">service Keepalived startping 172.18.0.201</code></pre></li></ul><h3 id="4-5-è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼ˆä¸‹ï¼‰"><a href="#4-5-è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼ˆä¸‹ï¼‰" class="headerlink" title="4-5 è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼ˆä¸‹ï¼‰"></a>4-5 è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼ˆä¸‹ï¼‰</h3><p>â€¦è§†é¢‘ä¸¢å¤±â€¦0.0</p><h3 id="4-6-çƒ­å¤‡ä»½æ•°æ®"><a href="#4-6-çƒ­å¤‡ä»½æ•°æ®" class="headerlink" title="4-6 çƒ­å¤‡ä»½æ•°æ®"></a>4-6 çƒ­å¤‡ä»½æ•°æ®</h3><p>MySQLå¤‡ä»½è¯­å¥ï¼š</p><pre><code class="mysql"># æ•°æ®åº“åœ°å€ï¼š127.0.0.1# æ•°æ®åº“ç”¨æˆ·åï¼šroot# æ•°æ®åº“å¯†ç ï¼š123456# æ•°æ®åº“åç§°ï¼štest# å¤‡ä»½æ•°æ®åº“åˆ°Dç›˜æ ¹ç›®å½•mysqldump -h127.0.0.1 -uroot -p123456 test &gt; d:/backup_file.sql</code></pre><p>å†·å¤‡ä»½</p><ul><li>å†·å¤‡ä»½æ˜¯å…³é—­æ•°æ®åº“æ—¶å€™çš„å¤‡ä»½æ–¹å¼ï¼Œé€šå¸¸åšæ³•æ˜¯æ‹·è´æ•°æ®æ–‡ä»¶</li><li>å†·å¤‡ä»½æ˜¯æœ€ç®€å•æœ€å®‰å…¨çš„ä¸€ç§å¤‡ä»½æ–¹å¼</li><li>å¤§å‹ç½‘ç«™æ— æ³•åšåˆ°å…³é—­ä¸šåŠ¡å¤‡ä»½æ•°æ®ï¼Œæ‰€ä»¥å†·å¤‡ä»½ä¸æ˜¯æœ€ä½³é€‰æ‹©</li></ul><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0xf5hnj312g041dh2.jpg" alt="é›†ç¾¤å†·å¤‡ä»½æ–¹æ¡ˆ" style="zoom:33%;" /><p>çƒ­å¤‡ä»½</p><ul><li>çƒ­å¤‡ä»½æ˜¯åœ¨ç³»ç»Ÿè¿è¡Œçš„çŠ¶æ€ä¸‹å¤‡ä»½æ•°æ®ï¼Œä¹Ÿæ˜¯éš¾åº¦æœ€å¤§çš„å¤‡ä»½</li><li>MySQLå¸¸è§çš„çƒ­å¤‡ä»½æœ‰LVMå’ŒXtraBackupä¸¤ç§æ–¹æ¡ˆ</li><li>å»ºè®®ä½¿ç”¨XtraBackupçƒ­å¤‡ä»½MySQL</li></ul><p>XtraBackupä»‹ç»</p><ul><li>XtraBackupæ˜¯ä¸€æ¬¾åŸºäºInnoDBçš„åœ¨çº¿çƒ­å¤‡å·¥å…·ï¼Œå…·æœ‰å¼€æºå…è´¹ï¼Œæ”¯æŒåœ¨çº¿çƒ­å¤‡ï¼Œå ç”¨ç£ç›˜ç©ºé—´å°ï¼Œèƒ½å¤Ÿéå¸¸å¿«é€Ÿåœ°å¤‡ä»½ä¸æ¢å¤MySQLæ•°æ®åº“ã€‚æ”¯æŒMySQLå®˜æ–¹ç‰ˆåŠå„ç§è¡ç”Ÿç‰ˆã€‚XtraBackupæ”¯æŒå…¨é‡å¤‡ä»½ã€å¢é‡å¤‡ä»½ã€‚</li></ul><p>XtraBackupä¼˜åŠ¿</p><ul><li>XtraBackupå¤‡ä»½è¿‡ç¨‹ä¸é”è¡¨ã€å¿«é€Ÿå¯é </li><li>XtraBackupå¤‡ä»½è¿‡ç¨‹ä¸ä¼šæ‰“æ–­æ­£åœ¨æ‰§è¡Œçš„äº‹åŠ¡</li><li>XtraBackupèƒ½å¤ŸåŸºäºå‹ç¼©ç­‰åŠŸèƒ½èŠ‚çº¦ç£ç›˜ç©ºé—´å’Œæµé‡</li></ul><p>å…¨é‡å¤‡ä»½å’Œå¢é‡å¤‡ä»½</p><ul><li>å…¨é‡å¤‡ä»½æ˜¯å¤‡ä»½å…¨éƒ¨æ•°æ®ã€‚å¤‡ä»½è¿‡ç¨‹æ—¶é—´é•¿ï¼Œå ç”¨ç©ºé—´å¤§ã€‚</li><li>å¢é‡å¤‡ä»½æ˜¯åªå¤‡ä»½å˜åŒ–çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚å¤‡ä»½æ—¶é—´çŸ­ï¼Œå ç”¨ç©ºé—´å°ã€‚</li></ul><p>å¯¹æ•°æ®åº“é¦–æ¬¡å¤‡ä»½åº”ä½¿ç”¨å…¨é‡å¤‡ä»½ï¼Œåç»­å¯ä½¿ç”¨å¢é‡å¤‡ä»½ã€‚å¤‡ä»½é€Ÿåº¦å¿«ï¼Œå‡å°‘ç¡¬ç›˜å‹åŠ›</p><pre><code class="shell">docker volume create volume_backupdocker stop container_namedocker rm container_namedocker run -d -p 3306:3306 -v volume_name1:var/lib/mysql -v colume_backup:/data --privileged -e MYSQL_ROOT_PASSWORD=mysql_root_password -e CLUSTER_NAME=cluster_name -e XTRABACKUP_PASSWORD=xtrabackup_password -e CLUSTER_JOIN=container_name2 --name=container_name1 --net=network_name --ip 172.18.0.2 pxc</code></pre><p>PXCå…¨é‡å¤‡ä»½æ­¥éª¤</p><ul><li><p>PXCå®¹å™¨ä¸­å®‰è£…XtraBackupï¼Œå¹¶æ‰§è¡Œå¤‡ä»½</p><pre><code class="shell">docker exec -it container_name1 bashapt-get updateapt-get install percona-xtrabackup-24# æ•°æ®åº“ç”¨æˆ·åï¼šroot# æ•°æ®åº“å¯†ç ï¼š123456innobackupex --user=root --password=123456 /data/backup/full</code></pre></li></ul><p>æŸ¥çœ‹Dockerå·ä¿¡æ¯ï¼ˆå¦‚å·ä½ç½®ï¼‰</p><pre><code class="shell">docker inspect volume_name</code></pre><p>PXCå…¨é‡æ¢å¤æ­¥éª¤</p><p>æ•°æ®åº“æ¢å¤æ•°æ®åªæœ‰å†·è¿˜åŸï¼Œæ²¡æœ‰çƒ­è¿˜åŸã€‚æ¢å¤æ•°æ®ä¸äº‹åŠ¡æ•°æ®ç›¸äº’å½±å“ã€‚</p><ul><li>æ•°æ®åº“å¯ä»¥çƒ­å¤‡ä»½ï¼Œä½†æ˜¯ä¸èƒ½çƒ­è¿˜åŸã€‚ä¸ºäº†é¿å…æ¢å¤è¿‡ç¨‹ä¸­çš„æ•°æ®åŒæ­¥ï¼Œæˆ‘ä»¬é‡‡ç”¨ç©ºç™½çš„MySQLè¿˜åŸæ•°æ®ï¼Œç„¶åå†å»ºç«‹PXCé›†ç¾¤ã€‚</li><li>è¿˜åŸæ•°æ®å‰è¦å°†æœªæäº¤çš„äº‹åŠ¡å›æ»šï¼Œè¿˜åŸæ•°æ®ä¹‹åé‡å¯MySQL</li></ul><pre><code class="shell"># åˆ é™¤MySQLå†…éƒ¨çš„æ•°æ®rm -rf /var/lib/mysql/*# æŠŠæœªæäº¤çš„äº‹åŠ¡è¿›è¡Œå›æ»šinnobackupex --user=root --password=123456 --apply-back /data/backup/full/2018-04-15_05-09-07/# å…¨é‡å†·è¿˜åŸinnobackupex --user=root --password=123456 --copy-back /data/backup/full/2018-04-15_05-09-07/</code></pre><p>æ­¥éª¤ï¼š</p><pre><code class="shell">docker stop container_name1 container_name2 container_name3 container_name4 container_name5docker rm container_name1 container_name2 container_name3 container_name4 container_name5docker volume rm volume_name1 volume_name2 volume_name3 volume_name4 volume_name5docker volume create volume_name1docker run -d -p 3306:3306 -v volume_name1:/var/lib/mysql -v colume_backup:/data -e MYSQL_ROOT_PASSWORD=mysql_root_password -e CLUSTER_NAME=cluster_name -e XTRABACKUP_PASSWORD=xtrabackup_password --prilileged --name=container_name1 --net=network_name --ip 172.18.0.2 pxcdcoker exec -it container_name bashrm -rf /var/lib/mysql/*innobackupex --user=root --password=123456 --apply-back /data/backup/full/2018-04-15_05-09-07/innobackupex --user=root --password=123456 --copy-back /data/backup/full/2018-04-15_05-09-07/exitdocker stop container_name1docker start container_name1</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬03ç« -LinuxåŸºç¡€çŸ¥è¯†å¼ºåŒ–</title>
      <link href="/imooc/219-docker/03-linux-base/"/>
      <url>/imooc/219-docker/03-linux-base/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬ç« å†…å®¹æ˜¯å·©å›ºå’Œå¤ä¹ Linuxç³»ç»ŸåŸºç¡€çŸ¥è¯†ï¼Œé‡ç‚¹è®²è§£Linuxç³»ç»Ÿä¸­çš„ç›®å½•ç»“æ„å’Œå¸¸ç”¨æŒ‡ä»¤ï¼Œä»¥åŠé˜²ç«å¢™ç­‰ã€‚ä¸ºåœ¨Linuxç¯å¢ƒä¸­éƒ¨ç½²å‰åç«¯åˆ†ç¦»é¡¹ç›®æ‰«æ¸…åŸºç¡€çŸ¥è¯†éšœç¢ã€‚è€Œä¸”è¿˜ä¼šè®²è§£Dockerè™šæ‹Ÿæœºçš„å®‰è£…ã€‚</p></blockquote><p>@[TOC]</p><h3 id="3-1-Linuxç³»ç»Ÿæ„æˆå’ŒåŸºæœ¬æ“ä½œï¼ˆä¸Šï¼‰"><a href="#3-1-Linuxç³»ç»Ÿæ„æˆå’ŒåŸºæœ¬æ“ä½œï¼ˆä¸Šï¼‰" class="headerlink" title="3-1 Linuxç³»ç»Ÿæ„æˆå’ŒåŸºæœ¬æ“ä½œï¼ˆä¸Šï¼‰"></a>3-1 Linuxç³»ç»Ÿæ„æˆå’ŒåŸºæœ¬æ“ä½œï¼ˆä¸Šï¼‰</h3><p>Windowsæ“ä½œç³»ç»Ÿçš„ç¼ºç‚¹ï¼š</p><ol><li>å›¾å½¢ç•Œé¢æœªå“åº”ä¼šå¼•èµ·å¡é¡¿</li><li>å®‰è£…æŸäº›è½¯ä»¶éœ€è¦é‡æ–°å¯åŠ¨ç³»ç»Ÿ</li><li>ç¡¬ä»¶é©±åŠ¨ä¸å¥½ä¼šå‡ºç° è“å±ã€æ­»æœº</li></ol><p>Linuxæ“ä½œç³»ç»Ÿçš„ä¼˜ç‚¹ï¼š</p><ol><li><p>è·¨å¹³å°çš„ç¡¬ä»¶æ”¯æŒï¼Œå¦‚æœåŠ¡å™¨ã€åµŒå…¥å¼ï¼ˆæ‰‹è¡¨ã€æ™ºèƒ½ç”µè§†ï¼‰</p></li><li><p>ä¸°å¯Œçš„è½¯ä»¶æ”¯æŒ</p><p>CentOSä½¿ç”¨yumæŒ‡ä»¤</p><p>Ubuntuä½¿ç”¨apt-getæŒ‡ä»¤</p></li><li><p>å¤šç”¨æˆ·å¤šä»»åŠ¡</p></li><li><p>å¯é çš„å®‰å…¨æ€§</p></li><li><p>è‰¯å¥½çš„ç¨³å®šæ€§</p></li><li><p>å®Œå–„çš„ç½‘ç»œåŠŸèƒ½</p></li></ol><p>Linuxç›®å½•ç»“æ„ï¼š</p><p>/    â€•â€• Linuxæ ¹ç›®å½•</p><p>â€‹    <strong>/dev          â€•â€• å­˜æ”¾æŠ½è±¡ç¡¬ä»¶ï¼ˆç½‘å¡ã€ç¡¬ç›˜ï¼‰</strong></p><p>â€‹    /boot        â€•â€• å­˜æ”¾å†…æ ¸ä¸å¯åŠ¨æ–‡ä»¶</p><p>â€‹    /lib            â€•â€• å­˜æ”¾ç³»ç»Ÿåº“æ–‡ä»¶</p><p>â€‹    <strong>/bin          â€•â€• å­˜æ”¾äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¯æ‰§è¡Œå‘½ä»¤ï¼‰</strong></p><p>â€‹    /sbin        â€•â€• å­˜æ”¾ç‰¹æƒçº§äºŒè¿›åˆ¶æ–‡ä»¶</p><p>â€‹    <strong>/usr          â€•â€• å­˜æ”¾å®‰è£…ç¨‹åºï¼ˆè½¯ä»¶é»˜è®¤ç›®å½•ï¼‰</strong></p><p>â€‹    <strong>/var          â€•â€• å­˜æ”¾ç»å¸¸å˜åŒ–çš„æ–‡ä»¶ï¼ˆæ—¥å¿—ï¼‰</strong></p><p>â€‹    <strong>/mnt        â€•â€• æ–‡ä»¶æŒ‚è½½ç›®å½•ï¼ˆUç›˜ã€å…‰é©±ï¼‰</strong></p><p>â€‹    <strong>/home     â€•â€• æ™®é€šç”¨æˆ·ç›®å½•</strong></p><p>â€‹    /root        â€•â€• ç‰¹æƒç”¨æˆ·ç›®å½•</p><p>â€‹    <strong>/etc          â€•â€• å­˜æ”¾é…ç½®æ–‡ä»¶ç›®å½•</strong></p><p>â€‹    /opt          â€•â€• å¤§å‹è½¯ä»¶å­˜æ”¾ç›®å½•ï¼ˆéå¼ºåˆ¶ï¼‰</p><p>Linuxç›®å½•ä¸æ–‡ä»¶ç®¡ç†ï¼š</p><ul><li><p>åˆ—å‡ºç›®å½•å†…å®¹</p><p><code>ls</code></p></li><li><p>åˆ›å»ºæ–°ç›®å½•</p><p><code>mkdir dir_name</code></p></li><li><p>åˆ›å»ºæ–‡ä»¶</p><p><code>touch file_name</code></p></li><li><p>å‘æ–‡ä»¶å†™å…¥å†…å®¹</p><p><code>echo content_info &gt; file_name</code></p></li><li><p>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p><p><code>cat file_name</code></p></li><li><p>ä¿®æ”¹æ–‡ä»¶å†…å®¹</p><p><code>vi file_name</code></p></li><li><p>å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</p><p><code>cp src_name tar_name</code>     â€•â€• å¤åˆ¶æ–‡ä»¶</p><p><code>cp  -r src_name tar_name</code>    â€•â€• å¤åˆ¶æ–‡ä»¶å¤¹</p><p>æ³¨ï¼š</p><ul><li>-rï¼šé€’å½’å¤åˆ¶ç›®å½•çš„å†…å®¹</li></ul></li><li><p>åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</p><p><code>rm file_name</code>    â€•â€• åˆ é™¤æ–‡ä»¶</p><p><code>rm -r file_name</code>    â€•â€• åˆ é™¤æ–‡ä»¶å¤¹</p><p>æ³¨ï¼š</p><ul><li>-rï¼šé€’å½’åˆ é™¤æ–‡ä»¶å¤¹çš„æ–‡ä»¶</li><li>-fï¼šå¼ºåˆ¶åˆ é™¤æ–‡ä»¶</li></ul></li><li><p>ç§»åŠ¨ç›®å½•æˆ–æ–‡ä»¶</p><p><code>mv -f src_name tar_name</code></p><p>æ³¨ï¼š</p><ul><li>-fï¼šå¼ºåˆ¶è¦†ç›–å·²å­˜åœ¨çš„ç›®å½•æˆ–æ–‡ä»¶</li></ul></li><li><p>æŸ¥çœ‹æ–‡ä»¶å±æ€§</p><p><code>ls -l</code>æˆ–<code>ll</code></p><pre><code class="shell">-rw-r--r--    1 root root    0 6æœˆ    23    23:56 file_name</code></pre><p>æ³¨ï¼š</p><ul><li><p><code>-rw-r--r--</code>ï¼šæ–‡ä»¶ç±»å‹ä¸æƒé™</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0ce4gcj31et0g578m.jpg" alt="Linuxæ–‡ä»¶å±æ€§" style="zoom:25%;" /></li><li><p><code>1</code>ï¼šæ–‡ä»¶æ•°é‡</p></li><li><p><code>root root</code>ï¼šç”¨æˆ·åã€ç”¨æˆ·ç»„</p></li><li><p><code>0</code>ï¼šæ–‡ä»¶ï¼ˆå¤¹ï¼‰å®¹é‡å¤§å°</p></li><li><p><code>6æœˆ    23    23:56</code>ï¼šåˆ›å»ºæ–‡ä»¶æ—¶é—´çš„æ—¶é—´ä¿¡æ¯ï¼Œ6æœˆ23æ—¥23:56</p></li><li><p><code>file_name</code>ï¼šæ–‡ä»¶å</p></li></ul></li><li><p>ä¿®æ”¹æ–‡ä»¶å±æ€§</p><p><code>chmod 700 file_name</code></p><p>æƒé™ä»£ç ä½¿ç”¨ä¸‰ä½äºŒè¿›åˆ¶æ ‡è¯†</p></li><li><p>åˆ›å»ºæ–°ç”¨æˆ·</p><p><code>adduser user_name</code></p></li><li><p>ä¸ºç”¨æˆ·è®¾ç½®å¯†ç </p><p><code>passwd user_name</code></p></li></ul><h3 id="3-2-Linuxç³»ç»Ÿæ„æˆå’ŒåŸºæœ¬æ“ä½œï¼ˆä¸‹ï¼‰"><a href="#3-2-Linuxç³»ç»Ÿæ„æˆå’ŒåŸºæœ¬æ“ä½œï¼ˆä¸‹ï¼‰" class="headerlink" title="3-2 Linuxç³»ç»Ÿæ„æˆå’ŒåŸºæœ¬æ“ä½œï¼ˆä¸‹ï¼‰"></a>3-2 Linuxç³»ç»Ÿæ„æˆå’ŒåŸºæœ¬æ“ä½œï¼ˆä¸‹ï¼‰</h3><p>â€‹    å‚ä¸Šã€‚</p><h3 id="3-3-é˜²ç«å¢™ç®¡ç†"><a href="#3-3-é˜²ç«å¢™ç®¡ç†" class="headerlink" title="3-3 é˜²ç«å¢™ç®¡ç†"></a>3-3 é˜²ç«å¢™ç®¡ç†</h3><blockquote><p>CentOSé»˜è®¤å®‰è£…äº†firewallé˜²ç«å¢™</p><p>åˆ©ç”¨é˜²ç«å¢™ï¼Œæˆ‘ä»¬å¯ä»¥å…è®¸æˆ–æ˜¯é™åˆ¶ä¼ è¾“çš„æ•°æ®é€šè¿‡</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0dc4jyj30yn04p763.jpg" alt="CentOSé˜²ç«å¢™" style="zoom:25%;" /></blockquote><p>ç®¡ç†é˜²ç«å¢™</p><ul><li><p>æŸ¥çœ‹ã€å¯åŠ¨ã€å…³é—­ã€é‡å¯é˜²ç«å¢™</p><pre><code class="bash"># æŸ¥çœ‹é˜²ç«å¢™firewall-cmd --state# å¯åŠ¨é˜²ç«å¢™service firewall start# å…³é—­é˜²ç«å¢™service firewall stop# é‡å¯é˜²ç«å¢™service firewall restart</code></pre></li><li><p>ç«¯å£ç®¡ç†</p><pre><code class="shell"># å¼€å¯ç«¯å£firewall-cmd --permanent --add-port=8080-8085/tcp# åŠ è½½è®¾ç½®firewall-cmd --reload# å…³é—­ç«¯å£firewall-cmd --permanent --remove-port=8080-8085/tcp</code></pre></li><li><p>æŸ¥çœ‹å¼€å¯çš„ç«¯å£å’ŒæœåŠ¡</p><pre><code class="shell"># æŸ¥çœ‹é˜²ç«å¢™å·²å¼€æ”¾ç«¯å£firewall-cmd --permanent --list-prots# æŸ¥çœ‹é˜²ç«å¢™å·²å¯åŠ¨æœåŠ¡firewall-cmd --permanent --list-services</code></pre></li></ul><h3 id="3-4-Dockerè™šæ‹Ÿæœºï¼ˆä¸Šï¼‰"><a href="#3-4-Dockerè™šæ‹Ÿæœºï¼ˆä¸Šï¼‰" class="headerlink" title="3-4 Dockerè™šæ‹Ÿæœºï¼ˆä¸Šï¼‰"></a>3-4 Dockerè™šæ‹Ÿæœºï¼ˆä¸Šï¼‰</h3><blockquote><p>éš”ç¦»æ€§ã€è½»é‡çº§</p></blockquote><p>Dockerè™šæ‹Ÿæœºæ¶æ„ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0eip3ij30hc0g4tck.jpg" alt="Dockerè™šæ‹Ÿæœºæ¶æ„" style="zoom:35%;" /><p>Dockeråˆ›å»ºçš„æ‰€æœ‰è™šæ‹Ÿå®ä¾‹å…±ç”¨ä¸€ä¸ªLinuxå†…æ ¸ï¼Œå¯¹ç¡¬ä»¶å ç”¨è¾ƒå°ï¼Œå±äºè½»é‡çº§è™šæ‹Ÿæœº</p><p>äº‘è®¡ç®—ä¸­çš„Dockerè™šæ‹Ÿæœºï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0fy4ikj313e0l0tjr.jpg" alt="äº‘è®¡ç®—ä¸­çš„Dockerè™šæ‹Ÿæœº" style="zoom:30%;" /><p>Dockeré•œåƒä¸å®¹å™¨</p><ul><li><p>å®¹å™¨æ˜¯ä»é•œåƒä¸­åˆ›å»ºå‡ºæ¥çš„è™šæ‹Ÿå®ä¾‹</p><blockquote><p>å®¹å™¨ç”¨æ¥è¿è¡Œç¨‹åºï¼Œæ˜¯è¯»å†™å±‚</p><p>é•œåƒç”¨æ¥å®‰è£…ç¨‹åºï¼Œæ˜¯åªè¯»å±‚</p></blockquote></li></ul><p>å®‰è£…Dockerè™šæ‹Ÿæœº</p><ul><li><p>å…ˆæ›´æ–°yumè½¯ä»¶ç®¡ç†å™¨ï¼Œç„¶åå†å®‰è£…Docker</p><pre><code class="shell"># æ›´æ–°yumè½¯ä»¶ç®¡ç†å™¨yum -y update# å®‰è£…Dockeryum install -y docker</code></pre><p>æ³¨ï¼š</p><ul><li>-yï¼šä»£è¡¨é€‰æ‹©ç¨‹åºå®‰è£…ä¸­çš„yesé€‰é¡¹</li></ul></li></ul><p>ç®¡ç†Dockerè™šæ‹Ÿæœº</p><ul><li><p>å¯åŠ¨ã€å…³é—­ä¸é‡å¯</p><pre><code class="shell">service docker startservice docker stopservice docker restart</code></pre></li></ul><p>Dockerè™šæ‹Ÿæœºç®¡ç†å‘½ä»¤ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi0hvhmgj31ah0m5wpq.jpg" alt="Dockerè™šæ‹Ÿæœºç®¡ç†å‘½ä»¤" style="zoom:30%;" /><h3 id="3-5-Dockerè™šæ‹Ÿæœºï¼ˆä¸‹ï¼‰"><a href="#3-5-Dockerè™šæ‹Ÿæœºï¼ˆä¸‹ï¼‰" class="headerlink" title="3-5 Dockerè™šæ‹Ÿæœºï¼ˆä¸‹ï¼‰"></a>3-5 Dockerè™šæ‹Ÿæœºï¼ˆä¸‹ï¼‰</h3><p>åœ¨çº¿å®‰è£…é•œåƒ</p><ul><li><p>åœ¨çº¿å®‰è£…Javaé•œåƒ</p><pre><code class="shell">docker search javadocker pull java</code></pre><p>å›½å¤–é•œåƒä»“åº“ä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œå»ºè®®ä½¿ç”¨å›½å†…é•œåƒä»“åº“ï¼Œå¦‚DaoCloud</p><p><a href="http://www.daocloud.io" target="_blank" rel="noopener">http://www.daocloud.io</a></p><p>ã€æ›´å¤šã€‘â€“&gt;ã€åŠ é€Ÿå™¨ã€‘â€“&gt;ã€é…ç½®DockeråŠ é€Ÿå™¨ã€‘â€“&gt;ã€å¤åˆ¶å‘½ä»¤å¹¶æ‰§è¡Œã€‘â€“&gt;ã€ä¿®æ”¹Dockeré…ç½®(åˆ é™¤<code>,</code>)ã€‘</p><pre><code class="shell">curl -sSL https://get.daocloud.io/daotools/ser_mirror.sh | sh -s http://1474c648.m.daocloud.io</code></pre><pre><code class="shell">vi /etc/docker/daemon.json</code></pre><pre><code class="shell"># æŸ¥çœ‹Dockerå·²ç»å®‰è£…é•œåƒdocker images</code></pre></li><li><p>å¯¼å…¥å¯¼å‡ºé•œåƒ</p><pre><code class="shell"># å¯¼å‡ºé•œåƒdocker save container_name &gt; /home/container_name.tar.gz# å¯¼å…¥é•œåƒdocker load &lt; /home/container_name.tar.gz# æŸ¥çœ‹Dockerå·²å®‰è£…é•œåƒdocker images# åˆ é™¤é•œåƒdocker rmi image_name</code></pre></li><li><p>å¯åŠ¨å®¹å™¨</p><ul><li><p>å¯åŠ¨é•œåƒä¼šåˆ›å»ºå‡ºä¸€ä¸ªè¿è¡ŒçŠ¶æ€çš„å®¹å™¨</p><pre><code class="shell"># åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨docker run -it image_name bashdocker run -it --name container_name image_name bashdocker run -it --name container_name -p 9000:8080 -p 9001:8085 image_name bashdcoker run -it --name container_name -v /home/project:/soft --privileged image_name bash</code></pre><p>æ³¨ï¼š</p><ul><li><p><code>-it</code>ï¼šå¯åŠ¨å®¹å™¨åï¼Œå¼€å¯ä¸€ä¸ªäº¤äº’ç•Œé¢</p></li><li><p><code>--name myjava</code>ï¼šç»™å®¹å™¨å‘½åï¼ˆå¯é€‰ï¼‰</p></li><li><p><code>java</code>ï¼šé•œåƒåç§°</p></li><li><p><code>bash</code>ï¼šå¯åŠ¨å®¹å™¨æ‰€è¿è¡Œçš„ç¨‹åº</p></li><li><p><code>-p 9000:8080</code>ï¼šæ˜ å°„ç«¯å£ï¼Œå®¿ä¸»æœº9000ä¸å®¹å™¨8080æ˜ å°„</p></li><li><p><code>-v /home/project:/soft</code>ï¼šæ–‡ä»¶æˆ–ç›®å½•çš„æ˜ å°„ï¼Œå®¿ä¸»æœº/home/projectä¸å®¹å™¨/softæ˜ å°„</p><p>ç¨‹åºçš„æ•°æ®åº“ç­‰æ•°æ®æ–‡ä»¶åº”åœ¨å®¿ä¸»æœºå­˜å‚¨ï¼Œåˆ©äºæ•°æ®çš„å¤‡ä»½ä¸æ¢å¤</p></li><li><p><code>--privileged</code>ï¼šæ–‡ä»¶æˆ–ç›®å½•æƒé™</p></li></ul></li></ul></li><li><p>æš‚åœå’Œåœæ­¢å®¹å™¨</p><pre><code class="shell"># æš‚åœå®¹å™¨docker pause container_name# æ¢å¤å®¹å™¨docker unpause container_name# åœæ­¢å®¹å™¨docker stop container_name# å¼€å§‹å®¹å™¨docker start -i container_name</code></pre></li><li><p>åˆ é™¤å®¹å™¨</p><pre><code class="shell">docker rm container_name</code></pre></li><li><p>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</p><pre><code class="shell">docker ps -a</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬02ç« -äººäººå¼€æºå‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸‹è½½ä¸é…ç½®</title>
      <link href="/imooc/219-docker/02-renren-fast/"/>
      <url>/imooc/219-docker/02-renren-fast/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬ç« ä»¥renren-fastå¼€æºé¡¹ç›®ä¸ºéƒ¨ç½²æ¡ˆä¾‹ï¼Œè¯¦ç»†è®²è§£äº†è¿™ä¸ªé¡¹ç›®çš„å‰ç«¯éƒ¨åˆ†å’Œåç«¯éƒ¨åˆ†çš„å®‰è£…å’Œé…ç½®ï¼Œåœ¨Windowså¹³å°ä¸Šè¿è¡Œè°ƒè¯•è¯¥é¡¹ç›®ã€‚</p></blockquote><p>@[TOC]</p><h3 id="2-1-å‰åç«¯åˆ†ç¦»æ¡†æ¶ä»‹ç»"><a href="#2-1-å‰åç«¯åˆ†ç¦»æ¡†æ¶ä»‹ç»" class="headerlink" title="2-1 å‰åç«¯åˆ†ç¦»æ¡†æ¶ä»‹ç»"></a>2-1 å‰åç«¯åˆ†ç¦»æ¡†æ¶ä»‹ç»</h3><p>äººäººç½‘å¼€æºé¡¹ç›®ï¼ˆ<a href="http://www.renren.io" target="_blank" rel="noopener">www.renren.io</a>ï¼‰</p><ul><li>renren-securityï¼šè½»é‡çº§æƒé™ç®¡ç†ç³»ç»Ÿ</li><li>renren-fastï¼šJavaå¿«é€Ÿå¼€å‘å¹³å°</li><li>renren-generatorï¼šä»£ç ç”Ÿæˆå™¨</li></ul><h3 id="2-2-åç«¯é¡¹ç›®ä¸‹è½½ä¸é…ç½®"><a href="#2-2-åç«¯é¡¹ç›®ä¸‹è½½ä¸é…ç½®" class="headerlink" title="2-2 åç«¯é¡¹ç›®ä¸‹è½½ä¸é…ç½®"></a>2-2 åç«¯é¡¹ç›®ä¸‹è½½ä¸é…ç½®</h3><p>renren-faståå°é¡¹ç›®ï¼š</p><ul><li>SpringBootã€SSMã€Shiroã€Redisã€<strong>Swagger</strong>ã€<strong>JWT</strong></li></ul><p><strong>å•ç‚¹ç™»å½•</strong></p><p>Mavenç¯å¢ƒï¼ˆMavenä¾èµ–äºJDKï¼‰</p><ul><li>Apache Mavenæ˜¯ä¸€å¥—è½¯ä»¶å·¥ç¨‹ç®¡ç†å’Œæ•´åˆå·¥å…·</li><li><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">http://maven.apache.org/download.cgi</a></li><li>è§£å‹ç¼©ï¼Œæ— éœ€å®‰è£…ã€‚</li><li>é…ç½®Mavenç¯å¢ƒå˜é‡</li><li>Mavené•œåƒåœ°å€ä¸æœ¬åœ°ä»“åº“åœ°å€é…ç½®</li><li>åœ¨Eclipse/IDEAä¸­è®¾ç½®Mavençš„HOMEè·¯å¾„ä¸settings.xmlæ–‡ä»¶</li></ul><p><a href="https://gitee.com/renrenio/renren-fast" target="_blank" rel="noopener">renren-faståç«¯æºç ä¸‹è½½</a></p><p><a href="https://www.renren.io/guide/" target="_blank" rel="noopener">renren-fastå¼€å‘æ–‡æ¡£</a></p><p>æ•°æ®åº“ç®¡ç†å·¥å…·ï¼š</p><ul><li>Navicat</li><li><a href="https://www.jetbrains.com/datagrip/" target="_blank" rel="noopener">DataGrip</a></li></ul><h3 id="2-3-å‰å°é¡¹ç›®çš„ä¸‹è½½ä¸é…ç½®"><a href="#2-3-å‰å°é¡¹ç›®çš„ä¸‹è½½ä¸é…ç½®" class="headerlink" title="2-3 å‰å°é¡¹ç›®çš„ä¸‹è½½ä¸é…ç½®"></a>2-3 å‰å°é¡¹ç›®çš„ä¸‹è½½ä¸é…ç½®</h3><p>renren-fastå‰ç«¯é¡¹ç›®ï¼š</p><ul><li>VUEï¼šå‰ç«¯å·¥ç¨‹çš„MVVMæ¡†æ¶</li><li>NodeJSï¼šä¸ºå‰ç«¯å·¥ç¨‹æä¾›äº†åŠ¨æ€è¿è¡Œç¯å¢ƒ</li><li>ElementUIï¼šä¸ºå‰ç«¯å·¥ç¨‹æä¾›äº†ä¸°å¯Œçš„ç»„ä»¶</li></ul><p><a href="https://github.com/renrenio/renren-fast-vue" target="_blank" rel="noopener">renren-fastå‰ç«¯æºç ä¸‹è½½</a></p><p>åˆå§‹åŒ–å·¥ç¨‹ï¼š</p><ul><li><p><a href="https://nodejs.org" target="_blank" rel="noopener">å®‰è£…NodeJSè¿è¡Œå·¥å…·</a></p></li><li><p>å®‰è£…ä¾èµ–&amp;è¿è¡Œé¡¹ç›®å</p><pre><code class="shell">cmd å·¥ç¨‹ç›®å½•npm installnpm run dev</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬01ç« -è¯¾ç¨‹ä»‹ç»</title>
      <link href="/imooc/219-docker/01-introduce/"/>
      <url>/imooc/219-docker/01-introduce/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://coding.imooc.com/class/219.html" target="_blank" rel="noopener">Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´</a></p><p>å±•ç¤ºå‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²çš„æˆæœï¼Œä»‹ç»å­¦ä¹ æœ¬é—¨è¯¾ç¨‹éœ€è¦çš„ç¡¬ä»¶ç¯å¢ƒå’Œè½¯ä»¶ç¯å¢ƒï¼Œå¹¶åˆ©ç”¨VMwareè™šæ‹Ÿæœºå®‰è£…CentOSï¼Œæ­å»ºDockeréƒ¨ç½²ç¯å¢ƒã€‚</p></blockquote><p>@[TOC]</p><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç»"></a>1-1 è¯¾ç¨‹ä»‹ç»</h3><ul><li><p>è¯¾ç¨‹ç›®çš„ï¼š</p><p>é«˜æ€§èƒ½ã€é«˜è´Ÿè½½ã€é«˜å¯ç”¨çš„éƒ¨ç½²æ–¹æ¡ˆ</p><p>äººäººç½‘ä¼ä¸šçº§æ¡ˆä¾‹è®²è§£åˆ†éƒ¨ç½²é›†ç¾¤éƒ¨ç½²ä¸è¿ç»´</p></li><li><p>è¯¾ç¨‹æ”¶è·ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghyxivmjj31400ktthy.jpg" alt="è¯¾ç¨‹æ”¶è·" style="zoom:67%;" /></li></ul><h3 id="1-2-é¡¹ç›®æ¼”ç¤º"><a href="#1-2-é¡¹ç›®æ¼”ç¤º" class="headerlink" title="1-2 é¡¹ç›®æ¼”ç¤º"></a>1-2 é¡¹ç›®æ¼”ç¤º</h3><ul><li><p>å“ªäº›éœ€è¦é›†ç¾¤ï¼Ÿ</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghyyob43j318g0jl0wi.jpg" alt="å“ªäº›éœ€è¦é›†ç¾¤ï¼Ÿ" style="zoom:33%;" /></li><li><p>äººäººå¿«é€Ÿå¼€å‘å¹³å°</p></li><li><p>å…³é—­é›†ç¾¤èŠ‚ç‚¹ï¼š<code>docker pause node1</code></p></li></ul><h3 id="1-3-å¼€å‘ç¯å¢ƒè¦æ±‚"><a href="#1-3-å¼€å‘ç¯å¢ƒè¦æ±‚" class="headerlink" title="1-3 å¼€å‘ç¯å¢ƒè¦æ±‚"></a>1-3 å¼€å‘ç¯å¢ƒè¦æ±‚</h3><p>å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²å›¾ï¼š</p><ul><li><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghz0hl9xj318c0jpdla.jpg" alt="å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²å›¾" style="zoom:33%;" /></li></ul><p>æŸ¥çœ‹è™šæ‹ŸæœºIPåœ°å€ï¼š<code>ip address</code></p><p>é…ç½®SSHï¼š</p><ul><li>Linuxé»˜è®¤å¼€å¯SSHï¼Œæ— éœ€è®¾ç½®</li><li>ä¸‹è½½XShellè½¯ä»¶</li></ul><p>é…ç½®SFTPï¼š</p><ul><li>ä¸‹è½½FlashFXPè½¯ä»¶</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
          <category> 219-Dockerç¯å¢ƒä¸‹çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²ä¸è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>134-ThreadGroup APIä»‹ç»ä¹‹äºŒ</title>
      <link href="/wang-thread/134-thread-group-api2/"/>
      <url>/wang-thread/134-thread-group-api2/</url>
      
        <content type="html"><![CDATA[<pre><code class="java">ThreadGroup tg1 = new ThreadGroup(&quot;TG1&quot;);Thread t1 = new Thread(tg1, () -&gt; {    while (true) {        try {            Thread.sleep(1_000);        } catch (InterruptedException e) {            e.printStackTrace();            break;        }    }}, &quot;T1&quot;);t1.start();ThreadGroup tg2 = new ThreadGroup(tg1, &quot;TG2&quot;);Thread t2 = new Thread(tg2, () -&gt; {    while (true) {        try {            Thread.sleep(1_000);        } catch (InterruptedException e) {            e.printStackTrace();            break;        }    }}, &quot;T2&quot;);t2.start();</code></pre><p><code>int activeCount()</code></p><blockquote><p>è¿”å›æ­¤çº¿ç¨‹ç»„åŠå…¶å­ç»„ä¸­æ´»åŠ¨çº¿ç¨‹æ•°çš„ä¼°è®¡å€¼ã€‚</p></blockquote><p><code>int activeGroupCount()</code></p><blockquote><p>è¿”å›æ­¤çº¿ç¨‹ç»„åŠå…¶å­ç»„ä¸­æ´»åŠ¨çº¿ç¨‹ç»„çš„æ•°é‡çš„ä¼°è®¡å€¼ã€‚</p></blockquote><p><code>void checkAccess()</code></p><blockquote><p>ç¡®å®šå½“å‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ˜¯å¦æœ‰æƒä¿®æ”¹æ­¤çº¿ç¨‹ç»„ã€‚</p></blockquote><p><code>void destroy()</code></p><blockquote><p>é”€æ¯è¯¥çº¿ç¨‹ç»„åŠå…¶æ‰€æœ‰å­ç»„ã€‚å¦‚æœçº¿ç¨‹ç»„ä¸ä¸ºç©ºæˆ–çº¿ç¨‹ç»„å·²è¢«é”€æ¯å°†æŠ›å‡º<code>IllegalThreadStateException</code></p><p>é”€æ¯å‰éœ€è¦ç¡®å®šçº¿ç¨‹ç»„é‡Œæ²¡æœ‰æ´»è·ƒçš„çº¿ç¨‹</p></blockquote><p><code>int enumerate(Thread[] list)</code></p><blockquote><p>å°†æ­¤çº¿ç¨‹ç»„åŠå…¶å­ç»„ä¸­çš„æ¯ä¸ªæ´»åŠ¨çº¿ç¨‹å¤åˆ¶åˆ°æŒ‡å®šçš„æ•°ç»„ä¸­ã€‚</p></blockquote><p><code>int enumerate(Thread[] list, boolean recurse)</code></p><blockquote><p>å°†æ­¤çº¿ç¨‹ç»„ä¸­(ä¸åŒ…å«å­ç»„)çš„æ¯ä¸ªæ´»åŠ¨çº¿ç¨‹å¤åˆ¶åˆ°æŒ‡å®šçš„æ•°ç»„ä¸­ã€‚</p></blockquote><pre><code class="java">Thread[] ts1 = new Thread[tg1.activeCount()];tg1.enumerate(ts1);System.out.println(Arrays.toString(ts1));// [Thread[T1,5,TG1], Thread[T2,5,TG2]]Thread[] ts2 = new Thread[tg1.activeCount()];tg1.enumerate(ts2, false);System.out.println(Arrays.toString(ts2));// [Thread[T1,5,TG1], null]ThreadGroup mainThreadGroup = Thread.currentThread().getThreadGroup();Thread[] ts3 = new Thread[mainThreadGroup.activeCount()];mainThreadGroup.enumerate(ts3, false);System.out.println(Arrays.toString(ts3));// [Thread[main,5,main], Thread[Monitor Ctrl-Break,5,main], null, null]</code></pre><p><code>void interrupt()</code></p><blockquote><p>ä¸­æ–­è¯¥çº¿ç¨‹ç»„ï¼ˆåŒ…æ‹¬å­ç»„ï¼‰ä¸­çš„æ‰€æœ‰çº¿ç¨‹ã€‚</p></blockquote><p><code>boolean isDaemon()</code></p><blockquote><p>æµ‹è¯•æ­¤çº¿ç¨‹ç»„æ˜¯å¦æ˜¯å®ˆæŠ¤ç¨‹åºçº¿ç¨‹ç»„ã€‚</p></blockquote><p><code>void setDaemon(boolean daemon)</code></p><blockquote><p>æ›´æ”¹æ­¤çº¿ç¨‹ç»„çš„å®ˆæŠ¤ç¨‹åºçŠ¶æ€ã€‚</p><p>å®ˆæŠ¤ç¨‹åºçº¿ç¨‹ç»„åœ¨å…¶æœ€åä¸€ä¸ªçº¿ç¨‹åœæ­¢æ—¶æˆ–åœ¨å…¶æœ€åä¸€ä¸ªçº¿ç¨‹ç»„è¢«é”€æ¯æ—¶ä¼šè‡ªåŠ¨é”€æ¯ã€‚</p><p>çº¿ç¨‹ç»„åˆ›å»ºå®Œæˆåå¹¶æ²¡æœ‰è¢«é”€æ¯ï¼Œéœ€è¦æ˜¾ç¤ºåœ°é”€æ¯å…³é—­ï¼Œå¦åˆ™å°†ä¸€ç›´å­˜æ´»ã€‚</p></blockquote><pre><code class="java">ThreadGroup tg3 = new ThreadGroup(&quot;TG3&quot;);Thread t3 = new Thread(tg3, () -&gt; {    Thread.sleep(1_000);}, &quot;T3&quot;);/*tg3.setDaemon(true);*/Thread.sleep(2_000);System.out.println(tg3.isDestroyed());// true// æ‰‹åŠ¨å›æ”¶ThreadGrouptg3.destroy();System.out.println(tg3.isDestroyed());</code></pre><p><code>void list()</code></p><blockquote><p>å°†æœ‰å…³æ­¤çº¿ç¨‹ç»„çš„ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚ä¸»è¦ç”¨æ¥åšæµ‹è¯•ç”¨çš„ã€‚</p></blockquote><p><code>void uncaughtException(Thread t, Throwable e)</code></p><blockquote><p>å½“æ­¤çº¿ç¨‹ç»„ä¸­çš„çº¿ç¨‹ç”±äºæœªæ•è·çš„å¼‚å¸¸è€Œåœæ­¢å¹¶ä¸”è¯¥çº¿ç¨‹æœªå®‰è£…ç‰¹å®šçš„Thread.UncaughtExceptionHandleræ—¶ï¼Œç”±Javaè™šæ‹Ÿæœºè°ƒç”¨ã€‚</p></blockquote><p><code>boolean parentOf(ThreadGroup g)</code></p><blockquote><p>æµ‹è¯•æ­¤çº¿ç¨‹ç»„æ˜¯ä¸æ˜¯å‚æ•°çº¿ç¨‹ç»„çš„ç¥–å…ˆçº¿ç¨‹ç»„ä¹‹ä¸€ã€‚ï¼ˆæµ‹è¯•æˆ‘æ˜¯ä¸æ˜¯ä½ è€æ±‰å„¿ï¼‰</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>133-ThreadGroup APIä»‹ç»ä¹‹ä¸€</title>
      <link href="/wang-thread/133-thread-group-api1/"/>
      <url>/wang-thread/133-thread-group-api1/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡<code>new Thread()</code>åˆ›å»ºçº¿ç¨‹çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šThreadGroupï¼Œåˆ™é»˜è®¤ä½¿ç”¨åˆ›å»ºçº¿ç¨‹çš„ThreadGroupã€‚</p><p>ThreadGroupå’ŒThreadå…³ç³»ï¼š</p><blockquote><p>çº¿ç¨‹ç»„ä»£è¡¨ä¸€ç»„çº¿ç¨‹ã€‚æ­¤å¤–ï¼Œçº¿ç¨‹ç»„è¿˜å¯ä»¥åŒ…æ‹¬å…¶ä»–çº¿ç¨‹ç»„ã€‚çº¿ç¨‹ç»„å½¢æˆä¸€æ£µæ ‘ï¼Œå…¶ä¸­é™¤åˆå§‹çº¿ç¨‹ç»„ä¹‹å¤–çš„æ¯ä¸ªçº¿ç¨‹ç»„éƒ½æœ‰ä¸€ä¸ªçˆ¶çº§ã€‚</p><p>å…è®¸çº¿ç¨‹è®¿é—®æœ‰å…³å…¶è‡ªå·±çš„çº¿ç¨‹<em>ç»„çš„ä¿¡æ¯ï¼Œä½†ä¸å…è®¸è®¿é—®æœ‰å…³å…¶çº¿ç¨‹ç»„çš„</em>çˆ¶çº¿ç¨‹ç»„æˆ–ä»»ä½•å…¶ä»–çº¿ç¨‹ç»„çš„ä¿¡æ¯ã€‚ï¼ˆæµ‹è¯•ç»“æœï¼š<strong>å¯ä»¥è®¿é—®çˆ¶çº¿ç¨‹ç»„çš„åªè¯»ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥è®¿é—®å…¶ä»–çº¿ç¨‹ç»„çš„åªè¯»ä¿¡æ¯</strong>ï¼‰</p></blockquote><p>mainæ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå…¶ThreadGroupä¸ºmain</p><pre><code class="java">public static void main(String[] args) {    Thread.currentThread().getName()// main    Thread.currentThread().getThreadGroup().getName()// main}</code></pre><p>mainçº¿ç¨‹çš„ä¼˜å…ˆçº§ä¸º10ï¼ˆæœ€é«˜ï¼‰ï¼ŒStackSizeä¹Ÿæ˜¯æ¯”æ‰‹åŠ¨åˆ›å»ºçš„çº¿ç¨‹å¤§ã€‚</p><p>çº¿ç¨‹ç»„çš„åˆ›å»ºï¼š</p><ol><li><p>use the name</p><blockquote><p><code>ThreadGroup(String name)</code></p></blockquote><pre><code class="java">ThreadGroup tg1 = new ThreadGroup(&quot;TG1&quot;);Thread t1 = new Thread(tg1, () -&gt; {    while (true) {        try {            ThreadGroup threadGroup = Thread.currentThread().getThreadGroup();            System.out.println(threadGroup.getName());// TG1            // è®¿é—®çº¿ç¨‹çˆ¶ThreadGroupçš„ä¿¡æ¯            System.out.println(threadGroup.getParent().getName());// main            System.out.println(threadGroup.getParent().activeCount());// 3            System.out.println(threadGroup.getParent().isDaemon());// false            // sleepä¸ä¼šæ”¾å¼ƒCPUæ‰§è¡Œæƒ            Thread.sleep(10_000);        } catch (InterruptedException e) {            e.printStackTrace();        }    }}, &quot;T1&quot;);t1.start();System.out.println(&quot;t1&#39;s thread group name = &quot;+t1.getThreadGroup().getName());// TG1</code></pre></li><li><p>use the parent and group name</p><blockquote><p><code>ThreadGroup(ThreadGroup parent, String name)</code></p></blockquote><pre><code class="java">ThreadGroup tg2 = new ThreadGroup(tg1, &quot;TG2&quot;);System.out.println(&quot;tg2&#39;s name = &quot;+tg2.getName());System.out.println(&quot;tg2&#39;s parent name = &quot;+tg2.getParent().getName());</code></pre></li></ol><p>TG3ä¸TG1ä¸ºåŒä¸€ä¸ªçˆ¶ThreadGroup-mainï¼Œæµ‹è¯•TG3èƒ½å¦è®¿é—®TG1çš„ä¸€äº›ä¿¡æ¯</p><pre><code class="java">ThreadGroup tg3 = new ThreadGroup(&quot;TG3&quot;);Thread t3 = new Thread(tg3, () -&gt; {    System.out.println(&quot;&gt;&gt;&gt;&gt;&quot; + t1.getName());// TG1    Thread[] threads = new Thread[tg1.activeCount()];    tg1.enumerate(threads);    Stream.of(threads).forEach(System.out::println);// Thread[T1,5,TG1]}, &quot;T3&quot;);t3.start();</code></pre><p>æµ‹è¯•ç»“æœï¼š<strong>å¯ä»¥è®¿é—®å…¶ä»–çº¿ç¨‹ç»„çš„ä¿¡æ¯</strong>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>132-å¦‚ä½•æ•è·çº¿ç¨‹è¿è¡ŒæœŸé—´çš„å¼‚å¸¸</title>
      <link href="/wang-thread/132-catch-thread-exception/"/>
      <url>/wang-thread/132-catch-thread-exception/</url>
      
        <content type="html"><![CDATA[<p>æ•è·çº¿ç¨‹å¼‚å¸¸</p><pre><code class="java">public static void main(String[] args) {    Thread t = new Thread(() -&gt; {        try {            Thread.sleep(1_000L);            int result = 10 / 0;            System.out.println(&quot;result = &quot; + result);        } catch (InterruptedException e) {            e.printStackTrace();        }    });    t.start();    t.setUncaughtExceptionHandler((thread, e) -&gt; {        System.out.println(e);        System.out.println(thread.getName());    });}</code></pre><p>StackTraceã€‚æ–¹æ³•è°ƒç”¨ã€‚</p><pre><code class="java">public class ThreadException {    public static void main(String[] args) {        new Test1().test();    }}</code></pre><pre><code class="java">public class Test1 {    private Test2 test2 = new Test2();    public void test() {        test2.test();    }}</code></pre><pre><code class="java">public class Test2 {    public void test() {        StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();        Stream.of(stackTrace)                .filter(e -&gt; !e.isNativeMethod())                .forEach(e -&gt;                        Optional.of(e.getClassName() + &quot;.&quot; + e.getMethodName() + &quot;:&quot; + e.getLineNumber()).ifPresent(System.out::println)                );    }}</code></pre><Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443" URIEncoding="UTF-8"/><Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443" URIEncoding="UTF-8"/>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>131-å¦‚ä½•ç»™ä½ çš„åº”ç”¨ç¨‹åºæ³¨å…¥é’©å­ç¨‹åºï¼ŒLinuxä¸‹æ¼”ç¤º</title>
      <link href="/wang-thread/131-hook-processor/"/>
      <url>/wang-thread/131-hook-processor/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•è·å–çº¿ç¨‹çš„Exceptionï¼Ÿ</p><blockquote><p>æˆ‘çŸ¥é“çº¿ç¨‹çš„<code>void run()</code>æ–¹æ³•æ˜¯ä¸å¯ä»¥æŠ›å‡ºå¼‚å¸¸çš„ï¼Œå¦‚æœçº¿ç¨‹æ­»æ‰ï¼Œè°ƒç”¨è€…æ˜¯ä¸çŸ¥é“çº¿ç¨‹æ‰§è¡Œæƒ…å†µçš„ã€‚</p><p>å¦‚æœæ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œåœ¨é”™è¯¯çš„æƒ…å†µä¸‹åªæ˜¯è¾“å‡ºå †æ ˆä¿¡æ¯ï¼Œè°ƒç”¨è€…å¹¶ä¸çŸ¥é“æ˜¯ä»€ä¹ˆå¼‚å¸¸å¯¼è‡´ã€‚</p></blockquote><p>çº¿ç¨‹çš„æ ˆå¯ä»¥è·Ÿè¸ªåˆ°æ–¹æ³•è°ƒç”¨ã€‚</p><p>JDKæ¨¡å¼ï¼šclientã€server</p><p>serveræ¨¡å¼ä¼šè¿›è¡Œè¿è¡Œæ—¶ä¼˜åŒ–ã€‚JITï¼Œå³Just In Time</p><p>Runtimeå¯ä»¥è°ƒç”¨ä¸€äº›ç³»ç»Ÿå‘½ä»¤</p><pre><code class="java">public class ExitCapture {    public static void main(String[] args) {        while (true) {            Thread.sleep(1_000L);            System.out.println(&quot;I am working...&quot;);        }    }}</code></pre><pre><code class="shell">javac ExitCapture.javajava -cp . ExitCapturenohup java -cp . ExitCapture &amp;tail -f nohup.outkill 2181</code></pre><p>å¦‚æœç¨‹åºå ç”¨äº†å¾ˆå¤šæ•°æ®åº“è¿æ¥æˆ–è€…æ˜¯æ–‡ä»¶å¥æŸ„ï¼Œæƒ³è¦åœ¨killç¨‹åºçš„æ—¶å€™ä¸€å¹¶è¿›è¡Œé‡Šæ”¾ï¼Œæˆ–è€…åœ¨å¼‚å¸¸é€€å‡ºç¨‹åºçš„æƒ…å†µä¸‹é€šçŸ¥ä¸€ä¸‹è°ƒç”¨è€…ç¨‹åºçŸ¥é“å®ƒå‡ºé”™äº†ï¼Œå¹¶ä¸æ˜¯è°ƒç”¨è€…æ—¶æ—¶åœ°å»ç›‘æ§ç¨‹åºã€‚ï¼ˆç¨‹åºä¸»åŠ¨å‘Šè¯‰ï¼Œå¹¶ä¸æ˜¯è¢«åŠ¨å‘ç°ï¼‰</p><pre><code class="java">public class ExitCapture {    public static void main(String[] args) {        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {            System.out.println(&quot;The application will be exit.&quot;);            notifyAndRelease();        }));        int i = 0;        while (true) {            Thread.sleep(1_000L);            System.out.println(&quot;I am working...&quot;);            i++;            if (i &gt; 20) {                throw new RuntimeException(&quot;Error&quot;);            }        }    }    private static void notifyAndRelease() {        System.out.println(&quot;notify to the admin.&quot;);        Thread.sleep(1_000L);        System.out.println(&quot;Will release resource(socket, file, connection.)&quot;);        Thread.sleep(1_000L);        System.out.println(&quot;Release and Notify Done!&quot;);    }}</code></pre><p>è¿è¡Œç¨‹åºï¼Œåœ¨i&gt;20æ—¶ç¨‹åºæŠ›å‡ºå¼‚å¸¸ï¼Œè¢«æ•è·åˆ°å¹¶æ‰§è¡Œ<code>notifyAndRelease()</code>ï¼›é€šè¿‡<code>kill</code>æ€æ­»ç¨‹åºä¹Ÿå¯ä»¥è¢«æ•è·å¹¶æ‰§è¡Œ<code>notifyAndRelease()</code>ï¼Œä½†æ˜¯ä½¿ç”¨<code>kill -9</code>å¼ºåˆ¶æ€æ­»ç¨‹åºåˆ™ä¸ä¼šæ‰§è¡Œ<code>notifyAndRelease()</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UTF-8å¸¦BOMè½¬UTF-8æ— BOMæ ¼å¼ç¼–ç </title>
      <link href="/utf8bom-to-utf8/"/>
      <url>/utf8bom-to-utf8/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ä¿å­˜çš„æ—¶å€™å»æ‰BOMå¤´ï¼ˆnotepad++æ”¯æŒ<strong>ä»¥UTF-8æ— BOMæ ¼å¼ç¼–ç </strong>ï¼‰</p></li><li><p>ç¨‹åºåšå…¼å®¹ï¼Œå…¼å®¹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="java">public static String deleteUTF8Bom(String fileStr) {    byte[] UTF8_BOM_BYTES = new byte[]{(byte) 0xEF, (byte) 0xBB, (byte) 0xBF};    byte[] bytes = fileStr.getBytes();    if (bytes[0] == UTF8_BOM_BYTES[0]            &amp;&amp; bytes[1] == UTF8_BOM_BYTES[1]            &amp;&amp; bytes[2] == UTF8_BOM_BYTES[2]) {        return new String(bytes, 3, bytes.length - 3);    }    return fileStr;}</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼–ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­DOã€BOã€DTOã€VOã€AOã€PO</title>
      <link href="/code-rules-object-model/"/>
      <url>/code-rules-object-model/</url>
      
        <content type="html"><![CDATA[<h2 id="1-DOï¼ˆDomain-Objectï¼‰é¢†åŸŸå¯¹è±¡"><a href="#1-DOï¼ˆDomain-Objectï¼‰é¢†åŸŸå¯¹è±¡" class="headerlink" title="1.DOï¼ˆDomain Objectï¼‰é¢†åŸŸå¯¹è±¡"></a>1.DOï¼ˆDomain Objectï¼‰é¢†åŸŸå¯¹è±¡</h2><p>â€‹        å°±æ˜¯ä»ç°å®ä¸–ç•Œä¸­æŠ½è±¡å‡ºæ¥çš„æœ‰å½¢æˆ–æ— å½¢çš„ä¸šåŠ¡å®ä½“ã€‚ä¸€èˆ¬<strong>å’Œæ•°æ®ä¸­çš„è¡¨ç»“æ„å¯¹åº”</strong>ã€‚</p><h2 id="2-BO-Business-Object-ä¸šåŠ¡å¯¹è±¡"><a href="#2-BO-Business-Object-ä¸šåŠ¡å¯¹è±¡" class="headerlink" title="2.BO(Business Object) ä¸šåŠ¡å¯¹è±¡"></a>2.BO(Business Object) ä¸šåŠ¡å¯¹è±¡</h2><p>â€‹        ä¸»è¦ä½œç”¨æ˜¯æŠŠä¸šåŠ¡é€»è¾‘å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å¯ä»¥åŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ªå…¶å®ƒçš„å¯¹è±¡ã€‚ </p><p>â€‹        æ¯”å¦‚ä¸€ä¸ªç®€å†ï¼Œæœ‰æ•™è‚²ç»å†ã€å·¥ä½œç»å†ã€ç¤¾ä¼šå…³ç³»ç­‰ç­‰ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠæ•™è‚²ç»å†å¯¹åº”ä¸€ä¸ª PO ï¼Œå·¥ä½œç»å†å¯¹åº”ä¸€ä¸ª PO ï¼Œç¤¾ä¼šå…³ç³»å¯¹åº”ä¸€ä¸ª PO ã€‚ å»ºç«‹ä¸€ä¸ªå¯¹åº”ç®€å†çš„ BO å¯¹è±¡å¤„ç†ç®€å†ï¼Œæ¯ä¸ª BO åŒ…å«è¿™äº› PO ã€‚ è¿™æ ·å¤„ç†ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é’ˆå¯¹ BO å»å¤„ç†ã€‚</p><h2 id="3-DTOï¼ˆData-Transfer-Objectï¼‰æ•°æ®ä¼ è¾“å¯¹è±¡"><a href="#3-DTOï¼ˆData-Transfer-Objectï¼‰æ•°æ®ä¼ è¾“å¯¹è±¡" class="headerlink" title="3.DTOï¼ˆData Transfer Objectï¼‰æ•°æ®ä¼ è¾“å¯¹è±¡"></a>3.DTOï¼ˆData Transfer Objectï¼‰æ•°æ®ä¼ è¾“å¯¹è±¡</h2><blockquote><p> è¿™ä¸ªæ¦‚å¿µæ¥æºäºJ2EEçš„è®¾è®¡æ¨¡å¼ï¼ŒåŸæ¥çš„ç›®çš„æ˜¯ä¸ºäº†EJBçš„åˆ†å¸ƒå¼åº”ç”¨æä¾›ç²—ç²’åº¦çš„æ•°æ®å®ä½“ï¼Œä»¥å‡å°‘åˆ†å¸ƒå¼è°ƒç”¨çš„æ¬¡æ•°ï¼Œä»è€Œæé«˜åˆ†å¸ƒå¼è°ƒç”¨çš„æ€§èƒ½å’Œé™ä½ç½‘ç»œè´Ÿè½½ï¼Œ</p></blockquote><p>â€‹        ä½†åœ¨è¿™é‡Œï¼Œæ³›æŒ‡ç”¨äºå±•ç¤ºå±‚(Controller)ä¸æœåŠ¡å±‚(Service)ä¹‹é—´çš„æ•°æ®ä¼ è¾“å¯¹è±¡</p><p>â€‹        DTO çš„å•å‘çš„ï¼Ÿ è¿˜æ˜¯ç›¸äº’çš„ï¼Ÿ</p><h2 id="4-VO-View-Object-å€¼å¯¹è±¡"><a href="#4-VO-View-Object-å€¼å¯¹è±¡" class="headerlink" title="4.VO(View Object) å€¼å¯¹è±¡"></a>4.VO(View Object) å€¼å¯¹è±¡</h2><p>â€‹        è§†å›¾å¯¹è±¡ï¼Œç”¨äºå±•ç¤ºå±‚ã€‚å®ƒçš„ä½œç”¨æ˜¯æŠŠæŸä¸ªæŒ‡å®šé¡µé¢ï¼ˆæˆ–ç»„ä»¶ï¼‰çš„æ‰€æœ‰æ•°æ®å°è£…èµ·æ¥ï¼Œæ˜¯Controllerå±‚è¿”å›ç»™å‰ç«¯ï¼ˆæµè§ˆå™¨ç«¯ï¼‰çš„æ•°æ®çš„ç±»å‹</p><h2 id="5-PO-Persistant-Object-æŒä¹…å¯¹è±¡"><a href="#5-PO-Persistant-Object-æŒä¹…å¯¹è±¡" class="headerlink" title="5.PO(Persistant Object) æŒä¹…å¯¹è±¡"></a>5.PO(Persistant Object) æŒä¹…å¯¹è±¡</h2><p>â€‹        åœ¨ O/R æ˜ å°„çš„æ—¶å€™å‡ºç°çš„æ¦‚å¿µï¼Œå¦‚æœæ²¡æœ‰ O/R æ˜ å°„ï¼Œæ²¡æœ‰è¿™ä¸ªæ¦‚å¿µå­˜åœ¨äº†ã€‚é€šå¸¸å¯¹åº”æ•°æ®æ¨¡å‹ ( æ•°æ®åº“ )ï¼Œæœ¬èº«è¿˜æœ‰éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ã€‚å¯ä»¥çœ‹æˆæ˜¯ä¸æ•°æ®åº“ä¸­çš„è¡¨ç›¸æ˜ å°„çš„ Java å¯¹è±¡ã€‚æœ€ç®€å•çš„ PO å°±æ˜¯å¯¹åº”æ•°æ®åº“ä¸­æŸä¸ªè¡¨ä¸­çš„ä¸€æ¡è®°å½•ï¼Œå¤šä¸ªè®°å½•å¯ä»¥ç”¨ PO çš„é›†åˆã€‚ PO ä¸­åº”è¯¥ä¸åŒ…å«ä»»ä½•å¯¹æ•°æ®åº“çš„æ“ä½œã€‚</p><h2 id="6-TO-Transfer-Object-ï¼Œæ•°æ®ä¼ è¾“å¯¹è±¡"><a href="#6-TO-Transfer-Object-ï¼Œæ•°æ®ä¼ è¾“å¯¹è±¡" class="headerlink" title="6.TO(Transfer Object) ï¼Œæ•°æ®ä¼ è¾“å¯¹è±¡"></a>6.TO(Transfer Object) ï¼Œæ•°æ®ä¼ è¾“å¯¹è±¡</h2><p>â€‹        åœ¨åº”ç”¨ç¨‹åºä¸åŒ tie( å…³ç³» ) ä¹‹é—´ä¼ è¾“çš„å¯¹è±¡</p><h2 id="7-POJO-Plain-Ordinary-Java-Object-ç®€å•æ— è§„åˆ™-java-å¯¹è±¡"><a href="#7-POJO-Plain-Ordinary-Java-Object-ç®€å•æ— è§„åˆ™-java-å¯¹è±¡" class="headerlink" title="7.POJO(Plain Ordinary Java Object) ç®€å•æ— è§„åˆ™ java å¯¹è±¡"></a>7.POJO(Plain Ordinary Java Object) ç®€å•æ— è§„åˆ™ java å¯¹è±¡</h2><p>â€‹        çº¯çš„ä¼ ç»Ÿæ„ä¹‰çš„ java å¯¹è±¡ã€‚å°±æ˜¯è¯´åœ¨ä¸€äº› Object/Relation Mapping å·¥å…·ä¸­ï¼Œèƒ½å¤Ÿåšåˆ°ç»´æŠ¤æ•°æ®åº“è¡¨è®°å½•çš„ persisent object å®Œå…¨æ˜¯ä¸€ä¸ªç¬¦åˆ Java Bean è§„èŒƒçš„çº¯ Java å¯¹è±¡ï¼Œæ²¡æœ‰å¢åŠ åˆ«çš„å±æ€§å’Œæ–¹æ³•ã€‚æˆ‘çš„ç†è§£å°±æ˜¯æœ€åŸºæœ¬çš„ Java Bean ï¼Œåªæœ‰å±æ€§å­—æ®µåŠ setter å’Œ getter æ–¹æ³•ã€‚</p><h2 id="8-DAO-Data-Access-Object-æ•°æ®è®¿é—®å¯¹è±¡"><a href="#8-DAO-Data-Access-Object-æ•°æ®è®¿é—®å¯¹è±¡" class="headerlink" title="8.DAO(Data Access Object) æ•°æ®è®¿é—®å¯¹è±¡"></a>8.DAO(Data Access Object) æ•°æ®è®¿é—®å¯¹è±¡</h2><p>â€‹        æ˜¯ä¸€ä¸ª SUN çš„ä¸€ä¸ªæ ‡å‡† J2EE è®¾è®¡æ¨¡å¼ï¼Œ è¿™ä¸ªæ¨¡å¼ä¸­æœ‰ä¸ªæ¥å£å°±æ˜¯ DAO ï¼Œå®ƒè´ŸæŒä¹…å±‚çš„æ“ä½œã€‚ä¸ºä¸šåŠ¡å±‚æä¾›æ¥å£ã€‚æ­¤å¯¹è±¡ç”¨äºè®¿é—®æ•°æ®åº“ã€‚é€šå¸¸å’Œ PO ç»“åˆä½¿ç”¨ï¼Œ DAO ä¸­åŒ…å«äº†å„ç§æ•°æ®åº“çš„æ“ä½œæ–¹æ³•ã€‚é€šè¿‡å®ƒçš„æ–¹æ³• , ç»“åˆ PO å¯¹æ•°æ®åº“è¿›è¡Œç›¸å…³çš„æ“ä½œã€‚å¤¹åœ¨ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®åº“èµ„æºä¸­é—´ã€‚é…åˆ VO, æä¾›æ•°æ®åº“çš„ CRUD æ“ä½œ</p><p><strong>åˆ†å±‚é¢†åŸŸæ¨¡å‹è§„çº¦ï¼š</strong></p><ul><li>DOï¼ˆ Data Objectï¼‰ï¼šä¸æ•°æ®åº“è¡¨ç»“æ„ä¸€ä¸€å¯¹åº”ï¼Œé€šè¿‡DAOå±‚å‘ä¸Šä¼ è¾“æ•°æ®æºå¯¹è±¡ã€‚</li><li>DTOï¼ˆ Data Transfer Objectï¼‰ï¼šæ•°æ®ä¼ è¾“å¯¹è±¡ï¼ŒServiceæˆ–Managerå‘å¤–ä¼ è¾“çš„å¯¹è±¡ã€‚</li><li>BOï¼ˆ Business Objectï¼‰ï¼šä¸šåŠ¡å¯¹è±¡ã€‚ ç”±Serviceå±‚è¾“å‡ºçš„å°è£…ä¸šåŠ¡é€»è¾‘çš„å¯¹è±¡ã€‚</li><li>AOï¼ˆ Application Objectï¼‰ï¼šåº”ç”¨å¯¹è±¡ã€‚ åœ¨Webå±‚ä¸Serviceå±‚ä¹‹é—´æŠ½è±¡çš„å¤ç”¨å¯¹è±¡æ¨¡å‹ï¼Œæä¸ºè´´è¿‘å±•ç¤ºå±‚ï¼Œå¤ç”¨åº¦ä¸é«˜ã€‚</li><li>VOï¼ˆ View Objectï¼‰ï¼šæ˜¾ç¤ºå±‚å¯¹è±¡ï¼Œé€šå¸¸æ˜¯Webå‘æ¨¡æ¿æ¸²æŸ“å¼•æ“å±‚ä¼ è¾“çš„å¯¹è±¡ã€‚</li><li>POJOï¼ˆ Plain Ordinary Java Objectï¼‰ï¼šåœ¨æœ¬æ‰‹å†Œä¸­ï¼Œ POJOä¸“æŒ‡åªæœ‰setter/getter/toStringçš„ç®€å•ç±»ï¼ŒåŒ…æ‹¬DO/DTO/BO/VOç­‰ã€‚</li><li>Queryï¼šæ•°æ®æŸ¥è¯¢å¯¹è±¡ï¼Œå„å±‚æ¥æ”¶ä¸Šå±‚çš„æŸ¥è¯¢è¯·æ±‚ã€‚ æ³¨æ„è¶…è¿‡2ä¸ªå‚æ•°çš„æŸ¥è¯¢å°è£…ï¼Œç¦æ­¢ä½¿ç”¨Mapç±»æ¥ä¼ è¾“ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜¿é‡Œå·´å·´ä»£ç è§„èŒƒè€ƒè¯•è¯•é¢˜</title>
      <link href="/alibaba-p3c/alibaba-p3c-exam/"/>
      <url>/alibaba-p3c/alibaba-p3c-exam/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ã€å¤šé€‰ ã€‘å…³äºç´¢å¼•çš„è®¾è®¡å’Œä½¿ç”¨ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.è‹¥æŸ¥è¯¢æ¡ä»¶ä¸­ä¸åŒ…å«ç´¢å¼•çš„æœ€å·¦åˆ—ï¼Œåˆ™æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¯¹äºèŒƒå›´æŸ¥è¯¢ï¼Œåªèƒ½åˆ©ç”¨ç´¢å¼•çš„æœ€å·¦åˆ—ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¯¹äº<code>order by A</code>æˆ–<code>group by A</code>è¯­å¥ï¼Œåœ¨<code>A</code>ä¸Šå»ºç«‹ç´¢å¼•ï¼Œå¯ä»¥é¿å…æ’åºã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¯¹äºå¤šåˆ—æ’åºï¼Œéœ€è¦æ‰€æœ‰åˆ—æ’åºæ–¹å‘ä¸€è‡´ï¼Œæ‰èƒ½åˆ©ç”¨ç´¢å¼•ã€‚</li></ul></li><li><p>ã€å¤šé€‰ ã€‘å…³äºexplainæ‰§è¡Œè®¡åˆ’ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>type</code>åˆ—æ˜¾ç¤ºäº†è¿æ¥ä½¿ç”¨äº†ä½•ç§ç±»å‹ï¼Œä»æœ€å¥½åˆ°æœ€å·®çš„è¿æ¥ç±»å‹ä¸ºï¼š<code>const</code>ï¼Œ<code>eq_ref</code>ï¼Œ<code>ref</code>ï¼Œ<code>range</code>ï¼Œ<code>index</code>ï¼Œ<code>ALL</code>.</li><li><input checked="" disabled="" type="checkbox"> B.<code>possible_keys</code>æ˜¾ç¤ºå¯èƒ½åœ¨è¿™å¼ è¡¨ä¸­çš„ç´¢å¼•ï¼Œå¦‚æœä¸ºç©ºï¼Œè¡¨ç¤ºæ²¡æœ‰å¯èƒ½çš„ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.<code>key</code>åˆ—è¡¨ç¤ºå®é™…ä½¿ç”¨çš„ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>ref</code>åˆ—æ˜¾ç¤ºç´¢å¼•çš„å“ªä¸€åˆ—è¢«ä½¿ç”¨äº†ã€‚</li></ul></li><li><p>ã€å¤šé€‰ ã€‘å…³äºæ•°æ®åº“æ¨¡ç³Šæ£€ç´¢çš„æè¿°ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.ç»å¯¹ç¦æ­¢å·¦æ¨¡ç³Šã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ç»å¯¹ç¦æ­¢å…¨æ¨¡ç³Šã€‚</li><li><input disabled="" type="checkbox"> C.ç»å¯¹ç¦æ­¢å³æ¨¡ç³Šã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å…¨æ¨¡ç³Šæˆ–å·¦æ¨¡ç³ŠæŸ¥è¯¢éœ€æ±‚ï¼Œä¼˜å…ˆä½¿ç”¨æœç´¢å¼•æ“ã€‚</li></ul></li><li><p>ã€å¤šé€‰ ã€‘æ•°ç»„ä½¿ç”¨<code>Arrays.asList</code>è½¬åŒ–ä¸ºé›†åˆï¼Œä¸‹åˆ—è¯´æ³•å“ªäº›æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> <strong>A.æ•°ç»„å…ƒç´ çš„ä¿®æ”¹ï¼Œä¼šå½±å“åˆ°è½¬åŒ–è¿‡æ¥çš„é›†åˆã€‚</strong></li><li><input disabled="" type="checkbox"> B.æ•°ç»„å…ƒç´ çš„ä¿®æ”¹ï¼Œä¸ä¼šå½±å“åˆ°è½¬åŒ–è¿‡æ¥çš„é›†åˆã€‚</li><li><input checked="" disabled="" type="checkbox"> <strong>C.å¯¹äºè½¬æ¢è¿‡æ¥çš„é›†åˆï¼Œå®ƒçš„<code>add</code>/<code>remove</code>/<code>clear</code>æ–¹æ³•ä¼šæŠ›å‡ºï¼š<code>UnsupportedOperationException</code>.</strong></li><li><input checked="" disabled="" type="checkbox"> D.<code>Arrays.asList</code>ä½“ç°çš„æ˜¯é€‚é…å™¨æ¨¡å¼ï¼Œåªæ˜¯è½¬æ¢æ¥å£ï¼Œåå°çš„æ•°æ®ä»æ˜¯æ•°ç»„ã€‚</li></ul></li><li><p>ã€å¤šé€‰ ã€‘å…³äºæ•è·å¼‚å¸¸å’ŒæŠ›å¼‚å¸¸ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.å¦‚æœéœ€è¦æ•è·ä¸åŒç±»å‹å¼‚å¸¸ï¼Œä¸ºäº†æ–¹ä¾¿å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨<code>catch(Exception e){}</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ä¸è¦æ•è·å¼‚å¸¸åä¸å¤„ç†ï¼Œä¸¢å¼ƒå¼‚å¸¸ä¿¡æ¯ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æ•è·å¼‚å¸¸ä¸æŠ›å¼‚å¸¸ï¼Œå¿…é¡»æ˜¯å®Œå…¨åŒ¹é…ï¼Œæˆ–è€…æ•è·å¼‚å¸¸æ˜¯æŠ›å¼‚å¸¸çš„çˆ¶ç±»ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¼‚å¸¸å®šä¹‰æ—¶åŒºåˆ†<code>unchecked</code>/<code>checked</code>å¼‚å¸¸ï¼Œé¿å…ç›´æ¥ä½¿ç”¨<code>RuntimeException</code>æŠ›å‡ºã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘KVç»“æ„çš„é›†åˆï¼Œåœ¨å¤„ç†nullå€¼çš„å­˜å‚¨ä¸Šæœ‰ç»†å¾®çš„åŒºåˆ«ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> <p>A.<code>TreeMap</code>çš„keyä¸å¯ä»¥ä¸ºnull</p></li><li><input disabled="" type="checkbox"> <p>B.<code>TreeMap</code>çš„keyå¯ä»¥ä¸ºnull</p></li><li><input disabled="" type="checkbox"> <p>C.<code>ConcurrentHashMap</code>çš„keyå¯ä»¥ä¸ºnull</p></li><li><input disabled="" type="checkbox"> <p>D.<code>ConcurrentHashMap</code>çš„valueå¯ä»¥ä¸ºnull</p><table><thead><tr><th>é›†åˆç±»</th><th>Key</th><th>Value</th><th>Super</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>Hashtable</code></td><td>ä¸å…è®¸ä¸ºNULL</td><td>ä¸å…è®¸ä¸ºNULL</td><td>Dictionary</td><td>çº¿ç¨‹å®‰å…¨</td></tr><tr><td><code>ConcurrentHashMap</code></td><td>ä¸å…è®¸ä¸ºNULL</td><td>ä¸å…è®¸ä¸ºNULL</td><td>AbstractMap</td><td>åˆ†æ®µé”æŠ€æœ¯</td></tr><tr><td><code>TreeMap</code></td><td>ä¸å…è®¸ä¸ºNULL</td><td><em>å…è®¸ä¸ºNULL</em></td><td>AbstractMap</td><td>çº¿ç¨‹ä¸å®‰å…¨</td></tr><tr><td><code>HashMap</code></td><td><em>å…è®¸ä¸ºNULL</em></td><td><em>å…è®¸ä¸ºNULL</em></td><td>AbstractMap</td><td>çº¿ç¨‹ä¸å®‰å…¨</td></tr></tbody></table></li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äº<code>Java</code>çš„æ¥å£æè¿°ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.åœ¨æ¥å£ç±»ä¸­çš„æ–¹æ³•å’Œå±æ€§ä½¿ç”¨<code>public</code>ä¿®é¥°ç¬¦ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¯¹äº<code>Service</code>ç±»ï¼Œå†…éƒ¨çš„å®ç°ç±»åŠ <code>Imp</code>çš„åç¼€ä¸æ¥å£åŒºåˆ«ã€‚ä¾‹å¦‚ï¼š<code>ProductServicelmpl</code>å®ç°<code>ProductService</code>æ¥å£ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¯¹äº<code>Service</code>ç±»ï¼ŒåŸºäº<code>SOA</code>çš„ç†å¿µï¼Œæ˜¯ä»¥æ¥å£æ–¹å¼æš´éœ²æœåŠ¡ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å°½é‡ä¸åœ¨æ¥å£é‡Œå®šä¹‰å˜é‡ï¼Œå¦‚æœä¸€å®šè¦å®šä¹‰å˜é‡ï¼Œè‚¯å®šæ˜¯ä¸æ¥å£æ–¹æ³•ç›¸å…³ï¼Œè€Œä¸”æ˜¯æ•´ä¸ªåº”ç”¨çš„åŸºç¡€å¸¸é‡ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºä»£ç æ³¨é‡Šï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> <p>A.ç‰¹æ®Šæ³¨é‡Šæ ‡è®°ï¼Œè¯·æ³¨æ˜æ ‡è®°äººä¸æ ‡è®°æ—¶é—´ã€‚</p></li><li><input checked="" disabled="" type="checkbox"> <p>B.å¾…åŠäº‹å®œï¼ˆTODOï¼‰ï¼šï¼ˆ[æ ‡è®°äººï¼Œæ ‡è®°æ—¶é—´ï¼Œ[é¢„è®¡å¤„ç†æ—¶é—´]ï¼‰</p></li><li><input disabled="" type="checkbox"> <p>C.åœ¨æ³¨é‡Šä¸­ç”¨FIXMEæ ‡è®°æŸä»£ç è™½ç„¶å®ç°äº†åŠŸèƒ½ï¼Œä½†æ˜¯å®ç°çš„æ–¹æ³•æœ‰å¾…å•†æ¤ï¼Œå¸Œæœ›å°†æ¥èƒ½æ”¹è¿›</p></li><li><input checked="" disabled="" type="checkbox"> <p>D.åœ¨æ³¨é‡Šä¸­ç”¨FIXMEæ ‡è®°æŸä»£ç æ˜¯é”™è¯¯çš„ï¼Œè€Œä¸”ä¸èƒ½å·¥ä½œï¼Œéœ€è¦åŠæ—¶çº æ­£çš„æƒ…å†µ </p><table><thead><tr><th>æ ‡è®°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>TODO</td><td>å¦‚æœä»£ç ä¸­æœ‰è¯¥æ ‡è¯†ï¼Œè¯´æ˜åœ¨æ ‡è¯†å¤„æœ‰åŠŸèƒ½ä»£ç å¾…ç¼–å†™ï¼Œå¾…å®ç°çš„åŠŸèƒ½åœ¨è¯´æ˜ä¸­ä¼šç®€ç•¥è¯´æ˜ã€‚</td></tr><tr><td>FIXME</td><td>å¦‚æœä»£ç ä¸­æœ‰è¯¥æ ‡è¯†ï¼Œè¯´æ˜æ ‡è¯†å¤„ä»£ç éœ€è¦ä¿®æ­£ï¼Œç”šè‡³ä»£ç æ˜¯é”™è¯¯çš„ï¼Œä¸èƒ½å·¥ä½œï¼Œéœ€è¦ä¿®å¤ï¼Œå¦‚ä½•ä¿®æ­£ä¼šåœ¨è¯´æ˜ä¸­ç®€ç•¥è¯´æ˜ã€‚</td></tr><tr><td>XXX</td><td>å¦‚æœä»£ç ä¸­æœ‰è¯¥æ ‡è¯†ï¼Œè¯´æ˜æ ‡è¯†å¤„ä»£ç è™½ç„¶å®ç°äº†åŠŸèƒ½ï¼Œä½†æ˜¯å®ç°çš„æ–¹æ³•æœ‰å¾…å•†æ¦·ï¼Œå¸Œæœ›å°†æ¥èƒ½æ”¹è¿›ï¼Œè¦æ”¹è¿›çš„åœ°æ–¹ä¼šåœ¨è¯´æ˜ä¸­ç®€ç•¥è¯´æ˜ã€‚</td></tr></tbody></table></li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ–‡ä»¶ç¼–ç å’Œæ ¼å¼çš„è®¾å®šï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.IDEçš„<code>text file encoding</code>è®¾ç½®ä¸º<code>GBK</code>æ ¼å¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.IDEçš„t<code>ext file encoding</code>è®¾ç½®ä¸º<code>UTF-8</code>æ ¼å¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.IDEä¸­æ–‡ä»¶çš„æ¢è¡Œç¬¦ä½¿ç”¨<code>Unix</code>æ ¼å¼ã€‚</li><li><input disabled="" type="checkbox"> D.IDEä¸­æ–‡ä»¶çš„æ¢è¡Œç¬¦ä½¿ç”¨<code>Windows</code>æ ¼å¼ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘åœ¨ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ä¸­ï¼Œæåˆ°ä¸è¦å¯¹å•å…ƒæµ‹è¯•å­˜åœ¨å“ªäº›è¯¯è§£ï¼Ÿ</p><ul><li><input checked="" disabled="" type="checkbox"> A.é‚£æ˜¯æµ‹è¯•åŒå­¦å¹²çš„äº‹æƒ…ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å•å…ƒæµ‹è¯•ä»£ç æ˜¯å¤šä½™çš„ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å•å…ƒæµ‹è¯•ä»£ç ä¸éœ€è¦ç»´æŠ¤ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å•å…ƒæµ‹è¯•ä¸çº¿ä¸Šæ•…éšœæ²¡æœ‰è¾©è¯å…³ç³»ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å¯¹äºç´¢å¼•<code>(aï¼Œbï¼Œc)</code>ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æŸ¥è¯¢è¯­å¥<code>where a between 5 and 10</code>å¯ä»¥ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æŸ¥è¯¢è¯­å¥<code>where a = 5 and b between 5 and 10</code>å¯ä»¥ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æŸ¥è¯¢è¯­å¥<code>where a inï¼ˆ5, 6, 7, 8, 9ï¼‰and b = 5</code>å¯ä»¥ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</li><li><input disabled="" type="checkbox"> D.æŸ¥è¯¢è¯­å¥<code>where b = 5 and c = 10</code>å¯ä»¥ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘ä»¥ä¸‹å…³äºå‘½åè§„çº¦å†…å®¹è¯´æ˜ï¼Œæ­£ç¡®çš„æ˜¯ï¼š</p><ul><li><input disabled="" type="checkbox"> A.åŒ…åç»Ÿä¸€ä½¿ç”¨å°å†™ï¼Œç‚¹åˆ†éš”ç¬¦ä¹‹é—´æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè‡ªç„¶è¯­ä¹‰çš„è‹±è¯­å•è¯ï¼Œå¹¶ä¸”ä½¿ç”¨<del>å¤æ•°å½¢å¼</del>ï¼Œä¾‹å£ï¼šåº”ç”¨å·¥å…·ç±»åŒ…åä¸º<code>com.alibaba.mpp.utils</code></li><li><input checked="" disabled="" type="checkbox"> B.ç±»åä½¿ç”¨<code>UperCamelCase</code>ï¼Œå¿…é¡»é€šä»éªŒå³°å½¢å¼ï¼Œä½†ä»¥ä¸‹æƒ…å½¢ä¾‹å¤–ï¼šï¼ˆé¢†åŸŸæ¨¡å‹çš„ç›¸å…³å‘½åï¼‰<code>DO</code>/<code>DTO</code>/<code>VO</code>/<code>DA0</code>ç­‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æŠ½è±¡ç±»å‘½åä½¿ç”¨<code>Abstrac</code>æˆ–<code>Base</code>å¼€å¤´ï¼›å¼‚å¸¸ç±»å‘½åä½¿ç”¨<code>Exepion</code>ç»“å°¾ï¼›æµ‹è¯•ç±»å‘½åä»¥å®ƒè¦æµ‹å¼çš„ç±»çš„åç§°å¼€å§‹ï¼Œä»¥<code>Test</code>ç»“å°¾ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æšä¸¾ç±»åå»ºè®®å¸¦ä¸Š<code>Enum</code>åç¼€ï¼Œæšä¸¾æˆå‘˜åç§°éœ€è¦å…¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç±»å‘½åï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æŠ½è±¡ç±»å‘½åä½¿ç”¨<code>Abstract</code>æˆ–<code>Base</code>å¼€å¤´ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¼‚å¸¸ç±»å‘½åä½¿ç”¨<code>Excepion</code>ç»“å°¾ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æµ‹æ³•ç±»å‘½åä»¥å®ƒè¦æµ‹è¯•çš„ç±»çš„åç§°å¼€å§‹ï¼Œä»¥<code>Test</code>ç»“å°¾ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¦‚æœä½¿ç”¨åˆ°äº†è®¾è®¡æ¨¡å¼ï¼Œå»ºè®®åœ¨ç±»åä¸­ä½“ç°å‡ºå…·ä½“æ¨¡å¼ã€‚ä¾‹å¦‚ä»£ç†æ¨¡å¼çš„ç±»å‘½åï¼š<code>LoginProxy</code>ï¼›è§‚å¯Ÿè€…æ¨¡å¼å‘½åï¼š<code>ResourceObserver</code>.</li></ul></li><li><p>ã€å¤šé€‰ã€‘ä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å¯¹äºâ€œæ˜ç¡®åœæ­¢ä½¿ç”¨çš„ä»£ç å’Œé…ç½®â€ï¼Œå¦‚æ–¹æ³•ã€å˜é‡ã€ç±»ã€é…ç½®æ–‡ä»¶ã€åŠ¨æ€é…ç½®å±æ€§ç­‰è¦åšå†³ä»ç¨‹åºä¸­æ¸…ç†å‡ºå»ï¼Œé¿å…é€ æˆè¿‡å¤šåƒåœ¾ã€‚</li><li><input disabled="" type="checkbox"> B.æ°¸ä¹…å¼ƒç”¨çš„ä»£ç æ®µæ³¨é‡Šæ‰å³å¯ï¼Œå³ä¸ç”¨åŠ ä»»ä½•æ³¨é‡Šã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¯¹äºæš‚æ—¶è¢«æ³¨é‡Šæ‰ï¼Œåç»­å¯èƒ½æ¢å¤ä½¿ç”¨çš„ä»£ç ç‰‡æ–­ï¼Œåœ¨æ³¨é‡Šä»£ç ä¸Šæ–¹ï¼Œç»Ÿä¸€è§„å®šä½¿ç”¨ä¸‰ä¸ªæ–œæ ï¼ˆ///ï¼‰æ¥è¯´æ˜æ³¨é‡Šæ‰ä»£ç çš„ç†ç”±ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ä¸è¦åœ¨è§†å›¾æ¨¡æ¿ä¸­åŠ å…¥ä»»ä½•å¤æ‚çš„é€»è¾‘ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ—¥å¿—çº§åˆ«çš„ä½¿ç”¨ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.<code>info</code>æ—¥å¿—å°½å¯èƒ½å¤šè¾“å‡ºï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜æ’æŸ¥é—®é¢˜ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¦‚æœä½¿ç”¨<code>warn</code>æ¥è®°å½•åˆšä¸Šçº¿æ—¶çš„ä¸šåŠ¡è¡Œä¸ºä¿¡æ¯ï¼Œä¸€å®šè¦æ³¨æ„æ—¥å¿—è¾“å‡ºé‡çš„é—®é¢˜ï¼Œé¿å…æŠŠæœåŠ¡å™¨ç£ç›˜æ’‘çˆ†ï¼Œå¹¶è®°å¾—åŠæ—¶åˆ é™¤è¿™äº›è§‚å¯Ÿæ—¥å¿—ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ç”Ÿäº§ç¯å¢ƒç¦æ­¢è¾“å‡º<code>debug</code>æ—¥å¿—ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>error</code>çº§åˆ«åªè®°å½•ç³»ç»Ÿé€»è¾‘å‡ºé”™ã€å¼‚å¸¸æˆ–è€…é‡è¦çš„é”™è¯¯ä¿¡æ¯ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘ä»¥ä¸‹å…³äºæ ¼å¼è§„çº¦çš„è¯´æ³•ï¼Œæ­£ç¡®çš„æœ‰å“ªäº›ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å·¦æ‹¬å·å’Œåä¸€ä¸ªå­—ç¬¦ä¹‹é—´ä¸å‡ºç°ç©ºæ ¼ï¼›åŒæ ·ï¼Œå³æ‹¬å·å’Œå‰ä¸€ä¸ªå­—ç¬¦ä¹‹é—´ä¹Ÿä¸å‡ºç°ç©ºæ ¼ï¼Œå¦‚ï¼š<code>if (flag == 1) {System.out.println(&quot;world&quot;);}</code></li><li><input checked="" disabled="" type="checkbox"> B.<code>if</code>/<code>for</code>/<code>while</code>/<code>switch</code>/<code>do</code>ç­‰ä¿ç•™å­—ä¸å·¦å³æ‹¬å·ä¹‹é—´éƒ½å¿…é¡»åŠ ç©ºæ ¼ã€‚</li><li><input disabled="" type="checkbox"> C.<code>while</code>è¿™ä¸ªä¿ç•™å­—æ¯”è¾ƒç‰¹æ®Šï¼Œä½¿ç”¨æ—¶å·¦å³æ‹¬å·ä¹‹é—´å¯ä»¥ä¸ç”¨åŠ ç©ºæ ¼ï¼Œä¾‹å¦‚ï¼š<code>while(true){...}</code></li><li><input checked="" disabled="" type="checkbox"> D.ä»»ä½•è¿ç®—ç¬¦å·¦å³å¿…é¡»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œè¿ç®—ç¬¦åŒ…æ‹¬èµ‹å€¼è¿ç®—ç¬¦<code>=</code>ã€é€»è¾‘è¿ç®—ç¬¦<code>&amp;&amp;</code>ã€åŠ å‡ä¹˜é™¤ç¬¦å·ã€ä¸‰ç›®è¿è¡Œç¬¦ç­‰ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç”¨æ—¥å¿—è®°å½•å¼‚å¸¸ä¿¡æ¯ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ—¥å¿—å°½é‡è®°å½•æ¡ˆå‘ç°åœºä¿¡æ¯å’Œå¼‚å¸¸å †æ ˆä¿¡æ¯ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¦‚æœæ—¥å¿—ä¸­è¾“å‡º<code>POJO</code>ç±»ï¼Œ<code>POJO</code>ç±»éœ€è¦é‡å†™<code>toString()</code>æ–¹æ³•ï¼Œé¿å…åªè¾“å‡º<code>hashCode</code>.</li><li><input disabled="" type="checkbox"> C.ä¸å»ºè®®è¾“å‡ºä»»ä½•æ—¥å¿—ï¼Œå› ä¸ºæ—¥å¿—è®°å½•æ¶ˆè€—æ€§èƒ½ã€‚</li><li><input disabled="" type="checkbox"> D.æ•è·å¼‚å¸¸åï¼Œä¸€å¾‹æŠ›ç»™è°ƒç”¨è€…å»å¤„ç†ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå·¥å…·ç±»äºŒæ–¹åº“å·²ç»æä¾›çš„ï¼Œå°½é‡ä¸è¦åœ¨æœ¬åº”ç”¨ä¸­ç¼–ç¨‹å®ç°ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>JSON</code>æ“ä½œä½¿ç”¨<code>fasijson</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>MD5</code>æ“ä½œä½¿ç”¨<code>commons-codec</code>ï¼Œ</li><li><input disabled="" type="checkbox"> C.<code>ArrayUtils</code>ã€<code>NumberUtils</code>ã€<code>DateFormatUtils</code>ã€<code>DateUtils</code>ç­‰ä¼˜å…ˆä½¿ç”¨<code>org apache.commons.lang</code>åŒ…ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>CollectionUtils</code>ä¼˜å…ˆä½¿ç”¨<code>org.apache.commons.collections4</code>åŒ…ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå¸¸é‡å®šä¹‰ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.ä¸å…è®¸å‡ºç°ä»»ä½•é­”æ³•å€¼ï¼ˆå³æœªç»å®šä¹‰çš„å¸¸é‡ï¼‰ç›´æ¥å‡ºç°åœ¨ä»£ç ä¸­ã€‚</li><li><input disabled="" type="checkbox"> B.é­”æ³•å€¼æ˜¯æŒ‡ç¨‹åºä¸­éšæ„å®šä¹‰å¹¶èµ‹å€¼çš„å˜é‡å€¼ï¼Œå¦‚æœä»£ç ç¼–å†™è€…æ˜ç™½å˜é‡å€¼æ„ä¹‰æ˜¯å¯ä»¥ä»»æ„ä½¿ç”¨çš„ï¼Œä¾‹å¦‚åœ¨ä»£ç ä¸­å†™<code>if (status == 3) return error;</code>ç¬¦åˆè§„èŒƒã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¦‚æœå˜é‡å€¼ä»…åœ¨ä¸€ä¸ªèŒƒå›´å†…å˜åŒ–æ¨èç”¨<code>Enum</code>ç±»ã€‚</li><li><input disabled="" type="checkbox"> D.åœ¨ç¨‹åºä¸­ï¼Œä¸€å¾‹ç¦æ­¢ä½¿ç”¨æšä¸¾ç±»å‹ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘ä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.åœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œåˆ©ç”¨å¥½å…¶é¢„ç¼–è¯‘åŠŸèƒ½ï¼Œå¯ä»¥æœ‰æ•ˆåŠ å¿«æ­£åˆ™åŒ¹é…é€Ÿåº¦ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åœ¨<code>JDK8</code>ä¸­ï¼Œé’ˆå¯¹ç»Ÿè®¡æ—¶é—´ç­‰åœºæ™¯ï¼Œæ¨èä½¿ç”¨<code>Instant</code>ç±»ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å°½é‡ä¸è¦åœ¨<code>VM</code>ä¸­åŠ å…¥å˜é‡å£°æ˜ã€é€»è¾‘è¿ç®—ç¬¦ï¼Œæ›´ä¸è¦åœ¨<code>VM</code>æ¨¡æ¿ä¸­åŠ å…¥ä»»ä½•å¤æ‚çš„é€»è¾‘ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.åå°è¾“é€ç»™é¡µé¢çš„å˜é‡å¿…é¡»åŠ <code>$!{var}</code>â€”â€”ä¸­é—´çš„æ„Ÿå¹å·ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå˜é‡ã€æ–¹æ³•åã€åŒ…çš„å‘½åï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>POJO</code>ç±»ä¸­çš„ä»»ä½•å¸ƒå°”ç±»å‹çš„å˜é‡ï¼Œéƒ½ä¸è¦åŠ <code>is</code>ï¼Œå› ä¸ºéƒ¨åˆ†æ¡†æ¶è§£ææ—¶æœ‰å¯èƒ½ä¼šå‡ºç°åºåˆ—åŒ–é”™è¯¯ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åŒ…åç»Ÿä¸€ä½¿ç”¨å•æ•°å½¢å¼ï¼Œå¦‚ï¼š<code>com.alibaba.mpp.util</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ä¸­æ‹¬å·æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œæ•°ç»„å®šä¹‰å¦‚ä¸‹ï¼š<code>String[] args</code>ï¼›ä¸è¦è¯¯å†™ä¸º<code>String args[]</code>;</li><li><input checked="" disabled="" type="checkbox"> D.<code>Service</code>/<code>DAO</code>å±‚æ–¹æ³•å‘½åå¯ä»¥å‚è€ƒè§„çº¦ï¼Œä¾‹å¦‚ï¼šåˆ é™¤çš„æ–¹æ³•æ¨èä½¿ç”¨<code>remove</code>æˆ–<code>delete</code>åšå‰ç¼€ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæšä¸¾ç±»å‹ï¼Œä»¥ä¸‹æè¿°ç¬¦åˆè§„èŒƒçš„æ˜¯ï¼š</p><ul><li><input disabled="" type="checkbox"> A.åªè¦æ˜¯å¸¸é‡ï¼Œå°±ä½¿ç”¨æƒä¸¾å€¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¦‚æœå˜é‡å€¼åœ¨ä¸€ä¸ªèŒƒå›´å†…å˜åŒ–ï¼Œè€Œä¸”è¿˜å¸¦æœ‰åç§°ä¹‹å¤–çš„å»¶ä¼¸å±æ€§ï¼Œå¿…é¡»ä½¿ç”¨<code>Enum</code>ç±»ï¼Œå¦‚ï¼š<code>pubic enum MonthEnum{ JANUARY(1), FEBRUARY(2), MARCH(3), APRIL(4), â€¦, DECEMBER(12);}</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æšä¸¾åå‘½åå»ºè®®å¸¦ä¸Š<code>Enum</code>ï¼Œæšä¸¾æˆå‘˜åç§°éœ€è¦å…¨å¤§å†™ï¼Œå•è¯ç”¨<code>_</code>åˆ†å‰²ã€‚</li><li><input disabled="" type="checkbox"> D.å®šä¹‰æ˜ŸæœŸä¸€è‡³æ˜ŸæœŸæ—¥è¿™ç§èŒƒå›´å›ºå®šçš„ä¿¡æ¯ï¼Œä¸æ¨èä½¿ç”¨æšä¸¾ç±»å‹ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºä½¿ç”¨<code>iBATIS</code>æ“ä½œæ•°æ®ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.å¦‚æœè¡¨ä¸­å­—æ®µå’Œ<code>DO</code>ä¸­çš„å­—æ®µåå®Œå…¨ä¸€è‡´ï¼Œå¯ç›´æ¥ç”¨<code>DO</code>ä½œä¸º<code>resultClass</code>ã€‚</li><li><input disabled="" type="checkbox"> B.<code>iBATIS</code>ä¸­è‡ªå¸¦äº†<code>queryForList(String statementName, int start, int size)</code>çš„åˆ†é¡µæ¥å£ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å†è‡ªè¡Œå°è£…ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ä¸è¦å®šä¹‰å¤§è€Œå…¨çš„æ•°æ®æ›´æ–°æ¥å£ï¼Œå¯¹æ•´ä¸ª<code>DO</code>è¿›è¡Œæ›´æ–°ã€‚å¿…é¡»æŒ‰éœ€æ›´æ–°ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>sqlmap</code>ä¸­å†™<code>update</code>è¯­å¥æ—¶ï¼Œå¿…é¡»åŒ…å«å¯¹è®°å½•ä¸­<code>gmt_modified</code>å­—æ®µçš„æ›´æ–°ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘æ ¹æ®ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼Œä»¥ä¸‹å“ªäº›å­—æ®µå±äºè¡¨çš„å¿…å¤‡å­—æ®µï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>id</code></li><li><input checked="" disabled="" type="checkbox"> B.<code>gmt_modified</code></li><li><input disabled="" type="checkbox"> C.<code>parent id</code></li><li><input checked="" disabled="" type="checkbox"> D.<code>gmt_create</code></li></ul></li><li><p>ã€å¤šé€‰ã€‘é˜²æ­¢<code>NPE</code>ï¼Œæ˜¯ç¨‹åºå‘˜çš„åŸºæœ¬ä¿®å…»ï¼Œå¯¹äºå¯èƒ½äº§ç”Ÿ<code>NPE</code>çš„åœºæ™¯ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ•°æ®åº“çš„æŸ¥è¯¢ç»“æœå¯èƒ½ä¸º<code>null</code></li><li><input disabled="" type="checkbox"> B.é›†åˆåªéœ€è¦åˆ¤æ–­<code>isNotEmpty</code>ï¼Œå¯¹å–å‡ºçš„æ•°æ®å…ƒç´ ä¸éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸º<code>null</code></li><li><input checked="" disabled="" type="checkbox"> C.è¿œç¨‹è°ƒç”¨è¿”å›å¯¹è±¡ï¼Œä¸€å¾‹è¦æ±‚è¿›è¡Œ<code>NPE</code>åˆ¤æ–­ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¯¹äº<code>Session</code>ä¸­è·å–çš„æ•°æ®ï¼Œå»ºè®®<code>NPE</code>æ£€æŸ¥ï¼Œé¿å…ç©ºæŒ‡é’ˆã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘<code>Hashtable</code>ï¼Œ<code>HashlMap</code>ï¼Œ<code>ConcurrentHashMap</code>éƒ½æ˜¯Mapçš„å®ç°ç±»ï¼Œå®ƒä»¬åœ¨å¤„ç†mulå€¼çš„å­˜å‚¨ä¸Šæœ‰ç»†å¾®çš„åŒºåˆ«ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>Hashtable</code>çš„<code>KV</code>éƒ½ä¸å¯ä»¥ä¸º<code>null</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>HashlMap</code>çš„<code>KV</code>éƒ½å¯ä»¥ä¸º<code>null</code>ã€‚</li><li><input disabled="" type="checkbox"> C.<code>HashMap</code>çš„<code>K</code>ä¸å¯ä»¥ä¸º<code>null</code>ï¼Œ<code>V</code>å¯ä»¥ä¸º<code>null</code></li><li><input checked="" disabled="" type="checkbox"> D.<code>ConcurentHashlMap</code>çš„<code>KV</code>éƒ½ä¸å¯ä»¥ä¸º<code>null</code></li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ•°æ®åº“æ˜¯ä¸å¦æ¦‚å¿µçš„åˆ—çš„å‘½åæ–¹å¼ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.å¯¹äºæ˜¯ä¸å¦æ¦‚å¿µçš„åˆ—åï¼Œå¿…é¡»ä½¿ç”¨<code>can_abc</code>æ¥è¡¨ç¤ºã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¯¹äºæ˜¯ä¸å¦æ¦‚å¿µçš„åˆ—åï¼Œå¿…é¡»ä½¿ç”¨<code>is_abc</code>æ¥è¡¨ç¤ºã€‚</li><li><input disabled="" type="checkbox"> C.æ•°æ®ç±»å‹æ˜¯<code>varchar(1)</code>ï¼ˆ<code>Y</code>è¡¨ç¤ºæ˜¯ï¼Œ<code>N</code>è¡¨ç¤ºå¦ï¼‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ•°æ®ç±»å‹æ˜¯<code>unsigned tiny int</code>.ï¼ˆ<code>1</code>è¡¨ç¤ºæ˜¯ï¼Œ<code>0</code>è¡¨ç¤ºå¦ï¼‰ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äº<code>count</code>ç›¸å…³çš„ä½¿ç”¨ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.ä¸è¦ä½¿ç”¨<code>count(åˆ—å)</code>æˆ–<code>count(å¸¸é‡)</code>æ¥æ›¿ä»£<code>count(*)</code>ã€‚</li><li><input disabled="" type="checkbox"> B.<code>count(åˆ—å)</code>ä¼šç»Ÿè®¡å€¼ä¸º<code>NULL</code>çš„è¡Œï¼Œè€Œ<code>count(*)</code>ä¸ä¼šç»Ÿè®¡ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å½“æŸä¸€åˆ—çš„å€¼å…¨æ˜¯<code>NULL</code>æ—¶ï¼Œ<code>count(åˆ—å)</code>è¿”å›0ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.åœ¨ç¨‹åºä»£ç ä¸­å†™åˆ†é¡µæŸ¥è¯¢é€»è¾‘æ—¶ï¼Œè‹¥<code>count</code>ä¸º<code>0</code>åº”ç›´æ¥è¿”å›ï¼Œä»¥é¿å…æ‰§è¡Œåé¢çš„åˆ†é¡µè¯­å¥ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºäºŒæ–¹åº“ä¾èµ–çš„è§£æå‘½ä»¤ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>mvn dependency:resolve</code>æ‰“å°å‡ºå·²ä»²è£ä¾èµ–çš„åˆ—è¡¨ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>mvn dependency.tree</code>æ‰“å°å·¥ç¨‹æ•´ä¸ªçš„ä¾èµ–æ ‘ç»“æ„ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.<code>mvn dependency:tree -Dverbose -Dincludes=commons-lang</code>æ‰“å°å‡ºä¸<code>commons-lang</code>ç›¸å…³çš„è¯¦ç»†ä¾èµ–ã€‚</li><li><input disabled="" type="checkbox"> D.<code>mvn clean install</code>æ‰“å°å·¥ç¨‹æ•´ä¸ªçš„ä¾èµ–æ ‘ç»“æ„ï¼Œå¹¶éƒ¨ç½²åˆ°æœ¬åœ°ä»“åº“ä¸­ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘æ ¹æ®ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼Œæ•°æ®åº“çš„è¡¨è®¾è®¡å…è®¸é€‚å½“æ²‰ä½™ï¼Œä»¥æå‡SQLæŸ¥è¯¢çš„æ€§èƒ½ï¼Œé¿å…è¡¨çš„å…³è”æŸ¥è¯¢ï¼Œä¸‹åˆ—å“ªäº›å­—æ®µ<strong>ä¸å…è®¸æ²‰ä½™</strong>ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>text</code>ç±»å‹çš„å­—æ®µã€‚</li><li><input disabled="" type="checkbox"> B.åŸºæœ¬å›ºå®šä¸å˜çš„ç±»ç›®åç§°ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.<code>varchar(2500)</code>çš„æ®µã€‚</li><li><input checked="" disabled="" type="checkbox"> D.éœ€è¦é¢‘ç¹ä¿®æ”¹çš„å­—æ®µã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘ä¸ºäº†æ›´æ–¹ä¾¿åœ°è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œè¢«æµ‹è¯•çš„ä¸šåŠ¡ä»£ç åº”é¿å…ä»¥ä¸‹å“ªäº›æƒ…å†µï¼Ÿ</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ„é€ æ–¹æ³•ä¸­åšçš„äº‹æƒ…è¿‡å¤šã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å­˜åœ¨è¿‡å¤šçš„å…¨å±€å˜é‡å’Œé™æ€æ–¹æ³•ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å­˜åœ¨è¿‡å¤šçš„å¤–éƒ¨ä¾èµ–ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å­˜åœ¨è¿‡å¤šçš„æ¡ä»¶è¯­å¥ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ–¹æ³•çš„è¿”å›å€¼æ˜¯å¦å¯ä»¥ä¸ºnullï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.æ–¹æ³•çš„è¿”å›å€¼å¯ä»¥ä¸ºnullï¼Œå¦‚æœæ˜¯é›†åˆï¼Œå¿…é¡»è¿”å›ç©ºé›†åˆã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æ–¹æ³•çš„è¿”å›å€¼å¯ä»¥ä¸ºnullï¼Œä¸å¼ºåˆ¶è¿”å›ç©ºé›†åˆï¼Œæˆ–è€…ç©ºå¯¹è±¡ç­‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æ–¹æ³•å®ç°è€…å¿…é¡»æ·»åŠ æ³¨é‡Šï¼Œå……åˆ†è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè¿”å›nullå€¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.é˜²æ­¢NPEæ˜¯è°ƒç”¨è€…çš„è´£ä»»ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç´¢å¼•æ•ˆç‡ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.ä½¿ç”¨ç´¢å¼•çš„æ•ˆç‡ä¸€å®šé«˜äºå…¨è¡¨æ‰«æçš„æ•ˆç‡ã€‚</li><li><input disabled="" type="checkbox"> B.å…³äº<code>explain</code>çš„ç»“æœï¼Œ<code>type=index</code>çš„ç´¢å¼•æ•ˆç‡å¥½äº<code>type=ref</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.SQLæŸ¥è¯¢æ¡ä»¶<code>where a like &#39;%é˜¿é‡Œ%&#39;</code>ï¼Œä¸ä¼šèµ°ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.SQLæŸ¥è¯¢æ¡ä»¶<code>where a like &#39;é˜¿é‡Œ%&#39;</code>ï¼Œaåˆ—åˆ›å»ºäº†ç´¢å¼•ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ç´¢å¼•è¿›è¡Œæ£€ç´¢ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºIntegerå€¼çš„æ¯”è¾ƒï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>Integer a = 3; Integer b = 3;</code>é‚£ä¹ˆæ¡ä»¶è¡¨è¾¾å¼<code>(a==b)</code>è¿”å›çš„ç»“æœæ˜¯<code>true</code>ã€‚</li><li><input disabled="" type="checkbox"> B.<code>Integer a = 3; Integer b = 3;</code>é‚£ä¹ˆæ¡ä»¶è¡¨è¾¾å¼<code>(a==b)</code>è¿”å›çš„ç»“æœæ˜¯<code>false</code>ã€‚</li><li><input disabled="" type="checkbox"> C.<code>Integer a = 273; Integer b = 273;</code>é‚£ä¹ˆæ¡ä»¶è¡¨è¾¾å¼<code>(a==b)</code>è¿”å›çš„ç»“æœæ˜¯<code>true</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>Integer a = 273; Integer b = 273;</code>é‚£ä¹ˆæ¡ä»¶è¡¨è¾¾å¼(a==b)è¿”å›çš„ç»“æœæ˜¯<code>false</code>ã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘å…³äºæµ‹è¯•ä»£ç çš„è¦†ç›–ç‡ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼Ÿ</p><ul><li><input disabled="" type="checkbox"> A.è·¯å¾„è¦†ç›–æ˜¯æœ€å¼ºè¦†ç›–ï¼Œç¬¦åˆè·¯å¾„è¦†ç›–ä¸”æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼Œç¨‹åºç»å¯¹æ²¡æœ‰é—®é¢˜ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.è¯­å¥è¦†ç›–åº¦æ˜¯æœ€å¼±çš„è¦†ç›–åº¦é‡æ–¹å¼ã€‚</li><li><input disabled="" type="checkbox"> C.åˆ†æ”¯è¦†ç›–ä¸æ¡ä»¶è¦†ç›–å…¶å®æ˜¯ä¸€å›äº‹ã€‚</li><li><input disabled="" type="checkbox"> D.åˆ¤å®šæ¡ä»¶è¦†ç›–ä¸è·¯å¾„è¦†ç›–å…¶å®æ˜¯ä¸€å›äº‹ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºJavaçš„æ–¹æ³•ä½¿ç”¨ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>Object#equals</code>æ–¹æ³•å®¹æ˜“æŠ›ç©ºæŒ‡é’ˆï¼Œä½¿ç”¨å¸¸é‡æˆ–ç¡®å®šæœ‰å€¼çš„å¯¹è±¡æ¥è°ƒç”¨<code>.equals()</code>æ–¹æ³•ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æ‰€æœ‰çš„ç›¸åŒç±»å‹çš„åŒ…è£…ç±»å¯¹è±¡ä¹‹é—´å€¼çš„æ¯”è¾ƒï¼Œå…¨éƒ¨ä½¿ç”¨<code>.equals()</code>æ–¹æ³•æ¯”è¾ƒã€‚</li><li><input disabled="" type="checkbox"> C.<code>DO / VO</code>ç­‰é¢†åŸŸæ¨¡å‹ç±»ä¸éœ€è¦è¦†å†™<code>Object#toString()</code>æ–¹æ³•ï¼Œæ²¡å•¥ç”¨å¤„ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ…ç”¨<code>Object#clone()</code>æ–¹æ³•æ¥æ‹·è´å¯¹è±¡ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘é€šè¿‡é›†åˆ<code>A.subList()</code>è·å–å­é›†åˆBï¼Œä¸‹åˆ—è¯´æ³•å“ªäº›æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.è¿”å›çš„é›†åˆBæ²¡æœ‰å®ç°<code>Serializable</code>æ¥å£ï¼Œä¸èƒ½è¢«åºåˆ—åŒ–ï¼Œæ‰€ä»¥ä¸èƒ½åº”ç”¨äº<code>RPC</code>åœºæ™¯ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åœ¨Bé›†åˆä¸­æ·»åŠ æŸä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆAé›†åˆä¹Ÿä¼šæ·»åŠ è¿›å»æ­¤å…ƒç´ ã€‚</li><li><input disabled="" type="checkbox"> C.é›†åˆAä¸­å…ƒç´ çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°é›†åˆBçš„ä»»ä½•æ“ä½œã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¯¹Aå…ƒç´ ä¸ªæ•°çš„ä¿®æ”¹ï¼Œä¼šå¯¼è‡´é›†åˆBçš„éå†äº§ç”Ÿ<code>ConcurrentModificationException</code>å¼‚å¸¸ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å¯¹äºç´¢å¼•çš„åŸºæœ¬åŸç†ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.ç´¢å¼•çš„æ•°æ®ç»“æ„ä¸»è¦æœ‰<code>B-Tree</code>ã€<code>Hash</code>ã€<code>R-Tree</code>ã€<code>Full-Text</code>ç­‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ä»ç‰©ç†å­˜å‚¨æ¥çœ‹ï¼Œä¸»è¦åˆ†ä¸ºèšé›†(clustered)å’Œéèšé›†(non-clustered)ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.MySQLçš„è¡¨æ˜¯èšé›†ç´¢å¼•ç»„ç»‡è¡¨(index of table)ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯æ•°æ®ï¼Œéèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯éèšé›†ç´¢å¼•çš„keyå’Œä¸»é”®å€¼ã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘å…³äºäºŒæ–¹åº“å‡çº§ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.å‡çº§äºŒæ–¹åº“åªæ˜¯æ”¹ä¸ªç‰ˆæœ¬å·ï¼Œä¸éœ€è¦å…³è”åŠŸèƒ½çš„å›å½’ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å‡çº§äºŒæ–¹åº“éœ€è¦æ¯”å¯¹ä»²è£ç»“æœçš„å·®å¼‚ï¼Œè°¨æ…è¯„ä¼°ã€‚</li><li><input disabled="" type="checkbox"> C.å‡çº§äºŒæ–¹åº“ï¼Œç»å¯¹ä¸ä¼šå½±å“åˆ°å…¶å®ƒäºŒæ–¹åº“çš„ç‰ˆæœ¬å·ã€‚</li><li><input disabled="" type="checkbox"> D.åªè¦æ­¤äºŒæ–¹åº“è´Ÿè´£äººä¿è¯è¯´ä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼Œå³å¯å¤§èƒ†å‡çº§ï¼Œç›´æ¥å‘å¸ƒä¸Šçº¿ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºmavenä¾èµ–ã€ä»²è£ã€è§„åˆ™ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>&lt;dependencies&gt;</code>çš„ä¾èµ–ä¼šé»˜è®¤ä¼ é€’ç»™å­é¡¹ç›®ã€‚</li><li><input disabled="" type="checkbox"> B.<code>&lt;dependencies&gt;</code>çš„ä¾èµ–ç»å¯¹ä¸ä¼šä¼ é€’ç»™å­é¡¹ç›®ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.åœ¨<code>&lt;dependencyManagement&gt;</code>ä¸­æŒ‡å®šç‰ˆæœ¬å·ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.é¿å…åœ¨ä¸åŒçš„å­é¡¹ç›®ï¼Œå£°æ˜åŒä¸€ä¸ªäºŒæ–¹åº“çš„ä¸åŒç‰ˆæœ¬å·ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘é’ˆå¯¹<code>TCP</code>åè®®ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.<code>TCP</code>é“¾æ¥ä¸»åŠ¨å…³é—­çš„ä¸€æ–¹ï¼Œåœ¨å®Œæˆå››æ¬¡æŒ¥æ‰‹åè®®åï¼Œå³ä¼šç«‹å³å…³é—­å¹¶é‡Šæ”¾<code>socket</code>ï¼Œ</li><li><input disabled="" type="checkbox"> B.å¤„äº<code>time_wait</code>çŠ¶æ€çš„<code>socket</code>ï¼Œå…¶å®æ˜¯å·²ç»å…³é—­çŠ¶æ€ï¼Œå½“éœ€è¦æ–°å»ºè¿æ¥æ—¶ï¼Œå¯ä»¥è¢«é©¬ä¸Šå¤ç”¨ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å½“å¤§é‡<code>socket</code>äº<code>time_wait</code>çŠ¶æ€æ—¶ï¼Œä¼šå¯¼è‡´å¯ç”¨<code>socket</code>èµ„æºç¨€ç¼ºï¼Œä»è€Œå¯¼è‡´æœåŠ¡å™¨å¹¶å‘èƒ½åŠ›ä¸‹é™ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.é€šè¿‡ä¿®æ”¹<code>/etc/sysctl.conf</code>é…ç½®æ–‡ä»¶ï¼Œå‡å°<code>time_wait</code>çš„è¶…æ—¶æ—¶é—´ï¼Œå¯ä»¥é™ä½<code>time_wait</code>çŠ¶æ€çš„<code>socket</code>æ•°é‡ï¼Œä»è€Œæå‡æœåŠ¡å™¨å¹¶å‘èƒ½åŠ›ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äº<code>try-catch</code>çš„ä½¿ç”¨æ–¹å¼ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.æ¨èç”¨<code>try-catch</code>æ¥åšæµç¨‹æ§åˆ¶ã€æ¡ä»¶æ§åˆ¶ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æ•è·å¼‚å¸¸ä¸æŠ›å¼‚å¸¸ï¼Œå¿…é¡»æ˜¯å®Œå…¨åŒ¹é…ï¼Œæˆ–è€…æ•è·å¼‚å¸¸æ˜¯æŠ›å¼‚å¸¸çš„çˆ¶ç±»ã€‚</li><li><input disabled="" type="checkbox"> C.å¯¹å¤§æ®µä»£ç è¿›è¡Œ<code>try-catch</code>ï¼Œåˆ©ç”¨<code>Throwable</code>æ¥æ•æ‰ï¼Œä¸‡æ— ä¸€å¤±ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¯¹å¤§æ®µä»£ç è¿›è¡Œ<code>try-catch</code>ï¼Œè¿™æ˜¯ä¸è´Ÿè´£ä»»çš„è¡¨ç°ï¼Œåˆ†æ¸…ç¨³å®šä»£ç å’Œéç¨³å®šä»£ç ï¼Œå¯¹éç¨³å®šçš„ä»£ç åšå¯¹åº”çš„å¼‚å¸¸å¤„ç†ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç³»ç»Ÿå®‰å…¨ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> Aé<code>SEO URL</code>å¿…é¡»é…ç½®ä¸ºç¦æ­¢çˆ¬è™«è®¿é—®ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ç”¨æˆ·ç”Ÿæˆå†…å®¹çš„åœºæ™¯ï¼Œå¦‚å‘å¸–è¯„è®ºç­‰ï¼Œå¿…é¡»å®ç°é˜²åˆ·ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ä½¿ç”¨å¹³å°èµ„æºï¼Œæ¯”å¦‚çŸ­ä¿¡ã€é‚®ä»¶ç­‰åŠŸèƒ½ï¼Œé¿å…è¢«æ»¥åˆ·èµ„æŸï¼ŒåŒæ—¶é˜²æ­¢å¯¹ç”¨æˆ·é€ æˆéªšæ‰°ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ–‡æœ¬å†…å®¹å¿…é¡»è¿›è¡Œè¿ç¦è¯è¿‡æ»¤ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå¹¶å‘å¤„ç†ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.çº¿ç¨‹èµ„æºå¿…é¡»é€šè¿‡çº¿ç¨‹æ± æä¾›ï¼Œä¸å…è®¸åœ¨åº”ç”¨ä¸­è‡ªè¡Œæ˜¾å¼åˆ›å»ºçº¿ç¨‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åŒæ­¥å¤„ç†æ—¶ï¼Œèƒ½é”éƒ¨åˆ†ä»£ç åŒºå—çš„æƒ…å†µä¸‹ä¸è¦é”æ•´ä¸ªæ–¹æ³•ï¼›é«˜å¹¶å‘æ—¶ï¼ŒåŒæ­¥è°ƒç”¨åº”è¯¥è€ƒè™‘åˆ°æ€§èƒ½æŸè€—ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.åˆ›å»ºçº¿ç¨‹æˆ–çº¿ç¨‹æ± æ—¶ï¼Œæ¨èç»™çº¿ç¨‹æŒ‡å®šä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°ï¼Œæ–¹ä¾¿å‡ºé”™æ—¶å›æº¯ã€‚</li><li><input disabled="" type="checkbox"> D.æ¨èä½¿ç”¨<code>Executors.newFixedThreadPool(int x)</code>ç”ŸæˆæŒ‡å®šå¤§å°çš„çº¿ç¨‹æ± ã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘åœ¨å®šä¹‰<code>DO/DTO/V0/</code>ç­‰<code>POJO</code>ç±»æ—¶ï¼Œå¯¹å±æ€§é»˜è®¤å€¼çš„è®¾å®šï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.Stringç±»å‹çš„é»˜è®¤å€¼è®¾å®šä¸ºç©ºå­—ç¬¦ä¸²ã€‚</li><li><input disabled="" type="checkbox"> B.Dateç±»å‹çš„é»˜è®¤å€¼è®¾å®šä¸º<code>new Date()</code>ã€‚</li><li><input disabled="" type="checkbox"> C.é›†åˆç±»å‹çš„é»˜è®¤å€¼è®¾å®šä¸º<code>Collections.EMPTY_LIST</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ä¸è¦è®¾å®šä»»ä½•å±æ€§é»˜è®¤å€¼ã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘é›†åˆåœ¨éå†è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶éœ€è¦å¯¹ç¬¦åˆä¸€å®šæ¡ä»¶çš„å…ƒç´ è¿›è¡Œåˆ é™¤ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.åœ¨<code>foreach</code>å¾ªç¯é‡Œè¿›è¡Œå…ƒç´ çš„<code>remove</code>æ“ä½œã€‚</li><li><input checked="" disabled="" type="checkbox"> <strong>B.ä½¿ç”¨<code>Iterator</code>æ–¹å¼ï¼Œå¦‚æœæœ‰å¹¶å‘ï¼Œéœ€è¦å¯¹<code>iterator</code>å¯¹è±¡åŠ é”ã€‚</strong></li><li><input disabled="" type="checkbox"> C.<code>iterator</code>è¿›è¡Œå…ƒç´ çš„åˆ é™¤æ“ä½œï¼Œç»å¯¹æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li><li><input disabled="" type="checkbox"> D.Javaæ— æ³•å®ç°åœ¨éå†æ—¶ï¼Œè¿›è¡Œå†Œåˆ é™¤å…ƒç´ æ“ä½œã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºäºŒæ–¹åº“çš„<code>snapshot</code>ä¸<code>release</code>çš„åŒºåˆ«ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>snapshot</code>åœ¨æœ¬åœ°ç¼–è¯‘æ—¶ï¼Œéƒ½ä¼šåˆ°ä¸­å¤®ä»“åº“ä¸‹è½½æœ€æ–°çš„äºŒæ–¹åº“ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>release</code>åœ¨æœ¬åœ°ç¼–è¯‘æ—¶ï¼Œå¦‚æœå·²ç»å­˜åœ¨ç›¸åŒçš„ç‰ˆæœ¬å·ï¼Œå³ä½¿ä¸­å¤®ä»“åº“æœ‰æœ€æ–°ç›¸åŒç‰ˆæœ¬çš„äºŒæ–¹åº“ä¹Ÿä¸ä¼šæ‹‰å–ã€‚</li><li><input disabled="" type="checkbox"> C.åº”ç”¨ä½¿ç”¨äº†Açš„<code>release</code>ç‰ˆæœ¬äºŒæ–¹åº“ï¼ŒAä¾èµ–äº†Bçš„<code>snapshot</code>äºŒæ–¹åº“ï¼Œåº”ç”¨æœ¬åœ°ç¼–è¯‘æ—¶ï¼Œå¹¶ä¸ä¼šæ‹‰å–Bæœ€æ–°çš„<code>snapsho</code>äºŒæ–¹åº“ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.åº”ç”¨å‘å¸ƒå°½é‡ä½¿ç”¨<code>release</code>ç‰ˆæœ¬çš„äºŒæ–¹åº“ï¼Œæ­¤ä¸¾æ˜¯ä¸ºäº†ä¿è¯å‘å¸ƒçš„å¹‚ç­‰æ€§ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†å®šæ—¶ä»»åŠ¡çš„æƒ…å†µï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.æ¨èä½¿ç”¨<code>Timer</code>æ–¹å¼å¤„ç†ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æ¨èä½¿ç”¨<code>ScheduledExecutorService</code>æ–¹å¼å¤„ç†ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.<code>Timer</code>è¿è¡Œå¤šä¸ª<code>TimeTask</code>æ—¶ï¼Œåªè¦å…¶ä¸­ä¹‹ä¸€æ²¡æœ‰æ•è·æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå…¶å®ƒä»»åŠ¡ä¾¿ä¼šè‡ªåŠ¨ç»ˆæ­¢è¿è¡Œã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>ScheduledExecutorService</code>å¹¶å‘è¿è¡Œå¤šä¸ªå®šæ—¶ä»»åŠ¡æ—¶ï¼Œå…¶ä¸­æŸçº¿ç¨‹æŠ›å‡ºå¼‚å¸¸ï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒçº¿ç¨‹çš„ç»§ç»­è¿è¡Œã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ„é€ æ–¹æ³•ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ„é€ æ–¹æ³•é‡Œé¢ç¦æ­¢åŠ å…¥ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œå¦‚æœæœ‰åˆå§‹åŒ–é€»è¾‘ï¼Œè¯·æ”¾åœ¨<code>init</code>æ–¹æ³•ä¸­ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å½“ä¸€ä¸ªç±»æœ‰å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œåº”è¯¥æŒ‰é¡ºåºæ”¾ç½®åœ¨ä¸€èµ·ï¼Œä¾¿äºé˜…è¯»ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¦‚æœä¸å…è®¸å¤–éƒ¨ç›´æ¥é€šè¿‡<code>new</code>æ¥åˆ›å»ºå¯¹è±¡ï¼Œé‚£ä¹ˆæ„é€ æ–¹æ³•å¿…é¡»æ˜¯<code>private</code>ã€‚</li><li><input disabled="" type="checkbox"> D.æ„é€ æ–¹æ³•ä¸­å¯ä»¥æœ‰ä¸šåŠ¡å®ç°ä»£ç ï¼Œå¦‚å¯¹æˆå‘˜å˜é‡çš„ç®€å•è¿ç®—ã€ä¸šåŠ¡åˆ¤æ–­ç­‰ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ³¨é‡Šï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ–¹æ³•å†…éƒ¨å•è¡Œæ³¨é‡Šï¼Œåœ¨è¢«æ³¨é‡Šè¯­å¥ä¸Šæ–¹å¦èµ·ä¸€è¡Œï¼Œä½¿ç”¨<code>//</code>æ³¨é‡Šã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æ‰€æœ‰çš„ç±»éƒ½å¿…é¡»æ·»åŠ åˆ›å»ºè€…ä¿¡æ¯ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ç›¸æ¯”è¾ƒä½¿ç”¨â€œåŠåŠå­â€è‹±æ–‡æ¥æ³¨é‡Šï¼Œç”¨ä¸­æ–‡æ³¨é‡ŠæŠŠé—®é¢˜è¯´æ¸…æ¥šæ›´åˆé€‚ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ‰€æœ‰çš„æšä¸¾ç±»å‹å­—æ®µå¿…é¡»è¦æœ‰æ³¨é‡Šï¼Œè¯´æ˜æ¯ä¸ªæ•°æ®é¡¹çš„ç”¨é€”ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå¸¸é‡å®šä¹‰ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.è·¨åº”ç”¨å…±äº«å¸¸é‡ï¼šæ”¾ç½®åœ¨äºŒæ–¹åº“ä¸­ï¼Œé€šå¸¸æ˜¯<code>client.jar</code>ä¸­çš„<code>const</code>ç›®å½•ä¸‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åº”ç”¨å†…å…±äº«å¸¸é‡ï¼šé€šå¸¸æ”¾ç½®åœ¨ä¸€æ–¹åº“çš„<code>modules</code>ä¸­çš„<code>const</code>ç›®å½•ä¸‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å­å·¥ç¨‹å†…éƒ¨å…±äº«å¸¸é‡ï¼šå³åœ¨å½“å‰å­å·¥ç¨‹çš„<code>const</code>ç›®å½•ä¸‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ç±»å†…å¸¸é‡ï¼šç›´æ¥åœ¨ç±»å†…éƒ¨<code>private static final</code>å®šä¹‰ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºåŸºæœ¬æ•°æ®ç±»å‹ä¸åŒ…è£…æ•°æ®ç±»å‹çš„ä½¿ç”¨æ ‡å‡†ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ‰€æœ‰çš„<code>POJO</code>ç±»å±æ€§å¿…é¡»ä½¿ç”¨åŒ…è£…æ•°æ®ç±»å‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>RPC</code>æ–¹æ³•çš„è¿”å›å€¼å’Œå‚æ•°å¿…é¡»ä½¿ç”¨åŒ…è£…æ•°æ®ç±»å‹ã€‚</li><li><input disabled="" type="checkbox"> C.å› ä¸ºJAVAçš„è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±æœºåˆ¶ï¼Œä¸éœ€è¦æ ¹æ®åœºæ™¯æ¥åŒºåˆ†æ•°æ®ç±»å‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ‰€æœ‰çš„å±€éƒ¨å˜é‡æ¨èä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºçº¿ç¨‹æ± ç®¡ç†çº¿ç¨‹çš„å¥½å¤„ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.èƒ½å¤Ÿå‡å°‘åœ¨åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¸Šæ‰€èŠ±çš„æ—¶é—´ä»¥åŠç³»ç»Ÿèµ„æºçš„å¼€é”€ã€‚</li><li><input disabled="" type="checkbox"> B.ä½¿ç”¨çº¿ç¨‹æ± ä¸€å®šèƒ½é¿å…<code>OOM</code>é—®é¢˜ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.çº¿ç¨‹èµ„æºå¿…é¡»é€šè¿‡çº¿ç¨‹æ± æä¾›ï¼Œä¸å…è®¸åœ¨åº”ç”¨ä¸­è‡ªè¡Œæ˜¾å¼åˆ›å»ºçº¿ç¨‹ã€‚</li><li><input disabled="" type="checkbox"> D.çº¿ç¨‹æ± èƒ½å¤Ÿæ ¹æ®èµ„æºç­‰å¾…æƒ…å†µï¼Œè‡ªåŠ¨è°ƒæ•´çº¿ç¨‹ä¼˜å…ˆçº§å¹¶è§£å†³æ­»é”é—®é¢˜ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç”Ÿäº§ç¯å¢ƒçš„æ—¥å¿—æ–‡ä»¶ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.åº”ç”¨çš„æ—¥å¿—æ–‡ä»¶ç»Ÿä¸€ä¿å­˜åœ¨ï¼š<code>/home/admin/åº”ç”¨å/logs/è·¯å¾„ä¸‹</code>ï¼Œä¾¿äºç»Ÿä¸€ç»´æŠ¤ä»¥åŠè®¤çŸ¥ç»Ÿä¸€ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æ—¥å¿—æ–‡ä»¶æ¨èè‡³å°‘ä¿å­˜15å¤©ï¼Œå› ä¸ºæœ‰äº›å¼‚å¸¸å…·å¤‡ä»¥â€œå‘¨â€ä¸ºé¢‘æ¬¡å‘ç”Ÿçš„ç‰¹ç‚¹ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.é¿å…é‡å¤æ‰“å°æ—¥å¿—ï¼Œæµªè´¹ç£ç›˜ç©ºé—´ï¼ŒåŠ¡å¿…åœ¨<code>log4j.xml</code>ä¸­è®¾ç½®<code>additivity=false</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.é”™è¯¯æ—¥å¿—å’Œä¸šåŠ¡æ—¥å¿—å°½é‡åˆ†å¼€å­˜æ”¾ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºäºŒæ–¹åº“çš„ä¾èµ–å¤„ç†ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.ä¾èµ–äºä¸€ä¸ªäºŒæ–¹åº“ç¾¤æ—¶ï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ªç»Ÿä¸€ç‰ˆæœ¬å˜é‡ï¼Œé¿å…å„å­äºŒæ–¹åº“ç‰ˆæœ¬å·ä¸ä¸€è‡´ã€‚</li><li><input disabled="" type="checkbox"> B.å¯ä»¥å…è®¸å­é¡¹ç›®çš„<code>pom</code>ä¾èµ–ä¸­å‡ºç°ç›¸åŒçš„<code>Groupld</code>ï¼Œç›¸åŒçš„<code>Artifactld</code>ï¼Œä½†æ˜¯ä¸åŒçš„<code>Version</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æ‰€æœ‰<code>pom</code>æ–‡ä»¶ä¸­çš„ä¾èµ–å£°æ˜æ”¾åœ¨<code>&lt;dependencies&gt;</code>è¯­å¥å—ä¸­ï¼Œæ‰€æœ‰ç‰ˆæœ¬ä»²è£æ”¾åœ¨<code>&lt;dependencyManagemet&gt;</code>è¯­å¥å—ä¸­ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.çº¿ä¸Šåº”ç”¨ä¸è¦ä¾èµ–<code>SNAPSHOT</code>ç‰ˆæœ¬ï¼ˆå®‰å…¨åŒ…é™¤å¤–ï¼‰ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ•°æ®åº“ä¸­<code>NULL</code>çš„æè¿°ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.<code>NULL=NULL</code>çš„è¿”å›ç»“æœä¸º<code>true</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>NULL</code>ä¸ä»»ä½•å€¼çš„æ¯”è¾ƒç»“æœéƒ½ä¸º<code>NULL</code>ã€‚</li><li><input disabled="" type="checkbox"> C.<code>NULL&lt;&gt;1</code>çš„è¿”å›ç»“æœä¸º<code>true</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å½“æŸä¸€åˆ—çš„å€¼å…¨æ˜¯NULLæ—¶ï¼Œ<code>sum(col)</code>çš„è¿”å›ç»“æœä¸º<code>NULL</code>ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºè¡¨å­—æ®µå’Œç´¢å¼•ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.è¡¨å­—æ®µæ³¨é‡Šï¼Œå¦‚æœä¿®æ”¹å­—æ®µå«ä¹‰æˆ–å¯¹å­—æ®µè¡¨ç¤ºçš„çŠ¶æ€è¿½åŠ æ—¶ï¼Œéœ€è¦åŠæ—¶æ›´æ–°ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åˆé€‚çš„å­—ç¬¦å­˜å‚¨é•¿åº¦ï¼Œä¸ä½†èŠ‚çº¦æ•°æ®åº“è¡¨ç©ºé—´ã€èŠ‚çº¦ç´¢å¼•å­˜å‚¨ï¼Œæ›´é‡è¦çš„æ˜¯æå‡æ£€ç´¢é€Ÿåº¦ã€‚</li><li><input disabled="" type="checkbox"> C.é’ˆå¯¹è¡¨çš„æ¯ä¸ªå­—æ®µéƒ½å¢åŠ ç´¢å¼•ï¼ŒåŠ å¿«æŸ¥è¯¢é€Ÿåº¦ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å­—æ®µçš„åŒºåˆ†åº¦è¶Šé«˜ï¼Œç´¢å¼•çš„æŸ¥æ‰¾é€Ÿåº¦è¶Šå¿«ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå‚æ•°æ ¡éªŒï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ‰¹é‡å¤„ç†æ¥å£å¿…é¡»åšå¥½æ¥å£å…¥å‚ä¿æŠ¤ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.éœ€è¦æé«˜ç¨³å®šæ€§å’Œå¯ç”¨æ€§çš„æ–¹æ³•éœ€è¦å¯¹å‚æ•°è¿›è¡Œæ ¡éªŒã€‚</li><li><input checked="" disabled="" type="checkbox"> C.åº•å±‚çš„æ–¹æ³•ï¼Œåœ¨ä¸Šå±‚è°ƒç”¨ä¸­å‚æ•°å¤šåŠå·²ç»è¢«æ ¡éªŒè¿‡ï¼Œå¯ä»¥è€ƒè™‘ä¸æ ¡éªŒã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¯¹å¤–æä¾›çš„å¼€æ”¾æ¥å£ï¼Œéƒ½è¦è¿›è¡Œå‚æ•°æ£€éªŒã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºäºŒæ–¹åº“GroupIDå’ŒArtifactIDæ ¼å¼ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.GroupIDæ ¼å¼ä¸ºï¼šcom.{å…¬å¸/å­å…¬å¸}.ä¸šåŠ¡çº¿[.å­ä¸šåŠ¡]ã€‚</li><li><input disabled="" type="checkbox"> B.GroupIDæ ¼å¼ä¸ºï¼šcom.{å…¬å¸/å­å…¬å¸}.ä¸šåŠ¡çº¿.å­ä¸šåŠ¡çº¿.å­æ¨¡å—ã€‚</li><li><input disabled="" type="checkbox"> C.ArtifactlDæ ¼å¼ä¸ºï¼šäº§å“çº¿å_æ¨¡å—åæˆ–è€…äº§å“çº¿.æ¨¡å—åã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ArtifactIDæ ¼å¼ä¸ºï¼šäº§å“çº¿å-æ¨¡å—åã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºåº”ç”¨ä¸æ•°æ®åº“ä¹‹é—´çš„æ“ä½œï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.å¯¹å¤–æä¾›ä¸€ä¸ªå¤§è€Œå…¨çš„æ¥å£è¿›è¡ŒPOJOçš„updateæ›´æ–°ï¼Œè¿™æ ·æ¯”è¾ƒçœäº‹ï¼Œçœä»£ç ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ä½¿ç”¨äº‹åŠ¡å›æ»šçš„åœ°æ–¹éœ€è¦è€ƒè™‘å„æ–¹é¢çš„å›æ»šæ–¹æ¡ˆï¼ŒåŒ…æ‹¬ç¼“å­˜å›æ»šã€æœç´¢å¼•æ“å›æ»šã€æ¶ˆæ¯è¡¥å¿ã€ç»Ÿè®¡ä¿®æ­£ç­‰ã€‚</li><li><input disabled="" type="checkbox"> C.åº”ç”¨æœåŠ¡å™¨ä¸æ•°æ®åº“ä¹‹é—´æ˜¯çŸ­è¿æ¥ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.åº”ç”¨æœåŠ¡å™¨ä¸æ•°æ®åº“ä¹‹é—´æ˜¯é•¿è¿æ¥ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºMySQLæ€§èƒ½ä¼˜åŒ–çš„æè¿°ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„</p><ul><li><input checked="" disabled="" type="checkbox"> A.ä¸»é”®æŸ¥è¯¢ä¼˜å…ˆäºäºŒçº§ç´¢å¼•æŸ¥è¯¢ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.è¡¨è¿æ¥æœ‰ä¸€å®šçš„ä»£ä»·ï¼Œæ•…è¡¨è¿æ¥æ•°é‡è¶Šå°‘è¶Šå¥½ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒäºŒçº§ç´¢å¼•æ‰«æä¼˜å…ˆäºå…¨è¡¨æ‰«æã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¯ä»¥ä½¿ç”¨é€šè¿‡ç´¢å¼•é¿å…æ’åºä»£ä»·ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äº<code>checked/unchecked exception</code>ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„</p><ul><li><input disabled="" type="checkbox"> A.ç»§æ‰¿<code>java.lang.Error</code>çš„ç±»å±äº<code>checked exception</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>checked</code>å¼‚å¸¸ç»§æ‰¿<code>java.lang.Exception</code>ç±»ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.<code>unchecked</code>å¼‚å¸¸ç»§æ‰¿<code>java.lang.RuntimeException</code>ç±»ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>NullPointerException</code>ã€<code>llegalArgumentException</code>å±äº<code>unchecked exception</code>ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºé¢†åŸŸæ¨¡å‹å‘½åï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ•°æ®å¯¹è±¡å‘½åï¼š<code>xxxDO</code>ï¼Œ<code>xxx</code>å³ä¸ºæ•°æ®è¡¨åï¼Œä¾‹å¦‚ï¼š<code>ResellerAccountDO</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æ•°æ®ä¼ è¾“å¯¹è±¡ï¼š<code>xxxDTO</code>ï¼Œ<code>xxx</code>ä¸ºä¸šåŠ¡é¢†åŸŸç›¸å…³çš„åç§°ï¼Œä¾‹å¦‚<code>ProductDTO</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å±•ç¤ºå±‚å¯¹è±¡ï¼š<code>xxxVO</code>ï¼Œ<code>xxx</code>ä¸€èˆ¬ä¸ºç½‘é¡µåç§°ï¼Œä¾‹å¦‚<code>RecommendProductVO</code>ã€‚</li><li><input disabled="" type="checkbox"> D.<code>POJO</code>æ˜¯<code>DO</code>/<code>DTO</code>/<code>BO</code>/<code>VO</code>çš„ç»Ÿç§°ï¼Œå‘½åæˆ<code>xxxPOJO</code>ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘ä»¥ä¸‹å…³äºå‘½åè§„çº¦å†…å®¹è¯´æ˜ï¼Œæ­£ç¡®çš„æ˜¯ï¼š</p><ul><li><input disabled="" type="checkbox"> A.åŒ…åç»Ÿä¸€ä½¿ç”¨å°å†™ï¼Œç‚¹åˆ†éš”ç¬¦ä¹‹é—´æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè‡ªç„¶è¯­ä¹‰çš„è‹±è¯­å•è¯ï¼Œå¹¶ä¸”ä½¿ç”¨å¤æ•°å½¢å¼ï¼Œä¾‹å¦‚ï¼šåº”ç”¨å·¥å…·ç±»åŒ…åä¸º<code>com.albaba.mpp.utils</code></li><li><input checked="" disabled="" type="checkbox"> B.ç±»åä½¿ç”¨<code>UperCamelCase</code>ï¼Œå¿…é¡»éµä»é©¼å³°å½¢å¼ï¼Œä½†ä»¥ä¸‹æƒ…å½¢ä¾‹å¤–ï¼šï¼ˆé¢†åŸŸæ¨¡å‹çš„ç›¸å…³å‘½åï¼‰<code>DO</code>/<code>DTO</code>/<code>VO</code>/<code>DA0</code>ç­‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æŠ½è±¡ç±»å‘½åä½¿ç”¨<code>Abstract</code>åŸŸ<code>Base</code>å¼€å¤´ï¼›å¼‚å¸¸ç±»å‘½åä½¿ç”¨<code>Exception</code>ç»“å°¾ï¼›æµ‹è¯•ç±»å‘½åä»¥å®ƒè¦æµ‹è¯•çš„ç±»çš„åç§°å¼€å§‹ï¼Œä»¥<code>Test</code>ç»“å°¾ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æšä¸¾ç±»åå»ºè®®å¸¦ä¸Š<code>Enum</code>åç¼€ï¼Œæšä¸¾æˆå‘˜åç§°éœ€è¦å…¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’å‘éš”å¼€ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç éµå®ˆBCDEåŸåˆ™ï¼Œä»¥ä¿è¯è¢«æµ‹è¯•æ¨¡å—çš„äº¤ä»˜è´¨é‡ï¼Œé‚£ä¹ˆä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯</p><ul><li><input checked="" disabled="" type="checkbox"> A.Borderï¼Œè¾¹ç•Œå€¼æµ‹è¯•ï¼ŒåŒ…æ‹¬å¾ªç¯è¾¹ç•Œã€ç‰¹æ®Šå–å€¼ã€ç‰¹æ®Šæ—¶é—´ç‚¹ã€æ•°æ®é¡ºåºç­‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.Correctï¼Œæ­£ç¡®çš„è¾“å…¥ï¼Œå¹¶å¾—åˆ°é¢„æœŸçš„ç»“æœã€‚</li><li><input checked="" disabled="" type="checkbox"> C.Designï¼Œä¸è®¾è®¡æ–‡æ¡£ç›¸ç»“åˆï¼Œæ¥ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</li><li><input disabled="" type="checkbox"> D.Equalï¼Œå•å…ƒæµ‹è¯•ç¯å¢ƒå¿…é¡»ä¸çº¿ä¸Šç”Ÿäº§ç¯å¢ƒä¸€è‡´ã€‚ã€ŒERRORã€</li></ul></li><li><p>ã€å¤šé€‰ã€‘åœ¨å¤šçº¿ç¨‹å¹¶å‘è¯»å†™çš„æƒ…å†µä¸‹ï¼Œä¸‹åˆ—å“ªäº›å¤„ç†æ–¹å¼èƒ½ä¿è¯å¯¹è±¡çš„çº¿ç¨‹å®‰å…¨ï¼š</p><ul><li><input disabled="" type="checkbox"> A.ä½¿ç”¨<code>volatile</code>å…³é”®å­—ã€‚ã€Œ<code>volatile</code>è§£å†³å¤šçº¿ç¨‹å†…å­˜ä¸å¯è§é—®é¢˜ã€‚å¯¹äºä¸€å†™å¤šè¯»ï¼Œæ˜¯å¯ä»¥è§£å†³å˜é‡åŒæ­¥é—®é¢˜ï¼›ä½†æ˜¯å¦‚æœå¤šå†™ï¼ŒåŒæ ·æ— æ³•è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ã€</li><li><input checked="" disabled="" type="checkbox"> B.ä½¿ç”¨<code>synchronized</code>å…³é”®å­—ç»™å¯¹è±¡çš„è¯»å†™æ“ä½œåŠ é”ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œæ¨èä½¿ç”¨<code>java.util.concurent.atomic</code>åŒ…ä¸‹é¢æä¾›çš„çº¿ç¨‹å®‰å…¨çš„åŸºæœ¬ç±»å‹åŒ…è£…ç±»ï¼Œä¾‹å¦‚<code>Atomiclnteger</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¦‚æœæ˜¯é›†åˆï¼Œæ¨èä½¿ç”¨<code>java.util.concurent</code>æä¾›çš„å¹¶å‘é›†åˆç±»ï¼Œä¾‹å¦‚ï¼š<code>ConcurrentHashMap</code>ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ¥å£ä½¿ç”¨æŠ›å¼‚å¸¸è¿˜æ˜¯è¿”å›é”™è¯¯ç ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å‘å…¬å¸å¤–æä¾›çš„<code>http</code>/<code>api</code>æ¥å£ï¼Œæ¨èä½¿ç”¨<code>é”™è¯¯ç </code>æ–¹å¼è¿”å›å¼‚å¸¸æˆ–è€…é”™è¯¯ä¿¡æ¯ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¯¹äºåº”ç”¨å†…éƒ¨çš„æ–¹æ³•è°ƒç”¨ï¼Œæ¨èä½¿ç”¨<code>æŠ›å‡ºå¼‚å¸¸</code>çš„æ–¹å¼å¤„ç†å¼‚å¸¸æˆ–è€…é”™è¯¯ä¿¡æ¯ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.è·¨åº”ç”¨çš„<code>RPC</code>è°ƒç”¨ï¼Œæ¨èä½¿ç”¨å°†<code>é”™è¯¯ç </code>å’Œ<code>é”™è¯¯ç®€çŸ­ä¿¡æ¯</code>å°è£…æˆ<code>Result</code>çš„æ–¹å¼è¿›è¡Œè¿”å›ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¯¹å¤–æä¾›çš„æ¥å£ï¼Œä¸€å®šè¦ä¿è¯é€»è¾‘å¥å£®æ€§ï¼šå°½é‡é¿å…ç©ºæŒ‡é’ˆç­‰æŠ€æœ¯ç±»å¼‚å¸¸ï¼›å¯¹äºä¸šåŠ¡ç±»å¼‚å¸¸è¦åšå¥½é”™è¯¯ç æˆ–è€…å¼‚å¸¸ä¿¡æ¯çš„å°è£…ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äº<code>join</code>çš„æè¿°ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>join</code>çš„å­—æ®µï¼Œæ•°æ®ç±»å‹é¡»ä¿æŒç»å¯¹ä¸€è‡´ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>join</code>åˆ—å¿…é¡»æœ‰ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ä¼˜å…ˆ<code>where</code>è¿‡æ»¤ï¼Œå…¶æ¬¡å†<code>join</code>å…³è”ã€‚</li><li><input disabled="" type="checkbox"> D.åªè¦æ»¡è¶³ä¸šåŠ¡éœ€æ±‚å’Œï¼Œ<code>join</code>è¡¨çš„ä¸ªæ•°ä¸å—é™åˆ¶ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå‚æ•°æœ‰æ•ˆæ€§éªŒè¯ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.é˜²æ­¢<code>page size</code>è¿‡å¤§å¯¼è‡´å†…å­˜æº¢å‡ºã€‚</li><li><input checked="" disabled="" type="checkbox"> B.é˜²æ­¢æ­£åˆ™è¾“å…¥æºä¸²æ‹’ç»æœåŠ¡<code>ReDOS</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.é˜²æ­¢ä»»æ„é‡å®šå‘ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.é¢„é˜²SQLæ³¨å…¥ã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘å…³äºæ—¥å¿—çš„æ‰“å°ï¼Œä¸‹åˆ—å“ªäº›å†™æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.<code>System.out(&quot;xxx&quot;+e.getMessage())</code>ã€‚</li><li><input disabled="" type="checkbox"> B.<code>System.err(&quot;xxx&quot;+e.getMessage())</code>ã€‚</li><li><input disabled="" type="checkbox"> C.<code>e.printStackTrace()</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>logger.error(&quot;exception happens product info:&quot; + product.toString() + &quot;_&quot; + e.getMessage() e)</code>ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå¼‚å¸¸çš„å¤„ç†æ–¹å¼ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.ä¸ºé˜²æ­¢<code>obj</code>å¯¹è±¡æœ¬èº«ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¹¦å†™ä»£ç æ—¶åº”è¯¥æ³¨æ„åŠ å¼‚å¸¸æ•è·å¤„ç†ï¼Œä¾‹1ï¼š<code>try{objmethod()} catcth(NullPointerException) {.â€¦}</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æ–¹æ³•ç­¾åä¸­ï¼ŒæŠ›ç»™è°ƒç”¨è€…çš„å…³é”®å­—ä¸º<code>throws</code></li><li><input disabled="" type="checkbox"> C.æ–¹æ³•å†…éƒ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸å®å¯¹è±¡ä¸º<code>throws</code></li><li><input checked="" disabled="" type="checkbox"> D.è‡ªå®šä¹‰å¼‚å¸¸è¦åšåˆ°â€œè®¤çŸ¥å¯¹ç­‰â€ï¼Œå³ï¼šæŠ›å‡ºè€…å’Œæ¥æ”¶è€…è¦ä¿æŒå¯¹è‡ªå®šä¹‰å¼‚å¸¸çš„è®¤çŸ¥ç»Ÿä¸€ï¼Œæ¥æ”¶æ–¹éœ€è¦çŸ¥é“è¿™ç§å¼‚å¸¸çš„å«ä¹‰å’Œå¯¹åº”çš„å¤„ç†æ–¹æ¡ˆã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘å…³äºä½¿ç”¨<code>explain</code>å¯¹æ•°æ®åº“æ€§èƒ½è¿›è¡Œä¼˜åŒ–åˆ†æï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>SQL</code>æ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼šè‡³å°‘è¦è¾¾åˆ°<code>range</code>çº§åˆ«ï¼Œè¦æ±‚æ˜¯<code>ref</code>çº§åˆ«ï¼Œå¦‚æœå¯ä»¥æ˜¯<code>consts</code>æœ€å¥½ã€‚</li><li><input disabled="" type="checkbox"> B.<code>index</code>çº§åˆ«èµ°çš„æ˜¯æ‰«æç´¢å¼•ï¼Œæ‰€ä»¥é€Ÿåº¦ä¼šæ¯”<code>ref</code>å¿«ã€‚</li><li><input disabled="" type="checkbox"> C.<code>range</code>çº§åˆ«æ˜¯æŒ‡å¯¹è¡¨è¿›è¡ŒèŒƒå›´ç´¢å¼•ã€‚</li><li><input disabled="" type="checkbox"> D.<code>ref</code>çº§åˆ«æ˜¯æŒ‡ä½¿ç”¨ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå¼‚å¸¸å¤„ç†ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>try</code>å—æ”¾åˆ°äº†äº‹åŠ¡ä»£ç ä¸­ï¼Œ<code>catch</code>å¼‚å¸¸åï¼Œå¦‚æœéœ€è¦å›æ»šäº‹åŠ¡ï¼Œå¿…é¡»è¦æ‰‹åŠ¨å›æ»šäº‹åŠ¡ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åœ¨<code>fnally</code>å—å¿…é¡»å¯¹æ–‡ä»¶æµè¿›è¡Œå…³é—­ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ä¸èƒ½åœ¨<code>finaly</code>å—ä½¿ç”¨<code>return</code>ï¼Œ<code>finally</code>å—ä¸­çš„<code>return</code>è¿”å›åæ–¹æ³•ç»“æŸæ‰§è¡Œï¼Œä¸ä¼šå†æ‰§è¡Œ<code>try</code>å—ä¸­çš„<code>return</code>è¯­å¥ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å¾ªç¯ä½“ä¸­é¿å…ä¸å¿…è¦çš„<code>try-catch</code>æ“ä½œã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå®¢æˆ·æ•°æ®å±•ç¤ºï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å®¢æˆ·çš„å¯†ç ï¼Œå¯†é’¥åŠå¯†ä¿é—®é¢˜ç­”æ¡ˆç­‰ä¿¡æ¯ç¦æ­¢å±•ç¤ºã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å®¢æˆ·çš„é“¶è¡Œå¡å·åªæ˜¾ç¤ºåå››ä½ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å®¢æˆ·çš„è¯ä»¶å·ç åªæ˜¾ç¤ºç¬¬ä¸€ä½å’Œæœ€åä¸€ä½ï¼Œåœ¨å¿…è¦ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œç»å¤šå› å­å¼ºéªŒè¯åå¯å®Œæ•´å±•ç¤ºã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ¶‰åŠæœ‰å®Œæ•´å±•ç¤ºå®¢æˆ·ä¿¡æ¯çš„é¡µé¢å‡éœ€è¦æ¥å…¥é˜²çˆ¬ç³»ç»Ÿã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘æ•°ç»„ä½¿ç”¨<code>Arrays.asList()</code>è½¬åŒ–ä¸ºé›†åˆï¼Œä¸‹åˆ—è¯´æ³•å“ªäº›æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ•°ç»„å…ƒç´ çš„ä¿®æ”¹ï¼Œä¼šå½±å“åˆ°è½¬åŒ–è¿‡æ¥çš„é›†åˆã€‚</li><li><input disabled="" type="checkbox"> B.æ•°ç»„å…ƒç´ çš„ä¿®æ”¹ï¼Œä¸ä¼šå½±å“åˆ°è½¬åŒ–è¿‡æ¥çš„é›†åˆã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¯¹äºè½¬æ¢è¿‡æ¥çš„é›†åˆï¼Œå®ƒçš„<code>add</code>/<code>remove</code>/<code>clear</code> æ–¹æ³•ä¼šæŠ›å‡ºï¼š<code>UnsupportedOperationException</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>Arrays.asList()</code>ä½“ç°çš„æ˜¯é€‚é…å™¨æ¨¡å¼ï¼Œåªæ˜¯è½¬æ¢æ¥å£ï¼Œåå°çš„æ•°æ®ä»æ˜¯æ•°ç»„ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ•°æ®åº“æŸ¥è¯¢çš„æè¿°ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.å½“éœ€è¦è·å–æ•°æ®è¡¨æ‰€æœ‰å­—æ®µçš„å€¼æ˜ å°„åˆ°<code>DO</code>æ—¶ï¼Œå¯ä½¿ç”¨<code>select *</code>æ¥æŸ¥è¯¢ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ç»å¯¹ç¦æ­¢å·¦æ¨¡ç³Šå’Œå…¨æ¨¡ç³ŠæŸ¥è¯¢ï¼›é™åˆ¶ä½¿ç”¨å³æ¨¡ç³ŠæŸ¥è¯¢ã€‚å…¨æ¨¡ç³Šæˆ–å·¦æ¨¡ç³Šæœç´¢çš„éœ€æ±‚èµ°æœç´¢å¼•æ“å®ç°ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¥æŸ¥è¯¢è¿”å›æ•°æ®ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.åœ¨è¡¨æŸ¥è¯¢ä¸­ï¼Œéœ€<code>order by</code>æ’åºæ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ä¸»é”®åˆ—ï¼Œç´¢å¼•åˆ—ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºJavaä»£ç çš„è®¾è®¡å’Œå¼€å‘æ³¨æ„äº‹é¡¹ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé›†åˆå¼€å‘è§„çº¦ã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.ç¦æ­¢å°†URLã€æ–‡ä»¶åã€ç³»ç»Ÿå‚æ•°ã€æ•°æ®åº“è¿æ¥åœ°å€ã€ä¸šåŠ¡è§„åˆ™çš„å¯å˜å‚æ•°ï¼Œç¡¬ç¼–ç åœ¨å·¥ç¨‹ä¸­ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>long</code>æˆ–è€…<code>Long</code>åˆå§‹èµ‹å€¼æ—¶ï¼Œå¿…é¡»æ˜¯å¤§å†™<code>L</code>ï¼Œä¸èƒ½å°å†™ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å½“ä¸€ä¸ªç±»æœ‰å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œæˆ–æ˜¯å¤šä¸ªåŒåæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åº”è¯¥æŒ‰é¡ºåºæ”¾ç½®åœ¨ä¸€èµ·ï¼Œä¾¿äºé˜…è¯»ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ç›¸åŒå‚æ•°ç±»å‹ï¼ŒåŒç­‰ä¸šåŠ¡å«ä¹‰ï¼Œæ‰å¯ä»¥ä½¿ç”¨Javaçš„å¯å˜å‚æ•°ï¼Œå‚æ•°çš„ç±»å‹å°½é‡é¿å…ä½¿ç”¨<code>Object</code>ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å¥½çš„å•å…ƒæµ‹è¯•å¿…é¡»éµå®ˆ<code>AlR</code>åŸåˆ™ï¼Œé‚£ä¹ˆ<code>AlR</code>åŸåˆ™å…·ä½“æ˜¯æŒ‡ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å•å…ƒæµ‹è¯•åº”è¯¥æ˜¯å…¨è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œå¹¶ä¸”éäº¤äº’å¼çš„ã€‚</li><li><input disabled="" type="checkbox"> B.å•å…ƒæµ‹è¯•å¿…é¡»åœ¨çº¿ä¸Šç¯å¢ƒèƒ½å¤Ÿå…¨éƒ¨è¢«æ­£ç¡®åœ°ç¼–è¯‘ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ä¸ºäº†ä¿è¯å•å…ƒæµ‹è¯•ç¨³å®šå¯é ä¸”ä¾¿äºç»´æŠ¤ï¼Œå•å…ƒæµ‹è¯•ç”¨ä¾‹ä¹‹é—´å†³ä¸èƒ½äº’ç›¸è°ƒç”¨ï¼Œä¹Ÿä¸èƒ½ä¾èµ–æ‰§è¡Œçš„å…ˆåæ¬¡åºã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å•å…ƒæµ‹è¯•æ˜¯å¯ä»¥é‡å¤æ‰§è¡Œçš„ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ•°æ®åº“ç´¢å¼•çš„å‘½åï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.ä¸»é”®ç´¢å¼•ï¼ˆ<code>primary key</code>ï¼‰ï¼Œå­—æ®µç±»å‹ä¸º<code>unsigned bigint</code>ã€å•è¡¨æ—¶æ¨èè‡ªå¢ã€æ­¥é•¿ä¸º1ã€‚</li><li><input disabled="" type="checkbox"> B.ä¸»é”®ç´¢å¼•ï¼ˆ<code>primary key</code>ï¼‰ï¼Œå­—æ®µç±»å‹ä¸º<code>unsigned bigint</code>ã€å•è¡¨æ—¶æ¨èè‡ªå¢ã€æ­¥é•¿ä¸º2ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å”¯ä¸€ç´¢å¼•ï¼ˆ<code>unique key</code>ï¼‰ï¼Œå‘½åè§„åˆ™ä¸º<code>uk_</code>å­—æ®µåï¼ˆå¦‚æœå¤šä¸ªå­—æ®µç»§ç»­ä¸‹åˆ’çº¿ï¼‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ™®é€šç´¢å¼•ï¼ˆ<code>normal index</code>ï¼‰ï¼Œæ ‡è®°æˆ<code>idx_</code>å­—æ®µåï¼ˆå¦‚æœå¤šä¸ªç»§ç»­ä¸‹åˆ’çº¿ï¼‰ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå¼‚å¸¸å¤„ç†çš„æ³¨æ„äº‹é¡¹ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.äº‹åŠ¡åœºæ™¯ä¸­ï¼ŒæŠ›å‡ºå¼‚å¸¸è¢«<code>catch</code>åï¼Œå¦‚æœéœ€è¦å›æ»šï¼Œä¸€å®šè¦æ‰‹åŠ¨å›æ»šäº‹åŠ¡ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åœ¨<code>finally</code>å—å¿…é¡»å¯¹æ–‡ä»¶æµè¿›è¡Œå…³é—­ã€‚</li><li><input disabled="" type="checkbox"> C.æ¨èåœ¨<code>finally</code>å—ä½¿ç”¨<code>return</code>è¯­å¥ã€‚</li><li><input disabled="" type="checkbox"> D.åœ¨<code>try</code>å—å†…ï¼Œå¯ä»¥ä¸ç”¨å¯¹å¯èƒ½ä¸º<code>null</code>çš„å¯¹è±¡åšéç©ºåˆ¤æ–­ï¼Œå› ä¸ºå¦‚æœæŠ›æ·<code>NPE</code>ï¼Œä¼šè¢«<code>catch</code>å—æ•è·å¹¶å¤„ç†ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ•°æ®åº“ä¸­è¡¨ç›¸å…³çš„å‘½åï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.è¡¨åã€å­—æ®µåç¦æ­¢å‡ºç°æ•°å­—å¼€å¤´ï¼Œç¦æ­¢ä¸¤ä¸ªä¸‹åˆ’çº¿ä¸­é—´åªå‡ºç°æ•°å­—ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.è¡¨åä¸ä½¿ç”¨å¤æ•°åè¯ã€‚</li><li><input disabled="" type="checkbox"> C.è¡¨å¿…å¤‡ä¸‰å­—æ®µå‘½åï¼š<code>id</code>ï¼Œ<code>gmt_create</code>ï¼Œ<code>gmt_modify</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.è¡¨å¿…å¤‡ä¸‰å­—æ®µå‘½åï¼š<code>id</code>ï¼Œ<code>gmt_create</code>ï¼Œ<code>gmt_modified</code>ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å¯¹äºç´¢å¼•çš„åŸºæœ¬åŸç†ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.ç´¢å¼•çš„æ•°æ®ç»“æ„ä¸»è¦æœ‰<code>B-Tree</code>ã€<code>Hash</code>ã€<code>R-Tree</code>ã€<code>Full-Text</code>ç­‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ä»ç‰©ç†å­˜å‚¨æ¥çœ‹ï¼Œä¸»è¦åˆ†ä¸ºèšé›†ï¼ˆclusteredï¼‰å’Œéèšé›†ï¼ˆnon-clusteredï¼‰ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.MySQLçš„è¡¨æ˜¯èšé›†ç´¢å¼•ç»„ç»‡è¡¨ï¼ˆindex of tableï¼‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯æ•°æ®ï¼Œéèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯éèšé›†ç´¢å¼•çš„keyå’Œä¸»é”®å€¼ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºåº”ç”¨ä¸­å¯ä»¥ç›´æ¥ä¾èµ–çš„æ—¥å¿—æ¡†æ¶ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input disabled="" type="checkbox"> A.<code>Log4j</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>SLF4J</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.<code>JCL</code>ï¼ˆJakarta Commons Loggingï¼‰ã€‚</li><li><input disabled="" type="checkbox"> D.<code>Logback</code>ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºçº¿ç¨‹å®‰å…¨ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>SimpleDateFormat</code>æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ç±»ã€‚</li><li><input disabled="" type="checkbox"> B.<code>SimpleDateFormat</code>æ˜¯çº¿ç¨‹å®‰å…¨çš„ç±»ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ä¸€èˆ¬ä¸è¦å®šä¹‰<code>SimpleDateFormat</code>çš„staticå˜é‡ï¼Œå¦‚æœå®šä¹‰ä¸ºstaticï¼Œå¿…é¡»ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ¨èä½¿ç”¨Apacheå°è£…å¥½çš„<code>DateUtils</code>å’Œ<code>DateFormatUtils</code>å·¥å…·ç±»ï¼Œæ¥å¤„ç†æ—¶é—´æ—¥æœŸè½¬æ¢é—®é¢˜ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘æ ¹æ®ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼Œä»¥ä¸‹å“ªäº›å­—æ®µå±äºè¡¨çš„å¿…å¤‡å­—æ®µï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>id</code></li><li><input checked="" disabled="" type="checkbox"> B.<code>gmt_modified</code></li><li><input disabled="" type="checkbox"> C.<code>parent_id</code></li><li><input checked="" disabled="" type="checkbox"> D.<code>gmt_create</code></li></ul></li><li><p>ã€å¤šé€‰ã€‘ä¸‹é¢çš„ä¾‹å­ä»£ç å’Œæè¿°ï¼Œå“ªäº›æ˜¯æœ‰ä¸æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å•è¡Œå­—ç¬¦æ•°é™åˆ¶ä¸è¶…è¿‡140ä¸ªï¼Œè¶…å‡ºéœ€è¦æ¢è¡Œ</li><li><input disabled="" type="checkbox"> B.IDEçš„<code>text file encoding</code>è®¾ç½®ä¸º<code>GBK</code>ï¼›IDEä¸­æ–‡ä»¶çš„æ¢è¡Œç¬¦ä½¿ç”¨Unixæ ¼å¼ï¼Œä¸è¦ä½¿ç”¨windowsæ ¼å¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¤§æ‹¬å·ä¸<code>if</code>ï¼Œ<code>else</code>ï¼Œ<code>for</code>ï¼Œ<code>do</code>ï¼Œ<code>while</code>è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œå³ä½¿åªæœ‰ä¸€æ¡è¯­å¥ï¼ˆæˆ–æ˜¯ç©ºï¼‰ï¼Œä¹Ÿåº”è¯¥æŠŠå¤§æ‹¬å·å†™ä¸Šã€‚ </li><li><input checked="" disabled="" type="checkbox"> D.å¤§æ‹¬å·çš„ä½¿ç”¨çº¦å®šã€‚å¦‚æœæ˜¯å¤§æ‹¬å·å†…ä¸ºç©ºï¼Œåˆ™ç®€æ´åœ°å†™æˆå³å¯ï¼Œä¸éœ€è¦æ¢è¡Œï¼›</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºåˆ†é¡µæŸ¥è¯¢ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.åˆ†é¡µæŸ¥è¯¢ï¼Œå½“ç»Ÿè®¡çš„countä¸º0æ—¶ï¼Œåº”è¯¥ç›´æ¥è¿”å›ï¼Œä¸è¦å†æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢è¯­å¥ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.iBATISè‡ªå¸¦çš„<code>queryForList(String statementNameï¼Œint startï¼Œint size)</code>åˆ†é¡µæ¥å£æœ‰æ€§èƒ½éšæ‚£ï¼Œä¸å…è®¸ä½¿ç”¨ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å®šä¹‰æ˜ç¡®çš„SQLæŸ¥è¯¢è¯­å¥ï¼Œé€šè¿‡ä¼ å…¥å‚æ•°<code>start</code>å’Œ<code>size</code>æ¥å®ç°åˆ†é¡µé€»è¾‘ã€‚</li><li><input disabled="" type="checkbox"> D.å¯ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹å†™åˆ†é¡µé€»è¾‘ï¼Œæé«˜æ•ˆç‡ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç±»å’Œæ–¹æ³•ï¼Œä¸‹åˆ—å“ªäº›ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.ä»»ä½•ç±»ã€æ–¹æ³•ã€ä¸¥æ§è®¿é—®èŒƒå›´ã€‚å› ä¸ºè¿‡å®½æ³›çš„è®¿é—®èŒƒå›´ï¼Œä¸åˆ©äºæ¨¡å—è§£è€¦ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¯¹å¤–æš´éœ²çš„æ¥å›—ç­¾åï¼ŒåŸåˆ™ä¸Šä¸å…è®¸ä¿®æ”¹ï¼Œå®å¯æ–°å¢ï¼Œé¿å…å¯¹ä¾èµ–ç«¯äº§ç”Ÿå½±å“ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¦‚æœæ–°å¢ä¸€ä¸ªåŠŸèƒ½å®Œå…¨ç›¸åŒçš„æ–°æ¥å£ï¼Œè¿‡æ—¶æ¥å£å¿…é¡»åŠ <code>@deprecated</code>æ³¨é‡Šã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ‰€æœ‰è¿‡æ—¶çš„ç±»ä¸æ–¹æ³•ä¸å¾—ä½¿ç”¨ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå»ºè¡¨è§„çº¦ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.å­—æ®µä¸ºéè´Ÿæ•°ï¼Œå¿…é¡»å®šä¹‰ä¸º<code>unsigned</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å­˜å‚¨çš„å­—ç¬¦æ•°å‡ ä¹å®Œå…¨ç›¸ç­‰çš„å­—æ®µï¼Œæ¨èå®šä¹‰ä¸ºcharç±»å‹å­˜å‚¨ã€‚</li><li><input disabled="" type="checkbox"> C.varcharä¼šé¢„å…ˆåˆ†é…å­˜å‚¨ç©ºé—´ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ä¸å¾—ä½¿ç”¨çº§è”ä¸å¤–é”®ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå¸¸é‡çš„å‘½åï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å¸¸é‡å‘½ååº”è¯¥å…¨éƒ¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¸¸é‡çš„å®šä¹‰è¦åŠ›æ±‚è¯­ä¹‰è¡¨è¾¾å®Œæ•´æ¸…æ¥šï¼Œè®©åˆ«äººèƒ½ä»å¸¸é‡åç§°ä¸Šå¤§è‡´äº†è§£å«ä¹‰ï¼Œä¾‹å¦‚ï¼š<code>MAX STOCK_COUNT</code>ã€‚</li><li><input disabled="" type="checkbox"> C.å¸¸é‡å‘½åï¼Œå¯ä»¥ä½¿ç”¨æ‹¼éŸ³ä¸è‹±æ–‡çš„æ··åˆæ–¹å¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.åœ¨ä½¿ç”¨ç¼©å†™æ—¶è¦æ³¨æ„ï¼šæœç»ä¸è§„èŒƒçš„ç¼©å†™ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºä»£ç ä¹¦å†™æ ¼å¼ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.æ¢è¡Œæ—¶ç›¸å¯¹ä¸Šä¸€è¡Œç¼©è¿›2ä¸ªç©ºæ ¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.è¿ç®—ç¬¦ä¸ä¸‹æ–‡ä¸€èµ·æ¢è¡Œï¼Œæ–¹æ³•è°ƒç”¨çš„ç‚¹ç¬¦å·ä¸ä¸‹æ–‡ä¸€èµ·æ¢è¡Œã€‚</li><li><input checked="" disabled="" type="checkbox"> C.åœ¨å¤šä¸ªå‚æ•°è¶…é•¿ï¼Œé€—å·åè¿›è¡Œæ¢è¡Œã€‚</li><li><input checked="" disabled="" type="checkbox"> D.åœ¨æ‹¬å·å‰ä¸è¦æ¢è¡Œã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘<code>List</code>å­ç±»ä½¿ç”¨<code>toArray</code>æ–¹æ³•å®ç°é›†åˆå‘æ•°ç»„è½¬æ¢ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.<code>Vector</code>æ— æ³•ä½¿ç”¨<code>toArray</code>è½¬æ¢æˆæ•°ç»„ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ä¼˜å…ˆæ¨èï¼šè°ƒç”¨é›†åˆç±»çš„æ–¹æ³•<code>toArray(T[] a)</code>ï¼Œä¼ å…¥çš„æ˜¯ç±»å‹å®Œå…¨ä¸€æ ·çš„æ•°ç»„ï¼Œå¤§å°å°±æ˜¯é›†åˆçš„<code>size()</code>ã€‚</li><li><input disabled="" type="checkbox"> C.é›†åˆçš„ä¿®æ”¹ï¼Œä¼šå½±å“åˆ°æ•°ç»„å…ƒç´ çš„æ”¹å˜ã€‚</li><li><input disabled="" type="checkbox"> D.æ•°ç»„çš„ä¿®æ”¹ï¼Œä¼šå½±å“åˆ°é›†åˆå…ƒç´ çš„æ”¹å˜ã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘å…³äºç±»çš„åºåˆ—åŒ–ï¼Œä¸‹åˆ—è¯´æ³•å“ªäº›æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.ç±»çš„åºåˆ—åŒ–ä¸<code>serialVersionUID</code>æ¯«æ— å…³ç³»ã€‚</li><li><input disabled="" type="checkbox"> B.å¦‚æœå®Œå…¨ä¸å…¼å®¹å‡çº§ï¼Œä¸éœ€è¦ä¿®æ”¹<code>serialVersionUID</code>å€¼ã€‚</li><li><input disabled="" type="checkbox"> C.<code>POJO</code>ç±»çš„<code>seriaVersionUID</code>ä¸ä¸€è‡´ä¼šç¼–è¯‘å‡ºé”™ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.<code>POJO</code>ç±»çš„<code>serialVersionUID</code>ä¸ä¸€è‡´ä¼šæŠ›å‡ºåºåˆ—åŒ–è¿è¡Œæ—¶å¼‚å¸¸ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äº<code>hashcode</code>å’Œ<code>equals</code>ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.<code>hashcode</code>æ˜¯<code>Class</code>çš„æ–¹æ³•ï¼Œ<code>equals</code>æ˜¯<code>Object</code>çš„æ–¹æ³•ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>hashcode</code>å†³å®šï¼ˆå¦‚ï¼š<code>HashMap</code>ï¼‰å­˜å‚¨ä½ç½®ï¼›<code>equals</code>å†³å®šæ˜¯å¦éœ€è¦è¦†ç›–ï¼ˆåŒä¸€<code>hash</code>ä¸‹ï¼‰é›†åˆå…ƒç´ ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ç±»é‡å†™<code>hashcode</code>ï¼Œå¿…é¡»é‡å†™<code>equals</code>ã€‚</li><li><input disabled="" type="checkbox"> D.ä¸¤è€…æ˜¯å¦éœ€è¦é‡å†™ï¼Œæ²¡æœ‰å¿…ç„¶è”ç³»ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºäºŒæ–¹åº“ç‰ˆæœ¬å·çš„å‘½åæ–¹å¼ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.ç‰ˆæœ¬å·å‘½åæ ¼å¼ï¼š<code>ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ä¸»ç‰ˆæœ¬å·ï¼šäº§å“æ–¹å‘æ”¹å˜ï¼Œæˆ–è€…å¤§è§„æ¨¡APIä¸å…¼å®¹ï¼Œæˆ–è€…æ¶æ„ä¸å…¼å®¹å‡çº§ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æ¬¡ç‰ˆæœ¬å·ï¼šä¿æŒç›¸å¯¹å…¼å®¹æ€§ï¼Œå¢åŠ ä¸»è¦åŠŸèƒ½ç‰¹æ€§ï¼Œå½±å“èŒƒå›´æå°çš„APIä¸å…¼å®¹ä¿®æ”¹ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ä¿®è®¢å·ï¼šä¿æŒå®Œå…¨å…¼å®¹æ€§ï¼Œä¿®å¤BUGã€æ–°å¢æ¬¡è¦åŠŸèƒ½ç‰¹æ€§ç­‰ã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘<code>sort</code>è¡¨ç¤ºå…ƒç´ åœ¨å­˜å…¥é›†åˆæ—¶è¿›è¡Œäº†æ’åºï¼Œæ•°æ®éå†çš„ç»“æœæ˜¯æŒ‰æŸä¸ªæ’åºè§„åˆ™è¾“å‡ºçš„ï¼›è€Œ<code>order</code>è¡¨ç¤ºæ¯æ¬¡éå†çš„åºåˆ—éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå…ƒç´ å‰åå…³ç³»æ¯æ¬¡éå†éƒ½æ˜¯ç¡®å®šçš„ï¼Œé‚£ä¹ˆä¸‹åˆ—å“ªäº›é›†åˆæ—¢æ˜¯<code>sort</code>ï¼Œåˆæ˜¯<code>order</code>çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.<code>HashSet</code></li><li><input disabled="" type="checkbox"> B.<code>LinkedList</code></li><li><input disabled="" type="checkbox"> C.<code>HashMap</code></li><li><input checked="" disabled="" type="checkbox"> D.<code>Treset</code></li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå¸¸é‡å®šä¹‰ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.è·¨åº”ç”¨å…±äº«å¸¸é‡ï¼šæ”¾ç½®åœ¨äºŒæ–¹åº“ä¸­ï¼Œé€šå¸¸æ˜¯<code>client.jar</code>ä¸­çš„<code>const</code>ç›®å½•ä¸‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åº”ç”¨å†…å…±äº«å¸¸é‡ï¼šé€šå¸¸æ”¾ç½®åœ¨ä¸€æ–¹åº“çš„<code>modules</code>ä¸­çš„<code>const</code>ç›®å½•ä¸‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å­å·¥ç¨‹å†…éƒ¨å…±äº«å¸¸é‡ï¼šå³åœ¨å½“å‰å­å·¥ç¨‹çš„<code>const</code>ç›®å½•ä¸‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ç±»å†…å¸¸é‡ï¼šç›´æ¥åœ¨ç±»å†…éƒ¨<code>private static final</code>å®šä¹‰ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ³¨é‡Šï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.æ–¹æ³•å¤´å®šä¹‰ç­¾åä¸Šçš„æ³¨é‡Šå¯ä»¥ä½¿ç”¨<code>//</code>ï¼ˆåŒåˆ’çº¿ï¼‰ç®€å•è¯´æ˜ï¼Œä¸å¿…è¦éµå®ˆjavadocè§„èŒƒã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ç±»å®šä¹‰å¼€å§‹éƒ¨åˆ†ï¼Œä¸€èˆ¬éƒ½ç”¨javadocæ³¨é‡Šç¨‹åºçš„æ€»ä½“æè¿°ä»¥åŠä½œè€…ä¿¡æ¯ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æ–¹æ³•å¤´å®šä¹‰ç­¾åä¸Šçš„æ³¨é‡Šå¿…é¡»éµå®ˆjavadocè§„èŒƒï¼Œä½¿ç”¨<code>/**</code>å›è½¦æ¥ç”Ÿæˆï¼Œä¸å¾—åœ¨æ–¹æ³•å®šä¹‰ä¸Šæ–¹ä½¿ç”¨<code>//</code>ï¼ˆåŒåˆ’çº¿ï¼‰ç®€å•è¯´æ˜ã€‚</li><li><input disabled="" type="checkbox"> D.æ–¹æ³•å¤´å®šä¹‰ç­¾åä¸Šçš„æ³¨é‡Šï¼Œå¯ä»¥ä½¿ç”¨<code>// XXX</code>çš„å½¢å¼</li></ul></li><li><p>é’ˆå¯¹tcpåè®®ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.tcpé“¾æ¥ä¸»åŠ¨å…³é—­çš„ä¸€æ–¹ï¼Œåœ¨å®Œæˆå››æ¬¡æŒ¥æ‰‹åè®®åï¼Œå³ä¼šç«‹å³å…³é—­å¹¶é‡Šæ”¾socketã€‚</li><li><input disabled="" type="checkbox"> B.å¤„äºtime_waitçŠ¶æ€çš„socketï¼Œå…¶å®æ˜¯å·²ç»å…³é—­çŠ¶æ€ï¼Œå½“éœ€è¦æ–°å»ºè¿æ¥æ—¶ï¼Œå¯ä»¥è¢«é©¬ä¸Šå¤ç”¨ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å½“å¤§é‡socketå¤„äºtime_waitçŠ¶æ€æ—¶ï¼Œä¼šå¯¼è‡´å¯ç”¨socketèµ„æºç¨€ç¼ºï¼Œä»è€Œå¯¼è‡´æœåŠ¡å™¨å¹¶å‘èƒ½åŠ›ä¸‹é™ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.é€šè¿‡ä¿®æ”¹<code>etc/sysctl.conf</code>é…ç½®æ–‡ä»¶ï¼Œå‡å°time_waitçš„è¶…æ—¶æ—¶é—´ï¼Œå¯ä»¥é™ä½time_waitçŠ¶æ€çš„socketæ•°é‡ï¼Œä»è€Œæå‡æœåŠ¡å™¨å¹¶å‘èƒ½åŠ›ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ§åˆ¶è¯­å¥ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ¨èif-elseçš„æ–¹å¼å¯ä»¥æ”¹å†™æˆå«è¯­å¥çš„å½¢å¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å°½é‡å‡å°‘try-catchå—å†…çš„é€»è¾‘ï¼Œå®šä¹‰å¯¹è±¡ã€å˜é‡ã€è·å–æ•°æ®åº“è¿æ¥ç­‰æ“ä½œå¯ä»¥ç§»åˆ°try-catchå—å¤–å¤„ç†</li><li><input disabled="" type="checkbox"> C.<code>if(condition) statements;</code>å•è¡Œè¯­å¥ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.åœ¨ä¸€ä¸ªswitchå—å†…ï¼Œéƒ½å¿…é¡»åŒ…å«ä¸€ä¸ªdefaultè¯­å¥å¹¶ä¸”æ”¾åœ¨æœ€åï¼Œå³ä½¿å®ƒä»€ä¹ˆä»£ç ä¹Ÿæ²¡æœ‰ã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘å…³äºMapç±»å‹é›†åˆçš„éå†æ–¹å¼ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.Mapç±»å‹çš„å®ç°ç±»éƒ½åŒæ—¶å®ç°äº†lteratoræ¥å£ã€‚</li><li><input disabled="" type="checkbox"> B.ä½¿ç”¨foreachè¿›è¡Œéå†ã€‚</li><li><input disabled="" type="checkbox"> C.æ¨èä½¿ç”¨keySetè¿›è¡Œéå†ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ¨èä½¿ç”¨entrySetè¿›è¡Œéå†ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ•°æ®åº“å‘½åè§„åˆ™ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.æ•°æ®åº“åº“åå’Œè¡¨åæ²¡æœ‰è§„å®šï¼Œå¯ä»»æ„å–åï¼Œåªè¦æ–¹ä¾¿è®°å¿†å³å¯ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.åº“ååº”è¯¥å°½é‡ä¸åº”ç”¨åç§°ä¿æŒä¸€è‡´ï¼Œè¡¨çš„å‘½åæœ€å¥½æ˜¯<code>ä¸šåŠ¡åç§°_è¡¨å</code>çš„æ–¹å¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æ— è®ºæ˜¯åº“åè¿˜æ˜¯è¡¨åéƒ½ç¦ç”¨ä¿ç•™å­—ï¼Œå¦‚descã€matchã€rangeç­‰ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.è¡¨åã€å­—æ®µåå¿…é¡»ä½¿ç”¨å°å†™å­—æ¯æˆ–æ•°å­—ã€‚</li></ul></li><li><p>ã€å•é€‰ã€‘å•å…ƒæµ‹è¯•ä»£ç å†™åœ¨Javaå·¥ç¨‹çš„å“ªä¸ªåœ°æ–¹æœ€ä¸ºåˆé€‚ï¼Ÿ</p><ul><li><input disabled="" type="checkbox"> A.å†™åœ¨ä¸šåŠ¡ä»£ç ä½“é‡Œè¾¹ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</li><li><input disabled="" type="checkbox"> B.å†™åœ¨ä¸šåŠ¡ä»£ç åŒä¸€ä¸ªåŒ…ä¸‹ï¼Œæ–¹ä¾¿å½’ç±»æŸ¥æ‰¾ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å†™åœ¨<code>src/test/java</code>ç›®å½•ä¸‹ã€‚</li><li><input disabled="" type="checkbox"> D.å†™åœ¨<code>src/java</code>ç›®å½•ä¸‹ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºåŠ é”ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å¯ä»¥åªé”ä»£ç åŒºå—çš„æƒ…å†µä¸‹ï¼Œå°±ä¸è¦é”æ•´ä¸ªæ–¹æ³•ä½“ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.é«˜å¹¶å‘çš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œè¦è€ƒè™‘åŠ é”åŠåŒæ­¥å¤„ç†å¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œèƒ½ç”¨æ— é”æ•°æ®ç»“æ„ï¼Œå°±ä¸è¦ç”¨é”ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.èƒ½ç”¨å¯¹è±¡é”çš„æƒ…å†µä¸‹ï¼Œå°±ä¸è¦ç”¨ç±»é”ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.åŠ é”æ—¶éœ€è¦ä¿æŒä¸€è‡´çš„åŠ é”é¡ºåºï¼Œå¦åˆ™å¯èƒ½ä¼šé€ æˆæ­»é”ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘åˆ©ç”¨ç´¢å¼•è¿›è¡Œæ’åºï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æŸ¥è¯¢è¯­å¥<code>WHERE a = 10 ORDER BY b</code>ï¼Œå¯ä»¥åˆ©ç”¨ç´¢å¼•(a, b)æ¥è¿›è¡Œç´¢å¼•æ’åºã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æŸ¥è¯¢è¯­å¥<code>WHERE a &gt; 10 ORDER BY b</code>ï¼Œä¸å¯ä»¥åˆ©ç”¨ç´¢å¼•(a, b)æ¥è¿›è¡Œç´¢å¼•æ’åºã€‚</li><li><input disabled="" type="checkbox"> C.æŸ¥è¯¢è¯­å¥<code>WHERE a lNï¼ˆ10, 11ï¼‰ORDER BY b</code>ï¼Œå¯ä»¥åˆ©ç”¨ç´¢å¼•(a, b)æ¥è¿›è¡Œç´¢å¼•æ’åºã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æŸ¥è¯¢è¯­å¥<code>WHERE a &gt; 10 AND b = 20 ORDER BY a</code>ï¼Œå¯ä»¥åˆ©ç”¨ç´¢å¼•(b, a)æ¥è¿›è¡Œç´¢å¼•æ’åºã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å¦‚ä½•å¤„ç†å•å…ƒæµ‹è¯•äº§ç”Ÿçš„æ•°æ®ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼Ÿ</p><ul><li><input checked="" disabled="" type="checkbox"> A.æµ‹è¯•æ•°æ®å…¥åº“æ—¶åŠ ç‰¹æ®Šå‰ç¼€æ ‡è¯†ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æµ‹è¯•æ•°æ®ä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•åº“ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.è‡ªåŠ¨å›æ»šå•å…ƒæµ‹è¯•äº§ç”Ÿçš„è„æ•°æ®ã€‚</li><li><input disabled="" type="checkbox"> D.æ— é¡»åŒºåˆ«ï¼Œç»Ÿä¸€åœ¨ä¸šåŠ¡ä»£ç ä¸­è¿›è¡Œåˆ¤æ–­å’Œè¯†åˆ«ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºJavaä»£ç çš„è®¾è®¡å’Œå¼€å‘æ³¨æ„äº‹é¡¹ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ‰€æœ‰çš„è¦†å†™æ–¹æ³•ï¼Œå¿…é¡»æ˜¯å¼ºåˆ¶åŠ <code>@Override</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.setteræ–¹æ³•ä¸­ï¼Œå‚æ•°åç§°ä¸ç±»æˆå‘˜å˜é‡åç§°ä¸€è‡´ï¼Œ<code>this.æˆå‘˜å = å‚æ•°å</code>ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.åœ¨getteræ–¹æ³•ä¸­ï¼Œå°½é‡ä¸è¦å¢åŠ é€»è¾‘åˆ¤æ–­ï¼Œå› ä¸ºæ·»åŠ äº†é€»è¾‘åˆ¤æ–­åï¼Œä¼šå¢åŠ æ’æŸ¥é—®é¢˜éš¾åº¦ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.é¿å…ç”¨<code>BeanUtil</code>è¿›è¡Œå±æ€§çš„copyã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºçº¿ç¨‹æ± çš„åˆ›å»ºï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´/avaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨<code>Executors</code>å»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡<code>ThreadPoolExecutor</code>çš„æ–¹å¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.<code>newFixedThreadPool</code>å’Œ<code>newSingleThreadExecutor</code>çš„ä¸»è¦é—®é¢˜æ˜¯å †ç§¯çš„è¯·æ±‚å¤„ç†é˜Ÿåˆ—å¯èƒ½ä¼šè€—è´¹éå¸¸å¤§çš„å†…å­˜ï¼Œç”šè‡³OOMã€‚</li><li><input checked="" disabled="" type="checkbox"> C.<code>newCachedThreadPool</code>å’Œ<code>newScheduledThreadPool</code>çš„ä¸»è¦é—®é¢˜æ˜¯çº¿ç¨‹æ•°æœ€å¤§æ•°æ˜¯<code>Integer.MAX_VALUE</code>ï¼Œå¯èƒ½ä¼šåˆ›å»ºæ•°é‡éå¸¸å¤šçš„çº¿ç¨‹ï¼Œç”šè‡³OOMã€‚</li><li><input disabled="" type="checkbox"> D.æˆ‘ä»¬çš„æœºå™¨è¿ç®—é€Ÿåº¦å¤Ÿå¿«ï¼Œæ‰€ä»¥çº¿ç¨‹æ± çš„åˆ›å¥å¹¶ä¸éœ€è¦ç‰¹åˆ«çš„çº¦å®šã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘ä½¿ç”¨<code>CountDownLatch</code>è¿›è¡Œå¼‚æ­¥è½¬åŒæ­¥æ“ä½œæ—¶ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ¯ä¸ªçº¿ç¨‹é€€å‡ºå‰å¿…é¡»è°ƒç”¨<code>countDown()</code>æ–¹æ³•ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.çº¿ç¨‹æ‰§è¡Œä»£ç æ³¨æ„catchå¼‚å¸¸ï¼Œç¡®ä¿<code>countDowm()</code>æ–¹æ³•å¯ä»¥è¢«æ‰§è¡Œã€‚</li><li><input disabled="" type="checkbox"> C.å­çº¿ç¨‹æŠ›å‡ºå¼‚å¸¸å †é’±ï¼Œç›´æ¥å°±å¯ä»¥åœ¨ä¸»çº¿ç¨‹catchåˆ°ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ä¸»çº¿ç¨‹å¿…é¡»åœ¨å¯åŠ¨å…¶ä»–çº¿ç¨‹åè°ƒç”¨<code>await()</code>æ–¹æ³•ï¼Œè¿™æ ·ä¸»çº¿ç¨‹çš„æ“ä½œå°±ä¼šåœ¨è¿™ä¸ªæ–¹æ³•ä¸Šé˜»å¡ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹å®Œæˆå„è‡ªçš„ä»»åŠ¡ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç´¢å¼•çš„ä½¿ç”¨ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input disabled="" type="checkbox"> A.æŸ¥è¯¢è¯­å¥<code>WHERE a+1 = 5</code>å¯ä»¥åˆ©ç”¨aç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æŸ¥è¯¢è¯­å¥<code>WHERE date_format(gmt_create, &#39;%Y-%m-%d&#39;) = &#39;2016-11-11&#39;</code>æ— æ³•åˆ©ç”¨gmt_createç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å½“cåˆ—ç±»å‹ä¸ºcharæ—¶ï¼ŒæŸ¥è¯¢è¯­å¥<code>WHERE c = 5</code>æ— æ³•åˆ©ç”¨cç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ç´¢å¼•å­—æ®µä½¿ç”¨æ—¶ä¸èƒ½è¿›è¡Œå‡½æ•°è¿ç®—ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºä»£ç æ³¨é‡Šï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼ˆåŒ…æ‹¬æ¥å£ä¸­çš„æ–¹æ³•ï¼‰å¿…é¡»è¦ç”¨javadocæ³¨é‡Šã€‚</li><li><input disabled="" type="checkbox"> B.æ‰€æœ‰çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰æ–¹æ³•ï¼Œæœ€å¥½éƒ½å¢åŠ æ³¨é‡Šï¼Œæœ‰æ€»æ¯”æ²¡æœ‰å¼ºã€‚</li><li><input checked="" disabled="" type="checkbox"> C.è¿‡å¤šè¿‡æ»¥çš„æ³¨é‡Šï¼Œä»£ç çš„é€»è¾‘ä¸€æ—¦ä¿®æ”¹ï¼Œä¿®æ”¹æ³¨é‡Šæ˜¯ç›¸å½“å¤§çš„è´Ÿæ‹…ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æˆ‘çš„å‘½åå’Œä»£ç ç»“æ„éå¸¸å¥½ï¼Œå¯ä»¥å‡å°‘æ³¨é‡Šçš„å†…å®¹ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºæ—¥å¿—çš„æ¡ä»¶è¾“å‡ºå’Œå ä½ç¬¦çš„æ–¹å¼ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å¯¹trace/debug/infoçº§åˆ«çš„æ—¥å¿—è¾“å‡ºï¼Œå¿…é¡»ä½¿ç”¨æ¡ä»¶è¾“å‡ºå½¢å¼æˆ–è€…ä½¿ç”¨å ä½ç¬¦çš„æ–¹å¼ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.æ¡ä»¶è¾“å‡ºæ–¹å¼å¯ä»¥é¿å…logå‚æ•°ä¸­å­—ç¬¦ä¸²æ‹¼æ¥çš„å¼€é”€ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å ä½ç¬¦è¾“å‡ºæ ¼å¼å¯ä»¥å’Œæ¡ä»¶è¾“å‡ºä¸€æ ·é¿å…å‚æ•°ä¸­å­—ç¬¦ä¸²æ‹¼æ¥å¼€é”€ã€‚</li><li><input disabled="" type="checkbox"> D.å› ä¸ºè®¾ç½®äº†æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œæ‰€ä»¥æ— éœ€ä½¿ç”¨æ¡ä»¶è¾“å‡ºæ–¹å¼ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºäºŒæ–¹åº“ä½¿ç”¨æšä¸¾ç±»å‹ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.äºŒæ–¹åº“é‡Œå¯ä»¥å®šä¹‰æšä¸¾ç±»å‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.äºŒæ–¹åº“é‡Œæ¥å£çš„å…¥å‚å¯ä»¥ä½¿ç”¨æšä¸¾ç±»å‹ã€‚</li><li><input disabled="" type="checkbox"> C.äºŒæ–¹åº“é‡Œæ¥å£çš„è¿”å›å€¼ä¸èƒ½ä½¿ç”¨æšä¸¾ç±»å‹ï¼Œä½†å¯ä»¥åŒ…å«æšä¸¾ç±»å‹ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.äºŒæ–¹åº“é‡Œæ¥å£çš„è¿”å›å€¼æ˜¯æšä¸¾ç±»å‹æˆ–åŒ…å«æšä¸¾ç±»å‹æ—¶ï¼Œå½“äºŒæ–¹åº“çš„æšä¸¾å€¼å‡çº§ï¼ˆå¢åŠ æšä¸¾å€¼ï¼‰æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¥å£è°ƒç”¨æ—¶å‡ºç°æšä¸¾å¯¹è±¡åºåˆ—åŒ–å¼‚å¸¸ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç»„åˆç´¢å¼•ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æŸ¥è¯¢æ¡ä»¶<code>where a=&#39;0&#39; and b=&#39;1&#39;</code>ï¼Œå½“ç»„åˆç´¢å¼•ä¸º(b, a)çš„æ—¶å€™èƒ½è¿›è¡Œç´¢å¼•æ‰«æã€‚</li><li><input disabled="" type="checkbox"> B.æŸ¥è¯¢æ¡ä»¶<code>where a=&#39;0&#39; and b=&#39;1&#39;</code>ï¼Œå½“ç»„åˆç´¢å¼•ä¸º(c, a, b)çš„æ—¶å€™èƒ½è¿›è¡Œç´¢å¼•æ‰«æã€‚</li><li><input checked="" disabled="" type="checkbox"> C.æŸ¥è¯¢<code>select b from table where a=&#39;0&#39;</code>ï¼Œå½“ç»„åˆç´¢å¼•ä¸º(a, b)çš„æ—¶å€™ä¼šè¿›è¡Œç´¢å¼•æ‰«æã€‚</li><li><input disabled="" type="checkbox"> D.æŸ¥è¯¢æ¡ä»¶<code>where a&gt;0 order by b</code>ï¼Œå½“ç»„åˆç´¢å¼•ä¸º(a, b)æ—¶ä¼šåˆ©ç”¨ç´¢å¼•è¿›è¡Œæ’åºã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç³»ç»Ÿå®‰å…¨ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input disabled="" type="checkbox"> A.è¡¨å•ã€AJAXæäº¤ä¸éœ€è¦è¿›è¡ŒCSRFå®‰å…¨è¿‡æ»¤ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.è¡¨å•ã€AJAXæäº¤å¿…é¡»æ‰§è¡ŒCSRFå®‰å…¨è¿‡æ»¤ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.URLå¤–éƒ¨é‡å®šå‘ä¼ å…¥çš„ç›®æ ‡åœ°å€å¿…é¡»æ‰§è¡Œç™½åå•è¿‡æ»¤ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ç”¨æˆ·è¾“å…¥çš„SQLå‚æ•°ä¸¥æ ¼ä½¿ç”¨å‚æ•°ç»‘å®šæˆ–è€…METADATAå­—æ®µå€¼é™å®šï¼Œé˜²æ­¢SQLæ³¨å…¥ï¼Œç¦æ­¢å­—ç¬¦ä¸²æ‹¼æ¥SQLè®¿é—®æ•°æ®åº“ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘æ ¹æ®ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼Œä»¥ä¸‹åŠŸèƒ½å¿…é¡»è¿›è¡Œæ°´å¹³æƒé™æ§åˆ¶æ ¡éªŒçš„æœ‰ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.è®¢å•è¯¦æƒ…é¡µé¢ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.ç±»ç›®ç®¡ç†åå°ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.åº—é“ºè£…ä¿®åå°ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.è®¢å•ä»˜æ¬¾é¡µé¢ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºORMçš„è§„åˆ™ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.æ•°æ®åº“ä¸­ï¼Œè¡¨è¾¾æ˜¯ä¸å¦æ¦‚å¿µçš„å­—æ®µï¼Œå¿…é¡»ä½¿ç”¨<code>is_xxx</code>çš„æ–¹å¼å‘½åã€‚</li><li><input disabled="" type="checkbox"> B.æ¨èä½¿ç”¨iBATISè‡ªå¸¦çš„<code>queryForList(String statementName, int start, int size)</code>è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ã€‚</li><li><input disabled="" type="checkbox"> C.ä¸ºé¿å…å†™resultMapï¼Œå¯ä»¥ç›´æ¥æ‹¿HashMapä¸HashTableä½œä¸ºæŸ¥è¯¢ç»“æœé›†çš„è¾“å‡ºã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ä¸è¦ç”¨resultClasså½“è¿”å›å‚æ•°ï¼Œå³ä½¿æ‰€æœ‰ç±»å±æ€§åä¸æ•°æ®åº“å­—æ®µä¸€ä¸€å¯¹åº”ï¼Œä¹Ÿéœ€è¦å®šä¹‰ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘ä»¥ä¸‹å…³äºæ ¼å¼è§„çº¦çš„è¯´æ³•ï¼Œæ­£ç¡®çš„æœ‰å“ªäº›ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.ä»£ç å—ç¼©è¿›4ä¸ªç©ºæ ¼ï¼Œå¦‚æœä½¿ç”¨tabç¼©è¿›ï¼Œè¯·è®¾ç½®æˆ1ä¸ªtabä¸º4ä¸ªç©ºæ ¼ï¼›</li><li><input disabled="" type="checkbox"> B.ä»£ç å—ç¼©è¿›5ä¸ªç©ºæ ¼ï¼Œå¦‚æœä½¿ç”¨tabç¼©è¿›ï¼Œè¯·è®¾ç½®æˆ1ä¸ªtabä¸º5ä¸ªç©ºæ ¼ã€‚</li><li><input disabled="" type="checkbox"> C.ä¸ºäº†ä¿ç‰¹ä»£ç ç¾è§‚ï¼Œã€Šæ‰‹å†Œã€‹å¼ºçƒˆæ¨èå¢åŠ è‹¥å¹²ç©ºæ ¼ï¼Œä½¿æŸä¸€è¡Œçš„å˜é‡ä¸ç›¸é‚»å¯¹åº”ä½ç½®çš„å˜é‡å¯¹é½ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ–¹æ³•ä½“å†…çš„æ‰§è¡Œè¯­å¥ç»„ã€å˜é‡çš„å®šä¹‰è¯­å¥ç»„ã€ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ä¹‹é—´æˆ–è€…ä¸åŒçš„è¯­ä¹‰ä¹‹é—´æ¨èæ’å…¥ä¸€ä¸ªç©ºè¡Œï¼›ç›¸åŒä¸šåŠ¡é€»è¾‘å’Œè¯­ä¹‰ä¹‹é—´ä¸éœ€è¦æ’å…¥ç©ºè¡Œã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘ä»¥ä¸‹å…³äºæ ¼å¼è§„çº¦çš„è¯´æ³•ï¼Œæ­£ç¡®çš„æœ‰å“ªäº›ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å·¦æ‹¬å·å’Œåä¸€ä¸ªå­—ç¬¦ä¹‹é—´ä¸å‡ºç°ç©ºæ ¼ï¼›åŒæ ·ï¼Œå³æ‹¬å·å’Œå‰ä¸€ä¸ªå­—ç¬¦ä¹‹é—´ä¹Ÿä¸å‡ºç°ç©ºæ ¼ï¼Œä¾‹1ï¼š<code>if(f1ag == 1) {System.out.println(&quot;world&quot;);}</code></li><li><input checked="" disabled="" type="checkbox"> B.if / for / while / switch / doç­‰ä¿ç•™å­—ä¸å·¦å³æ‹¬å·ä¹‹é—´éƒ½å¿…é¡»åŠ ç©ºæ ¼ï¼›</li><li><input disabled="" type="checkbox"> C.whileè¿™ä¸ªä¿ç•™å­—æ¯”è¾ƒç‰¹æ®Šï¼Œä½¿ç”¨æ—¶å·¦å³æ‹¬å·ä¹‹é—´å¯ä»¥ä¸ç”¨åŠ ç©ºæ ¼ï¼Œä¾‹1ï¼š<code>while(true){...}</code></li><li><input checked="" disabled="" type="checkbox"> D.ä»»ä½•è¿ç®—ç¬¦å·¦å³å¿…é¡»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œè¿ç®—ç¬¦åŒ…æ‹¬èµ‹å€¼è¿ç®—ç¬¦=ã€é€»è¾‘è¿ç®—ç¬¦&amp;&amp;ã€åŠ å‡ä¹˜é™¤ç¬¦å·ã€ä¸‰ç›®è¿è¡Œç¬¦ç­‰ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç´¢å¼•çš„è®¾è®¡ï¼Œä¸‹åˆ—å“ªäº›è¯´æ³•ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.å¯¹varcharç±»å‹çš„å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œå¿…é¡»æŒ‡å®šç´¢å¼•é•¿åº¦ã€‚</li><li><input disabled="" type="checkbox"> B.å¯¹varcharç±»å‹çš„å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œä¸éœ€è¦æŒ‡å®šç´¢å¼•é•¿åº¦ï¼Œè¿™æ ·ç´¢å¼•åŒºåˆ†åº¦æœ€å¥½ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.ä¸šåŠ¡ä¸Šå…·æœ‰å”¯ä¸€ç‰¹æ€§çš„å­—æ®µï¼ˆå«ç»„åˆå­—æ®µï¼‰ï¼Œå¿…é¡»æŒ‡å®šå”¯ä¸€ç´¢å¼•ã€‚</li><li><input checked="" disabled="" type="checkbox"> D.å»ºå¤åˆç´¢å¼•æ—¶ï¼Œä¸€èˆ¬é€‰æ‹©åŒºåˆ†åº¦é«˜çš„å­—æ®µæ”¾åœ¨æœ€å·¦åˆ—ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºç±»å’Œæ–¹æ³•ï¼Œä¸‹åˆ—å“ªäº›ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.ä»»ä½•ç±»ã€æ–¹æ³•ã€ä¸¥æ§è®¿é—®èŒƒå›´ã€‚å› ä¸ºè¿‡å®½æ³›çš„è®¿é—®èŒƒå›´ï¼Œä¸åˆ©äºæ¨¡å—è§£è€¦ã€‚</li><li><input checked="" disabled="" type="checkbox"> B.å¯¹å¤–æš´éœ²çš„æ¥å£ç­¾åï¼ŒåŸåˆ™ä¸Šä¸å…è®¸ä¿®æ”¹ï¼Œå®å¯æ–°å¢ï¼Œé¿å…å¯¹ä¾èµ–ç«¯äº§ç”Ÿå½±å“ã€‚</li><li><input checked="" disabled="" type="checkbox"> C.å¦‚æœæ–°å¢ä¸€ä¸ªåŠŸèƒ½å®Œå…¨ç›¸åŒçš„æ–°æ¥å£ï¼Œè¿‡æ—¶æ¥å£å¿…é¡»åŠ @deprecatedæ³¨é‡Šã€‚</li><li><input checked="" disabled="" type="checkbox"> D.æ‰€æœ‰è¿‡æ—¶çš„ç±»ä¸æ–¹æ³•ä¸å¾—ä½¿ç”¨ã€‚</li></ul></li><li><p>ã€å¤šé€‰ã€‘å…³äºå˜é‡å’Œå¸¸é‡å®šä¹‰ï¼Œä¸‹åˆ—å“ªäº›ç¬¦åˆã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> A.<code>Long a=2L</code>ï¼›//å¤§å†™çš„L</li><li><input disabled="" type="checkbox"> B.<code>Long a=2l</code>; //å°å†™çš„l</li><li><input disabled="" type="checkbox"> C.å¸¸é‡åªå®šä¹‰ä¸€æ¬¡ï¼Œä¸å†èµ‹å€¼ï¼Œæ‰€ä»¥ä¸éœ€è¦å‘½åè§„èŒƒã€‚</li><li><input checked="" disabled="" type="checkbox"> D.ä¸è¦ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ç±»ç»´æŠ¤æ‰€æœ‰å¸¸é‡ï¼Œåº”è¯¥æŒ‰å¸¸é‡åŠŸèƒ½è¿›è¡Œå½’ç±»ï¼Œåˆ†å¼€ç»´æŠ¤ã€‚</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> p3c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>130-å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå·±çš„æ˜¾å¼é”Lockç²¾è®²ä¸‹ï¼ˆè®©é”å…·å¤‡è¶…æ—¶åŠŸèƒ½ï¼‰</title>
      <link href="/wang-thread/130-custom-lock-timedout/"/>
      <url>/wang-thread/130-custom-lock-timedout/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸Šä¸€èŠ‚ä¸­çš„é—®é¢˜ï¼šè¿è§„éæ³•æ“ä½œï¼Œå¯¼è‡´è¿è¡Œæ··ä¹±ã€‚å·¨å¤§çš„BUG"><a href="#ä¸Šä¸€èŠ‚ä¸­çš„é—®é¢˜ï¼šè¿è§„éæ³•æ“ä½œï¼Œå¯¼è‡´è¿è¡Œæ··ä¹±ã€‚å·¨å¤§çš„BUG" class="headerlink" title="ä¸Šä¸€èŠ‚ä¸­çš„é—®é¢˜ï¼šè¿è§„éæ³•æ“ä½œï¼Œå¯¼è‡´è¿è¡Œæ··ä¹±ã€‚å·¨å¤§çš„BUG"></a>ä¸Šä¸€èŠ‚ä¸­çš„é—®é¢˜ï¼šè¿è§„éæ³•æ“ä½œï¼Œå¯¼è‡´è¿è¡Œæ··ä¹±ã€‚å·¨å¤§çš„BUG</h2><pre><code class="java">public static void main(String[] args) throws InterruptedException {    final BooleanLock booleanLock = new BooleanLock();    new Thread(() -&gt; {        try {            booleanLock.lock();            Optional.of(Thread.currentThread().getName() + &quot; have the lock Monitor.&quot;).ifPresent(System.out::println);            work();        } catch (InterruptedException e) {            e.printStackTrace();        } finally {            booleanLock.unlock();        }      }, &quot;T1&quot;);    // é—®é¢˜ï¼šè¿è§„éæ³•æ“ä½œï¼Œå¯¼è‡´è¿è¡Œæ··ä¹±    Thread.sleep(100);    booleanLock.unlock();}</code></pre><p>é”booleanLockç”±çº¿ç¨‹T1ä¸­åŠ é”<code>lock()</code>ï¼Œå°±åªèƒ½ç”±T1è§£é”<code>unlock()</code>ã€‚</p><p>è§£å†³ï¼š</p><pre><code class="java">private Thread currentThread;@Overridepublic synchronized void lock() throws InterruptedException {    ...    this.currentThread = Thread.currentThread();}@Overridepublic synchronized void unlock() {    // é‡Šæ”¾é”    if (Thread.currentThread() == currentThread) {        ...    }}</code></pre><p>synchronizedæœºåˆ¶å¯¼è‡´çš„ä¸€ä¸ªé—®é¢˜ï¼šsynchronizedä¸èƒ½è¢«æ‰“æ–­ï¼Œå¯¼è‡´å…¶ä»–çº¿ç¨‹æŠ¢ä¸åˆ°é”ã€‚</p><pre><code class="java">public static void main(String[] args) throws InterruptedException {    new Thread(SynchronizedProblem::run, &quot;T1&quot;).start();    Thread.sleep(1000);    Thread t2 = new Thread(SynchronizedProblem::run, &quot;T2&quot;);    t2.start();    Thread.sleep(2000);    t2.interrupt();    System.out.println(t2.isInterrupted());// trueï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä¸­æ–­t2}private synchronized static void run() {    System.out.println(Thread.currentThread().getName());    while (true) { }}</code></pre><p><code>t2.isInterrupted()</code>è¿”å›å€¼ä¸ºtrueï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä¸­æ–­t2ï¼Œæ­¤æ—¶å°±éœ€è¦è®©é”å…·å¤‡è¶…æ—¶åŠŸèƒ½ï¼Œå³<code>void lock(long mills)</code>ï¼Œmillsæ—¶é—´æ‹¿ä¸åˆ°é”å°±ä¼šè¶…æ—¶ï¼ŒåŒæ—¶æŠ›å‡º<code>TimeOutException</code>å¼‚å¸¸ã€‚</p><h2 id="è®©é”å…·å¤‡è¶…æ—¶åŠŸèƒ½"><a href="#è®©é”å…·å¤‡è¶…æ—¶åŠŸèƒ½" class="headerlink" title="è®©é”å…·å¤‡è¶…æ—¶åŠŸèƒ½"></a>è®©é”å…·å¤‡è¶…æ—¶åŠŸèƒ½</h2><p>è°ƒç”¨çš„æ–¹æ³•ä¸€ç›´é˜»å¡ï¼Œä½†æ˜¯è¿˜æœ‰å…¶ä»–å·¥ä½œéœ€è¦æ‰§è¡Œï¼Œæ­¤æ—¶æ”¾å¼ƒè°ƒç”¨æ–¹æ³•éœ€è¦ä½¿ç”¨<code>void lock(long mills)</code>ã€‚ç­‰å¾…é”æŒ‡å®šæ—¶é—´ï¼Œä¸€æ—¦æ—¶é—´è¶…è¿‡å°±æŠ›å‡º<code>TimeOutException</code></p><pre><code class="java">@Overridepublic synchronized void lock(long mills) throws InterruptedException, TimeOutException {    if (mills &lt;= 0) {        lock();    }    long hasRemaining = mills;    long endTime = System.currentTimeMillis() + mills;    while (initValue) {        if (hasRemaining &lt;= 0) {            throw new TimeOutException(&quot;Time Out&quot;);        }        blockedThreadCollection.add(Thread.currentThread());        this.wait(mills);        hasRemaining = endTime - System.currentTimeMillis();    }    this.initValue = true;    this.currentThread = Thread.currentThread();}</code></pre><p><code>void wait()</code>éœ€è¦synchronizedï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ªMonitoré”</p><p>Java5ä¹‹åJUCå¹¶å‘åŒ…æä¾›äº†ç›¸åŒçš„åŠŸèƒ½ã€‚ç”±å¤§ç¥Doug Leaå¼€å‘ï¼Œä½¿Javaæ€§èƒ½æ›´åŠ æ¥è¿‘äºC/C++ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>129-å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå·±çš„æ˜¾å¼é”Lockç²¾è®²ä¸Š</title>
      <link href="/wang-thread/129-custom-lock/"/>
      <url>/wang-thread/129-custom-lock/</url>
      
        <content type="html"><![CDATA[<p>synchronizedçš„æœºåˆ¶å¯¼è‡´çš„ä¸€ä¸ªé—®é¢˜ï¼šå½“çº¿ç¨‹Aè°ƒç”¨ä½¿ç”¨synchronizedåŠ é”çš„çº¿ç¨‹Bæ—¶ï¼Œå¦‚æœçº¿ç¨‹Bçš„è¿è¡Œæ—¶é—´å¾ˆé•¿ï¼Œåˆ™è°ƒç”¨è€…çº¿ç¨‹Aå°†ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä¸”ä¸å¯æ‰“æ–­ï¼Œä¹Ÿä¸èƒ½ç«‹å³è¿”å›ã€‚</p><h2 id="æ¥å£ï¼š"><a href="#æ¥å£ï¼š" class="headerlink" title="æ¥å£ï¼š"></a>æ¥å£ï¼š</h2><pre><code class="java">/** * è‡ªå®šä¹‰æ˜¾å¼é” */public interface Lock {    class TimeOutException extends Exception {        public TimeOutException(String message) {            super(message);        }    }    void lock() throws InterruptedException;    void lock(long mills) throws InterruptedException, TimeOutException;    void unlock();    Collection&lt;Thread&gt; getBlockedThread();    int getBlockedSize();}</code></pre><h2 id="BooleanLockå®ç°ç±»"><a href="#BooleanLockå®ç°ç±»" class="headerlink" title="BooleanLockå®ç°ç±»"></a>BooleanLockå®ç°ç±»</h2><pre><code class="java">public class BooleanLock implements Lock {    /**     * The initValue is true indicated the lock has been get.     * The initValue is false indicated the lock is free (other thread can get this).     */    private boolean initValue;    private Collection&lt;Thread&gt; blockedThreadCollection = new ArrayList&lt;&gt;();    public BooleanLock() {        this.initValue = false;    }    @Override    public synchronized void lock() throws InterruptedException {        // é”å·²ç»è¢«å…¶ä»–çº¿ç¨‹ä½¿ç”¨        while (initValue) {            blockedThreadCollection.add(Thread.currentThread());            this.wait();        }        // é”æœªè¢«ä½¿ç”¨ï¼ŒæŠ¢åˆ°é”ç«‹å³è®¾ç½®initValueçš„å€¼        this.initValue = true;        blockedThreadCollection.remove(Thread.currentThread());    }    @Override    public void lock(long mills) throws InterruptedException, TimeOutException {}    @Override    public synchronized void unlock() {        // é‡Šæ”¾é”        this.initValue = false;        Optional.of(Thread.currentThread().getName() + &quot; release the lock monitor.&quot;).ifPresent(System.out::println);        this.notifyAll();    }    @Override    public Collection&lt;Thread&gt; getBlockedThread() {        // å¯ä»¥ç›´æ¥è¿”å›ï¼Œä½†æ˜¯ä¸å®‰å…¨ã€‚æ­¤å¤„è¿”å›çš„æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œè°ƒç”¨è€…å¯ä»¥éšæ„æ›´æ”¹ï¼ˆnullï¼Œclear()ç­‰æ“ä½œï¼‰ã€‚        return Collections.unmodifiableCollection(blockedThreadCollection);    }    @Override    public int getBlockedSize() {        return blockedThreadCollection.size();    }}</code></pre><h2 id="æµ‹è¯•è°ƒç”¨æ–¹æ³•"><a href="#æµ‹è¯•è°ƒç”¨æ–¹æ³•" class="headerlink" title="æµ‹è¯•è°ƒç”¨æ–¹æ³•"></a>æµ‹è¯•è°ƒç”¨æ–¹æ³•</h2><pre><code class="java">public static void main(String[] args) throws InterruptedException {    final BooleanLock booleanLock = new BooleanLock();    Stream.of(&quot;T1&quot;, &quot;T2&quot;, &quot;T3&quot;, &quot;T4&quot;).forEach(name -&gt; {        new Thread(() -&gt; {            try {                booleanLock.lock();                Optional.of(Thread.currentThread().getName() + &quot; have the lock Monitor.&quot;).ifPresent(System.out::println);                work();            } catch (InterruptedException e) {                e.printStackTrace();            } finally {                booleanLock.unlock();            }        }, name).start();    });    // é—®é¢˜ï¼šè¿è§„éæ³•æ“ä½œï¼Œå¯¼è‡´è¿è¡Œæ··ä¹±    Thread.sleep(100);    booleanLock.unlock();}private static void work() throws InterruptedException {    Optional.of(Thread.currentThread().getName() + &quot; is working...&quot;).ifPresent(System.out::println);    Thread.sleep(10_000);}</code></pre><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>è¿è§„éæ³•æ“ä½œï¼Œå¯¼è‡´è¿è¡Œæ··ä¹±ã€‚å·¨å¤§çš„BUG</p><pre><code class="java">public static void main(String[] args) throws InterruptedException {    final BooleanLock booleanLock = new BooleanLock();    ...    // é—®é¢˜ï¼šè¿è§„éæ³•æ“ä½œï¼Œå¯¼è‡´è¿è¡Œæ··ä¹±    Thread.sleep(100);    booleanLock.unlock();}</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>128-çº¿ç¨‹ç”Ÿäº§è€…æ¶ˆè´¹è€…çš„ç»¼åˆå®æˆ˜ç»“åˆJava8è¯­æ³•</title>
      <link href="/wang-thread/128-prod-cons-case/"/>
      <url>/wang-thread/128-prod-cons-case/</url>
      
        <content type="html"><![CDATA[<p>æ•°æ®é‡‡é›†åŠŸèƒ½ï¼šåˆ©ç”¨å¤šä¸ªçº¿ç¨‹é‡‡é›†å¤šå°æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€ä¿¡æ¯ã€‚å½“æœåŠ¡å™¨æ•°é‡è¾ƒå°‘æ—¶ï¼Œå¯ä»¥é‡‡å–ä¸€ä¸ªçº¿ç¨‹é‡‡é›†ä¸€å°æœåŠ¡å™¨ï¼›ä½†æ˜¯æœåŠ¡å™¨æ•°é‡éå¸¸å¤§æ—¶ï¼Œå°†ä¸å¯èƒ½é‡‡å–è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å¼€å¯ä¸€å®šæ•°é‡çš„çº¿ç¨‹é‡‡é›†å®Œæˆåå†é‡‡é›†å…¶ä»–æœåŠ¡å™¨ï¼Œå³è¿è¡Œçš„çº¿ç¨‹å§‹ç»ˆä¿æŒç€ç¨³å®šæ•°é‡ã€‚</p><p>æ“ä½œç³»ç»Ÿå¯ä»¥æ”¯æŒä¸€ä¸ªåº”ç”¨å¼€å¯çš„çº¿ç¨‹æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ï¼Œå–å†³äºstack sizeã€‚å¤šçº¿ç¨‹çš„æ€§èƒ½æ˜¯æœ‰ä¸€ä¸ªå³°å€¼çš„ï¼Œè¶…è¿‡å³°å€¼æ€§èƒ½åè€Œä¼šä¸‹é™ã€‚è¿™æ˜¯å› ä¸ºçº¿ç¨‹æ•°é‡è¿‡å¤§æ—¶ï¼Œåº”ç”¨çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šæ¶ˆè€—å¾ˆå¤§ä¸€éƒ¨åˆ†èµ„æºã€‚</p><pre><code class="java">public class CaptureService {    private static final LinkedList&lt;Control&gt; CONTROLS = new LinkedList&lt;&gt;();    private static final int MAX_WORKER = 5;    public static void main(String[] args) {        List&lt;Thread&gt; worker = new ArrayList&lt;&gt;();        Stream.of(&quot;M1&quot;, &quot;M2&quot;, &quot;M3&quot;, &quot;M4&quot;, &quot;M5&quot;, &quot;M6&quot;, &quot;M7&quot;, &quot;M8&quot;, &quot;M9&quot;, &quot;M10&quot;)                .map(CaptureService::createCaptureService)                .forEach(t -&gt; {                    t.start();                    worker.add(t);                });        worker.forEach(t -&gt; {            t.join();        });        Optional.of(&quot;All of capture work finished.&quot;).ifPresent(System.out::println);    }    public static Thread createCaptureService(String name) {        return new Thread(() -&gt; {            Optional.of(&quot;The worker [&quot; + Thread.currentThread().getName() + &quot;] BEGIN capture data.&quot;).ifPresent(System.out::println);            synchronized (CONTROLS) {                while (CONTROLS.size() &gt; MAX_WORKER) {                    CONTROLS.wait();                }                CONTROLS.addLast(new Control());            }            Optional.of(&quot;The worker [&quot; + Thread.currentThread().getName() + &quot;] is WORKING...&quot;).ifPresent(System.out::println);            Thread.sleep(10_000);            synchronized (CONTROLS) {                Optional.of(&quot;The worker [&quot; + Thread.currentThread().getName() + &quot;] END capture data.&quot;).ifPresent(System.out::println);                CONTROLS.removeFirst();                CONTROLS.notifyAll();            }        }, name);    }    private static class Control {}}</code></pre><p>Optionalå¯ä»¥é˜²æ­¢NPEç©ºæŒ‡é’ˆå¼‚å¸¸</p><p>è§£å†³çš„é—®é¢˜ï¼š</p><ol><li>å¤šä¸ªçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å¸¦æ¥çš„æŸè€—é—®é¢˜</li><li>å¤šä¸ªçº¿ç¨‹å å¤šä¸ªèµ„æºï¼Œæ¯”å¦‚åŒæ—¶åˆ›å»ºå¤šä¸ªæ•°æ®åº“è¿æ¥ã€æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼ˆæ–‡ä»¶å¥æŸ„æ˜¯æœ‰é™çš„ï¼‰ã€‚</li></ol><p>å­¦ä¹ äº†çº¿ç¨‹æ± ä¹‹åï¼Œå¯ä»¥ä¸å¿…è¿™ä¹ˆéº»çƒ¦å•¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>127-waitå’Œsleepçš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œæ·±å…¥åˆ†æï¼ˆé¢è¯•å¸¸è§é—®é¢˜ï¼‰</title>
      <link href="/wang-thread/127-wait-sleep/"/>
      <url>/wang-thread/127-wait-sleep/</url>
      
        <content type="html"><![CDATA[<p>The difference of sleep and wait:</p><ol><li>sleep is the method of Thread, but wait is the method of Object.</li><li>sleep will not release the Object monitor(LOCK), but the wait will be release the monitor and add to the Object monitor waiting queue.</li><li>Use sleep not depend on the monitor(synchronized), but wait need.</li><li>The sleep method not need be wakeup, but wait need. except wait(long timeout)</li></ol><p>éªŒè¯ä¸åŒç‚¹3ï¼š</p><pre><code class="java">public static void m1() {    Thread.sleep(2_000);}public static void m2() {    synchronized (LOCK) {        LOCK.wait();    }}</code></pre><p><code>LOCK.wait();</code>æ²¡æœ‰ä½¿ç”¨<code>synchronized</code>åˆ™ä¼šæŠ›å‡º<code>java.lang.IllegalMonitorStateException</code>å¼‚å¸¸</p><p>éªŒè¯ä¸åŒç‚¹2ï¼š</p><pre><code class="java">// ä¸¤ä¸ªçº¿ç¨‹ä¾æ¬¡è¿è¡Œpublic static void m3() {    synchronized (LOCK) {        System.out.println(&quot;The Thread &quot; + Thread.currentThread().getName() + &quot; enter.&quot;);        Thread.sleep(20_000);    }}// ä¸¤ä¸ªçº¿ç¨‹å‡ ä¹åŒæ—¶è¿è¡Œï¼Œä¸¤ä¸ªçº¿ç¨‹æœ€ç»ˆéƒ½åŠ å…¥åˆ°äº†LOCKçš„waiting queuepublic static void m4() {    synchronized (LOCK) {        System.out.println(&quot;The Thread &quot; + Thread.currentThread().getName() + &quot; enter.&quot;);        LOCK.wait();    }}</code></pre><pre><code class="java">public static void main(String[] args) {    Stream.of(&quot;T1&quot;, &quot;T2&quot;).forEach(name -&gt; new Thread(DifferenceOfWaitAndSleep::m4, name).start());}</code></pre><p>ä½¿ç”¨<code>sleep()</code>ä¸¤ä¸ªçº¿ç¨‹å°†ä¼šä¾æ¬¡è¿è¡Œï¼›ä½¿ç”¨<code>wait()</code>ä¸¤ä¸ªçº¿ç¨‹å‡ ä¹åŒæ—¶è¿è¡Œï¼Œæœ€ç»ˆéƒ½åŠ å…¥åˆ°äº†LOCKçš„waiting queue</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>126-å¤šçº¿ç¨‹ä¸‹çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Œä»¥åŠè¯¦ç»†ä»‹ç»notifyAllæ–¹æ³•</title>
      <link href="/wang-thread/126-multi-thread-notifyall/"/>
      <url>/wang-thread/126-multi-thread-notifyall/</url>
      
        <content type="html"><![CDATA[<p><code>public final void wait()</code>æ–¹æ³•</p><blockquote><p>ä½¿å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ä¸ºæ­¤å¯¹è±¡è°ƒç”¨<code>notify()</code>æ–¹æ³•æˆ–<code>notifyAll()</code>æ–¹æ³•ã€‚æ­¤æ–¹æ³•çš„è¡Œä¸ºå°±åƒå®Œå…¨æ‰§è¡Œè°ƒç”¨<code>wait(0)</code>ä¸€æ ·ã€‚</p><p>å½“å‰çº¿ç¨‹å¿…é¡»æ‹¥æœ‰è¯¥å¯¹è±¡çš„ç›‘è§†å™¨ã€‚çº¿ç¨‹é‡Šæ”¾æ­¤ç›‘è§†å™¨çš„æ‰€æœ‰æƒï¼Œå¹¶ç­‰å¾…ç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹é€šè¿‡è°ƒç”¨notifyæ–¹æ³•æˆ–notifyAllæ–¹æ³•é€šçŸ¥ç­‰å¾…åœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„çº¿ç¨‹å”¤é†’ã€‚ç„¶åï¼Œçº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å®ƒå¯ä»¥é‡æ–°è·å¾—ç›‘è§†å™¨çš„æ‰€æœ‰æƒå¹¶æ¢å¤æ‰§è¡Œï¼ˆå³å¯è¿è¡ŒçŠ¶æ€ï¼‰ã€‚</p></blockquote><p><code>public final void notify()</code>æ–¹æ³•</p><blockquote><p>å”¤é†’æ­£åœ¨æ­¤å¯¹è±¡çš„ç›‘è§†å™¨ä¸Šç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ã€‚å¦‚æœæœ‰ä»»ä½•çº¿ç¨‹åœ¨æ­¤å¯¹è±¡ä¸Šç­‰å¾…ï¼Œåˆ™é€‰æ‹©å…¶ä¸­ä¸€ä¸ªå”¤é†’ã€‚é€‰æ‹©æ˜¯ä»»æ„çš„ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®å®ç°æƒ…å†µè¿›è¡Œé€‰æ‹©ã€‚çº¿ç¨‹é€šè¿‡è°ƒç”¨å…¶ä¸­ä¸€ä¸ªwaitæ–¹æ³•åœ¨å¯¹è±¡çš„ç›‘è§†å™¨ä¸Šç­‰å¾…ã€‚</p></blockquote><p><code>public final void notifyAll()</code>æ–¹æ³•</p><blockquote><p>å”¤é†’æ­£åœ¨æ­¤å¯¹è±¡çš„ç›‘è§†å™¨ä¸Šç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚çº¿ç¨‹é€šè¿‡è°ƒç”¨å…¶ä¸­ä¸€ä¸ªwaitæ–¹æ³•åœ¨å¯¹è±¡çš„ç›‘è§†å™¨ä¸Šç­‰å¾…ã€‚</p></blockquote><p>æ”¹é€ å¤šçº¿ç¨‹ä¸‹çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼š</p><pre><code class="java">public void produce() {    synchronized (LOCK) {        // åˆ†ææ­¤å¤„ä¸ºä»€ä¹ˆä½¿ç”¨whileï¼Œè€Œä¸æ˜¯ç”¨ifï¼Ÿ        while (isProduced) {            LOCK.wait();        }        System.out.println(Thread.currentThread().getName() + &quot;-&gt;&quot; + (++i));        LOCK.notifyAll();        isProduced = true;    }}</code></pre><pre><code class="java">public void consume() {    synchronized (LOCK) {        while (!isProduced) {            LOCK.wait();        }        System.out.println(Thread.currentThread().getName() + &quot;-&gt;&quot; + i);        LOCK.notifyAll();        isProduced = false;    }}</code></pre><pre><code class="java">public static void main(String[] args) {    ProduceConsumerVersion3 pc = new ProduceConsumerVersion3();    Stream.of(&quot;P1&quot;, &quot;P2&quot;, &quot;P3&quot;).forEach(n -&gt; new Thread(new Runnable() {        @Override        public void run() {            while (true) {                pc.produce();                Thread.sleep(10);            }        }    }, n).start());    Stream.of(&quot;C1&quot;, &quot;C2&quot;, &quot;C3&quot;, &quot;C4&quot;).forEach(n -&gt; new Thread(() -&gt; {        while (true) {            pc.consume();            Thread.sleep(10);        }    }, n).start());}</code></pre><p>åˆ†ææ­¤å¤„ä¸ºä»€ä¹ˆä½¿ç”¨whileï¼Œè€Œä¸æ˜¯ç”¨ifï¼Ÿ</p><pre><code class="java">while (isProduced) {    LOCK.wait();}</code></pre><p><code>notifyAll()</code>æ–¹æ³•å°†ä¼šå”¤é†’æ‰€æœ‰çš„ç”Ÿäº§è€…çº¿ç¨‹ã€‚</p><p>å¦‚æœä½¿ç”¨<code>if()</code>ï¼šçº¿ç¨‹Aå…ˆæŠ¢åˆ°é”ï¼Œè¿è¡Œæ—¶åˆ¤æ–­æœ‰æ²¡æœ‰ç”Ÿäº§æ•°æ®ï¼Œæ— åˆ™ç”Ÿäº§æ•°æ®å¹¶è¿è¡Œå®Œæˆï¼Œå½“å®ƒå†æ¬¡æŠ¢é”è¿è¡Œæ—¶å‘ç°å·²ç»ç”Ÿäº§è¿‡æ•°æ®åˆ™ä¼šè¿›è¡Œ<code>wait()</code>æ“ä½œï¼›çº¿ç¨‹BæŠ¢åˆ°é”è¿è¡Œæ—¶å°†<u>ä¼šè·³è¿‡åˆ¤æ–­</u>ç›´æ¥ç”Ÿäº§æ•°æ®ï¼Œä»è€Œé€ æˆäº†æ¶ˆè´¹è€…è¿˜æ²¡æœ‰æ¶ˆè´¹å®Œæ•°æ®åˆé‡å¤ç”Ÿäº§ã€‚</p><p>ä¾‹ï¼šç”Ÿäº§ä¸¤æ¬¡æ¶ˆè´¹ä¸€æ¬¡ï¼Œç”Ÿäº§ä¸€æ¬¡æ¶ˆè´¹ä¸¤æ¬¡</p><pre><code>P2-&gt;2P3-&gt;3C3-&gt;3P1-&gt;4C4-&gt;4C2-&gt;4</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>125-å¤šProduceå¤šConsumeä¹‹é—´çš„é€šè®¯å¯¼è‡´å‡ºç°ç¨‹åºå‡æ­»çš„åŸå› åˆ†æ</title>
      <link href="/wang-thread/125-multi-prod-cons/"/>
      <url>/wang-thread/125-multi-prod-cons/</url>
      
        <content type="html"><![CDATA[<p>å¤šä¸ªç”Ÿäº§è€…ã€æ¶ˆè´¹è€…çº¿ç¨‹è¿è¡Œæ—¶ï¼Œä¼šäº§ç”Ÿä¸€äº›é—®é¢˜</p><pre><code class="java">Stream.of(&quot;P1&quot;, &quot;P2&quot;).forEach(n -&gt;        new Thread(() -&gt; {            while (true) {                pc.produce();            }        }, n).start());Stream.of(&quot;C1&quot;, &quot;C2&quot;).forEach(n -&gt;        new Thread(() -&gt; {            while (true) {                pc.consume();            }        }, n).start());</code></pre><p>æ­¤æ—¶è¿è¡Œç¨‹åºä¼šå…ˆæ­£å¸¸è¿è¡Œä¸€æ®µæ—¶é—´ï¼Œç„¶åå¡ä½ã€‚ä½¿ç”¨<code>jstack</code>æŸ¥çœ‹ç¨‹åºä¹Ÿå¹¶æ²¡æœ‰å‘ç”Ÿæ­»é”ã€‚é‚£ä¹ˆï¼Œäº§ç”Ÿçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>åˆ†æ</strong>ï¼šåœ¨æ¶ˆè´¹è€…1æ¶ˆè´¹å®Œæˆåè¿›è¡Œ<code>notify()</code>æ“ä½œæ—¶ï¼Œå¹¶æ²¡æœ‰æŒ‡å®šå”¤é†’å“ªä¸ªçº¿ç¨‹ï¼Œæ­¤æ—¶æœ‰å¯èƒ½å”¤é†’çš„æ˜¯æ¶ˆè´¹è€…2çº¿ç¨‹ã€‚ç„¶åæ¶ˆè´¹è€…2å”¤é†’åå‘ç°åå¹¶æ²¡æœ‰å¯ä»¥æ¶ˆè´¹çš„æ•°æ®ï¼Œåˆè‡ªè¡Œwaitï¼Œæ­¤æ—¶æ‰€æœ‰ç”Ÿäº§è€…çº¿ç¨‹ä¹Ÿæ˜¯å¤„äºwaitçŠ¶æ€ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½BLOACKED,åœ¨ç­‰å¾…è¢«å”¤é†’ï¼Œè¿›è€Œé€ æˆäº†çº¿ç¨‹å‡æ­»çš„æƒ…å†µã€‚</p><p><code>notify()</code>å”¤é†’çš„æ˜¯æŒæœ‰åŒæ ·MONITORé”çš„çº¿ç¨‹ï¼Œä¸”åªå”¤é†’ä¸€ä¸ªçº¿ç¨‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>124-çº¿ç¨‹é—´é€šä¿¡å¿«é€Ÿå…¥é—¨ï¼Œä½¿ç”¨waitå’Œnotifyè¿›è¡Œçº¿ç¨‹é—´çš„æ•°æ®é€šä¿¡</title>
      <link href="/wang-thread/124-wait-notify/"/>
      <url>/wang-thread/124-wait-notify/</url>
      
        <content type="html"><![CDATA[<p>çº¿ç¨‹é€šä¿¡ä¾‹å­ï¼šçº¿ç¨‹Aè´Ÿè´£ä»æ•°æ®åº“è¯»å–æ•°æ®ï¼Œçº¿ç¨‹Bè´Ÿè´£åˆ†æå¤„ç†æ•°æ®ã€‚å½“çº¿ç¨‹Aè·å–åˆ°æ•°æ®å¹¶æ”¾å…¥å†…å­˜åéœ€è¦é€šçŸ¥çº¿ç¨‹Bå»å¤„ç†æ•°æ®ã€‚çº¿ç¨‹Aä¸º<strong>ç”Ÿäº§è€…</strong>ï¼Œçº¿ç¨‹Bä¸º<strong>æ¶ˆè´¹è€…</strong>ã€‚</p><p>ç‰ˆæœ¬1ï¼šç”Ÿäº§è€…ä¸€ç›´è´Ÿè´£ç”Ÿäº§ï¼Œæ¶ˆè´¹è€…ä¸€ç›´è´Ÿè´£æ¶ˆè´¹ã€‚æ²¡æœ‰è¿›è¡Œé€šä¿¡ï¼Œç”Ÿäº§è€…ç”Ÿäº§å®Œæ¯•æ²¡æœ‰é€šçŸ¥æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…ä¹Ÿä¸çŸ¥é“æ˜¯å¦æ˜¯æœ€æ–°æ•°æ®ã€æ˜¯å¦å·²ç»æ¶ˆè´¹è¿‡ã€‚</p><pre><code class="java">public class ProduceConsumerVersion1 {    private int i = 1;    private final Object LOCK = new Object();    private void produce() {        synchronized (LOCK) {            System.out.println(&quot;P-&gt;&quot; + (i++));        }    }    private void consume() {        synchronized (LOCK) {            System.out.println(&quot;C-&gt;&quot; + (i));        }    }    public static void main(String[] args) {        ProduceConsumerVersion1 pc = new ProduceConsumerVersion1();        new Thread(() -&gt; {            while (true) {                pc.produce();            }        }, &quot;P&quot;).start();        new Thread(() -&gt; {            while (true) {                pc.consume();            }        }, &quot;C&quot;).start();    }}</code></pre><p>è¿è¡Œä»£ç ä¼šå‘ç°ï¼Œæœ‰äº›æ—¶å€™çº¿ç¨‹Pä¸æ–­ç”Ÿäº§æ•°æ®ï¼Œè€Œçº¿ç¨‹Cæ²¡æœ‰æ¶ˆè´¹ï¼›è€Œæœ‰äº›æ—¶å€™çº¿ç¨‹Cåªæ¶ˆè´¹æœ€æ–°çš„æ•°æ®ï¼Œå¹¶ä¸”ä¸æ–­é‡å¤çš„æ¶ˆè´¹æœ€æ–°æ•°æ®ã€‚</p><p>é€ æˆè¿™ç§æƒ…å†µçš„åŸå› æ˜¯ï¼šçº¿ç¨‹é—´æ²¡æœ‰è¿›è¡Œé€šä¿¡ã€‚</p><p>ç‰ˆæœ¬2ï¼šç”Ÿäº§è€…è´Ÿè´£ç”Ÿäº§ï¼Œç”Ÿäº§å®Œæ¯•ä¹‹åé€šçŸ¥æ¶ˆè´¹è€…ï¼Œå¦‚æœæ²¡æœ‰æ¶ˆè´¹åˆ™ä¸å†è¿›è¡Œç”Ÿäº§ã€‚æ¶ˆè´¹è€…è´Ÿè´£æ¶ˆè´¹ï¼Œæœ‰æ•°æ®åˆ™è¿›è¡Œæ¶ˆè´¹ï¼Œæ²¡æœ‰æ•°æ®åˆ™è¿›è¡Œç­‰å¾…ã€‚</p><pre><code class="java">public class ProduceConsumerVersion2 {    private int i = 0;    private final Object LOCK = new Object();    // æ˜¯å¦å·²ç»æ¶ˆè´¹    private volatile boolean isProduced = false;    public void produce() {        synchronized (LOCK) {            if (isProduced) {                LOCK.wait();            } else {                System.out.println(&quot;P-&gt;&quot; + (++i));                LOCK.notify();                isProduced = true;            }        }    }    public void consume() {        synchronized (LOCK) {            if (isProduced) {                System.out.println(&quot;C-&gt;&quot; + i);                LOCK.notify();                isProduced = false;            } else {                LOCK.wait();            }        }    }    public static void main(String[] args) {        ProduceConsumerVersion2 pc = new ProduceConsumerVersion2();        new Thread(() -&gt; {            while (true) {                pc.produce();            }        }, &quot;P&quot;).start();        new Thread(() -&gt; {            while (true) {                pc.consume();            }        }, &quot;C&quot;).start();    }}</code></pre><p>æ­¤ä»£ç å®ç°äº†ç®€å•çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œä½†æ˜¯åœ¨å¤šä¸ªç”Ÿäº§è€…ã€æ¶ˆè´¹è€…çº¿ç¨‹è¿è¡Œæ—¶ï¼Œä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ã€‚æ€è€ƒé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”å¬ä¸‹å›åˆ†è§£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>123-å¤šçº¿ç¨‹æ­»é”åˆ†æï¼Œæ¡ˆä¾‹ä»‹ç»</title>
      <link href="/wang-thread/123-deadlock-case/"/>
      <url>/wang-thread/123-deadlock-case/</url>
      
        <content type="html"><![CDATA[<p>æ­»é”ã€‚å¤šä¸ªé”ç›¸äº’äº¤å‰é”å®šä»£ç </p><p>å½“çº¿ç¨‹T1æŒæœ‰èµ„æºAï¼Œçº¿ç¨‹T2æŒæœ‰èµ„æºBã€‚æ­¤æ—¶çº¿ç¨‹T1æƒ³è¦è·å–èµ„æºBï¼Œå¹¶ä¸”çº¿ç¨‹T2æƒ³è¦è·å–èµ„æºAã€‚ä¸¤ä¸ªçº¿ç¨‹éƒ½æƒ³è¦è·å–å¯¹æ–¹æ‰‹ä¸­çš„èµ„æºï¼Œè‡ªå·±åˆä¸è‚¯è®©å‡ºå·²æœ‰èµ„æºï¼Œä¸€ç›´åƒµæŒä¸ä¸‹å°±å½¢æˆäº†æ­»é”ã€‚</p><p>ç¨‹åºåœ¨è¿è¡Œæ—¶ä»€ä¹ˆäº‹éƒ½æ²¡åšï¼ˆä¸è¾“å‡ºæ—¥å¿—ã€CPUå†…å­˜ç­‰éƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼‰ï¼Œæ­¤æ—¶ææœ‰å¯èƒ½å‘ç”Ÿäº†æ­»é”ã€‚éœ€è¦æŸ¥çœ‹ç¨‹åºè¿è¡Œæƒ…å†µã€‚</p><ol><li><p>æ¡ˆä¾‹</p><p>çº¿ç¨‹T1ï¼š</p><pre><code class="java">public class DeadLock {    private OtherService otherService;    public void setOtherService(OtherService otherService) {        this.otherService = otherService;    }    // DeadLockçš„å®ä¾‹çš„é”-èµ„æºA    private final Object LOCK = new Object();    public void m1() {        synchronized (LOCK) {            System.out.println(&quot;********m1********&quot;);            otherService.s1();        }    }    public void m2() {        synchronized (LOCK) {            System.out.println(&quot;********m2********&quot;);        }    }}</code></pre><p>çº¿ç¨‹T2ï¼š</p><pre><code class="java">public class OtherService {    private DeadLock deadLock;    public void setDeadLock(DeadLock deadLock) {        this.deadLock = deadLock;    }    // OtherServiceçš„å®ä¾‹çš„é”-èµ„æºB    private final Object LOCK = new Object();    public void s1() {        synchronized (LOCK) {            System.out.println(&quot;========s1========&quot;);        }    }    public void s2() {        synchronized (LOCK) {            System.out.println(&quot;========s2========&quot;);            deadLock.m2();        }    }}</code></pre><p>æµ‹è¯•è°ƒç”¨æ–¹æ³•ï¼š</p><pre><code class="java">public static void main(String[] args) {    DeadLock deadLock = new DeadLock();    OtherService otherService = new OtherService();    deadLock.setOtherService(otherService);    otherService.setDeadLock(deadLock);    new Thread(() -&gt; {        while (true) {            deadLock.m1();        }    }, &quot;T1&quot;).start();    new Thread(() -&gt; {        while (true) {            otherService.s2();        }    }, &quot;T2&quot;).start();}</code></pre></li><li><p>æŸ¥çœ‹æ­»é”</p><p>å½“ç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿæ­»é”ï¼Œé€šè¿‡ä»£ç ä¼šå¾ˆéš¾åˆ†æå‡ºæ­»é”åœ¨å“ªé‡Œäº§ç”Ÿã€‚æ­¤æ—¶åº”é€šè¿‡å·¥å…·jstackæŸ¥çœ‹ç¨‹åºè¿è¡ŒçŠ¶æ€ã€‚</p><ol><li><p>è·å–ç¨‹åºè¿›ç¨‹idï¼ˆpidï¼‰ã€‚<code>jps</code></p><pre><code>2086 DeadLockTest2007 KotlinCompileDaemon2106 Jps1194 1213 RemoteMavenServer36</code></pre></li><li><p>æŸ¥çœ‹ç¨‹åºè¿è¡ŒçŠ¶æ€ã€‚<code>jstack 2086</code></p><pre><code>Found one Java-level deadlock:=============================&quot;T2&quot;:  waiting to lock monitor 0x00007fe848005758 (object 0x000000076adb9730, a java.lang.Object),  which is held by &quot;T1&quot;&quot;T1&quot;:  waiting to lock monitor 0x00007fe8480042b8 (object 0x000000076adbd6a0, a java.lang.Object),  which is held by &quot;T2&quot;Java stack information for the threads listed above:===================================================&quot;T2&quot;:    at com.tuyrk.chapter8.DeadLock.m2(DeadLock.java:28)    - waiting to lock &lt;0x000000076adb9730&gt; (a java.lang.Object)    at com.tuyrk.chapter8.OtherService.s2(OtherService.java:29)    - locked &lt;0x000000076adbd6a0&gt; (a java.lang.Object)    at com.tuyrk.chapter8.DeadLockTest.lambda$main$1(DeadLockTest.java:24)    at com.tuyrk.chapter8.DeadLockTest$$Lambda$2/2094548358.run(Unknown Source)    at java.lang.Thread.run(Thread.java:748)&quot;T1&quot;:    at com.tuyrk.chapter8.OtherService.s1(OtherService.java:22)    - waiting to lock &lt;0x000000076adbd6a0&gt; (a java.lang.Object)    at com.tuyrk.chapter8.DeadLock.m1(DeadLock.java:22)    - locked &lt;0x000000076adb9730&gt; (a java.lang.Object)    at com.tuyrk.chapter8.DeadLockTest.lambda$main$0(DeadLockTest.java:19)    at com.tuyrk.chapter8.DeadLockTest$$Lambda$1/500977346.run(Unknown Source)    at java.lang.Thread.run(Thread.java:748)Found 1 deadlock.</code></pre><p>T2æŒæœ‰0x000000076adbd6a0ï¼Œæƒ³è¦è·å–0x000000076adb9730ï¼›</p><p>è€ŒT1æŒæœ‰0x000000076adb9730ï¼Œæƒ³è¦è·å–0x000000076adbd6a0ã€‚</p></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xcrun:error:invalid active developer path</title>
      <link href="/macOS-update-git/"/>
      <url>/macOS-update-git/</url>
      
        <content type="html"><![CDATA[<p>macOSæ›´æ–°ç³»ç»Ÿågitå‡ºç°é”™è¯¯ï¼šxcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missingxcrun at: /Library/Developer /CommandLineTools /usr/bin/xcrunã€‚å¦‚å›¾ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g9e747jombj30nu08ujt4.jpg" alt="Gitå¼‚å¸¸" style="zoom:50%;" /><p>è§£å†³æ–¹æ³•ï¼š</p><p>åœ¨ç»ˆç«¯è¿è¡Œï¼š</p><pre><code class="shell">xcode-select --install</code></pre><p>å‡ºç°ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g9e7bmvbjnj30po09smys.jpg" style="zoom:45%;" /><p>ç‚¹å‡»å®‰è£…ï¼Œç„¶åç‚¹å‡»åŒæ„åè®®ã€‚</p><p>ç­‰å¾…å®‰è£…ï¼Œç‚¹å‡»å®Œæˆå³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>122-é€šè¿‡å®éªŒåˆ†æClassé”çš„å­˜åœ¨</title>
      <link href="/wang-thread/122-class-lock/"/>
      <url>/wang-thread/122-class-lock/</url>
      
        <content type="html"><![CDATA[<p>é™æ€æ–¹æ³•ã€é™æ€ä»£ç å—åŠ é”ï¼Œé”çš„MONITORæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p><ol><li><p>é¡ºåºè®¿é—®ã€‚ä¸¤ä¸ªçº¿ç¨‹æŠ¢å åŒä¸€ä¸ªé”ã€‚ï¼ˆClassé”ï¼‰</p><pre><code class="java">public synchronized static void m1() {}</code></pre><pre><code class="java">public synchronized static void m2() {}</code></pre><p>å…¶åˆ°åº•æ˜¯ä»€ä¹ˆé”å‘¢ï¼Ÿ</p><p><strong>é™æ€æ–¹æ³•åŠ çš„é”å…¶å®æ˜¯Classé”ã€‚</strong></p></li><li><p>å¢åŠ é™æ€ä»£ç å—ï¼Œåˆ¤å®šé”MONITORæ˜¯ä»€ä¹ˆã€‚</p><ul><li><p>æš‚æœªæ·»åŠ é™æ€ä»£ç å—æ—¶ï¼š</p><pre><code class="java">public static void m3() {}</code></pre><p><code>m3()</code>ä¸ºé™æ€éåŠ é”æ–¹æ³•ï¼Œå¯åŠ¨ç¨‹åºä¼šç«‹å³è¿è¡Œï¼Œæ­¤æ—¶<code>m1()</code>ä¼šåŒæ—¶è¿è¡Œã€‚</p></li><li><p>æ·»åŠ é™æ€ä»£ç å—åï¼š</p><pre><code class="java">static {    synchronized (SynchronizedStatic.class) {}}</code></pre><p>å…ˆè¿›è¡Œä¸€æ¬¡å®ä¾‹åŒ–ï¼Œè¿è¡Œé™æ€ä»£ç å—ï¼Œè¿è¡Œå®Œæˆæ‰æ‰§è¡Œ<code>m3()</code>å’Œ<code>m1()</code></p></li></ul><p><strong>é™æ€ä»£ç å—åŠ çš„é”å…¶å®æ˜¯Classé”ã€‚</strong></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>121-é€šè¿‡å®éªŒåˆ†æThisé”çš„å­˜åœ¨</title>
      <link href="/wang-thread/121-this-lock/"/>
      <url>/wang-thread/121-this-lock/</url>
      
        <content type="html"><![CDATA[<blockquote><p>thisé”å°±æ˜¯é€šè¿‡ä¸€ä¸ªå®ä¾‹ä½œä¸ºMONITORï¼Œç„¶åè¿›è¡ŒåŠ é”ã€‚</p></blockquote><ol><li><p>åŒæ—¶è®¿é—®ã€‚</p><pre><code class="java">public synchronized void m1() {}</code></pre><pre><code class="java">public void m2() {}</code></pre></li><li><p>é¡ºåºè®¿é—®ã€‚ä¸¤ä¸ªçº¿ç¨‹è¿è¡Œæ–¹æ³•æ—¶æŠ¢å åŒä¸€ä¸ªthisé”ã€‚</p><p>ä¸€ä¸ªçº¿ç¨‹å¿…é¡»ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹è®¿é—®çš„æ–¹æ³•æ‰§è¡Œå®Œæˆæ‰èƒ½è®¿é—®ã€‚</p><pre><code class="java">public synchronized void m1() {}</code></pre><pre><code class="java">public synchronized void m2() {}</code></pre></li><li><p>åŒæ—¶è®¿é—®ã€‚ä¸¤ä¸ªçº¿ç¨‹æŠ¢å çš„é”ä¸ä¸€æ ·ã€‚m1ä¸ºthisé”ï¼›m2ä¸ºLOCKé”ã€‚</p><pre><code class="java">public synchronized void m1() {}</code></pre><pre><code class="java">private final Object LOCK = new Object();public void m2() {    synchronized (LOCK) {}}</code></pre></li><li><p>é¡ºåºè®¿é—®ã€‚ä¸¤ä¸ªçº¿ç¨‹æŠ¢å åŒä¸€ä¸ªé”ï¼Œå³LOCK</p><pre><code class="java">private final Object LOCK = new Object();</code></pre><pre><code class="java">public void m1() {    synchronized (LOCK) {}}</code></pre><pre><code class="java">public void m2() {    synchronized (LOCK) {}}</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>120-åŒæ­¥ä»£ç å—ä»¥åŠåŒæ­¥æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«å’Œå…³ç³»</title>
      <link href="/wang-thread/120-sync-codeblock-method/"/>
      <url>/wang-thread/120-sync-codeblock-method/</url>
      
        <content type="html"><![CDATA[<p>synchronizedå…³é”®å­—åŒæ­¥æ–¹æ³•çš„ä½¿ç”¨</p><p>ä»£ç ï¼š</p><pre><code class="java">// å•çº¿ç¨‹è¿è¡Œsynchronizedæ–¹æ³•é‡Œè¾¹çš„å†…å®¹@Overridepublic synchronized void run() {    while (true) {        // 1        if (index &gt; MAX) {            break;        }        try {            Thread.sleep(5);        } catch (InterruptedException e) {            e.printStackTrace();        }        System.out.println(Thread.currentThread().getName() + &quot; çš„å·ç æ˜¯ï¼š&quot; + (index++));        // 2    }}</code></pre><p><strong>è¿è¡Œç»“æœï¼šåªæœ‰çº¿ç¨‹t1è¿è¡Œå¹¶è¾“å‡ºä¿¡æ¯ã€‚</strong></p><p>åˆ†æï¼šä¸‰ä¸ªçº¿ç¨‹åŒæ—¶å»äº‰æŠ¢synchronizedçš„æ–¹æ³•é”ï¼Œæ­¤æ—¶çº¿ç¨‹t1äº‰æŠ¢åˆ°é”ç„¶åè¿›å…¥åŒæ­¥æ–¹æ³•è¿è¡Œç¨‹åºï¼Œä¸€ç›´åˆ°è¿è¡Œå®Œæˆï¼›ç„¶åçº¿ç¨‹t2äº‰æŠ¢åˆ°é”å¹¶è¿›å…¥åŒæ­¥æ–¹æ³•ï¼Œä½†æ˜¯æ­¤æ—¶<code>index &gt; MAX</code>åªèƒ½è·³å‡ºç¨‹åºã€‚çº¿ç¨‹t3äº¦æ˜¯å¦‚æ­¤ã€‚</p><p>æ³¨ï¼šåŒæ­¥ä»£ç å—çš„é”ä¸ºLOCKé”ï¼›åŒæ­¥æ–¹æ³•çš„é”ä¸ºthisé”</p><p>æ­¤æ—¶ï¼Œåº”è¯¥å¦‚ä½•ä½¿ç”¨synchronizedåŒæ­¥æ–¹æ³•æ¥å®ç°åŒæ­¥è¿è¡Œå‘¢ï¼Ÿ</p><pre><code class="java">@Overridepublic void run() {    while (true) {        if (ticket()) {            break;        }    }}private synchronized boolean ticket() {    // 1. getField    if (index &gt; MAX) {        return true;    }    Thread.sleep(5);        // index++; =&gt; index = index + 1;    // 1. get Field index.    // 2. index = index + 1;    // 3. put Field index.    System.out.println(Thread.currentThread().getName() + &quot; çš„å·ç æ˜¯ï¼š&quot; + (index++));    return false;}private boolean ticket2() {    synchronized (this) {        if (index &gt; MAX) {            return true;        }        try {            Thread.sleep(5);        } catch (InterruptedException e) {            e.printStackTrace();        }        System.out.println(Thread.currentThread().getName() + &quot; çš„å·ç æ˜¯ï¼š&quot; + (index++));        return false;    }}</code></pre><p>ä½¿ç”¨åŒæ­¥ä»£ç å—çš„åŸåˆ™ï¼šä½¿ç”¨synchronizedå…³é”®å­—åº”å°½é‡å°åœ°ç»™å…±äº«æ•°æ®åŠ é”</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>119-ç»“åˆjconsole,jstackä»¥åŠæ±‡ç¼–æŒ‡ä»¤è®¤è¯†synchronizedå…³é”®å­—</title>
      <link href="/wang-thread/119-synchronized/"/>
      <url>/wang-thread/119-synchronized/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€èŠ‚ä½¿ç”¨çš„synchronizedåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ä¾‹å­ï¼šåœ¨åŠ¨ç‰©å›­æ£€ç¥¨çš„æ—¶å€™ï¼ˆå‰æï¼šåªæœ‰ä¸€å°æ£€ç¥¨æœºï¼Œæ¸¸å®¢æ²¡æœ‰æ’é˜Ÿï¼‰ï¼Œæ¯æ¬¡åªèƒ½æœ‰ä¸€ä½æ¸¸å®¢é€šè¿‡æ£€ç¥¨æœºè¿›å…¥åŠ¨ç‰©å›­ã€‚æ¸¸å®¢ç±»æ¯”å¤šä¸ªçº¿ç¨‹ï¼Œæ£€ç¥¨æœºç±»æ¯”synchronizedã€‚æ­¤æ—¶synchronizedå†…éƒ¨ä¸ºå•çº¿ç¨‹ï¼Œ<strong>ä¸²è¡ŒåŒ–è¿è¡Œç¨‹åºä»£ç </strong></p><p>ç›®çš„ï¼šè®©synchronizedä»£ç å—é‡Œè¾¹çš„ä»£ç ä¸²è¡ŒåŒ–è¿è¡Œï¼Œè®©å…±äº«æ•°æ®ä¸²è¡Œè¢«æ“ä½œã€‚</p><p>ä»£ç ï¼š</p><pre><code class="java">public class SynchronizedTest {    // ä»£ç è§„èŒƒï¼šfinalå‘½åçš„å˜é‡éœ€è¦ä½¿ç”¨å¤§å†™    private static final Object LOCK = new Object();    public static void main(String[] args) {        // ä»»åŠ¡        Runnable runnable = () -&gt; {            synchronized (LOCK) {                Thread.sleep(500_000);            }        };        // åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹        Thread t1 = new Thread(runnable);        Thread t2 = new Thread(runnable);        Thread t3 = new Thread(runnable);        t1.start();t2.start();t3.start();    }}</code></pre><h2 id="jconsoleå·¥å…·"><a href="#jconsoleå·¥å…·" class="headerlink" title="jconsoleå·¥å…·"></a>jconsoleå·¥å…·</h2><ol><li><p>åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š<code>jconsole</code>ã€‚æ‰“å¼€Javaç›‘è§†å’Œç®¡ç†æ§åˆ¶å°ï¼Œå¹¶é€‰æ‹©åä¸ºSynchronizedTestçš„æœ¬åœ°è¿›ç¨‹</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g9996491lpj30z80u04am.jpg" alt="Javaç›‘è§†å’Œç®¡ç†æ§åˆ¶å°" style="zoom:40%;" /></li><li><p>ç‚¹å‡»çº¿ç¨‹ï¼ŒæŸ¥çœ‹Thread0ã€Thread1ã€Thread2</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g999atar2vj30s40nyq8k.jpg" alt="çº¿ç¨‹Threadä¿¡æ¯" style="zoom:50%;" /><p>Thread-0ï¼šçŠ¶æ€: TIMED_WAITING</p><p>Thread-1ï¼šçŠ¶æ€: java.lang.Object@20a5a1a4ä¸Šçš„BLOCKED, æ‹¥æœ‰è€…: Thread-0</p><p>Thread-2ï¼šçŠ¶æ€: java.lang.Object@20a5a1a4ä¸Šçš„BLOCKED, æ‹¥æœ‰è€…: Thread-0</p></li></ol><h2 id="jstackå·¥å…·"><a href="#jstackå·¥å…·" class="headerlink" title="jstackå·¥å…·"></a>jstackå·¥å…·</h2><ol><li><p>åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š<code>jps</code></p><pre><code class="shell">1488 Launcher1489 SynchronizedTest1491 Jps500 570 RemoteMavenServer36814 KotlinCompileDaemon</code></pre></li><li><p>åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š<code>jstack 1489</code></p><pre><code class="shell">Full thread dump Java HotSpot(TM) 64-Bit Server VM (25.221-b11 mixed mode):&quot;Thread-2&quot; #21 prio=5 os_prio=31 tid=0x00007f968c0aa800 nid=0x9f03 waiting for monitor entry [0x0000700008441000]   java.lang.Thread.State: BLOCKED (on object monitor)    at com.tuyrk.chapter07.SynchronizedTest.lambda$main$0(SynchronizedTest.java:18)    - waiting to lock &lt;0x000000076adb5948&gt; (a java.lang.Object)    at com.tuyrk.chapter07.SynchronizedTest$$Lambda$1/500977346.run(Unknown Source)    at java.lang.Thread.run(Thread.java:748)&quot;Thread-1&quot; #20 prio=5 os_prio=31 tid=0x00007f968c0a9800 nid=0x6a03 waiting for monitor entry [0x000070000833e000]   java.lang.Thread.State: BLOCKED (on object monitor)    at com.tuyrk.chapter07.SynchronizedTest.lambda$main$0(SynchronizedTest.java:18)    - waiting to lock &lt;0x000000076adb5948&gt; (a java.lang.Object)    at com.tuyrk.chapter07.SynchronizedTest$$Lambda$1/500977346.run(Unknown Source)    at java.lang.Thread.run(Thread.java:748)&quot;Thread-0&quot; #19 prio=5 os_prio=31 tid=0x00007f968c0a9000 nid=0x6903 waiting on condition [0x000070000823b000]   java.lang.Thread.State: TIMED_WAITING (sleeping)    at java.lang.Thread.sleep(Native Method)    at com.tuyrk.chapter07.SynchronizedTest.lambda$main$0(SynchronizedTest.java:18)    - locked &lt;0x000000076adb5948&gt; (a java.lang.Object)    at com.tuyrk.chapter07.SynchronizedTest$$Lambda$1/500977346.run(Unknown Source)    at java.lang.Thread.run(Thread.java:748)&quot;Monitor Ctrl-Break&quot; #5 daemon prio=5 os_prio=31 tid=0x00007f9690127000 nid=0x3c03 runnable [0x000070000730e000]   java.lang.Thread.State: RUNNABLE</code></pre><p>çº¿ç¨‹é”LOCKå³ä¸ºMONITORï¼ˆç›‘è§†å™¨ï¼‰</p></li></ol><h2 id="æ±‡ç¼–æŒ‡ä»¤"><a href="#æ±‡ç¼–æŒ‡ä»¤" class="headerlink" title="æ±‡ç¼–æŒ‡ä»¤"></a>æ±‡ç¼–æŒ‡ä»¤</h2><ol><li><p>åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š<code>javap -c 01-thread-base/target/classes/com/tuyrk/chapter07/TicketWindowRunnable.class</code></p><pre><code class="shell">Compiled from &quot;TicketWindowRunnable.java&quot;public class com.tuyrk.chapter07.TicketWindowRunnable implements java.lang.Runnable {  public com.tuyrk.chapter07.TicketWindowRunnable();    Code:       0: aload_0       1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V       4: aload_0       5: iconst_1       6: putfield      #2                  // Field index:I       9: aload_0      10: new           #3                  // class java/lang/Object      13: dup      14: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V      17: putfield      #4                  // Field MONITOR:Ljava/lang/Object;      20: return  public void run();    Code:       0: aload_0       1: getfield      #4                  // Field MONITOR:Ljava/lang/Object;       4: dup       5: astore_1       6: monitorenter       7: aload_0       8: getfield      #2                  // Field index:I      11: sipush        500      14: if_icmple     22      17: aload_1      18: monitorexit      19: goto          93      22: ldc2_w        #6                  // long 5l      25: invokestatic  #8                  // Method java/lang/Thread.sleep:(J)V      28: goto          36      31: astore_2      32: aload_2      33: invokevirtual #10                 // Method java/lang/InterruptedException.printStackTrace:()V      36: getstatic     #11                 // Field java/lang/System.out:Ljava/io/PrintStream;      39: new           #12                 // class java/lang/StringBuilder      42: dup      43: invokespecial #13                 // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V      46: invokestatic  #14                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;      49: invokevirtual #15                 // Method java/lang/Thread.getName:()Ljava/lang/String;      52: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;      55: ldc           #17                 // String  çš„å·ç æ˜¯ï¼š      57: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;      60: aload_0      61: dup      62: getfield      #2                  // Field index:I      65: dup_x1      66: iconst_1      67: iadd      68: putfield      #2                  // Field index:I      71: invokevirtual #18                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;      74: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;      77: invokevirtual #20                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V      80: aload_1      81: monitorexit      82: goto          90      85: astore_3      86: aload_1      87: monitorexit      88: aload_3      89: athrow      90: goto          0      93: return    Exception table:       from    to  target type          22    28    31   Class java/lang/InterruptedException           7    19    85   any          22    82    85   any          85    88    85   any}</code></pre><p>getfieldã€putfield</p><p>monitorenterã€monitorexit</p></li></ol><pre><code class="shell">javap --help</code></pre><pre><code class="shell">ç”¨æ³•: javap &lt;options&gt; &lt;classes&gt;å…¶ä¸­, å¯èƒ½çš„é€‰é¡¹åŒ…æ‹¬:  -help  --help  -?        è¾“å‡ºæ­¤ç”¨æ³•æ¶ˆæ¯  -version                 ç‰ˆæœ¬ä¿¡æ¯  -v  -verbose             è¾“å‡ºé™„åŠ ä¿¡æ¯  -l                       è¾“å‡ºè¡Œå·å’Œæœ¬åœ°å˜é‡è¡¨  -public                  ä»…æ˜¾ç¤ºå…¬å…±ç±»å’Œæˆå‘˜  -protected               æ˜¾ç¤ºå—ä¿æŠ¤çš„/å…¬å…±ç±»å’Œæˆå‘˜  -package                 æ˜¾ç¤ºç¨‹åºåŒ…/å—ä¿æŠ¤çš„/å…¬å…±ç±»                           å’Œæˆå‘˜ (é»˜è®¤)  -p  -private             æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜  -c                       å¯¹ä»£ç è¿›è¡Œåæ±‡ç¼–  -s                       è¾“å‡ºå†…éƒ¨ç±»å‹ç­¾å  -sysinfo                 æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„ç±»çš„                           ç³»ç»Ÿä¿¡æ¯ (è·¯å¾„, å¤§å°, æ—¥æœŸ, MD5 æ•£åˆ—)  -constants               æ˜¾ç¤ºæœ€ç»ˆå¸¸é‡  -classpath &lt;path&gt;        æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®  -cp &lt;path&gt;               æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®  -bootclasspath &lt;path&gt;    è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½®</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>118-æ•°æ®åŒæ­¥çš„å¼•å…¥ä¸Synchronizedçš„ç®€å•ä»‹ç»</title>
      <link href="/wang-thread/118-sync-base/"/>
      <url>/wang-thread/118-sync-base/</url>
      
        <content type="html"><![CDATA[<p>é€»è¾‘æ‰§è¡Œå•å…ƒ-ä»»åŠ¡</p><pre><code class="java">private int index = 1;private static final int MAX = 500;@Overridepublic void run() {    while (true) {        if (index &gt; MAX) {            break;        }        Thread.sleep(5);        System.out.println(Thread.currentThread().getName() + &quot; çš„å·ç æ˜¯ï¼š&quot; + (index++));    }}</code></pre><p>çº¿ç¨‹è°ƒç”¨</p><pre><code class="java">// ä¸€ä¸ªrunnableå®ä¾‹è¢«å¤šä¸ªçº¿ç¨‹å…±äº«TicketWindowRunnable ticketWindow = new TicketWindowRunnable();Thread windowThread1 = new Thread(ticketWindow, &quot;ä¸€å·çª—å£&quot;);Thread windowThread2 = new Thread(ticketWindow, &quot;äºŒå·çª—å£&quot;);Thread windowThread3 = new Thread(ticketWindow, &quot;ä¸‰å·çª—å£&quot;);windowThread1.start();windowThread2.start();windowThread3.start();</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>...äºŒå·çª—å£ çš„å·ç æ˜¯ï¼š501ä¸‰å·çª—å£ çš„å·ç æ˜¯ï¼š502</code></pre><p>åˆ†æä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Ÿ</p><p>å½“index=499çš„æ—¶å€™ï¼Œä¸‰ä¸ªçº¿ç¨‹å‡ä¸æ»¡è¶³index &gt; MAXï¼ŒåŒæ—¶ä¸‰ä¸ªçº¿ç¨‹å‡è¿˜æœªæ‰§è¡Œå®Œæˆindex++ï¼Œä¸‰ä¸ªçº¿ç¨‹éƒ½ä¸ä¼šè¿›å…¥ifï¼Œæ‰€ä»¥éƒ½å¯ä»¥æ‰§è¡Œåè¾¹çš„è¾“å‡ºè¯­å¥ã€‚</p><p>è§£å†³æ–¹æ³•ï¼šä½¿ç”¨synchronizedåŒæ­¥æ–¹æ³•ã€‚</p><pre><code class="java">synchronized (MONITOR) {    if (index &gt; MAX) {        break;    }    try {        Thread.sleep(5);    } catch (InterruptedException e) {        e.printStackTrace();    }    System.out.println(Thread.currentThread().getName() + &quot; çš„å·ç æ˜¯ï¼š&quot; + (index++));}</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>117-Thread APIç»¼åˆå®æˆ˜ï¼Œç¼–å†™ThreadServiceå®ç°æš´åŠ›ç»“æŸçº¿ç¨‹çš„ç»¼åˆå®æˆ˜</title>
      <link href="/wang-thread/117-force-stop-thread/"/>
      <url>/wang-thread/117-force-stop-thread/</url>
      
        <content type="html"><![CDATA[<p>æ€è€ƒï¼š</p><p>åœ¨è¯»æ“ä½œçš„è¿‡ç¨‹ä¸­çº¿ç¨‹è¢«é˜»å¡ä½blockedã€‚æ­¤æ—¶æ²¡æœ‰æœºä¼šæ‰“æ–­æˆ–è¯»flagï¼Œçº¿ç¨‹ä¸èƒ½ç›‘å¬åˆ°æ‰“æ–­æ“ä½œã€‚è¿™ç§æƒ…å†µå¦‚ä½•åœæ­¢çº¿ç¨‹ï¼Ÿæš´åŠ›ã€‚</p><pre><code class="java">@Overridepublic void run() {    // connection or read file}</code></pre><p>æ­¤æ—¶ï¼Œåœ¨JDKæä¾›çš„æ–¹æ³•ä¸­åªæœ‰stop()å¯èƒ½é€šè¿‡æš´åŠ›çš„æ–¹å¼å…³é—­çº¿ç¨‹ï¼Œä½†æ˜¯stop()å·²ç»è¢«å®˜æ–¹ä¸æ¨èä½¿ç”¨ã€‚å¯ä»¥é€šè¿‡ä¸€äº›å°æŠ€å·§æ¥å®ç°ï¼Œæ“ä½œæ–¹æ³•å¦‚ä¸‹ã€‚</p><p>JDKæä¾›çš„æ–¹æ³•ä¸èƒ½ä½¿ç”¨ï¼Œæ­¤æ—¶è‡ªå·±å°è£…ä¸€ä¸ªServiceã€‚</p><p>æ€è·¯ï¼šæŠŠä»»åŠ¡çº¿ç¨‹è®¾ç½®ä¸ºè°ƒç”¨çº¿ç¨‹çš„å®ˆæŠ¤çº¿ç¨‹ï¼Œé€šè¿‡mainæ¥å¯åŠ¨è°ƒç”¨çº¿ç¨‹ï¼Œä»è€Œæ‰§è¡Œä»»åŠ¡çº¿ç¨‹ã€‚å½“éœ€è¦åœæ­¢çº¿ç¨‹çš„æ—¶å€™åªéœ€è¦ä¸­æ–­è°ƒç”¨çº¿ç¨‹å³å¯ï¼Œè°ƒç”¨çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œä¸ºå®ˆæŠ¤çº¿ç¨‹çš„ä»»åŠ¡çº¿ç¨‹ä¼šè‡ªåŠ¨åœæ­¢ã€‚</p><pre><code class="java">public class ThreadService {    // è°ƒç”¨çº¿ç¨‹    private Thread executeThread;    private boolean finished = false;    /**     * æ‰§è¡Œçº¿ç¨‹     * @param task ä»»åŠ¡     */    public void execute(Runnable task) {        this.executeThread = new Thread(() -&gt; {            // ä»»åŠ¡æ‰§è¡Œçº¿ç¨‹            Thread runner = new Thread(task);            runner.setDaemon(true);            runner.start();            try {                runner.join();                finished = true;            } catch (InterruptedException e) {}        });        this.executeThread.start();    }    /**     * å…³é—­çº¿ç¨‹     * @param mills çº¿ç¨‹æœ€é•¿æ‰§è¡Œæ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰     */    public void shutdown(long mills) {        long currentTime = System.currentTimeMillis();        // å½“ä»»åŠ¡æœªå®Œæˆæ‰§è¡Œã€‚        while (!finished) {            // å¦‚æœè¶…æ—¶ã€‚            if (System.currentTimeMillis() - currentTime &gt;= mills) {                System.out.println(&quot;ä»»åŠ¡è¶…æ—¶ï¼Œéœ€è¦ç»“æŸçº¿ç¨‹ï¼&quot;);                executeThread.interrupt();                break;            }            // æ—¢æœªå®Œæˆä»»åŠ¡ï¼Œä¹Ÿæ²¡è¶…æ—¶            try {                Thread.sleep(0, 1);            } catch (InterruptedException e) {                System.out.println(&quot;æ‰§è¡Œçº¿ç¨‹è¢«æ‰“æ–­ï¼&quot;);                break;            }        }        finished = false;    }}</code></pre><p>é€šè¿‡mainè°ƒç”¨å®ç°å¯åŠ¨çº¿ç¨‹å’Œä¸­æ–­çº¿ç¨‹ã€‚</p><pre><code class="java">public static void main(String[] args) {    ThreadService service = new ThreadService();    long startTime = System.currentTimeMillis();    service.execute(() -&gt; {        // 1. load a very heavy resource.        /*while (true) {        }*/        // 2. çº¿ç¨‹æ‰§è¡Œ5såç»“æŸ        try {            Thread.sleep(5_000);        } catch (InterruptedException e) {        }    });    service.shutdown(10_000);    long endTime = System.currentTimeMillis();    System.out.println(&quot;æ‰§è¡Œæ—¶é—´ä¸ºï¼š&quot; + (endTime - startTime));}</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>116-é‡‡ç”¨ä¼˜é›…çš„æ–¹å¼ç»“æŸçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/wang-thread/116-graceful-stop-thread/"/>
      <url>/wang-thread/116-graceful-stop-thread/</url>
      
        <content type="html"><![CDATA[<p>Graceful thread stop</p><ol><li><p>ä½¿ç”¨å¼€å…³å˜é‡æ§åˆ¶æ˜¯å¦å¯åŠ¨</p><pre><code class="java">private volatile boolean start = true;@Overridepublic void run() {    while (start) {        // ...    }}public void shutdown() {    this.start = false;}</code></pre><pre><code class="java">worker.start();Thread.sleep(3_000);worker.shutdown();</code></pre><p>å®ç”¨åœºæ™¯ï¼šå½“ç¨‹åºéœ€è¦æ‰¹é‡è·å–æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥å¼€è¾Ÿå¤šä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œæ¯ä¸ªçº¿ç¨‹è·å–ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå½“ç¨‹åºæ‰§è¡Œå®Œæˆåéœ€è¦é‡Šæ”¾èµ„æºï¼Œå³å…³é—­çº¿ç¨‹ã€‚ä½†æ˜¯æŸäº›çº¿ç¨‹å¯èƒ½ä¼šå‡ºç°é—®é¢˜å¯¼è‡´æ— æ³•æ­£å¸¸å…³é—­ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨å¼€å…³å˜é‡æ¥æ§åˆ¶çº¿ç¨‹å…³é—­ã€‚JVMä¸­çš„çº¿ç¨‹ä¸»è¦æ˜¯æ”¾åœ¨æ ˆå†…å­˜ä¸­ï¼Œä½†æ˜¯æ ˆç©ºé—´å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œå¦‚æœçº¿ç¨‹ä¸€ç›´å­˜åœ¨å¹¶è¶Šæ¥è¶Šå¤šå¯èƒ½å‡ºç°æ ˆå†…å­˜æº¢å‡ºçš„æƒ…å†µã€‚</p></li><li><p>é€šè¿‡æ‰“æ–­çš„æ–¹å¼å®ç°</p><ul><li><p>æ‰“æ–­sleep()</p><pre><code class="java">@Overridepublic void run() {    while (true) {        // 1. sleep()        try {            Thread.sleep(1);        } catch (InterruptedException e) {            break;// return;        }    }    // ... catchä¸­ä½¿ç”¨break;å¯ä»¥åœ¨while()åæ‰§è¡Œå…¶ä»–æ“ä½œ    System.out.println(&quot;break-opera after while&quot;);}</code></pre></li><li><p>æ‰“æ–­if</p><pre><code class="java">@Overridepublic void run() {    while (true) {        // 2. if        if (Thread.interrupted()) {            break;// return;        }    }    // ... catchä¸­ä½¿ç”¨break;å¯ä»¥åœ¨while()åæ‰§è¡Œå…¶ä»–æ“ä½œ    System.out.println(&quot;break-opera after while&quot;);}</code></pre></li></ul><pre><code class="java">worker.start();Thread.sleep(3_000);worker.interrupt();</code></pre></li></ol><p>æ€è€ƒï¼š</p><p>åœ¨è¯»æ“ä½œçš„è¿‡ç¨‹ä¸­çº¿ç¨‹è¢«é˜»å¡ä½blockedã€‚æ­¤æ—¶æ²¡æœ‰æœºä¼šæ‰“æ–­æˆ–è¯»flagï¼Œçº¿ç¨‹ä¸èƒ½ç›‘å¬åˆ°æ‰“æ–­æ“ä½œã€‚è¿™ç§æƒ…å†µå¦‚ä½•åœæ­¢çº¿ç¨‹ï¼Ÿæš´åŠ›ã€‚</p><pre><code class="java">@Overridepublic void run() {    // connection or read file}</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1043-Kafkaæµå¤„ç†å¹³å°</title>
      <link href="/imooc/1043-Kafka/"/>
      <url>/imooc/1043-Kafka/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/1043" target="_blank" rel="noopener">https://www.imooc.com/learn/1043</a></p><p>ç®€ä»‹ï¼šKafkaæ˜¯ç›®å‰ä¸»æµçš„æµå¤„ç†å¹³å°ï¼ŒåŒæ—¶ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—å®¶æ—çš„ä¸€å‘˜ï¼Œå…¶é«˜ååæ€§ä½œä¸ºå¾ˆå¤šåœºæ™¯ä¸‹çš„ä¸»æµé€‰æ‹©ã€‚åŒæ—¶ä½œä¸ºæµå¤„ç†å¹³å°ï¼Œåœ¨å¤§æ•°æ®å¼€å‘ä¸­ï¼Œä½œä¸ºé»åˆå‰‚ä¸²è”å„ä¸ªç³»ç»Ÿã€‚æœ¬è¯¾åˆ†ä¸ºå››å¤§éƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†ä»‹ç»Kafkaç›¸å…³æ¦‚å¿µå’ŒåŸºæœ¬ä¿¡æ¯ï¼›ç¬¬äºŒéƒ¨åˆ†åˆ™ä»Kafkaçš„ç»“æ„å‡ºå‘ï¼Œä»£é¢†å¤§å®¶äº†è§£Kafkaçš„è®¾è®¡ä¸æ€æƒ³ï¼›ç¬¬ä¸‰éƒ¨åˆ†åˆ™ä»å®æˆ˜å‡ºå‘ï¼Œç»“åˆKafkaçš„åº”ç”¨åœºæ™¯ï¼Œä¸€æ­¥ä¸€æ­¥ç»“åˆä»£ç æŒæ¡Kafkaçš„ç”¨æ³•ã€‚æœ€åï¼Œæˆ‘ä»¬å­¦ä¹ å’Œæ¢ç©¶Kafkaçš„é«˜çº§ç‰¹æ€§ï¼Œèä¼šè´¯é€šå¹¶äº‰å–å¯ä»¥åœ¨æ—¥å¸¸å…¶ä»–å¼€å‘å·¥ä½œä¸­ä½¿ç”¨Kafkaç»™æˆ‘ä»¬å¸¦æ¥çš„æŠ€æœ¯èƒ½é‡ã€‚è¯¾ç¨‹é…å¥—ä»£ç å‚è€ƒï¼š<a href="https://github.com/AnAngryMan/KafkaSimpleExample" target="_blank" rel="noopener">https://github.com/AnAngryMan/KafkaSimpleExample</a></p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>è¯¾ç¨‹ä»‹ç»</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç»"></a>1-1 è¯¾ç¨‹ä»‹ç»</h3><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g92kvgdkiuj30vi0q2795.jpg" alt="Kafkaæ•°æ®æµ" style="zoom:30%;" /><p>è¯¾ç¨‹å®‰æ’ï¼š</p><ul><li>Kafkaæ¦‚å¿µè§£æ</li><li>Kafkaç»“æ„è®¾è®¡</li><li>Kafkaåœºæ™¯ä¸åº”ç”¨</li><li>Kafkaé«˜çº§ç‰¹æ€§</li></ul><h2 id="ç¬¬2ç« -ä»€ä¹ˆæ˜¯Kafka"><a href="#ç¬¬2ç« -ä»€ä¹ˆæ˜¯Kafka" class="headerlink" title="ç¬¬2ç«  ä»€ä¹ˆæ˜¯Kafka"></a>ç¬¬2ç«  ä»€ä¹ˆæ˜¯Kafka</h2><blockquote><p>æœ¬ç« èŠ‚è®²è§£Kafkaçš„ç”±æ¥ï¼ŒKafkaçš„å®šä½å’ŒåŸºæœ¬æ¦‚å¿µã€‚</p></blockquote><h3 id="2-1-ä»€ä¹ˆæ˜¯kafka"><a href="#2-1-ä»€ä¹ˆæ˜¯kafka" class="headerlink" title="2-1 ä»€ä¹ˆæ˜¯kafka"></a>2-1 ä»€ä¹ˆæ˜¯kafka</h3><p>LinkedInå¼€æº</p><ul><li>åˆ†å¸ƒå¼æ•°æ®åŒæ­¥ç³»ç»Ÿ Databus</li><li>é«˜æ€§èƒ½è®¡ç®—å¼•æ“ Cubert</li><li>Javaå¼‚æ­¥å¤„ç†æ¡†æ¶ ParSeq</li><li>Kafkaæµå¤„ç†å¹³å°</li></ul><p>Kafkaå‰ä¸–ä»Šç”Ÿ</p><ul><li>LinkedInå¼€å‘</li><li>2011å¹´åˆå¼€æºï¼ŒåŠ å…¥ApacheåŸºé‡‘ä¼š</li><li>2012å¹´ä»Apache Incubatoræ¯•ä¸š</li><li>Apacheé¡¶çº§å¼€æºé¡¹ç›®</li></ul><p>streaming platform has three key capabilitiesï¼š</p><ul><li>Publish and subscribe to streams of records, similar to a message queue or enterprise messaging system.</li><li>Store streams of records in a fault-tolerant durable way.</li><li>Process streams of records as they occur.</li></ul><p>Kafka is generally used for two broad classes of applicationsï¼š</p><ul><li>Building real-time streaming data pipelines that reliably get data between systems or applications.</li><li>Building real-time streaming applications that transform or react to the streams of data.</li></ul><h2 id="ç¬¬3ç« -Kafkaçš„è®¾è®¡å’Œç»“æ„"><a href="#ç¬¬3ç« -Kafkaçš„è®¾è®¡å’Œç»“æ„" class="headerlink" title="ç¬¬3ç«  Kafkaçš„è®¾è®¡å’Œç»“æ„"></a>ç¬¬3ç«  Kafkaçš„è®¾è®¡å’Œç»“æ„</h2><blockquote><p>æœ¬ç« èŠ‚è®²è§£Kafkaçš„éƒ¨ç½²ç»“æ„ã€å†…éƒ¨è®¾è®¡ç»“æ„å’Œè®¾è®¡ï¼Œè®©ä½ äº†è§£Kafkaé«˜æ•ˆè€Œå¯é çš„åŸå› </p></blockquote><h3 id="3-1-kafkaåŸºæœ¬æ¦‚å¿µ"><a href="#3-1-kafkaåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3-1 kafkaåŸºæœ¬æ¦‚å¿µ"></a>3-1 kafkaåŸºæœ¬æ¦‚å¿µ</h3><blockquote><p>ç‰©ç†æ¦‚å¿µ</p><p>é€»è¾‘æ¦‚å¿µ</p></blockquote><ul><li><p>Producerï¼šæ¶ˆæ¯å’Œæ•°æ®çš„ç”Ÿäº§è€…ï¼Œå‘Kafkaçš„ä¸€ä¸ªtopicå‘å¸ƒæ¶ˆæ¯çš„è¿›ç¨‹/ä»£ç /æœåŠ¡</p></li><li><p>Consumerï¼šæ¶ˆæ¯å’Œæ•°æ®çš„æ¶ˆè´¹è€…ï¼Œè®¢é˜…æ•°æ®ï¼ˆTopicï¼‰å¹¶ä¸”å¤„ç†å…¶å‘å¸ƒçš„æ¶ˆæ¯çš„è¿›ç¨‹/ä»£ç /æœåŠ¡</p></li><li><p>Consumer Groupï¼šé€»è¾‘æ¦‚å¿µã€‚å¯¹äºåŒä¸€ä¸ªTopicï¼Œä¼šå¹¿æ’­ç»™ä¸åŒçš„groupï¼Œä¸€ä¸ªgroupä¸­ï¼Œåªæœ‰ä¸€ä¸ªconsumerå¯ä»¥æ¶ˆè´¹è¯¥æ¶ˆæ¯ã€‚</p></li><li><p>Brokerï¼šç‰©ç†æ¦‚å¿µã€‚Kafkaé›†ç¾¤ä¸­çš„æ¯ä¸ªKafkaèŠ‚ç‚¹</p></li><li><p>Topicï¼šé€»è¾‘æ¦‚å¿µã€‚Kafkaæ¶ˆæ¯çš„ç±»åˆ«ï¼Œå¯¹æ•°æ®è¿›è¡ŒåŒºåˆ†ã€éš”ç¦»</p></li><li><p>Partitionï¼šç‰©ç†æ¦‚å¿µã€‚Kafkaä¸‹æ•°æ®å­˜å‚¨çš„åŸºæœ¬å•å…ƒã€‚ä¸€ä¸ªTopicæ•°æ®ï¼Œä¼šè¢«åˆ†æ•£å­˜å‚¨åˆ°å¤šä¸ªPartitionï¼Œæ¯ä¸€ä¸ªPartitionæ˜¯æœ‰åºçš„ã€‚</p></li><li><p>Replicationï¼šåŒä¸€ä¸ªPartitionå¯èƒ½ä¼šæœ‰å¤šä¸ªReplicaï¼Œå¤šä¸ªReplicaä¹‹é—´çš„æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚</p></li><li><p>Replication Leaderï¼šä¸€ä¸ªPartitionçš„å¤šä¸ªReplicaä¸Šï¼Œéœ€è¦ä¸€ä¸ªLeaderè´Ÿè´£è¯¥Partitionä¸Šä¸Producerå’ŒConsumeräº¤äº’</p></li><li><p>ReplicaManagerï¼šè´Ÿè´£ç®¡ç†å½“å‰brokeræ‰€æœ‰åˆ†åŒºå’Œå‰¯æœ¬çš„ä¿¡æ¯ï¼Œå¤„ç†KafkaControllerå‘èµ·çš„ä¸€äº›è¯·æ±‚ï¼Œå‰¯æœ¬çŠ¶æ€çš„åˆ‡æ¢ã€æ·»åŠ /è¯»å–æ¶ˆæ¯ç­‰</p></li></ul><h3 id="3-2-kafkaæ¦‚å¿µå»¶ä¼¸"><a href="#3-2-kafkaæ¦‚å¿µå»¶ä¼¸" class="headerlink" title="3-2 kafkaæ¦‚å¿µå»¶ä¼¸"></a>3-2 kafkaæ¦‚å¿µå»¶ä¼¸</h3><p>Partitionï¼š</p><ul><li>æ¯ä¸€ä¸ªTopicè¢«åˆ‡åˆ†ä¸ºå¤šä¸ªPartitions</li><li>æ¶ˆè´¹è€…æ•°ç›®å°äºæˆ–ç­‰äºPartitionçš„æ•°ç›®</li><li>Broker Groupä¸­çš„æ¯ä¸€ä¸ªBrokerä¿å­˜Topicçš„ä¸€ä¸ªæˆ–å¤šä¸ªPartitions</li><li>Consumer Groupä¸­çš„ä»…æœ‰ä¸€ä¸ªConsumerè¯»å–Topicçš„ä¸€ä¸ªæˆ–å¤šä¸ªPartitionsï¼Œå¹¶ä¸”æ˜¯å”¯ä¸€çš„Consumer</li></ul><p>Replicationï¼š</p><ul><li>å½“é›†ç¾¤ä¸­æœ‰BrokeræŒ‚æ‰çš„æƒ…å†µï¼Œç³»ç»Ÿå¯ä»¥ä¸»åŠ¨åœ°ä½¿Replicasæä¾›æœåŠ¡</li><li>ç³»ç»Ÿé»˜è®¤è®¾ç½®æ¯ä¸€ä¸ªTopicçš„Replicationçš„ç³»æ•°ä¸º1ï¼Œå¯ä»¥åœ¨åˆ›å»ºTopicæ—¶å•ç‹¬è®¾ç½®ã€‚</li></ul><p>Replicationç‰¹ç‚¹ï¼š</p><ul><li>Replicationçš„åŸºæœ¬å•ä½æ˜¯Topicçš„Partition</li><li>æ‰€æœ‰çš„è¯»å’Œå†™éƒ½ä»Leaderè¿›ï¼ŒFollowersåªæ˜¯ä½œä¸ºå¤‡ä»½</li><li>Followerså¿…é¡»èƒ½å¤ŸåŠæ—¶å¤åˆ¶Leaderçš„æ•°æ®</li><li>å¢åŠ å®¹é”™æ€§ä¸å¯æ‰©å±•æ€§</li></ul><h3 id="3-3-kafkaåŸºæœ¬ç»“æ„"><a href="#3-3-kafkaåŸºæœ¬ç»“æ„" class="headerlink" title="3-3 kafkaåŸºæœ¬ç»“æ„"></a>3-3 kafkaåŸºæœ¬ç»“æ„</h3><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g92ml4h2z8j30sm0ni0z0.jpg" alt="KafkaåŸºæœ¬ç»“æ„" style="zoom:35%;" /><ul><li>Producer API</li><li>Consumer API</li><li>Streams API</li><li>Connectors API</li></ul><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g92mn3gn8uj31ka0r44oe.jpg" alt="KafkaåŸºæœ¬ç»“æ„" style="zoom:30%;" /><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g92mo6igjyj31r805gwic.jpg" alt="Kafkaæ¶ˆæ¯ç»“æ„" style="zoom:50%;" /><ul><li><p>Offsetï¼š</p></li><li><p>Lengthï¼š</p></li><li><p>CRC32ï¼š</p></li><li><p>Magicï¼š</p></li><li><p>attributesï¼š</p></li><li><p>Timestampï¼š</p></li><li><p>Key Lengthï¼š</p></li><li><p>Keyï¼š</p></li><li><p>Value Lengthï¼š</p></li><li><p>Valueï¼š</p></li></ul><h3 id="3-4-kafkaç‰¹ç‚¹"><a href="#3-4-kafkaç‰¹ç‚¹" class="headerlink" title="3-4 kafkaç‰¹ç‚¹"></a>3-4 kafkaç‰¹ç‚¹</h3><p>åˆ†å¸ƒå¼</p><blockquote><p>å¤šåˆ†åŒºã€å¤šå‰¯æœ¬ã€å¤šè®¢é˜…è€…ã€åŸºäºZookeeperè°ƒåº¦</p></blockquote><p>é«˜æ€§èƒ½</p><blockquote><p>é«˜ååé‡ã€ä½å»¶è¿Ÿã€é«˜å¹¶å‘ã€æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</p></blockquote><p>æŒä¹…æ€§ä¸æ‰©å±•æ€§</p><blockquote><p>æ•°æ®å¯æŒä¹…åŒ–ã€å®¹é”™æ€§ã€æ”¯æŒåœ¨çº¿æ°´å¹³æ‰©å±•ã€æ¶ˆæ¯è‡ªåŠ¨å¹³è¡¡</p></blockquote><h2 id="ç¬¬4ç« -Kafkaçš„åº”ç”¨åœºæ™¯å’Œå®æˆ˜"><a href="#ç¬¬4ç« -Kafkaçš„åº”ç”¨åœºæ™¯å’Œå®æˆ˜" class="headerlink" title="ç¬¬4ç«  Kafkaçš„åº”ç”¨åœºæ™¯å’Œå®æˆ˜"></a>ç¬¬4ç«  Kafkaçš„åº”ç”¨åœºæ™¯å’Œå®æˆ˜</h2><blockquote><p>æœ¬ç« èŠ‚å¸¦é¢†å¤§å®¶äº†è§£Kafkaçš„ä¸€äº›åº”ç”¨åœºæ™¯ï¼Œç„¶åä»ç®€å•æ¡ˆä¾‹å’Œå¤æ‚æ¡ˆä¾‹ä¸¤ä¸ªæ¡ˆä¾‹å­¦ä¹ æŒæ¡Kafkaçš„ç”¨æ³•ã€‚</p></blockquote><h3 id="4-1-kafkaåº”ç”¨åœºæ™¯"><a href="#4-1-kafkaåº”ç”¨åœºæ™¯" class="headerlink" title="4-1 kafkaåº”ç”¨åœºæ™¯"></a>4-1 kafkaåº”ç”¨åœºæ™¯</h3><blockquote><p>æ¶ˆæ¯é˜Ÿåˆ—ã€è¡Œä¸ºè·Ÿè¸ªã€å…ƒä¿¡æ¯ç›‘æ§ã€æ—¥å¿—æ”¶é›†ã€æµå¤„ç†ã€äº‹ä»¶æºã€æŒä¹…æ€§æ—¥å¿—ï¼ˆcommit logï¼‰</p></blockquote><h3 id="4-2-kafkaç®€å•æ¡ˆä¾‹"><a href="#4-2-kafkaç®€å•æ¡ˆä¾‹" class="headerlink" title="4-2 kafkaç®€å•æ¡ˆä¾‹"></a>4-2 kafkaç®€å•æ¡ˆä¾‹</h3><ul><li>ç¯å¢ƒå¯åŠ¨</li><li>ç®€å•ç”Ÿäº§è€…</li><li>ç®€å•æ¶ˆè´¹è€…</li></ul><p>ä¸‹è½½ä¸å®‰è£…</p><ul><li><p>Zookeeperä¸‹è½½</p><p><a href="https://zookeeper.apache.org/releases.html#download" target="_blank" rel="noopener">https://zookeeper.apache.org/releases.html#download</a></p></li><li><p>Kafkaä¸‹è½½</p><p><a href="http://kafka.apache.org/downloads" target="_blank" rel="noopener">http://kafka.apache.org/downloads</a></p></li><li><p>å®‰è£…ï¼šè§£å‹ï¼Œé…ç½®ç¯å¢ƒå˜é‡</p></li><li><p>Macä¾¿æ·å®‰è£…ï¼š<code>brew install kafka</code></p></li></ul><pre><code class="shell"># bash1 å¯åŠ¨zookeeperzookeeper-server-start /usr/local/etc/kafka/zookeeper.properties# bash2 å¯åŠ¨Kafkakafka-server-start /usr/local/etc/kafka/server.properties</code></pre><pre><code class="shell"># bash3 åˆ›å»ºtopickafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 3 --topic tuyrk-kafka-topic# æŸ¥çœ‹Kafka topickafka-topics --list --zookeeper localhost:2181# åˆ›å»ºç”Ÿäº§è€…kafka-console-producer --broker-list localhost:9092 --topic tuyrk-kafka-topic</code></pre><pre><code class="shell"># bash4 åˆ›å»ºæ¶ˆè´¹è€…kafka-console-consumer --bootstrap-server localhost:9092 --topic tuyrk-kafka-topic --from-beginning</code></pre><ul><li><code>from-beginning</code>ï¼šä»å¼€å§‹é‡æ–°æ¥æ”¶æ¶ˆæ¯</li></ul><h3 id="4-3-kafkaä»£ç æ¡ˆä¾‹"><a href="#4-3-kafkaä»£ç æ¡ˆä¾‹" class="headerlink" title="4-3 kafkaä»£ç æ¡ˆä¾‹"></a>4-3 kafkaä»£ç æ¡ˆä¾‹</h3><ul><li>å·¥ç¨‹ç»“æ„</li><li>åŸºç¡€ä»£ç </li></ul><p>æ•™å¸ˆæºç ï¼š<a href="https://github.com/AnAngryMan/KafkaSimpleExample" target="_blank" rel="noopener">https://github.com/AnAngryMan/KafkaSimpleExample</a></p><p>å­¦ä¹ æºç ï¼ˆspringboot+kafkaï¼‰ï¼š<a href="https://github.com/tuyrk/learn-imooc" target="_blank" rel="noopener">https://github.com/tuyrk/learn-imooc</a></p><h2 id="ç¬¬5ç« -Kafkaé«˜çº§ç‰¹æ€§"><a href="#ç¬¬5ç« -Kafkaé«˜çº§ç‰¹æ€§" class="headerlink" title="ç¬¬5ç«  Kafkaé«˜çº§ç‰¹æ€§"></a>ç¬¬5ç«  Kafkaé«˜çº§ç‰¹æ€§</h2><blockquote><p>æœ¬ç« èŠ‚å­¦ä¹ Kafkaçš„æ¶ˆæ¯äº‹åŠ¡å’Œé›¶æ‹·è´ï¼Œå‰è€…å­¦ä¹ Kafkaå¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œåè€…å­¦ä¹ Kafkaæ¶ˆæ¯ä¼ é€’çš„é«˜æ•ˆæ€§ã€‚</p></blockquote><h3 id="5-1-kafkaé«˜çº§ç‰¹æ€§ä¹‹æ¶ˆæ¯äº‹åŠ¡"><a href="#5-1-kafkaé«˜çº§ç‰¹æ€§ä¹‹æ¶ˆæ¯äº‹åŠ¡" class="headerlink" title="5-1 kafkaé«˜çº§ç‰¹æ€§ä¹‹æ¶ˆæ¯äº‹åŠ¡"></a>5-1 kafkaé«˜çº§ç‰¹æ€§ä¹‹æ¶ˆæ¯äº‹åŠ¡</h3><p>ä¸ºä»€ä¹ˆè¦æ”¯æŒäº‹åŠ¡ï¼Ÿ</p><ul><li>æ»¡è¶³â€œè¯»å–-å¤„ç†-å†™å…¥â€æ¨¡å¼</li><li>æµå¤„ç†éœ€æ±‚çš„ä¸æ–­å¢å¼º</li><li>ä¸å‡†ç¡®çš„æ•°æ®å¤„ç†çš„å®¹å¿åº¦é™ä½</li></ul><p>æ•°æ®ä¼ è¾“çš„äº‹åŠ¡å®šä¹‰</p><ul><li>æœ€å¤šä¸€æ¬¡ï¼šæ¶ˆæ¯ä¸ä¼šè¢«é‡å¤å‘é€ï¼Œæœ€å¤šè¢«ä¼ è¾“ä¸€æ¬¡ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½ä¸€æ¬¡ä¸ä¼ è¾“</li><li>æœ€å°‘ä¸€æ¬¡ï¼šæ¶ˆæ¯ä¸ä¼šè¢«æ¼å‘é€ï¼Œæœ€å°‘è¢«ä¼ è¾“ä¸€æ¬¡ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½è¢«é‡å¤ä¼ è¾“</li><li>ç²¾ç¡®çš„ä¸€æ¬¡ï¼ˆExactly onceï¼‰ï¼šä¸ä¼šæ¼ä¼ è¾“ä¹Ÿä¸ä¼šé‡å¤ä¼ è¾“ï¼Œæ¯ä¸ªæ¶ˆæ¯éƒ½è¢«ä¼ è¾“ä¸€æ¬¡ä¸”ä»…ä»…ä¼ è¾“ä¸€æ¬¡ã€‚è¿™æ˜¯å¤§å®¶æ‰€æœŸæœ›çš„æƒ…å†µã€‚</li></ul><p>äº‹åŠ¡ä¿è¯</p><ul><li><p>å†…éƒ¨é‡è¯•é—®é¢˜ï¼šProcedureå¹‚ç­‰å¤„ç†</p></li><li><p>å¤šåˆ†åŒºåŸå­å†™å…¥</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g978niwdtvj31ac0gwgos.jpg" alt="å¤šåˆ†åŒºåŸå­å†™å…¥" style="zoom:30%;" /></li></ul><p>äº‹åŠ¡ä¿è¯-é¿å…åƒµå°¸å®ä¾‹</p><ul><li>æ¯ä¸ªäº‹åŠ¡Produceåˆ†é…ä¸€ä¸ªtransaction.idï¼Œåœ¨è¿›ç¨‹é‡æ–°å¯åŠ¨æ—¶èƒ½å¤Ÿè¯†åˆ«ç›¸åŒçš„Producerå®ä¾‹</li><li>Kafkaå¢åŠ äº†ä¸€ä¸ªä¸transaction.idç›¸å…³çš„epochï¼Œå­˜å‚¨æ¯ä¸ªtransaction.idå†…éƒ¨å…ƒæ•°æ®</li><li>ä¸€æ—¦epochè¢«è§¦å‘ï¼Œä»»ä½•å…·æœ‰ç›¸åŒçš„transaction.idå’Œæ›´æ—§çš„epochçš„Producerè¢«è§†ä¸ºåƒµå°¸ï¼ŒKafkaä¼šæ‹’ç»æ¥è‡ªè¿™äº›Producerçš„åç»­äº‹åŠ¡æ€§å†™å…¥</li></ul><h3 id="5-2-kafkaé«˜çº§ç‰¹æ€§ä¹‹é›¶æ‹·è´"><a href="#5-2-kafkaé«˜çº§ç‰¹æ€§ä¹‹é›¶æ‹·è´" class="headerlink" title="5-2 kafkaé«˜çº§ç‰¹æ€§ä¹‹é›¶æ‹·è´"></a>5-2 kafkaé«˜çº§ç‰¹æ€§ä¹‹é›¶æ‹·è´</h3><p>é›¶æ‹·è´ç®€ä»‹ï¼š</p><ul><li>ç½‘ç»œä¼ è¾“æŒä¹…æ€§æ—¥å¿—å—</li><li>Java NIO <code>channel.transforTo()</code>æ–¹æ³•</li><li>Linux sendfileç³»ç»Ÿè°ƒç”¨</li></ul><p>æ–‡ä»¶ä¼ è¾“åˆ°ç½‘ç»œçš„å…¬å…±æ•°æ®è·¯å¾„</p><ul><li>æ“ä½œç³»ç»Ÿå°†æ•°æ®ä»ç£ç›˜è¯»å…¥åˆ°å†…æ ¸ç©ºé—´çš„é¡µç¼“å­˜</li><li>åº”ç”¨ç¨‹åºå°†æ•°æ®ä»å†…æ ¸ç©ºé—´è¯»å…¥åˆ°ç”¨æˆ·ç©ºé—´ç¼“å­˜ä¸­</li><li>åº”ç”¨ç¨‹åºå°†æ•°æ®å†™å›åˆ°å†…æ ¸ç©ºé—´çš„socketç¼“å­˜ä¸­</li><li>æ“ä½œç³»ç»Ÿå°†æ•°æ®ä»socketç¼“å†²åŒºå¤åˆ¶åˆ°ç½‘å¡ç¼“å†²åŒºï¼Œä»¥ä¾¿å°†æ•°æ®ç»ç½‘ç»œå‘å‡º</li></ul><p>é›¶æ‹·è´è¿‡ç¨‹</p><ul><li>æ“ä½œç³»ç»Ÿå°†æ•°æ®ä»ç£ç›˜è¯»å…¥åˆ°å†…æ ¸ç©ºé—´çš„é¡µç¼“å­˜</li><li>å°†æ•°æ®çš„ä½ç½®å’Œé•¿åº¦çš„ä¿¡æ¯çš„æè¿°ç¬¦å¢åŠ è‡³å†…æ ¸ç©ºé—´ï¼ˆsocketç¼“å†²åŒºï¼‰</li><li>æ“ä½œç³»ç»Ÿå°†æ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç½‘å¡ç¼“å†²åŒºï¼Œä»¥ä¾¿å°†æ•°æ®ç»ç½‘ç»œå‘å‡º</li></ul><p>æ–‡ä»¶ä¼ è¾“åˆ°ç½‘ç»œçš„å…¬å…±æ•°æ®è·¯å¾„æ¼”å˜</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g979vkbrulj31u00lutb5.jpg" alt="æ–‡ä»¶ä¼ è¾“åˆ°ç½‘ç»œçš„å…¬å…±æ•°æ®è·¯å¾„æ¼”å˜" style="zoom:50%;" /><h2 id="ç¬¬6ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬6ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬6ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬6ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>è¯¾ç¨‹æ€»ç»“</p></blockquote><h3 id="6-1-è¯¾ç¨‹æ€»ç»“"><a href="#6-1-è¯¾ç¨‹æ€»ç»“" class="headerlink" title="6-1 è¯¾ç¨‹æ€»ç»“"></a>6-1 è¯¾ç¨‹æ€»ç»“</h3><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g979ws24pej31ke0u0nka.jpg" alt="Kafkaè¯¾ç¨‹æ€»ç»“" style="zoom:25%;" /><ol><li>åŸºç¡€æ¦‚å¿µä¸ç»“æ„</li><li>ä¸‰ç»´ç‰¹ç‚¹</li><li>åº”ç”¨åœºæ™¯</li><li>åº”ç”¨æ¡ˆä¾‹</li><li>é«˜çº§ç‰¹æ€§</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1193-å‰ç«¯é¢è¯•åŠ åˆ†ç¦éŸ³--nodeåŸºç¡€</title>
      <link href="/imooc/1193-node-base/"/>
      <url>/imooc/1193-node-base/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/1193" target="_blank" rel="noopener">https://www.imooc.com/learn/1193</a></p><p>ç®€ä»‹ï¼šç³»ç»Ÿçš„å­¦ä¹ NodeJSçš„åŸºç¡€ï¼Œç†Ÿç»ƒä½¿ç”¨Nodeçš„æ ¸å¿ƒAPIï¼Œäº†è§£nodeçš„è¿è¡Œè¿‡ç¨‹ï¼Œå­¦ä¼šæ­å»ºè‡ªå·±çš„æœåŠ¡å™¨ï¼Œå¹¶å®ç°æˆ‘ä»¬å¸¸è§çš„ç™»å½•ã€æ³¨å†ŒåŠŸèƒ½ï¼Œæ­å¼€åç«¯å¼€å‘çš„ç¥ç§˜é¢çº±ã€‚</p></blockquote><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><h3 id="1-1-è¯¾ç¨‹ç®€ä»‹-08-47"><a href="#1-1-è¯¾ç¨‹ç®€ä»‹-08-47" class="headerlink" title="1-1 è¯¾ç¨‹ç®€ä»‹ (08:47)"></a>1-1 è¯¾ç¨‹ç®€ä»‹ (08:47)</h3><p>ä¸ºä»€ä¹ˆè¦å­¦node</p><ul><li>ä½¿è‡ªå·±æ›´å…¨é¢ï¼Œæœ‰å¤§å±€è§‚</li><li>æå‡è¯è¯­æƒ</li><li>å‡èŒåŠ è–ªçš„ç­¹ç </li></ul><p>Nodeçš„ä½œç”¨å’Œåº”ç”¨</p><ul><li>è„±ç¦»æµè§ˆå™¨è¿è¡ŒJS</li><li>åå°APIç¼–å†™</li><li>Webpackã€Gulpã€Npmç­‰ç­‰</li><li>ä¸­é—´å±‚ï¼šæœåŠ¡å™¨ä¸­è´Ÿè´£IOè¯»å†™çš„ä¸­é—´å±‚æœåŠ¡å™¨</li></ul><p>Nodeçš„ä¼˜ç‚¹ï¼š</p><ul><li>æ€§èƒ½ã€å¼‚æ­¥IOã€å¤„ç†æ•°æ®ã€å®‰å…¨æ€§</li></ul><h3 id="1-2-å­¦ä¹ ç›®æ ‡-03-35"><a href="#1-2-å­¦ä¹ ç›®æ ‡-03-35" class="headerlink" title="1-2 å­¦ä¹ ç›®æ ‡ (03:35)"></a>1-2 å­¦ä¹ ç›®æ ‡ (03:35)</h3><p>ç™»é™†ã€æ³¨å†Œæ¡ˆä¾‹</p><p>å‰ç½®çŸ¥è¯†ï¼šHTML+CSSã€JavaScript</p><h2 id="ç¬¬2ç« -Nodeä»‹ç»"><a href="#ç¬¬2ç« -Nodeä»‹ç»" class="headerlink" title="ç¬¬2ç«  Nodeä»‹ç»"></a>ç¬¬2ç«  Nodeä»‹ç»</h2><h3 id="2-1-Nodeçš„ä¼˜åŠ¿-05-36"><a href="#2-1-Nodeçš„ä¼˜åŠ¿-05-36" class="headerlink" title="2-1 Nodeçš„ä¼˜åŠ¿ (05:36)"></a>2-1 Nodeçš„ä¼˜åŠ¿ (05:36)</h3><ul><li>ä¾¿äºå‰ç«¯å¼€å‘å…¥é—¨</li><li>æ€§èƒ½é«˜</li><li>åˆ©äºå‰ç«¯ä»£ç çš„æ•´åˆ</li></ul><h3 id="2-2-Nodeç¯å¢ƒæ­å»ºå’Œè¿è¡Œ-06-35"><a href="#2-2-Nodeç¯å¢ƒæ­å»ºå’Œè¿è¡Œ-06-35" class="headerlink" title="2-2 Nodeç¯å¢ƒæ­å»ºå’Œè¿è¡Œ (06:35)"></a>2-2 Nodeç¯å¢ƒæ­å»ºå’Œè¿è¡Œ (06:35)</h3><p>Nodeå®˜ç½‘ï¼š<a href="https://nodejs.org/" target="_blank" rel="noopener">https://nodejs.org/</a></p><p>Nodeç¯å¢ƒæ­å»º</p><ul><li>å®˜ç½‘ä¸Šä¸‹è½½node-v-xx.msiå‚»ç“œå¼çš„å®‰è£…åŒ…ã€‚ä¸€è·¯ä¸‹ä¸€æ­¥å®‰è£…å®Œæˆã€‚</li><li>æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š<code>node -v</code></li><li>è¿è¡Œç¨‹åºï¼š<code>node xxx.js</code></li></ul><h3 id="2-3-npmå’ŒåŒ…-13-20"><a href="#2-3-npmå’ŒåŒ…-13-20" class="headerlink" title="2-3 npmå’ŒåŒ… (13:20)"></a>2-3 npmå’ŒåŒ… (13:20)</h3><p>NPMåŒ…ç®¡ç†å™¨ï¼š</p><blockquote><p>NPMï¼šnode package management</p></blockquote><ul><li>package.json</li><li>NPMã€CNPM</li><li>npmå¸¸ç”¨å‘½ä»¤</li></ul><p>æ²¡æœ‰åŒ…ç®¡ç†å™¨çš„æ—¶å€™ï¼š</p><pre><code class="html">&lt;script src=&quot;js/jquery.js&quot;/&gt;&lt;script src=&quot;js/swiper.js&quot;/&gt;&lt;script src=&quot;js/fastclick.js&quot;/&gt;</code></pre><p>CNPMå®‰è£…</p><pre><code class="shell">npm install -g cnpm --registry=https://registry.npm.taobao.org</code></pre><p>NPMå¸¸ç”¨å‘½ä»¤ï¼š</p><pre><code class="shell">npm init # åˆå§‹åŒ–npm install xxx # å®‰è£…npm i xxxnpm uninstall xxx # åˆ é™¤npm un xxxnpm update xxx # æ›´æ–°npm install # å®‰è£…npm i</code></pre><h2 id="ç¬¬3ç« -Nodeçš„æ¨¡å—"><a href="#ç¬¬3ç« -Nodeçš„æ¨¡å—" class="headerlink" title="ç¬¬3ç«  Nodeçš„æ¨¡å—"></a>ç¬¬3ç«  Nodeçš„æ¨¡å—</h2><blockquote><ol><li>å…¨å±€æ¨¡å—ï¼ˆå¯¹è±¡ï¼‰process</li><li>ç³»ç»Ÿæ¨¡å—</li><li>è‡ªå®šä¹‰æ¨¡å—</li></ol></blockquote><h3 id="3-1-Nodeä¸­çš„æ¨¡å—ï¼šå…¨å±€æ¨¡å—-10-34"><a href="#3-1-Nodeä¸­çš„æ¨¡å—ï¼šå…¨å±€æ¨¡å—-10-34" class="headerlink" title="3-1 Nodeä¸­çš„æ¨¡å—ï¼šå…¨å±€æ¨¡å— (10:34)"></a>3-1 Nodeä¸­çš„æ¨¡å—ï¼šå…¨å±€æ¨¡å— (10:34)</h3><blockquote><p>å®šä¹‰ï¼šä½•æ—¶ä½•åœ°éƒ½èƒ½è®¿é—®ï¼Œä¸éœ€è¦å¼•ç”¨</p></blockquote><ol><li><p><strong>process.envï¼šç¯å¢ƒå˜é‡</strong></p><ul><li><p>ä»£ç </p><pre><code class="javascript">console.log(process.env);</code></pre></li><li><p>å‘½ä»¤</p><pre><code class="shell">node index.js</code></pre></li><li><p>ç»“æœ</p><pre><code class="json">{  TERM: &#39;xterm-256color&#39;,  SHELL: &#39;/bin/bash&#39;,  CLICOLOR: &#39;1&#39;,  TMPDIR: &#39;/var/folders/jd/4db9g3vs0c57f0_fwtj6nkfc0000gn/T/&#39;,  Apple_PubSub_Socket_Render: &#39;/private/tmp/com.apple.launchd.gNREVjs4ne/Render&#39;,  USER: &#39;tuyuankun&#39;,  SSH_AUTH_SOCK: &#39;/private/tmp/com.apple.launchd.rYrS6hZYR9/Listeners&#39;,  __CF_USER_TEXT_ENCODING: &#39;0x1F5:0x19:0x34&#39;,  LSCOLORS: &#39;gxfxaxdxcxegedabagacad&#39;,  PATH: &#39;/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Develop/applications/apache-maven-3.6.2/bin:/Develop/applications/elasticsearch-7.3.1/bin:/Develop/applications/elasticsearch-head&#39;,  TERMINAL_EMULATOR: &#39;JetBrains-JediTerm&#39;,  PWD: &#39;/Develop/learn-imooc/1193-node-base&#39;,  XPC_FLAGS: &#39;0x0&#39;,  XPC_SERVICE_NAME: &#39;0&#39;,  M2_HOME: &#39;/Develop/applications/apache-maven-3.6.2&#39;,  SHLVL: &#39;1&#39;,  HOME: &#39;/Users/tuyuankun&#39;,  LOGNAME: &#39;tuyuankun&#39;,  LC_CTYPE: &#39;zh_CN.UTF-8&#39;,  OLDPWD: &#39;/Develop/learn-imooc/1193-node-base/js&#39;,  _: &#39;/usr/local/bin/node&#39;}</code></pre></li></ul></li><li><p><strong>process.argvï¼šè¿è¡Œå‚æ•°</strong></p><ul><li><p>ä»£ç </p><pre><code class="javascript">console.log(process.argv);</code></pre></li><li><p>å‘½ä»¤</p><pre><code class="shell">node index.js a b c</code></pre></li><li><p>ç»“æœ</p><pre><code class="json">[  &#39;/usr/local/Cellar/node/12.10.0/bin/node&#39;,  &#39;/Develop/learn-imooc/1193-node-base/index.js&#39;,  &#39;a&#39;,  &#39;b&#39;,  &#39;c&#39;]</code></pre></li></ul><p>ç®€æ˜“è®¡ç®—å™¨ï¼š</p><pre><code class="javascript">let num1 = parseInt(process.argv[2]);let num2 = parseInt(process.argv[3]);console.log(num1 + num2);</code></pre><pre><code class="shell">node index.js 34 43</code></pre><pre><code class="shell">77</code></pre></li><li><p><strong>__dirnameï¼šå½“å‰ç›®å½•åç§°</strong></p></li></ol><h3 id="3-2-Nodeä¸­çš„æ¨¡å—ï¼šç³»ç»Ÿæ¨¡å—-13-54"><a href="#3-2-Nodeä¸­çš„æ¨¡å—ï¼šç³»ç»Ÿæ¨¡å—-13-54" class="headerlink" title="3-2 Nodeä¸­çš„æ¨¡å—ï¼šç³»ç»Ÿæ¨¡å— (13:54)"></a>3-2 Nodeä¸­çš„æ¨¡å—ï¼šç³»ç»Ÿæ¨¡å— (13:54)</h3><blockquote><p>å®šä¹‰ï¼šéœ€è¦require()ï¼Œä½†ä¸éœ€è¦å•ç‹¬ä¸‹è½½</p></blockquote><ol><li><p><strong>pathï¼šç”¨äºå¤„ç†æ–‡ä»¶è·¯å¾„å’Œç›®å½•è·¯å¾„çš„å®ç”¨å·¥å…·</strong></p><pre><code class="javascript">var path = require(&#39;path&#39;);</code></pre><pre><code class="javascript">path.dirname(&quot;/node/a/c/c/1.jpg&quot;)// æ–‡ä»¶å¤¹åç§°path.basename(&quot;/node/a/c/c/1.jpg&quot;)// æ–‡ä»¶åç§°path.extname(&quot;/node/a/c/c/1.jpg&quot;)// æ–‡ä»¶åç¼€åç§°path.resolve(&quot;/node/a/b/c&quot;, &quot;../../&quot;, &quot;d&quot;)// /node/a/dpath.resolve(__dirname, &quot;index.js&quot;)// index.jsçš„ç»å¯¹è·¯å¾„</code></pre></li><li><p>f sï¼šç”¨äºæ–‡ä»¶è¯»å†™æ“ä½œ</p><pre><code class="javascript">var fs = require(&quot;fs&quot;);</code></pre><ul><li><p>å†™æ“ä½œï¼š</p><pre><code class="javascript">fs.writeFile(&quot;fs.write.txt&quot;, &quot;åˆšä¸‹é£æœº&quot;, function (err) {    if (err) {        throw err;    }});// åŒæ­¥fs.writeFileSync(&quot;fs.writeSync.txt&quot;, &quot;åˆ†å‰²çº¿&quot;);</code></pre></li><li><p>è¯»æ“ä½œï¼š</p><pre><code class="javascript">fs.readFile(&quot;js/helloworld.js&quot;, function (err, data) {        if (err) {            console.log(err);        } else {            console.log(data.toString());        }    });// åŒæ­¥var data = fs.readFileSync(&quot;js/helloworld.js&quot;);</code></pre></li><li><p>è¿½åŠ æ–‡ä»¶</p><pre><code class="javascript">fs.writeFile(&quot;fs.write.txt&quot;, &quot;å¹´å…¥ç™¾ä¸‡&quot;, {flag: &quot;a&quot;}, function (err) {    if (err) {        throw err;    }});</code></pre><pre><code class="javascript">fs.appendFile(&quot;fs.write.txt&quot;, &quot;æ³»è¯&quot;, function (err) {    if (err) {        throw err;    }});</code></pre></li></ul></li></ol><h3 id="3-3-Nodeä¸­çš„æ¨¡å—ï¼šè‡ªå®šä¹‰æ¨¡å—-07-23"><a href="#3-3-Nodeä¸­çš„æ¨¡å—ï¼šè‡ªå®šä¹‰æ¨¡å—-07-23" class="headerlink" title="3-3 Nodeä¸­çš„æ¨¡å—ï¼šè‡ªå®šä¹‰æ¨¡å— (07:23)"></a>3-3 Nodeä¸­çš„æ¨¡å—ï¼šè‡ªå®šä¹‰æ¨¡å— (07:23)</h3><blockquote><p>å®šä¹‰ï¼šrequireè‡ªå·±å°è£…çš„æ¨¡å—</p></blockquote><ul><li>exports</li><li>module</li><li>require</li></ul><pre><code class="javascript">/* mod.js */// 1. å‚æ•°/*exports.a = 1;exports.b = 2;var c = 3;*/// 2. å¯¹è±¡/*module.exports = {    a: 1,    b: 2};*/// 3. æ–¹æ³•/*module.exports = function () {    console.log(&quot;module.exports function&quot;);};*/// 4. ç±»module.exports = class {    constructor(name) {        this.name = name;    }    show() {        console.log(this.name);    }};</code></pre><pre><code class="javascript">/* exports.js */const mod = require(&quot;./mod&quot;);/*console.log(mod.a);// 1console.log(mod.b);// 2console.log(mod.c);// undefined*//*mod();*/let tuyrk = new mod(&quot;tuyrk&quot;);tuyrk.show();</code></pre><p><code>require()</code></p><ol><li>å¦‚æœæœ‰è·¯å¾„ï¼Œå°±å»è·¯å¾„é‡Œé¢æ‰¾</li><li>æ²¡æœ‰çš„è¯å°±å»node_modulesé‡Œé¢æ‰¾</li><li>è·¯å¾„ä¸‹æ²¡æœ‰æ¨¡å—ï¼Œå°±å»nodeçš„å®‰è£…ç›®å½•é‡Œé¢æ‰¾ã€‚</li></ol><h3 id="3-4-æ ¸å¿ƒï¼šhttpæ¨¡å—-11-21"><a href="#3-4-æ ¸å¿ƒï¼šhttpæ¨¡å—-11-21" class="headerlink" title="3-4 æ ¸å¿ƒï¼šhttpæ¨¡å— (11:21)"></a>3-4 æ ¸å¿ƒï¼šhttpæ¨¡å— (11:21)</h3><blockquote><p>æœåŠ¡å™¨å¯¹è±¡ï¼š<code>http.createServer()</code></p></blockquote><pre><code class="javascript">let fs = require(&quot;fs&quot;);let path = require(&quot;path&quot;);let http = require(&quot;http&quot;);http.createServer((req, res) =&gt; {    /*console.log(&quot;æˆ‘æ¥äº†ã€‚&quot;);*/    /*res.write(&quot;index&quot;);    res.end();*/    console.log(req.url);    fs.readFile(`./${req.url}`, (err, data) =&gt; {        if (err) {            console.log(err);            res.writeHead(404);            res.end(&quot;404 not found&quot;);        } else {            res.writeHead(200);            res.end(data);        }    });}).listen(8888);</code></pre><pre><code class="html">&lt;p&gt;æˆ‘æ˜¯http.html&lt;/p&gt;&lt;img src=&quot;../imgs/avatar.jpeg&quot; alt=&quot;avatar.jpeg&quot;&gt;</code></pre><h2 id="ç¬¬4ç« -Nodeä¸­çš„æ•°æ®äº¤äº’"><a href="#ç¬¬4ç« -Nodeä¸­çš„æ•°æ®äº¤äº’" class="headerlink" title="ç¬¬4ç«  Nodeä¸­çš„æ•°æ®äº¤äº’"></a>ç¬¬4ç«  Nodeä¸­çš„æ•°æ®äº¤äº’</h2><h3 id="4-1-GETè¯·æ±‚-13-32"><a href="#4-1-GETè¯·æ±‚-13-32" class="headerlink" title="4-1 GETè¯·æ±‚ (13:32)"></a>4-1 GETè¯·æ±‚ (13:32)</h3><p>å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’çš„ä¸œè¥¿ç§°ä¸ºæŠ¥æ–‡ã€‚</p><p>æŠ¥æ–‡åˆ†ä¸ºï¼šæŠ¥æ–‡å¤´ï¼ˆä¿¡æ¯ï¼Œ&lt;=32Kï¼‰ã€æŠ¥æ–‡ä½“ï¼ˆæ•°æ®&lt;2Gï¼‰ã€‚</p><p>è¯·æ±‚æ–¹å¼ï¼šGETã€POSTã€PUTã€DELETE</p><p>GETè¯·æ±‚</p><ul><li>ä»€ä¹ˆæ˜¯GETè¯·æ±‚ï¼Ÿä¸»è¦æ˜¯è·å–æ•°æ®ã€‚ä¸€æ¬¡æ€§ä¼ è¾“æ•°æ®</li><li>æ•°æ®æ˜¯æ”¾åœ¨URLé‡Œé¢è¿›è¡Œä¼ è¾“ã€‚æŠ¥æ–‡å¤´ã€‚</li><li>å®¹é‡å°ï¼š&lt;32K</li></ul><pre><code class="javascript">let http = require(&quot;http&quot;);let url = require(&quot;url&quot;);http.createServer(((req, res) =&gt; {    console.log(req.url);    // 1. æ— urlæ¨¡å—ï¼ŒåŸå§‹å¤„ç†æ–¹æ³•    /*let [url, query] = req.url.split(&#39;?&#39;);    console.log(url, query);*/    // 2. ä½¿ç”¨urlæ¨¡å—å¤„ç†è·¯å¾„ä¸å‚æ•°    let {pathname, query} = url.parse(req.url, true);    console.log(pathname, query);})).listen(8888);</code></pre><pre><code class="html">&lt;form action=&quot;http://localhost:8888/aaa&quot; method=&quot;get&quot;&gt;    ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;    å¯†ç ï¼š&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;br&gt;    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/form&gt;</code></pre><h3 id="4-2-POSTè¯·æ±‚-12-34"><a href="#4-2-POSTè¯·æ±‚-12-34" class="headerlink" title="4-2 POSTè¯·æ±‚ (12:34)"></a>4-2 POSTè¯·æ±‚ (12:34)</h3><p>POSTè¯·æ±‚</p><ul><li><p>åˆ†æ®µä¼ è¾“æ•°æ®</p></li><li><p>æ•°æ®æ˜¯æ”¾åœ¨bodyé‡Œè¾¹è¿›è¡Œä¼ è¾“ã€‚æŠ¥æ–‡ä½“</p></li><li><p>å®¹é‡å¤§ï¼š2G</p></li></ul><pre><code class="javascript">let http = require(&quot;http&quot;);let querystring = require(&quot;querystring&quot;);http.createServer(((req, res) =&gt; {    let result = [];    req.on(&quot;data&quot;, buffer =&gt; {        result.push(buffer);// åˆ†æ®µä¼ è¾“æ•°æ®ï¼Œå¤šæ¬¡æ‰§è¡Œæ·»åŠ     });    req.on(&quot;end&quot;, () =&gt; {// æ•°æ®å¤„ç†å®Œæˆ        let data = Buffer.concat(result).toString();// æ•°ç»„è½¬buffer        console.log(querystring.parse(data));// å¤„ç†queryString    })})).listen(8888);</code></pre><pre><code class="html">&lt;form action=&quot;http://localhost:8888/aaa&quot; method=&quot;post&quot;&gt;    ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;    å¯†ç ï¼š&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;br&gt;    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/form&gt;</code></pre><p>æ€»ç»“ï¼š</p><ol><li>GET<ul><li>url?username=xxx&amp;password=xxx</li><li>32K</li><li>urlæ¨¡å—</li><li><code>url.parse(req.url, true)</code></li></ul></li><li>POST<ul><li>æ”¾åœ¨è¯·æ±‚ä½“</li><li>2G</li><li>querystringæ¨¡å—</li><li><code>querystring.parse(data)</code></li></ul></li></ol><h2 id="ç¬¬5ç« -æ¡ˆä¾‹"><a href="#ç¬¬5ç« -æ¡ˆä¾‹" class="headerlink" title="ç¬¬5ç«  æ¡ˆä¾‹"></a>ç¬¬5ç«  æ¡ˆä¾‹</h2><h3 id="5-1-æ¥å£ï¼ˆAPIï¼‰-05-59"><a href="#5-1-æ¥å£ï¼ˆAPIï¼‰-05-59" class="headerlink" title="5-1 æ¥å£ï¼ˆAPIï¼‰ (05:59)"></a>5-1 æ¥å£ï¼ˆAPIï¼‰ (05:59)</h3><p>ç™»å½•æ¡†ï¼šç™»é™†ã€æ³¨å†Œ</p><p>æ¥å£è®¾è®¡</p><ul><li>ä»€ä¹ˆæ˜¯æ¥å£ï¼ˆAPIï¼‰ï¼šä¸åŒåŠŸèƒ½å±‚ä¹‹é—´çš„é€šä¿¡è§„åˆ™ç§°ä¸ºæ¥å£</li><li>å‚æ•°ã€è¿”å›å€¼</li></ul><p>ç™»é™†ï¼š</p><pre><code class="shell">GET &#39;/login&#39;username, password</code></pre><pre><code class="json">{  err: 1,  msg: &quot;å¯†ç é”™è¯¯&quot;}</code></pre><p>æ³¨å†Œï¼š</p><pre><code class="shell">POST &#39;/reg&#39;</code></pre><h3 id="5-2-é¡¹ç›®ï¼šå®ç°ç™»å½•å’Œæ³¨å†Œ-30-08"><a href="#5-2-é¡¹ç›®ï¼šå®ç°ç™»å½•å’Œæ³¨å†Œ-30-08" class="headerlink" title="5-2 é¡¹ç›®ï¼šå®ç°ç™»å½•å’Œæ³¨å†Œ (30:08)"></a>5-2 é¡¹ç›®ï¼šå®ç°ç™»å½•å’Œæ³¨å†Œ (30:08)</h3><p>åå°ï¼š</p><pre><code class="javascript">/*login.js*/const http = require(&quot;http&quot;);const url = require(&quot;url&quot;);const querystring = require(&quot;querystring&quot;);const fs = require(&quot;fs&quot;);const path = require(&quot;path&quot;);let user = {    admin: &quot;123456&quot;};http.createServer(((req, res) =&gt; {    // è·å–æ•°æ®    let uri, get, post;    if (req.method === &quot;GET&quot;) {        let {pathname, query} = url.parse(req.url, true);        uri = pathname, get = query;        complete();    } else if (req.method === &quot;POST&quot;) {        let arr = [];        uri = req.url;        req.on(&quot;data&quot;, buffer =&gt; {            arr.push(buffer);        });        req.on(&quot;end&quot;, () =&gt; {            post = querystring.parse(Buffer.concat(arr).toString());            complete();        });    }    // ä¸šåŠ¡æ“ä½œ    // function complete() {}    // è®¾ç½®çŠ¶æ€ç ã€ç¼–ç     function setHead() {        res.writeHead(200, {            &quot;Content-Type&quot;: &quot;text/plain;charset=utf-8&quot;        });    }})).listen(8888);</code></pre><p>é¡µé¢ï¼š</p><pre><code class="html">&lt;!--login.html--&gt;&lt;form&gt;    ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; id=&quot;username&quot;&gt;&lt;br&gt;    å¯†ç ï¼š&lt;input type=&quot;password&quot; id=&quot;password&quot;&gt;&lt;br&gt;    &lt;button id=&quot;login&quot;&gt;ç™»é™†&lt;/button&gt;    &lt;button id=&quot;reg&quot;&gt;æ³¨å†Œ&lt;/button&gt;&lt;/form&gt;</code></pre><h2 id="ç¬¬6ç« -è¯¾ç¨‹å›é¡¾ä¸æ€»ç»“"><a href="#ç¬¬6ç« -è¯¾ç¨‹å›é¡¾ä¸æ€»ç»“" class="headerlink" title="ç¬¬6ç«  è¯¾ç¨‹å›é¡¾ä¸æ€»ç»“"></a>ç¬¬6ç«  è¯¾ç¨‹å›é¡¾ä¸æ€»ç»“</h2><h3 id="6-1-æ€»ç»“æ‰©å±•-11-45"><a href="#6-1-æ€»ç»“æ‰©å±•-11-45" class="headerlink" title="6-1 æ€»ç»“æ‰©å±• (11:45)"></a>6-1 æ€»ç»“æ‰©å±• (11:45)</h3><p>ä½œç”¨ï¼š</p><ol><li>å†™Web API</li><li>ä¸­é—´å±‚</li><li>å‰ç«¯å·¥ç¨‹åŒ–çš„ä¸€äº›å·¥å…·ï¼ˆwebpackã€gulpï¼‰</li></ol><p>ä¼˜åŠ¿ï¼š</p><ol><li>æ€§èƒ½é«˜</li><li>ä¾¿äºå‰ç«¯å…¥æ‰‹</li></ol><p>npmå‘½ä»¤ï¼š</p><blockquote><p>package.json</p></blockquote><pre><code class="shell">npm i xxxnpm un xxx</code></pre><p>ä¸‰å¤§æ¨¡å—</p><ol><li>å…¨å‰§æ¨¡å—</li><li>ç³»ç»Ÿæ¨¡å— requireå¼•å…¥</li><li>è‡ªå®šä¹‰æ¨¡å— è‡ªå·±å°è£… module.export</li></ol><p><strong>é‡ç‚¹ï¼šhttpæ¨¡å—</strong></p><pre><code class="javascript">http.createServer((req, res) =&gt; {    // ...})</code></pre><p>æ•°æ®é€šä¿¡ï¼š</p><ol><li><p>GETè¯·æ±‚</p><ul><li><p>urlæ¨¡å—</p><pre><code class="javascript">url.parse(req.url, true);</code></pre></li></ul></li><li><p>POSTè¯·æ±‚</p></li></ol><ul><li><pre><code class="javascript">let arr = [];req.on(&quot;data&quot;, buffer =&gt; {    arr.push(buffer);   // ...});req.on(&quot;end&quot;, () =&gt; {    Buffer.concat(arr).toString();});querystring.parse(req.url); // username=tuyrk&amp;password=123</code></pre></li></ul><p><strong>ç™»é™†ã€æ³¨å†Œ</strong></p><p>æ¥å£APIã€è®¾è®¡API</p><ul><li><p>GET â€˜/loginâ€™</p></li><li><p>å‚æ•°ï¼šusername,password string object</p></li><li><p>è¿”å›å€¼ï¼š</p><pre><code class="json">{  err: 0,  msg: &quot;xxx&quot;}</code></pre></li></ul><p>æ·±å…¥å­¦ä¹ ï¼šexpress/koa2ã€MongoDB</p>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>115-Threadä¸­æ–­Interruptæ–¹æ³•è¯¦ç»†è®²è§£</title>
      <link href="/wang-thread/115-thread-interrupt/"/>
      <url>/wang-thread/115-thread-interrupt/</url>
      
        <content type="html"><![CDATA[<ul><li><p>interrupt()</p><p>ä¸­æ–­æ­¤çº¿ç¨‹</p></li><li><p>interrupted()</p><p>æµ‹è¯•<strong>å½“å‰çº¿ç¨‹</strong>æ˜¯å¦å·²è¢«ä¸­æ–­ã€‚</p></li><li><p>isInterrupted()</p><p>æµ‹è¯•<strong>æ­¤çº¿ç¨‹</strong>æ˜¯å¦å·²è¢«ä¸­æ–­ã€‚</p></li></ul><p><code>interrupt()</code>ä»…ä»…æ˜¯ä¿®æ”¹interruptçš„çŠ¶æ€ã€‚å¿…é¡»æ˜¯<code>wait()</code>ã€<code>join()</code>ã€<code>sleep()</code>çš„æ—¶å€™æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ä¸­æ–­çº¿ç¨‹ã€‚</p><pre><code class="java">Thread t1 = new Thread(&quot;t1&quot;) {    @Override    public void run() {        while (true) {            // todo...        }    }};t1.start();// startä¹‹åå¤„äºrunnableï¼Œå¹¶ä¸ä¸€å®šé©¬ä¸Šå°±ä¼šrunningã€‚æ‰€ä»¥è®¾ç½®çŸ­æš‚ä¼‘çœ ç­‰å¾…t1å¯åŠ¨Thread.sleep(100);System.out.println(t1.isInterrupted());// falset1.interrupt();System.out.println(t1.isInterrupted());// true</code></pre><ol><li><p>çº¿ç¨‹çŠ¶æ€æ”¹å˜ï¼Œä¸ä¼šæ•è·åˆ°æ‰“æ–­ä¿¡å·</p><pre><code class="java">System.out.println(&quot;&gt;&gt;&quot; + this.isInterrupted());</code></pre></li><li><p><code>sleep()</code>ã€‚çº¿ç¨‹çŠ¶æ€æ”¹å˜ï¼Œä¸”æ•è·åˆ°æ‰“æ–­ä¿¡å·</p><pre><code class="java">try {    Thread.sleep(1_000);} catch (InterruptedException e) {    System.out.println(&quot;æ”¶åˆ°æ‰“æ–­ä¿¡å·ã€‚&quot;);    e.printStackTrace();}</code></pre></li><li><p><code>wait()</code>ã€‚çº¿ç¨‹çŠ¶æ€æ”¹å˜ï¼Œä¸”æ•è·åˆ°æ‰“æ–­ä¿¡å·</p><p>ä½¿ç”¨<code>wait()</code>å¿…é¡»ç»™ä¸€ä¸ªmonitorï¼Œmonitoréœ€ä½¿ç”¨synchronizedåŒ…è£¹ã€‚</p><pre><code class="java">private static final Object MONITOR = new Object();</code></pre><pre><code class="java">synchronized (MONITOR) {    try {        MONITOR.wait(1_000);    } catch (InterruptedException e) {        e.printStackTrace();    }}</code></pre></li><li><p><code>join()</code>ã€‚çº¿ç¨‹çŠ¶æ€æ”¹å˜ï¼Œä¸”æ•è·åˆ°æ‰“æ–­ä¿¡å·</p><p>æ³¨æ„ï¼š<code>t3.join();</code>è¿™é‡Œjoinçš„ä¸æ˜¯t3çº¿ç¨‹ï¼Œè€Œæ˜¯mainçº¿ç¨‹ã€‚æ‰€ä»¥éœ€è¦å¯¹mainçº¿ç¨‹è¿›è¡Œ<code>interrupt()</code></p><pre><code class="java">Thread t3 = new Thread(() -&gt; {    while (true) {}}, &quot;t3&quot;);t3.start();Thread main = Thread.currentThread();Thread t31 = new Thread(() -&gt; {    try {        Thread.sleep(100);    } catch (InterruptedException e) {        e.printStackTrace();    }    main.interrupt();});t31.start();try {    // è¿™é‡Œjoinçš„ä¸æ˜¯t3çº¿ç¨‹ï¼Œè€Œæ˜¯mainçº¿ç¨‹    t3.join();} catch (InterruptedException e) {    e.printStackTrace();}</code></pre></li></ol><p>éé™æ€<code>isInterrupted()</code>å’Œé™æ€<code>interrupted()</code>åŒºåˆ«ï¼š</p><ul><li><p>åœ¨å®ç°Runnableæ¥å£åˆ›å»ºä»»åŠ¡å®ä¾‹æ—¶ï¼Œ<code>isInterrupted()</code>å°†ä¸èƒ½è¢«è·å–</p><pre><code class="java">Thread t2 = new Thread(() -&gt; {    while (true) {        synchronized (MONITOR) {            try {                MONITOR.wait(1_000);            } catch (InterruptedException e) {                // è·å–ä¸åˆ°isInterrupted()                // System.out.println(&quot;wait()-&gt;&quot; + isInterrupted());                System.out.println(&quot;wait()-&gt;&quot; + Thread.interrupted());                e.printStackTrace();            }        }    }}, &quot;t2&quot;);</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>114-Threadçš„joinæ–¹æ³•è¯¦ç»†ä»‹ç»ï¼Œç»“åˆä¸€ä¸ªå…¸å‹æ¡ˆä¾‹</title>
      <link href="/wang-thread/114-thread-join/"/>
      <url>/wang-thread/114-thread-join/</url>
      
        <content type="html"><![CDATA[<p><code>join()</code>æ–¹æ³•</p><blockquote><p>è°ƒç”¨çº¿ç¨‹ä¸€ç›´ç­‰å¾…è¢«è°ƒç”¨çº¿ç¨‹çš„æ‰§è¡Œï¼Œç›´åˆ°è¢«è°ƒç”¨çº¿ç¨‹æ­»äº¡ã€‚</p></blockquote><pre><code class="java">Thread t1 = new Thread(() -&gt; {    IntStream.range(1, 1000).forEach(i -&gt;            System.out.println(Thread.currentThread().getName() + &quot;-&gt;&quot; + i)    );}, &quot;t1&quot;);t1.start();t1.join();IntStream.range(1, 1000).forEach(i -&gt;        System.out.println(Thread.currentThread().getName() + &quot;-&gt;&quot; + i));</code></pre><p>æ³¨ï¼š<code>join()</code>å¿…é¡»æ”¾åœ¨<code>start()</code>ä¹‹åã€‚</p><pre><code class="java">Thread t1 = new Thread(() -&gt; {    IntStream.range(1, 9000).forEach(i -&gt;            System.out.println(Thread.currentThread().getName() + &quot;-&gt;&quot; + i)    );}, &quot;t1&quot;);Thread t2 = new Thread(() -&gt; {    IntStream.range(1, 9000).forEach(i -&gt;            System.out.println(Thread.currentThread().getName() + &quot;-&gt;&quot; + i)    );}, &quot;t2&quot;);t1.start();t2.start();t1.join();t2.join();Optional.of(&quot;All of tasks finish done.&quot;).ifPresent(System.out::println);IntStream.range(1, 1000).forEach(i -&gt;        System.out.println(Thread.currentThread().getName() + &quot;-&gt;&quot; + i));</code></pre><p>æ³¨æ„ï¼š</p><ul><li><p>t1ã€t2äº¤æ›¿æ‰§è¡Œ</p><pre><code class="java">t1.start();t2.start();t1.join();t2.join();</code></pre></li><li><p>å…ˆæ‰§è¡Œt1ï¼Œåœ¨æ‰§è¡Œt2ã€‚æ­¤æ—¶t1åŠ å…¥joinï¼Œt2è¿˜æ²¡å¯åŠ¨ã€‚</p><pre><code class="java">t1.start();t1.join();t2.start();t2.join();</code></pre></li></ul><p>é—®é¢˜ï¼šä¸€äº›åµŒå…¥å¼çš„HTTP Serverï¼Œæ¯”å¦‚jettyï¼Œä¸ºä»€ä¹ˆæŠŠä»»åŠ¡å¯åŠ¨ï¼Œä¸€ä¼šä¹‹åä¼šè‡ªåŠ¨æŒ‚æ‰ï¼Ÿ<br>åŸå› ï¼šåœ¨ä¸»çº¿ç¨‹é€€å‡ºä¹‹åä¼šæŠŠhttp serveræŒ‚æ‰ï¼ˆå®ˆæŠ¤çº¿ç¨‹ï¼‰ï¼Œé¿å…å ç”¨ç«¯å£ã€æµªè´¹èµ„æºã€‚<br>è§£å†³ï¼šä½¿ç”¨<code>Thread.currentThread().join();</code>ã€‚è®©å½“å‰çº¿ç¨‹æ‰§è¡Œï¼Œç›´åˆ°å½“å‰çº¿ç¨‹æ­»æ‰</p><pre><code class="java">public static void main(String[] args) {    // ä¸€ç›´ç­‰å¾…mainçº¿ç¨‹ç»“æŸ,ç›´åˆ°mainçº¿ç¨‹ç»“æŸã€‚    // ç»“æœmainçº¿ç¨‹ä¸€ç›´è¿è¡Œã€‚    Thread.currentThread().join();}</code></pre><p>ä¾‹ï¼šé‡‡é›†æœåŠ¡å™¨èŠ‚ç‚¹çš„ä¿¡æ¯çš„ä¾‹å­ã€‚</p><p>é—®é¢˜ï¼šå¤šä¸ªçº¿ç¨‹å¦‚ä½•å¾—åˆ°å”¯ä¸€çš„é‡‡é›†ç»“æŸæ—¶é—´ï¼Ÿ</p><p>æç¤ºï¼šä½¿ç”¨<code>join()</code>æ–¹æ³•</p><pre><code class="java">public class ThreadJoin3 {    public static void main(String[] args) throws InterruptedException {        long startTimestamp = System.currentTimeMillis();        // å‡è®¾æœ‰ä¸‰å°æœºå™¨ï¼Œå¼€å¯ä¸‰ä¸ªçº¿ç¨‹ã€‚        Thread m1 = new Thread(new CaptureRunnable(&quot;M1&quot;, 10_000L));        Thread m2 = new Thread(new CaptureRunnable(&quot;M2&quot;, 30_000L));        Thread m3 = new Thread(new CaptureRunnable(&quot;M3&quot;, 15_000L));        m1.start();m2.start();m3.start();        m1.join();m2.join();m3.join();        long endTimestamp = System.currentTimeMillis();        System.out.printf(&quot;Save data begin timestamp is %s, end timestamp is %s\n&quot;, startTimestamp, endTimestamp);        System.out.printf(&quot;Spend time is %s&quot;, endTimestamp - startTimestamp); // 30000    }}/** * é‡‡é›†æœåŠ¡å™¨èŠ‚ç‚¹çš„ä»»åŠ¡ã€‚ */@Dataclass CaptureRunnable implements Runnable {    // æœºå™¨èŠ‚ç‚¹çš„åç§°    private String machineName;    // é‡‡é›†èŠ±è´¹æ—¶é—´    private long spendTime;    public CaptureRunnable(String machineName, long spendTime) {        this.machineName = machineName;        this.spendTime = spendTime;    }    @Override    public void run() {        // do the really capture data.        Thread.sleep(spendTime);        System.out.printf(machineName + &quot; completed data capture at timestamp [%s] and successful.\n&quot;, System.currentTimeMillis());    }}</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>113-çº¿ç¨‹IDï¼Œä¼˜å…ˆçº§è®²è§£</title>
      <link href="/wang-thread/113-thread-id-priority/"/>
      <url>/wang-thread/113-thread-id-priority/</url>
      
        <content type="html"><![CDATA[<p>Threadä¸­ä¸€äº›ç®€å•çš„API</p><pre><code class="java">Thread t1 = new Thread(() -&gt; {    Optional.of(&quot;Hello&quot;).ifPresent(System.out::println);    try {        Thread.sleep(1_000);    } catch (InterruptedException e) {        e.printStackTrace();    }}, &quot;t1&quot;);</code></pre><pre><code class="java">// çº¿ç¨‹åç§°ã€‚Optional.of(t1.getName()).ifPresent(System.out::println);// çº¿ç¨‹IDã€‚++threadSeqNumberOptional.of(t1.getId()).ifPresent(System.out::println);// çº¿ç¨‹ä¼˜å…ˆçº§ï¼Œé»˜è®¤ä¸º5.Optional.of(t1.getPriority()).ifPresent(System.out::println);</code></pre><p>çº¿ç¨‹ä¼˜å…ˆçº§èŒƒå›´æ˜¯1-10ï¼Œé»˜è®¤ä¸º5ï¼Œé€šè¿‡ä¿®æ”¹çº¿ç¨‹ä¼˜å…ˆçº§å¯ä»¥ä¼å›¾<strong>æ”¹å˜</strong>çº¿ç¨‹çš„æ‰§è¡Œé¡ºåºã€‚</p><p>çº¿ç¨‹ä¸ä¸€å®šä¼šæŒ‰ç…§æŒ‡å®šçš„ä¼˜å…ˆçº§æ‰§è¡Œã€‚</p><pre><code class="java">Thread.MAX_PRIORITY// æœ€é«˜ä¼˜å…ˆçº§ï¼Œ10Thread.NORM_PRIORITY// é»˜è®¤ä¼˜å…ˆçº§ï¼Œ5Thread.MIN_PRIORITY// æœ€ä½ä¼˜å…ˆçº§ï¼Œ1</code></pre><p>ä¾‹ï¼šçº¿ç¨‹t1ã€t2ã€t3äº¤æ›¿è¿è¡Œã€‚</p><pre><code class="java">Thread t1 = new Thread(() -&gt; {    for (int i = 0; i &lt; 1000; i++) {        Optional.of(Thread.currentThread().getName() + &quot;-Index-&quot; + i).ifPresent(System.out::println);    }}, &quot;t1&quot;);t1.setPriority(Thread.MAX_PRIORITY);Thread t2 = new Thread(() -&gt; {    for (int i = 0; i &lt; 1000; i++) {        Optional.of(Thread.currentThread().getName() + &quot;-Index-&quot; + i).ifPresent(System.out::println);    }}, &quot;t2&quot;);t2.setPriority(Thread.NORM_PRIORITY);Thread t3 = new Thread(() -&gt; {    for (int i = 0; i &lt; 1000; i++) {        Optional.of(Thread.currentThread().getName() + &quot;-Index-&quot; + i).ifPresent(System.out::println);    }}, &quot;t3&quot;);t3.setPriority(Thread.MIN_PRIORITY);t1.start();t2.start();t3.start();</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>112-Daemonçº¿ç¨‹çš„åˆ›å»ºä»¥åŠä½¿ç”¨åœºæ™¯åˆ†æ</title>
      <link href="/wang-thread/112-daemon/"/>
      <url>/wang-thread/112-daemon/</url>
      
        <content type="html"><![CDATA[<p>Runnableä¸æ˜¯çº¿ç¨‹ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œåªæ˜¯ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå•å…ƒã€‚å®ƒçš„ä½œç”¨æ˜¯æŠŠ<strong>çº¿ç¨‹æ§åˆ¶</strong>å’Œ<strong>ä¸šåŠ¡é€»è¾‘</strong>åˆ†å¼€ã€‚çœŸæ­£ä»£è¡¨çº¿ç¨‹çš„åªæœ‰Threadã€‚</p><p>ThreadGroupçš„å¥½å¤„ï¼šå¯ä»¥ç»Ÿä¸€ç®¡ç†Threadçº¿ç¨‹ã€‚</p><p>åœ¨JDK1.7ä¹‹åå¯ä»¥å°†æ•°æ®<code>10000</code>å†™ä¸º<code>10_000</code></p><ol><li><p>mainçº¿ç¨‹æ­¤æ—¶é€»è¾‘å•å…ƒå·²ç»ç»“æŸï¼Œä¸ºä»€ä¹ˆè¿˜æ²¡æœ‰é€€å‡ºç¨‹åºå‘¢ï¼Ÿ</p><p>å› ä¸ºæ­¤æ—¶ThreadGroupä¸­è¿˜æœ‰çº¿ç¨‹Thread-0å¤„äºactiveçŠ¶æ€ã€‚</p><pre><code class="java">public class DeamonThread {    public static void main(String[] args) throws InterruptedException {        // new        Thread t = new Thread() {            @Override            public void run() {                System.out.println(Thread.currentThread().getName() + &quot; running&quot;);                Thread.sleep(1_000_000);                System.out.println(Thread.currentThread().getName() + &quot; done&quot;);            }        };        // runnable -&gt; running| -&gt; blocked -&gt; dead        t.start();        System.out.println(Thread.currentThread().getName());    }}</code></pre></li><li><p><code>t.setDaemon(true);</code>åœ¨mainç»“æŸåè‡ªåŠ¨ç»“æŸæ‰€æœ‰çº¿ç¨‹</p><p>å®ˆæŠ¤çº¿ç¨‹Daemonæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</p><blockquote><p>ä¾‹ï¼šå»ºç«‹ç½‘ç»œè¿æ¥ã€‚<br>ä»Aåˆ°Bå»ºç«‹äº†ä¸€ä¸ªé•¿è¿æ¥ï¼Œé•¿è¿æ¥åœ¨ä¸€å®šé—´éš”æ—¶é—´ä¼šå‘é€å¿ƒè·³åŒ…ä»¥è¯æ˜è¿æ¥æ˜¯å¯ç”¨çš„ã€‚æ¯”å¦‚Aä¸ºå®¢æˆ·ç«¯ï¼ŒBä¸ºæœåŠ¡å™¨ï¼ŒAä¸æ–­å‘Bå‘é€å¿ƒè·³åŒ…ï¼ŒBå‘Aè¿”å›å¿ƒè·³å“åº”ã€‚<br>å½“å‰å·¥ä½œçº¿ç¨‹åˆ›å»ºäº†ä¸€ä¸ªè¿æ¥åï¼Œè¦ç»´æŠ¤è¿™ä¸ªé•¿è¿æ¥ï¼Œä½†æ˜¯å½“å‰å·¥ä½œçº¿ç¨‹çš„ä¸šåŠ¡é€»è¾‘ã€å‘é€æ•°æ®ç­‰æ“ä½œä¸ç»´æŠ¤è¿æ¥å¹¶æ²¡æœ‰å…³ç³»ï¼Œæ­¤æ—¶å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹daemonThreadæ¥è¿›è¡Œå¿ƒè·³æ£€æµ‹å·¥ä½œã€‚<br>å½“å·¥ä½œçº¿ç¨‹å·²ç»ç»“æŸå·¥ä½œè€Œæ­»äº¡ï¼Œéå®ˆæŠ¤çº¿ç¨‹å¹¶ä¸ä¼šè‡ªåŠ¨æ­»äº¡ï¼Œè€Œæ­¤æ—¶å†å»è¿›è¡Œé•¿è¿æ¥å¿ƒè·³æ£€æµ‹å¹¶æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œæ‰€ä»¥å°†å…¶è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹å¯ä»¥åœ¨å·¥ä½œçº¿ç¨‹æ­»äº¡æ—¶è‡ªåŠ¨æ­»äº¡ã€‚</p></blockquote></li></ol><p>æ€è€ƒï¼š</p><ol><li><p>åœ¨éå®ˆæŠ¤çº¿ç¨‹Aé‡Œåˆ›å»ºå®ˆæŠ¤çº¿ç¨‹Bï¼Œå½“çº¿ç¨‹Aç»“æŸåï¼Œçº¿ç¨‹Bä¼šè‡ªåŠ¨ç»“æŸä¹ˆï¼Ÿ</p><p>çº¿ç¨‹Bä¼šè‡ªåŠ¨ç»“æŸ</p></li><li><p>åœ¨éå®ˆæŠ¤çº¿ç¨‹Aé‡Œåˆ›å»ºéå®ˆæŠ¤çº¿ç¨‹Bï¼Œå½“çº¿ç¨‹Aç»“æŸåï¼Œçº¿ç¨‹Bä¼šè‡ªåŠ¨ç»“æŸä¹ˆï¼ŒJVMå¯ä»¥æ­£å¸¸é€€å‡ºä¹ˆï¼Ÿ</p><p>çº¿ç¨‹Bä¸ä¼šè‡ªåŠ¨ç»“æŸï¼Œä»ç„¶åœ¨è¿è¡Œã€‚</p></li><li><p>åœ¨å®ˆæŠ¤çº¿ç¨‹Aé‡Œåˆ›å»ºå®ˆæŠ¤çº¿ç¨‹Bï¼Œå½“çº¿ç¨‹Aç»“æŸåï¼Œçº¿ç¨‹Bä¼šè‡ªåŠ¨ç»“æŸä¹ˆï¼Ÿ</p><p>ä¼šã€‚</p></li><li><p>åœ¨å®ˆæŠ¤çº¿ç¨‹Aé‡Œåˆ›å»ºéå®ˆæŠ¤çº¿ç¨‹Bï¼Œå½“çº¿ç¨‹Aç»“æŸåï¼Œçº¿ç¨‹Bä¼šè‡ªåŠ¨ç»“æŸä¹ˆï¼ŒJVMå¯ä»¥æ­£å¸¸é€€å‡ºä¹ˆï¼Ÿ</p><p>ä¼šã€‚</p><pre><code class="java">Thread thread = new Thread(() -&gt; {    Thread innerThread = new Thread(() -&gt; {        while (true) {            System.out.println(&quot;innerThread do something for health check.&quot;);            Thread.sleep(1_000);        }    }, &quot;innerThread&quot;);    // innerThread.setDaemon(true);    innerThread.start();    Thread.sleep(1_000);    System.out.println(&quot;thread finish done.&quot;);}, &quot;thread&quot;);// innerThread.setDaemon(true);thread.start();</code></pre></li></ol><p>æ€»ç»“ï¼š</p><ol><li>çº¿ç¨‹é»˜è®¤ä¸ºéå®ˆæŠ¤çº¿ç¨‹ã€‚å…¶å®mainçº¿ç¨‹æ˜¯ä¸€ä¸ªéå®ˆæŠ¤çº¿ç¨‹ã€‚</li><li>å½“è¿è¡Œçš„æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤ç¨‹åºçº¿ç¨‹æ—¶ï¼ŒJavaè™šæ‹Ÿæœºæ‰é€€å‡ºã€‚ </li></ol><p><strong>æ³¨æ„</strong>ï¼šå¿…é¡»åœ¨çº¿ç¨‹<code>start()</code>å¯åŠ¨ä¹‹å‰è°ƒç”¨<code>setDaemon()</code>æ–¹æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>111-Threadæ„é€ å‡½æ•°StackSizeè¯¦ç»†è®²è§£-ç»­</title>
      <link href="/wang-thread/111-thread-stacksize2/"/>
      <url>/wang-thread/111-thread-stacksize2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Thread(ThreadGroup group, Runnable target, String name, long stackSize)</p></blockquote><p>é»˜è®¤çš„stackSizeæ˜¯å¤šå¤§å‘¢ï¼Ÿ</p><ul><li>JDKæºç ä¸­stackSizeé»˜è®¤ä¸º0ï¼Œä»£è¡¨è¯¥å˜é‡å€¼è¢«å¿½ç•¥ã€‚æŠŠä¼ å…¥çš„stackSizeèµ‹å€¼ç»™ç±»å˜é‡ï¼Œç„¶ååœ¨ä»£ç ä¸­æœªæ‰¾åˆ°å¼•ç”¨ï¼Œå¯èƒ½æ˜¯åœ¨JVMä¸­è¢«å¼•ç”¨äº†ã€‚</li></ul><p>æ„é€ Threadçš„æ—¶å€™ä¼ å…¥stackSizeä»£è¡¨ç€è¯¥çº¿ç¨‹å ç”¨çš„stackçš„å¤§å°ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šstackSizeçš„å¤§å°ï¼Œé»˜è®¤æ˜¯0ï¼Œ0ä»£è¡¨ç€ä¼šå¿½ç•¥è¯¥å‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«JNIå‡½æ•°å»ä½¿ç”¨ã€‚éœ€è¦æ³¨æ„ï¼šè¯¥å‚æ•°åœ¨æŸäº›å¹³å°ï¼ˆæ“ä½œç³»ç»Ÿï¼‰å¯èƒ½æ— æ•ˆã€‚é€šè¿‡JVMå‚æ•°æ˜¾å¼è®¾ç½®ï¼š<code>-Xms10M</code></p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>110-Threadæ„é€ å‡½æ•°StackSizeè¯¦ç»†è®²è§£</title>
      <link href="/wang-thread/110-thread-stacksize1/"/>
      <url>/wang-thread/110-thread-stacksize1/</url>
      
        <content type="html"><![CDATA[<p>ä¸è¦è¿‡åˆ†å‹æ¦¨åº”ç”¨çš„æ€§èƒ½ï¼Œåº”ç”¨æœåŠ¡å‹åŠ›å»ºè®®æœ€å¤§è¾¾åˆ°åº”ç”¨æ€§èƒ½å³°å€¼çš„80%ã€‚è¶…è¿‡80%å¯ä»¥é€šè¿‡æ¨ªå‘æ‰©å±•åº”ç”¨ä»¥å‡ç¼“å‹åŠ›ã€‚ç°åœ¨åˆ†å¸ƒå¼åº”ç”¨é‚£ä¹ˆæ™®éã€‚</p><p>éªŒè¯ï¼šJVMå¯åŠ¨æ—¶åˆ›å»ºçš„æ ˆç©ºé—´ä¸å˜ï¼Œç”±äºçº¿ç¨‹çš„æ ˆç©ºé—´å ç”¨äº†å¾ˆå¤§è™šæ‹Ÿæœºæ ˆå†…å­˜ï¼Œæ‰€ä»¥åœ¨mainä¸»çº¿ç¨‹é‡Œï¼ŒJVMèƒ½å…è®¸åˆ›å»ºçš„çº¿ç¨‹æ•°ä¹Ÿä¼šç›¸åº”å‡å°‘ã€‚</p><pre><code class="java">public class CreateThread5 {    private static int counter = 0;    public static void main(String[] args) {        try {            // ä¸æ–­å¾ªç¯åˆ›å»ºThread            for (int i = 0; i &lt; Integer.MAX_VALUE; i++) {                counter++;                // 1. é»˜è®¤stackSizeã€‚                /*new Thread(() -&gt; {                    // å¢å¤§æ ˆé’ˆçš„å®½åº¦                    byte[] data = new byte[1024 * 1024 * 2];                    while (true) {}                }).start();*/                // 2. ä¿®æ”¹stackSizeã€‚                new Thread(null, () -&gt; {                    // å¢å¤§æ ˆé’ˆçš„å®½åº¦                    byte[] data = new byte[1024 * 1024 * 2];                    while (true) {}                }, &quot;stackSizeTest&quot;, 1 &lt;&lt; 32).start();            }        } catch (Error e) {            e.printStackTrace();        }        System.out.println(&quot;Total create thread nums =&gt; &quot; + counter);    }}</code></pre><p>è¾“å‡ºç»“æœï¼š</p><ol><li><p>é»˜è®¤stackSizeã€‚</p><pre><code class="shell">java.lang.OutOfMemoryError: unable to create new native thread    at java.lang.Thread.start0(Native Method)    at java.lang.Thread.start(Thread.java:717)    at com.tuyrk.chapter03.CreateThread5.main(CreateThread5.java:28)Total create thread nums =&gt; 4060</code></pre></li><li><p>stackSize = 1 &lt;&lt; 32</p><pre><code class="shell">java.lang.OutOfMemoryError: unable to create new native thread    at java.lang.Thread.start0(Native Method)    at java.lang.Thread.start(Thread.java:717)    at com.tuyrk.chapter03.CreateThread5.main(CreateThread5.java:28)Total create thread nums =&gt; 4060</code></pre></li></ol><p>ç»“è®ºï¼š<strong>æœ‰å¾…è€ƒè¯ã€‚æš‚è®¤ä¸æˆç«‹</strong>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>109-å¤šçº¿ç¨‹ä¸JVMå†…å­˜ç»“æ„çš„å…³ç³»ï¼Œè™šæ‹Ÿæœºæ ˆå®éªŒ</title>
      <link href="/wang-thread/109-thread-with-memory/"/>
      <url>/wang-thread/109-thread-with-memory/</url>
      
        <content type="html"><![CDATA[<p>Javaå†…å­˜ç»“æ„-ç®€ï¼š</p><ul><li><p>æ ˆï¼ˆéå †ï¼‰</p></li><li><p>å †</p><p>æ ˆå­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¼•ç”¨ç±»å‹<br>å †å­˜å‚¨å¯¹è±¡</p></li></ul><p>Javaå†…å­˜ç»“æ„</p><ul><li><p>æ ˆå†…å­˜</p><ol><li>æ–¹æ³•åŒºï¼ˆçº¿ç¨‹å…±äº«ï¼‰</li></ol></li></ul><ol start="2"><li>è™šæ‹Ÿæœºæ ˆï¼ˆçº¿ç¨‹ç§æœ‰ï¼‰<br>  æ ˆé’ˆï¼ˆè‹¥å¹²ï¼‰ï¼šå±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ ˆã€åŠ¨æ€é“¾æ¥åº“ã€æ–¹æ³•å‡ºå£/å…¥å£<ol start="3"><li>æœ¬åœ°æ–¹æ³•åŒºC++ï¼šæ‰§è¡Œå¼•æ“ã€æœ¬åœ°åº“æ¥å£<code>.so</code>ã€æœ¬åœ°æ–¹æ³•</li></ol></li><li>ç¨‹åºè®¡æ•°å™¨</li></ol><ul><li><p>å †å†…å­˜</p><ol><li>å¯¹è±¡å®ä½“ï¼ˆæ ˆåªä¿å­˜å˜é‡çš„å¼•ç”¨ï¼‰</li></ol></li></ul><p>ä¸æ–­å‹æ ˆæ“ä½œå°†ä¼šå¯¼è‡´æ ˆæº¢å‡ºï¼Œä»è€Œç¨‹åºå´©æºƒå¹¶æŠ›å‡º<code>java.lang.StackOverflowError</code></p><p>Javaå¤šçº¿ç¨‹ä¸å†…å­˜å †æ ˆå…³ç³»ã€‚è™šæ‹Ÿæœºæ ˆ</p><ul><li><p>mainä¸»çº¿ç¨‹ã€‚</p><pre><code class="java">public class CreateThread3 {    private static int counter = 0;    // JVM will create a thread named &quot;main&quot;    public static void main(String[] args) {        // create a JVM stack        try {            add(0);        } catch (Error e) {            e.printStackTrace();// java.lang.StackOverflowError            System.out.println(counter);// 21325        }    }    private static void add(int i) {        counter++;        add(i + 1);    }}</code></pre></li><li><p>ç”¨æˆ·å­çº¿ç¨‹</p><pre><code class="java">public class CreateThread4 {    private static int counter = 0;    public static void main(String[] args) {        Thread t = new Thread(new Runnable() {            @Override            public void run() {                try {                    add(0);                } catch (Error e) {                    e.printStackTrace();// java.lang.StackOverflowError                    System.out.println(counter);// 18455                }            }            private void add(int i) {                counter++;                add(i + 1);            }        });        t.start();    }}</code></pre></li></ul><p>é€šè¿‡stackSizeæ„é€ æ–¹æ³•æ”¹å˜çº¿ç¨‹çš„æ ˆå†…å­˜å¤§å°ï¼Œé¿å…æŠ›å‡º<code>java.lang.StackOverflowError</code>ã€‚<del>ä½†æ˜¯JVMå¯åŠ¨æ—¶åˆ›å»ºçš„æ ˆç©ºé—´ä¸å˜ï¼Œç”±äºçº¿ç¨‹çš„æ ˆç©ºé—´å ç”¨äº†å¾ˆå¤§è™šæ‹Ÿæœºæ ˆå†…å­˜ï¼Œæ‰€ä»¥åœ¨mainä¸»çº¿ç¨‹é‡Œï¼ŒJVMèƒ½å…è®¸åˆ›å»ºçš„çº¿ç¨‹æ•°ä¹Ÿä¼šç›¸åº”å‡å°‘ã€‚</del></p><pre><code class="java">public class CreateThread4 {    private static int counter = 0;    public static void main(String[] args) {        Thread t = new Thread(null, new Runnable() {            @Override            public void run() {                try {                    add(0);                } catch (Error e) {                    e.printStackTrace();                    System.out.println(counter);                }            }            private void add(int i) {                counter++;                add(i + 1);            }        }, &quot;stackSizeTest&quot;, 1 &lt;&lt; 24);        t.start();    }}</code></pre><p>æ‰©å±•ï¼š</p><ol><li><p>ç¼–å†™ä¸€ä¸ªæŠ›å‡º<code>java.lang.StackOverflowError</code>çš„ä¾‹å­</p></li><li><p>ç¼–å†™ä¸€ä¸ªæŠ›å‡º<code>java.lang.OutOfMemoryError</code>çš„ä¾‹å­</p><blockquote><p>StackOverFlowErrorä¸€èˆ¬æ˜¯ç”±äºæ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæä¾›çš„æœ€å¤§æ ˆæ·±åº¦å¯¼è‡´çš„</p><p>OutOfMemoryErrorä¸€èˆ¬æ˜¯ç”±äºè™šæ‹Ÿæœºåœ¨æ‰©å±•å †æ ˆæ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œå¯ä»¥é€šè¿‡<code>--xms</code> å’Œ<code>--xmx</code>æ¥è®¾å®šè™šæ‹Ÿæœºçš„æœ€å¤§å¯æ‰©å±•å†…å­˜</p></blockquote></li><li><p>JVMä¹‹â€“Javaå†…å­˜ç»“æ„</p><p><a href="https://blog.csdn.net/wangwenjun69/article/details/9747207" target="_blank" rel="noopener">JVMä¹‹â€”Javaå†…å­˜ç»“æ„ï¼ˆç¬¬ä¸€ç¯‡ï¼‰</a></p><p><a href="https://blog.csdn.net/wangwenjun69/article/details/9751487" target="_blank" rel="noopener">JVMä¹‹â€”Javaå†…å­˜ç»“æ„ï¼ˆç¬¬äºŒç¯‡ï¼‰</a></p><p><a href="https://blog.csdn.net/wangwenjun69/article/details/9774579" target="_blank" rel="noopener">JVMä¹‹â€”Javaå†…å­˜ç»“æ„ï¼ˆç¬¬ä¸‰ç¯‡ï¼‰</a></p><p><a href="https://blog.csdn.net/wangwenjun69/article/details/10044575" target="_blank" rel="noopener">JVMä¹‹â€”Javaå†…å­˜åˆ†é…å‚æ•°ï¼ˆç¬¬å››ç¯‡ï¼‰</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>108-æ„é€ Threadå¯¹è±¡ä½ ä¹Ÿè®¸ä¸çŸ¥é“çš„å‡ ä»¶äº‹</title>
      <link href="/wang-thread/108-construct-thread/"/>
      <url>/wang-thread/108-construct-thread/</url>
      
        <content type="html"><![CDATA[<p>æ„é€ å‡½æ•°ï¼š</p><ul><li>æ„é€ æ–¹æ³•æ²¡æœ‰ä¼ å…¥ThreadGroupï¼Œæ˜¯å¦ä¼šåˆ›å»ºé»˜è®¤çš„ThreadGroup</li><li>å¦‚æœä¼ å…¥ThreadGroupä¸ºnullï¼Œæ˜¯å¦ä¼šä½¿ç”¨å…¶ä»–é»˜è®¤çš„ThreadGroup</li><li>ThreadGroupå’ŒThreadä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆ</li><li>çº¿ç¨‹å’Œæ ˆçš„å…³ç³»</li></ul><pre><code class="java">Thread()Thread(String name)Thread(Runnable target)Thread(Runnable target, String name)Thread(ThreadGroup group, String name)Thread(ThreadGroup group, Runnable target)Thread(ThreadGroup group, Runnable target, String name)Thread(ThreadGroup group, Runnable target, String name, long stackSize)</code></pre><ul><li><p>Thread()</p><p>åˆ›å»ºçº¿ç¨‹å¯¹è±¡Threadï¼Œé»˜è®¤æœ‰ä¸€ä¸ªçº¿ç¨‹åï¼Œä»¥Thread-å¼€å¤´ï¼Œä»0å¼€å§‹è®¡æ•°</p><pre><code class="java">Thread t1 = new Thread();</code></pre><p>å¦‚æœåœ¨æ„é€ Threadçš„æ—¶å€™æ²¡æœ‰ä¼ é€’Runnableæˆ–è€…æ²¡æœ‰å¤å†™Threadçš„<code>run()</code>æ–¹æ³•ï¼Œè¯¥Threadå°†ä¸ä¼šè°ƒç”¨ä»»ä½•ä¸œè¥¿ï¼Œå¦‚æœä¼ é€’äº†Runnableçš„å®ä¾‹ï¼Œæˆ–è€…å¤å†™äº†Threadçš„<code>run()</code>æ–¹æ³•ï¼Œåˆ™ä¼šæ‰§è¡Œè¯¥æ–¹æ³•çš„é€»è¾‘å•å…ƒï¼ˆé€»è¾‘ä»£ç ï¼‰</p><pre><code class="java">Thread t2 = new Thread() {    @Override    public void run() {        System.out.println(&quot;================&quot;);    }};</code></pre><p>å¦‚æœæ„é€ çº¿ç¨‹å¯¹è±¡æ—¶æœªä¼ å…¥ThreadGroupï¼ŒThreadä¼šé»˜è®¤è·å–çˆ¶çº¿ç¨‹çš„ThreadGroupä½œä¸ºè¯¥çº¿ç¨‹çš„ThreadGroupã€‚æ­¤æ—¶å­çº¿ç¨‹å’Œçˆ¶çº¿ç¨‹å°†ä¼šåœ¨åŒä¸€ä¸ªThreadGroupä¸­ã€‚</p><pre><code class="java">System.out.println(t1.getThreadGroup()); // mainSystem.out.println(Thread.currentThread().getName()); // mainSystem.out.println(Thread.currentThread().getThreadGroup().getName()); // main</code></pre><p>é€šè¿‡ThreadGroupå¯¹è±¡å¯ä»¥è·å¾—è¯¥çº¿ç¨‹ç»„ä¸­æœ‰å¤šå°‘ä¸ªçº¿ç¨‹</p><pre><code class="java">ThreadGroup threadGroup = Thread.currentThread().getThreadGroup();Thread[] threads = new Thread[threadGroup.activeCount()];threadGroup.enumerate(threads);Arrays.stream(threads).forEach(System.out::println);// main,Thread-0,Monitor</code></pre></li><li><p>Thread(String name)</p><pre><code class="java">Thread t3 = new Thread(&quot;MyName&quot;);</code></pre></li><li><p>Thread(Runnable target)</p><pre><code class="java">Thread t4 = new Thread(() -&gt; {    System.out.println(&quot;Runnable...&quot;);});</code></pre></li><li><p>Thread(Runnable target, String name)</p><pre><code class="java">Thread t5 = new Thread(() -&gt; {    System.out.println(&quot;Runnable...&quot; + Thread.currentThread().getName());}, &quot;RunnableThread&quot;);</code></pre></li><li><p>Thread(ThreadGroup group, Runnable target, String name, long stackSize)</p><p>stackSizeï¼šThe stack size is the approximate number of bytes of address space that the virtual machine is to allocate for this threadâ€™s stack.<strong>The effect of the <code>stackSize</code> parameter, if any, is highly platform dependent.On some platforms, the value of the <code>stackSize</code> parameter may have no effect whatsoever.</strong></p><p>æ„é€ Threadçš„æ—¶å€™ä¼ å…¥stackSizeä»£è¡¨ç€è¯¥çº¿ç¨‹å ç”¨çš„stackçš„å¤§å°ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šstackSizeçš„å¤§å°ï¼Œé»˜è®¤æ˜¯0ï¼Œ0ä»£è¡¨ç€ä¼šå¿½ç•¥è¯¥å‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«JNIå‡½æ•°å»ä½¿ç”¨ã€‚éœ€è¦æ³¨æ„ï¼šè¯¥å‚æ•°åœ¨æŸäº›å¹³å°ï¼ˆæ“ä½œç³»ç»Ÿï¼‰å¯èƒ½æ— æ•ˆã€‚é€šè¿‡JVMå‚æ•°æ˜¾å¼è®¾ç½®ï¼š<code>-Xms10M</code></p><pre><code class="java">Thread t = new Thread(null, new Runnable() {    @Override    public void run() {        try {            add(0);        } catch (Error e) {            e.printStackTrace();            System.out.println(counter);        }    }    private void add(int i) {        counter++;        add(i + 1);    }}, &quot;stackSizeTest&quot;, 1 &lt;&lt; 24);</code></pre><pre><code>java.lang.StackOverflowError</code></pre></li></ul><p><strong>æ€»ç»“</strong>ï¼š</p><ol><li>åˆ›å»ºçº¿ç¨‹å¯¹è±¡Threadï¼Œé»˜è®¤æœ‰ä¸€ä¸ªçº¿ç¨‹åï¼Œä»¥Thread-å¼€å¤´ï¼Œä»0å¼€å§‹è®¡æ•°</li><li>å¦‚æœåœ¨æ„é€ Threadçš„æ—¶å€™æ²¡æœ‰ä¼ é€’Runnableæˆ–è€…æ²¡æœ‰å¤å†™Threadçš„<code>run()</code>æ–¹æ³•ï¼Œè¯¥Threadå°†ä¸ä¼šè°ƒç”¨ä»»ä½•ä¸œè¥¿ï¼Œå¦‚æœä¼ é€’äº†Runnableçš„å®ä¾‹ï¼Œæˆ–è€…å¤å†™äº†Threadçš„<code>run()</code>æ–¹æ³•ï¼Œåˆ™ä¼šæ‰§è¡Œè¯¥æ–¹æ³•çš„é€»è¾‘å•å…ƒï¼ˆé€»è¾‘ä»£ç ï¼‰</li><li>å¦‚æœæ„é€ çº¿ç¨‹å¯¹è±¡æ—¶æœªä¼ å…¥ThreadGroupï¼ŒThreadä¼šé»˜è®¤è·å–çˆ¶çº¿ç¨‹çš„ThreadGroupä½œä¸ºè¯¥çº¿ç¨‹çš„ThreadGroupã€‚æ­¤æ—¶å­çº¿ç¨‹å’Œçˆ¶çº¿ç¨‹å°†ä¼šåœ¨åŒä¸€ä¸ªThreadGroupä¸­ã€‚</li><li>æ„é€ Threadçš„æ—¶å€™ä¼ å…¥stackSizeä»£è¡¨ç€è¯¥çº¿ç¨‹å ç”¨çš„stackçš„å¤§å°ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šstackSizeçš„å¤§å°ï¼Œé»˜è®¤æ˜¯0ï¼Œ0ä»£è¡¨ç€ä¼šå¿½ç•¥è¯¥å‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«JNIå‡½æ•°å»ä½¿ç”¨ã€‚éœ€è¦æ³¨æ„ï¼šè¯¥å‚æ•°åœ¨æŸäº›å¹³å°ï¼ˆæ“ä½œç³»ç»Ÿï¼‰å¯èƒ½æ— æ•ˆã€‚é€šè¿‡JVMå‚æ•°æ˜¾å¼è®¾ç½®ï¼š<code>-Xms10M</code></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>107-*ç­–ç•¥æ¨¡å¼åœ¨Threadå’ŒRunnableä¸­çš„åº”ç”¨åˆ†æ</title>
      <link href="/wang-thread/107-Strategy-in-thread/"/>
      <url>/wang-thread/107-Strategy-in-thread/</url>
      
        <content type="html"><![CDATA[<p>Runnableæ¥å£ä¸å¤šçº¿ç¨‹ä¸­çš„å“ªç§è®¾è®¡æ¨¡å¼æ¯”è¾ƒæ¥è¿‘ï¼Ÿ</p><ul><li>ç­–ç•¥æ¨¡å¼</li></ul><p>ä¸¾ä¾‹ï¼šç¨æ”¶è®¡ç®—å™¨ã€‚éœ€å¤šçœ‹ä»£ç ç¤ºä¾‹ï¼Œæ·±å…¥ç†è§£ç­–ç•¥æ¨¡å¼ã€‚</p><ol><li><p>ç¨æ”¶è®¡ç®—å™¨æ¥å£ã€‚ç­–ç•¥æ¨¡å¼</p><pre><code class="java">@FunctionalInterfacepublic interface CalculatorStrategy {    /**     * è®¡ç®—ç¨ç‡     *     * @param salary è–ªæ°´     * @param bonus å¥–é‡‘     * @return ç¨æ”¶     */    double calculate(double salary, double bonus);}</code></pre></li><li><p>ç¨æ”¶è®¡ç®—å™¨å®ç°ç±»</p><pre><code class="java">public class SimpleCalculatorStrategy implements CalculatorStrategy {    private final static double SALARY_RATE = 0.1;    private final static double BONUS_RATE = 0.15;    // è®¡ç®—ç¨ç‡ï¼šå·¥èµ„*0.1 + å¥–é‡‘*0.15    @Override    public double calculate(double salary, double bonus) {        return salary * SALARY_RATE + bonus * BONUS_RATE;    }}</code></pre></li><li><p>ç¨åŠ¡è®¡ç®—å™¨ã€‚Runnableä¸å¤šçº¿ç¨‹è®¾è®¡æ¨¡å¼</p><pre><code class="java">@Datapublic class TaxCalculator {    // è–ªæ°´    private final double salary;    // å¥–é‡‘    private final double bonus;    private CalculatorStrategy calculatorStrategy;    public TaxCalculator(double salary, double bonus) {        this.salary = salary;        this.bonus = bonus;    }    public TaxCalculator(double salary, double bonus, CalculatorStrategy calculatorStrategy) {        this.salary = salary;        this.bonus = bonus;        this.calculatorStrategy = calculatorStrategy;    }    // è®¡ç®—ç¨ç‡    protected double calcTax() {        return calculatorStrategy.calculate(salary, bonus);    }    // è®¡ç®—    public double calculate() {        return this.calcTax();    }}</code></pre></li><li><p>ç¨åŠ¡è®¡ç®—å™¨æµ‹è¯•ç±»</p><pre><code class="java">public class TaxCalculatorMain {    // 1. æ¨¡ç‰ˆæ–¹æ³•    @Test    public void test1() {        TaxCalculator calculator = new TaxCalculator(10000d, 2000d) {            @Override            protected double calcTax() {                return getSalary() * 0.1 + getBonus() * 0.15;            }        };        System.out.println(calculator.calculate());    }    // 2.1 ç­–ç•¥æ¨¡å¼    @Test    public void test2() {        TaxCalculator calculator = new TaxCalculator(10000d, 2000d);        CalculatorStrategy strategy = new SimpleCalculatorStrategy();        calculator.setCalculatorStrategy(strategy);        System.out.println(calculator.calculate());    }    // 2.2 ç­–ç•¥æ¨¡å¼-Java8Lambda-1    @Test    public void test3() {        TaxCalculator calculator = new TaxCalculator(10000d, 2000d);        calculator.setCalculatorStrategy((s, b) -&gt; s * 0.1 + b * 0.15);        System.out.println(calculator.calculate());    }    // 2.2 ç­–ç•¥æ¨¡å¼-Java8Lambda-2    @Test    public void test4() {        TaxCalculator calculator = new TaxCalculator(10000d, 2000d, (s, b) -&gt; s * 0.1 + b * 0.15);        System.out.println(calculator.calculate());    }}</code></pre></li></ol><p>é€šè¿‡ç­–ç•¥æ¨¡å¼çš„æ€æƒ³æ”¹é€ <code>BankRunnable.java</code></p><ul><li><p>é“¶è¡Œå¤§å…</p><pre><code class="java">public class BankRunnable {    private final static int MAX = 50;    private int index = 1;    public static void main(String[] args) {        // 1. ä¸€ä¸ªrunnableå®ä¾‹è¢«å¤šä¸ªçº¿ç¨‹å…±äº«        /*TicketWindowRunnable ticketWindow = new TicketWindowRunnable();*/        // 2. ç­–ç•¥æ¨¡å¼æ€æƒ³æ”¹é€ runnableå®ä¾‹çº¿ç¨‹        Runnable ticketWindow = new BankRunnable().getTicketWindow();        Thread windowThread1 = new Thread(ticketWindow, &quot;ä¸€å·çª—å£&quot;);        Thread windowThread2 = new Thread(ticketWindow, &quot;äºŒå·çª—å£&quot;);        Thread windowThread3 = new Thread(ticketWindow, &quot;ä¸‰å·çª—å£&quot;);        windowThread1.start();        windowThread2.start();        windowThread3.start();    }    private Runnable getTicketWindow() {        return () -&gt; {            while (index &lt;= MAX) {                System.out.println(Thread.currentThread() + &quot; çš„å·ç æ˜¯:&quot; + (index++));                Thread.sleep(100);            }        };    }}</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>106-ç”¨Runnableæ¥å£å°†çº¿ç¨‹çš„é€»è¾‘æ‰§è¡Œå•å…ƒä»æ§åˆ¶ä¸­æŠ½å–å‡ºæ¥</title>
      <link href="/wang-thread/106-runnable-bank-queue/"/>
      <url>/wang-thread/106-runnable-bank-queue/</url>
      
        <content type="html"><![CDATA[<p>è¯¾ç¨‹ç›®æ ‡ï¼š</p><ul><li><p><strong>è®©ä¸šåŠ¡æ•°æ®å’Œçº¿ç¨‹é€»è¾‘åˆ†ç¦»</strong>ã€‚Runnableã€‚@FunctionalInterface</p><p><code>run()</code>æ–¹æ³•ä¸ºçº¿ç¨‹çš„é€»è¾‘ä»£ç å—</p></li></ul><ol><li><p>å«å·æœºã€‚ç»§æ‰¿Runnableæ¥å£</p><pre><code class="java">public class TicketWindowRunnable implements Runnable {    private int index = 1;    private static final int MAX = 50;    @Override    public void run() {        while (index &lt;= MAX) {            System.out.println(Thread.currentThread().getName() + &quot; çš„å·ç æ˜¯ï¼š&quot; + (index++));        }    }}</code></pre></li><li><p>é“¶è¡Œå¤§å…ï¼ŒæŸœå°ï¼Œä¸šåŠ¡å¤„ç†çª—å£ã€‚</p><pre><code class="java">public class BankRunnable {    public static void main(String[] args) {        TicketWindowRunnable ticketWindow1 = new TicketWindowRunnable();        Thread windowThread1 = new Thread(ticketWindow1, &quot;ä¸€å·çª—å£&quot;);        Thread windowThread2 = new Thread(ticketWindow1, &quot;äºŒå·çª—å£&quot;);        Thread windowThread3 = new Thread(ticketWindow1, &quot;ä¸‰å·çª—å£&quot;);        windowThread1.start();        windowThread2.start();        windowThread3.start();    }}</code></pre></li></ol><p>ä¸ç®¡å®šä¹‰å¤šå°‘ä¸ªçº¿ç¨‹ï¼Œä¸šåŠ¡é€»è¾‘çš„æ•°æ®å®ä¾‹åªæœ‰ä¸€ä¸ªï¼Œä¸åƒThreadç±»ä¸­ä¸šåŠ¡é€»è¾‘æ•°æ®å’Œçº¿ç¨‹æ··æ·†åœ¨ä¸€èµ·ï¼Œæ¯ä¸€æ¬¡<code>new Thread()</code>å°±ä¼šæ–°åˆ›å»ºä¸€ä»½ä¸šåŠ¡é€»è¾‘æ•°æ®ã€‚</p><p>ä¸‰ä¸ªçº¿ç¨‹ä½¿ç”¨åŒä¸€ä»½ä¸šåŠ¡æ•°æ®å®ä¾‹ï¼Œæ­¤æ—¶å¾ˆæœ‰å¯èƒ½å‘ç”Ÿæ•°æ®å®‰å…¨é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå°†MAX=1ï¼Œå¯èƒ½æœ‰ä»¥ä¸‹è¾“å‡ºï¼š</p><pre><code>ä¸€å·çª—å£ çš„å·ç æ˜¯ï¼š1äºŒå·çª—å£ çš„å·ç æ˜¯ï¼š2</code></pre><p>æƒ³ä¸€æƒ³Runnableæ¥å£ä¸å¤šçº¿ç¨‹ä¸­çš„å“ªç§è®¾è®¡æ¨¡å¼æ¯”è¾ƒæ¥è¿‘ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>105-é‡‡ç”¨å¤šçº¿ç¨‹æ–¹å¼æ¨¡æ‹Ÿé“¶è¡Œæ’é˜Ÿå«å·</title>
      <link href="/wang-thread/105-thread-bank-queue/"/>
      <url>/wang-thread/105-thread-bank-queue/</url>
      
        <content type="html"><![CDATA[<p>è¯¾ç¨‹ç›®æ ‡ï¼š</p><ul><li>é€šè¿‡ç»§æ‰¿Threadç±»å®ç°çº¿ç¨‹çš„åˆ›å»º</li><li>å¹¶ä¸”çŸ¥é“ä½¿ç”¨Runnableçš„å¿…è¦æ€§ï¼Œä½¿ç”¨å®ƒçš„åŸå› æ˜¯ä»€ä¹ˆã€‚</li></ul><p>æ¡ˆä¾‹ï¼š</p><blockquote><p>å®ç°é“¶è¡Œæ’é˜Ÿå«å·åŠŸèƒ½ï¼ˆç²—ç³™ç‰ˆï¼‰ã€‚é“¶è¡Œæœ‰å¤šä¸ªæŸœå°ï¼Œå½“ä¸€ä¸ªäººéœ€è¦å»åŠç†ä¸šåŠ¡çš„æ—¶å€™ï¼Œå…ˆåˆ°å«å·æœºä¸Šé¢†å–ä¸€ä¸ªå·ç ã€‚å½“é“¶è¡ŒæŸœå‘˜å¤„ç†å®Œæˆå½“å‰å®¢æˆ·å°±ä¼šä½¿ç”¨å«å·å™¨å‘¼å«ä¸‹ä¸€ä½å®¢æˆ·åˆ°çª—å£åŠç†ä¸šåŠ¡ã€‚</p></blockquote><ol><li><p>å«å·æœºã€‚å®ç°Threadç±»TicketWindowThread.java</p><pre><code class="java">public class TicketWindowThread extends Thread {    private final String name;    private static final int MAX = 50;    private static int index = 1;    public TicketWindowThread(String name) {        this.name = name;    }    @Override    public void run() {        // å½“å½“å‰å·ç æ•°å°äºæœ€å¤§å·ç æ—¶ï¼Œè¿›è¡Œå”®ç¥¨æ“ä½œ        while (index &lt;= MAX) {            System.out.println(&quot;æŸœå°ï¼š&quot; + name + &quot;ï¼Œå½“å‰çš„å·ç æ˜¯ï¼š&quot; + (index++));        }    }}</code></pre></li><li><p>é“¶è¡Œå¤§å…ï¼ŒæŸœå°ï¼Œä¸šåŠ¡å¤„ç†çª—å£</p><pre><code class="java">/** *  */public class BankThread {    public static void main(String[] args) {        TicketWindowThread ticketWindow1 = new TicketWindowThread(&quot;ä¸€å·æŸœå°&quot;);        ticketWindow1.start();        TicketWindowThread ticketWindow2 = new TicketWindowThread(&quot;äºŒå·æŸœå°&quot;);        ticketWindow2.start();        TicketWindowThread ticketWindow3 = new TicketWindowThread(&quot;ä¸‰å·æŸœå°&quot;);        ticketWindow3.start();    }}</code></pre><p>æ­¤æ—¶ä¸‰ä¸ªçº¿ç¨‹å‡ºç°çš„ç»“æœæ˜¯ï¼šæ¯ä¸ªçº¿ç¨‹åˆ†åˆ«æ‰§è¡Œ1-50å·ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„indexï¼Œå¹¶æ²¡æœ‰è¾¾åˆ°ä¸‰ä¸ªçº¿ç¨‹å…±åŒä½¿ç”¨ä¸€ä¸ªindexçš„æ•ˆæœã€‚</p><p>æ€ä»¬è¾¾åˆ°å…±äº«indexå˜é‡ï¼Œä½¿ç”¨åŒä¸€ä»½èµ„æºçš„æ•ˆæœå‘¢ï¼Ÿ</p><ul><li><p>ç»™indexè®¾ç½®ä¸ºé™æ€å˜é‡staticã€‚æ­¤æ—¶å˜é‡å§‹ç»ˆåªä¼šå®ä¾‹åŒ–ä¸€æ¬¡ã€‚</p><p>ä½¿ç”¨staticå®ç°äº†å…±äº«å˜é‡çš„æ•ˆæœï¼Œä½†æ˜¯staticä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ã€‚å°±æ˜¯staticç”Ÿå‘½å‘¨æœŸè¾ƒé•¿ï¼Œä¼´éšJVMçš„å¯åŠ¨ï¼Œä¸€ç›´åˆ°é”€æ¯ï¼›ä»ç±»åŠ è½½å°±ä¼šå¼€å§‹å­˜åœ¨ï¼Œå³ä½¿æ˜¯ç±»å®ä¾‹é”€æ¯ä¹‹åä¹Ÿä¸ä¼šé”€æ¯ï¼Œstaticä¸æ˜¯åœ¨ç±»ä¸­å †æ ˆç©ºé—´çš„ä¿¡æ¯ï¼Œå®ƒæœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸€ä»½å­˜å‚¨ç©ºé—´ã€‚<a href="https://www.cnblogs.com/hf-cherish/p/4970267.html" target="_blank" rel="noopener">java é™æ€å˜é‡ç”Ÿå‘½å‘¨æœŸï¼ˆç±»ç”Ÿå‘½å‘¨æœŸï¼‰</a></p></li></ul></li></ol><p>æœ¬èŠ‚é€šè¿‡ç»§æ‰¿Threadç±»å®ç°äº†å¤šçº¿ç¨‹æ–¹å¼æ¨¡æ‹Ÿé“¶è¡Œæ’é˜Ÿå«å·çš„ç²—ç³™ç‰ˆï¼Œæ¥ä¸‹æ¥å°†ä¼šå®ç°æ¯”è¾ƒå‹å¥½çš„é“¶è¡Œæ’é˜Ÿå«å·åŠŸèƒ½ï¼Œ<strong>æŠŠä¸šåŠ¡å’Œçº¿ç¨‹åˆ†ç¦»å‡ºæ¥</strong>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>104-çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä»¥åŠstartæ–¹æ³•æºç å‰–æ</title>
      <link href="/wang-thread/104-thread-lifecycle/"/>
      <url>/wang-thread/104-thread-lifecycle/</url>
      
        <content type="html"><![CDATA[<img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8u9nc9l7qj30y20fewgo.jpg" alt="çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç®€å›¾" style="zoom:50%;" /><p>çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸå…±æœ‰6ç§çŠ¶æ€ï¼š</p><ol><li><p>åˆå§‹(NEW)ï¼šæ–°åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œä½†è¿˜æ²¡æœ‰è°ƒç”¨start()æ–¹æ³•ã€‚</p></li><li><p>è¿è¡Œ(RUNNABLE)ï¼šJavaçº¿ç¨‹ä¸­å°†å°±ç»ªï¼ˆreadyï¼‰å’Œè¿è¡Œä¸­ï¼ˆrunningï¼‰ä¸¤ç§çŠ¶æ€ç¬¼ç»Ÿçš„ç§°ä¸ºâ€œè¿è¡Œâ€ã€‚<br> çº¿ç¨‹å¯¹è±¡åˆ›å»ºåï¼Œå…¶ä»–çº¿ç¨‹(æ¯”å¦‚mainçº¿ç¨‹ï¼‰è°ƒç”¨äº†è¯¥å¯¹è±¡çš„start()æ–¹æ³•ã€‚è¯¥çŠ¶æ€çš„çº¿ç¨‹ä½äºå¯è¿è¡Œçº¿ç¨‹æ± ä¸­ï¼Œç­‰å¾…è¢«çº¿ç¨‹è°ƒåº¦é€‰ä¸­ï¼Œè·å–CPUçš„ä½¿ç”¨æƒï¼Œæ­¤æ—¶å¤„äºå°±ç»ªçŠ¶æ€ï¼ˆreadyï¼‰ã€‚å°±ç»ªçŠ¶æ€çš„çº¿ç¨‹åœ¨è·å¾—CPUæ—¶é—´ç‰‡åå˜ä¸ºè¿è¡Œä¸­çŠ¶æ€ï¼ˆrunningï¼‰ã€‚</p></li><li><p>é˜»å¡(BLOCKED)ï¼šè¡¨ç¤ºçº¿ç¨‹é˜»å¡äºé”ã€‚</p></li><li><p>ç­‰å¾…(WAITING)ï¼šè¿›å…¥è¯¥çŠ¶æ€çš„çº¿ç¨‹éœ€è¦ç­‰å¾…å…¶ä»–çº¿ç¨‹åšå‡ºä¸€äº›ç‰¹å®šåŠ¨ä½œï¼ˆé€šçŸ¥æˆ–ä¸­æ–­ï¼‰ã€‚</p></li><li><p>è¶…æ—¶ç­‰å¾…(TIMED_WAITING)ï¼šè¯¥çŠ¶æ€ä¸åŒäºWAITINGï¼Œå®ƒå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´åè‡ªè¡Œè¿”å›ã€‚</p></li><li><p>ç»ˆæ­¢(TERMINATED)ï¼šè¡¨ç¤ºè¯¥çº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚</p> <img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8uagny1khj30w30lf0tx.jpg" alt="çº¿ç¨‹çŠ¶æ€å›¾" style="zoom:80%;" /> <img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8uafgd9wbj30sx0eejrw.jpg" alt="çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ" style="zoom:80%;" /></li></ol><p><code>start()</code></p><blockquote><pre><code class="java">public void start()</code></pre><p>Causes this thread to begin execution; the Java Virtual Machine calls the <code>run</code> method of this thread.</p><p>The result is that two threads are running concurrently: the current thread (which returns from the call to the <code>start</code> method) and the other thread (which executes its <code>run</code> method).</p><p><strong>It is never legal to start a thread more than once.</strong> In particular, a thread may not be restarted once it has completed execution.</p></blockquote><ul><li>ç¨‹åºå¯åŠ¨ä¼šåˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼šmainä¸»çº¿ç¨‹ã€runç”¨æˆ·å­çº¿ç¨‹</li><li><code>start()</code>ä¸èƒ½è¢«æ‰§è¡Œä¸¤æ¬¡ï¼šIllegalThreadStateException</li></ul><p>ä¸æ‰§è¡Œ<code>start()</code>æ–¹æ³•ï¼Œè€Œç›´æ¥æ‰§è¡Œ<code>run()</code>æ–¹æ³•ï¼Œæ­¤æ—¶æ²¡æœ‰å¯åŠ¨çº¿ç¨‹ï¼Œåªæ˜¯è°ƒç”¨äº†ä¸€ä¸ªå®ä¾‹æ–¹æ³•è€Œå·²ã€‚è¿™æ˜¯ä½¿ç”¨äº†æ¨¡ç‰ˆæ–¹æ³•çš„æŠ€å·§ã€‚</p><pre><code class="java">Thread t1 = new Thread(&quot;READ-Thread&quot;) {  @Override  public void run() {    println(Thread.currentThread().getName());    readFromDataBase();  }};t1.run();</code></pre><p>æ­¤æ—¶è¾“å‡ºçš„çº¿ç¨‹åç§°ä¸ºï¼š<code>main</code></p><p>æ¨¡ç‰ˆæ–¹æ³•ï¼š</p><p>ä¾‹ï¼šåœ¨å®é™…ç¨‹åºä¸­ï¼Œç®—æ³•å·²ç»åŸºæœ¬å›ºå®šï¼Œä½†æ˜¯å…¶ä¸­æœ‰ä¸€äº›é€»è¾‘å¯èƒ½æ˜¯å¤šå˜çš„ï¼Œæ­¤æ—¶å°†å…¶æŠ½è±¡å‡ºå»å¹¶è®©å­ç±»å»å®ç°ã€‚</p><pre><code class="java">public abstract class BaseTemplateMethod {    public static void main(String[] args) {        BaseTemplateMethod t1 = new BaseTemplateMethod() {            @Override            protected void wrapPrint(String message) {                System.out.println(&quot;*&quot; + message + &quot;*&quot;);            }        };        t1.print(&quot;Hello Thread&quot;);        BaseTemplateMethod t2 = new BaseTemplateMethod() {            @Override            protected void wrapPrint(String message) {                System.out.println(&quot;+&quot; + message + &quot;+&quot;);            }        };        t2.print(&quot;Hello Thread&quot;);    }    public final void print(String message) {        System.out.println(&quot;#####################&quot;);        wrapPrint(message);        System.out.println(&quot;#####################&quot;);    }    protected abstract void wrapPrint(String message);}</code></pre><p>æ³¨ï¼šçœŸæ­£çš„Templateæ–¹æ³•éœ€è¦å†™æˆæŠ½è±¡ç±»ï¼Œå¹¶æŠŠ<code>print()</code>æ–¹æ³•å†™æˆ<code>final</code>æ–¹æ³•ï¼ˆå¿…é¡»ä¸º<code>final</code>æ–¹æ³•ï¼‰ï¼Œ<code>wrapPrint()</code>æ–¹æ³•å†™æˆæŠ½è±¡æ–¹æ³•ã€‚</p><p>æ€»ç»“ï¼š</p><ol><li>Javaåº”ç”¨ç¨‹åºçš„mainå‡½æ•°æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œæ˜¯è¢«JVMå¯åŠ¨çš„æ—¶å€™è°ƒç”¨ï¼Œçº¿ç¨‹çš„åå­—å«main</li><li>å®ç°ä¸€ä¸ªçº¿ç¨‹å¿…é¡»åˆ›å»ºThreadå®ä¾‹ï¼Œoverrideé‡å†™<code>run()</code>æ–¹æ³•ï¼Œå¹¶ä¸”è°ƒç”¨<code>start()</code>æ–¹æ³•</li><li>åœ¨JVMå¯åŠ¨åï¼Œå®é™…ä¸Šæœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è‡³å°‘æœ‰ä¸€ä¸ªéå®ˆæŠ¤çº¿ç¨‹ï¼ˆmainçº¿ç¨‹ï¼‰</li><li>å½“ä½ è°ƒç”¨ä¸€ä¸ªçº¿ç¨‹çš„<code>start()</code>æ–¹æ³•çš„æ—¶å€™ï¼Œæ­¤æ—¶è‡³å°‘æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯è°ƒç”¨ä½ çš„çº¿ç¨‹ï¼ˆmainæ–¹æ³•ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯æ‰§è¡Œ<code>run()</code>æ–¹æ³•çš„çº¿ç¨‹</li><li>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºï¼šNewã€Runnableã€Runningã€Blockã€Terminate</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>103-åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹</title>
      <link href="/wang-thread/103-create-thread/"/>
      <url>/wang-thread/103-create-thread/</url>
      
        <content type="html"><![CDATA[<pre><code class="java">/** * è¯»æ•°æ® */private static void readFromDataBase() {    // read data from database and handle it    try {        println(&quot;Begin read data from db.&quot;);        Thread.sleep(1000 * 5L);        println(&quot;Read data done and start handle it.&quot;);    } catch (InterruptedException e) {        e.printStackTrace();    }    println(&quot;The data handle finish and successfully.&quot;);}</code></pre><pre><code class="java">/** * å†™æ•°æ® */private static void writeDataToFile() {    // write data to file    try {        println(&quot;Begin write data to file.&quot;);        Thread.sleep(1000 * 10L);        println(&quot;Write data done and start handle it.&quot;);    } catch (InterruptedException e) {        e.printStackTrace();    }    println(&quot;The data handle finish and successfully.&quot;);}</code></pre><ol><li><p>é¡ºåºæ‰§è¡Œï¼Œè€Œéäº¤æ›¿æ‰§è¡Œ</p><pre><code class="java">// ä¾‹1readFromDataBase();writeDataToFile();// ä¾‹2for (int i = 0; i &lt; 100; i++) {    println(&quot;Task i=&gt;&quot; + i);}for (int j = 0; j &lt; 100; j++) {    println(&quot;Task j=&gt;&quot; + j);}</code></pre></li><li><p>äº¤æ›¿æ‰§è¡Œ</p><pre><code class="java">Thread t1 = new Thread(&quot;Custom-Thread&quot;) {    @Override    public void run() {        for (int i = 0; i &lt; 100; i++) {            println(&quot;Task i=&gt;&quot; + i);            try {                Thread.sleep(1000 * 1L);            } catch (InterruptedException e) {                e.printStackTrace();            }        }    }};t1.start();for (int j = 0; j &lt; 100; j++) {    println(&quot;Task j=&gt;&quot; + j);}</code></pre><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8u68chvj9j30p00kwgnk.jpg" alt="Custom-Threadçº¿ç¨‹æƒ…å†µ" style="zoom:50%;" /></li><li><p>äº¤æ›¿æ‰§è¡Œè¯»å†™æ“ä½œ</p><pre><code class="java">new Thread(&quot;READ-Thread&quot;) {    @Override    public void run() {        readFromDataBase();    }}.start();new Thread(&quot;WRITE-Thread&quot;) {    @Override    public void run() {        writeDataToFile();    }}.start();</code></pre></li></ol><ul><li><p>åˆ›å»ºçº¿ç¨‹åä¸è°ƒç”¨<code>start()</code>æ–¹æ³•ï¼Œæ­¤æ—¶ä»–æ˜¯ä¸€ä¸ªçº¿ç¨‹ä¹ˆï¼Ÿ</p><p>ä¸æ˜¯ã€‚æ¶‰åŠåˆ°çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚Threadè¢«newå‡ºæ¥ä¹‹ååªæ˜¯ä¸€ä¸ªJavaå®ä¾‹ï¼Œå’Œå…¶ä»–æ™®é€šJavaå®ä¾‹ä¸€æ¨¡ä¸€æ ·ã€‚åªæœ‰<code>.start()</code>å¯åŠ¨ä¹‹åæ‰ä¼šå˜ä¸ºä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œä¸”å¯åŠ¨æ˜¯ç«‹å³è¿”å›çš„ï¼Œä¸æ˜¯BLOCKEDé˜»å¡ã€‚</p></li></ul><p>JDKæ–‡æ¡£ï¼š<a href="https://docs.oracle.com/javase/8/docs/api/" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/api/</a></p><p>æŸ¥çœ‹<code>java.lang.Thread</code></p><p>A <em>thread</em> is a thread of execution in a program. The Java Virtual Machine allows an application to have multiple threads of execution running concurrently.</p><p>Every thread has a priority. Threads with higher priority are executed in preference to threads with lower priority. Each thread may or may not also be marked as a daemon.</p><p>When a Java Virtual Machine starts up, there is usually a single non-daemon thread (which typically calls the method named <code>main</code> of some designated class).</p><p>There are two ways to create a new thread of execution. One is to declare a class to be a subclass of <code>Thread</code>. This subclass should override the <code>run</code> method of class <code>Thread</code>. An instance of the subclass can then be allocated and started. </p><p>éªŒè¯å¯åŠ¨ç¨‹åºåJVMä¼šè‡ªåŠ¨åˆ›å»ºmainçº¿ç¨‹ï¼š</p><ol><li><p>ç¼–å†™ç¨‹åºå¹¶è¿è¡Œ</p><pre><code class="java">public static void main(String[] args) {    try {        Thread.sleep(1000 * 100L);    } catch (InterruptedException e) {        e.printStackTrace();    }}</code></pre></li><li><p>æ˜¾ç¤ºå½“å‰æ‰€æœ‰Javaè¿›ç¨‹pid</p><pre><code class="shell">jps</code></pre></li><li><p>åŸºäºJMXçš„å¯è§†åŒ–ç›‘è§†ã€ç®¡ç†å·¥å…·ã€‚å®æ—¶çš„ç›‘æ§Javaç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­çš„å†…å­˜ã€CPUã€çº¿ç¨‹çš„ä½¿ç”¨æƒ…å†µï¼Œå¹¶å¯ä»¥å¯¹åŠ è½½çš„ç›¸å…³ç±»è¿›è¡Œåˆ†æ</p><pre><code class="shell">jconsole &lt;thread_pid&gt;</code></pre><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8u5g8s2ucj30p00kumz4.jpg" a lt="jconsoleæŸ¥çœ‹çº¿ç¨‹" style="zoom:50%;" /></li><li><p>æ€»ç»“ï¼š</p><p>JVMå¯åŠ¨æ—¶ï¼š</p><ul><li>éå®ˆæŠ¤çº¿ç¨‹ï¼š<code>main()</code>æ•´ä¸ªç¨‹åºçš„å…¥å£ã€‚</li><li>å®ˆæŠ¤çº¿ç¨‹ï¼š<code>Finalizer()</code>åƒåœ¾å›æ”¶å™¨ã€<code>Reference Handler</code>å¼•ç”¨å…·æŸ„ã€<code>Signal Dispatcher</code>æ¥æ”¶ç³»ç»Ÿä¿¡å·å‘½ä»¤ã€JMXã€RMI</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>102-ç®€å•ä»‹ç»ä»€ä¹ˆæ˜¯çº¿ç¨‹</title>
      <link href="/wang-thread/102-what-is-thread/"/>
      <url>/wang-thread/102-what-is-thread/</url>
      
        <content type="html"><![CDATA[<p>è¯¾ç¨‹å¤§çº²ï¼š</p><ol><li>çº¿ç¨‹ä»‹ç»</li><li>åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹</li><li>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</li><li>Runnableæ¥å£ä»‹ç»</li><li>Thread APIè¯¦ç»†ä»‹ç»</li><li>çº¿ç¨‹åŒæ­¥ï¼Œé”æŠ€æœ¯</li><li>å¦‚ä½•ä¼˜é›…çš„åœæ­¢çº¿ç¨‹</li><li>çº¿ç¨‹é—´é€šè®¯</li><li>çº¿ç¨‹ç»„è¯¦ç»†ä»‹ç»</li><li>çº¿ç¨‹æ± åŸç†ä»¥åŠå®ç°ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± </li><li>çº¿ç¨‹å¼‚å¸¸æ•è·ä»¥åŠçº¿ç¨‹å †æ ˆä¿¡æ¯è¯¦ç»†è®²è§£</li><li>FIFOé˜Ÿåˆ—ä»¥åŠå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„è¿è¡Œ</li><li>BoolenLocké”å®ç°</li><li>å¸¸ç”¨è®¾è®¡æ¨¡å¼åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„ä½¿ç”¨</li><li>æŸ¥ç¼ºè¡¥æ¼</li></ol><p>å…¶ä»–è¯¾ç¨‹ï¼š</p><ol><li>PowerMockå®æˆ˜è§†é¢‘ï¼ˆ10é›†ï¼‰</li><li>Concordionå®æˆ˜è§†é¢‘ï¼ˆ10é›†ï¼‰</li><li>Apache Sqoopå®æˆ˜è§†é¢‘ï¼ˆ12é›†ï¼‰</li><li>Apache Flumeå®æˆ˜è§†é¢‘ï¼ˆ42é›†ï¼‰</li><li>Java 8 å®æˆ˜è§†é¢‘ï¼ˆ40é›†ï¼‰</li><li>Scalaå®æˆ˜è§†é¢‘ï¼ˆ160é›†ï¼‰</li></ol><p>è¿›ç¨‹-çº¿ç¨‹-åç¨‹</p><p>çº¿ç¨‹ï¼ˆThreadï¼‰æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ï¼Œæ˜¯ç‹¬ç«‹è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚</p><p>ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚åœ¨å•ä¸ªç¨‹åºä¸­åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹å®Œæˆä¸åŒçš„å·¥ä½œï¼Œæˆä¸ºå¤šçº¿ç¨‹ã€‚</p><p>å¹¶è¡Œï¼šå¤šæ ¸æ“ä½œç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªCPUæ‰§è¡Œä¸€ä¸ªçº¿ç¨‹</p><p>å¹¶å‘ï¼šç¨‹åºåŒæ—¶ï¼ˆæ—¶é—´æ®µéæ—¶é—´ç‚¹ï¼‰æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œæœ‰çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢</p>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>101-è¯¾ç¨‹å¤§çº²åŠä¸»è¦å†…å®¹ä»‹ç»</title>
      <link href="/wang-thread/101-syllabus/"/>
      <url>/wang-thread/101-syllabus/</url>
      
        <content type="html"><![CDATA[<ol><li>Javaå¤šçº¿ç¨‹ä»‹ç»</li><li>å¤šçº¿ç¨‹ç¼–ç¨‹å…¥é—¨</li><li>çº¿ç¨‹åˆ›å»ºä¸å¯åŠ¨ä»¥åŠçº¿ç¨‹çŠ¶æ€</li><li>Runnableæ¥å£è¯¦ç»†è¯¦è§£</li><li>çº¿ç¨‹ä¼˜å…ˆçº§ä»¥åŠå®ˆæŠ¤çº¿ç¨‹è¯¦è§£</li><li>çº¿ç¨‹åŒæ­¥</li><li>çº¿ç¨‹é—´é€šè®¯</li><li>çº¿ç¨‹ç»„è¯¦è§£</li><li>è‡ªè¿è¡Œå¯¹è±¡è¯¦è§£</li><li>çº¿ç¨‹å¼‚å¸¸å›è°ƒ</li><li>çº¿ç¨‹æ± è¯¦è§£</li><li>ç­‰å¾…çº¿ç¨‹å®Œæˆä»»åŠ¡</li><li>é˜»å¡IOå’Œå¤šçº¿ç¨‹è¯¦è§£</li><li>å¦‚ä½•ä¼˜é›…çš„ç»“æŸçº¿ç¨‹</li><li>è‡ªå®šä¹‰çº¿ç¨‹é”è¯¦è§£</li><li>FIFOé˜Ÿåˆ—ä¸çº¿ç¨‹</li><li>å¤šçº¿ç¨‹APIæŸ¥æ¼è¡¥ç¼º</li></ol><p>ä¾‹å­ï¼š</p><ol><li><p>éœ€æ±‚ï¼šä¸€ä¸ªç³»ç»Ÿå»é‡‡é›†å…¶ä»–æ‰€æœ‰æœåŠ¡å™¨èŠ‚ç‚¹çš„IOã€ç£ç›˜ç­‰è¿æ¥æƒ…å†µã€‚</p><p>åˆ†æï¼šè¿™é‡Œä¸å¯èƒ½å»ä¸€ä¸ªä¸€ä¸ªåœ°é‡‡é›†ï¼Œåº”è¯¥ç”¨åˆ°å¤šçº¿ç¨‹ã€‚æ¯ä¸€ä¸ªçº¿ç¨‹é‡‡é›†ä¸€ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ã€‚æ¯ä¸€è½®é‡‡é›†å®Œæˆéƒ½éœ€è¦å°†æ•°æ®å†™å…¥åˆ°DBæ•°æ®åº“ã€‚</p><p>æ€»è¡¨ï¼šæ‰¹æ¬¡ã€é‡‡é›†å¼€å§‹æ—¶é—´ï¼Œé‡‡é›†ç»“æŸæ—¶é—´</p><p>è¯¦æƒ…è¡¨ï¼šèŠ‚ç‚¹IDï¼ŒCPUã€å†…å­˜ã€IOã€åº”ç”¨è¿›ç¨‹æ•°ç­‰ï¼Œå…³è”ID</p><p>æ€è€ƒï¼š</p><ul><li><p>å¤šä¸ªçº¿ç¨‹å¦‚ä½•å¾—åˆ°å”¯ä¸€çš„é‡‡é›†ç»“æŸæ—¶é—´ï¼Ÿ</p></li><li><p>å¦‚æœæœåŠ¡å™¨èŠ‚ç‚¹æ•°ç›®è¾¾åˆ°100å°ï¼Œé‚£ä¹ˆåˆ™éœ€è¦100ä¸ªçº¿ç¨‹ï¼Ÿæ­¤æ—¶ç³»ç»Ÿä¼šå› ä¸ºçº¿ç¨‹è¿‡å¤šå‡ºç°CPUã€å†…å­˜ã€ç³»ç»Ÿèµ„æºåˆ†é…ä¸è¶³è€Œå´©æºƒ</p><p>å§‹ç»ˆä¿æŒ20ä¸ªçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼Œæ¯å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆä»»åŠ¡ï¼Œåˆ™æ–°å¼€å¯ä¸€ä¸ªä»»åŠ¡å†å»é‡‡é›†å…¶ä»–æœåŠ¡å™¨èŠ‚ç‚¹</p></li><li><p>å¯åŠ¨ä¸»çº¿ç¨‹å¦‚ä½•çŸ¥é“å­çº¿ç¨‹æ˜¯å¦è°ƒç”¨æˆåŠŸï¼Œå›è°ƒã€‚</p></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>100-Javaå¤šçº¿ç¨‹åŸºç¡€çŸ¥è¯†ç›®å½•</title>
      <link href="/wang-thread/100-catalog/"/>
      <url>/wang-thread/100-catalog/</url>
      
        <content type="html"><![CDATA[<img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8szj5cfvoj31600sd11b.jpg" alt="Javaå¹¶å‘ç¼–ç¨‹" style="zoom:100%;" /><ol><li>è¯¾ç¨‹å¤§çº²åŠä¸»è¦å†…å®¹ä»‹ç»</li><li>ç®€å•ä»‹ç»ä»€ä¹ˆæ˜¯çº¿ç¨‹</li><li>åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹</li><li>çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä»¥åŠstartæ–¹æ³•æºç å‰–æ</li><li>é‡‡ç”¨å¤šçº¿ç¨‹æ–¹å¼æ¨¡æ‹Ÿé“¶è¡Œæ’é˜Ÿå«å·</li><li>ç”¨Runnableæ¥å£å°†çº¿ç¨‹çš„é€»è¾‘æ‰§è¡Œå•å…ƒä»æ§åˆ¶ä¸­æŠ½å–å‡ºæ¥</li><li>ç­–ç•¥æ¨¡å¼åœ¨Threadå’ŒRunnableä¸­çš„åº”ç”¨åˆ†æ</li><li>æ„é€ Threadå¯¹è±¡ä½ ä¹Ÿè®¸ä¸çŸ¥é“çš„å‡ ä»¶äº‹</li><li>å¤šçº¿ç¨‹ä¸JVMå†…å­˜ç»“æ„çš„å…³ç³»ï¼Œè™šæ‹Ÿæœºæ ˆå®éªŒ</li><li>Threadæ„é€ å‡½æ•°StackSizeè¯¦ç»†è®²è§£</li><li>Threadæ„é€ å‡½æ•°StackSizeè¯¦ç»†è®²è§£-ç»­</li><li>Daemonçº¿ç¨‹çš„åˆ›å»ºä»¥åŠä½¿ç”¨åœºæ™¯åˆ†æ</li><li>çº¿ç¨‹IDï¼Œä¼˜å…ˆçº§è®²è§£</li><li>Threadçš„joinæ–¹æ³•è¯¦ç»†ä»‹ç»ï¼Œç»“åˆä¸€ä¸ªå…¸å‹æ¡ˆä¾‹</li><li>Threadä¸­æ–­Interruptæ–¹æ³•è¯¦ç»†è®²è§£</li><li>é‡‡ç”¨ä¼˜é›…çš„æ–¹å¼ç»“æŸçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</li><li>Thread APIç»¼åˆå®æˆ˜ï¼Œç¼–å†™ThreadServiceå®ç°æš´åŠ›ç»“æŸçº¿ç¨‹çš„ç»¼åˆå®æˆ˜</li><li>æ•°æ®åŒæ­¥çš„å¼•å…¥ä¸Synchronizedçš„ç®€å•ä»‹ç»</li><li>ç»“åˆjconsole,jstackä»¥åŠæ±‡ç¼–æŒ‡ä»¤è®¤è¯†synchronizedå…³é”®å­—</li><li>åŒæ­¥ä»£ç å—ä»¥åŠåŒæ­¥æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«å’Œå…³ç³»</li><li>é€šè¿‡å®éªŒåˆ†æThisé”çš„å­˜åœ¨</li><li>é€šè¿‡å®éªŒåˆ†æClassé”çš„å­˜åœ¨</li><li>å¤šçº¿ç¨‹æ­»é”åˆ†æï¼Œæ¡ˆä¾‹ä»‹ç»</li><li>çº¿ç¨‹é—´é€šä¿¡å¿«é€Ÿå…¥é—¨ï¼Œä½¿ç”¨waitå’Œnotifyè¿›è¡Œçº¿ç¨‹é—´çš„æ•°æ®é€šä¿¡</li><li>å¤šProduceå¤šConsumeä¹‹é—´çš„é€šè®¯å¯¼è‡´å‡ºç°ç¨‹åºå‡æ­»çš„åŸå› åˆ†æ</li><li>å¤šçº¿ç¨‹ä¸‹çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Œä»¥åŠè¯¦ç»†ä»‹ç»notifyAllæ–¹æ³•</li><li>waitå’Œsleepçš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œæ·±å…¥åˆ†æï¼ˆé¢è¯•å¸¸è§é—®é¢˜ï¼‰</li><li>çº¿ç¨‹ç”Ÿäº§è€…æ¶ˆè´¹è€…çš„ç»¼åˆå®æˆ˜ç»“åˆJava8è¯­æ³•</li><li>å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå·±çš„æ˜¾å¼é”Lockç²¾è®²ä¸Š</li><li>å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå·±çš„æ˜¾å¼é”Lockç²¾è®²ä¸‹ï¼ˆè®©é”å…·å¤‡è¶…æ—¶åŠŸèƒ½ï¼‰</li><li>å¦‚ä½•ç»™ä½ çš„åº”ç”¨ç¨‹åºæ³¨å…¥é’©å­ç¨‹åºï¼ŒLinuxä¸‹æ¼”ç¤º</li><li>å¦‚ä½•æ•è·çº¿ç¨‹è¿è¡ŒæœŸé—´çš„å¼‚å¸¸</li><li>ThreadGroup APIä»‹ç»ä¹‹ä¸€</li><li>ThreadGroup APIä»‹ç»ä¹‹äºŒ</li><li>çº¿ç¨‹æ± åŸç†ä¸è‡ªå®šä¹‰çº¿ç¨‹æ± </li><li>è‡ªå®šä¹‰ä¸ªç®€å•çš„çº¿ç¨‹æ± å¹¶ä¸”æµ‹è¯•</li><li>ç»™çº¿ç¨‹æ± å¢åŠ æ‹’ç»ç­–ç•¥ä»¥åŠåœæ­¢æ–¹æ³•</li><li>ç»™çº¿ç¨‹æ± å¢åŠ è‡ªåŠ¨æ‰©å……çº¿ç¨‹æ•°é‡ï¼Œä»¥åŠé—²æ—¶è‡ªåŠ¨å›æ”¶çš„åŠŸèƒ½</li><li>è¯¾ç¨‹ç»“æŸï¼Œå†…å®¹å›é¡¾ï¼Œä¸‹å­£å†…å®¹é¢„å‘Š</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ±ªæ–‡å› </category>
          
          <category> å¤šçº¿ç¨‹ç¬¬ä¸€å­£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1186-Javaå¹¶å‘ç¼–ç¨‹çš„â€œåŸºçŸ³â€â€”â€”å¤šçº¿ç¨‹æ¦‚å¿µåˆè¯†</title>
      <link href="/imooc/1186-thread-base/"/>
      <url>/imooc/1186-thread-base/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/1186" target="_blank" rel="noopener">https://www.imooc.com/learn/1186</a></p><p>ç®€ä»‹ï¼šå¹¶å‘æ˜¯ç¨‹åºå‘˜æ°¸æ’çš„å‘½é¢˜ã€‚å¹¶å‘æ˜“å­¦éš¾ç²¾ï¼Œæ²¡æœ‰ç¨³æ‰ç¨³æ‰“çš„ç¬¬ä¸€æ­¥ï¼Œå‰è·¯åå·æ˜“å¼ƒå‘ã€‚æœ¬è¯¾ç¨‹é‚€è¯·æ…•è¯¾å¹¿å—å¥½è¯„çš„ã€ŠJavaå¹¶å‘æ ¸å¿ƒçŸ¥è¯†ä½“ç³»ç²¾è®²ã€‹è¯¾ç¨‹çš„æ‚Ÿç©ºè€å¸ˆå¸¦é¢†å°ä¼™ä¼´æ„å»ºæ¸…æ™°çš„ç†è®ºåŸºçŸ³ï¼Œæ¶µç›–çº¿ç¨‹ã€è¿›ç¨‹ã€å¤šçº¿ç¨‹ã€å¹¶å‘ã€é«˜å¹¶å‘ã€åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡ç­‰ï¼Œè¿˜æœ‰é«˜é¢‘é¢è¯•ç‚¹æ‹¨ã€‚ä¸€å¥è¯ï¼šæµ“ç¼©2å°æ—¶çš„é«˜è´¨ç²¾å“å¹¶å‘å…¥é—¨è¯¾ï¼Œä½ ç»å¯¹å€¼å¾—æ‹¥æœ‰~</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¸ä¸ŠJavaå¹¶å‘å¾é€”"><a href="#ç¬¬1ç« -è¸ä¸ŠJavaå¹¶å‘å¾é€”" class="headerlink" title="ç¬¬1ç«  è¸ä¸ŠJavaå¹¶å‘å¾é€”"></a>ç¬¬1ç«  è¸ä¸ŠJavaå¹¶å‘å¾é€”</h2><blockquote><p>ç†æ¸…æœ¬è¯¾ç¨‹å­¦ä¹ ç›®çš„ï¼Œæ„å»ºçŸ¥è¯†è„‰ç»œï¼Œçºµè§ˆå…¨å±€ã€‚</p></blockquote><h3 id="1-1-åº-æœ¬è¯¾ç»¼è¿°-05-11"><a href="#1-1-åº-æœ¬è¯¾ç»¼è¿°-05-11" class="headerlink" title="1-1 åº-æœ¬è¯¾ç»¼è¿° (05:11)"></a>1-1 åº-æœ¬è¯¾ç»¼è¿° (05:11)</h3><p>å¹¶å‘ç¼–ç¨‹çš„â€œåŸºçŸ³â€â€”â€”å¤šçº¿ç¨‹æ¦‚å¿µå»ºç«‹</p><p>æ™¦æ¶©éš¾æ‡‚çš„æ¦‚å¿µï¼š</p><ul><li>çº¿ç¨‹ã€è¿›ç¨‹</li><li>ä¸²è¡Œã€å¹¶è¡Œã€å¹¶å‘</li><li>å¤šçº¿ç¨‹ã€é«˜å¹¶å‘</li><li>åŒæ­¥å¼‚æ­¥ã€é˜»å¡éé˜»å¡</li></ul><p>é—®é¢˜ï¼š</p><ol><li>çº¿ç¨‹å’Œè¿›ç¨‹çš„ç›¸åŒå’Œä¸åŒï¼Ÿ</li><li>å¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li><li>å¤šçº¿ç¨‹å°±æ˜¯é«˜å¹¶å‘ä¹ˆï¼Ÿç›¸åï¼Œé«˜å¹¶å‘å°±æ˜¯å¤šçº¿ç¨‹ä¹ˆï¼Ÿ</li><li>åŒæ­¥é˜»å¡å’Œå¼‚æ­¥éé˜»å¡çš„å…³ç³»ï¼Ÿ</li></ol><h3 id="1-2-ä»æ€ç»´å¯¼å›¾çœ‹å¹¶å‘è„‰ç»œ-08-13"><a href="#1-2-ä»æ€ç»´å¯¼å›¾çœ‹å¹¶å‘è„‰ç»œ-08-13" class="headerlink" title="1-2 ä»æ€ç»´å¯¼å›¾çœ‹å¹¶å‘è„‰ç»œ (08:13)"></a>1-2 ä»æ€ç»´å¯¼å›¾çœ‹å¹¶å‘è„‰ç»œ (08:13)</h3><p><a href="https://naotu.baidu.com/file/b8a70ff9e7f3af1437594b2d0fb4ebfd" target="_blank" rel="noopener">https://naotu.baidu.com/file/b8a70ff9e7f3af1437594b2d0fb4ebfd</a></p><p>é™„ï¼š</p><ul><li><p>å¹¶å‘ç¼–ç¨‹çš„â€œåŸºçŸ³â€â€”â€”å¤šçº¿ç¨‹æ¦‚å¿µå»ºç«‹ï¼š</p><p><a href="http://naotu.baidu.com/file/b8a70ff9e7f3af1437594b2d0fb4ebfd" target="_blank" rel="noopener">http://naotu.baidu.com/file/b8a70ff9e7f3af1437594b2d0fb4ebfd</a></p></li><li><p>çº¿ç¨‹8å¤§æ ¸å¿ƒåŸºç¡€ï¼š</p><p><a href="http://naotu.baidu.com/file/07f437ff6bc3fa7939e171b00f133e17" target="_blank" rel="noopener">http://naotu.baidu.com/file/07f437ff6bc3fa7939e171b00f133e17</a></p></li><li><p>Javaå†…å­˜æ¨¡å‹â€”â€”åº•å±‚åŸç†ï¼š</p><p><a href="http://naotu.baidu.com/file/60a0bdcaca7c6b92fcc5f796fe6f6bc9" target="_blank" rel="noopener">http://naotu.baidu.com/file/60a0bdcaca7c6b92fcc5f796fe6f6bc9</a></p></li><li><p>æ­»é”â€”â€”ä»äº§ç”Ÿåˆ°æ¶ˆé™¤ï¼š</p><p><a href="http://naotu.baidu.com/file/ec7748c253f4fc9d88ac1cc1e47814f3" target="_blank" rel="noopener">http://naotu.baidu.com/file/ec7748c253f4fc9d88ac1cc1e47814f3</a> </p></li><li><p>äºŒçº§å¤§çº²ï¼ˆå¤ä¹ ç”¨ï¼‰ æˆä½“ç³»çš„Javaå¹¶å‘å¤šçº¿ç¨‹æ ¸å¿ƒ+å†…å­˜æ¨¡å‹+æ­»é”â€”â€”ä»ç”¨æ³•åˆ°åŸç†ï¼Œé¢è¯•å¿…è€ƒï¼š</p><p><a href="http://naotu.baidu.com/file/29942292cd032adfae23c09783676004" target="_blank" rel="noopener">http://naotu.baidu.com/file/29942292cd032adfae23c09783676004</a></p></li><li><p>å¹¶å‘å·¥å…·ç±»åˆ†ç±»ï¼ˆæœ¬å¯¼å›¾å¯¹åº”çš„è¯¾ç¨‹æ­£åœ¨å½•åˆ¶ä¸­ï¼Œ20å¹´ä¸Šçº¿ï¼‰ï¼š</p><p><a href="http://naotu.baidu.com/file/3902a010470d7c1cf76fe719be124797" target="_blank" rel="noopener">http://naotu.baidu.com/file/3902a010470d7c1cf76fe719be124797</a></p></li></ul><h2 id="ç¬¬2ç« -å­ªç”Ÿå…„å¼Ÿï¼šè¿›ç¨‹å’Œçº¿ç¨‹"><a href="#ç¬¬2ç« -å­ªç”Ÿå…„å¼Ÿï¼šè¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="ç¬¬2ç«  å­ªç”Ÿå…„å¼Ÿï¼šè¿›ç¨‹å’Œçº¿ç¨‹"></a>ç¬¬2ç«  å­ªç”Ÿå…„å¼Ÿï¼šè¿›ç¨‹å’Œçº¿ç¨‹</h2><blockquote><p>ç”¨æ¯”å–»å’Œå®æ“å½»åº•ç†è§£è¿›ç¨‹å’Œçº¿ç¨‹çš„è”ç³»å’Œä¸åŒï¼Œå¹¶è®²è§£Javaè¯­è¨€å’Œå¤šçº¿ç¨‹çš„æ¸Šæºã€‚</p></blockquote><h3 id="2-1-ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿå®æ“æ¡ˆä¾‹ï¼šç”¨æ´»åŠ¨ç›‘è§†å™¨çœ‹æ­£åœ¨è¿è¡Œçš„å„è¿›ç¨‹-07-24"><a href="#2-1-ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿå®æ“æ¡ˆä¾‹ï¼šç”¨æ´»åŠ¨ç›‘è§†å™¨çœ‹æ­£åœ¨è¿è¡Œçš„å„è¿›ç¨‹-07-24" class="headerlink" title="2-1 ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿå®æ“æ¡ˆä¾‹ï¼šç”¨æ´»åŠ¨ç›‘è§†å™¨çœ‹æ­£åœ¨è¿è¡Œçš„å„è¿›ç¨‹ (07:24)"></a>2-1 ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿå®æ“æ¡ˆä¾‹ï¼šç”¨æ´»åŠ¨ç›‘è§†å™¨çœ‹æ­£åœ¨è¿è¡Œçš„å„è¿›ç¨‹ (07:24)</h3><p>æ“ä½œç³»ç»Ÿã€è¿›ç¨‹ã€çº¿ç¨‹çš„åŒ…å«å…³ç³»ï¼š</p><blockquote><p>æ“ä½œç³»ç»Ÿæ˜¯åŒ…å«å¤šä¸ªè¿›ç¨‹çš„å®¹å™¨ï¼Œè€Œæ¯ä¸ªè¿›ç¨‹åˆéƒ½æ˜¯å®¹çº³å¤šä¸ªçº¿ç¨‹çš„å®¹å™¨</p></blockquote><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8s3qksku6j313i0hqtbj.jpg" alt="æ“ä½œç³»ç»Ÿã€è¿›ç¨‹ã€çº¿ç¨‹çš„åŒ…å«å…³ç³»" style="zoom:30%;" /><p>Oracleæ–‡æ¡£çš„å®˜æ–¹å®šä¹‰ï¼š</p><blockquote><p><a href="https://docs.oracle.com/cd/E19455-01/806-5257/6je9h032b/index.html" target="_blank" rel="noopener">https://docs.oracle.com/cd/E19455-01/806-5257/6je9h032b/index.html</a></p></blockquote><table><thead><tr><th>Term</th><th>Definition</th></tr></thead><tbody><tr><td>Process</td><td>The UNIX environment (such as file descriptors, user ID, and so on) created with the <code>fork(2)</code> system call, which is set up to run a program.</td></tr><tr><td>Thread</td><td>A sequence of instructions executed within the context of a process.</td></tr></tbody></table><ul><li>è¿›ç¨‹ï¼šä½¿ç”¨fork(2)ç³»ç»Ÿè°ƒç”¨åˆ›å»ºçš„UNIXç¯å¢ƒï¼ˆä¾‹å¦‚æ–‡ä»¶æè¿°ç¬¦ã€ç”¨æˆ·IDç­‰ï¼‰ï¼Œå®ƒè¢«è®¾ç½®ä¸ºè¿è¡Œç¨‹åºã€‚</li><li>çº¿ç¨‹ï¼šåœ¨è¿›ç¨‹ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œçš„ä¸€ç³»åˆ—æŒ‡ä»¤</li></ul><p>ä»€ä¹ˆæ˜¯è¿›ç¨‹</p><ul><li>è¿›ç¨‹çš„è‹±æ–‡æ˜¯Processï¼ŒæŒ‡çš„æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œã€‚åœ¨ç”¨æˆ·ä¸‹è¾¾è¿è¡Œç¨‹åºçš„å‘½ä»¤åï¼Œå°±ä¼šäº§ç”Ÿè¿›ç¨‹</li></ul><p>æ´»åŠ¨ç›‘è§†å™¨æ¼”ç¤º</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8s3zh26atj313x0u0nc4.jpg" alt="æ´»åŠ¨ç›‘è§†å™¨" style="zoom:40%;" /><p><strong>æ€»ç»“</strong>ï¼šè¿›ç¨‹å°±æ˜¯ç¨‹åº(ä»£ç )çš„çœŸæ­£è¿è¡Œå®ä¾‹ï¼Œ<strong>æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½</strong></p><h3 id="2-2-ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿå®æ“æ¡ˆä¾‹ï¼šç”¨ä»£ç æ¼”ç¤ºçº¿ç¨‹æ•°é‡çš„å®æ—¶å˜åŒ–-05-05"><a href="#2-2-ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿå®æ“æ¡ˆä¾‹ï¼šç”¨ä»£ç æ¼”ç¤ºçº¿ç¨‹æ•°é‡çš„å®æ—¶å˜åŒ–-05-05" class="headerlink" title="2-2 ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿå®æ“æ¡ˆä¾‹ï¼šç”¨ä»£ç æ¼”ç¤ºçº¿ç¨‹æ•°é‡çš„å®æ—¶å˜åŒ– (05:05)"></a>2-2 ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿå®æ“æ¡ˆä¾‹ï¼šç”¨ä»£ç æ¼”ç¤ºçº¿ç¨‹æ•°é‡çš„å®æ—¶å˜åŒ– (05:05)</h3><p>ä»€ä¹ˆæ˜¯çº¿ç¨‹</p><ul><li>çº¿ç¨‹æ˜¯<strong>CPUçš„åŸºæœ¬è°ƒåº¦å•ä½</strong>ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œçš„éƒ½æ˜¯è¿›ç¨‹ä»£ç çš„æŸä¸ªç‰‡æ®µ</li></ul><p>å®ä¾‹æ¼”ç¤ºï¼šåˆ©ç”¨æ´»åŠ¨ç›‘è§†å™¨çš„CPUæ ç›®æŸ¥çœ‹Javaè¿›ç¨‹çš„çº¿ç¨‹æ•°é‡çš„å˜åŒ–</p><pre><code class="java">/** * åˆ›å»º100ä¸ªçº¿ç¨‹ï¼Œç”¨æ´»åŠ¨ç›‘è§†å™¨çš„CPUæ ç›®æŸ¥çœ‹Javaè¿›ç¨‹çš„çº¿ç¨‹æ•°é‡çš„å˜åŒ–ï¼Œ10ç§’åçº¿ç¨‹æ¶ˆå¤±äº† */public class Create100Threads {    public static void main(String[] args) {        for (int i = 0; i &lt; 100; i++) {            new Thread(new Runnable() {                @Override                public void run() {                    try {                        Thread.sleep(10 * 1000);                    } catch (InterruptedException e) {                        e.printStackTrace();                    }                }            }).start();        }    }}</code></pre><p>ç”¨æˆ¿å­ä½œæ¯”å–»</p><h3 id="2-3-çº¿ç¨‹å’Œè¿›ç¨‹æœ‰å“ª6ä¸ªä¸åŒï¼Ÿç”Ÿæ´»æ¡ˆä¾‹ï¼šæˆ¿å­ä¸ä½æˆ·-04-58"><a href="#2-3-çº¿ç¨‹å’Œè¿›ç¨‹æœ‰å“ª6ä¸ªä¸åŒï¼Ÿç”Ÿæ´»æ¡ˆä¾‹ï¼šæˆ¿å­ä¸ä½æˆ·-04-58" class="headerlink" title="2-3 çº¿ç¨‹å’Œè¿›ç¨‹æœ‰å“ª6ä¸ªä¸åŒï¼Ÿç”Ÿæ´»æ¡ˆä¾‹ï¼šæˆ¿å­ä¸ä½æˆ· (04:58)"></a>2-3 çº¿ç¨‹å’Œè¿›ç¨‹æœ‰å“ª6ä¸ªä¸åŒï¼Ÿç”Ÿæ´»æ¡ˆä¾‹ï¼šæˆ¿å­ä¸ä½æˆ· (04:58)</h3><ol><li>èµ·æºä¸åŒï¼šå…ˆæœ‰è¿›ç¨‹ï¼Œåæœ‰çº¿ç¨‹</li><li>æ¦‚å¿µä¸åŒï¼šè¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ï¼Œè¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼›çº¿ç¨‹æ˜¯CPUè°ƒåº¦å•ä½</li><li>å†…å­˜å…±äº«æ–¹å¼ä¸åŒï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå†…å­˜æ— æ³•ä¸å…¶ä»–è¿›ç¨‹å…±äº«ï¼›çº¿ç¨‹å…±äº«ç”±æ“ä½œç³»ç»Ÿåˆ†é…ç»™å…¶çˆ¶è¿›ç¨‹çš„ç›¸åŒå†…å­˜å—</li><li>æ‹¥æœ‰èµ„æºä¸åŒï¼šè¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹å†…å­˜ï¼Œè€Œçº¿ç¨‹è‡ªå·±åŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰ä¸€ç‚¹åœ¨è¿è¡Œä¸­å¿…ä¸å¯å°‘çš„èµ„æº(å¦‚ç¨‹åºè®¡æ•°å™¨,ä¸€ç»„å¯„å­˜å™¨å’Œæ ˆ)ï¼Œä½†æ˜¯å®ƒå¯ä¸åŒå±ä¸€ä¸ªè¿›ç¨‹çš„å…¶ä»–çš„çº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æºã€‚<ul><li>çº¿ç¨‹å…±äº«çš„å†…å®¹åŒ…æ‹¬ï¼š<ol><li><strong>è¿›ç¨‹ä»£ç æ®µ</strong></li><li>è¿›ç¨‹çš„å…¬æœ‰æ•°æ®(åˆ©ç”¨è¿™äº›å…±äº«çš„æ•°æ®ï¼Œçº¿ç¨‹å¾ˆå®¹æ˜“å®ç°ç›¸äº’çš„é€šè®¯)</li><li>è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦</li><li>ä¿¡å·çš„å¤„ç†å™¨</li><li>è¿›ç¨‹çš„å½“å‰ç›®å½•</li><li>è¿›ç¨‹ç”¨æˆ·IDä¸è¿›ç¨‹ç»„ID</li></ol></li><li>çº¿ç¨‹ç‹¬æœ‰çš„å†…å®¹åŒ…æ‹¬ï¼š<ol><li>çº¿ç¨‹ID</li><li>å¯„å­˜å™¨ç»„çš„å€¼</li><li><strong>çº¿ç¨‹çš„å †æ ˆ</strong></li><li>é”™è¯¯è¿”å›ç </li><li>çº¿ç¨‹çš„ä¿¡å·å±è”½ç </li></ol></li></ul></li><li>æ•°é‡ä¸åŒï¼šä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹,ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹</li><li>å¼€é”€ä¸åŒï¼š<ol><li>çº¿ç¨‹çš„åˆ›å»ºã€ç»ˆæ­¢æ—¶é—´æ¯”è¿›ç¨‹çŸ­</li><li>åŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹åˆ‡æ¢æ—¶é—´æ¯”è¿›ç¨‹åˆ‡æ¢çŸ­</li><li>åŒä¸€è¿›ç¨‹çš„å„ä¸ªçº¿ç¨‹é—´å…±äº«æ–‡ä»¶å’Œæ–‡ä»¶èµ„æºï¼Œå¯ä»¥ä¸é€šè¿‡å†…æ ¸è¿›è¡Œé€šä¿¡</li></ol></li><li>ç›¸ä¼¼ç‚¹ï¼šç”Ÿå‘½å‘¨æœŸï¼ˆå°±ç»ªã€ç­‰å¾…ã€è¿è¡Œç­‰çŠ¶æ€ï¼‰</li></ol><h3 id="2-4-Javaå’Œå¤šçº¿ç¨‹çš„æ¸Šæº-ä»£ç æ¼”ç¤ºJVMè‡ªå¯åŠ¨çº¿ç¨‹ï¼Œåˆ†æå®ƒä»¬çš„ä½œç”¨-05-42"><a href="#2-4-Javaå’Œå¤šçº¿ç¨‹çš„æ¸Šæº-ä»£ç æ¼”ç¤ºJVMè‡ªå¯åŠ¨çº¿ç¨‹ï¼Œåˆ†æå®ƒä»¬çš„ä½œç”¨-05-42" class="headerlink" title="2-4 Javaå’Œå¤šçº¿ç¨‹çš„æ¸Šæº-ä»£ç æ¼”ç¤ºJVMè‡ªå¯åŠ¨çº¿ç¨‹ï¼Œåˆ†æå®ƒä»¬çš„ä½œç”¨ (05:42)"></a>2-4 Javaå’Œå¤šçº¿ç¨‹çš„æ¸Šæº-ä»£ç æ¼”ç¤ºJVMè‡ªå¯åŠ¨çº¿ç¨‹ï¼Œåˆ†æå®ƒä»¬çš„ä½œç”¨ (05:42)</h3><ul><li><p>Javaå¤©ç”Ÿæ”¯æŒå¤šçº¿ç¨‹ã€è¯­è¨€æ’åé«˜</p></li><li><p>Javaçº¿ç¨‹ä¼šä¸€å¯¹ä¸€æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿ</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8tvvmls2pj31ai0lon38.jpg" alt="Javaè™šæ‹Ÿæœºä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹å…³ç³»å›¾" style="zoom:35%;" /></li></ul><p>JVMè‡ªåŠ¨å¯åŠ¨çº¿ç¨‹ï¼š</p><blockquote><p>å³ä½¿ä»£ç ä¸­ä¸æ˜¾ç¤ºåˆ›å»ºçº¿ç¨‹ï¼Œåœ¨è¿è¡Œmainæ—¶ï¼ŒJVMä¹Ÿä¼šè‡ªåŠ¨å¯åŠ¨å…¶ä»–çš„çº¿ç¨‹</p></blockquote><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8s60yzc0rj30l80gkmzu.jpg" alt="JVMè‡ªåŠ¨å¯åŠ¨çº¿ç¨‹" style="zoom:50%;" /><ul><li><code>Signal Dispatcher</code>ï¼šæŠŠæ“ä½œç³»ç»Ÿå‘æ¥çš„ä¿¡å·åˆ†å‘ç»™é€‚å½“çš„å¤„ç†ç¨‹åºã€‚è¿æ¥æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åº</li><li><code>Finalizer</code>ï¼šè´Ÿè´£å¯¹è±¡çš„<del>finalize()</del>æ–¹æ³•</li><li><code>Reference Handler</code>ï¼šå’ŒGCã€å¼•ç”¨ç›¸å…³çš„çº¿ç¨‹</li><li><code>main</code>ï¼šä¸»çº¿ç¨‹ï¼Œç”¨æˆ·ç¨‹åºçš„å…¥å£</li></ul><h2 id="ç¬¬3ç« -å¤šçº¿ç¨‹æ¯”çº¿ç¨‹å¤æ‚åœ¨å“ªé‡Œï¼Ÿ"><a href="#ç¬¬3ç« -å¤šçº¿ç¨‹æ¯”çº¿ç¨‹å¤æ‚åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="ç¬¬3ç«  å¤šçº¿ç¨‹æ¯”çº¿ç¨‹å¤æ‚åœ¨å“ªé‡Œï¼Ÿ"></a>ç¬¬3ç«  å¤šçº¿ç¨‹æ¯”çº¿ç¨‹å¤æ‚åœ¨å“ªé‡Œï¼Ÿ</h2><blockquote><p>è®²è§£ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Œå¹¶è®²è§£éœ€è¦å¤šçº¿ç¨‹çš„åŸå› ã€å±€é™ã€‚</p></blockquote><h3 id="3-1-ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Ÿç”Ÿæ´»æ¡ˆä¾‹ï¼šâ€œåˆç§Ÿå®¤å‹â€å’Œâ€œåƒç«é”…â€-09-02"><a href="#3-1-ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Ÿç”Ÿæ´»æ¡ˆä¾‹ï¼šâ€œåˆç§Ÿå®¤å‹â€å’Œâ€œåƒç«é”…â€-09-02" class="headerlink" title="3-1 ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Ÿç”Ÿæ´»æ¡ˆä¾‹ï¼šâ€œåˆç§Ÿå®¤å‹â€å’Œâ€œåƒç«é”…â€ (09:02)"></a>3-1 ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Ÿç”Ÿæ´»æ¡ˆä¾‹ï¼šâ€œåˆç§Ÿå®¤å‹â€å’Œâ€œåƒç«é”…â€ (09:02)</h3><p>å¤šçº¿ç¨‹çš„æ¦‚å¿µ</p><blockquote><p>å¤šçº¿ç¨‹æ˜¯æŒ‡åœ¨å•ä¸ªè¿›ç¨‹ä¸­è¿è¡Œå¤šä¸ªçº¿ç¨‹ã€‚å¦‚æœä¸€ä¸ªç¨‹åºå…è®¸å…è®¸ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„çº¿ç¨‹ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å¤šçº¿ç¨‹ç¨‹åºã€‚</p></blockquote><p>æ¯”å–»ï¼š</p><ol><li>è€å‹è®°çš„æ¯”å–»<ul><li>å®¢å…ï¼šå…¬å…±ç©ºé—´</li><li>å•æ‰€ï¼šé”</li><li>ç‹¬ç«‹æˆ¿é—´ï¼šçº¿ç¨‹ç‹¬äº«ç©ºé—´</li><li>èŠ±å›­æµ‡èŠ±ï¼šçº¿ç¨‹åˆä½œ</li></ul></li><li>ç«é”…çš„æ¯”å–»<ul><li>å¤§ç«é”…ä¸€ä¸ªäººåƒï¼šå°±æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹</li><li>å¤§ç«é”…å¤šäººåƒï¼šå°±æ˜¯å•è¿›ç¨‹å¤šçº¿ç¨‹</li><li>åˆ†å¼€åƒå°ç«é”…ï¼šå°±æ˜¯å¤šè¿›ç¨‹å¤šçº¿ç¨‹</li><li>æˆ‘åƒç«é”…ï¼Œåˆ«äººåƒç«é”…åº•æ–™ï¼šé‚£å°±æ˜¯æˆ‘æ‹¥æœ‰é”ï¼Œåˆ«äººæ‹¿ä¸åˆ°é”</li></ul></li></ol><p>å¤šçº¿ç¨‹å®ä¾‹ï¼šæŠ¢ç«è½¦ç¥¨</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t0no9wyrj314q0k243y.jpg" alt="å¤šçº¿ç¨‹å®ä¾‹ï¼šæŠ¢ç«è½¦ç¥¨" style="zoom:25%;" /><table><thead><tr><th>ç›¸äº’ç‹¬ç«‹çš„ä»»åŠ¡</th><th>èµ„æºå…±äº«çš„ä»»åŠ¡</th></tr></thead><tbody><tr><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t0p5x9wsj314q0p2gtl.jpg" style="zoom:25%;" /></td><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t0qiwv02j30xe0tegv5.jpg" style="zoom:25%;" /></td></tr></tbody></table><h3 id="3-2-ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹ï¼Ÿ3å¤§åŸå› -06-54"><a href="#3-2-ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹ï¼Ÿ3å¤§åŸå› -06-54" class="headerlink" title="3-2 ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹ï¼Ÿ3å¤§åŸå›  (06:54)"></a>3-2 ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹ï¼Ÿ3å¤§åŸå›  (06:54)</h3><ol><li><p>æœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯æé«˜CPUåˆ©ç”¨ç‡</p><ul><li><p>æé«˜å¤„ç†é€Ÿåº¦</p></li><li><p>é¿å…æ— æ•ˆç­‰å¾…ï¼ˆIOçš„æ—¶å€™å¯ä»¥åšåˆ«çš„äº‹ï¼‰</p></li><li><p>æé«˜ç”¨æˆ·ä½“éªŒï¼šé¿å…å¡é¡¿ã€ç¼©çŸ­ç­‰å¾…æ—¶é—´</p><ol><li><p>å¹¶è¡Œå¤„ç†ï¼Œæé«˜æ€§èƒ½ã€‚é€šå¸¸æ˜¯æœåŠ¡å™¨é¢†åŸŸï¼ˆä¾‹å¦‚Tomcatï¼‰ï¼Œç”¨å¤šä¸ªçº¿ç¨‹å»æ¥æ”¶è¿›æ¥çš„HTTPè¯·æ±‚ï¼Œè€Œä¸æ˜¯æ’é˜Ÿç­‰å¾…å•ä¸€çš„çº¿ç¨‹å¤„ç†</p></li><li><p>åœ¨Androidå¼€å‘ä¸­ï¼Œä¸»çº¿ç¨‹çš„é‡è¦ä»»åŠ¡ä¹‹ä¸€æ˜¯ç»˜åˆ¶å±å¹•ç•Œé¢ï¼Œè¯¥çº¿ç¨‹ä¸­ä¸å…è®¸è¿›è¡ŒIOæ“ä½œæˆ–ç½‘ç»œè¯·æ±‚ï¼Œç›®çš„å°±æ˜¯é¿å…å¡é¡¿ï¼Œå½±å“ç”¨æˆ·çš„äº¤äº’</p></li></ol></li></ul></li><li><p>ä¾¿äºç¼–ç¨‹å»ºæ¨¡</p><p>æŠŠè¿™ä¸ªå¤§çš„ä»»åŠ¡Aåˆ†è§£æˆå‡ ä¸ªå°ä»»åŠ¡ï¼Œä»»åŠ¡Bã€ä»»åŠ¡Cã€ä»»åŠ¡Dï¼Œåˆ†åˆ«å»ºç«‹ç¨‹åºæ¨¡å‹ï¼Œå¹¶é€šè¿‡å¤šçº¿ç¨‹åˆ†åˆ«è¿è¡Œè¿™å‡ ä¸ªä»»åŠ¡ï¼Œé‚£å°±ç®€å•å¾ˆå¤šäº†ã€‚</p></li><li><p>è®¡ç®—æœºæ€§èƒ½å®šå¾‹ï¼šæ‘©å°”å®šå¾‹å¤±æ•ˆï¼Œé˜¿å§†è¾¾å°”å®šå¾‹ç™»ä¸Šèˆå°</p><ul><li><p>æ‘©å°”å®šå¾‹</p><blockquote><p>å½“ä»·æ ¼ä¸å˜æ—¶ï¼Œé›†æˆç”µè·¯ä¸Šå¯å®¹çº³çš„å…ƒå™¨ä»¶çš„æ•°ç›®ï¼Œçº¦æ¯éš”18-24ä¸ªæœˆä¾¿ä¼šå¢åŠ ä¸€å€ï¼Œæ€§èƒ½ä¹Ÿå°†æå‡ä¸€å€ã€‚</p></blockquote></li><li><p>é˜¿å§†è¾¾å°”å®šå¾‹</p><blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¤„ç†å™¨è¶Šå¤šï¼Œç¨‹åºæ‰§è¡Œçš„é€Ÿåº¦å°±ä¼šè¶Šå¿«ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªä¸Šé™ï¼Œä¸Šé™å–å†³äºç¨‹åºä¸­ä¸²è¡Œéƒ¨åˆ†çš„æ¯”ä¾‹ï¼Œå¹¶è¡Œçš„æ¯”ä¾‹è¶Šé«˜ï¼Œå¤šå¤„ç†å™¨çš„æ•ˆæœè¶Šæ˜æ˜¾ã€‚</p></blockquote><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t15hbqmqj310o0twtji.jpg" alt="é˜¿å§†è¾¾å°”å®šå¾‹" style="zoom:40%;" /></li></ul></li></ol><h3 id="3-3-ä»€ä¹ˆåœºæ™¯éœ€è¦å¤šçº¿ç¨‹ï¼Ÿæœ‰å“ªäº›å±€é™ï¼Ÿ-04-07"><a href="#3-3-ä»€ä¹ˆåœºæ™¯éœ€è¦å¤šçº¿ç¨‹ï¼Ÿæœ‰å“ªäº›å±€é™ï¼Ÿ-04-07" class="headerlink" title="3-3 ä»€ä¹ˆåœºæ™¯éœ€è¦å¤šçº¿ç¨‹ï¼Ÿæœ‰å“ªäº›å±€é™ï¼Ÿ (04:07)"></a>3-3 ä»€ä¹ˆåœºæ™¯éœ€è¦å¤šçº¿ç¨‹ï¼Ÿæœ‰å“ªäº›å±€é™ï¼Ÿ (04:07)</h3><p>ä»€ä¹ˆåœºæ™¯ä¸­ä¼šç”¨åˆ°å¤šçº¿ç¨‹?</p><ol><li><p>ä»€ä¹ˆæ—¶å€™éœ€è¦æ–°å¼€çº¿ç¨‹</p><p>é€šå¸¸åœ¨éœ€è¦è¿›è¡Œè€—æ—¶ä»»åŠ¡çš„æ—¶å€™ï¼Œä¾‹å¦‚æ‰§è¡Œç£ç›˜IOè¯»å†™ï¼Œæˆ–è€…ä»ç½‘ç»œè·å–ä¿¡æ¯çš„æ—¶å€™ã€‚</p></li><li><p>ä¸ºäº†åŒæ—¶åšå¤šä»¶ä¸åŒçš„äº‹</p><p>å¼€ç½‘é¡µåŒæ—¶å¬éŸ³ä¹</p><p>åå°çº¿ç¨‹ï¼šæ¯”å¦‚æ‰§è¡Œå®šæ—¶ä»»åŠ¡quartz</p></li><li><p>ä¸ºäº†æé«˜å·¥ä½œæ•ˆç‡ã€å¤„ç†èƒ½åŠ›</p><p>tomcatï¼šæ¯æ¬¡æœ‰ä¸€ä¸ªæ–°çš„è¯·æ±‚è¿‡æ¥çš„æ—¶å€™ï¼Œtomcatä¼šæŠŠè¿™ä¸ªè¯·æ±‚äº¤ç»™ä¸€ä¸ªæ–°çš„çº¿ç¨‹å»å¤„ç†ï¼Œã€‚</p><p>å¤šçº¿ç¨‹åå°å¹¶è¡Œä¸‹è½½æ–‡ä»¶</p><p>NIOå’ŒAIO</p></li><li><p>éœ€è¦åŒæ—¶æœ‰å¾ˆå¤§å¹¶å‘é‡çš„æ—¶å€™</p><p>å‹æµ‹</p></li></ol><p>å¤šçº¿ç¨‹çš„å±€é™</p><ol><li><p>æ€§èƒ½é—®é¢˜ï¼šä¸Šä¸‹æ–‡åˆ‡æ¢å¸¦æ¥çš„æ¶ˆè€—</p></li><li><p>å¼‚æ„åŒ–ä»»åŠ¡ï¼ˆä»»åŠ¡ç»“æ„ä¸ä¸€æ ·ï¼‰å¾ˆéš¾é«˜æ•ˆå¹¶è¡Œ</p></li><li><p>å¸¦æ¥çº¿ç¨‹å®‰å…¨é—®é¢˜</p><p>æ•°æ®å®‰å…¨é—®é¢˜ã€‚a++æ•°æ®é”™è¯¯</p><p>çº¿ç¨‹å¸¦æ¥çš„æ´»è·ƒæ€§é—®é¢˜ã€‚çº¿ç¨‹é¥¥é¥¿ã€æ­»é”</p></li></ol><h2 id="ç¬¬4ç« -å¹¶è¡Œå’Œå¹¶å‘å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿ"><a href="#ç¬¬4ç« -å¹¶è¡Œå’Œå¹¶å‘å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿ" class="headerlink" title="ç¬¬4ç«  å¹¶è¡Œå’Œå¹¶å‘å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿ"></a>ç¬¬4ç«  å¹¶è¡Œå’Œå¹¶å‘å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿ</h2><blockquote><p>è®²è§£å¹¶è¡Œã€ä¸²è¡Œã€å¹¶å‘çš„å«ä¹‰ï¼Œå¹¶è¯´æ˜æ“ä½œç³»ç»Ÿã€å¤„ç†å™¨ã€ç¼–ç¨‹è¯­è¨€çš„å‘å±•ä½¿å¾—å¹¶å‘â€œé£å…¥å¯»å¸¸ç™¾å§“å®¶â€ã€‚</p></blockquote><h3 id="4-1-å¹¶è¡Œå’Œå¹¶å‘å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿä¸€å›¾èƒœåƒè¨€-10-07"><a href="#4-1-å¹¶è¡Œå’Œå¹¶å‘å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿä¸€å›¾èƒœåƒè¨€-10-07" class="headerlink" title="4-1 å¹¶è¡Œå’Œå¹¶å‘å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿä¸€å›¾èƒœåƒè¨€ (10:07)"></a>4-1 å¹¶è¡Œå’Œå¹¶å‘å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿä¸€å›¾èƒœåƒè¨€ (10:07)</h3><p>ä¸²è¡Œå’Œå¹¶è¡Œ</p><blockquote><p>ä¸²è¡Œæ˜¯å¤§å®¶æ’é˜Ÿä¸€ä¸ªä¸ªæ¥ï¼Œå¹¶è¡Œæ˜¯å¤§å®¶ä¸€èµ·æ¥</p></blockquote><p>ä¸€å›¾èƒœåƒè¨€</p><table><thead><tr><th>çº¿ç¨‹çš„ä¸²è¡Œå¹¶è¡Œ</th><th>é€šè®¯çš„ä¸²è¡Œå¹¶è¡Œ</th></tr></thead><tbody><tr><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t1jyy0nej30z70u048c.jpg" style="zoom:25%;" /></td><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t1lt89b4j30se0w2n9q.jpg" style="zoom:25%;" /></td></tr></tbody></table><p>å¹¶å‘å’Œå¹¶è¡Œ</p><p>ä¸€å›¾èƒœåƒè¨€</p><ul><li><p>å¹¶å‘ï¼šåŒä¸€æ—¶åˆ»ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹</p><p>Concurrencyï¼š</p><ol><li>Single Processor</li></ol></li></ul><ol start="2"><li>Logically simultaneous processing</li></ol><ul><li><p>å¹¶è¡Œï¼šåŒä¸€æ—¶åˆ»å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹</p><p>Parallelismï¼š</p><ol><li>Multiprocessores,Multicore</li><li>Physically simultaneous processing</li></ol><table><thead><tr><th>å¹¶å‘</th><th>å¹¶è¡Œ</th></tr></thead><tbody><tr><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t1ukp6jbj30ta0kqgun.jpg" style="zoom:25%;" /></td><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t1w7tzf6j30t20iyq9i.jpg" style="zoom:25%;" /></td></tr></tbody></table></li></ul><ul><li><p>å®ä¾‹ï¼šæ’é˜Ÿä¹°å’–å•¡</p><ol><li><p>å¹¶å‘ï¼ˆConcurrentï¼‰ï¼Œä¸€å°å’–å•¡æœºï¼Œä¸¤ä¸ªç­‰å¾…é˜Ÿåˆ—</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t22yj3eaj312w08k0zm.jpg" alt="ä¸€å°å’–å•¡æœºï¼Œä¸¤ä¸ªç­‰å¾…é˜Ÿåˆ—" style="zoom:40%;" /></li><li><p>å¹¶è¡Œï¼ˆParallelï¼‰ï¼Œä¸¤å°å’–å•¡æœºï¼Œä¸¤ä¸ªç­‰å¾…é˜Ÿåˆ—</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t242hyojj310q08s45z.jpg" alt="ä¸¤å°å’–å•¡æœºï¼Œä¸¤ä¸ªç­‰å¾…é˜Ÿåˆ—" style="zoom:40%;" /></li></ol></li></ul><p>å¹¶è¡Œçš„æ¦‚å¿µï¼š</p><blockquote><p>åœ¨<strong>åŒä¸€æ—¶åˆ»</strong>ï¼Œæœ‰å¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œ</p></blockquote><ul><li>çœŸæ­£çš„â€œåŒæ—¶â€è¿è¡Œâ€”â€”åœ¨<strong>åŒä¸€æ—¶åˆ»</strong>ï¼Œæœ‰å¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œ</li><li>ä¾‹å¦‚ï¼Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä¸€æ®µä»£ç </li><li>å¯è§ï¼Œå•æ ¸å¤„ç†å™¨æ˜¯æ— æ³•å®ç°å¹¶è¡Œçš„ï¼Œå› ä¸ºå•æ ¸å¤„ç†å™¨æ— æ³•åœ¨åŒä¸€æ—¶åˆ»æ‰§è¡Œå¤šä¸ªä»»åŠ¡</li></ul><p>å¹¶å‘çš„æ¦‚å¿µï¼š</p><blockquote><ol><li>ä¸¤ä¸ªæˆ–å¤šä¸ªä»»åŠ¡å¯ä»¥åœ¨é‡å çš„<strong>æ—¶é—´æ®µå†…</strong>å¯åŠ¨ã€è¿è¡Œå’Œå®Œæˆ</li><li>å¯¹â€œå¹¶å‘æ€§â€çš„ç®€ç§°</li></ol></blockquote><ol><li><p>å½¢å®¹å¤šä¸ªä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€</p><ul><li><p>ä¸¤ä¸ªæˆ–å¤šä¸ªä»»åŠ¡å¯ä»¥åœ¨é‡å çš„<strong>æ—¶é—´æ®µå†…</strong>å¯åŠ¨ã€è¿è¡Œå’Œå®Œæˆ</p></li><li><p>å¹¶è¡Œ(ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ)ä¸€å®šæ˜¯å¹¶å‘ï¼Œå¹¶å‘ä¸ä¸€å®šæ˜¯å¹¶è¡Œ</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t2gpqwa9j30pa0p2qa7.jpg" alt="å¹¶å‘å¹¶è¡Œçš„åŒ…å«å…³ç³»" style="zoom:25%;" /></li></ul><table><thead><tr><th>å¹¶å‘<br />Concurrency<br />ï¼ˆSingle-Core CPUï¼‰</th><th>å¹¶è¡Œä¸”å¹¶å‘<br />Concurrency+Parallelism<br />ï¼ˆMulti-Core CPUï¼‰</th></tr></thead><tbody><tr><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t2iw85hij30y80dmq6a.jpg" style="zoom:35%;" /></td><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t2m40uzyj30zg0jiwgn.jpg" style="zoom:35%;" /></td></tr><tr><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t2ptq9fzj308w0ncmxv.jpg" style="zoom:30%;" /></td><td><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t2qusdalj308w0nq3zy.jpg" style="zoom:30%;" /></td></tr></tbody></table><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8t2wbimw3j319u0u0djb.jpg" alt="å¹¶è¡Œä¸å¹¶å‘çš„å…³ç³»" style="zoom:30%;" /></li><li><p>ç¨‹åºçš„ä¸åŒéƒ¨åˆ†å…·æœ‰å¯ä»¥åŒæ—¶æ‰§è¡Œçš„æ€§è´¨</p><ul><li>â€œå¹¶å‘æ€§â€æ˜¯ä¸€ç§ç¨‹åºçš„æ€§è´¨ã€‚å¦‚æœä¸€ä¸ªç¨‹åºå…·æœ‰å¹¶å‘æ€§ï¼Œè¯´æ˜è¿™ä¸ªç¨‹åºçš„ä¸åŒçš„éƒ¨åˆ†å¯ä»¥æ— åºæˆ–åŒæ—¶æ‰§è¡Œï¼Œä¸”ä¸å½±å“æœ€ç»ˆçš„æ‰§è¡Œç»“æœã€‚</li><li>åœ¨ä¸åŒæ ¸å¿ƒæ•°çš„è®¡ç®—æœºä¸Šçš„ä¸åŒè¡¨ç°ã€‚æ­¤æ—¶ï¼Œå¹¶è¡Œå’Œå¹¶å‘çš„æ¦‚å¿µä¸åœ¨åŒä¸€ç»´åº¦ä¸Š</li></ul><p>å¹¶å‘æ€§æ˜¯å¹¶å‘æ‰§è¡Œæˆ–å¹¶è¡Œæ‰§è¡Œçš„å‰ææ¡ä»¶å’Œå¿…è¦æ¡ä»¶</p></li></ol><h3 id="4-2-å¹¶å‘çš„ç¬¬äºŒç§æ¦‚å¿µâ€”â€”ç”Ÿæ´»åœºæ™¯ä¸¾ä¾‹ï¼šæ‰“æ¸¸æˆæ—¶å¥³æœ‹å‹æ¥ç”µè¯æŸ¥å²—-06-56"><a href="#4-2-å¹¶å‘çš„ç¬¬äºŒç§æ¦‚å¿µâ€”â€”ç”Ÿæ´»åœºæ™¯ä¸¾ä¾‹ï¼šæ‰“æ¸¸æˆæ—¶å¥³æœ‹å‹æ¥ç”µè¯æŸ¥å²—-06-56" class="headerlink" title="4-2 å¹¶å‘çš„ç¬¬äºŒç§æ¦‚å¿µâ€”â€”ç”Ÿæ´»åœºæ™¯ä¸¾ä¾‹ï¼šæ‰“æ¸¸æˆæ—¶å¥³æœ‹å‹æ¥ç”µè¯æŸ¥å²— (06:56)"></a>4-2 å¹¶å‘çš„ç¬¬äºŒç§æ¦‚å¿µâ€”â€”ç”Ÿæ´»åœºæ™¯ä¸¾ä¾‹ï¼šæ‰“æ¸¸æˆæ—¶å¥³æœ‹å‹æ¥ç”µè¯æŸ¥å²— (06:56)</h3><ol><li><p>æ‰“æ¸¸æˆæ—¶ï¼Œå¥³æœ‹å‹æ¥ç”µè¯</p><p>åŒæ—¶æ‰“æ¸¸æˆå’Œæ¥ç”µè¯ã€‚å¹¶å‘</p><p>å…³æ‰æ¸¸æˆï¼Œä¸“å¿ƒæ¥ç”µè¯ã€‚ä¸²è¡Œ</p></li><li><p>å•æ ¸CPU</p><p>ç¨‹åºå…·å¤‡å¹¶å‘æ€§ï¼Œä½†ä¸å¹¶è¡Œæ‰§è¡Œã€‚å•æ ¸å¹¶å‘ç¨‹åº</p><p>ç¨‹åºå…·å¤‡å¹¶å‘æ€§ï¼Œä¸”å¹¶è¡Œæ‰§è¡Œï¼šå¤šæ ¸å¹¶å‘ç¨‹åº</p><p>æ—¢ä¸å¹¶è¡Œæ‰§è¡Œï¼Œä¹Ÿä¸å…·å¤‡å¹¶å‘æ€§ï¼šå•æ ¸ä¸²è¡Œç¨‹åº</p><p>å¹¶è¡Œæ‰§è¡Œï¼Œä½†ç¨‹åºä¸å…·å¤‡å¹¶å‘æ€§ï¼šä¸å¯èƒ½</p></li></ol><h3 id="4-3-æ˜¯ä»€ä¹ˆè®©å¹¶å‘å’Œå¹¶è¡Œæˆä¸ºäº†å¯èƒ½ï¼Ÿ-03-48"><a href="#4-3-æ˜¯ä»€ä¹ˆè®©å¹¶å‘å’Œå¹¶è¡Œæˆä¸ºäº†å¯èƒ½ï¼Ÿ-03-48" class="headerlink" title="4-3 æ˜¯ä»€ä¹ˆè®©å¹¶å‘å’Œå¹¶è¡Œæˆä¸ºäº†å¯èƒ½ï¼Ÿ (03:48)"></a>4-3 æ˜¯ä»€ä¹ˆè®©å¹¶å‘å’Œå¹¶è¡Œæˆä¸ºäº†å¯èƒ½ï¼Ÿ (03:48)</h3><ul><li><p>æ“ä½œç³»ç»Ÿ</p></li><li><p>å¤šæ ¸CPU</p></li><li><p>ç¼–ç¨‹è¯­è¨€</p></li></ul><h2 id="ç¬¬5ç« -é«˜å¹¶å‘åªæ˜¯å¹¶å‘çš„å‡çº§ç‰ˆå—ï¼Ÿ"><a href="#ç¬¬5ç« -é«˜å¹¶å‘åªæ˜¯å¹¶å‘çš„å‡çº§ç‰ˆå—ï¼Ÿ" class="headerlink" title="ç¬¬5ç«  é«˜å¹¶å‘åªæ˜¯å¹¶å‘çš„å‡çº§ç‰ˆå—ï¼Ÿ"></a>ç¬¬5ç«  é«˜å¹¶å‘åªæ˜¯å¹¶å‘çš„å‡çº§ç‰ˆå—ï¼Ÿ</h2><blockquote><p>ç”¨ä¸šç•Œåœºæ™¯è¯´æ˜é«˜å¹¶å‘ä¸ä»…ä»…æ˜¯å¹¶å‘çš„å‡çº§ç‰ˆï¼Œä¹Ÿä¸èƒ½ç®€å•åœ°ç†è§£ä¸ºå°±æ˜¯å¤šçº¿ç¨‹ã€‚é«˜å¹¶å‘å’Œå¤šçº¿ç¨‹ç›¸äº’æˆå°±</p></blockquote><h3 id="5-1-ä»€ä¹ˆæ˜¯é«˜å¹¶å‘ï¼Ÿä¼ä¸šæ¡ˆä¾‹ï¼šåŒ11ã€æ˜¥æ™š-04-21"><a href="#5-1-ä»€ä¹ˆæ˜¯é«˜å¹¶å‘ï¼Ÿä¼ä¸šæ¡ˆä¾‹ï¼šåŒ11ã€æ˜¥æ™š-04-21" class="headerlink" title="5-1 ä»€ä¹ˆæ˜¯é«˜å¹¶å‘ï¼Ÿä¼ä¸šæ¡ˆä¾‹ï¼šåŒ11ã€æ˜¥æ™š (04:21)"></a>5-1 ä»€ä¹ˆæ˜¯é«˜å¹¶å‘ï¼Ÿä¼ä¸šæ¡ˆä¾‹ï¼šåŒ11ã€æ˜¥æ™š (04:21)</h3><p>é«˜å¹¶å‘</p><blockquote><p>åŒæ—¶æœ‰å¾ˆå¤šä¸ªè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ç³»ç»Ÿï¼Œå› æ­¤æœåŠ¡å™¨å°±ä¼šå¹¶è¡Œå¤„ç†</p></blockquote><ul><li><p>åŒ11å¤©çŒ«</p></li><li><p>æ˜¥æ™šå¾®ä¿¡æ‘‡ä¸€æ‘‡</p></li></ul><h3 id="5-2-é«˜å¹¶å‘å’Œå¤šçº¿ç¨‹çš„å…³ç³»ï¼Ÿç›¸äº’æˆå°±-04-47"><a href="#5-2-é«˜å¹¶å‘å’Œå¤šçº¿ç¨‹çš„å…³ç³»ï¼Ÿç›¸äº’æˆå°±-04-47" class="headerlink" title="5-2 é«˜å¹¶å‘å’Œå¤šçº¿ç¨‹çš„å…³ç³»ï¼Ÿç›¸äº’æˆå°± (04:47)"></a>5-2 é«˜å¹¶å‘å’Œå¤šçº¿ç¨‹çš„å…³ç³»ï¼Ÿç›¸äº’æˆå°± (04:47)</h3><p>å¤šçº¿ç¨‹å’Œé«˜å¹¶å‘æ˜¯ä»€ä¹ˆï¼šè§£å†³æ–¹æ¡ˆã€çŠ¶æ€</p><p>å¤šçº¿ç¨‹å’Œé«˜å¹¶å‘çš„å…³ç³»ï¼šå¤šçº¿ç¨‹æ˜¯å¯¹åº”é«˜å¹¶å‘åœºæ™¯çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ä¸ºäº†è§£å†³é«˜å¹¶å‘å¸¦æ¥çš„é—®é¢˜ï¼Œå¦‚æ•°æ®é”™ä¹±ã€ç¨‹åºè®¿é—®æ…¢ã€æœåŠ¡å™¨æ­»æœºï¼Œä»è€Œä½¿ç”¨å¤šçº¿ç¨‹ç¼–ç¨‹æé«˜ç¡¬ä»¶åˆ©ç”¨ç‡ï¼Œè·å–åˆ°æ›´å¤šèµ„æºã€‚</p><p>é«˜å¹¶å‘å¹¶ä¸æ„å‘³ç€æ˜¯å¤šçº¿ç¨‹ï¼šRedisç¼“å­˜å±‚</p><h3 id="5-3-é«˜å¹¶å‘æœ‰å“ªäº›é‡è¦æŒ‡æ ‡ï¼Ÿ-03-58"><a href="#5-3-é«˜å¹¶å‘æœ‰å“ªäº›é‡è¦æŒ‡æ ‡ï¼Ÿ-03-58" class="headerlink" title="5-3 é«˜å¹¶å‘æœ‰å“ªäº›é‡è¦æŒ‡æ ‡ï¼Ÿ (03:58)"></a>5-3 é«˜å¹¶å‘æœ‰å“ªäº›é‡è¦æŒ‡æ ‡ï¼Ÿ (03:58)</h3><ul><li>QPSï¼ˆQueries Per Secondï¼‰ï¼šæ¯ç§’è¯·æ±‚æ•°</li><li>å¸¦å®½ï¼šå³°å€¼æµé‡å’Œé¡µé¢çš„å¹³å‡å¤§å°</li><li>PVï¼ˆPage Viewï¼‰ï¼š24å°æ—¶çš„é¡µé¢æµè§ˆé‡</li><li>UVï¼ˆUnique Visitorï¼‰ï¼šç‹¬ç«‹ç”¨æˆ·è®¿é—®é‡</li><li>ååç‡ï¼ˆRequests per secondï¼‰</li><li>å¹¶å‘è¿æ¥æ•°ï¼ˆThe number of concurrent connectionsï¼‰ï¼šæŸä¸ªæ—¶åˆ»æœåŠ¡å™¨æ¥å—è¯·æ±‚çš„æ•°ç›®</li><li>æœåŠ¡å™¨å¹³å‡è¯·æ±‚ç­‰å¾…æ—¶é—´ï¼ˆTime per request: across all concurrent requestsï¼‰ï¼šæœåŠ¡å™¨å¤„ç†ä¸€ä¸ªè¯·æ±‚éœ€è¦èŠ±è´¹çš„æ—¶é—´</li></ul><p>IPå’ŒUVçš„åŒºåˆ«</p><ul><li>UVæ˜¯ç”¨æˆ·cookiesæ•°é‡</li><li>IPä¸UVæ•°é‡å…³ç³»ä¸ç¡®å®š</li></ul><h2 id="ç¬¬6ç« -ä½ çœŸçš„æ‡‚åŒæ­¥ä¸å¼‚æ­¥ï¼Ÿé˜»å¡ä¸éé˜»å¡ï¼Ÿ"><a href="#ç¬¬6ç« -ä½ çœŸçš„æ‡‚åŒæ­¥ä¸å¼‚æ­¥ï¼Ÿé˜»å¡ä¸éé˜»å¡ï¼Ÿ" class="headerlink" title="ç¬¬6ç«  ä½ çœŸçš„æ‡‚åŒæ­¥ä¸å¼‚æ­¥ï¼Ÿé˜»å¡ä¸éé˜»å¡ï¼Ÿ"></a>ç¬¬6ç«  ä½ çœŸçš„æ‡‚åŒæ­¥ä¸å¼‚æ­¥ï¼Ÿé˜»å¡ä¸éé˜»å¡ï¼Ÿ</h2><blockquote><p>æŠŠåŒæ­¥å¼‚æ­¥ã€é˜»å¡å’Œéé˜»å¡ç”¨çƒ§æ°´å£¶å’Œä¹°ä¹¦çš„ä¾‹å­è®²è§£æ¸…æ¥š</p></blockquote><h3 id="6-1-ä¸€å›¾èƒœåƒè¨€ï¼šåŒæ­¥ã€å¼‚æ­¥æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ-08-47"><a href="#6-1-ä¸€å›¾èƒœåƒè¨€ï¼šåŒæ­¥ã€å¼‚æ­¥æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ-08-47" class="headerlink" title="6-1 ä¸€å›¾èƒœåƒè¨€ï¼šåŒæ­¥ã€å¼‚æ­¥æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ (08:47)"></a>6-1 ä¸€å›¾èƒœåƒè¨€ï¼šåŒæ­¥ã€å¼‚æ­¥æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ (08:47)</h3><ul><li>åŒæ­¥ä¸å¼‚æ­¥ï¼šè¢«è°ƒç”¨è€…ï¼Œè°ƒç”¨ç»“æŸåæ˜¯å¦ä¸»åŠ¨è¿”å›ç»“æœ</li><li>é˜»å¡å’Œéé˜»å¡ï¼šè°ƒç”¨è€…ï¼Œè°ƒç”¨åæ˜¯å¦å¯ä»¥å»åšåˆ«çš„äº‹</li></ul><p>ä¸€å›¾èƒœåƒè¨€</p><table><thead><tr><th>Synchronous Execution</th><th>Asynchronous Execution</th></tr></thead><tbody><tr><td><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8ttuwc30pj313s0lyn67.jpg" style="zoom:40%;" /></td><td><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8ttwcrqrvj313o0n6dpx.jpg" style="zoom:40%;" /></td></tr><tr><td><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8tu00xrw8j30py0v4n0w.jpg" style="zoom: 30%;" /></td><td><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8tu1xfumij30q00v2gqh.jpg" style="zoom:30%;" /></td></tr><tr><td><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8tu3zcjy1j30ic0o6418.jpg" style="zoom:40%;" /></td><td><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8tu6enri2j30iw0o40vx.jpg" style="zoom: 40%;" /></td></tr><tr><td><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8tu7z769oj30m80nw0xl.jpg" style="zoom:40%;" /></td><td><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8tu92dappj30lm0na797.jpg" style="zoom:40%;" /></td></tr></tbody></table><p>åŒæ­¥</p><ul><li><p>åŒæ­¥æŒ‡çš„æ˜¯ï¼Œå®¢æˆ·ç«¯å‘å‡ºä¸€ä¸ªè¯·æ±‚åï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼ŒæœåŠ¡ç«¯å°±ä¸è¿”å›ä»»ä½•ç»“æœã€‚ä½†æ˜¯ä¸€æ—¦æœåŠ¡ç«¯è¿”å›ï¼Œé‚£è¿”å›çš„å°±æ˜¯å®¢æˆ·ç«¯æƒ³è¦çš„ç»“æœï¼ˆè€Œä¸æ˜¯å‘Šè¯‰å®¢æˆ·ç«¯å†ç­‰ç­‰ä¹‹ç±»çš„å†…å®¹ï¼‰ã€‚</p></li><li><p>è¢«è°ƒç”¨è€…ä¸»åŠ¨å‘Šè¯‰è°ƒç”¨è€…ç»“æœ</p></li><li><p>è¢«è°ƒç”¨è€…ï¼ˆä¹Ÿå°±æ˜¯æœåŠ¡å™¨ï¼‰çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯è¯·æ±‚æ–¹çš„è¡Œä¸ºã€‚</p></li></ul><p>å¼‚æ­¥</p><ul><li><p>ä¸å®æ—¶å¤„ç†</p></li><li><p>è°ƒç”¨åœ¨å‘å‡ºä¹‹åï¼ŒæœåŠ¡ç«¯ä¼šç«‹åˆ»è¿”å›ï¼Œå‘Šè¯‰è°ƒç”¨æ–¹â€œæˆ‘æ”¶åˆ°ä½ çš„è¯·æ±‚äº†ï¼Œæˆ‘ä¼šå¤„ç†çš„â€</p></li><li><p>è°ƒç”¨å‘å‡ºåï¼Œç­‰æœåŠ¡ç«¯è®¡ç®—å®Œæ¯•åï¼ŒæœåŠ¡ç«¯ä¼šé€šè¿‡å‘æ¶ˆæ¯ç­‰é€”å¾„æ¥é€šçŸ¥è°ƒç”¨è€…ï¼Œæˆ–é€šè¿‡å›è°ƒå‡½æ•°å¤„ç†è¿™ä¸ªè°ƒç”¨ã€‚</p></li></ul><p>åŒæ­¥ä¸å¼‚æ­¥çš„ä¾‹å­</p><ul><li><p>çƒ§æ°´å£¶</p><p>åŒæ­¥ï¼šç›¯ç€æ°´å£¶</p><p>å¼‚æ­¥ï¼šå£°éŸ³æé†’</p></li><li><p>ä¹°ä¹¦ï¼Œæ‰“ç”µè¯é—®ä¹¦åº—è€æ¿</p><p>åŒæ­¥ï¼šç°åœºæŸ¥è¯¢</p><p>å¼‚æ­¥ï¼šåç»­å›ç”µ</p></li></ul><p>é˜»å¡å’Œéé˜»å¡</p><ul><li><p>æˆ‘æ˜¯è°ƒç”¨è€…ï¼Œæˆ‘è°ƒç”¨ä¸€ä¸ªä¸œè¥¿çš„åï¼Œç»“æœè¿”å›å‰ï¼Œæ˜¯å¦è¿˜èƒ½åšåˆ«çš„äº‹</p></li><li><p>ç«™åœ¨<strong>çº¿ç¨‹çŠ¶æ€</strong>çš„è§’åº¦</p></li><li><p>ç«™åœ¨<strong>çº¿ç¨‹å‘å‡ºè¯·æ±‚</strong>(é€šå¸¸æ˜¯HTTPè¯·æ±‚)çš„è§’åº¦</p></li></ul><p>é˜»å¡éé˜»å¡çš„ä¾‹å­</p><ul><li><p>çƒ§æ°´å£¶</p><p>é˜»å¡ï¼šååœ¨æ°´å£¶é¢å‰ä¸èƒ½åŠ¨</p><p>éé˜»å¡ï¼šç­‰çš„æ—¶å€™å»å®¢å…çœ‹ç”µè§†</p></li><li><p>æ‰“ç”µè¯é—®ä¹¦åº—è€æ¿</p><p>é˜»å¡å¼è°ƒç”¨ï¼šä½ ä¼šä¸€ç›´æŠŠè‡ªå·±â€œæŒ‚èµ·â€ï¼Œç›´åˆ°å¾—åˆ°è¿™æœ¬ä¹¦æœ‰æ²¡æœ‰çš„ç»“æœï¼›</p><p>éé˜»å¡å¼è°ƒç”¨ï¼šä½ ä¸ç®¡è€æ¿æœ‰æ²¡æœ‰å‘Šè¯‰ä½ ï¼Œä½ è‡ªå·±å…ˆä¸€è¾¹å»ç©äº†ï¼Œ å½“ç„¶ä½ ä¹Ÿè¦å¶å°”è¿‡å‡ åˆ†é’Ÿcheckä¸€ä¸‹è€æ¿æœ‰æ²¡æœ‰è¿”å›ç»“æœã€‚</p><p>åœ¨è¿™é‡Œ<strong>é˜»å¡ä¸éé˜»å¡ä¸æ˜¯å¦åŒæ­¥å¼‚æ­¥æ— å…³</strong>ã€‚<strong>è·Ÿè€æ¿é€šè¿‡ä»€ä¹ˆæ–¹å¼å›ç­”ä½ æ— å…³</strong>ã€‚</p></li></ul><h3 id="6-2-4ç§ç»„åˆï¼šåŒæ­¥é˜»å¡ã€åŒæ­¥éé˜»å¡ã€å¼‚æ­¥é˜»å¡ã€å¼‚æ­¥éé˜»å¡-05-38"><a href="#6-2-4ç§ç»„åˆï¼šåŒæ­¥é˜»å¡ã€åŒæ­¥éé˜»å¡ã€å¼‚æ­¥é˜»å¡ã€å¼‚æ­¥éé˜»å¡-05-38" class="headerlink" title="6-2 4ç§ç»„åˆï¼šåŒæ­¥é˜»å¡ã€åŒæ­¥éé˜»å¡ã€å¼‚æ­¥é˜»å¡ã€å¼‚æ­¥éé˜»å¡ (05:38)"></a>6-2 4ç§ç»„åˆï¼šåŒæ­¥é˜»å¡ã€åŒæ­¥éé˜»å¡ã€å¼‚æ­¥é˜»å¡ã€å¼‚æ­¥éé˜»å¡ (05:38)</h3><p>åŒæ­¥å¼‚æ­¥ã€é˜»å¡éé˜»å¡çš„ç»¼åˆä¾‹å­</p><ul><li>åŒæ­¥é˜»å¡ï¼šååœ¨æ™®é€šæ°´å£¶å‰</li><li>åŒæ­¥éé˜»å¡ï¼šæ°´çƒ§å¼€ä¹‹å‰æˆ‘ä»¬å…ˆå»å®¢å…çœ‹ç”µè§†äº†ï¼Œä½†æ˜¯æ°´å£¶ä¸ä¼šä¸»åŠ¨é€šçŸ¥æˆ‘ä»¬ï¼Œéœ€è¦æˆ‘ä»¬æ—¶ä¸æ—¶çš„å»å¨æˆ¿çœ‹ä¸€ä¸‹æ°´æœ‰æ²¡æœ‰çƒ§å¼€</li><li>å¼‚æ­¥é˜»å¡ï¼šå¸¦æœ‰æé†’åŠŸèƒ½çš„æ°´å£¶çƒ§æ°´ï¼Œæˆ‘ä»¬åç€ç­‰</li><li>å¼‚æ­¥éé˜»å¡ï¼šå¸¦æœ‰æé†’åŠŸèƒ½çš„æ°´å£¶çƒ§æ°´ã€‚åœ¨æ°´çƒ§å‘å‡ºæé†’ä¹‹å‰æˆ‘ä»¬å…ˆå»å®¢å…çœ‹ç”µè§†äº†ï¼Œç­‰æ°´å£¶å‘å‡ºå£°éŸ³æé†’æˆ‘ä»¬ã€‚</li></ul><h2 id="ç¬¬7ç« -é¢è¯•é—®é¢˜æ£€éªŒå­¦ä¹ æˆæœ"><a href="#ç¬¬7ç« -é¢è¯•é—®é¢˜æ£€éªŒå­¦ä¹ æˆæœ" class="headerlink" title="ç¬¬7ç«  é¢è¯•é—®é¢˜æ£€éªŒå­¦ä¹ æˆæœ"></a>ç¬¬7ç«  é¢è¯•é—®é¢˜æ£€éªŒå­¦ä¹ æˆæœ</h2><blockquote><p>é¢è¯•å¸¸è§é—®é¢˜ï¼Œç”¨å’Œæœ¬è¯¾æ¯æ¯ç›¸å…³çš„8ä¸ªå¸¸è§é¢è¯•é—®é¢˜æ¥æ£€éªŒåŒå­¦ä»¬çš„å­¦ä¹ æ”¶è·ã€‚</p></blockquote><h3 id="7-1-å¸¸è§é¢è¯•é—®é¢˜-04-33"><a href="#7-1-å¸¸è§é¢è¯•é—®é¢˜-04-33" class="headerlink" title="7-1 å¸¸è§é¢è¯•é—®é¢˜ (04:33)"></a>7-1 å¸¸è§é¢è¯•é—®é¢˜ (04:33)</h3><ol><li><p>è¿›ç¨‹å’Œçº¿ç¨‹çš„ç›¸åŒå’Œä¸åŒï¼Ÿ</p><p>èµ·æºä¸åŒã€æ¦‚å¿µä¸åŒï¼ˆè¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ï¼Œè¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼›çº¿ç¨‹æ˜¯CPUè°ƒåº¦å•ä½ï¼‰ã€å†…å­˜å…±äº«æ–¹å¼ä¸åŒã€æ‹¥æœ‰èµ„æºä¸åŒã€æ•°é‡ä¸åŒã€å¼€é”€ä¸åŒ</p><p>ç”Ÿå‘½å‘¨æœŸï¼ˆå°±ç»ªã€ç­‰å¾…ã€è¿è¡Œç­‰çŠ¶æ€ï¼‰ç›¸ä¼¼</p></li><li><p>å¹¶è¡Œå’Œå¹¶å‘çš„å¼‚åŒï¼Ÿ</p><p>å¹¶å‘ï¼šåŒä¸€æ—¶åˆ»ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼›</p><p>å¹¶è¡Œï¼šåŒä¸€æ—¶åˆ»å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹</p><p>å¹¶è¡Œ(ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ)ä¸€å®šæ˜¯å¹¶å‘ï¼Œå¹¶å‘ä¸ä¸€å®šæ˜¯å¹¶è¡Œ</p></li><li><p>é«˜å¹¶å‘æ˜¯ä¸æ˜¯å°±æ„å‘³ç€å¤šçº¿ç¨‹ï¼Ÿæœ‰ä»€ä¹ˆåä¾‹ï¼Ÿ</p><p>å¤šçº¿ç¨‹æ˜¯å¯¹åº”é«˜å¹¶å‘åœºæ™¯çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ä¸ºäº†è§£å†³é«˜å¹¶å‘å¸¦æ¥çš„é—®é¢˜ï¼Œå¦‚æ•°æ®é”™ä¹±ã€ç¨‹åºè®¿é—®æ…¢ã€æœåŠ¡å™¨æ­»æœºï¼Œä»è€Œä½¿ç”¨å¤šçº¿ç¨‹ç¼–ç¨‹æé«˜ç¡¬ä»¶åˆ©ç”¨ç‡ï¼Œè·å–åˆ°æ›´å¤šèµ„æºï¼Œè¿…é€ŸåŒ–è§£é«˜å¹¶å‘å¸¦æ¥çš„å‹åŠ›</p><p>è§£å†³é«˜å¹¶å‘ä¸ä»…åªæœ‰å¤šçº¿ç¨‹ï¼Œæ¯”å¦‚ç³»ç»Ÿæ•´ä½“æ¶æ„ã€Redisç¼“å­˜å±‚ã€MQ</p></li><li><p>å¤šçº¿ç¨‹å¯ä»¥æé«˜ç¨‹åºæ‰§è¡Œæ•ˆç‡ï¼Œä½ çŸ¥ä¸çŸ¥é“æœ‰æœ‰å“ªäº›å¼Šç«¯ï¼Ÿ</p><ul><li><p>ä¸Šä¸‹æ–‡åˆ‡æ¢å¸¦æ¥çš„æ¶ˆè€—</p></li><li><p>å¼‚æ„åŒ–ä»»åŠ¡ï¼ˆä»»åŠ¡ç»“æ„ä¸ä¸€æ ·ï¼‰å¾ˆéš¾é«˜æ•ˆå¹¶è¡Œ</p></li><li><p>å¸¦æ¥çº¿ç¨‹å®‰å…¨é—®é¢˜</p><p>æ•°æ®å®‰å…¨é—®é¢˜ã€‚a++æ•°æ®é”™è¯¯</p><p>çº¿ç¨‹å¸¦æ¥çš„æ´»è·ƒæ€§é—®é¢˜ã€‚çº¿ç¨‹é¥¥é¥¿ã€æ­»é”</p></li></ul></li><li><p>ä»€ä¹ˆæ˜¯åŒæ­¥ï¼Œä»€ä¹ˆæ˜¯å¼‚æ­¥ï¼Œä»€ä¹ˆæ˜¯é˜»å¡ï¼Œä»€ä¹ˆæ˜¯éé˜»å¡ï¼Ÿ</p><p>åŒæ­¥ä¸å¼‚æ­¥ï¼šè¢«è°ƒç”¨è€…ï¼Œè°ƒç”¨ç»“æŸåæ˜¯å¦ä¸»åŠ¨è¿”å›ç»“æœ</p><p>é˜»å¡å’Œéé˜»å¡ï¼šè°ƒç”¨è€…ï¼Œè°ƒç”¨åæ˜¯å¦å¯ä»¥å»åšåˆ«çš„äº‹</p></li><li><p>åœ¨å•æ ¸CPUä¸Šè¿è¡Œå¤šçº¿ç¨‹ç¨‹åºæœ‰æ„ä¹‰å—ï¼Ÿ</p><p>æœ‰æ„ä¹‰ã€‚å•CPUå¤šçº¿ç¨‹ï¼Œæ˜¯å°½åŠ›åœ¨å‹æ¦¨CPUçš„ä½¿ç”¨ç‡ï¼Œå¦‚æœæœ‰IOæ“ä½œï¼Œå¾ˆå¤šçº¿ç¨‹ä¼šä¼‘æ¯ï¼Œå¦‚æœå•çº¿ç¨‹ï¼Œé‚£ä¹ˆCPUå°±ä¼‘æ¯ã€‚å¦‚æœCPUå·²ç»è¢«æŒ¤æ»¡ï¼Œé‚£ä¹ˆå¹¶ä¸æ˜¯è¯´åœ¨å•æ ¸CPUä¸Šè¿è¡Œå¤šçº¿ç¨‹ç¨‹åºæ²¡æœ‰æ„ä¹‰ï¼Œè€Œæ˜¯è¯´ï¼Œçº¿ç¨‹çš„æ•°é‡è®¾ç½®ä¸åˆç†ï¼Œåº”è¯¥å‡å°‘çº¿ç¨‹çš„æ•°é‡ã€‚</p></li></ol><h2 id="ç¬¬8ç« -å…¨ç¨‹å›é¡¾"><a href="#ç¬¬8ç« -å…¨ç¨‹å›é¡¾" class="headerlink" title="ç¬¬8ç«  å…¨ç¨‹å›é¡¾"></a>ç¬¬8ç«  å…¨ç¨‹å›é¡¾</h2><blockquote><p>ç”¨æ€ç»´å¯¼å›¾è¿›è¡Œå…¨è¯¾æ€»ç»“ï¼Œæ¸©æ•…çŸ¥æ–°ï¼Œæ›´ä¸Šä¸€å±‚ã€‚</p></blockquote><h3 id="8-1-æ€ç»´å¯¼å›¾æ€»ç»“ã€å®æˆ˜è¯¾å±•æœ›-16-11"><a href="#8-1-æ€ç»´å¯¼å›¾æ€»ç»“ã€å®æˆ˜è¯¾å±•æœ›-16-11" class="headerlink" title="8-1 æ€ç»´å¯¼å›¾æ€»ç»“ã€å®æˆ˜è¯¾å±•æœ› (16:11)"></a>8-1 æ€ç»´å¯¼å›¾æ€»ç»“ã€å®æˆ˜è¯¾å±•æœ› (16:11)</h3><p><a href="https://naotu.baidu.com/file/b8a70ff9e7f3af1437594b2d0fb4ebfd" target="_blank" rel="noopener">https://naotu.baidu.com/file/b8a70ff9e7f3af1437594b2d0fb4ebfd</a></p>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1129-ç©è½¬Vim ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹</title>
      <link href="/imooc/1129-vim/"/>
      <url>/imooc/1129-vim/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/1129" target="_blank" rel="noopener">https://www.imooc.com/learn/1129</a></p><p>ç®€ä»‹ï¼šVimä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„ç¼–è¾‘å™¨ï¼Œæ˜¯å¾ˆå¤šå·¨ä½¬çš„ä¸äºŒä¹‹é€‰ï¼Œä½†å› ä¸ºå…¶è¾ƒé«˜çš„å…¥é—¨å­¦ä¹ é—¨æ§›åŠé€€äº†å¾ˆå¤šäººã€‚ä¸­æ–‡çš„ç³»ç»Ÿæ•™ç¨‹å°‘ä¹‹åˆå°‘ï¼Œè®²vimæ’ä»¶ä½¿ç”¨çš„æ›´æ˜¯å±ˆæŒ‡å¯æ•°ï¼Œæœ¬è¯¾ç¨‹ä»vimæœ€åŸºç¡€çš„æ“ä½œå’Œæ¦‚å¿µå¼€å§‹è®²èµ·ï¼Œå¸¦é¢†å¤§å®¶å­¦ä¼šä½¿ç”¨å’Œé…ç½® vimï¼Œå®‰è£…å¼ºå¤§çš„ vim æ’ä»¶ï¼ŒçœŸæ­£æŒæ¡ç¼–è¾‘å™¨ä¹‹ç¥ vim çš„ä½¿ç”¨ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -ç©è½¬vim-ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹"><a href="#ç¬¬1ç« -ç©è½¬vim-ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹" class="headerlink" title="ç¬¬1ç«  ç©è½¬vim ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹"></a>ç¬¬1ç«  ç©è½¬vim ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹</h2><blockquote><p>è¯¾ç¨‹å¯¼å­¦</p></blockquote><h3 id="1-1-ç©è½¬vim-ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹-è¯¾ç¨‹å¯¼å­¦-09-43"><a href="#1-1-ç©è½¬vim-ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹-è¯¾ç¨‹å¯¼å­¦-09-43" class="headerlink" title="1-1 ç©è½¬vim ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹-è¯¾ç¨‹å¯¼å­¦ (09:43)"></a>1-1 ç©è½¬vim ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹-è¯¾ç¨‹å¯¼å­¦ (09:43)</h3><p>ä»€ä¹ˆæ˜¯Vimï¼Ÿ</p><blockquote><p>Linuxä¸‹ä¸¤å¤§ç¼–è¾‘ç¥å™¨ä¹‹ä¸€ï¼šVim</p></blockquote><ul><li>Linux/Unixä¸‹ä½¿ç”¨æœ€å¤šçš„ç¼–è¾‘å™¨</li><li>Viçš„æ”¹è¿›ç‰ˆ</li><li>å¯èƒ½æ˜¯æœ€éš¾ä¸Šæ‰‹çš„ç¼–è¾‘å™¨ä¹‹ä¸€</li></ul><p>ä¸ºä»€ä¹ˆè¦å­¦ä¹ Vimï¼Ÿ</p><blockquote><p>éƒ½21ä¸–çºªäº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å­¦ä¹ Vimï¼Ÿ</p></blockquote><ul><li>åªè¦ä½ ç”¨æœåŠ¡å™¨ï¼ŒVimå°±æ˜¯ä¸€ä¸ªå¿…å¤‡æŠ€èƒ½</li><li>åç«¯å’Œè¿ç»´å·¥ç¨‹å¸ˆå¿…é¡»æŒæ¡çš„ç¼–è¾‘å™¨ï¼Œä¸ç„¶æœåŠ¡å™¨ä¸Šæ“ä½œå¾ˆå°´å°¬</li><li>å¯ä»¥çº¯é”®ç›˜âŒ¨ï¸ç¼–è¾‘ï¼Œæå‡ç¼–è¾‘æ•ˆç‡</li></ul><p>ç—›ç‚¹</p><blockquote><p>Viméš¾ä¸Šæ‰‹ï¼Œå­¦ä¹ æ›²çº¿é™¡</p></blockquote><ul><li>Vimè§†é¢‘å­¦ä¹ èµ„æ–™å¾ˆå°‘ï¼Œç½‘ä¸Šå¾ˆå¤šåšå®¢è®²è§£é›¶æ•£ã€ä¸å¤Ÿç›´è§‚</li><li>ç¼ºå°‘ç³»ç»Ÿçš„æ•™ç¨‹ã€‚Vimå‘½ä»¤ä¼—å¤šï¼Œéš¾ä»¥å­¦ä¹ å’Œè®°å¿†</li><li>Vimå­¦ä¹ æ›²çº¿æ¯”è¾ƒé™¡ï¼Œéœ€è¦è¾ƒé•¿æ—¶é—´æ‰èƒ½ä¸Šæ‰‹ï¼ŒåŠé€€å¾ˆå¤šåˆå­¦è€…</li></ul><p>è¯¾ç¨‹ç›®çš„</p><blockquote><p>å¸®ä½ é©¯æœVim</p></blockquote><ul><li>äº†è§£å’ŒæŒæ¡Vimä¸­çš„åŸºæœ¬æ¦‚å¿µ</li><li>ç†Ÿæ‚‰VimåŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œèƒ½å¤Ÿåšåˆ°æ—¥å¸¸ç¼–è¾‘ï¼ˆçº¯é”®ç›˜ç¼–è¾‘ï¼‰</li><li>çŸ¥é“å¦‚ä½•è‡ªå®šä¹‰Vimï¼Œå®‰è£…æ’ä»¶æ— é™æ‰©å……Vimçš„åŠŸèƒ½</li></ul><p>è¯¾ç¨‹å†…å®¹</p><blockquote><p>å¦‚ä½•å­¦ä¹ Vimï¼ŸVimç»å¸¸è¢«è¯Ÿç—…éš¾æ˜“ä¸Šæ‰‹å’Œä½¿ç”¨</p></blockquote><ul><li>Vimçš„æ¦‚å¿µå’ŒåŸºæœ¬æ“ä½œï¼Œæ¯”å¦‚ç§»åŠ¨å’Œå¢åˆ æ”¹æŸ¥</li><li>å¦‚ä½•é…ç½®Vimï¼Œç¼–å†™è‡ªå·±çš„vimrcæ–‡ä»¶</li><li>å¦‚ä½•å®‰è£…å’Œä½¿ç”¨æ’ä»¶ï¼Œæ— é™æ‰©å……Vimçš„åŠŸèƒ½</li></ul><p>å—ä¼—</p><blockquote><p>å“ªäº›äººå¯ä»¥ä»æœ¬é—¨è¯¾ç¨‹å—ç›Šå‘¢ï¼Ÿ</p></blockquote><ul><li>è¿ç»´å·¥ç¨‹å¸ˆã€åç«¯å·¥ç¨‹å¸ˆç­‰</li><li>Linuxç”¨æˆ·</li><li>å¯¹Vimæ„Ÿå…´è¶£ï¼Œæƒ³è¦æå‡å¼€å‘æ•ˆç‡çš„å¼€å‘è€…,ç”šè‡³æ™®é€šç”¨æˆ·</li></ul><p>é¢„å¤‡çŸ¥è¯†</p><blockquote><p>ä¸è¦æ±‚æŒæ¡Vimçš„åŸºç¡€çŸ¥è¯†ï¼Œä½†æœ€å¥½ä½¿ç”¨Linux/Unixç³»ç»Ÿ</p></blockquote><ul><li>ç†Ÿæ‚‰åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œï¼ˆä¸€èˆ¬Vimå¤šåœ¨LinuxæœåŠ¡å™¨ä¸Šä½¿ç”¨ï¼‰</li><li>çŸ¥é“å¦‚ä½•å®‰è£…Vim</li><li>æœ‰å…¶ä»–ç¼–è¾‘å™¨ä½¿ç”¨ç»éªŒã€‚å‡ ä¹æ‰€æœ‰æµè¡ŒIDEå’Œç¼–è¾‘å™¨éƒ½æœ‰Vimæ‰©å±•</li></ul><p>è¯¾ç¨‹ç‰¹è‰²</p><blockquote><p>å­¦ä¹ Viméä¸€æ—¥ä¹‹åŠŸï¼Œå¾—é è‚Œè‚‰è®°å¿†</p></blockquote><ul><li>ç”±æµ…å…¥æ·±ï¼Œå¾ªåºæ¸è¿›ã€‚ä»åŸºæœ¬çš„æ¦‚å¿µå’Œæ“ä½œè®²èµ·</li><li>æˆäººä»¥ğŸŸï¼ŒåŒæ—¶æˆäººä»¥æ¸”ã€‚å­¦ä¼šäº†æ’ä»¶è‡ªå·±æ‰©å……VimåŠŸèƒ½</li><li>å¤§é‡å®è·µæŠ€å·§ï¼ˆæ‰€æœ‰æ¼”ç¤ºå‡ä½¿ç”¨æŒ‰é”®å›æ˜¾å·¥å…·ï¼Œè®©ä½ çœ‹å¾—æ›´æ˜ç™½ï¼‰</li></ul><h2 id="ç¬¬2ç« -åˆè¯†-Vimï¼Œæƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“"><a href="#ç¬¬2ç« -åˆè¯†-Vimï¼Œæƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“" class="headerlink" title="ç¬¬2ç«  åˆè¯† Vimï¼Œæƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“"></a>ç¬¬2ç«  åˆè¯† Vimï¼Œæƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“</h2><blockquote><p>ä»åŸºç¡€çš„ Vim æ“ä½œè®²èµ·ï¼Œå­¦ä¹  Vim æ“ä½œå’Œæ¶‰åŠåˆ°çš„ Vim æ¦‚å¿µã€‚</p></blockquote><h3 id="2-1-åˆè¯†-Vimï¼Œæƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“-11-50"><a href="#2-1-åˆè¯†-Vimï¼Œæƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“-11-50" class="headerlink" title="2-1 åˆè¯† Vimï¼Œæƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“ (11:50)"></a>2-1 åˆè¯† Vimï¼Œæƒ³è¯´çˆ±ä½ ä¸å®¹æ˜“ (11:50)</h3><p>ä¸‹è½½ä¸å®‰è£…</p><blockquote><p>ä½œä¸ºå¼€å‘è€…çš„ä½ ï¼Œå®‰è£…Vimåº”è¯¥å¾ˆç®€å•</p></blockquote><ul><li>Linux/Unix(Mac)è‡ªå¸¦Vimï¼Œç›´æ¥ç»ˆç«¯é‡Œè¾“å…¥<code>vim</code>å³å¯è¿›å…¥</li><li>Windowsç”¨æˆ·å¯ä»¥ä¸‹è½½å®‰è£…Gvimç­‰ä½“éªŒ</li><li>å»ºè®®Windowsç”¨æˆ·å¯ä»¥å°è¯•ä½¿ç”¨è™šæ‹Ÿæœºæ¥ä½“éªŒLinuxä¸‹çš„Vim</li></ul><p>åˆè¯†Vim</p><blockquote><p>æ®è¯´StackOverflowå¸®åŠ©è¿‡ä¸Šç™¾ä¸‡å¼€å‘è€…é€€å‡ºè¿‡Vimï¼</p></blockquote><ul><li><p>è¾“å…¥<code>vim</code>å‘½ä»¤è¿›å…¥Vim</p><pre><code>~                              VIM - Vi IMproved                                ~                                                                               ~                               version 8.0.1283                                ~                           by Bram Moolenaar et al.                            ~                 Vim is open source and freely distributable                   ~                                                                               ~                        Become a registered Vim user!                          ~                type  :help register&lt;Enter&gt;   for information                  ~                                                                          ~                type  :q&lt;Enter&gt;               to exit~                type  :help&lt;Enter&gt;  or  &lt;F1&gt;  for on-line help~                type  :help version8&lt;Enter&gt;   for version info</code></pre></li><li><p>è¿›å»ä¹‹åä¼¼ä¹æ²¡æ³•è¾“å…¥ä¸œè¥¿ï¼Œèµ·å§‹é»˜è®¤è¿›å»æ˜¯æ™®é€š(normal)æ¨¡å¼</p></li><li><p>ä½¿ç”¨<code>:q</code>å¯ä»¥é€€å‡ºVim</p></li></ul><p>å¼€å§‹ç¼–è¾‘</p><blockquote><p>è¿›å…¥ç¼–è¾‘æ¨¡å¼å°±å¯ä»¥åƒå…¶ä»–ç¼–è¾‘å™¨ä¸€æ ·ç¼–è¾‘äº†</p></blockquote><ul><li><p>ä½¿ç”¨<code>i</code>è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¼€å§‹è¾“å…¥æ–‡å­—</p></li><li><table><thead><tr><th>æ“ä½œ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>i</code></td><td>insert before character</td></tr><tr><td><code>a</code></td><td>append after character</td></tr><tr><td><code>o</code></td><td>open a line below</td></tr><tr><td><code>I</code></td><td>insert before line</td></tr><tr><td><code>A</code></td><td>append after line</td></tr><tr><td><code>O</code></td><td>open a line above</td></tr></tbody></table></li><li><p>ä½¿ç”¨<code>Esc</code>åˆå¯ä»¥å›åˆ°æ™®é€š(normal)æ¨¡å¼ã€‚ä½¿ç”¨<code>:wq</code>ä¿å­˜é€€å‡º</p><p>insert -&gt; normalï¼š<code>Esc</code></p></li></ul><p>è¯¾åç»ƒä¹ </p><blockquote><p>ç”¨Vimé çš„æ˜¯è‚Œè‚‰è®°å¿†ï¼Œèµ¶ç´§è‡ªå·±æ“ä½œç»ƒä¹ ä¸€ä¸‹å§</p></blockquote><ul><li>é€šè¿‡æœç´¢å¼•æ“å­¦ä¹ å¦‚ä½•å®‰è£…ï¼Œå¹¶åœ¨ä½ çš„æ“ä½œç³»ç»Ÿä¸­å®‰è£…å¥½Vim</li><li>è¿›å…¥Vimï¼Œä½¿ç”¨<code>i</code>/<code>a</code>/<code>o</code>è¿›å…¥ç¼–è¾‘(insert)æ¨¡å¼è¾“å…¥æ–‡æœ¬</li><li>é€€å›åˆ°é»˜è®¤çš„æ™®é€š(normal)æ¨¡å¼ï¼Œä¿å­˜å¹¶é€€å‡ºVim</li></ul><h3 id="2-2-Vimï¼Œä¸ºä»€ä¹ˆä½ æœ‰è¿™ä¹ˆå¤šæ¨¡å¼-09-15"><a href="#2-2-Vimï¼Œä¸ºä»€ä¹ˆä½ æœ‰è¿™ä¹ˆå¤šæ¨¡å¼-09-15" class="headerlink" title="2-2 Vimï¼Œä¸ºä»€ä¹ˆä½ æœ‰è¿™ä¹ˆå¤šæ¨¡å¼ (09:15)"></a>2-2 Vimï¼Œä¸ºä»€ä¹ˆä½ æœ‰è¿™ä¹ˆå¤šæ¨¡å¼ (09:15)</h3><p>â€œæ€ªå¼‚çš„Vimæ¨¡å¼â€</p><blockquote><p>Vimå’Œå…¶ä»–å¾ˆå¤šç¼–è¾‘å™¨çš„åŒºåˆ«åœ¨äºå¤šç§æ¨¡å¼</p></blockquote><ul><li><p>è¿›å…¥Vimé»˜è®¤æ˜¯æ™®é€š(normal)æ¨¡å¼ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯ç¼–è¾‘æ¨¡å¼å‘¢ï¼Ÿ</p><p>ç­”ï¼šåœ¨æ—¥å¸¸å¼€å‘ä¸­æ›´å¤šçš„æ˜¯æµè§ˆä»£ç ï¼Œè€Œä¸æ˜¯ç¼–è¾‘ä»£ç </p></li><li><p>ä½¿ç”¨<code>i</code>(insert)/<code>a</code>(append)ç­‰è¿›å…¥ç¼–è¾‘æ¨¡å¼</p></li><li><p>è¿˜æœ‰<code>:cmd</code>å‘½ä»¤æ¨¡å¼å’Œ<code>v</code>(visual)å¯è§†åŒ–æ¨¡å¼</p></li></ul><ol><li>ä¸ºä»€ä¹ˆè¿›å…¥Vimä¸èƒ½æ’å…¥â€”æ™®é€š(Normal)æ¨¡å¼</li></ol><blockquote><p>å¥‡æ€ªçš„æ˜¯ï¼Œä¸ºä»€ä¹ˆVimè¿›å…¥ä¹‹åä¸èƒ½åƒå…¶ä»–ç¼–è¾‘å™¨ä¸€æ ·ç›´æ¥æ’å…¥ï¼Ÿ</p></blockquote><ul><li>è¿›å…¥Vimé»˜è®¤æ˜¯æ™®é€š(normal)æ¨¡å¼ã€‚ä½¿ç”¨<code>Esc</code>ä»æ’å…¥æ¨¡å¼å›åˆ°æ™®é€šæ¨¡å¼</li><li>æ™®é€šæ¨¡å¼ä¸‹å¯ä»¥è¿›è¡Œå„ç§å‘½ä»¤æ“ä½œå’Œç§»åŠ¨</li><li>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½ æ˜¯åœ¨æµè§ˆè€Œä¸æ˜¯ç¼–è¾‘ã€‚æ‰€ä»¥Vimé»˜è®¤æ˜¯æ™®é€š(normal)æ¨¡å¼</li></ul><ol start="2"><li>æ’å…¥(Insert)æ¨¡å¼</li></ol><blockquote><p>æ’å…¥æ¨¡å¼ä¸‹Vimå¯ä»¥ç›´æ¥ç¼–è¾‘ï¼Œå’Œå…¶ä»–ç¼–è¾‘å™¨ä¸€æ ·</p></blockquote><ul><li>ä½¿ç”¨<code>i</code>(insert)/<code>a</code>(append)/<code>o</code>(open a line below)è¿›å…¥æ’å…¥æ¨¡å¼</li><li>ä½¿ç”¨<code>Esc</code>é€€å‡ºæ’å…¥æ¨¡å¼åˆ°æ™®é€š(normal)æ¨¡å¼</li><li>ä½ æ¥è¯•è¯•<code>I</code>/<code>A</code>/<code>O</code>å¦‚ä½•è¿›å…¥æ’å…¥æ¨¡å¼çš„ï¼Ÿ</li></ul><ol start="3"><li>å‘½ä»¤(Command)æ¨¡å¼</li></ol><blockquote><p>æ™®é€š(Normal)æ¨¡å¼ä¸‹è¾“å…¥<code>:</code>ä¹‹åæ‰§è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚ä¿å­˜é€€å‡º<code>:wq</code>ï¼Œä¸€æ°”å‘µæˆ</p></blockquote><ul><li>é¡¾åæ€ä¹‰ï¼Œæ‰§è¡ŒVimå‘½ä»¤ã€‚æ¯”å¦‚ä¿å­˜<code>:w</code>ã€é€€å‡º<code>:q</code></li><li>æ¯”å¦‚åˆ†å±ï¼š<code>:vs</code>(vertical split)ã€<code>:sp</code>(split)</li><li>æ¯”å¦‚ä½¿ç”¨<code>:% s/java/python/g</code>å…¨å±€æ›¿æ¢ï¼Œå°†<code>java</code>æ›¿æ¢ä¸º<code>python</code></li></ul><ol start="4"><li>å¯è§†åŒ–(Visual)æ¨¡å¼</li></ol><blockquote><p>å¯è§†åŒ–(Visual)æ¨¡å¼ä¸€èˆ¬ç”¨æ¥å—çŠ¶é€‰æ‹©æ–‡æœ¬</p></blockquote><ul><li>æ™®é€šæ¨¡å¼ä¸‹ï¼Œä½¿ç”¨<code>v</code>è¿›å…¥å­—ç¬¦é€‰æ‹©</li><li>ä½¿ç”¨<code>V</code>é€‰æ‹©è¡Œ</li><li>ä½¿ç”¨<code>Ctrl+v</code>è¿›å…¥æ–¹å—â™¦ï¸é€‰æ‹©</li></ul><p>è¯¾åç»ƒä¹ </p><blockquote><p>ç†è§£å’Œä½¿ç”¨Vimå¸¸ç”¨çš„4ç§æ¨¡å¼</p></blockquote><ul><li>æ‰¾ä¸€ä¸ªæ–‡ä»¶ç¼–è¾‘ï¼Œåœ¨æ’å…¥æ¨¡å¼å’Œæ™®é€šæ¨¡å¼ä¹‹é—´åˆ‡æ¢</li><li>ä½¿ç”¨å‘½ä»¤æ¨¡å¼æ›¿æ¢å•è¯</li><li>å°è¯•ä½¿ç”¨å¯è§†åŒ–(Visual)æ¨¡å¼ï¼Œæƒ³æƒ³å®ƒçš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼Ÿ</li></ul><h3 id="2-3-Vim-æ’å…¥æ¨¡å¼å°æŠ€å·§-08-08"><a href="#2-3-Vim-æ’å…¥æ¨¡å¼å°æŠ€å·§-08-08" class="headerlink" title="2-3 Vim æ’å…¥æ¨¡å¼å°æŠ€å·§ (08:08)"></a>2-3 Vim æ’å…¥æ¨¡å¼å°æŠ€å·§ (08:08)</h3><p>å¦‚ä½•å¿«é€Ÿçº é”™ï¼Ÿ</p><blockquote><p>ä»£ç å°±åƒäººç”Ÿï¼Œæ€»æ˜¯ç»å¸¸å‡ºé”™ï¼Œéœ€è¦æˆ‘ä»¬å¿«é€Ÿä¿®æ­£</p></blockquote><ul><li><p>è¿›å…¥Vimä¹‹åï¼Œé¦–å…ˆä½¿ç”¨<code>i</code>/<code>a</code>/<code>o</code>è¿›å…¥æ’å…¥æ¨¡å¼</p></li><li><p>å°è¯•æŠ›å¼ƒé€€æ ¼é”®ï¼Œä½¿ç”¨<code>Ctrl</code>å¿«æ·é”®æ¥å®Œæˆç¼–è¾‘åˆ é™¤å·¥ä½œ</p><table><thead><tr><th>æ“ä½œ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>Ctrl+h</code></td><td>åˆ é™¤ä¸Šä¸€ä¸ªå­—ç¬¦</td></tr><tr><td><code>Ctrl+w</code></td><td>åˆ é™¤ä¸Šä¸€ä¸ªå•è¯</td></tr><tr><td><code>Ctrl+u</code></td><td>åˆ é™¤å½“å‰è¡Œ</td></tr></tbody></table></li><li><p>ä»¥ä¸Šå‡ ä¸ªå¿«æ·é”®å¯ä»¥ç”¨åœ¨å¾ˆå¤šåœ°æ–¹ï¼Œæ¯”å¦‚<strong><em>ç»ˆç«¯</em></strong></p><table><thead><tr><th>æ“ä½œ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>Ctrl+a</code></td><td>å¿«é€Ÿç§»åŠ¨åˆ°å¼€å¤´</td></tr><tr><td><code>Ctrl+e</code></td><td>å¿«é€Ÿç§»åŠ¨åˆ°ç»“å°¾</td></tr><tr><td><code>Ctrl+b</code></td><td>å‰ç§»åŠ¨</td></tr><tr><td><code>Ctrl+f</code></td><td>åç§»åŠ¨</td></tr></tbody></table></li></ul><p>å¿«é€Ÿåˆ‡æ¢æ™®é€š(Normal)æ¨¡å¼å’Œç¼–è¾‘(Insert)æ¨¡å¼</p><blockquote><p>å¾ˆå¤šé”®ç›˜çš„é”®ä½è®¾ç½®ï¼Œ<code>Esc</code>æŒ‰èµ·æ¥ä¸æ–¹ä¾¿ï¼Œä¸æ–¹ä¾¿åˆ‡æ¢åˆ°æ™®é€šæ¨¡å¼</p></blockquote><ul><li>ä½¿ç”¨<code>Ctrl+c</code>ä»£æ›¿<code>Esc</code>ï¼ˆä½†æ˜¯å¯èƒ½ä¼šä¸­æ–­æŸäº›æ’ä»¶ï¼‰ã€<code>Ctrl+[</code></li><li><strong><code>gi</code>å¿«é€Ÿè·³è½¬åˆ°æœ€åä¸€æ¬¡ç¼–è¾‘çš„åœ°æ–¹ï¼Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼</strong></li><li>åœ¨é…ç½®ç« èŠ‚ï¼Œæˆ‘ä»¬ä¼šè®²è§£å¦‚ä½•æ˜ å°„æ–¹ä¾¿çš„å¿«æ·é”®æ¥ä»£æ›¿<code>Esc</code></li></ul><p>è®©é”®ç›˜é€‚åº”å·¥å…·</p><blockquote><p>é”®ç›˜çš„é€‰æ‹©ä¼šå½±å“ä½ çš„ç¼–è¾‘é€Ÿåº¦</p></blockquote><ul><li>é€‰æ‹©<code>Esc</code>å’Œ<code>Ctrl</code>æ¯”è¾ƒå®¹æ˜“è§¦ç¢°åˆ°çš„é”®ç›˜</li><li>ä½¿ç”¨Vimï¼Œä½ å¯ä»¥ä½¿ç”¨HHKBæˆ–è€…Poker2è¿™ç§è¿·ä½ é”®ç›˜</li><li>ä½¿ç”¨è½¯ä»¶ä¿®æ”¹é”®ä½ï¼Œæ¯”å¦‚<code>CapsLock</code>æ”¹æˆé¢‘ç¹ä½¿ç”¨åˆ°çš„<code>Ctrl</code></li></ul><ul><li><p>ç å†œç¥å™¨ä¹‹HHKBâ€”ä¸“ä¸ºLinuxä¸‹Vim/Emacsè®¾è®¡</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gg8zp9kyj31jw0kojwp.jpg" alt="ç å†œç¥å™¨ä¹‹HHKB" style="zoom:50%;" /></li><li><p>å‘çƒ§ä¹‹é€‰â€”Poker2</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gg90lb5nj31gi0i0dis.jpg" alt="å‘çƒ§ä¹‹é€‰---Poker2" style="zoom:50%;" /></li></ul><h3 id="2-4-Vim-å¿«é€Ÿç§»åŠ¨å¤§æ³•-15-11"><a href="#2-4-Vim-å¿«é€Ÿç§»åŠ¨å¤§æ³•-15-11" class="headerlink" title="2-4 Vim å¿«é€Ÿç§»åŠ¨å¤§æ³• (15:11)"></a>2-4 Vim å¿«é€Ÿç§»åŠ¨å¤§æ³• (15:11)</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œvim normalæ¨¡å¼ä½¿ç”¨äº†åäººç±»çš„hjklæ¥ç§»åŠ¨</p><ul><li>ç¼–è¾‘å™¨ä½œè€…åœ¨ç¼–å†™vimçš„æ—¶å€™ï¼Œé”®ç›˜è¿˜æ²¡æµè¡Œä¸Šä¸‹å·¦å³æŒ‰é”®</li><li>å·¦ï¼ˆ<code>h</code>ï¼‰ï¼Œä¸‹ï¼ˆ<code>j</code>ï¼‰ï¼Œä¸Šï¼ˆ<code>k</code>ï¼‰ï¼Œå³ï¼ˆ<code>l</code>ï¼‰ã€‚ç§»åŠ¨ä¹Ÿä¸ä¼šè®©æ‰‹æŒ‡è„±ç¦»ä¸»é”®ç›˜åŒº</li><li>é€¼ç€è‡ªå·±ä½¿ç”¨hjklä¸€æ®µæ—¶é—´ä¹‹åï¼Œä¾¿ä¼šä½“ä¼šåˆ°å®ƒéå¸¸æœ‰æ•ˆç‡</li></ul><p>åœ¨å•è¯ä¹‹é—´ã€Œé£èˆã€</p><blockquote><p>åœ¨å•è¯ä¹‹é—´ç§»åŠ¨æ˜¯æˆ‘ä»¬æµè§ˆæ“ä½œä¸­æœ€å¸¸ä½¿ç”¨çš„å‘½ä»¤</p></blockquote><ul><li><code>w</code>/<code>W</code>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªword/WORDå¼€å¤´ã€‚<code>e</code>/<code>E</code>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªword/WORDç»“å°¾</li><li><code>b</code>/<code>B</code>å›åˆ°ä¸Šä¸€ä¸ªword/WORDå¼€å¤´ï¼Œå¯ä»¥ç†è§£ä¸ºbackword</li><li>wordæŒ‡çš„æ˜¯ä»¥éç©ºç™½ç¬¦åˆ†å‰²çš„å•è¯ï¼ŒWORDæŒ‡çš„æ˜¯ä»¥ç©ºç™½ç¬¦åˆ†å‰²çš„å•è¯</li></ul><p><code>synyax on</code>ï¼šæ‰“å¼€é«˜äº®æ˜¾ç¤º</p><p>è¡Œé—´æœç´¢ç§»åŠ¨</p><blockquote><p>åŒä¸€è¡Œå¿«é€Ÿç§»åŠ¨çš„æ–¹å¼å…¶å®æ˜¯ï¼šæœç´¢ä¸€ä¸ªå­—ç¬¦å¹¶ä¸”ç§»åŠ¨åˆ°è¯¥å­—ç¬¦</p></blockquote><ul><li>ä½¿ç”¨<code>f{char}</code>å¯ä»¥ç§»åŠ¨åˆ°charå­—ç¬¦ä¸Šï¼Œ<code>t{char}</code>ç§»åŠ¨åˆ°charçš„å‰ä¸€ä¸ªå­—ç¬¦</li><li>å¦‚æœç¬¬ä¸€æ¬¡æ²¡æœåˆ°ï¼Œå¯ä»¥ç”¨åˆ†å·<code>;</code>/é€—å·<code>,</code>ç»§ç»­æœç´¢è¯¥è¡Œçš„ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ª</li><li>å¤§å†™çš„<code>F</code>è¡¨ç¤ºåè¿‡æ¥æœç´¢å‰é¢çš„å­—ç¬¦</li></ul><p>å¦‚ä½•å¿«é€Ÿç§»åŠ¨åˆ°ä¸€è¡Œçš„è¡Œé¦–æˆ–è€…è¡Œå°¾å‘¢ï¼Ÿ</p><ul><li><code>0</code>ç§»åŠ¨åˆ°è¡Œé¦–ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œ<code>^</code>ç§»åŠ¨åˆ°è¡Œé¦–ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦</li><li><code>$</code>ç§»åŠ¨åˆ°è¡Œå°¾ï¼Œ<code>_g</code>ç§»åŠ¨åˆ°è¡Œå°¾éç©ºç™½å­—ç¬¦</li><li>è®°ä½å¸¸ç”¨çš„<code>0</code>å’Œ<code>$</code>å°±å¯ä»¥æ»¡è¶³æ—¥å¸¸éœ€æ±‚äº†ã€‚</li></ul><p>Vimå‚ç›´ç§»åŠ¨</p><blockquote><p>åœ¨å¥å­ï¼ˆsentenceï¼‰å’Œæ®µè½ï¼ˆparagraphï¼‰é—´ç§»åŠ¨ã€‚ï¼ˆä¸å¸¸ç”¨ï¼‰</p></blockquote><ul><li>ä½¿ç”¨å°æ‹¬å·<code>()</code>åœ¨å¥å­é—´ç§»åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨<code>:help (</code>æ¥æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</li><li>ä½¿ç”¨å¤§æ‹¬å·<code>{}</code>åœ¨æ®µè½é—´ç§»åŠ¨</li><li>æ’ä»¶ç« èŠ‚ä¼šè®²åˆ°å¦‚ä½•ä½¿ç”¨easy-motionæ’ä»¶ç§»åŠ¨ï¼Œè¿™äº›å‘½ä»¤å°±éƒ½ä¸ç”¨è®°å¿†äº†</li></ul><p>Vimé¡µé¢ç§»åŠ¨</p><ul><li><code>gg</code>/<code>G</code>ç§»åŠ¨åˆ°æ–‡ä»¶å¼€å¤´å’Œç»“å°¾ï¼Œå¯ä»¥ä½¿ç”¨<code>ctrl+o</code>å¿«é€Ÿè¿”å›</li><li><code>H</code>/<code>M</code>/<code>L</code>è·³è½¬åˆ°å±å¹•çš„å¼€å¤´ï¼ˆHeadï¼‰ã€ä¸­é—´ï¼ˆMiddleï¼‰ã€ç»“å°¾ï¼ˆLowerï¼‰</li><li><code>ctrl+u</code>ã€<code>ctrl+f</code>ä¸Šä¸‹ç¿»é¡µï¼ˆupward/forwardï¼‰ã€‚<code>zz</code>æŠŠå…‰æ ‡å½“å‰è¡Œç½®ä¸ºå±å¹•ä¸­é—´</li></ul><h3 id="2-5-Vimå¿«é€Ÿå¢åˆ æ”¹æŸ¥-13-29"><a href="#2-5-Vimå¿«é€Ÿå¢åˆ æ”¹æŸ¥-13-29" class="headerlink" title="2-5 Vimå¿«é€Ÿå¢åˆ æ”¹æŸ¥ (13:29)"></a>2-5 Vimå¿«é€Ÿå¢åˆ æ”¹æŸ¥ (13:29)</h3><p>Vimå¢åŠ å­—ç¬¦</p><ul><li>è¿›å…¥æ’å…¥æ¨¡å¼ç¼–è¾‘æ–‡æœ¬</li><li><code>a</code>/<code>i</code>/<code>o</code>ã€<code>A</code>/<code>I</code>/<code>O</code></li></ul><p>Vimå¿«é€Ÿåˆ é™¤</p><ul><li>Vimåœ¨normalæ¨¡å¼ä¸‹ä½¿ç”¨<code>x</code>å¿«é€Ÿåˆ é™¤ä¸€ä¸ªå­—ç¬¦</li><li>ä½¿ç”¨<code>d</code>ï¼ˆdeleteï¼‰é…åˆæ–‡æœ¬å¯¹è±¡å¿«é€Ÿåˆ é™¤ä¸€ä¸ªå•è¯<code>daw</code>ï¼ˆd around wordï¼‰</li><li><code>d</code>å’Œ<code>x</code>éƒ½å¯ä»¥æ­é…æ•°å­—æ¥æ‰§è¡Œå¤šæ¬¡</li></ul><p>Vimå¿«é€Ÿä¿®æ”¹</p><ul><li><p><code>r{char}</code>ï¼ˆreplaceï¼‰ã€<code>c</code>ï¼ˆchangeï¼‰ã€<code>s</code>ï¼ˆsubstituteï¼‰</p></li><li><p>normalæ¨¡å¼ä¸‹ä½¿ç”¨<code>r{char}</code>å¯ä»¥æ›¿æ¢ä¸€ä¸ªå­—ç¬¦charã€‚<code>s</code>æ›¿æ¢å¹¶è¿›å…¥æ’å…¥æ¨¡å¼</p><p><code>R</code>è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œå°†å…‰æ ‡æ‰€åœ¨çš„å­—ç¬¦ç›´æ¥æ›¿æ¢ä¸ºè¾“å…¥çš„å­—ç¬¦ã€‚<code>S</code>åˆ é™¤æ•´è¡Œï¼Œè¿›å…¥æ’å…¥æ¨¡å¼</p></li><li><p>ä½¿ç”¨<code>c</code>é…åˆæ–‡æœ¬å¯¹è±¡å¯ä»¥å¿«é€Ÿè¿›è¡Œä¿®æ”¹ã€‚ä¾‹å¦‚ï¼š<code>ciw</code>ã€<code>caw</code>ã€<code>ct&quot;</code></p><p><code>C</code>åˆ é™¤æ•´è¡Œï¼Œè¿›å…¥æ’å…¥æ¨¡å¼ï¼ˆä¸åŒ…å«è¡Œé¦–çš„éç©ºç™½å­—ç¬¦ï¼‰</p></li></ul><p>VimæŸ¥è¯¢</p><ul><li>ä½¿ç”¨<code>/</code>æˆ–è€…<code>?</code>è¿›è¡Œå‰å‘æˆ–è€…åå‘æœç´¢</li><li>ä½¿ç”¨<code>n</code>/<code>N</code>è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæˆ–è€…ä¸Šä¸€ä¸ªåŒ¹é…</li><li>ä½¿ç”¨<code>*</code>æˆ–è€…<code>#</code>è¿›è¡Œå½“å‰å…‰æ ‡æ‰€åœ¨å•è¯çš„å‰å‘æˆ–è€…åå‘åŒ¹é…</li></ul><h3 id="2-6-Vim-å¦‚ä½•æœç´¢æ›¿æ¢-07-15"><a href="#2-6-Vim-å¦‚ä½•æœç´¢æ›¿æ¢-07-15" class="headerlink" title="2-6 Vim å¦‚ä½•æœç´¢æ›¿æ¢ (07:15)"></a>2-6 Vim å¦‚ä½•æœç´¢æ›¿æ¢ (07:15)</h3><p>Vimæ›¿æ¢å‘½ä»¤ï¼š</p><blockquote><p>substituteå‘½ä»¤å…è®¸æŸ¥æ‰¾å¹¶ä¸”æ›¿æ¢æ–‡æœ¬ï¼Œå¹¶ä¸”æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼</p></blockquote><ul><li><code>:[range] s[ubstitute]/{pattern}/{string}/[flags]</code></li><li><code>range</code>è¡¨ç¤ºèŒƒå›´ã€‚ æ¯”å¦‚ï¼š<code>10,20</code>è¡¨ç¤º10-20è¡Œï¼Œ<code>%</code>è¡¨ç¤ºå…¨éƒ¨</li><li><code>pattern</code>æ˜¯è¦æ›¿æ¢çš„æ¨¡å¼ï¼Œ<code>string</code>æ˜¯æ›¿æ¢åçš„æ–‡æœ¬ï¼Œ<code>flags</code>æ˜¯æ›¿æ¢æ ‡å¿—ä½</li></ul><p>æ›¿æ¢æ ‡å¿—ä½</p><ul><li><code>g</code>(flobal)è¡¨ç¤ºå…¨å±€èŒƒå›´å†…æ‰§è¡Œ</li><li><code>c</code>(confirm)è¡¨ç¤ºç¡®è®¤ï¼Œå¯ä»¥ç¡®è®¤æˆ–è€…æ‹’ç»ä¿®æ”¹</li><li><code>n</code>(number)æŠ¥å‘ŠåŒ¹é…åˆ°çš„æ¬¡æ•°è€Œä¸æ›¿æ¢ï¼Œå¯ä»¥ç”¨æ¥æŸ¥è¯¢åŒ¹é…æ¬¡æ•°</li></ul><p>ä¾‹ï¼š</p><pre><code class="shell"># åœ¨å…¨å±€èŒƒå›´å†…å°†selfæ›¿æ¢ä¸ºthis:% s/self/this/g# åœ¨1-6è¡Œå°†selfæ›¿æ¢ä¸ºthis:1,6 s/self/this/g# ç»Ÿè®¡1-6è¡ŒåŒ¹é…åˆ°selfçš„æ¬¡æ•°:1,6 s/self//n# åˆ©ç”¨æ­£åˆ™ï¼Œå°†quackæ›¿æ¢ä¸ºjiaoï¼Œè€Œä¸æ›¿æ¢do_quack:% s/\&lt;quack\&gt;/jiao/g</code></pre><p><code>u</code>ï¼šæ’¤é”€æ“ä½œ</p><p><code>Ctrl+r</code>ï¼šåå‘æ’¤é”€</p><p>è¯¾åç»ƒä¹ ï¼š</p><ul><li>å¦‚ä½•æ‰¹é‡æ›¿æ¢å¤šä¸ªæ–‡ä»¶ä¸­çš„åŒ¹é…å‘¢ï¼Ÿ</li><li>å»¶ä¼¸ï¼šä½¿ç”¨æ’ä»¶æ¥æ‰¹é‡æœç´¢æ›¿æ¢å¤šä¸ªæ–‡ä»¶ä¸­çš„åŒ¹é…</li></ul><h3 id="2-7-Vim-å¤šæ–‡ä»¶æ“ä½œ-15-01"><a href="#2-7-Vim-å¤šæ–‡ä»¶æ“ä½œ-15-01" class="headerlink" title="2-7 Vim å¤šæ–‡ä»¶æ“ä½œ (15:01)"></a>2-7 Vim å¤šæ–‡ä»¶æ“ä½œ (15:01)</h3><p>Buffer Window Tabï¼š</p><ul><li><p>Bufferæ˜¯æŒ‡æ‰“å¼€çš„ä¸€ä¸ªæ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒº</p></li><li><p>Windowæ˜¯Bufferå¯è§†åŒ–çš„åˆ†å‰²åŒºåŸŸ</p></li><li><p>Tabå¯ä»¥ç»„ç»‡Windowä¸ºä¸€ä¸ªå·¥ä½œåŒº</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gg91qg8bj31dh0u0qag.jpg" alt="Buffer Window Tab" style="zoom:40%;" /></li></ul><p>Bufferï¼ˆç¼“å†²åŒºï¼‰</p><ul><li>Vimæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åä¼šåŠ è½½æ–‡ä»¶å†…å®¹åˆ°ç¼“å†²åŒº</li><li>ä¹‹åçš„ä¿®æ”¹éƒ½æ˜¯é’ˆå¯¹å†…å­˜ä¸­çš„ç¼“å†²åŒºï¼Œå¹¶ä¸ä¼šç›´æ¥ä¿å­˜åˆ°æ–‡ä»¶</li><li>ç›´åˆ°æ‰§è¡Œ<code>:w</code>ï¼ˆwriteï¼‰çš„æ—¶å€™æ‰ä¼šæŠŠä¿®æ”¹çš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶é‡Œ</li></ul><p>Bufferåˆ‡æ¢</p><ul><li>ä½¿ç”¨<code>:ls</code>ä¼šåˆ—ä¸¾å‡ºå½“å‰ç¼“å†²åŒºï¼Œç„¶åä½¿ç”¨<code>:b n</code>è·³è½¬åˆ°ç¬¬nä¸ªç¼“å†²åŒº</li><li><code>bpre</code>ã€<code>bnext</code>ã€<code>bfirst</code>ã€<code>blast</code></li><li><code>:b buffer_name</code>ã€<code>:b filename</code>ï¼Œ<code>tab</code>ä¼šè‡ªåŠ¨è¡¥å…¨<code>buffer_name</code></li></ul><p><code>:e b.txt</code>ï¼šç¼–è¾‘(edit)b.txt</p><p>Windowçª—å£ï¼š</p><ul><li>ä¸€ä¸ªç¼“å†²åŒºå¯ä»¥åˆ†å‰²æˆå¤šä¸ªçª—å£ï¼Œæ¯ä¸ªçª—å£ä¹Ÿå¯ä»¥æ‰“å¼€ä¸åŒçš„ç¼“å†²åŒº</li><li><code>&lt;Ctrl+w&gt;s</code>æ°´å¹³åˆ†å‰²ï¼Œ<code>&lt;Ctrl+w&gt;v</code>å‚ç›´åˆ†å‰²ã€‚æˆ–è€…<code>:sp</code>ã€<code>:vs</code></li><li>æ¯ä¸ªçª—å£å¯ä»¥ç»§ç»­è¢«æ— é™åˆ†å‰²ï¼ˆå±å¹•æ˜¯å¦è¶³å¤Ÿå¤§ï¼‰</li></ul><p>åˆ†å‰²çª—å£ç¤ºä¾‹ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gg933wfnj30vi0lqwfr.jpg" alt="Windowåˆ†å‰²çª—å£ç¤ºä¾‹" style="zoom:40%;" /><p>å¦‚ä½•åˆ‡æ¢çª—å£ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>&lt;Ctrl+w&gt;w</code></td><td>åœ¨çª—å£é—´å¾ªç¯åˆ‡æ¢</td></tr><tr><td><code>&lt;Ctrl+w&gt;h</code></td><td>åˆ‡æ¢åˆ°å·¦è¾¹çš„çª—å£</td></tr><tr><td><code>&lt;Ctrl+w&gt;j</code></td><td>åˆ‡æ¢åˆ°ä¸‹è¾¹çš„çª—å£</td></tr><tr><td><code>&lt;Ctrl+w&gt;k</code></td><td>åˆ‡æ¢åˆ°ä¸Šè¾¹çš„çª—å£</td></tr><tr><td><code>&lt;Ctrl+w&gt;l</code></td><td>åˆ‡æ¢åˆ°å³è¾¹çš„çª—å£</td></tr></tbody></table><p><code>&lt;Ctrl+w&gt;L</code>ï¼šå°†å½“å‰çª—å£ç§»åŠ¨åˆ°å³è¾¹</p><p><code>&lt;Ctrl+w&gt;H</code>ï¼šå°†å½“å‰çª—å£ç§»åŠ¨åˆ°å·¦è¾¹</p><p>å¦‚ä½•é‡æ’çª—å£ï¼Ÿ</p><blockquote><p>é‡æ’çª—å£å¯ä»¥æ”¹å˜çª—å£çš„å¤§å°<code>:h window-resize</code>æŸ¥çœ‹æ–‡æ¡£</p></blockquote><table><thead><tr><th>å‘½ä»¤</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>&lt;Ctrl+w&gt;=</code></td><td>ä½¿æ‰€æœ‰çª—å£ç­‰å®½ã€ç­‰é«˜</td></tr><tr><td><code>&lt;Ctrl+w&gt;_</code></td><td>æœ€å¤§åŒ–æ´»åŠ¨çª—å£çš„é«˜åº¦</td></tr><tr><td>`&lt;Ctrl+w&gt;</td><td>`</td></tr><tr><td><code>[n] &lt;Ctrl+w&gt;_</code></td><td>æŠŠæ´»åŠ¨çª—å£çš„é«˜åº¦è®¾ä¸º[n]è¡Œ</td></tr><tr><td>`[n] &lt;Ctrl+w&gt;</td><td>`</td></tr></tbody></table><p>Tabï¼ˆæ ‡ç­¾é¡µï¼‰å°†çª—å£åˆ†ç»„</p><blockquote><p>Tabæ˜¯å¯ä»¥å®¹çº³ä¸€ç³»åˆ—çª—å£çš„å®¹å™¨<code>:h tabpage</code></p></blockquote><ul><li>Vimçš„Tabå’Œå…¶ä»–ç¼–è¾‘å™¨æœ‰æ‰€ä¸åŒï¼Œå¯ä»¥å°†å…¶æƒ³è±¡ä¸ºLinuxçš„è™šæ‹Ÿæ¡Œé¢</li><li>æ¯”å¦‚ä¸€ä¸ªTabå…¨ç”¨æ¥ç¼–è¾‘Pythonæ–‡ä»¶ï¼Œä¸€ä¸ªTabå…¨æ˜¯HTMLæ–‡ä»¶</li><li>ç›¸æ¯”çª—å£ï¼ŒTabä¸€èˆ¬ä½¿ç”¨è¾ƒå°‘ï¼ŒTabå¤ªå¤šç®¡ç†èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦</li></ul><p>Tabæ“ä½œ</p><table><thead><tr><th>å‘½ä»¤</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>:tabnew {filename}</code></td><td>åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€{filename}</td></tr><tr><td><code>:tabe[dit] {filename}</code></td><td>åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€{filename}</td></tr><tr><td><code>&lt;Ctrl+w&gt;T</code></td><td>æŠŠå½“å‰çª—å£ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°æ ‡ç­¾é¡µ</td></tr><tr><td><code>:tabc[lose]</code></td><td>å…³é—­å½“å‰æ ‡ç­¾é¡µåŠå…¶ä¸­çš„æ‰€æœ‰çª—å£</td></tr><tr><td><code>tabo[nly]</code></td><td>åªä¿ç•™æ´»åŠ¨æ ‡ç­¾é¡µï¼Œå…³é—­å…¶ä»–æ‰€æœ‰æ ‡ç­¾é¡µ</td></tr></tbody></table><p>Tabåˆ‡æ¢æ“ä½œ</p><table><thead><tr><th>Exå‘½ä»¤</th><th>æ™®é€šæ¨¡å¼å‘½ä»¤</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>:tabn[ext] {N}</code></td><td><code>{N} gt</code></td><td>åˆ‡æ¢åˆ°æ ‡ç­¾ä¸º{N}çš„æ ‡ç­¾é¡µ</td></tr><tr><td><code>:tabn[ext]</code></td><td><code>gt</code></td><td>åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ</td></tr><tr><td><code>tabp[revious]</code></td><td><code>gT</code></td><td>åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µ</td></tr></tbody></table><p><code>:vs c.txt</code>ï¼šå‚ç›´åˆ†å‰²æ‰“å¼€c.txt</p><p><code>:tabnew duck.py</code>ï¼šåœ¨æ–°çš„æ ‡ç­¾é¡µæ‰“å¼€duck.py</p><p>è¯¾åç»ƒä¹ </p><ul><li>å°è¯•æ‰“å¼€Vimä¸€æ¬¡æ“ä½œå¤šä¸ªæ–‡ä»¶</li><li>çª—å£åˆ†å‰²å¯ä»¥éå¸¸æ–¹ä¾¿çš„æŸ¥çœ‹ä»£ç ï¼Œæ¯”å¦‚æŸ¥çœ‹æ•´ä¸ªè°ƒç”¨é“¾</li><li>å»¶ä¼¸ï¼šæ’ä»¶ç¯‡ä¼šé…åˆ<code>ctrlp</code>æ’ä»¶å’Œ<code>nerdtree</code>å¿«é€Ÿæ“ä½œå¤šä¸ªæ–‡ä»¶</li></ul><h3 id="2-8-ä»€ä¹ˆæ˜¯-Vim-çš„-text-object-06-49"><a href="#2-8-ä»€ä¹ˆæ˜¯-Vim-çš„-text-object-06-49" class="headerlink" title="2-8 ä»€ä¹ˆæ˜¯ Vim çš„ text object (06:49)"></a>2-8 ä»€ä¹ˆæ˜¯ Vim çš„ text object (06:49)</h3><p>Text Objectï¼ˆæ–‡æœ¬å¯¹è±¡ï¼‰</p><ul><li>Vimé‡Œæ–‡æœ¬ä¹Ÿæœ‰å¯¹è±¡çš„æ¦‚å¿µï¼Œæ¯”å¦‚ä¸€ä¸ªå•è¯ã€ä¸€æ®µå¥å­ã€ä¸€ä¸ªæ®µè½</li><li>å¾ˆå¤šå…¶ä»–ç¼–è¾‘å™¨ç»å¸¸åªèƒ½æ“ä½œå•ä¸ªå­—ç¬¦æ¥ä¿®æ”¹æ–‡æœ¬ï¼Œæ¯”è¾ƒä½æ•ˆ</li><li>é€šè¿‡æ“ä½œæ–‡æœ¬å¯¹è±¡æ¥ä¿®æ”¹è¦æ¯”åªæ“ä½œå•ä¸ªå­—ç¬¦é«˜æ•ˆ</li></ul><p>æ–‡æœ¬å¯¹è±¡æ“ä½œæ–¹å¼</p><blockquote><p>ä¹‹å‰å·²ç»ä½¿ç”¨è¿‡æ–‡æœ¬å¯¹è±¡äº†ï¼Œæ¯”å¦‚<code>dw</code>åˆ é™¤ä¸€ä¸ªå•è¯</p></blockquote><ul><li><code>[number] &lt;command&gt; [text object]</code>ã€‚æ¬¡æ•°+å‘½ä»¤+æ–‡æœ¬å¯¹è±¡</li><li><code>number</code>è¡¨ç¤ºæ¬¡æ•°ï¼Œ<code>command</code>è¡¨ç¤ºå‘½ä»¤ï¼š<code>d</code>(delete)ã€<code>c</code>(chage)ã€<code>y</code>(yank)</li><li><code>text object</code>æ˜¯è¦æ“ä½œçš„æ–‡æœ¬å¯¹è±¡ï¼Œæ¯”å¦‚å•è¯<code>w</code>ã€å¥å­<code>s</code>ã€æ®µè½<code>p</code></li></ul><p><code>iw</code>ï¼šè¡¨ç¤ºinner wordã€‚<code>viw</code>å‘½ä»¤é¦–å…ˆ<code>v</code>è¿›å…¥é€‰æ‹©æ¨¡å¼ï¼Œ<code>iw</code>å°†é€‰ä¸­å½“å‰å•è¯</p><p><code>aw</code>ï¼šè¡¨ç¤ºaround wordã€‚å®ƒä¸ä½†ä¼šé€‰ä¸­å½“å‰å•è¯ï¼Œè¿˜ä¼šåŒ…å«å•è¯ä¹‹åçš„ç©ºæ ¼</p><p><code>ci&quot;</code>ï¼šåˆ é™¤<code>&quot;&quot;</code>ä¸­çš„å†…å®¹ï¼Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ã€‚å¦å¤–è¿˜æœ‰<code>()</code>ã€<code>{}</code>ã€<code>[]</code>ç­‰ã€‚</p><p>è¯¾åç»ƒä¹ </p><blockquote><p>æ‘†è„±ä½æ•ˆçš„å­—ç¬¦æ“ä½œï¼Œä½¿ç”¨æ–‡æœ¬å¯¹è±¡æå‡æ•ˆç‡</p></blockquote><ul><li>å¦‚ä½•åˆ é™¤ä¸€ä¸ªå•è¯ï¼Ÿ</li><li>åœ¨Vimä¸­å°è¯•ä½¿ç”¨æ–‡æœ¬å¯¹è±¡å¿«é€Ÿå¢ã€åˆ ã€æ”¹ä¸€ä¸ªå•è¯</li><li>å»¶ä¼¸ï¼šæœ‰äº›æ’ä»¶æ‰©å±•äº†æ–‡æœ¬å¯¹è±¡ã€‚æ¯”å¦‚<code>vim-go</code>å¯ä»¥ä½¿ç”¨<code>f</code>è¡¨ç¤ºä¸€ä¸ªå‡½æ•°</li></ul><h3 id="2-9-Vimå¤åˆ¶ç²˜è´´ä¸å¯„å­˜å™¨çš„ä½¿ç”¨-16-51"><a href="#2-9-Vimå¤åˆ¶ç²˜è´´ä¸å¯„å­˜å™¨çš„ä½¿ç”¨-16-51" class="headerlink" title="2-9 Vimå¤åˆ¶ç²˜è´´ä¸å¯„å­˜å™¨çš„ä½¿ç”¨ (16:51)"></a>2-9 Vimå¤åˆ¶ç²˜è´´ä¸å¯„å­˜å™¨çš„ä½¿ç”¨ (16:51)</h3><p>Normalæ¨¡å¼å¤åˆ¶ç²˜è´´</p><ul><li><p>normalæ¨¡å¼ä¸‹å¤åˆ¶ç²˜è´´åˆ†åˆ«ä½¿ç”¨<code>y</code>(yank)å’Œ<code>p</code>(put)ï¼Œå‰ªè´´<code>d</code>å’Œ<code>p</code></p></li><li><p>å¯ä»¥ä½¿ç”¨<code>v</code>(visual)å‘½ä»¤é€‰ä¸­æ‰€è¦å¤åˆ¶çš„åœ°æ–¹ï¼Œç„¶åä½¿ç”¨<code>p</code>ç²˜è´´</p></li><li><p>é…åˆæ–‡æœ¬å¯¹è±¡ã€‚æ¯”å¦‚ä½¿ç”¨<code>viw</code>å¤åˆ¶ä¸€ä¸ªå•è¯ï¼Œ<code>yy</code>å¤åˆ¶ä¸€è¡Œ</p><p>Vimé‡Œçš„<strong>å‰ªè´´</strong>(cut)<strong>å¤åˆ¶</strong>(copy)<strong>ç²˜è´´</strong>(paste)åˆ†åˆ«æ˜¯<strong>delete</strong>/<strong>yank</strong>/<strong>put</strong></p></li></ul><p>Insertæ¨¡å¼ä¸‹çš„å¤åˆ¶ç²˜è´´</p><ul><li>å’Œå…¶ä»–æ–‡æœ¬ç¼–è¾‘å™¨ä¸€æ ·ï¼Œä½¿ç”¨<code>Ctrl+v</code>æˆ–è€…<code>cmd+v</code>ç²˜è´´ï¼Œä½†æ˜¯ç²˜è´´ä»£ç æœ‰ä¸ªå‘</li><li>å¾ˆå¤šäººåœ¨<code>.vimrc</code>ä¸­è®¾ç½®äº†<code>autoindent</code>ï¼Œç²˜è´´Pythonä»£ç ç¼©è¿›é”™ä¹±</li><li>è¿™ä¸ªæ—¶å€™éœ€è¦åœ¨ç²˜è´´å‰åä½¿ç”¨<code>:set paste</code>å’Œ<code>:set nopaste</code>è§£å†³ã€ä½¿ç”¨ç³»ç»Ÿå‰ªè´´æ¿å¯„å­˜å™¨<code>:&quot;</code>ä¹Ÿå¯ä»¥è§£å†³</li></ul><p>ä»€ä¹ˆæ˜¯Vimçš„å¯„å­˜å™¨ï¼Ÿ</p><ul><li>Vimé‡Œæ“ä½œçš„æ˜¯å¯„å­˜å™¨è€Œä¸æ˜¯ç³»ç»Ÿå‰ªè´´æ¿ã€‚</li><li>é»˜è®¤ä½¿ç”¨<code>d</code>åˆ é™¤æˆ–è€…<code>y</code>å¤åˆ¶çš„å†…å®¹éƒ½æ”¾åˆ°äº†â€œæ— åå¯„å­˜å™¨â€</li><li>ç”¨<code>x</code>åˆ é™¤ä¸€ä¸ªå­—ç¬¦æ”¾åˆ°æ— åå¯„å­˜å™¨ï¼Œç„¶å<code>p</code>ç²˜è´´ï¼Œå¯ä»¥è°ƒæ¢ä¸¤å­—ç¬¦</li></ul><p>æ·±å…¥å¯„å­˜å™¨ï¼ˆregisterï¼‰</p><blockquote><p>Vimä¸ä½¿ç”¨å•ä¸€å‰ªè´´æ¿è¿›è¡Œå‰ªè´´ã€å¤åˆ¶ä¸ç²˜è´´ï¼Œè€Œæ˜¯å¤šç»„å¯„å­˜å™¨</p></blockquote><ul><li>é€šè¿‡<code>&quot;{register}</code>å‰ç¼€å¯ä»¥æŒ‡å®šå¯„å­˜å™¨ï¼Œä¸æŒ‡å®šåˆ™é»˜è®¤ä½¿ç”¨æ— åå¯„å­˜å™¨</li><li>æ¯”å¦‚ä½¿ç”¨<code>&quot;ayiw</code>å¤åˆ¶ä¸€ä¸ªå•è¯åˆ°å¯„å­˜å™¨<code>a</code>ä¸­ï¼Œ<code>&quot;bdd</code>åˆ é™¤å½“å‰è¡Œåˆ°å¯„å­˜å™¨<code>b</code>ä¸­</li><li>Vimä¸­ï¼Œ<code>&quot;&quot;</code>è¡¨ç¤ºæ— åå¯„å­˜å™¨,ç¼ºçœä½¿ç”¨ï¼Œ<code>&quot;&quot;p</code>å…¶å®å°±ç­‰åŒäº<code>p</code>ã€‚<code>&quot;+</code>ç³»ç»Ÿå‰ªè´´æ¿ã€‚</li></ul><p><code>:reg a</code>ï¼šæŸ¥çœ‹å¯„å­˜å™¨<code>a</code></p><p>å…¶ä»–å¸¸è§å¯„å­˜å™¨</p><blockquote><p>é™¤äº†æœ‰åå¯„å­˜å™¨a-Zï¼ŒVimä¸­è¿˜æœ‰ä¸€äº›å…¶ä»–å¸¸è§å¯„å­˜å™¨</p></blockquote><ul><li><p>å¤åˆ¶ä¸“ç”¨å¯„å­˜å™¨<code>&quot;0</code>ï¼Œä½¿ç”¨<code>y</code>å¤åˆ¶æ–‡æœ¬åŒæ—¶ä¼šè¢«æ‹·è´åˆ°å¤åˆ¶å¯„å­˜å™¨<code>0</code></p></li><li><p>ç³»ç»Ÿå‰ªè´´æ¿<code>&quot;+</code>ï¼Œå¯ä»¥åœ¨å¤åˆ¶å‰åŠ ä¸Š<code>&quot;+</code>å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿ã€‚</p><p>æŸ¥çœ‹æ˜¯å¦å¼€å¯ç³»ç»Ÿå‰ªè´´æ¿ï¼š<code>:echo has(&#39;clipboard&#39;)</code></p><p>è®¾ç½®<code>:set clipboard=unnamed</code></p></li><li><p>å…¶ä»–å¯„å­˜å™¨ï¼Œæ¯”å¦‚<code>&quot;%</code>å½“å‰æ–‡ä»¶åï¼Œ<code>&quot;.</code>ä¸Šæ¬¡æ’å…¥çš„æ–‡æœ¬</p></li></ul><p><code>:e!</code>ï¼šèˆå¼ƒå½“å‰ä¿®æ”¹å¹¶é‡æ–°åŠ è½½æ–‡æœ¬å†…å®¹</p><p>è¯¾åç»ƒä¹ </p><blockquote><p>äº†è§£normal/insertæ¨¡å¼å¤åˆ¶ç²˜è´´çš„æ–¹æ³•ï¼Œå¸¸è§å¯„å­˜å™¨çš„ç”¨æ³•</p></blockquote><ul><li>æ‰¾ä¸€æ®µPythonä»£ç ï¼Œå°è¯•åœ¨Vimé‡Œç²˜è´´è¿›å…¥</li><li>è¯•è¯•å°†Vimä¸­çš„å†…å®¹å¤åˆ¶åˆ°ç³»ç»Ÿç²˜è´´æ¿</li><li>å°è¯•åœ¨æœåŠ¡å™¨çš„Vimé‡Œç²˜è´´ç³»ç»Ÿå‰ªè´´æ¿çš„å†…å®¹</li></ul><h3 id="2-10-Vim-å¦‚ä½•ç”¨å®å®Œæˆå¼ºå¤§çš„æ‰¹é‡æ“ä½œ-10-23"><a href="#2-10-Vim-å¦‚ä½•ç”¨å®å®Œæˆå¼ºå¤§çš„æ‰¹é‡æ“ä½œ-10-23" class="headerlink" title="2-10 Vim å¦‚ä½•ç”¨å®å®Œæˆå¼ºå¤§çš„æ‰¹é‡æ“ä½œ (10:23)"></a>2-10 Vim å¦‚ä½•ç”¨å®å®Œæˆå¼ºå¤§çš„æ‰¹é‡æ“ä½œ (10:23)</h3><p>ä»éœ€æ±‚è¯´èµ·</p><blockquote><p>ä»ä¸€ä¸ªéœ€æ±‚è¯´èµ·ï¼Œç»™å¤šè¡ŒURLé“¾æ¥åŠ ä¸ŠåŒå¼•å·</p></blockquote><pre><code>https://www.zhihu.com/question/54919485https://www.zhihu.com/explorehttps://www.zhihu.com/topichttps://www.zhihu.com/topic/19601308https://www.zhihu.com/topic/19607351https://www.zhihu.com/topic/19630716https://www.zhihu.com/topic/19637932https://www.zhihu.com/people/weikexin-67https://www.zhihu.com/questton/267339149/answer/325252706https://www.zhihu.com/question/267339149/answer/523371968https://www.zhihu.com/people/zhang-jia-hao-15https://www.zhihu.com/question/48510028https://www.zhihu.com/question/267339149/answer/323414411https://www.zhihu.com/people/ming-ming 0701https://www.zhihu.com/question/267339149/answer/519709724https://www.zhihu.com/question/answer/519709724https://www.zhihu.com/question/22897152https://www.zhihu.com/question/22130215https://www.zhihu.com/question/19823813</code></pre><p>ä»€ä¹ˆæ˜¯Vimå®ï¼ˆmacroï¼‰</p><ul><li>å®å¯ä»¥çœ‹æˆæ˜¯ä¸€ç³»åˆ—å‘½ä»¤çš„é›†åˆ</li><li>å¯ä»¥ä½¿ç”¨å®ã€Œå½•åˆ¶ã€ä¸€ç³»åˆ—æ“ä½œï¼Œç„¶åç”¨äºã€Œå›æ”¾ã€</li><li>å®å¯ä»¥éå¸¸æ–¹ä¾¿åœ°æŠŠä¸€ç³»åˆ—å‘½ä»¤ç”¨åœ¨å¤šè¡Œæ–‡æœ¬ä¸Š</li></ul><p>å¦‚ä½•ä½¿ç”¨å®</p><blockquote><p>å®çš„ä½¿ç”¨åˆ†ä¸ºå½•åˆ¶å’Œå›æ”¾ï¼Œä¸æ‹ç”µå½±ç±»ä¼¼ã€‚</p></blockquote><ul><li>Vimä½¿ç”¨<code>q</code>æ¥å½•åˆ¶ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä½¿ç”¨<code>q</code>ç»“æŸå½•åˆ¶</li><li>ä½¿ç”¨<code>q{register}</code>é€‰æ‹©è¦ä¿å­˜çš„å¯„å­˜å™¨ï¼ŒæŠŠå½•åˆ¶çš„å‘½ä»¤ä¿å­˜å…¶ä¸­</li><li>ä½¿ç”¨<code>@{register}</code>å›æ”¾å¯„å­˜å™¨ä¸­ä¿å­˜çš„ä¸€ç³»åˆ—å‘½ä»¤</li></ul><p>ä½¿ç”¨å®è§£å†³æå‡ºçš„é—®é¢˜</p><ul><li><p>å…ˆç»™ä¸€è¡ŒåŠ ä¸ŠåŒå¼•å·ï¼Œç„¶åå†å›æ”¾åˆ°å…¶ä»–æ‰€æœ‰è¡Œ</p></li><li><p>å…ˆä½¿ç”¨<code>q</code>å¼€å§‹å½•åˆ¶ï¼Œç»™ä¸€è¡ŒåŠ ä¸ŠåŒå¼•å·ï¼Œä¹‹åä½¿ç”¨<code>q</code>é€€å‡º</p></li><li><p>åœ¨å‰©ä¸‹æ‰€æœ‰è¡Œä¸­å›æ”¾å½•åˆ¶çš„å®</p><p>å½•åˆ¶ï¼š</p><pre><code class="shell">qaI&quot;&lt;Esc&gt;A&quot;&lt;Esc&gt;jq</code></pre><p>è°ƒç”¨æ–¹å¼ä¸€ï¼š</p><pre><code>10@a</code></pre><p>è°ƒç”¨æ–¹å¼äºŒï¼š</p><pre><code>VGG:normal @a</code></pre></li></ul><p>è¯¾åç»ƒä¹ </p><blockquote><p>çŸ¥é“ä»€ä¹ˆæ˜¯å®ï¼Œå¦‚ä½•ä½¿ç”¨å®å®Œæˆæ—¥å¸¸éœ€æ±‚</p></blockquote><ul><li>æƒ³è±¡ä¸€ä¸‹ç¼–è¾‘ä»£ç æˆ–è€…æ–‡æœ¬ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°å®ï¼Ÿ</li><li>æƒ³ä¸€ä¸‹è¿˜æœ‰æ²¡æœ‰å…¶ä»–æ–¹å¼æ¥å®Œæˆè¿™ä¸ªæ‰¹é‡åŠ å¼•å·çš„ç¼–è¾‘éœ€æ±‚</li><li>å°è¯•äº²è‡ªæ“ä½œä¸€ä¸‹å®å‘½ä»¤ç¼–è¾‘ã€‚</li></ul><h3 id="2-11-Vim-è¡¥å…¨å¤§æ³•-07-33"><a href="#2-11-Vim-è¡¥å…¨å¤§æ³•-07-33" class="headerlink" title="2-11 Vim è¡¥å…¨å¤§æ³• (07:33)"></a>2-11 Vim è¡¥å…¨å¤§æ³• (07:33)</h3><p>ä»€ä¹ˆæ˜¯è¡¥å…¨ï¼Ÿ</p><blockquote><p>åªè¦æ‰‹é€Ÿå¿«ï¼Œè¡¥å…¨ä»€ä¹ˆçš„éƒ½æ˜¯æµ®äº‘ã€‚</p></blockquote><ul><li>è¡¥å…¨æ˜¯æ ¹æ®å½“å‰ç¯å¢ƒä¸Šä¸‹æ–‡ç”±ç¼–è¾‘å™¨ã€ŒçŒœã€ç”¨æˆ·æƒ³è¦è¾“å…¥çš„å†…å®¹</li><li>æ¯”å¦‚è¡¥å…¨ä¸€ä¸ªå•è¯ã€æ–‡ä»¶åï¼Œæˆ–è€…ä»£ç ä¸­çš„å‡½æ•°åã€å˜é‡åç­‰</li><li>Vimä¸­æä¾›äº†å¤šç§è¡¥å…¨åŠŸèƒ½ï¼Œè¿˜å¯ä»¥ç”±æ’ä»¶æ‰©å±•åŠŸèƒ½å®ç°ä»£ç è¡¥å…¨</li></ul><p>Vimä¸­å¸¸è§çš„è¡¥å…¨ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>è¡¥å…¨ç±»å‹</th></tr></thead><tbody><tr><td><code>&lt;C-n&gt;</code></td><td>æ™®é€šå…³é”®å­—</td></tr><tr><td><code>&lt;C-x&gt;&lt;C-n&gt;</code></td><td><strong>å½“å‰ç¼“å†²åŒºå…³é”®å­—</strong></td></tr><tr><td><code>&lt;C-x&gt;&lt;C-i&gt;</code></td><td>åŒ…å«æ–‡ä»¶å…³é”®å­—</td></tr><tr><td><code>&lt;C-x&gt;&lt;C-]&gt;</code></td><td>æ ‡ç­¾æ–‡ä»¶å…³é”®å­—</td></tr><tr><td><code>&lt;C-x&gt;&lt;C-k&gt;</code></td><td>å­—å…¸æŸ¥æ‰¾</td></tr><tr><td><code>&lt;C-x&gt;&lt;C-l&gt;</code></td><td>æ•´è¡Œè¡¥å…¨</td></tr><tr><td><code>&lt;C-x&gt;&lt;C-f&gt;</code></td><td><strong>æ–‡ä»¶åè¡¥å…¨</strong></td></tr><tr><td><code>&lt;C-x&gt;&lt;C-o&gt;</code></td><td><strong>å…¨èƒ½ï¼ˆOmniï¼‰è¡¥å…¨</strong></td></tr></tbody></table><p><strong>å¸¸è§çš„ä¸‰ç§è¡¥å…¨ç±»å‹ï¼š</strong></p><ul><li><p>ä½¿ç”¨<code>&lt;Ctrl+n&gt;</code>å’Œ<code>&lt;Ctrl+p&gt;</code>è¡¥å…¨å•è¯</p><p><code>Ctrl+n</code>ï¼šn(next)ä»£è¡¨ä¸‹ä¸€ä¸ªè¡¥å…¨çš„é€‰é¡¹</p><p><code>Ctrl+p</code>ï¼šp(previous)ä»£è¡¨ä¸Šä¸€ä¸ªè¡¥å…¨çš„é€‰é¡¹</p></li><li><p>ä½¿ç”¨<code>&lt;Ctrl+x&gt;</code>+<code>&lt;Ctrl+f&gt;</code>è¡¥å…¨æ–‡ä»¶å</p><p><code>Ctrl+w</code>ï¼šå›åˆ ä¸€ä¸ªå•è¯</p></li><li><p>ä½¿ç”¨<code>&lt;Ctrl+x&gt;</code>å’Œ<code>&lt;Ctrl+o&gt;</code>è¡¥å…¨ä»£ç ï¼Œéœ€è¦å¼€å¯æ–‡ä»¶ç±»å‹æ£€æŸ¥ï¼Œå®‰è£…æ’ä»¶</p><p><code>:filetype on</code>ï¼šå¼€å¯æ–‡ä»¶ç±»å‹æ£€æŸ¥</p><p><code>:set filetype</code>ï¼šæŸ¥çœ‹å½“å‰æ–‡ä»¶ç±»å‹</p></li></ul><p><code>:r! echo %</code>ï¼šå½“å‰æ–‡ä»¶åï¼ˆæ–‡ä»¶åï¼‰ã€‚<code>&quot;%p</code>ä¹Ÿå¯è¾“å‡ºæ–‡ä»¶å</p><p><code>:r! echo %:p</code>ï¼šå½“å‰æ–‡ä»¶åç§°ï¼ˆæ–‡ä»¶è·¯å¾„+æ–‡ä»¶åï¼‰</p><p>For more infoï¼š</p><pre><code>:help read:help filename-modifiers</code></pre><p>è¯¾åç»ƒä¹ ï¼š</p><blockquote><p>çŸ¥é“å¦‚ä½•åœ¨Vimä¸­ä½¿ç”¨è¡¥å…¨ï¼Œè¡¥å…¨çš„å‡ ç§å¸¸è§ç±»å‹</p></blockquote><ul><li>å°è¯•ä½¿ç”¨Vimä¸­çš„è¡¥å…¨æ–¹å¼æ¥è¡¥å…¨å•è¯</li><li>åœ¨Vimä¸­è¾“å…¥æ–‡ä»¶åçš„æ—¶å€™å°è¯•è¡¥å…¨ï¼Œæƒ³æƒ³å¦‚ä½•è¾“å…¥ç°æœ‰çš„æ–‡ä»¶åï¼Ÿ</li><li>å»¶ä¼¸ï¼šç›®å‰è¡¥å…¨éƒ½æ˜¯åŸºäºæ–‡æœ¬åŒ¹é…çš„ï¼Œæ’ä»¶å¯æ˜¯å®ç°ä»£ç è¡¥å…¨ã€‚</li></ul><h3 id="2-12-ç»™-Vim-æ¢ä¸ªé…è‰²-06-32"><a href="#2-12-ç»™-Vim-æ¢ä¸ªé…è‰²-06-32" class="headerlink" title="2-12 ç»™ Vim æ¢ä¸ªé…è‰² (06:32)"></a>2-12 ç»™ Vim æ¢ä¸ªé…è‰² (06:32)</h3><p>Vimæ›´æ¢é¢œè‰²</p><ul><li>ä½¿ç”¨<code>:colorscheme</code>æ˜¾ç¤ºå½“å‰çš„ä¸»é¢˜é…è‰²ï¼Œé»˜è®¤æ˜¯<code>default</code></li><li>ä½¿ç”¨<code>:colorscheme &lt;Ctrl+d&gt;</code>å¯ä»¥æ˜¾ç¤ºæ‰€æœ‰çš„é…è‰²</li><li>æœ‰ä¸­æ„çš„é…è‰²åï¼Œä½¿ç”¨<code>:colorscheme é…è‰²å</code>å°±å¯ä»¥ä¿®æ”¹é¢œè‰²</li></ul><p><code>vim duck.go duck.py -O</code>ï¼šæ‰“å¼€ä¸¤ä¸ªæ–‡ä»¶å¹¶å‚ç›´åˆ†å‰²ã€‚åœ¨ä¸€ä¸ªçª—å£çš„ä¸€ä¸ªTabé¡µä¸­</p><p>ä»ç½‘ä¸Šä¸‹è½½é…è‰²</p><blockquote><p>é»˜è®¤çš„é…è‰²æ²¡æœ‰å–œæ¬¢çš„æ€ä»¬åŠï¼Ÿ</p></blockquote><ul><li><p>ä»ç½‘ç»œä¸Šå¯»æ‰¾æ›´å¥½çœ‹çš„é…è‰²</p></li><li><p><a href="http://github.com/flazz/vim-colorschemes" target="_blank" rel="noopener">http://github.com/flazz/vim-colorschemes</a></p><p><a href="http://github.com/w0ng/vim-hybrid" target="_blank" rel="noopener">http://github.com/w0ng/vim-hybrid</a></p></li><li><p>å®‰è£…ä¹‹åå°±æœ‰å¤§é‡çš„ä¸»é¢˜å¯ä»¥æ›´æ¢äº†</p><pre><code>git clone https://github.com/w0ng/vim-hybrid.gitmkdir -p ~/.vim/colorscp vim-hybrid/colors/hybrid.vim ~/.vim/colors</code></pre></li></ul><p>è¯¾åç»ƒä¹ </p><ul><li>å°è¯•æ›´æ”¹Vimçš„é…è‰²æ–¹æ¡ˆï¼Œæƒ³è¦æŒä¹…åŒ–é…ç½®éœ€è¦å†™åˆ°<code>.vimrc</code>ä¸­</li><li>åœ¨ç½‘ä¸Šé€‰ä¸€ä¸ªå–œæ¬¢çš„é…è‰²æ–¹æ¡ˆï¼Œä¸‹è½½å¹¶ä½¿ç”¨å®ƒï¼Œæ¯”å¦‚<code>hybird</code></li><li>ä¸‹è½½å¤šä¸ªé…è‰²æ–¹æ¡ˆåˆ°<code>.vim/colors</code>å¹¶ä¸”éšæ—¶æ›´æ¢</li></ul><h3 id="2-13-æœ¬ç« å°ç»“ï¼šè£¸-Vim-ä¹Ÿå¾ˆå¼º-02-37"><a href="#2-13-æœ¬ç« å°ç»“ï¼šè£¸-Vim-ä¹Ÿå¾ˆå¼º-02-37" class="headerlink" title="2-13 æœ¬ç« å°ç»“ï¼šè£¸ Vim ä¹Ÿå¾ˆå¼º (02:37)"></a>2-13 æœ¬ç« å°ç»“ï¼šè£¸ Vim ä¹Ÿå¾ˆå¼º (02:37)</h3><p>è£¸çš„Vim</p><blockquote><p>æœ¬èŠ‚æ²¡ä½¿ç”¨é…ç½®è¿‡çš„Vimï¼Œè€Œæ˜¯ç”¨è£¸çš„Vimæ¼”ç¤ºï¼Œç›®çš„ä½•åœ¨ï¼Ÿ</p></blockquote><ul><li>å¾ˆå¤šåˆå­¦è€…VimåŸºæœ¬å‘½ä»¤éƒ½ä¸ç†Ÿç»ƒå°±å¼€å§‹æ‰¾ä¸€äº›å¤æ‚çš„å¼ºå¤§é…ç½®</li><li>ä¸åˆ©äºç†Ÿæ‚‰Vimï¼Œä¸€æ—¦å‡ºé—®é¢˜äº†è¿˜ä¸çŸ¥é“æ€ä»¬ä¿®å¤</li><li>å»ºè®®åˆå­¦è€…ä»è£¸çš„Vimå¼€å§‹å­¦ä¹ ã€‚æœ‰äº›åœºæ™¯ï¼Œæ¯”å¦‚æœåŠ¡å™¨æˆ–è€…å®¹å™¨ä¸Šæ— æ³•é…ç½®Vim</li></ul><p>è£¸çš„Vimä¹Ÿå¾ˆå¼º</p><blockquote><p>å­¦ä¹ Vimä¹‹å‰ï¼Œå…ˆç”¨æ­£ç¡®æ‰“å­—æŒ‡æ³•å’Œç›²æ‰“</p></blockquote><ul><li>ç¼–è¾‘ä»£ç ï¼Œè„‘å­ğŸ§ ä¸€èˆ¬æ¯”æ‰‹ğŸ‘‹å¿«ï¼Œç›²æ‰“æœ‰åˆ©äºè·Ÿä¸Šä½ çš„å¤§è„‘é€Ÿåº¦</li><li>è£¸çš„Vimä¹Ÿæœ‰å¾ˆå¤šå¼ºå¤§çš„åŠŸèƒ½å’Œä½¿ç”¨æ–¹å¼</li><li>å­¦ä¼šäº†ä½¿ç”¨Vimï¼Œå¯ä»¥åœ¨ä»»ä½•IDEä¸Šå®‰è£…Vimæ’ä»¶ï¼Œå‡ ä¹æ‰€æœ‰æµè¡Œçš„ç¼–è¾‘å™¨å’ŒIDEå·¥å…·éƒ½æ”¯æŒVimæ’ä»¶</li></ul><p>ä¸‹ä¸€æ­¥è¯¥å­¦ä¹ ä»€ä¹ˆï¼Ÿ</p><blockquote><p>å‰ææ˜¯å·²ç»æ— éšœç¢ä½¿ç”¨Vimï¼Œå¹¶ä¸”æ²¡æœ‰é‚£ä¹ˆç—›è‹¦çº ç»“äº†ã€‚</p></blockquote><ul><li>å­¦ä¹ <strong>Vimé…ç½®</strong>ï¼Œæˆ‘çš„Vimæˆ‘åšä¸»</li><li>Vimä¹Ÿåœ¨ä¸æ—¶ä¿±è¿›ï¼Œæ¢ç´¢å­¦ä¹ å„ç§ç‚«é…·å’Œæ–¹ä¾¿çš„<strong>æ’ä»¶</strong></li><li>ç”¨ä¸­å­¦ï¼Œå­¦ä¸­ç”¨ã€‚æ…¢æ…¢å°±æœ‰äº†è‚Œè‚‰è®°å¿†</li></ul><h2 id="ç¬¬3ç« -ç¼–å†™-Vim-é…ç½®ï¼Œæˆ‘çš„-Vim-æˆ‘åšä¸»"><a href="#ç¬¬3ç« -ç¼–å†™-Vim-é…ç½®ï¼Œæˆ‘çš„-Vim-æˆ‘åšä¸»" class="headerlink" title="ç¬¬3ç«  ç¼–å†™ Vim é…ç½®ï¼Œæˆ‘çš„ Vim æˆ‘åšä¸»"></a>ç¬¬3ç«  ç¼–å†™ Vim é…ç½®ï¼Œæˆ‘çš„ Vim æˆ‘åšä¸»</h2><blockquote><p>å­¦ä¹ å¦‚ä½•ç¼–å†™Vim çš„é…ç½®æ–‡ä»¶ï¼Œè‡ªå®šä¹‰ Vimã€‚</p></blockquote><h3 id="3-1-ç¼–å†™-vim-é…ç½®ï¼Œæˆ‘çš„-vim-æˆ‘åšä¸»-17-09"><a href="#3-1-ç¼–å†™-vim-é…ç½®ï¼Œæˆ‘çš„-vim-æˆ‘åšä¸»-17-09" class="headerlink" title="3-1 ç¼–å†™ vim é…ç½®ï¼Œæˆ‘çš„ vim æˆ‘åšä¸» (17:09)"></a>3-1 ç¼–å†™ vim é…ç½®ï¼Œæˆ‘çš„ vim æˆ‘åšä¸» (17:09)</h3><p>ä»€ä¹ˆæ˜¯Vimé…ç½®</p><blockquote><p>ä»€ä¹ˆæ˜¯Vimçš„é…ç½®ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒå‘¢ï¼Ÿ</p></blockquote><ul><li>Vimé‡Œæœ‰éå¸¸å¤šå¸¸ç”¨çš„è®¾ç½®ï¼Œæ¯”å¦‚<code>:set number</code>è®¾ç½®è¡Œå·</li><li>ä¹‹å‰çš„ä½¿ç”¨éƒ½æ˜¯åœ¨Vimé‡Œä¸´æ—¶è®¾ç½®ï¼Œæ²¡æ³•æŒä¹…åŒ–ï¼Œæ¯æ¬¡æ‰“å¼€æ–‡ä»¶éƒ½éœ€è¦è®¾ç½®</li><li><code>.vimrc</code>æä¾›äº†ä¸€ç§æŒä¹…åŒ–é…ç½®çš„æ–¹å¼ï¼Œè®©ç”¨æˆ·è‡ªå®šä¹‰é…ç½®</li></ul><p>å¦‚ä½•ç¼–å†™Vimé…ç½®æ–‡ä»¶</p><ul><li>Linux/Unixä¸‹æ–°å»ºä¸€ä¸ªéšè—æ–‡ä»¶<code>vim ~/.vimrc</code></li><li>Windowsç³»ç»Ÿ<code>vim $MYVIMRC</code>ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡ç¼–è¾‘é…ç½®æ–‡ä»¶</li><li>æ¥ç€å°±å¯ä»¥å¼€å§‹è‡ªå®šä¹‰é…ç½®</li></ul><p>Vimé…ç½®éƒ½åŒ…å«ä»€ä¹ˆï¼Ÿ</p><ul><li>å¸¸ç”¨è®¾ç½®ã€‚æ¯”å¦‚ï¼š<code>set number</code>è®¾ç½®è¡Œå·ã€<code>colorscheme hybrid</code>è®¾ç½®ä¸»é¢˜</li><li>å¸¸ç”¨çš„Vimæ˜ å°„ã€‚æ¯”å¦‚ï¼š<code>noremap &lt;leader&gt;w :w&lt;cr&gt;</code>ä¿å­˜æ–‡ä»¶</li><li>è‡ªå®šä¹‰çš„<code>vimscript</code>å‡½æ•°(vimé«˜æ‰‹)å’Œæ’ä»¶çš„é…ç½®(æ’ä»¶ç¯‡)</li></ul><p>å¸¸ç”¨è®¾ç½®ï¼š</p><ul><li>å¯ä»¥æŠŠå¸¸ç”¨çš„è®¾ç½®å†™åˆ°<code>.vimrc</code>é‡Œï¼Œé¿å…æ¯æ¬¡æ‰“å¼€Vimé‡æ–°è®¾ç½®</li><li>æ¯”å¦‚è®¾ç½®è¡Œå·<code>set number</code>ã€è®¾ç½®ä¸»é¢˜<code>colorscheme hybrid</code></li><li>Vimé‡Œæœ‰éå¸¸å¤šçš„é…ç½®ï¼Œå¯ä»¥å‚è€ƒå¤§ä½¬çš„é…ç½®</li></ul><p>Vimä¸­çš„æ˜ å°„</p><blockquote><p>Vimä¸­çš„æ˜ å°„æ¯”è¾ƒå¤æ‚ï¼ŒæºäºVimæœ‰å¤šç§æ¨¡å¼</p></blockquote><ul><li>è®¾ç½®ä¸€ä¸‹<code>&lt;leader&gt;</code>é”®ï¼Œ<code>let mapleader = &#39;,&#39;</code>ï¼Œå¸¸ç”¨çš„æ˜¯é€—å·<code>,</code>æˆ–è€…ç©ºæ ¼<code>&lt;Space&gt;</code></li><li>æ¯”å¦‚ç”¨<code>inoremap &lt;leader&gt;w &lt;Esc&gt;:w&lt;cr&gt;</code>åœ¨æ’å…¥æ¨¡å¼ä¿å­˜</li><li>Vimä¸­çš„æ˜ å°„æ¦‚å¿µç¨å¾®å¤æ‚ï¼Œä½†æ˜¯éå¸¸å¼ºå¤§</li></ul><p>Tmuxä½¿ç”¨<code>Ctrl+B+%</code>å®ç°å‚ç›´åˆ†å‰²å±å¹•</p><p>â€‹    <code>zt</code>ï¼šå°†å…‰æ ‡æ‰€åœ¨è¡Œå®šä½äºå±å¹•é¡¶éƒ¨</p><p>â€‹    <code>zz</code>ï¼šå°†å…‰æ ‡æ‰€åœ¨è¡Œå®šä½äºå±å¹•ä¸­éƒ¨</p><p>â€‹    <code>jj</code>ï¼šæ˜ å°„<code>&lt;Esc&gt;</code>é”®ï¼Œé€€åˆ°æ™®é€šnormalæ¨¡å¼</p><p>â€‹    <code>:FormatJSON</code>ï¼šæ ¼å¼åŒ–JSONä»£ç </p><p>â€‹    <code>Ctrl+h/j/k/l</code>ï¼šæ˜ å°„<code>&lt;Ctrl-w&gt;+h/j/k/l</code>ï¼Œå…‰æ ‡åœ¨åˆ†å±çª—å£ä¸­ç§»åŠ¨</p><p>â€‹    <code>xp</code>ï¼šæ™®é€šæ¨¡å¼ä¸‹ï¼Œå¯¹è°ƒå­—ç¬¦</p><p>â€‹    <code>:h option-list</code>ï¼šæŸ¥çœ‹æŒ‡ä»¤åˆ—è¡¨</p><p>Vimæ’ä»¶</p><blockquote><p>ç°ä»£åŒ–çš„Vimå¯ä»¥é€šè¿‡Vimæ’ä»¶ç®¡ç†å™¨å®‰è£…æ’ä»¶</p></blockquote><ul><li>é€šè¿‡æ’ä»¶ç”¨æˆ·å¯ä»¥æ— é™æ‰©å……Vimçš„åŠŸèƒ½</li><li>æƒ³è¦ä½¿ç”¨æ’ä»¶éœ€è¦å…·å¤‡ä¸€å®šçš„Vimé…ç½®çŸ¥è¯†</li></ul><p>Vimè„šæœ¬</p><blockquote><p>Vimæœ‰è‡ªå·±çš„è„šæœ¬è¯­è¨€<code>Vimscript</code></p></blockquote><ul><li>Vimè„šæœ¬å¯¹äºVimé«˜çº§ç©å®¶æ¥è¯´å¯ä»¥å®ç°å¼ºå¤§çš„Vimæ’ä»¶</li><li>åˆå­¦è€…çŸ¥é“æœ‰è¿™ä¸ªæ¦‚å¿µå°±å¥½ï¼ŒVimè„šæœ¬æ˜¯ä¸€ç§ç®€å•çš„è„šæœ¬è¯­è¨€</li><li>å¯ä»¥é€šè¿‡<code>vimscript</code>å®ç°æ›´å¤šVimçš„æ§åˆ¶ï¼Œå¼€å‘è‡ªå·±çš„æ’ä»¶</li></ul><p>è¯¾åç»ƒä¹ </p><blockquote><p>æŒæ¡Vimé…ç½®éœ€è¦å¯¹Vimæœ¬èº«å¾ˆç†Ÿæ‚‰</p></blockquote><ul><li><p>å°è¯•è‡ªå·±å»ºç«‹ä¸€ä¸ª<code>~/.vimrc</code>æ–‡ä»¶ï¼ŒåŠ å…¥å¸¸è§çš„è®¾ç½®é€‰é¡¹</p></li><li><p>ç ”ç©¶ä¸€ä¸‹GitHubä¸Š<code>vim-go</code>æ•™ç¨‹<code>vim-go-tutoial</code>çš„<code>.vimrc</code>æ–‡ä»¶</p><p><a href="https://github.com/fatih/vim-go-tutorial/blob/master/vimrc" target="_blank" rel="noopener">https://github.com/fatih/vim-go-tutorial/blob/master/vimrc</a></p></li><li><p>æ‹¿æ¥ä¸»ä¹‰ã€ç½‘ä¸Šã€å¾ˆå¤šäººå¼€æºäº†è‡ªå·±çš„é…ç½®(dotfiles)å¯å‚è€ƒå­¦ä¹ </p><p><strong>é€šè¿‡æŠŠ<code>.vimrc</code>é…ç½®æ–‡ä»¶æ”¾åˆ°gitç‰ˆæœ¬åº“å¯ä»¥åŒæ­¥åˆ°å…¶ä»–ç”µè„‘æˆ–è€…æœåŠ¡å™¨ä¸Š</strong></p></li></ul><p>è¯¾ç¨‹è®²å¸ˆçš„<code>.vimrc</code>æ–‡ä»¶ï¼š</p><pre><code class="shell">&quot; å¸¸ç”¨è®¾ç½®&quot; è®¾ç½®è¡Œå·set numbercolorscheme hybrid&quot; æŒ‰F2è¿›å…¥ç²˜è´´æ¨¡å¼set pastetoggle=&lt;F2&gt;&quot; é«˜äº®æœç´¢set hlsearch&quot; è®¾ç½®æŠ˜å æ–¹å¼set foldmethod=indent&quot; ä¸€äº›æ–¹ä¾¿çš„æ˜ å°„let mapleader=&#39;,&#39;let g:mapleader=&#39;,&#39;&quot; ä½¿ç”¨ jj è¿›å…¥ normalæ¨¡å¼inoremap jj &lt;Esc&gt;`^&quot; ä½¿ç”¨ &lt;leader&gt;+w ç›´æ¥ä¿å­˜inoremap &lt;leader&gt;w &lt;Esc&gt;:w&lt;cr&gt;noremap &lt;leader&gt;w :w&lt;cr&gt;&quot; åˆ‡æ¢ buffernnoremap &lt;silent&gt; [p :bprevious&lt;cr&gt;nnoremap &lt;silent&gt; [n :bnext&lt;cr&gt;&quot; use ctrl+h/j/k/l switch windownoremap &lt;C-h&gt; &lt;C-w&gt;hnoremap &lt;C-j&gt; &lt;C-w&gt;jnoremap &lt;C-k&gt; &lt;C-w&gt;knoremap &lt;C-l&gt; &lt;C-w&gt;l&quot; Sudo to writecnoremap w!! w !sudo tee % &gt;/dev/null&quot; json æ ¼å¼åŒ–com! FormatJSON %!python3 -m json.tool&quot; æ’ä»¶è®¾ç½®ï¼Œè¿™é‡Œä½¿ç”¨äº† vim-plugcall plug#begin(&#39;~/.vim/plugged&#39;)&quot; å®‰è£…æ’ä»¶åªéœ€è¦æŠŠ github åœ°å€æ”¾åˆ°è¿™é‡Œé‡å¯åæ‰§è¡Œ :PlugInstall å°±å¥½äº†Plug &#39;mhinz/vim-startify&#39;Plug &#39;scrooloose/nerdtree&#39;call plug#end()&quot; æ’ä»¶ç›¸å…³é…ç½®&quot; ç¦æ­¢ stratify è‡ªåŠ¨åˆ‡æ¢ç›®å½•let g:startify_change_to_dir = 0&quot; nerdtreenmap ,v :NERDTreeFind&lt;cr&gt;nmap ,g :NERDTreeToggle&lt;cr&gt;&quot; å®šä¹‰å‡½æ•°SetTitleï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´func SetTitle()    if &amp;filetype == &#39;python&#39;        call setline(1, &quot;\#!/usr/bin/env python&quot;)        call setline(2, &quot;\# -*- coding:utf-8 -*-&quot;)        normal G        normal o        normal o        call setline(5, &quot;if __name__ == &#39;__main__&#39;:&quot;)        call setline(6, &quot;    pass&quot;)    endifendfunc</code></pre><h3 id="3-2-Vim-æ˜ å°„è¿·äººçœ¼-14-53"><a href="#3-2-Vim-æ˜ å°„è¿·äººçœ¼-14-53" class="headerlink" title="3-2 Vim æ˜ å°„è¿·äººçœ¼ (14:53)"></a>3-2 Vim æ˜ å°„è¿·äººçœ¼ (14:53)</h3><p>ä»€ä¹ˆæ˜¯Vimæ˜ å°„</p><blockquote><p>Vimæ˜ å°„å°±æ˜¯æŠŠã€Œä¸€ä¸ªæ“ä½œã€æ˜ å°„åˆ°ã€Œå¦ä¸€ä¸ªæ“ä½œã€</p></blockquote><ul><li>å¦‚æœä½ ä¸æ»¡æ„ç°åœ¨çš„æŒ‰é”®è®¾ç½®ï¼Œæ¯”å¦‚Vimæœ¬æ¥çš„å‘½ä»¤</li><li>æˆ–è€…æƒ³è¦æ˜ å°„ä¸€äº›æ–¹ä¾¿çš„å¿«æ·é”®</li><li>æŒ‰ç…§ç”¨æˆ·æ„æ„¿å®šåˆ¶Vim</li></ul><p>åŸºæœ¬æ˜ å°„</p><blockquote><p>åŸºæœ¬æ˜ å°„æŒ‡çš„æ˜¯åœ¨æ™®é€šnormalæ¨¡å¼ä¸‹çš„æ˜ å°„ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–æ¨¡å¼çš„æ˜ å°„</p></blockquote><ul><li><p>ä½¿ç”¨<code>map</code>å°±å¯ä»¥å®ç°æ˜ å°„ã€‚æ¯”å¦‚ï¼š<code>:map - x</code>æŒ‰<code>-</code>å°±ä¼šåˆ é™¤å­—ç¬¦</p><p>å–æ¶ˆ<code>map</code>æ˜ å°„ä½¿ç”¨<code>:unmap -</code></p></li><li><p><strong><code>:map &lt;space&gt; viw</code>æŒ‰ç©ºæ ¼é”®<code>&lt;space&gt;</code>å°±ä¼šé€‰ä¸­å…‰æ ‡æ‰€åœ¨çš„æ•´ä¸ªå•è¯</strong></p></li><li><p><code>:map &lt;C-d&gt; dd</code>æŒ‰<code>Ctrl+d</code>æ‰§è¡Œ<code>dd</code>åˆ é™¤ä¸€è¡Œ</p></li></ul><p>æ¨¡å¼æ˜ å°„</p><blockquote><p>Vimå¸¸ç”¨æ¨¡å¼normal/visual/insertéƒ½å¯ä»¥å®šä¹‰æ˜ å°„</p></blockquote><ul><li><p>ç”¨<code>nmap</code>/<code>vmap</code>/<code>imap</code>å®šä¹‰æ˜ å°„,åªåœ¨normal/visual/insertåˆ†åˆ«æœ‰æ•ˆ</p></li><li><p><code>:vmap \ U</code>ï¼šæŠŠåœ¨visualæ¨¡å¼ä¸‹é€‰ä¸­çš„æ–‡æœ¬å¤§å°å†™(u(å°å†™)/U(å¤§å†™)è½¬åŒ–å¤§å°å†™)</p></li><li><p>æƒ³æƒ³å¦‚ä½•åœ¨insertæ¨¡å¼ä¸‹æ˜ å°„<code>Ctrl+d</code>æ¥åˆ é™¤ä¸€è¡Œ</p><p><code>:imap &lt;C-d&gt; &lt;Esc&gt;ddi</code></p></li></ul><p><strong>ç°æœ‰æ˜ å°„çš„é—®é¢˜ï¼Ÿ</strong></p><blockquote><pre><code>:nmap - dd:nmap \ -</code></pre><p>å½“æŒ‰ä¸‹<code>\</code>æ—¶ï¼ŒVimä¼šè§£æ<code>\</code>ä¸º<code>-</code>ï¼›å› ä¸ºåˆæ˜ å°„äº†<code>-</code>ï¼ŒVimä¼šç»§ç»­è§£æ<code>-</code>ä¸º<code>dd</code>ï¼Œå³æœ€ç»ˆæŒ‰ä¸‹<code>\</code>ä¼šåˆ é™¤æ•´è¡Œã€‚ï¼ˆç±»ä¼¼äºé€’å½’è§£ææ˜ å°„ï¼‰</p></blockquote><p>é€’å½’æ˜ å°„å’Œéé€’å½’æ˜ å°„</p><blockquote><p><strong><code>*map</code>ç³»åˆ—å‘½ä»¤æœ‰é€’å½’çš„é£é™©</strong></p></blockquote><ul><li>å¦‚æœç”¨æˆ·å®‰è£…äº†ä¸€ä¸ªæ’ä»¶ï¼Œæ’ä»¶æ˜ å°„äº†åŒä¸€ä¸ªæŒ‰é”®çš„ä¸åŒè¡Œä¸ºï¼Œæœ‰å†²çªå°±ä¼šæœ‰ä¸€ä¸ªå¤±æ•ˆ</li><li>æƒ³è¦ä¿è¯æ’ä»¶æ˜ å°„æ²¡æœ‰å†²çªä¼šéå¸¸ç—›è‹¦</li><li>è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨éé€’å½’æ˜ å°„</li></ul><p>éé€’å½’æ˜ å°„</p><blockquote><p>Vimæä¾›äº†éé€’å½’æ˜ å°„ï¼Œè¿™äº›å‘½ä»¤ä¸ä¼šé€’å½’è§£æ</p></blockquote><ul><li>ä½¿ç”¨<code>*map</code>å¯¹åº”çš„<code>nnoremap</code>/<code>vnoremap</code>/<code>inoremap</code></li><li>ä½•æ—¶ä½¿ç”¨é€’å½’æ˜ å°„<code>*map</code>ï¼Ÿä½•æ—¶ä½¿ç”¨éé€’å½’æ˜ å°„<code>*noremap</code>å‘¢ï¼Ÿ</li><li>ã€Œä»»ä½•ã€æ—¶å€™éƒ½åº”è¯¥ä½¿ç”¨éé€’å½’æ˜ å°„ï¼Œæ‹¯æ•‘è‡ªå·±åŒæ—¶ä¹Ÿæ‹¯æ•‘äº†æ’ä»¶ä½œè€…</li></ul><p><strong>``^<code>ï¼šå…‰æ ‡å›åˆ°æœ€åä¸€æ¬¡æ’å…¥æ¨¡å¼åœæ­¢æ—¶å…‰æ ‡çš„ä½ç½®ã€‚</code>:help <code>^</code>æŸ¥çœ‹å¸®åŠ©ã€‚</strong></p><p>è¯¾åç»ƒä¹ </p><ul><li><p>å°è¯•åœ¨<code>.vimrc</code>æ–‡ä»¶ä¸­å®šä¹‰ä¸€äº›æ˜ å°„ï¼Œæå‡å·¥ä½œæ•ˆç‡</p></li><li><p>å‚è€ƒä¸€äº›å¼€æºçš„Vimé…ç½®ï¼Œçœ‹çœ‹å“ªäº›æ˜ å°„å¯ä»¥æ‹¿æ¥ä½¿ç”¨</p></li><li><p>é˜…è¯»ã€Šç¬¨æ–¹æ³•å­¦Vimscriptã€‹ä¹¦ä¸­å…³äºæ˜ å°„çš„ç« èŠ‚ã€‚</p><p><a href="http://learnvimscriptthehardway.onefloweroneworld.com/" target="_blank" rel="noopener">http://learnvimscriptthehardway.onefloweroneworld.com/</a></p></li></ul><h3 id="3-3-æœ¬ç« å°ç»“ï¼šé…ç½®-Vimï¼Œè®©å¥¹æ›´é¡ºæ‰‹-01-16"><a href="#3-3-æœ¬ç« å°ç»“ï¼šé…ç½®-Vimï¼Œè®©å¥¹æ›´é¡ºæ‰‹-01-16" class="headerlink" title="3-3 æœ¬ç« å°ç»“ï¼šé…ç½® Vimï¼Œè®©å¥¹æ›´é¡ºæ‰‹ (01:16)"></a>3-3 æœ¬ç« å°ç»“ï¼šé…ç½® Vimï¼Œè®©å¥¹æ›´é¡ºæ‰‹ (01:16)</h3><p>å­¦ä¹ å’Œä½¿ç”¨é…ç½®</p><blockquote><p>å­¦ä¹ å’Œä½¿ç”¨Vimé…ç½®æ˜¯Vimç©å®¶è¿›é˜¶çš„å¿…ä¿®ä¹‹è·¯</p></blockquote><ul><li>äº†è§£å¸¸è§çš„é…ç½®é€‰é¡¹</li><li>å­¦ä¹ å’Œä½¿ç”¨Vimæ˜ å°„ï¼Œç”¨å¾—ä¸çˆ½æˆ‘å°±æ”¹</li><li>Vimè¿›é˜¶éœ€è¦å­¦ä¹ Vimscriptã€‚ã€Šç¬¨å‘æ”¾å­¦Vimscriptã€‹</li></ul><p>ä¸‹ä¸€æ­¥è¯¥å­¦ä»€ä¹ˆï¼Ÿ</p><blockquote><p>å¼ºå¤§çš„Vimæ’ä»¶</p></blockquote><ul><li>Vimä¹Ÿåœ¨ä¸æ—¶ä¿±è¿›ï¼Œå‘å¸ƒäº†Vim8ï¼Œè¿˜æœ‰Neovim</li><li>çŸ¥é“å¦‚ä½•é…ç½®Vimä¹‹åï¼Œå¼€å§‹æ¢ç´¢å„ç§å¼ºå¤§çš„Vimæ’ä»¶</li><li>æ‰“å¥½<strong>Vimé…ç½®</strong>å’Œ<strong>æ˜ å°„</strong>çš„åŸºç¡€ï¼Œå¼€å§‹å­¦ä¹ å¦‚ä½•å®‰è£…å’Œä½¿ç”¨æ’ä»¶</li></ul><h2 id="ç¬¬4ç« -Vim-å®‰è£…å’Œä½¿ç”¨æ’ä»¶"><a href="#ç¬¬4ç« -Vim-å®‰è£…å’Œä½¿ç”¨æ’ä»¶" class="headerlink" title="ç¬¬4ç«  Vim å®‰è£…å’Œä½¿ç”¨æ’ä»¶"></a>ç¬¬4ç«  Vim å®‰è£…å’Œä½¿ç”¨æ’ä»¶</h2><blockquote><p>å­¦ä¼šå¦‚ä½•å®‰è£…å’Œä½¿ç”¨å¸¸è§çš„ Vim æ’ä»¶ï¼Œå¢å¼º Vim çš„åŠŸèƒ½ã€‚</p></blockquote><h3 id="4-1-Vim-å®‰è£…æ’ä»¶ï¼Œç«Ÿå¦‚æ­¤ç®€å•-08-40"><a href="#4-1-Vim-å®‰è£…æ’ä»¶ï¼Œç«Ÿå¦‚æ­¤ç®€å•-08-40" class="headerlink" title="4-1 Vim å®‰è£…æ’ä»¶ï¼Œç«Ÿå¦‚æ­¤ç®€å• (08:40)"></a>4-1 Vim å®‰è£…æ’ä»¶ï¼Œç«Ÿå¦‚æ­¤ç®€å• (08:40)</h3><p>ä»€ä¹ˆæ˜¯æ’ä»¶ï¼Ÿ</p><blockquote><p>å’Œå…¶ä»–ç°ä»£æµè¡Œç¼–è¾‘å™¨ä¸€æ ·ï¼ŒVimåŒæ ·æ”¯æŒå¼ºå¤§çš„æ’ä»¶æ‰©å±•</p></blockquote><ul><li>Vimæ’ä»¶æ˜¯ä½¿ç”¨vimscriptæˆ–è€…å…¶ä»–è¯­è¨€ç¼–å†™çš„vimåŠŸèƒ½æ‰©å±•</li><li>ç¼–è¾‘å™¨è‡ªå¸¦çš„åŠŸèƒ½æœ‰é™ï¼Œæœ‰äº†æ’ä»¶ä¹‹åå‡ ä¹å¯ä»¥æ— é™æ‰©å……å…¶åŠŸèƒ½</li><li>ç½‘ç»œä¸Šæ¯”å¦‚GitHub.comç­‰æœ‰å¾ˆå¤šå¼€æºçš„Vimæ’ä»¶å¯ä»¥ä½¿ç”¨</li></ul><p>å¦‚ä½•å®‰è£…æ’ä»¶ï¼Ÿ</p><blockquote><p>åŸå§‹çš„æ–¹å¼æ˜¯ç›´æ¥cloneæ’ä»¶ä»£ç ï¼Œå¦‚ä»ŠVimæœ‰å¾ˆå¤šæ’ä»¶ç®¡ç†å™¨</p></blockquote><ul><li><p>ç›®å‰Vimæœ‰å¾ˆå¤šæ’ä»¶ç®¡ç†å™¨å¯ä¾›é€‰æ‹©</p></li><li><p>å¸¸è§çš„æœ‰ï¼š<code>vim-plug</code>ã€<code>Vundle</code>ã€<code>Pathogen</code>ã€<code>Dein.Vim</code>ã€<code>volt</code>ç­‰</p></li><li><p>ç»¼åˆæ€§èƒ½ã€æ˜“ç”¨æ€§ã€æ–‡æ¡£ç­‰å‡ ä¸ªæ–¹é¢ï¼Œæ¨èä½¿ç”¨<code>vim-plug</code></p><p><a href="https://www.slant.co/topics/1224/~best-plugin-managers-for-vim" target="_blank" rel="noopener">https://www.slant.co/topics/1224/~best-plugin-managers-for-vim</a></p></li></ul><p>ä½¿ç”¨<code>vim-plug</code>å®‰è£…æ’ä»¶</p><ul><li><p><a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener">https://github.com/junegunn/vim-plug</a></p></li><li><p>å­¦ä¹ ä¸€ä¸ªæ–°ä¸œè¥¿çš„æœ€å¥½æ–¹å¼å°±æ˜¯çœ‹å®˜æ–¹æ–‡æ¡£</p></li><li><p>æŒ‰ç…§å®˜æ–¹çš„æ•™ç¨‹ï¼Œå°±å¯ä»¥éå¸¸å®¹æ˜“åœ°äº†è§£å®ƒçš„ä½¿ç”¨æ–¹å¼</p><pre><code class="shell">curl -fLo ~/.vim/autoload/plug.vim --create-dirs \    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</code></pre></li></ul><p>å®‰è£…ç¬¬ä¸€ä¸ªæ’ä»¶<code>vim-startify</code></p><blockquote><p>ä¸€ä¸ªå¥½ç”¨çš„vimå¼€å±æ’ä»¶</p></blockquote><ul><li><p><a href="https://github.com/mhinz/vim-startify" target="_blank" rel="noopener">https://github.com/mhinz/vim-startify</a></p></li><li><p>ä¿®æ”¹<code>.vimrc</code>é…ç½®æ–‡ä»¶ï¼Œå¢åŠ è¯¥æ’ä»¶çš„åç§°</p></li><li><p>é‡æ–°å¯åŠ¨vimæˆ–è€…æ‰§è¡Œ<code>:source ~/.vimrc</code>ï¼Œæ‰§è¡Œ<code>:PlugInstall</code></p><pre><code class="shell">call plug#begin(&#39;~/.vim/plugged&#39;)Plug &#39;mhinz/vim-startify&#39;call plug#end()</code></pre><p><code>:source ~/.vimrc</code></p><p><code>:PlugInstall</code></p></li><li><p>å¦‚æœå·²ç»å®‰è£…å®Œæˆï¼Œé€€å‡ºå¹¶é‡æ–°æ‰“å¼€VimæŸ¥çœ‹æ•ˆæœ</p></li></ul><p>è¯¾åç»ƒä¹ </p><blockquote><p>æ‰“å¼€Vimæ“ç»ƒèµ·æ¥ï¼Œé¦–å…ˆä¸‹è½½vim-plugå¹¶æµè§ˆå…¶æ–‡æ¡£</p></blockquote><ul><li>å®‰è£…vim-plugæ’ä»¶ç®¡ç†å™¨</li><li>å®‰è£…vimæ’ä»¶vim-startifyã€nerdtreeï¼Œçœ‹çœ‹èƒ½å¦ç”Ÿæ•ˆ</li></ul><h3 id="4-2-å¦‚ä½•å¯»æ‰¾è‡ªå·±éœ€è¦çš„æ’ä»¶-06-42"><a href="#4-2-å¦‚ä½•å¯»æ‰¾è‡ªå·±éœ€è¦çš„æ’ä»¶-06-42" class="headerlink" title="4-2 å¦‚ä½•å¯»æ‰¾è‡ªå·±éœ€è¦çš„æ’ä»¶ (06:42)"></a>4-2 å¦‚ä½•å¯»æ‰¾è‡ªå·±éœ€è¦çš„æ’ä»¶ (06:42)</h3><ul><li><p>Googleå…³é”®è¯æœç´¢</p></li><li><p><a href="https://github.com/vim-awesome/vim-awesome" target="_blank" rel="noopener">https://github.com/vim-awesome/vim-awesome</a></p><p><a href="https://vimawesome.com/" target="_blank" rel="noopener">https://vimawesome.com/</a></p></li><li><p>æµè§ˆç½‘ä¸Šå¼€æºçš„vimé…ç½®ï¼Œå€Ÿé‰´æƒ³è¦çš„æ’ä»¶</p></li></ul><h3 id="4-3-vimç¾åŒ–æ’ä»¶ï¼Œè®©ä½ çš„-vim-ä¸ä¼—ä¸åŒ-09-57"><a href="#4-3-vimç¾åŒ–æ’ä»¶ï¼Œè®©ä½ çš„-vim-ä¸ä¼—ä¸åŒ-09-57" class="headerlink" title="4-3 vimç¾åŒ–æ’ä»¶ï¼Œè®©ä½ çš„ vim ä¸ä¼—ä¸åŒ (09:57)"></a>4-3 vimç¾åŒ–æ’ä»¶ï¼Œè®©ä½ çš„ vim ä¸ä¼—ä¸åŒ (09:57)</h3><p>vimç¾åŒ–æ’ä»¶</p><blockquote><p>æ›´æ”¹vimçš„å¤–è§‚</p></blockquote><ul><li><p>ä¿®æ”¹å¯åŠ¨ç•Œé¢ï¼š<a href="https://github.com/mhinz/vim-startify" target="_blank" rel="noopener">https://github.com/mhinz/vim-startify</a></p><p><code>:Startify</code></p></li><li><p>çŠ¶æ€æ ç¾åŒ–ï¼š<a href="https://github.com/vim-airline/vim-airline" target="_blank" rel="noopener">https://github.com/vim-airline/vim-airline</a></p><p><a href="https://github.com/vim-airline/vim-airline-themes" target="_blank" rel="noopener">https://github.com/vim-airline/vim-airline-themes</a></p></li><li><p>å¢åŠ ä»£ç ç¼©è¿›çº¿æ¡ï¼š<a href="https://github.com/Yggdroot/indentLine" target="_blank" rel="noopener">https://github.com/Yggdroot/indentLine</a></p></li></ul><p>vimé…è‰²æ–¹æ¡ˆ</p><ul><li>vim-hybridé…è‰²ï¼š<a href="https://github.com/w0ng/vim-hybrid" target="_blank" rel="noopener">https://github.com/w0ng/vim-hybrid</a></li><li>solarizedé…è‰²ï¼š<a href="https://github.com/altercation/vim-colors-solarized" target="_blank" rel="noopener">https://github.com/altercation/vim-colors-solarized</a></li><li>gruvboxé…è‰²ï¼š<a href="https://github.com/morhetz/gruvbox" target="_blank" rel="noopener">https://github.com/morhetz/gruvbox</a></li></ul><p>è¯¾åç»ƒä¹ </p><ul><li>å°è¯•ä½¿ç”¨vim-stratifyå¿«é€Ÿæ‰“å¼€æœ€è¿‘ä½¿ç”¨çš„æ–‡ä»¶</li><li>å®‰è£…vim-airlineç¾åŒ–çŠ¶æ€æ </li><li>å®‰è£…indentlineç»™vimå¢åŠ ä»£ç ç¼©è¿›çº¿</li></ul><h3 id="4-4-Vimæ–‡ä»¶ç›®å½•å’Œæœç´¢æ’ä»¶ï¼Œè·³è½¬æ–‡ä»¶so-easy-12-20"><a href="#4-4-Vimæ–‡ä»¶ç›®å½•å’Œæœç´¢æ’ä»¶ï¼Œè·³è½¬æ–‡ä»¶so-easy-12-20" class="headerlink" title="4-4 Vimæ–‡ä»¶ç›®å½•å’Œæœç´¢æ’ä»¶ï¼Œè·³è½¬æ–‡ä»¶so easy (12:20)"></a>4-4 Vimæ–‡ä»¶ç›®å½•å’Œæœç´¢æ’ä»¶ï¼Œè·³è½¬æ–‡ä»¶so easy (12:20)</h3><p><strong>æ–‡ä»¶ç›®å½•æ ‘</strong>ï¼š</p><blockquote><p>é»˜è®¤çš„æ–‡ä»¶ç›®å½•ç®¡ç†æ¯”è¾ƒç®€é™‹ï¼Œnerdtreeå¼¥è¡¥äº†è¿™ä¸ªé—®é¢˜</p></blockquote><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gj3vo85oj311w0o87le.jpg" alt="æ–‡ä»¶ç›®å½•æ ‘" style="zoom:45%;" /><p>æ–‡ä»¶ç®¡ç†å™¨nerdtree</p><blockquote><p>ä½¿ç”¨nerdtreeæ’ä»¶è¿›è¡Œæ–‡ä»¶ç›®å½•æ ‘ç®¡ç†</p></blockquote><ul><li><p><a href="https://github.com/scrooloose/nerdtree" target="_blank" rel="noopener">https://github.com/scrooloose/nerdtree</a></p><p><code>:NERDTree</code></p><p><code>:NERDTreeFind</code></p><p><code>:NERDTreeToggle</code></p></li><li><p><code>autocmd vimenter * NERDTree</code>å¯ä»¥åœ¨å¯åŠ¨vimçš„æ—¶å€™æ‰“å¼€NERDTreeâ€˜</p></li><li><p><code>map &lt;leader&gt;v :NERDTreeFind&lt;CR&gt;</code>æŸ¥æ‰¾æ–‡ä»¶ä½ç½®</p></li></ul><p><strong>å¿«é€Ÿæœç´¢æ–‡ä»¶</strong>ï¼š</p><blockquote><p>å¦‚ä½•æ ¹æ®æ–‡ä»¶åå¿«é€ŸæŸ¥æ‰¾æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶</p></blockquote><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gk4xgm5mj316e0m0137.jpg" alt="å¿«é€Ÿæœç´¢æ–‡ä»¶" style="zoom:45%;" /><p>æ¨¡ç³Šæœç´¢å™¨</p><blockquote><p>ä½¿ç”¨ctrlpæ’ä»¶å¿«é€ŸæŸ¥æ‰¾å¹¶ä¸”æ‰“å¼€æ–‡ä»¶</p></blockquote><ul><li><a href="https://github.com/ctrlpvim/ctrlp.vim" target="_blank" rel="noopener">https://github.com/ctrlpvim/ctrlp.vim</a></li><li><code>let g:ctrlp_map = &#39;&lt;c-p&gt;&#39;</code></li><li>ä½¿ç”¨<Ctrl-p>ï¼Œç„¶åè¾“å…¥å°‘é‡å­—ç¬¦å°±å¯ä»¥å¼€å§‹æœç´¢</li></ul><p>è¯¾åç»ƒä¹ </p><blockquote><p>å¿«é€Ÿå®šä½æ–‡ä»¶æ˜¯å¸¸ç”¨æ“ä½œï¼Œéœ€ç‰¢ç‰¢æŒæ¡æå‡æ•ˆç‡</p></blockquote><ul><li>å®‰è£…nerdtreeæ’ä»¶ï¼ŒåŠ å…¥å¿«æ·é”®æ˜ å°„</li><li>å®‰è£…ctrlpæ’ä»¶ï¼Œç„¶åä½¿ç”¨å¿«é€Ÿå®šä½æ–‡ä»¶</li><li>æ”¹å˜è‡ªå·±ä¹‹å‰ä½æ•ˆçš„æ“ä½œæ–¹å¼ï¼Œé€‚åº”æ–°çš„æ“ä½œæ–¹å¼</li></ul><h3 id="4-5-Vimå¿«é€Ÿå®šä½æ’ä»¶ï¼Œæ–‡ä»¶ä½ç½®ä»»æˆ‘è¡Œ-05-58"><a href="#4-5-Vimå¿«é€Ÿå®šä½æ’ä»¶ï¼Œæ–‡ä»¶ä½ç½®ä»»æˆ‘è¡Œ-05-58" class="headerlink" title="4-5 Vimå¿«é€Ÿå®šä½æ’ä»¶ï¼Œæ–‡ä»¶ä½ç½®ä»»æˆ‘è¡Œ (05:58)"></a>4-5 Vimå¿«é€Ÿå®šä½æ’ä»¶ï¼Œæ–‡ä»¶ä½ç½®ä»»æˆ‘è¡Œ (05:58)</h3><p>Vimç§»åŠ¨å‘½ä»¤ï¼š</p><blockquote><p>åœ¨åŸºç¡€ç¯‡å­¦ä¹ äº†å¾ˆå¤šVimç§»åŠ¨çš„å‘½ä»¤</p></blockquote><ul><li>æ¯”å¦‚ï¼Œ<code>w</code>/<code>e</code>åŸºäºå•è¯ç§»åŠ¨ï¼Œ<code>gg</code>/<code>G</code>æ–‡ä»¶é¦–å°¾ï¼Œ<code>0</code>/<code>$</code>è¡Œé¦–å°¾ï¼Œ<code>f{char}</code>æŸ¥è¯¢å­—ç¬¦</li><li><code>Ctrl+f</code>ã€<code>Ctrl+u</code>å‰åç¿»å±</li><li>å¦‚æœéœ€è¦å¿«é€Ÿè·³è½¬åˆ°å½“å‰çª—å£æ˜¾ç¤ºåŒºçš„ä»»æ„ä½ç½®éœ€è¦æ€ä»¬åšï¼Ÿ</li></ul><p>å¦‚ä½•å¿«é€Ÿç§»åŠ¨åˆ°ä»»æ„ä½ç½®</p><blockquote><p>å¯ä»¥ä½¿ç”¨vimçš„æœç´¢/åŠ ä¸Šnè·³è½¬ï¼Œä½†æ˜¯ä½¿ç”¨easymotionæ›´æ–¹ä¾¿</p></blockquote><ul><li><a href="https://github.com/easymotion/vim-easymotion" target="_blank" rel="noopener">https://github.com/easymotion/vim-easymotion</a></li><li>å®˜æ–¹æ–‡æ¡£è¾ƒé•¿ï¼Œå…¶å®ä¸€ä¸ªæ˜ å°„å°±èƒ½åº”ä»˜</li><li><code>nmap ss &lt;Plug&gt;(easymotion-s2)</code></li></ul><p>è¯¾åç»ƒä¹ </p><blockquote><p>å®‰è£…å¹¶ä½¿ç”¨easymotionæ’ä»¶</p></blockquote><ul><li>å›å¿†ä¸€ä¸‹vimé‡Œå¸¸ç”¨çš„ç§»åŠ¨æ“ä½œ</li><li>å®‰è£…easymotionæ’ä»¶</li><li>ä½¿ç”¨easymotionç»ƒä¹ åœ¨æ–‡ä»¶çª—å£çš„ä»»æ„ä½ç½®è·³è½¬</li></ul><h3 id="4-6-Vim-surroundï¼Œç¼–è¾‘ä¹Ÿè¦æˆåŒæˆå¯¹-05-27"><a href="#4-6-Vim-surroundï¼Œç¼–è¾‘ä¹Ÿè¦æˆåŒæˆå¯¹-05-27" class="headerlink" title="4-6 Vim-surroundï¼Œç¼–è¾‘ä¹Ÿè¦æˆåŒæˆå¯¹ (05:27)"></a>4-6 Vim-surroundï¼Œç¼–è¾‘ä¹Ÿè¦æˆåŒæˆå¯¹ (05:27)</h3><p>vim-surround</p><blockquote><p> å¦‚ä½•å¿«é€Ÿæ›´æ¢ä¸€å¯¹å•å¼•å·ä¸ºåŒå¼•å·?</p></blockquote><ul><li><p>ä¸€ä¸ªä¸€ä¸ªæŸ¥æ‰¾ç„¶åæ›¿æ¢</p></li><li><p><a href="https://github.com/tpope/vim-surround" target="_blank" rel="noopener">https://github.com/tpope/vim-surround</a></p></li></ul><p>vim-surroundä½¿ç”¨</p><blockquote><p>normalæ¨¡å¼ä¸‹å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹æˆå¯¹å†…å®¹</p></blockquote><ul><li><code>ds</code>ï¼ˆdelete a surroundingï¼‰</li><li><code>cs</code>ï¼ˆchange a surroundingï¼‰</li><li><code>ys</code>ï¼ˆyou add a surroundingï¼‰</li></ul><p>ä¾‹å­ï¼š</p><ul><li><code>ysiw&quot;</code>ï¼šç»™å•è¯å¢åŠ <code>&quot;</code></li><li><code>cs&quot;&#39;</code>ï¼šä¿®æ”¹<code>&quot;</code>ä¸º<code>&#39;</code></li><li><code>cs(]</code>ï¼šä¿®æ”¹<code>(</code>ä¸º<code>]</code>ï¼Œæ›¿æ¢åçš„æ‹¬å·éœ€è¦ä½¿ç”¨åæ‹¬å·ï¼Œå‰æ‹¬å·ä¼šäº§ç”Ÿç©ºæ ¼</li><li><code>ds&#39;</code>ï¼šåˆ é™¤<code>&#39;</code></li><li><code>ds(</code>ï¼šåˆ é™¤<code>(</code></li></ul><p>è¯¾åç»ƒä¹ </p><blockquote><p>vim-surroundå¤§æ³•å¥½</p></blockquote><ul><li>ä½¿ç”¨vim-plugå®‰è£…vim-surroundæ’ä»¶</li><li>ä½¿ç”¨ç»ƒä¹ ä¿®æ”¹æˆå¯¹çš„å†…å®¹ï¼Œæ¯”å¦‚ä¿®æ”¹å•å¼•å·ä¸ºåŒå¼•å·</li><li>å¤šç»ƒä¹ å‡ æ¬¡ï¼Œä½¿ç”¨æ’ä»¶æå‡ç¼–è¾‘æ•ˆç‡</li></ul><h3 id="4-7-å¼ºå¤§çš„Vimæ¨¡ç³Šæœç´¢ä¸æ›¿æ¢æ’ä»¶-08-26"><a href="#4-7-å¼ºå¤§çš„Vimæ¨¡ç³Šæœç´¢ä¸æ›¿æ¢æ’ä»¶-08-26" class="headerlink" title="4-7 å¼ºå¤§çš„Vimæ¨¡ç³Šæœç´¢ä¸æ›¿æ¢æ’ä»¶ (08:26)"></a>4-7 å¼ºå¤§çš„Vimæ¨¡ç³Šæœç´¢ä¸æ›¿æ¢æ’ä»¶ (08:26)</h3><p>æ¨¡ç³Šæœç´¢</p><blockquote><p>ç»å¸¸éœ€è¦åœ¨ä¸€ä¸ªä»£ç é¡¹ç›®ä¸­æ¨¡ç³Šæœç´¢ä¸€äº›æ–‡æœ¬ï¼Œæ€ä»¬åŠï¼Ÿ</p></blockquote><ul><li>vimè‡ªå¸¦çš„æœç´¢å¯ä»¥æœç´¢å½“å‰æ–‡ä»¶ï¼Œä½†æ˜¯é¡¹ç›®æœ‰å¾ˆå¤šä¸ªæ–‡ä»¶</li><li>éœ€è¦ä½¿ç”¨æ’ä»¶æ¥æ¨¡ç³Šæœç´¢å¤šä¸ªæ–‡ä»¶å†…å®¹</li><li>ä½¿ç”¨Ag.vimæˆ–è€…fzf.vimï¼Œéƒ½å¯ä»¥å¾ˆå¥½çš„æ”¯æŒæ¨¡ç³Šæœç´¢</li></ul><p>fzfä¸fzf.vim</p><blockquote><p>fzfæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤è¡Œæ¨¡ç³Šæœç´¢å·¥å…·ï¼Œfzf.vimé›†æˆåˆ°äº†vimé‡Œ</p></blockquote><ul><li><p><a href="https://github.com/junegunn/fzf.vim" target="_blank" rel="noopener">https://github.com/junegunn/fzf.vim</a></p></li><li><p>å®‰è£…</p><pre><code class="shell">Plug &#39;junegunn/fzf&#39;, { &#39;dir&#39;: &#39;~/.fzf&#39;, &#39;do&#39;: &#39;./install --all&#39; }Plug &#39;junegunn/fzf.vim&#39;</code></pre></li><li><p>ä½¿ç”¨<code>Ag [PATTERN]</code>æ¨¡ç³Šæœç´¢å­—ç¬¦ä¸²</p></li><li><p>ä½¿ç”¨<code>Files [PATH]</code>æ¨¡ç³Šæœç´¢ç›®å½•</p></li><li><p>æ›´å¤šå‘½ä»¤ï¼š<a href="https://github.com/junegunn/fzf.vim#commands" target="_blank" rel="noopener">https://github.com/junegunn/fzf.vim#commands</a></p></li></ul><p>ä¾‹å­ï¼š</p><p><code>:Files .</code>ï¼šæŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå†è¾“å…¥æ–‡ä»¶åå®ç°æœç´¢</p><p><code>:Ag {PATTERN}</code>ï¼šæŸ¥æ‰¾æ–‡æœ¬å†…å®¹ã€‚</p><p>æ­¤å¤„é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼šag is not found</p><p>è§£å†³æ–¹æ³•å‚è€ƒï¼š<a href="https://github.com/junegunn/fzf.vim/issues/440" target="_blank" rel="noopener">https://github.com/junegunn/fzf.vim/issues/440</a></p><p>æœç´¢æ›¿æ¢æ’ä»¶far.vim</p><blockquote><p>å¦‚æœæƒ³è¦æ‰¹é‡æœç´¢æ›¿æ¢ï¼Œå¯ä»¥ä½¿ç”¨far.vim</p></blockquote><ul><li><p><a href="https://github.com/brooth/far.vim" target="_blank" rel="noopener">https://github.com/brooth/far.vim</a></p></li><li><p>ä½¿ç”¨</p><pre><code class="shell">:Far foo bar **/*.py:Fardo</code></pre></li><li><p>æ¯”å¦‚åœ¨ä»£ç é‡æ„çš„æ—¶å€™ä¼šç»å¸¸ä½¿ç”¨åˆ°</p></li><li><p><code>:Far foo bar **/*.py</code></p></li></ul><p>è¯¾åç»ƒä¹ </p><blockquote><p>æ¨¡ç³Šæœç´¢å’Œæ›¿æ¢æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„æ“ä½œ</p></blockquote><ul><li>ä½¿ç”¨vim-plugå®‰è£…fzf.vimå’Œfar.vim</li><li>ä½¿ç”¨fzf.vimåœ¨ä¸€ä¸ªé¡¹ç›®ä¸­æœç´¢æƒ³è¦çš„æ–‡æœ¬</li><li>ä½¿ç”¨far.vimæ‰¹é‡æ›¿æ¢ä¸€ä¸ªé¡¹ç›®ä¸‹çš„æ–‡æœ¬</li></ul><h3 id="4-8-æ„‰å¿«å†™-golang-ä¹‹vim-goæ’ä»¶-10-19"><a href="#4-8-æ„‰å¿«å†™-golang-ä¹‹vim-goæ’ä»¶-10-19" class="headerlink" title="4-8 æ„‰å¿«å†™ golang ä¹‹vim-goæ’ä»¶ (10:19)"></a>4-8 æ„‰å¿«å†™ golang ä¹‹vim-goæ’ä»¶ (10:19)</h3><p>ç¼–è¾‘å™¨ VS IDE</p><blockquote><p>IDEä¸€ä»£åˆä¸€ä»£ï¼Œç»å…¸çš„ç¼–è¾‘å™¨å´é•¿ä¹…ä¸è¡°</p></blockquote><ul><li>é™¤äº†Javaï¼Œå¾ˆå¤šäººç”¨vimç¼–å†™shell/php/golang/python/ruby</li><li>å‰ç«¯å¾ˆå¤šäººä½¿ç”¨VSCodeï¼Œsublime/Atomæœ‰æ²¡è½ä¹‹åŠ¿</li><li>å¾ˆå¤šåç«¯å’Œè¿ç»´å·¥ç¨‹å¸ˆä½¿ç”¨vimï¼Œå¾®ä¿¡åå°å’Œé˜¿é‡Œé£å¤©ç³»ç»Ÿå¾ˆå¤šä»£ç å‡ºè‡ªåœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨vimçš„å·¥ç¨‹å¸ˆ</li></ul><p>vim-go</p><blockquote><p>åŠŸèƒ½å¼ºå¤§çš„golangæ’ä»¶vim-go</p></blockquote><ul><li><p><a href="https://github.com/fatih/vim-go" target="_blank" rel="noopener">https://github.com/fatih/vim-go</a></p></li><li><p>ä»£ç è¡¥å…¨ã€é‡æ„ã€è·³è½¬ã€è‡ªåŠ¨æ ¼å¼åŒ–ã€è‡ªåŠ¨å¯¼å…¥ç­‰åŠŸèƒ½</p></li><li><p>åŸºæœ¬å¯ä»¥æ»¡è¶³golangæ—¥å¸¸å¼€å‘</p><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>&lt;Ctrl-x&gt;&lt;Ctrl-o&gt;</code></td><td>æ‰“å¼€è¡¥å…¨åˆ—è¡¨</td></tr><tr><td><code>&lt;Ctrl-p&gt;</code></td><td>å‘ä¸Šé€‰æ‹©è¡¥å…¨</td></tr><tr><td><code>&lt;Ctrl-n&gt;</code></td><td>å‘ä¸‹é€‰æ‹©è¡¥å…¨</td></tr><tr><td><code>&lt;Ctrl-]&gt;</code></td><td>è·³è½¬åˆ°å®šä¹‰çš„æ–¹æ³•</td></tr><tr><td><code>&lt;Ctrl-o&gt;</code></td><td>è·³è½¬åˆ°ä¸Šä¸€æ¬¡çš„åœ°æ–¹</td></tr><tr><td><code>&lt;Ctrl-i&gt;</code></td><td>è·³è½¬åˆ°ä¸Šä¸€æ¬¡çš„åœ°æ–¹</td></tr></tbody></table><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>:GoFmt</code></td><td>æ ¼å¼åŒ–ä»£ç </td></tr><tr><td><code>:GoRename</code></td><td>é‡æ„åç§°</td></tr><tr><td><code>:GoImports</code></td><td>è‡ªåŠ¨å¸¦å…¥åŒ…</td></tr><tr><td><code>:GoRun</code></td><td>è¿è¡Œä»£ç </td></tr><tr><td><code>:w</code></td><td>ä¿å­˜æ–‡ä»¶è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç </td></tr></tbody></table></li><li><p>vimrcé…ç½®ï¼š</p><pre><code class="shell">autocmd BufNewFile,BufRead *.go setlocal noexpandtab tabstop=4 shiftwidth=4</code></pre></li></ul><p>è¯¾åç»ƒä¹ </p><ul><li>å®‰è£…vim-goæ’ä»¶ï¼Œé˜…è¯»vim-go-tutorialæ•™ç¨‹</li><li>ä½¿ç”¨vim-goç¼–å†™Goè¯­è¨€ä»£ç </li><li>å¦‚æœé‡åˆ°äº†é—®é¢˜ï¼Œè¯·æŸ¥çœ‹vim-go-tutorialæ•™ç¨‹æˆ–è€…vim-goæ–‡æ¡£</li></ul><h3 id="4-9-python-modeæŠŠ-vim-æ‰“é€ æˆè½»é‡-Python-IDE-07-11"><a href="#4-9-python-modeæŠŠ-vim-æ‰“é€ æˆè½»é‡-Python-IDE-07-11" class="headerlink" title="4-9 python-modeæŠŠ vim æ‰“é€ æˆè½»é‡ Python IDE (07:11)"></a>4-9 python-modeæŠŠ vim æ‰“é€ æˆè½»é‡ Python IDE (07:11)</h3><p>Python-mode</p><blockquote><p>Pythonæ’ä»¶ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯jedi-vimå’ŒPython-mode</p></blockquote><ul><li><a href="https://github.com/python-mode/python-mode" target="_blank" rel="noopener">https://github.com/python-mode/python-mode</a></li><li>Python-modeå…·å¤‡åŸºæœ¬çš„è¡¥å…¨ã€è·³è½¬ã€é‡æ„ã€æ ¼å¼åŒ–åŠŸèƒ½</li><li>å³ä½¿æ˜¯åœ¨æœåŠ¡å™¨ä¸Šä¹Ÿèƒ½æ–¹ä¾¿çš„è°ƒè¯•Pythonä»£ç </li></ul><ul><li><p>æŸ¥çœ‹æ˜¯å¦æ”¯æŒpythonï¼š<code>vim --version | grep python</code>ï¼š</p></li><li><p>vimrcé…ç½®</p><pre><code class="shell">let g:pymode_python = &#39;python3&#39;let g:pymode_trim_whitespaces = 1let g:pymode_doc = 1let g:pymode_doc_bind = &#39;K&#39;let g:pymode_rope_goto_definition_bind = &#39;&lt;C-]&gt;&#39;let g:pymode_lint = 1let g:pymode_lint_checkers = [&#39;pyflakes&#39;, &#39;pep8&#39;, &#39;mccabe&#39;, &#39;pylint&#39;]let g:pymode_options_max_line_length = 120</code></pre></li></ul><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>&lt;Ctrl-x&gt;&lt;Ctrl-o&gt;</code></td><td>æ‰“å¼€è¡¥å…¨åˆ—è¡¨</td></tr><tr><td><code>&lt;Ctrl-p&gt;</code></td><td>å‘ä¸Šé€‰æ‹©è¡¥å…¨</td></tr><tr><td><code>&lt;Ctrl-n&gt;</code></td><td>å‘ä¸‹é€‰æ‹©è¡¥å…¨</td></tr><tr><td><code>&lt;Ctrl-]&gt;</code></td><td>è·³è½¬åˆ°å®šä¹‰çš„æ–¹æ³•</td></tr><tr><td><code>&lt;Ctrl-o&gt;</code></td><td>è·³è½¬åˆ°ä¸Šä¸€æ¬¡çš„åœ°æ–¹</td></tr><tr><td><code>&lt;Ctrl-i&gt;</code></td><td>è·³è½¬åˆ°ä¸Šä¸€æ¬¡çš„åœ°æ–¹</td></tr><tr><td><code>&lt;Ctrl-C&gt;ro</code></td><td>æ•´ç†å¯¼å…¥åŒ…çš„é¡ºåº</td></tr></tbody></table><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>:PymodeLintAuto</code></td><td>è‡ªåŠ¨Lintæ•´ç†æ ¼å¼ä»£ç </td></tr><tr><td><code>:w</code></td><td>ä¿å­˜æ–‡ä»¶æ—¶åšæ–‡ä»¶é™æ€æ£€æŸ¥ï¼Œå¹¶æç¤ºç›¸åº”é”™è¯¯</td></tr></tbody></table><p>è¯¾åç»ƒä¹ ï¼š</p><ul><li>å®‰è£…python-modeæ’ä»¶</li><li>ä½¿ç”¨python-modeç¼–å†™Pythonä»£ç </li><li>å¦‚æœé‡åˆ°äº†é—®é¢˜ï¼Œå°è¯•æŸ¥è¯¢python-modeæ–‡æ¡£è§£å†³</li></ul><h3 id="4-10-Vim-tagbarï¼Œæ›´æ„‰å¿«åœ°æµè§ˆä»£ç -11-14"><a href="#4-10-Vim-tagbarï¼Œæ›´æ„‰å¿«åœ°æµè§ˆä»£ç -11-14" class="headerlink" title="4-10 Vim tagbarï¼Œæ›´æ„‰å¿«åœ°æµè§ˆä»£ç  (11:14)"></a>4-10 Vim tagbarï¼Œæ›´æ„‰å¿«åœ°æµè§ˆä»£ç  (11:14)</h3><p>tagbar</p><blockquote><p>ä»£ç å¤§çº²ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€</p></blockquote><ul><li><p><a href="https://github.com/majutsushi/tagbar" target="_blank" rel="noopener">https://github.com/majutsushi/tagbar</a></p></li><li><p>éœ€è¦å®‰è£…Universal Ctagsç”Ÿæˆå¯¹åº”çš„tagæ–‡ä»¶</p></li><li><p>å¿«é€Ÿæµè§ˆå½“å‰æ–‡ä»¶ä»£ç ç»“æ„ï¼Œå¹¶ä¸”æœç´¢è·³è½¬åˆ°å¯¹åº”ä»£ç å—</p></li><li><p>vimrcé…ç½®</p><pre><code class="shell">nnoremap &lt;leader&gt;t :TagbarToggle&lt;CR&gt;</code></pre></li></ul><p>å®‰è£…ctagsï¼š</p><ul><li><p>Universal Ctagsï¼š<a href="https://ctags.io/" target="_blank" rel="noopener">https://ctags.io/</a></p></li><li><p><a href="https://docs.ctags.io/en/latest/osx.html#building-with-homebrew" target="_blank" rel="noopener">https://docs.ctags.io/en/latest/osx.html#building-with-homebrew</a></p><pre><code class="shell">brew tap universal-ctags/universal-ctagsbrew install --HEAD universal-ctags</code></pre></li></ul><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>:Tagbar</code></td><td>æ˜¾ç¤ºTagbar</td></tr><tr><td><code>:TagbarToggle</code></td><td>æ˜¾ç¤ºTagbarå¹¶å®šä½åˆ°å½“å‰æ–¹æ³•çš„ç›®å½•</td></tr><tr><td><code>:ls</code></td><td>æŸ¥çœ‹buffer</td></tr><tr><td><code>:b duck.py</code></td><td>è·³è½¬åˆ°duck.pyçš„buffer</td></tr></tbody></table><p>vim-interestingwords</p><blockquote><p>é«˜äº®æ„Ÿå…´è¶£çš„å•è¯ï¼Œæµè§ˆä»£ç å¾ˆæœ‰ç”¨</p></blockquote><ul><li><a href="https://github.com/lfv89/vim-interestingwords" target="_blank" rel="noopener">https://github.com/lfv89/vim-interestingwords</a></li><li>æµè§ˆä»£ç çš„æ—¶å€™ç»å¸¸éœ€è¦çŸ¥é“ä¸€ä¸ªå˜é‡çš„ä½¿ç”¨æ–¹å¼</li><li>å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶åŒæ—¶é«˜äº®å¤šä¸ªå•è¯</li></ul><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>&lt;leader&gt;k</code></td><td>é«˜äº®å•è¯</td></tr><tr><td><code>u</code>/<code>U</code></td><td>ä¸‹/ä¸Šä¸€ä¸ªé«˜äº®</td></tr><tr><td><code>&lt;leader&gt;K</code></td><td>å–æ¶ˆæ‰€æœ‰é«˜äº®</td></tr></tbody></table><p>è¯¾åç»ƒä¹ </p><ul><li>å®‰è£…tagbarï¼Œå¼€å¯æ–‡ä»¶ä»£ç å¤§çº²</li><li>å®‰è£…interestingwordsï¼Œé«˜äº®æ„Ÿå…´è¶£çš„å•è¯</li><li>å¦‚æœé‡åˆ°äº†é—®é¢˜ï¼Œå°è¯•æŸ¥è¯¢æ’ä»¶çš„å®˜æ–¹æ–‡æ¡£/Googleæœç´¢/vim helpè§£å†³</li></ul><h3 id="4-11-å¼ºå¤§çš„-vim-ä»£ç è¡¥å…¨æ’ä»¶-07-16"><a href="#4-11-å¼ºå¤§çš„-vim-ä»£ç è¡¥å…¨æ’ä»¶-07-16" class="headerlink" title="4-11 å¼ºå¤§çš„ vim ä»£ç è¡¥å…¨æ’ä»¶ (07:16)"></a>4-11 å¼ºå¤§çš„ vim ä»£ç è¡¥å…¨æ’ä»¶ (07:16)</h3><p>deoplete.nvim</p><blockquote><p>ä¸€ä¸ªå¼ºå¤§çš„neovim/vim8å¼‚æ­¥è¡¥å…¨æ’ä»¶</p></blockquote><ul><li><a href="https://github.com/Shougo/deoplete.nvim" target="_blank" rel="noopener">https://github.com/Shougo/deoplete.nvim</a></li><li>å¤šç¼–ç¨‹è¯­è¨€çš„æ”¯æŒï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…</li><li>éœ€è¦å®‰è£…å¯¹åº”ç¼–ç¨‹è¯­è¨€çš„æ‰©å±•</li></ul><p>å®‰è£…ï¼š</p><pre><code class="shell">if has(&#39;nvim&#39;)  Plug &#39;Shougo/deoplete.nvim&#39;, { &#39;do&#39;: &#39;:UpdateRemotePlugins&#39; }else  Plug &#39;Shougo/deoplete.nvim&#39;  Plug &#39;roxma/nvim-yarp&#39;  Plug &#39;roxma/vim-hug-neovim-rpc&#39;endif</code></pre><p>å¦‚è‹¥æŠ¥é”™è¯·å®‰è£…ä¾èµ–ï¼š</p><pre><code class="shell">pip3 install --user pynvim</code></pre><p>é…ç½®ï¼š</p><pre><code class="shell">let g:deoplete#enable_at_startup = 1</code></pre><p>å…¶ä»–ä»£ç è¡¥å…¨æ’ä»¶</p><ol><li><p>deoplete-jediï¼š</p><blockquote><p>Pythonè¯­è¨€ä»£ç è¡¥å…¨ï¼Œå¯ä»¥è¡¥å…¨è‡ªå·±æ‰€å†™çš„åº“</p><p><a href="https://github.com/deoplete-plugins/deoplete-jedi" target="_blank" rel="noopener">https://github.com/deoplete-plugins/deoplete-jedi</a></p></blockquote></li><li><p>deoplete-goï¼š</p><blockquote><p>Goè¯­è¨€ä»£ç è¡¥å…¨</p><p><a href="https://github.com/deoplete-plugins/deoplete-go" target="_blank" rel="noopener">https://github.com/deoplete-plugins/deoplete-go</a></p></blockquote></li></ol><p>coc.nvim</p><blockquote><p>ä¸€ä¸ªå¼ºå¤§çš„neovim/vim8è¡¥å…¨æ’ä»¶ã€‚LSPæ”¯æŒ</p><p>LSPï¼ˆLanguage-Server-Protocolï¼‰</p></blockquote><ul><li><a href="https://github.com/neoclide/coc.nvim" target="_blank" rel="noopener">https://github.com/neoclide/coc.nvim</a></li><li>full language server protocol support as VSCode</li><li>å¤šè¯­è¨€æ’ä»¶æ”¯æŒ</li></ul><p>è¯¾åç»ƒä¹ </p><ul><li>å®‰è£…deoplete.nvimå’Œcoc.nvim</li><li>å®‰è£…å¯¹åº”çš„ç¼–ç¨‹è¯­è¨€æ‰©å±•</li><li>vim/neovimè¡¥å…¨æ’ä»¶å¾ˆå¤šï¼Œæœ‰äº›æ”¯æŒå¼‚æ­¥ã€‚</li></ul><h3 id="4-12-Vimä»£ç æ ¼å¼åŒ–ä¸é™æ€æ£€æŸ¥-09-43"><a href="#4-12-Vimä»£ç æ ¼å¼åŒ–ä¸é™æ€æ£€æŸ¥-09-43" class="headerlink" title="4-12 Vimä»£ç æ ¼å¼åŒ–ä¸é™æ€æ£€æŸ¥ (09:43)"></a>4-12 Vimä»£ç æ ¼å¼åŒ–ä¸é™æ€æ£€æŸ¥ (09:43)</h3><p>æ ¼å¼åŒ–ä¸é™æ€æ£€æŸ¥</p><blockquote><p>ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›å·¥å…·å‘¢ï¼Ÿèƒ½è®©å·¥å…·åšçš„å°±ä¸ç”¨è®©äººå»è´¹å¿ƒ</p></blockquote><ul><li>æŠŠç²¾åŠ›é›†ä¸­åœ¨ä»£ç é€»è¾‘æœ¬èº«ï¼Œè€Œä¸æ˜¯æ•´ç†æ ¼å¼è¿™äº›æµªè´¹ç²¾åŠ›çš„äº‹æƒ…ä¸Š</li><li>é™æ€æ£€æŸ¥æ˜¯ä¸ºäº†è®©ç¼–å†™çš„ä»£ç æ›´åŠ è§„èŒƒã€‚golint/pylint/eslintç­‰</li><li>æ— è®ºç¼–å†™ä½•ç§ç¼–ç¨‹è¯­è¨€ï¼Œæœ€å¥½éƒ½åŠ ä¸Šè‡ªåŠ¨æ ¼å¼åŒ–å’Œé™æ€æ£€æŸ¥</li></ul><p>Neoformat</p><blockquote><p>vim-autoformatå’ŒNeoformatæ˜¯ä¸¤ç§ä½¿ç”¨è¾ƒå¤šçš„æ ¼å¼åŒ–æ’ä»¶ï¼Œè¿™é‡Œä½¿ç”¨neoformat</p></blockquote><ul><li><a href="https://github.com/sbdchd/neoformat" target="_blank" rel="noopener">https://github.com/sbdchd/neoformat</a></li><li>éœ€è¦å®‰è£…å¯¹åº”è¯­è¨€çš„æ ¼å¼åŒ–åº“ã€‚pythonçš„autopep8ã€javascriptçš„prettierç­‰</li></ul><p>å®‰è£…ä¾èµ–ï¼š</p><pre><code class="shell">pip3 install autopep8</code></pre><p><code>:Neoformat</code>ï¼šæ ¼å¼åŒ–Pythonä»£ç </p><p>é™æ€æ£€æŸ¥Lint</p><blockquote><p>neomakeå’Œaleæ˜¯ä¸¤ç§å¸¸è§çš„lintæ’ä»¶ï¼Œè¿™é‡Œä½¿ç”¨ale</p></blockquote><ul><li><a href="https://github.com/dense-analysis/ale" target="_blank" rel="noopener">https://github.com/dense-analysis/ale</a></li><li>éœ€è¦å®‰è£…å¯¹åº”è¯­è¨€çš„lintåº“ã€‚æ¯”å¦‚golint/pylint/eslintç­‰</li><li>vim8/neovimæ”¯æŒå¼‚æ­¥æ£€æŸ¥ï¼Œä¸ä¼šå½±å“vimç¼–è¾‘ï¼Œæ¨èä½¿ç”¨</li></ul><p>å®‰è£…ä¾èµ–ï¼š</p><pre><code class="shell">pip3 install pylint</code></pre><p>è¯¾åç»ƒä¹ </p><blockquote><p>è®©æ’ä»¶å¸®åŠ©å®Œæˆä»£ç çš„æ ¼å¼åŒ–å’Œé™æ€æ£€æŸ¥å§ã€‚</p></blockquote><ul><li>å®‰è£…noeformatæ’ä»¶å’Œç›¸å…³çš„æ ¼å¼åŒ–åº“ï¼Œæ ¼å¼åŒ–ä»£ç </li><li>å®‰è£…aleå’Œå¯¹åº”è¯­è¨€çš„lintåº“ï¼Œä¿®å¤ä»£ç çš„ç¼ºé™·</li><li>éœ€è¦è‡ªå®šä¹‰æ£€æŸ¥åŠŸèƒ½ï¼ˆæ¯”å¦‚å¿½ç•¥æŸäº›æ£€æŸ¥é”™è¯¯ï¼‰ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£</li></ul><h3 id="4-13-Vimå¿«é€Ÿæ³¨é‡Šä»£ç -03-06"><a href="#4-13-Vimå¿«é€Ÿæ³¨é‡Šä»£ç -03-06" class="headerlink" title="4-13 Vimå¿«é€Ÿæ³¨é‡Šä»£ç  (03:06)"></a>4-13 Vimå¿«é€Ÿæ³¨é‡Šä»£ç  (03:06)</h3><p>vim-commentary</p><blockquote><p>vimæ³¨é‡Šæ’ä»¶æœ‰å¾ˆå¤šï¼Œæ¨èä½¿ç”¨è½»é‡çš„vim-commentary</p></blockquote><ul><li><a href="https://github.com/tpope/vim-commentary" target="_blank" rel="noopener">https://github.com/tpope/vim-commentary</a></li><li>è®°ä½å¸¸ç”¨çš„å‘½ä»¤ï¼šgcæ³¨é‡Šå’Œå–æ¶ˆæ³¨é‡Š</li><li>æ’ä»¶ä¼šæ ¹æ®ä¸åŒçš„æ–‡ä»¶ç±»å‹ä½¿ç”¨ä¸åŒæ³¨é‡Šã€‚python(#)ã€golang(//)</li></ul><p>è¡Œæ³¨é‡Šï¼š</p><ul><li><code>gcc</code>ï¼šæ³¨é‡Šä»£ç </li><li><code>gcgc</code>ï¼šå–æ¶ˆæ³¨é‡Šä»£ç </li></ul><p>å—æ³¨é‡Šï¼š</p><ul><li><code>gc</code>ï¼šæ³¨é‡Š/å–æ¶ˆæ³¨é‡Šä»£ç </li></ul><p>è¯¾åç»ƒä¹ </p><ul><li>å®‰è£…vim-commentaryæ’ä»¶</li><li>å°è¯•æ‰“å¼€Pythonæ–‡ä»¶å¹¶å¿«é€Ÿæ³¨é‡Šä¸€æ®µä»£ç </li><li>æ‰“å¼€ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼Œæ¯”å¦‚goæ–‡ä»¶ï¼Œè¯•è¯•æ³¨é‡Šä¸€æ®µä»£ç æˆ–æ–‡å­—</li></ul><h3 id="4-14-vimå’Œgitï¼Œå¼ºå¼ºè”æ‰‹-07-11"><a href="#4-14-vimå’Œgitï¼Œå¼ºå¼ºè”æ‰‹-07-11" class="headerlink" title="4-14 vimå’Œgitï¼Œå¼ºå¼ºè”æ‰‹ (07:11)"></a>4-14 vimå’Œgitï¼Œå¼ºå¼ºè”æ‰‹ (07:11)</h3><p>Fugitive</p><blockquote><p>åœ¨vimé‡Œä½¿ç”¨git</p></blockquote><ul><li><a href="https://github.com/tpope/vim-fugitive" target="_blank" rel="noopener">https://github.com/tpope/vim-fugitive</a></li><li>Geditã€Gdiffã€Gblameã€Gcommitç­‰</li><li>ä½¿ç”¨tmuxæ–°å¼€ä¸€ä¸ªçª—å£æ¥ä½¿ç”¨git</li></ul><p>vim-gitgutter</p><blockquote><p>åœ¨vimé‡Œæ˜¾ç¤ºæ–‡ä»¶å˜åŠ¨</p></blockquote><ul><li><a href="https://github.com/airblade/vim-gitgutter" target="_blank" rel="noopener">https://github.com/airblade/vim-gitgutter</a></li><li>å½“ä¿®æ”¹æ–‡ä»¶ä¹‹åå¯ä»¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„å˜åŠ¨</li><li>å“ªäº›è¡Œæ–°å¢ï¼Œå“ªäº›è¡Œä¿®æ”¹ï¼Œå“ªäº›è¡Œåˆ é™¤</li></ul><p>é…ç½®ï¼š</p><pre><code class="shell">set updatetime = 100</code></pre><p>gv.vim</p><blockquote><p>åœ¨å‘½ä»¤è¡ŒæŸ¥çœ‹æäº¤è®°å½•ï¼Œå‘½ä»¤è¡Œå·¥å…·tig</p></blockquote><ul><li><p><a href="https://github.com/junegunn/gv.vim" target="_blank" rel="noopener">https://github.com/junegunn/gv.vim</a></p></li><li><p>ä½¿ç”¨<code>:GV</code>å‘½ä»¤è°ƒç”¨</p></li><li><p>å¯ä»¥æµè§ˆä»£ç æäº¤å˜æ›´</p></li></ul><p>tig</p><ul><li><p><a href="https://github.com/jonas/tig" target="_blank" rel="noopener">https://github.com/jonas/tig</a></p></li><li><p><a href="https://www.jianshu.com/p/d9f60c0abbf7" target="_blank" rel="noopener">tig â€” è®© git å‘½ä»¤è¡Œå¯è§†åŒ–</a></p></li></ul><p>è¯¾åç»ƒä¹ </p><ul><li>å®‰è£…ä¸‰ä¸ªgitæ’ä»¶</li><li>ä½¿ç”¨<code>:Gblame</code>ç­‰å‘½ä»¤</li><li>vimå’Œtmuxé…åˆä½¿ç”¨</li></ul><h3 id="4-15-æœ¬ç« å°ç»“ï¼šæˆäººä»¥æ¸”ï¼Œå¯»æ‰¾è‡ªå·±éœ€è¦çš„æ’ä»¶-02-29"><a href="#4-15-æœ¬ç« å°ç»“ï¼šæˆäººä»¥æ¸”ï¼Œå¯»æ‰¾è‡ªå·±éœ€è¦çš„æ’ä»¶-02-29" class="headerlink" title="4-15 æœ¬ç« å°ç»“ï¼šæˆäººä»¥æ¸”ï¼Œå¯»æ‰¾è‡ªå·±éœ€è¦çš„æ’ä»¶ (02:29)"></a>4-15 æœ¬ç« å°ç»“ï¼šæˆäººä»¥æ¸”ï¼Œå¯»æ‰¾è‡ªå·±éœ€è¦çš„æ’ä»¶ (02:29)</h3><p>Vimæ’ä»¶åƒåƒä¸‡</p><blockquote><p>æœ¬ç« ä»‹ç»äº†å¦‚ä½•å®‰è£…ä½¿ç”¨å¸¸ç”¨çš„æ’ä»¶</p></blockquote><ul><li>Vimæ’ä»¶å¾ˆå¤šï¼Œä¸å¯èƒ½éƒ½å…¨éƒ¨ä»‹ç»ã€‚å­¦ä¼šè‡ªå·±å¯»æ‰¾ä¸ªå®‰è£…</li><li>é€šè¿‡æœç´¢å¼•æ“Googleå…³é”®è¯ã€vimawesomeã€å‚è€ƒå¼€æºé…ç½®å¯»æ‰¾æ’ä»¶</li><li>å­¦ä¼šé˜…è¯»æ’ä»¶çš„READMEæ–‡ä»¶å’Œdocé‡Œçš„å¸®åŠ©æ–‡ä»¶ï¼Œå­¦ä¹ æ’ä»¶ä½¿ç”¨</li></ul><p>ç¼ºä»€ä¹ˆå°±æ‰¾ä»€ä¹ˆæ’ä»¶å§ï¼</p><h2 id="ç¬¬5ç« -ä¸æ—¶ä¿±è¿›çš„-Vim"><a href="#ç¬¬5ç« -ä¸æ—¶ä¿±è¿›çš„-Vim" class="headerlink" title="ç¬¬5ç«  ä¸æ—¶ä¿±è¿›çš„ Vim"></a>ç¬¬5ç«  ä¸æ—¶ä¿±è¿›çš„ Vim</h2><blockquote><p>ä»‹ç»å¦‚ä½•å®‰è£…å’Œä½¿ç”¨ç°æœ‰çš„å¼€æºé…ç½®ï¼Œä»€ä¹ˆæ˜¯ Neovim ç­‰ï¼Œç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šã€‚</p></blockquote><h3 id="5-1-Vimå’ŒTmux-å¤©ä½œä¹‹åˆ-08-27"><a href="#5-1-Vimå’ŒTmux-å¤©ä½œä¹‹åˆ-08-27" class="headerlink" title="5-1 Vimå’ŒTmux,å¤©ä½œä¹‹åˆ (08:27)"></a>5-1 Vimå’ŒTmux,å¤©ä½œä¹‹åˆ (08:27)</h3><p>Tmux</p><blockquote><p>å¼ºå¤§çš„ç»ˆç«¯å¤ç”¨å·¥å…·ã€‚é€šè¿‡brew(Mac)ã€apt-get(ubuntu)å®‰è£…</p></blockquote><ul><li>å¯ä»¥å¤ç”¨ç»ˆç«¯ã€åˆ†å±ã€æ‰˜ç®¡è¿›ç¨‹ç­‰</li><li>åœ¨æœåŠ¡å™¨ä¸Šå³ä½¿é€€å‡ºæœåŠ¡å™¨ä¹Ÿä¸ä¼šè¢«killï¼Œæ‰˜ç®¡è¿›ç¨‹ä¹Ÿå¾ˆæ–¹ä¾¿</li><li>å¯ä»¥æ–¹ä¾¿åœ°åˆ†å‰²å±å¹•ï¼Œå®ç°å¤šä¸ªè¿›ç¨‹å…¬ç”¨å±å¹•</li></ul><p>Tmuxä½¿ç”¨æ–‡ç« ï¼š<a href="https://zhuanlan.zhihu.com/p/43687973" target="_blank" rel="noopener">æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨ç»ˆç«¯å¤ç”¨ç¥å™¨ Tmuxï¼Œä¸¢æ‰é¼ æ ‡ä¸æ˜¯æ¢¦</a></p><p><code>&lt;Ctrl-b&gt;%</code>ï¼šå‚ç›´åˆ†å±</p><p><code>&lt;Ctrl-b&gt;&quot;</code>ï¼šæ°´å¹³åˆ†å±</p><p><code>&lt;Ctrl-b&gt;c</code>ï¼šåˆ›å»ºæ–°tmuxçª—å£</p><p><code>&lt;Ctrl-b&gt;n</code>ï¼šè·³è½¬åˆ°ä¸‹ä¸€ä¸ªtmuxçª—å£</p><p><code>&lt;Ctrl-b&gt;p</code>ï¼šè·³è½¬åˆ°ä¸Šä¸€ä¸ªtmuxçª—å£</p><p><code>&lt;Ctrl-b&gt;h</code>ï¼šå‘å·¦åˆ‡æ¢åˆ†å±</p><p><code>&lt;Ctrl-b&gt;l</code>ï¼šå‘å³åˆ‡æ¢åˆ†å±</p><p><code>&lt;Ctrl-b&gt;s</code>ï¼šæŸ¥çœ‹æ‰€æœ‰ä¼šè¯</p><p><code>&lt;Ctrl-b&gt;d</code>ï¼šè„±ç¦»å½“å‰ä¼šè¯ã€‚d(etachï¼‰</p><p><code>tmux ls</code>ï¼šæŸ¥çœ‹ä¼šè¯åˆ—è¡¨</p><p><code>tmux new -s &lt;session_name&gt;</code>ï¼šåˆ›å»ºä¼šè¯</p><p><code>tmux att -t &lt;session_name&gt;</code>ï¼šé“¾æ¥ä¼šè¯ã€‚att(ach)</p><p>è¯¾åç»ƒä¹ </p><blockquote><p>åœ¨ç³»ç»Ÿæˆ–è€…æœåŠ¡å™¨ä¸Šå®‰è£…tmux</p></blockquote><ul><li>ä½¿ç”¨tmuxåˆ†å‰²å±å¹•</li><li>å°è¯•ä¸€ä¸ªçª—å£ç¼–å†™ä»£ç ï¼Œå¦ä¸€ä¸ªçª—å£ä½¿ç”¨shellå‘½ä»¤</li><li>å°è¯•é€€å‡ºå’Œé‡æ–°attachåˆ°ä¸€ä¸ªtmuxçš„ä¼šè¯</li></ul><h3 id="5-2-æ— å¤„ä¸åœ¨çš„-vimï¼Œè®©-vim-åµŒå…¥ä½ çš„å¼€å‘å·¥å…·-01-42"><a href="#5-2-æ— å¤„ä¸åœ¨çš„-vimï¼Œè®©-vim-åµŒå…¥ä½ çš„å¼€å‘å·¥å…·-01-42" class="headerlink" title="5-2 æ— å¤„ä¸åœ¨çš„ vimï¼Œè®© vim åµŒå…¥ä½ çš„å¼€å‘å·¥å…· (01:42)"></a>5-2 æ— å¤„ä¸åœ¨çš„ vimï¼Œè®© vim åµŒå…¥ä½ çš„å¼€å‘å·¥å…· (01:42)</h3><p>å‡ ä¹æµè¡Œçš„ç¼–è¾‘å™¨å’ŒIDEéƒ½æ”¯æŒVIMæ’ä»¶</p><blockquote><p>è®©vimåµŒå…¥å¼€å‘å·¥å…·ï¼Œç”šè‡³Chromeéƒ½æœ‰vimiumæ’ä»¶</p></blockquote><ul><li>å³ä½¿ä¸ç”¨vimä½œä¸ºä¸»åŠ›ç¼–è¾‘å™¨ï¼Œä¾ç„¶å¯ä»¥ä½¿ç”¨å®ƒçš„ç¼–è¾‘æ–¹å¼</li><li>å‡ ä¹æµè¡Œçš„å¼€å‘å·¥å…·éƒ½æ”¯æŒvimæ’ä»¶ï¼Œä»¥vimçš„æ–¹å¼ç¼–è¾‘</li><li>æ¯”å¦‚VSCode/Atom/PyCharmç­‰éƒ½æ”¯æŒå®‰è£…vimæ’ä»¶</li></ul><p>è¯¾åç»ƒä¹ </p><ul><li>æœç´¢ç›¸åº”å¼€å‘å·¥å…·çš„vimæ’ä»¶</li><li>å®‰è£…vimæ’ä»¶åˆ°å¼€å‘å·¥å…·é‡Œ</li><li>å°è¯•åœ¨å„ç§å¼€å‘å·¥å…·ä¸­ä½¿ç”¨vimçš„æ–¹å¼ç¼–è¾‘æå‡æ•ˆç‡</li></ul><h3 id="5-3-ä¸æ—¶ä¿±è¿›çš„-vim-ä¹‹-neovim-02-07"><a href="#5-3-ä¸æ—¶ä¿±è¿›çš„-vim-ä¹‹-neovim-02-07" class="headerlink" title="5-3 ä¸æ—¶ä¿±è¿›çš„ vim ä¹‹ neovim (02:07)"></a>5-3 ä¸æ—¶ä¿±è¿›çš„ vim ä¹‹ neovim (02:07)</h3><p>Neovim</p><blockquote><p>ä¸€ä¸ªæ–°çš„vimç‰ˆæœ¬ï¼Œæ”¯æŒå¼‚æ­¥ç‰¹æ€§ï¼ˆvim8ä¹Ÿæ”¯æŒï¼‰</p></blockquote><ul><li><a href="https://neovim.io/" target="_blank" rel="noopener">https://neovim.io/</a></li><li><a href="https://github.com/neovim/neovim" target="_blank" rel="noopener">https://github.com/neovim/neovim</a></li><li>å¼€å‘æ›´æ´»è·ƒï¼Œæ›´ä¸°å¯Œçš„ç‰¹æ€§å’Œæ‰©å±•å¼‚æ­¥æ”¯æŒ</li><li>neovimçš„è®¾è®¡å¯ä»¥åµŒå…¥åˆ°å¾ˆå¤šGUIé‡Œï¼ŒåŠ ä¸Šå¥½çœ‹çš„å¤–å£³</li></ul><p>æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ä½¿ç”¨neovimä»£æ›¿vimå•¦ï¼</p><h3 id="5-4-ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œä½¿ç”¨å¼ºå¤§çš„å¼€æºé…ç½®-03-37"><a href="#5-4-ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œä½¿ç”¨å¼ºå¤§çš„å¼€æºé…ç½®-03-37" class="headerlink" title="5-4 ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œä½¿ç”¨å¼ºå¤§çš„å¼€æºé…ç½® (03:37)"></a>5-4 ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œä½¿ç”¨å¼ºå¤§çš„å¼€æºé…ç½® (03:37)</h3><p>å¼€ç®±å³ç”¨</p><blockquote><p>å¦‚æœä½ å·²ç»ç†Ÿæ‚‰äº†vimé…ç½®ï¼Œå¯ä»¥ä»ç½‘ä¸Šç›´æ¥ä½¿ç”¨ä¸€äº›å¼€æºé…ç½®</p></blockquote><ul><li><a href="https://github.com/SpaceVim/SpaceVim" target="_blank" rel="noopener">https://github.com/SpaceVim/SpaceVim</a></li><li><a href="https://github.com/pegasuswang/vim-config" target="_blank" rel="noopener">https://github.com/pegasuswang/vim-config</a></li><li>å…¶ä»–å¼€æºé…ç½®ã€‚ä¸æ¨èæ–°æ‰‹ç›´æ¥ä½¿ç”¨ï¼Œè¶Šå¤æ‚çš„é…ç½®ä¸Šæ‰‹æˆæœ¬è¶Šé«˜</li></ul><p>è¯¾åç»ƒä¹ </p><ul><li>æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å¼€æºé…ç½®ï¼Œå°è¯•å®‰è£…å®ƒ</li><li>é˜…è¯»å…¶ä»–æ–‡æ¡£ï¼Œäº†è§£ä½¿ç”¨æ–¹å¼ã€‚ä¸€èˆ¬å¼€æºé…ç½®éƒ½å®‰è£…äº†å¾ˆå¤šæ’ä»¶</li><li>å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œé…ç½®å¤ªå¤æ‚å¤ªå¼ºå¤§æœ‰æ—¶å€™å¯èƒ½ä¼šå‡ºç°å¾ˆå¤šå°é—®é¢˜</li></ul><h2 id="ç¬¬6ç« -Vimè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…Vimå¦‚åˆæ‹"><a href="#ç¬¬6ç« -Vimè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…Vimå¦‚åˆæ‹" class="headerlink" title="ç¬¬6ç«  Vimè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…Vimå¦‚åˆæ‹~"></a>ç¬¬6ç«  Vimè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…Vimå¦‚åˆæ‹~</h2><blockquote><p>Vimè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…Vimå¦‚åˆæ‹~</p></blockquote><h3 id="6-1-è¯¾ç¨‹æ€»ç»“-vimè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…-vim-å¦‚åˆæ‹-03-17"><a href="#6-1-è¯¾ç¨‹æ€»ç»“-vimè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…-vim-å¦‚åˆæ‹-03-17" class="headerlink" title="6-1 è¯¾ç¨‹æ€»ç»“-vimè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾… vim å¦‚åˆæ‹ (03:17)"></a>6-1 è¯¾ç¨‹æ€»ç»“-vimè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾… vim å¦‚åˆæ‹ (03:17)</h3><p>å¯ä»¥ç”¨ä¸€ç”Ÿçš„ç¼–è¾‘å™¨</p><blockquote><p>vimä»è¯ç”Ÿåˆ°ç°åœ¨å·²ç»èµ°è¿‡äº†å¿«30ä¸ªå¹´å¤´</p></blockquote><ul><li>å‡ åå¹´ä¹‹é—´ï¼Œæ— æ•°çš„ç¼–è¾‘å™¨æˆ–è€…å¼€å‘å·¥å…·æ˜™èŠ±ä¸€ç°</li><li>ä½†æ˜¯vimä¸€ç›´åˆ°ç°åœ¨ä¾ç„¶æœ‰å¾ˆå¤šäººåœ¨ä½¿ç”¨ï¼Œç”šè‡³åµŒå…¥åˆ°å„ç§å¼€å‘å·¥å…·</li><li>å¦‚ä»Švim/neovimä¾ç„¶åœ¨æ´»è·ƒå¼€å‘ï¼Œå¾ˆå¤šå¼€å‘è€…è´¡çŒ®æ’ä»¶</li></ul><p>å­¦ä¹ æ–¹æ³•</p><blockquote><p>ç†Ÿæ‚‰vimé çš„æ˜¯è‚Œè‚‰è®°å¿†ã€‚è„±ç¦»é¼ æ ‡ç¼–è¾‘èƒ½æå‡ç¼–è¾‘æ•ˆç‡</p></blockquote><ul><li>è®²äº†å¾ˆå¤šï¼Œä½†æ˜¯vimä¸­ä¾ç„¶æœ‰å¾ˆå¤šä¸œè¥¿æ²¡æœ‰è®²åˆ°ï¼Œæ—¶ä¸æ—¶å‘ç°ä¸€äº›ä½¿ç”¨æŠ€å·§</li><li>åœ¨å­¦ä¸­ç»ƒï¼Œåœ¨ç»ƒä¸­å­¦ã€‚ç†Ÿèƒ½ç”Ÿå·§ï¼Œè‚Œè‚‰è®°å¿†</li><li>è¡¡é‡æŠ•å…¥äº§å‡ºæ¯”ï¼Œæ˜¯ç‚¹åˆ°ä¸ºæ­¢è¿˜æ˜¯ç»§ç»­æ·±å…¥</li></ul><p>ç»§ç»­ç»ƒçº§</p><blockquote><p>ç½‘ç»œä¸Šæœ‰å¾ˆå¤švimçš„èµ„æºï¼Œç”šè‡³ç»ƒä¹ çš„å°æ¸¸æˆ</p></blockquote><ul><li>ã€ŠPractical vimã€‹ã€ä¸­æ–‡ç‰ˆã€ŠVimå®ç”¨æŠ€å·§ã€‹</li><li>ã€Šç¬¨æ–¹æ³•å­¦vimscriptã€‹</li><li>å­¦ä¹ å’Œå¼€å‘è‡ªå·±çš„æ’ä»¶</li></ul><h2 id="vimé…ç½®"><a href="#vimé…ç½®" class="headerlink" title="vimé…ç½®"></a>vimé…ç½®</h2><pre><code class="shell">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;                                 Sample vimrc                                 &quot;&quot;                                                                              &quot;&quot;                                 Provided by:                                 &quot;&quot;                                     Tuyk                                     &quot;&quot;                                                                              &quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;syntax on &quot; è‡ªåŠ¨è¯­æ³•é«˜äº®&quot; colorscheme xcode-default &quot; æ›´æ¢ä¸»é¢˜é…è‰²&quot; ======================...Basic Start...====================== &quot;&quot; Turn on line numbering &quot; æ˜¾ç¤ºè¡Œå·set number&quot; Save 1,000 items in history &quot; è®¾ç½®å†å²è¡Œå·set history=1000&quot; Show the line and column number of the cursor position &quot; è®¾ç½®å…‰æ ‡çš„ä½ç½®å€¼set ruler&quot; Display the incomplete commands in the bottom right-hand side of your screen.  set showcmd&quot; Display completion matches on your status lineset wildmenu&quot; Show a few lines of context around the cursorset scrolloff=5&quot; Highlight search matches &quot; è®¾ç½®æŸ¥æ‰¾çš„å€¼é«˜äº®æ˜¾ç¤ºset hlsearch&quot; Enable incremental searching &quot; è®¾ç½®è¾¹æœç´¢è¾¹é«˜äº®set incsearch&quot; Ignore case when searching &quot; è®¾ç½®å¿½ç•¥æŸ¥æ‰¾é€‰é¡¹çš„å¤§å°å†™set ignorecase&quot; Override the &#39;ignorecase&#39; option if the search pattern contains upper case characters.set smartcase&quot; Turn on file backupsset backup&quot; Don&#39;t line wrap mid-word.set lbr&quot; Copy the indentation from the current line. &quot; è®¾ç½®è‡ªåŠ¨å¤åˆ¶ä¸Šä¸€è¡Œçš„ç¼©è¿›åˆ°ä¸‹ä¸€è¡Œset autoindent&quot; Enable smart autoindenting. &quot; è®¾ç½®è‡ªåŠ¨è¯†åˆ«â€œ{}â€ç¼©è¿›ï¼Œå†™ä»£ç éå¸¸æœ‰ç”¨set smartindent&quot; Use spaces instead of tabs &quot; ä½¿ç”¨ç©ºæ ¼æ›¿æ¢tabset expandtab&quot; Enable smart tabsset smarttab&quot; Make a tab equal to 4 spacesset shiftwidth=4 &quot; é»˜è®¤ç¼©è¿›4ä¸ªç©ºæ ¼set tabstop=4 &quot; tab ä»£è¡¨4ä¸ªç©ºæ ¼set softtabstop=4 &quot; ä½¿ç”¨tabæ—¶ tabç©ºæ ¼æ•°&quot; æŒ‰F2è¿›å…¥ç²˜è´´æ¨¡å¼set pastetoggle=&lt;F2&gt;&quot; è®¾ç½®æŠ˜å æ–¹å¼&quot; set foldmethod=indent&quot; å¼€å¯ç³»ç»Ÿå‰ªè´´æ¿set clipboard=unnamed&quot; è§£å†³ä¸­æ–‡ä¹±ç set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936set termencoding=utf-8set encoding=utf-8&quot; Tell vim what background you are using &quot; è®¾ç½®èƒŒæ™¯é¢œè‰²&quot; set bg=light&quot; set bg=dark&quot; é€€æ ¼åˆ é™¤é”®ä¸èƒ½ç”¨set backspace=indent,eol,start&quot; ======================...Basic End...====================== &quot;&quot; ======================...Mapping Start...====================== &quot;&quot; Map Y to act like D and C, i.e. yank until EOL, rather than act like yy &quot; Map æ˜ å°„&quot; map Y y$&quot; Remap VIM 0 to first non-blank character&quot; map 0 ^noremap &lt;space&gt; viw&quot; change the mapleader from \ to , &quot; ä¸€äº›æ–¹ä¾¿çš„æ˜ å°„&quot; NOTE: This has to be set before &lt;leader&gt; is used.let mapleader=&#39;,&#39;let g:mapleader=&#39;,&#39;&quot; ä½¿ç”¨ jj è¿›å…¥ normalæ¨¡å¼inoremap jj &lt;Esc&gt;`^&quot; ä½¿ç”¨ &lt;leader&gt;+w ç›´æ¥ä¿å­˜inoremap &lt;leader&gt;w &lt;Esc&gt;:w!&lt;cr&gt;noremap &lt;leader&gt;w :w!&lt;cr&gt;&quot; åˆ‡æ¢ buffernnoremap &lt;silent&gt; [p :bprevious&lt;cr&gt;nnoremap &lt;silent&gt; [n :bnext&lt;cr&gt;&quot; use ctrl+h/j/k/l switch windownoremap &lt;C-h&gt; &lt;C-w&gt;hnoremap &lt;C-j&gt; &lt;C-w&gt;jnoremap &lt;C-k&gt; &lt;C-w&gt;knoremap &lt;C-l&gt; &lt;C-w&gt;l&quot; Sudo to writecnoremap w!! w !sudo tee % &gt;/dev/null&quot; NERDTreemap &lt;leader&gt;v :NERDTreeFind&lt;CR&gt;map &lt;leader&gt;g :NERDTreeToggle&lt;CR&gt;&quot; ctrlp.vimlet g:ctrlp_map = &#39;&lt;c-p&gt;&#39;&quot; vim-easymotionnmap ss &lt;Plug&gt;(easymotion-s2)&quot; vim-goautocmd BufNewFile,BufRead *.go setlocal noexpandtab tabstop=4 shiftwidth=4&quot; python-modelet g:pymode_python = &#39;python3&#39;let g:pymode_trim_whitespaces = 1let g:pymode_doc = 1let g:pymode_doc_bind = &#39;K&#39;let g:pymode_rope_goto_definition_bind = &#39;&lt;C-]&gt;&#39;let g:pymode_lint = 1let g:pymode_lint_checkers = [&#39;pyflakes&#39;, &#39;pep8&#39;, &#39;mccabe&#39;, &#39;pylint&#39;]let g:pymode_options_max_line_length = 120&quot; tagbarnnoremap &lt;leader&gt;t :TagbarToggle&lt;CR&gt;&quot; deoplete.nvimlet g:deoplete#enable_at_startup = 1set completeopt -=preview &quot; å…³é—­é¢„è§ˆçª—å£&quot; vim-gitgutterset updatetime =100&quot; ======================...Mapping End...====================== &quot;&quot; ============================================================================== &quot;&quot; json æ ¼å¼åŒ–com! FormatJSON %!python3 -m json.tool&quot; ============================================================================== &quot;&quot; ======================...Plugins Start...====================== &quot;&quot; æ’ä»¶è®¾ç½®ï¼Œè¿™é‡Œä½¿ç”¨äº† vim-plugcall plug#begin(&#39;~/.vim/plugged&#39;)&quot; å®‰è£…æ’ä»¶åªéœ€è¦æŠŠ github åœ°å€æ”¾åˆ°è¿™é‡Œé‡å¯åæ‰§è¡Œ :PlugInstall å°±å¥½äº†Plug &#39;mhinz/vim-startify&#39;Plug &#39;vim-airline/vim-airline&#39;Plug &#39;vim-airline/vim-airline-themes&#39;Plug &#39;Yggdroot/indentLine&#39;Plug &#39;scrooloose/nerdtree&#39;Plug &#39;ctrlpvim/ctrlp.vim&#39;Plug &#39;easymotion/vim-easymotion&#39;Plug &#39;tpope/vim-surround&#39;Plug &#39;junegunn/fzf&#39;, { &#39;dir&#39;: &#39;~/.fzf&#39;, &#39;do&#39;: &#39;./install --all&#39; }Plug &#39;junegunn/fzf.vim&#39;Plug &#39;ggreer/the_silver_searcher&#39;Plug &#39;brooth/far.vim&#39;Plug &#39;fatih/vim-go&#39;, { &#39;do&#39;: &#39;:GoUpdateBinaries&#39; }Plug &#39;python-mode/python-mode&#39;, { &#39;for&#39;: &#39;python&#39;, &#39;branch&#39;: &#39;develop&#39; }Plug &#39;majutsushi/tagbar&#39;Plug &#39;lfv89/vim-interestingwords&#39;if has(&#39;nvim&#39;)  Plug &#39;Shougo/deoplete.nvim&#39;, { &#39;do&#39;: &#39;:UpdateRemotePlugins&#39; }else  Plug &#39;Shougo/deoplete.nvim&#39;  Plug &#39;roxma/nvim-yarp&#39;  Plug &#39;roxma/vim-hug-neovim-rpc&#39;endifPlug &#39;neoclide/coc.nvim&#39;, {&#39;branch&#39;: &#39;release&#39;}Plug &#39;sbdchd/neoformat&#39;Plug &#39;dense-analysis/ale&#39;Plug &#39;tpope/vim-commentary&#39;Plug &#39;tpope/vim-fugitive&#39;Plug &#39;airblade/vim-gitgutter&#39;Plug &#39;junegunn/gv.vim&#39;call plug#end()&quot; æ’ä»¶ç›¸å…³é…ç½®&quot; ç¦æ­¢ stratify è‡ªåŠ¨åˆ‡æ¢ç›®å½•let g:startify_change_to_dir = 0&quot; å¯åŠ¨æ—¶è‡ªåŠ¨æ‰“å¼€NERDTree&quot; autocmd vimenter * NERDTree&quot; ======================...Plugins End...====================== &quot;&quot; ======================...Function Start...====================== &quot;&quot; å®šä¹‰å‡½æ•°SetTitleï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´func SetTitle()    if &amp;filetype == &#39;python&#39;        call setline(1, &quot;\#!/usr/bin/env python&quot;)        call setline(2, &quot;\# -*- coding:utf-8 -*-&quot;)        normal G        normal o        normal o        call setline(5, &quot;if __name__ == &#39;__main__&#39;:&quot;)        call setline(6, &quot;    pass&quot;)    endifendfunc&quot; ======================...Function End...====================== &quot;&quot; For more options see &quot;:help option-list&quot; and &quot;:options&quot;.</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1049-ä¼˜é›…ç©è½¬Vim</title>
      <link href="/imooc/1049-vim/"/>
      <url>/imooc/1049-vim/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/1049" target="_blank" rel="noopener">https://www.imooc.com/learn/1049</a></p><p>ç®€ä»‹ï¼šVimä½œä¸ºLinux å¹³å°é¦–é€‰ç¼–è¾‘å™¨ï¼Œæ— è®ºæ˜¯è¿ç»´è¿˜æ˜¯å¼€å‘ç­‰ITäººå‘˜éƒ½åº”è¯¥ç³»ç»Ÿåœ°å­¦ä¹ ä¸‹è¿™æ¬¾ä¼˜ç§€ç»å…¸çš„ä¸Šå¤ç¥å™¨ã€‚æœ¬è¯¾ç¨‹ç³»ç»Ÿæç‚¼vim çš„ç²¾åã€é€šè¿‡æŠ›ç –å¼•ç‰æŠŠå®ƒå±•ç°åˆ°ä½ çš„é¢å‰ï¼Œæ›´èƒ½è®©ä½ çš„å·¥ä½œå¦‚è™æ·»ç¿¼ã€äº‹åŠåŠŸå€ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>Vimè¯¾ç¨‹ä»‹ç»ã€‚</p></blockquote><h3 id="1-1-è¯¾ç¨‹ç®€ä»‹-04-34"><a href="#1-1-è¯¾ç¨‹ç®€ä»‹-04-34" class="headerlink" title="1-1 è¯¾ç¨‹ç®€ä»‹ (04:34)"></a>1-1 è¯¾ç¨‹ç®€ä»‹ (04:34)</h3><p>åœ¨æ‰€æœ‰çš„ç±»Unixæ“ä½œç³»ç»Ÿä¸­éƒ½ä¼šé»˜è®¤å†…ç½®Vi/Vimæ–‡æœ¬ç¼–è¾‘å™¨</p><ol><li><p>Vimç®€ä»‹</p><ul><li>Vimå’ŒViçš„åŒºåˆ«</li><li>Vimrcé…ç½®</li><li>Vimå››ç§æ¨¡å¼</li></ul></li><li><p>åŸºç¡€å…¥é—¨</p><ul><li>Vimå¯„å­˜å™¨ï¼ˆç±»ä¼¼äºWindowsçš„ç²˜è´´æ¿ï¼‰</li><li>å¢æŸ¥åˆ æ”¹ç­‰å¸¸è§„æ“ä½œï¼ˆå¿«æ·é”®ã€æŒ‰é”®ï¼‰</li><li>Vimç»„åˆè§„å¾‹</li></ul></li><li><p>é«˜çº§åŠŸèƒ½</p><ul><li>ç¼“å†²åŒºä¸å¤šæ–‡ä»¶ç¼–è¾‘</li><li>å¤šçª—å£ä¸æ ‡ç­¾åˆ†ç»„</li><li>æ–‡æœ¬å¯¹è±¡å’Œå®</li><li>Visualæ¨¡å¼</li></ul></li></ol><h2 id="ç¬¬2ç« -Vimç®€ä»‹"><a href="#ç¬¬2ç« -Vimç®€ä»‹" class="headerlink" title="ç¬¬2ç«  Vimç®€ä»‹"></a>ç¬¬2ç«  Vimç®€ä»‹</h2><blockquote><p>ä¸ºä»€ä¹ˆé€‰æ‹©Vimä½œä¸ºç¼–è¾‘å™¨ï¼ŒVimå®‰è£…ä¸ç®€æ´Vimrcé…ç½®</p></blockquote><h3 id="2-1-vimä»‹ç»åŠVimrc-18-02"><a href="#2-1-vimä»‹ç»åŠVimrc-18-02" class="headerlink" title="2-1 vimä»‹ç»åŠVimrc (18:02)"></a>2-1 vimä»‹ç»åŠVimrc (18:02)</h3><p>Vimä»‹ç»ï¼š</p><ul><li>Vimæ˜¯ä¸€ä¸ªUnixä»¥åŠç±»Unixæ–‡æœ¬ç¼–è¾‘å™¨</li><li>ç‰¹ç‚¹ï¼šåŠŸèƒ½å¼ºå¤§ã€é«˜åº¦å¯å®šåˆ¶(Vimrcã€æ’ä»¶ç­‰)</li></ul><p>Vim vs Viï¼š</p><blockquote><p>Vim = Vi + IMproved</p></blockquote><ul><li>å¤šçº§æ’¤é”€</li><li>è¯­æ³•åŠ äº®å’Œè‡ªåŠ¨è¡¥å…¨</li><li>æ”¯æŒå¤šç§æ’ä»¶</li><li>é€šè¿‡ç½‘ç»œåè®®ï¼ˆHTTP/SSHï¼‰ç¼–è¾‘æ–‡ä»¶</li><li>å¤šæ–‡ä»¶ç¼–è¾‘</li><li>Vimå¯ä»¥ç¼–è¾‘å‹ç¼©æ ¼å¼æ–‡ä»¶ï¼ˆgzipã€zipç­‰ï¼‰</li></ul><p>Vimrcæ¦‚è¿°ï¼š</p><ul><li>rc = run command</li><li>ç³»ç»Ÿçº§vimrcå’Œç”¨æˆ·çº§vimrc</li><li>æ¯ä¸€è¡Œä½œä¸ºä¸€ä¸ªå‘½ä»¤æ‰§è¡Œ</li></ul><p>Vimrcä½¿ç”¨ï¼š</p><blockquote><p>é»˜è®¤.Vimrcæ˜¯æ²¡æœ‰å¾—ã€‚éœ€è¦ç”¨æˆ·è‡ªå·±æ‰‹åŠ¨åˆ›å»ºã€‚Vim ä¼šè‡ªåŠ¨æœç´¢åˆ°ã€‚</p></blockquote><ul><li><p><code>:h vimrc</code> æŸ¥çœ‹Vimrcæ–‡æ¡£</p></li><li><p><code>:version</code> æŸ¥çœ‹vimç‰ˆæœ¬</p></li><li><p><code>vim &lt;filename&gt;</code> æˆ– <code>:e &lt;filename&gt;</code> æ‰“å¼€æ–‡ä»¶ğŸ“ƒ</p></li><li><p><code>â€œ</code> æ³¨é‡Š</p></li><li><p>Vimrc-Sampleï¼š<a href="https://raw.githubusercontent.com/yangvipguang/vimrc-sample/master/vimrc-sample" target="_blank" rel="noopener">https://raw.githubusercontent.com/yangvipguang/vimrc-sample/master/vimrc-sample</a></p></li></ul><pre><code class="shell">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;                                 Sample vimrc                                 &quot;&quot;                                                                              &quot;&quot;                                 Provided by:                                 &quot;&quot;                                     Tuyk                                     &quot;&quot;                                                                              &quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;syntax on &quot; è‡ªåŠ¨è¯­æ³•é«˜äº®&quot; Save 1,000 items in history &quot; è®¾ç½®å†å²è¡Œå·set history=1000&quot; Show the line and column number of the cursor position &quot; è®¾ç½®å…‰æ ‡çš„ä½ç½®å€¼set ruler&quot; Display the incomplete commands in the bottom right-hand side of your screen.  set showcmd&quot; Display completion matches on your status lineset wildmenu&quot; Show a few lines of context around the cursorset scrolloff=5&quot; Highlight search matches &quot; è®¾ç½®æŸ¥æ‰¾çš„å€¼é«˜äº®æ˜¾ç¤ºset hlsearch&quot; Enable incremental searching &quot; è®¾ç½®è¾¹æœç´¢è¾¹é«˜äº®set incsearch&quot; Ignore case when searching &quot; è®¾ç½®å¿½ç•¥æŸ¥æ‰¾é€‰é¡¹çš„å¤§å°å†™set ignorecase&quot; Override the &#39;ignorecase&#39; option if the search pattern contains upper case characters.set smartcase&quot; Turn on line numbering &quot; æ˜¾ç¤ºè¡Œå·set number&quot; Turn on file backupsset backup&quot; Don&#39;t line wrap mid-word.set lbr&quot; Copy the indentation from the current line. &quot; è®¾ç½®è‡ªåŠ¨å¤åˆ¶ä¸Šä¸€è¡Œçš„ç¼©è¿›åˆ°ä¸‹ä¸€è¡Œset autoindent&quot; Enable smart autoindenting. &quot; è®¾ç½®è‡ªåŠ¨è¯†åˆ«â€œ{}â€ç¼©è¿›ï¼Œå†™ä»£ç éå¸¸æœ‰ç”¨set smartindent&quot; Use spaces instead of tabs &quot; ä½¿ç”¨ç©ºæ ¼æ›¿æ¢tabset expandtab&quot; Enable smart tabsset smarttab&quot; Make a tab equal to 4 spacesset shiftwidth=4 &quot; é»˜è®¤ç¼©è¿›4ä¸ªç©ºæ ¼set tabstop=4 &quot; tab ä»£è¡¨4ä¸ªç©ºæ ¼set softtabstop=4 &quot; ä½¿ç”¨tabæ—¶ tabç©ºæ ¼æ•°&quot; Specifiy a color scheme.colorscheme slate&quot; Tell vim what background you are using &quot; è®¾ç½®èƒŒæ™¯é¢œè‰²&quot; set bg=light&quot; set bg=dark&quot; Map Y to act like D and C, i.e. yank until EOL, rather than act like yy &quot; Map æ˜ å°„&quot; map Y y$&quot; Remap VIM 0 to first non-blank character&quot; map 0 ^&quot; Easily create HTML unorded lists. &quot; map &lt;F3&gt; i&lt;ul&gt;&lt;CR&gt;&lt;Space&gt;&lt;Space&gt;&lt;li&gt;&lt;/li&gt;&lt;CR&gt;&lt;Esc&gt;I&lt;/ul&gt;&lt;Esc&gt;kcit&quot; map &lt;F4&gt; &lt;Esc&gt;o&lt;li&gt;&lt;/li&gt;&lt;Esc&gt;cit&quot; change the mapleader from \ to ,&quot; NOTE: This has to be set before &lt;leader&gt; is used.&quot; let mapleader=&quot;,&quot;&quot; Quickly save your file.&quot; map &lt;leader&gt;w :w!&lt;cr&gt;&quot; For more options see &quot;:help option-list&quot; and &quot;:options&quot;.</code></pre><h3 id="2-2-vimçš„å››ç§æ¨¡å¼-05-22"><a href="#2-2-vimçš„å››ç§æ¨¡å¼-05-22" class="headerlink" title="2-2 vimçš„å››ç§æ¨¡å¼ (05:22)"></a>2-2 vimçš„å››ç§æ¨¡å¼ (05:22)</h3><ol><li>æ™®é€šæ¨¡å¼<ul><li>æ‰“å¼€çš„é»˜è®¤æ¨¡å¼</li><li>ç§»æŸ¥åˆ æ”¹</li></ul></li><li>å¯è§†åŒ–æ¨¡å¼<ul><li>å¯¹ä¸€å—åŒºåŸŸæ“ä½œ</li></ul></li><li>æ’å…¥æ¨¡å¼<ul><li>æ·»åŠ æ–‡æœ¬</li></ul></li><li>å‘½ä»¤æ¨¡å¼<ul><li>å’Œæ™®é€šæ¨¡å¼ç±»ä¼¼</li></ul></li></ol><p><code>v</code>ï¼šè¿›å…¥å¯è§†åŒ–æ¨¡å¼</p><p><code>i</code>ï¼šè¿›å…¥æ’å…¥æ¨¡å¼</p><p><code>:</code>ï¼šä½¿ç”¨å‘½ä»¤æ¨¡å¼</p><p><code>dd</code>ï¼šåˆ é™¤</p><p><code>Esc</code>ï¼šè¿”å›æ™®é€šæ¨¡å¼</p><p><code>:h vim-modes-intro</code>ï¼šæŸ¥çœ‹vimæ¨¡å¼æ–‡æ¡£ï¼ˆ7ç§ï¼‰</p><h2 id="ç¬¬3ç« -VimåŸºç¡€å…¥é—¨"><a href="#ç¬¬3ç« -VimåŸºç¡€å…¥é—¨" class="headerlink" title="ç¬¬3ç«  VimåŸºç¡€å…¥é—¨"></a>ç¬¬3ç«  VimåŸºç¡€å…¥é—¨</h2><blockquote><p>æœ¬ç« ä¸»è¦è®²è§£ç§»åŠ¨ã€è·³è½¬ä¸ç¼©è¿›ï¼Œåˆ é™¤ã€å¤åˆ¶ä¸ç²˜è´´ï¼Œä¿®æ”¹ã€æŸ¥æ‰¾ä¸æ›¿æ¢ç›¸å…³å†…å®¹ã€‚</p></blockquote><h3 id="3-1-ç§»åŠ¨ã€è·³è½¬ä¸ç¼©è¿›-07-55"><a href="#3-1-ç§»åŠ¨ã€è·³è½¬ä¸ç¼©è¿›-07-55" class="headerlink" title="3-1 ç§»åŠ¨ã€è·³è½¬ä¸ç¼©è¿› (07:55)"></a>3-1 ç§»åŠ¨ã€è·³è½¬ä¸ç¼©è¿› (07:55)</h3><p>Vimå¸ƒå±€èµ·æº</p><ul><li><p>Vimæœ€åˆçš„ä½œè€…Bill Joyä½¿ç”¨çš„æœºå™¨ADM-3Aç»ˆç«¯æœº</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghbdnjipj31bs0fmgod.jpg" alt="ADM-3Aç»ˆç«¯æœº" style="zoom:30%;" /><p>æ³¨æ„çœ‹ä¸Šä¸‹å·¦å³é”®çš„ä½ç½®</p></li></ul><p><strong>å…‰æ ‡ç§»åŠ¨ï¼š</strong></p><table><thead><tr><th>å¿«æ·é”®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>h</code></td><td>å·¦ç§»</td></tr><tr><td><code>l</code></td><td>å³ç§»</td></tr><tr><td><code>j</code></td><td>ä¸‹ç§»</td></tr><tr><td><code>k</code></td><td>ä¸Šç§»</td></tr><tr><td><code>shift+6</code>/<code>0</code></td><td>ç§»åŠ¨åˆ°è¡Œé¦–<code>^</code>/åŒ…å«ç¼©è¿›ç©ºæ ¼</td></tr><tr><td><code>shift+4</code></td><td>ç§»åŠ¨åˆ°è¡Œå°¾<code>$</code></td></tr></tbody></table><p><strong>å•è¯å’Œå­—ç¬¦ç§»åŠ¨ï¼š</strong></p><table><thead><tr><th>å¿«æ·é”®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>w/W</td><td>æ­£å‘ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯å¼€å¤´(å°å†™è¯†åˆ«ç‰¹æ®Šå­—ç¬¦)</td></tr><tr><td>e/E</td><td>æ­£å‘ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯ç»“å°¾</td></tr><tr><td>b/B</td><td>åå‘ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯å¼€å¤´</td></tr><tr><td>ge</td><td>åå‘ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯ç»“å°¾</td></tr></tbody></table><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghbf4b5oj30ja0asmxt.jpg" alt="å•è¯å’Œå­—ç¬¦ç§»åŠ¨" style="zoom:50%;" /><p><strong>è·³è½¬ï¼š</strong></p><table><thead><tr><th>å¿«æ·é”®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>control+b/B</code></td><td>ä¸Šä¸€é¡µ</td></tr><tr><td><code>control+f/F</code></td><td>ä¸‹ä¸€é¡µ</td></tr><tr><td><code>control+u/d</code></td><td>å‘ä¸Š/ä¸‹ç¿»åŠé¡µ</td></tr><tr><td><code>gg</code></td><td>è·³è½¬åˆ°æ–‡ä»¶ğŸ“é¦–è¡Œ</td></tr><tr><td><code>G</code></td><td>è·³è½¬åˆ°æ–‡ä»¶ğŸ“å°¾è¡Œ</td></tr><tr><td><code>&lt;line_number&gt;gg/G</code></td><td>è·³è½¬åˆ°æŒ‡å®šè¡Œ</td></tr><tr><td><code>{g}+control+g/G</code></td><td>æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯/{g}æ›´åŠ è¯¦ç»†</td></tr></tbody></table><p><strong>ç¼©è¿›ï¼š</strong></p><table><thead><tr><th>å¿«æ·é”®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>&gt;&gt;</code>===<code>:&gt;</code></td><td>å³ç¼©è¿›(æ™®é€šæ¨¡å¼)</td></tr><tr><td><code>&lt;&lt;</code>===<code>:&lt;</code></td><td>å·¦ç¼©è¿›(æ™®é€šæ¨¡å¼)</td></tr><tr><td><code>:m,n&gt;</code>===<code>:m&gt;(n-m+1)</code></td><td>måˆ°nè¡Œç¼©è¿›(å‘½ä»¤è¡Œæ¨¡å¼)</td></tr><tr><td><code>:m&gt;n</code>===<code>:m,m+n-1&gt;</code></td><td>mè¡Œå¼€å§‹,å…±nè¡Œç¼©è¿›ä¸€æ¬¡(å‘½ä»¤è¡Œæ¨¡å¼)</td></tr></tbody></table><h3 id="3-2-åˆ é™¤ã€å¤åˆ¶ä¸ç²˜è´´-25-41"><a href="#3-2-åˆ é™¤ã€å¤åˆ¶ä¸ç²˜è´´-25-41" class="headerlink" title="3-2 åˆ é™¤ã€å¤åˆ¶ä¸ç²˜è´´ (25:41)"></a>3-2 åˆ é™¤ã€å¤åˆ¶ä¸ç²˜è´´ (25:41)</h3><table><thead><tr><th>Windows</th><th>Vim</th><th>ä¸åŒå¤„</th></tr></thead><tbody><tr><td>cut</td><td>delete</td><td>å’Œå‰ªåˆ‡ç›¸åŒï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ é™¤</td></tr><tr><td>copy</td><td>yank</td><td>ç­‰åŒäºå¤åˆ¶,ç”±äºcç”¨äº(change)è¢«è¿«é€‰äº†yank</td></tr><tr><td>paste</td><td>put</td><td>ç²˜è´´å®Œå…¨ç›¸åŒ</td></tr></tbody></table><p>Vimç‰¹æ€§</p><ul><li><p>å¯„å­˜å™¨ï¼ˆä¿å­˜ä¸´æ—¶æ•°æ®ï¼‰</p><table><thead><tr><th align="left">ç±»å‹</th><th align="center">å«ä¹‰</th><th>è¡¨ç¤ºæ–¹å¼</th><th>ä¸¾ä¾‹</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td align="left">æ— åå¯„å­˜å™¨</td><td align="center">é»˜è®¤å¯„å­˜å™¨</td><td>â€œâ€</td><td>â€œâ€ p=p</td><td>ä¼šè¢«æœ€åä¸€æ¡è¦†ç›–</td></tr><tr><td align="left">æ•°å­—å¯„å­˜å™¨</td><td align="center">â€œ+{0-9}ç¼“å­˜æœ€è¿‘10æ¬¡æ“ä½œ</td><td>â€œ0â€{1-9}</td><td>â€œ0P<br />â€œ1P</td><td>0ç”¨äºå¤åˆ¶ä¸“ç”¨<br />1-9ç”¨äºæœ€è¿‘9æ¬¡è¡Œåˆ é™¤æˆ–è€…ä¿®æ”¹è®°å½•</td></tr><tr><td align="left">æœ‰åå¯„å­˜å™¨</td><td align="center">26è‹±æ–‡å­—æ¯å‘½åæœ‰åå¯„å­˜å™¨</td><td>â€œ[a-z]/[A-Z]â€</td><td>â€œayw</td><td>â€œAä¼šé€šè¿‡^Jè¿½åŠ åˆ°â€aå¯„å­˜å™¨ä¸­</td></tr><tr><td align="left">é»‘æ´å¯„å­˜å™¨</td><td align="center">æœ‰å»æ— å›</td><td>â€œ-</td><td>â€œ_dw</td><td>åªæƒ³åˆ é™¤è€Œä¸æƒ³è¦†ç›–æ— åå¯„å­˜å™¨</td></tr></tbody></table><p><code>:register</code>/<code>:reg</code>ï¼šè¿›å…¥å¯„å­˜å™¨</p><p><code>:h reg</code>ï¼šæŸ¥çœ‹å¯„å­˜å™¨æ–‡æ¡£</p></li></ul><p>åŸºç¡€æ“ä½œ</p><table><thead><tr><th>æŒ‰é”®æ“ä½œ</th><th>å®šä¹‰</th></tr></thead><tbody><tr><td>d = delete = cut</td><td>å‰ªåˆ‡</td></tr><tr><td>y = yank â‰ˆ copy</td><td>ç±»ä¼¼äºå¤åˆ¶</td></tr><tr><td>P/p = put â‰ˆ paste</td><td>ç²˜è´´åˆ°å…‰æ ‡å/å‰</td></tr><tr><td>u = undo</td><td>æ’¤é”€ä¹‹å‰æ“ä½œ</td></tr><tr><td>Control+r = redo</td><td>é‡åš/æ¢å¤ä¹‹å‰æ“ä½œ(åæ’¤é”€)</td></tr></tbody></table><p><code>yy</code>ï¼šå¤åˆ¶æ•´è¡Œã€‚è®°å½•åˆ°<code>&quot;&quot;</code>é»˜è®¤å¯„å­˜å™¨/æ— åå¯„å­˜å™¨ã€<code>&quot;0</code>å¯„å­˜å™¨/å¤åˆ¶ä¸“ç”¨å¯„å­˜å™¨</p><p><code>dd</code>ï¼šå‰ªåˆ‡æ•´è¡Œã€‚è®°å½•åˆ°<code>&quot;&quot;</code>é»˜è®¤å¯„å­˜å™¨/æ— åå¯„å­˜å™¨ã€<code>&quot;1</code>å¯„å­˜å™¨/å‰ªåˆ‡å¯„å­˜å™¨</p><p><code>p</code>ï¼šç²˜è´´</p><p><code>u</code>ï¼šæ’¤é”€</p><p><code>Control+r</code>ï¼šé‡åš(åæ’¤é”€)</p><p><code>&quot;ayy</code>ï¼šå¤åˆ¶æ•´è¡Œåˆ°<code>&quot;a</code>å¯„å­˜å™¨ã€‚è®°å½•åˆ°é»˜è®¤å¯„å­˜å™¨ï¼Œä¸ä¼šè®°å½•åˆ°å¤åˆ¶ä¸“ç”¨å¯„å­˜å™¨</p><p><code>&quot;_dd</code>ï¼šåˆ é™¤æ•´è¡Œã€‚ä¸ä¼šè®°å½•åˆ°ä»»ä½•å¯„å­˜å™¨ã€‚é»‘æ´å¯„å­˜å™¨</p><table><thead><tr><th>æŒ‰é”®æ“ä½œ</th><th>å®šä¹‰</th></tr></thead><tbody><tr><td>yw</td><td>å¤åˆ¶å½“å‰å…‰æ ‡å•è¯(ä»å…‰æ ‡åå¼€å§‹æˆªå–)</td></tr><tr><td>y2w</td><td>å¤åˆ¶æ­£å‘å€†ä¸ªå•è¯(ä»å…‰æ ‡åå¼€å§‹æˆªå–)</td></tr></tbody></table><p>è°ƒæ¢å­—ç¬¦</p><table><thead><tr><th>æŒ‰é”®æ“ä½œ</th><th>ç¼“å†²åŒºå†…å®¹</th></tr></thead><tbody><tr><td>{start}</td><td>Practical vim</td></tr><tr><td>F{space}</td><td>Practical vim</td></tr><tr><td>x</td><td>Practical vim</td></tr><tr><td>p</td><td>Practical vim</td></tr></tbody></table><p><code>x</code>ï¼šå‰ªåˆ‡å•ä¸ªå­—ç¬¦ã€‚è®°å½•åˆ°é»˜è®¤å¯„å­˜å™¨ã€<code>-</code>å¯„å­˜å™¨</p><p>è¡Œå‰ªåˆ‡ç²˜è´´</p><table><thead><tr><th>æŒ‰é”®æ“ä½œ</th><th>ç¼“å†²åŒºå†…å®¹</th></tr></thead><tbody><tr><td>{start}</td><td>Line1   Line2</td></tr><tr><td>dd</td><td>Line2</td></tr><tr><td>p</td><td>Line2   Line1</td></tr></tbody></table><p>è¡Œå¤åˆ¶</p><table><thead><tr><th>æŒ‰é”®æ“ä½œ</th><th>ç¼“å†²åŒºå†…å®¹</th></tr></thead><tbody><tr><td>{start}</td><td>Line1   Line2</td></tr><tr><td>yy</td><td>Line1   Line2</td></tr><tr><td>p</td><td>Line1   Line2   Line1</td></tr></tbody></table><p>ç»„åˆåˆ é™¤([count] operation [count] {motion})</p><table><thead><tr><th>æ“ä½œæŒ‰é”®</th><th>å®šä¹‰</th></tr></thead><tbody><tr><td><code>x</code>/<code>X</code></td><td>åˆ é™¤å…‰æ ‡ä¸‹/å‰å•ä¸ªå­—ç¬¦</td></tr><tr><td><code>dw</code>(d = delete,w = word)</td><td>åˆ é™¤ä¸€ä¸ªå•è¯(å¿…é¡»åœ¨è¯é¦–ğŸ‘‹)(åˆ é™¤å…‰æ ‡å¤„åˆ°å•è¯æœ«å°¾ğŸ”š)</td></tr><tr><td><code>d{hjkl}</code></td><td>åˆ é™¤åˆ°ä¸Šä¸‹å·¦å³ä¸€ä¸ªæ“ä½œå‰çš„å­—ç¬¦</td></tr><tr><td><code>d$</code>===<code>D</code></td><td>åˆ é™¤å…‰æ ‡åˆ°è¡Œå°¾çš„å­—ç¬¦</td></tr><tr><td><code>d^</code></td><td>åˆ é™¤å…‰æ ‡åˆ°è¡Œé¦–çš„å­—ç¬¦</td></tr><tr><td><code>dd</code></td><td>åˆ é™¤å½“å‰æ•´è¡Œ</td></tr><tr><td><code>{n}dd</code></td><td>å‘ä¸‹åˆ é™¤nè¡Œï¼ˆåŒ…æ‹¬å½“å‰è¡Œï¼‰</td></tr><tr><td><code>5dw</code></td><td>åˆ é™¤æ­£å‘å•è¯5æ¬¡</td></tr><tr><td><code>d3w</code></td><td>æ­£å‘åˆ é™¤3w åŠ¨ä½œ</td></tr><tr><td><code>3w</code></td><td>æ­£å‘ç§»åŠ¨å•è¯3æ¬¡</td></tr><tr><td><code>2d3w</code></td><td>æ­£å‘åˆ é™¤3w åŠ¨ä½œ 2æ¬¡</td></tr></tbody></table><h3 id="3-3-ä¿®æ”¹ã€æŸ¥æ‰¾ä¸æ›¿æ¢-15-59"><a href="#3-3-ä¿®æ”¹ã€æŸ¥æ‰¾ä¸æ›¿æ¢-15-59" class="headerlink" title="3-3 ä¿®æ”¹ã€æŸ¥æ‰¾ä¸æ›¿æ¢ (15:59)"></a>3-3 ä¿®æ”¹ã€æŸ¥æ‰¾ä¸æ›¿æ¢ (15:59)</h3><p>æ’å…¥</p><table><thead><tr><th>æŒ‰é”®æ“ä½œ</th><th>å®šä¹‰</th></tr></thead><tbody><tr><td><code>Shift+i</code>/<code>Shift+a</code></td><td>æ’å…¥æ¨¡å¼å¹¶ç§»åŠ¨åˆ°è¡Œé¦–/å°¾</td></tr><tr><td><code>i</code>/<code>a</code></td><td>å…‰æ ‡å‰/åæ’å…¥</td></tr><tr><td>[n]+<code>O</code>/<code>o</code></td><td>è¡Œå‰/åæ’å…¥næ¬¡</td></tr><tr><td>[n]+<code>i</code></td><td>æ’å…¥æ¨¡å¼é‡å¤næ¬¡</td></tr></tbody></table><p>è½¬æ¢</p><table><thead><tr><th>æŒ‰é”®æ“ä½œ</th><th>å®šä¹‰</th></tr></thead><tbody><tr><td><code>~</code></td><td>å•ä¸ªå­—ç¬¦å¤§å°å†™è½¬æ¢</td></tr><tr><td><code>g ~ w</code></td><td>å•è¯å¤§å°å†™è½¬æ¢</td></tr><tr><td><code>g ~ $</code>/<code>g ~ ~</code></td><td>æ•´è¡Œå¤§å°å†™è½¬æ¢(<code>^</code>å…‰æ ‡å¤„åˆ°è¡Œé¦–å¤§å°å†™åè½¬,<code>$</code>å…‰æ ‡å¤„åˆ°è¡Œå°¾å¤§å°å†™åè½¬)</td></tr><tr><td><code>gUw</code>/<code>guw</code></td><td>å•è¯è½¬æ¢æˆå¤§å°å†™</td></tr></tbody></table><p><code>.</code>ï¼šå¯¹ä¸Šä¸€ä¸ªæ“ä½œçš„é‡ğŸ›å¤</p><p>æŸ¥æ‰¾</p><table><thead><tr><th>æŒ‰é”®æ“ä½œ</th><th>å®šä¹‰</th></tr></thead><tbody><tr><td><code>f{char}</code>/<code>F{char}</code></td><td>æ­£å‘/åå‘æŸ¥æ‰¾æŸä¸ªå•è¯(é€‚ç”¨äºæŸ¥æ‰¾æŸä¸€è¡Œ)</td></tr><tr><td><code>t{char}</code></td><td>æŸ¥æ‰¾å­—ç¬¦å‰ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td><code>dt{char}</code>/<code>df{char}</code></td><td>åˆ é™¤å…‰æ ‡åˆ°æŸ¥æ‰¾å­—ç¬¦é—´çš„å­—ç¬¦</td></tr><tr><td><code>/{char}</code></td><td>å‘½ä»¤è¡ŒæŸ¥æ‰¾</td></tr></tbody></table><p><code>/{char}</code>ï¼š</p><ul><li><code>n</code>ï¼šå‘ä¸‹â¬‡ï¸æŸ¥æ‰¾ğŸ”</li><li><code>N</code>ï¼šå‘ä¸Šâ¬†ï¸æŸ¥æ‰¾ğŸ”</li></ul><p>æ›¿æ¢(substitute)</p><p>è¯­æ³•ï¼š<code>[range]s[ubstitute]/{pattern}/{string}/[flags]</code></p><table><thead><tr><th>æŒ‰é”®æ“ä½œ</th><th>å®šä¹‰</th></tr></thead><tbody><tr><td><code>:s/going/rolling/g</code></td><td>å½“å‰è¡Œæ‰€æœ‰goingæ›¿æ¢æˆrolling</td></tr><tr><td><code>:%s/going/rolling/g</code></td><td>%åŒ¹é…æ‰€æœ‰èŒƒå›´</td></tr><tr><td><code>â‡§+r</code>/<code>R</code></td><td>æ›¿æ¢æ¨¡å¼</td></tr><tr><td><code>r</code></td><td>å•ä¸ªå­—ç¬¦æ›¿æ¢</td></tr><tr><td><code>cw</code>ã€<code>c2w</code></td><td>ä¿®æ”¹å•ä¸ªå•è¯</td></tr><tr><td><code>c$</code>/<code>C</code>ç±»ä¼¼äº<code>d</code>æ“ä½œç¬¦</td><td>ä¿®æ”¹å…‰æ ‡ä¹‹åè¡Œå†…å†…å®¹</td></tr></tbody></table><h2 id="ç¬¬4ç« -Vimé«˜çº§åŠŸèƒ½"><a href="#ç¬¬4ç« -Vimé«˜çº§åŠŸèƒ½" class="headerlink" title="ç¬¬4ç«  Vimé«˜çº§åŠŸèƒ½"></a>ç¬¬4ç«  Vimé«˜çº§åŠŸèƒ½</h2><blockquote><p>æœ¬ç« ä¸»è¦è®²è§£ç¼“å†²åŒºä¸å¤šæ–‡ä»¶ç¼–è¾‘ã€å¤šçª—å£æ“ä½œï¼ˆåˆ†å±ï¼‰ä¸æ ‡ç­¾åˆ†ç»„ã€å®å’Œæ–‡æœ¬å¯¹è±¡ä»¥åŠVisualæ¨¡å¼ã€‚</p></blockquote><h3 id="4-1-ç¼“å†²åŒºä¸å¤šæ–‡ä»¶ç¼–è¾‘-13-25"><a href="#4-1-ç¼“å†²åŒºä¸å¤šæ–‡ä»¶ç¼–è¾‘-13-25" class="headerlink" title="4-1 ç¼“å†²åŒºä¸å¤šæ–‡ä»¶ç¼–è¾‘ (13:25)"></a>4-1 ç¼“å†²åŒºä¸å¤šæ–‡ä»¶ç¼–è¾‘ (13:25)</h3><blockquote><p>ç¼“å†²åŒºã€æ ‡ç­¾ã€çª—å£</p></blockquote><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghbe71ptj31340hcmyi.jpg" alt="ç¼“å†²åŒºä¸å¤šæ–‡ä»¶ç¼–è¾‘" style="zoom:45%;" /><p>ç¼–è¾‘æ“ä½œå¹¶ä¸æ˜¯çœŸæ­£çš„ç¼–è¾‘æ–‡ä»¶ï¼Œè€Œæ˜¯ç¼–è¾‘æ–‡ä»¶åœ¨å†…å­˜ä¸­çš„æ˜ å°„æˆ–å¿«ç…§æˆ–ç¼“å†²åŒº</p><p>ç¼“å†²åŒºï¼šå°±æ˜¯å†…å®¹ç¼“å­˜åŒºåŸŸã€‚</p><ul><li>Bufferæ˜¯å†…å­˜ä¸­çš„ä¸€å—ç¼“å†²åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾Vimæ‰“å¼€è¿‡çš„æ–‡ä»¶</li></ul><p>æŸ¥çœ‹ç¼“å†²åŒºåˆ—è¡¨ï¼š</p><ul><li><code>:files</code></li><li><code>:buffers</code></li><li><code>:ls</code><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghbeqzfdj31kg0cwgoo.jpg" alt="ç¼“å†²åŒºåˆ—è¡¨" style="zoom:30%;" /></li></ul><p>ç¼“å†²åŒºåˆ—è¡¨æŒ‡ç¤ºçŠ¶æ€</p><table><thead><tr><th>æ ‡è®°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>a</td><td>æ¿€æ´»ç¼“å†²åŒºï¼Œç¼“å†²åŒºè¢«åŠ è½½ä¸”æ˜¾ç¤º</td></tr><tr><td>h</td><td>éšè—ç¼“å†²åŒºï¼Œç¼“å†²åŒºè¢«åŠ è½½ä½†ğŸ¥šä¸æ˜¾ç¤º</td></tr><tr><td>%</td><td>å½“å‰ç¼“å†²åŒº</td></tr><tr><td>#</td><td>äº¤æ¢ç¼“å†²åŒº</td></tr><tr><td>=</td><td>åªè¯»ç¼“å†²åŒº</td></tr><tr><td>+</td><td>å·²ç»æ›´æ”¹ç¼“å†²åŒº</td></tr><tr><td>-</td><td>ä¸å¯æ›´æ”¹ç¼“å†²åŒºï¼Œâ€™modifiableâ€™é€‰é¡¹ä¸ç½®ä½</td></tr></tbody></table><p>ç¼“å†²åŒºåˆ—è¡¨æ“ä½œ</p><table><thead><tr><th>æŒ‡ä»¤</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>:bp[revious]</code></td><td>ä¸Šä¸€ä¸ªç¼“å†²åŒº</td></tr><tr><td><code>:bn[ext]</code></td><td>ä¸‹ä¸€ä¸ªç¼“å†²åŒº</td></tr><tr><td><code>:bf[irst]</code></td><td>åˆ°ç¬¬ä¸€ä¸ªç¼“å†²åŒº</td></tr><tr><td><code>:bl[ast]</code></td><td>åˆ°æœ€åä¸€ä¸ªç¼“å†²åŒº</td></tr><tr><td><code>:buffer Number/File_name</code></td><td>æŒ‡å®šç¼“å†²åŒº</td></tr><tr><td><code>:ball</code></td><td>ç¼–è¾‘æ‰€æœ‰ç¼“å†²åŒº</td></tr><tr><td><code>âŒƒ+^</code>/<code>b#</code></td><td>åˆ‡æ¢åˆ°å‰ä¸€ä¸ªbufferï¼ˆäº¤æ¢bufferï¼‰</td></tr><tr><td><code>:qall!</code></td><td>é€€å‡ºå…¨éƒ¨ç¼“å†²åŒº</td></tr><tr><td><code>:wall!</code></td><td>å†™å…¥å…¨éƒ¨ç¼“å†²åŒº</td></tr><tr><td><code>:badd</code></td><td>æ·»åŠ ä¸€ä¸ªæ–°ç¼“å†²åŒºï¼Œä½†ä¸è®¾ç½®ä¸ºå½“å‰ç¼“å†²åŒº</td></tr><tr><td><code>:bd[elete]</code></td><td>åˆ é™¤ç¼“å†²åŒº</td></tr><tr><td><code>:m,nbd</code>/<code>:%db</code></td><td>åˆ é™¤måˆ°nç¼–å·/æ‰€æœ‰çš„ç¼“å†²åŒºæ–‡ä»¶</td></tr><tr><td><code>:bufdo {CMD}</code></td><td>bufdo set number</td></tr><tr><td><code>:E /:bd</code></td><td>æ‰“å¼€æ–‡ä»¶ç›®å½•åˆ—è¡¨/è¿”å›åˆ°ğŸ”™æœ€åˆçš„buffer</td></tr></tbody></table><h3 id="4-2-å¤šçª—å£æ“ä½œä¸æ ‡ç­¾åˆ†ç»„-16-57"><a href="#4-2-å¤šçª—å£æ“ä½œä¸æ ‡ç­¾åˆ†ç»„-16-57" class="headerlink" title="4-2 å¤šçª—å£æ“ä½œä¸æ ‡ç­¾åˆ†ç»„ (16:57)"></a>4-2 å¤šçª—å£æ“ä½œä¸æ ‡ç­¾åˆ†ç»„ (16:57)</h3><ul><li>å¤šçª—å£ï¼ˆåˆ†å±ï¼‰</li></ul><p>åˆ†å±æ“ä½œ</p><table><thead><tr><th>æŒ‡ä»¤</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>vim -On</code>/<code>vim -on</code></td><td>å‚ç›´/æ°´å¹³åˆ†å±ï¼ˆnï¼šæ•°å­—ï¼Œoï¼šOpenï¼‰</td></tr><tr><td><code>âŒƒ+w c/q</code></td><td>å…³é—­å½“å‰çª—å£/æœ€åä¸€ä¸ªçª—å£æ—¶é€€</td></tr><tr><td><code>âŒƒ+w s</code></td><td>ä¸Šä¸‹åˆ†å‰²å½“å‰æ‰“å¼€çš„æ–‡ä»¶</td></tr><tr><td><code>âŒƒ+w v</code></td><td>å·¦å³åˆ†å‰²å½“å‰æ‰“å¼€çš„æ–‡ä»¶</td></tr><tr><td><code>:sp filename</code></td><td>ä¸Šä¸‹åˆ†å‰²å¹¶æ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡ä»¶</td></tr><tr><td><code>:vsp filename</code></td><td>å·¦å³åˆ†å‰²å¹¶æ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡ä»¶</td></tr></tbody></table><p>ç§»åŠ¨åˆ†å±å’Œå°ºå¯¸å˜åŠ¨</p><table><thead><tr><th>æŒ‡ä»¤</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>âŒƒ+w H</code></td><td>å‘å·¦â¬…ï¸ç§»åŠ¨</td></tr><tr><td><code>âŒƒ+w J</code></td><td>å‘ä¸‹â¬‡ï¸ç§»åŠ¨</td></tr><tr><td><code>âŒƒ+w K</code></td><td>å‘ä¸Šâ¬†ï¸ç§»åŠ¨</td></tr><tr><td><code>âŒƒ+w L</code></td><td>å‘å³â¡ï¸ç§»åŠ¨</td></tr><tr><td><code>âŒƒ+w +</code></td><td>å¢åŠ é«˜åº¦</td></tr><tr><td><code>âŒƒ+w -</code></td><td>å‡å°‘é«˜åº¦</td></tr><tr><td><code>âŒƒ+w _</code></td><td>å‡å°åˆ°æœ€ä½é«˜åº¦</td></tr><tr><td><code>âŒƒ+w =</code></td><td>è®©æ‰€æœ‰å±çš„é«˜åº¦ä¸€è‡´</td></tr></tbody></table><ul><li><p>æ ‡ç­¾</p><p>æ ‡ç­¾å°±æ˜¯å®¹çº³ä¸€ç³»åˆ—çª—å£çš„å®¹å™¨</p></li></ul><p>æ ‡ç­¾æ“ä½œ</p><table><thead><tr><th>æŒ‡ä»¤</th><th><code>å«ä¹‰</code></th></tr></thead><tbody><tr><td><code>:tabnew [tab_name]</code></td><td><code>æ–°å»ºæ ‡ç­¾é¡µ</code></td></tr><tr><td><code>:tabfind</code></td><td><code>æŸ¥æ‰¾å¹¶åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€æ–‡ä»¶</code></td></tr><tr><td><code>:tabs</code></td><td>æ˜¾ç¤ºå·²æ‰“å¼€æ ‡ç­¾é¡µçš„åˆ—è¡¨</td></tr><tr><td><code>:tabclose</code></td><td>å…³é—­å½“å‰æ ‡ç­¾é¡µ</td></tr><tr><td><code>:tabonly</code></td><td>ä»…ä¿ç•™å½“å‰æ ‡ç­¾é¡µæ‰“å¼€</td></tr><tr><td><code>:tabn/p/first/last</code></td><td>è·³è½¬åˆ°ä¸‹/ä¸Š/ç¬¬ä¸€/æœ€åä¸€ä¸ªæ ‡ç­¾é¡µ</td></tr><tr><td><code>:tabm</code></td><td>å°†å½“å‰æ ‡ç­¾é¡µæ”¾ç½®åˆ°æŒ‡å®šä½ç½®</td></tr></tbody></table><p>æ ‡ç­¾æ“ä½œå’Œå‘½ä»¤é”®</p><table><thead><tr><th>æŒ‡ä»¤</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>gt/T</code></td><td>ç§»åŠ¨åˆ°ä¸‹/ä¸Šä¸€ä¸ªæ ‡ç­¾</td></tr><tr><td><code>{i}gt</code></td><td><strong>è·³è½¬åˆ°iä½ç½®çš„æ ‡ç­¾</strong></td></tr><tr><td><code>noremap &lt;C-L&gt; &lt;Esc&gt; :tabnext &lt;CR&gt;</code></td><td>Vimrcä¸­è‡ªå®šä¹‰å¿«æ·é”®</td></tr><tr><td><code>noremap &lt;C-H&gt; &lt;Esc&gt; :tabprevious &lt;CR&gt;</code></td><td>Vimrcä¸­è‡ªå®šä¹‰å¿«æ·é”®</td></tr><tr><td><code>:tabe</code></td><td>ç¼–è¾‘æ ‡ç­¾ä¸­çš„æŸä¸ªæ–‡ä»¶</td></tr><tr><td><code>:tabm 0/tabm</code></td><td>ç§»åŠ¨å½“å‰tabåˆ°ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ª</td></tr><tr><td><code>t:abm {i}</code></td><td><strong>ç§»åŠ¨å½“å‰tabåˆ°ç¬¬i+1ä½ç½®</strong></td></tr></tbody></table><h3 id="4-3-æ–‡æœ¬å¯¹è±¡ä¸å®-18-40"><a href="#4-3-æ–‡æœ¬å¯¹è±¡ä¸å®-18-40" class="headerlink" title="4-3 æ–‡æœ¬å¯¹è±¡ä¸å® (18:40)"></a>4-3 æ–‡æœ¬å¯¹è±¡ä¸å® (18:40)</h3><ul><li>æ–‡æœ¬å¯¹è±¡</li></ul><pre><code>{operator} {a} {object}{operator} {i} {object}</code></pre><p>ä¾‹ï¼š</p><ul><li><p>daw = Delete A Word</p><p><code>==a==n object</code>ï¼šåŒ…å«å°¾éƒ¨é—´éš”ç©ºæ ¼</p></li><li><p>ciw = Change Inner Word</p><p><code>==i==nner object</code>ï¼šåªæ˜¯å†…å®¹æœ¬èº«ï¼Œä¸åŒ…å«å°¾éƒ¨å•è¯é—´éš”ğŸˆ³ï¸æ ¼</p></li></ul><p>Word/Sentence/Paragraph</p><table><thead><tr><th>textobject</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>w</td><td>word</td></tr><tr><td>s</td><td>sentence</td></tr><tr><td>p</td><td>paragraph</td></tr></tbody></table><p>å—å¯¹è±¡</p><table><thead><tr><th>textobject</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>]/[</td><td><code>[]</code> block</td></tr><tr><td>)/(ã€b</td><td><code>()</code> block</td></tr><tr><td>&gt;/&lt;ã€&gt;/&lt;</td><td><code>&lt;&gt;</code> block</td></tr><tr><td>}/{ã€B</td><td><code>()</code> block</td></tr><tr><td>t</td><td>tag block: <code>&lt;&gt; &lt;/&gt;</code></td></tr></tbody></table><p>Visual mode</p><table><thead><tr><th>æŒ‡ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>viw</code></td><td>é€‰ä¸­å•è¯</td></tr><tr><td><code>vis</code></td><td>é€‰ä¸­å¥å­ğŸŠ</td></tr><tr><td><code>vip</code></td><td>é€‰ä¸­æ®µè½</td></tr><tr><td>vi<code>(</code></td><td>é€‰ä¸­<code>()</code>åœ†æ‹¬å·ä¸­çš„å†…å®¹</td></tr><tr><td><code>vi[</code></td><td>é€‰ä¸­<code>[]</code>ä¸­æ‹¬å·ä¸­çš„å†…å®¹</td></tr><tr><td><code>vit</code></td><td>é€‰ä¸­æ ‡ç­¾ä¸­çš„å†…å®¹</td></tr></tbody></table><table>    <tr>        <th>æŒ‡ä»¤</th>        <th>è¯´æ˜</th>    </tr>    <tr>        <td>v2i{</td>        <td>          é€‰ä¸­ä¸¤å±‚`{}`å¤§æ‹¬å·ä¹‹é—´çš„æ‰€æœ‰å†…å®¹<br/>          æ•°å­—é™åˆ¶é€‰æ‹©çš„åµŒå¥—å±‚æ•°        </td>    </tr>    <tr>        <td>v3aw</td>        <td>é€‰æ‹©3âƒ£ï¸ä¸ªå•è¯ï¼ˆ3ä¸ªå•è¯â•2ä¸ªé—´éš”ç©ºæ ¼ï¼‰</td>    </tr>    <tr>        <td>v3iw</td>        <td>é€‰æ‹©3âƒ£ï¸ä¸ªå•è¯ï¼ˆ2ä¸ªå•è¯â•1ä¸ªé—´éš”ç©ºæ ¼ï¼‰</td>    </tr>    <tr>        <td colspan="2" align="center">å¯å°†vé€‰æ‹©æ“ä½œæŒ‡ä»¤æ›¿æ¢ä¸ºc(change), x, d(delete), y(yank)ç­‰æ“ä½œç¬¦(operator)ï¼Œæ¥é’ˆå¯¹æ–‡æœ¬å¯¹è±¡æ“ä½œ</td>    </tr>Â·</table><ul><li>å®</li></ul><blockquote><p>If you write a thing once, it is okay. However if youâ€™re writing twice or more times, then you should find a better way to do it.</p><p>Vimçš„Microå°±æ˜¯ç”¨æ¥è§£å†³é‡å¤çš„é—®é¢˜</p></blockquote><p>å®å°±æ˜¯æ‰¹å¤„ç†ï¼Œç±»ä¼¼äºå‘½ä»¤è¡Œè„šæœ¬æˆ–è€…ç¼–ç¨‹ä¸­çš„å‡½æ•°</p><p><code>h: operator</code>ï¼šæŸ¥çœ‹æ“ä½œç¬¦æ–‡æ¡£</p><p>ç®€å•æ“ä½œ</p><table><thead><tr><th>æŒ‡ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>qa</code></td><td>å¼€å§‹å½•åˆ¶âºï¸å®åˆ°å¯„å­˜å™¨ağŸ€„ï¸</td></tr><tr><td><code>qA</code></td><td>è¿½åŠ å®ï¼Œåœ¨å¯„å­˜å™¨ağŸ€„ï¸è¿½åŠ </td></tr><tr><td><code>n@a</code></td><td>æ‰§è¡Œnéaå¯„å­˜å™¨ä¸­çš„æ“ä½œ</td></tr><tr><td><code>@@</code></td><td>å†æ‰§è¡Œä¸€éä¸Šä¸€æ¬¡æ“ä½œ</td></tr><tr><td><code>:n,mnormal @a</code></td><td>nåˆ°mè¡Œæ‰§è¡Œå¯„å­˜å™¨aå®æ“ä½œ</td></tr><tr><td><code>:let @a= &#39;</code></td><td>ç¼–è¾‘å®aå¯„å­˜å™¨</td></tr></tbody></table><p>å®æœ€ä½³æ“ä½œ</p><ul><li>è§„èŒƒå…‰æ ‡ä½ç½®ï¼š0</li><li>æ‰§è¡Œç¼–è¾‘å’Œæ“ä½œ</li><li>ç§»åŠ¨å…‰æ ‡åˆ°å®¹æ˜“å›æ”¾çš„ä½ç½®ï¼šj</li></ul><p><code>Ctrl+a</code>ï¼šå½“å‰æ•°å­—é€’å¢1</p><p>ç¤ºä¾‹æ­¥éª¤ï¼š</p><ol><li><p>å¾ªç¯é€’å¢æ’å…¥æ•°å­—</p><pre><code class="shell"># æ·»åŠ æ•°å­—1i1Esc# å¼€å§‹å½•åˆ¶å®,æ­¤æ—¶å…‰æ ‡åœ¨æ•°å­—1è¡Œqa # å¼€å§‹yy # å¤åˆ¶p # ç²˜è´´q # ç»“æŸ# æ‰§è¡Œå®æ“ä½œ10@a</code></pre><pre><code></code></pre></li><li><p>ä¸ºå¤šè¡Œæ·»åŠ æ³¨é‡Š</p><pre><code class="shell"># å¼€å§‹å½•åˆ¶å®,æ­¤æ—¶å…‰æ ‡åœ¨éœ€æ³¨é‡Šè¡Œé¦–qb # å¼€å§‹i # è¿›å…¥ç¼–è¾‘æ¨¡å¼`# ` # æ·»åŠ æ³¨é‡ŠEsc # é€€å‡ºç¼–è¾‘æ¨¡å¼^ # ç§»åŠ¨åˆ°è¡Œé¦–j # å…‰æ ‡ä¸‹è¡Œç§»åŠ¨q # ç»“æŸ</code></pre></li></ol><p>å®ä¿å­˜</p><ul><li><code>viminfo</code>/<code>vimrc file</code></li><li>ä¿å­˜å†å²å’Œéç©ºå¯„å­˜å™¨</li><li>vimå¯åŠ¨æ—¶è¯»å–</li><li>å®¹æ˜“è¢«è¦†ç›–</li></ul><h3 id="4-4-Visual-æ¨¡å¼-15-51"><a href="#4-4-Visual-æ¨¡å¼-15-51" class="headerlink" title="4-4 Visual æ¨¡å¼ (15:51)"></a>4-4 Visual æ¨¡å¼ (15:51)</h3><blockquote><p>åœ¨å¯è§†åŒ–æ¨¡å¼ä¸‹ï¼Œå¯ä»¥å¯¹ä¸€ä¸ªæ–‡æœ¬å—çš„æ•´ä½“è¿›è¡Œæ“ä½œ</p></blockquote><p>ä¸‰ç§å­æ¨¡å¼</p><table><thead><tr><th>æŒ‡ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>v</code></td><td>æ¿€æ´»é¢å‘å­—ç¬¦çš„å¯è§†åŒ–æ¨¡å¼</td></tr><tr><td><code>V</code>/<code>shift+v</code></td><td>æ¿€æ´»é¢å‘è¡Œçš„å¯è§†åŒ–æ¨¡å¼</td></tr><tr><td><code>command+v</code></td><td>æ¿€æ´»é¢å‘åˆ—å—çš„å¯è§†åŒ–æ¨¡å¼</td></tr></tbody></table><p>å­—ç¬¦å¯è§†åŒ–æ¨¡å¼=&gt;è¡Œå¯è§†åŒ–æ¨¡å¼=&gt;å—å¯è§†åŒ–æ¨¡å¼</p><p>å¯è§†åŒ–æ¨¡å¼æ“ä½œ</p><table><thead><tr><th>æ“ä½œç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>gv</td><td>é‡é€‰ä¸Šæ¬¡çš„é«˜äº®é€‰åŒº</td></tr><tr><td>o</td><td>åˆ‡æ¢é€‰å–è¾¹ç•Œ</td></tr></tbody></table><h2 id="ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>è¯¾ç¨‹æ€»ç»“</p></blockquote><h3 id="5-1-è¯¾ç¨‹æ€»ç»“-03-18"><a href="#5-1-è¯¾ç¨‹æ€»ç»“-03-18" class="headerlink" title="5-1 è¯¾ç¨‹æ€»ç»“ (03:18)"></a>5-1 è¯¾ç¨‹æ€»ç»“ (03:18)</h3><ol><li><p>Vimæ¨¡å¼ï¼ˆå››ç§ï¼‰</p><p>æ™®é€šæ¨¡å¼ã€ç¼–è¾‘æ¨¡å¼ã€å¯è§†åŒ–æ¨¡å¼ã€å‘½ä»¤è¡Œæ¨¡å¼</p></li><li><p>Vimç»„åˆ {operation}{motion}</p><p>å¢æŸ¥åˆ æ”¹</p></li><li><p>Vimé…ç½®å¤šæ ·æ€§</p><p>é…ç½®æ–‡ä»¶.vimrcã€Vimæ’ä»¶</p></li><li><p>Vimè§†å›¾å¤šæ ·æ€§</p><p>ç¼“å†²åŒºã€å¤šæ–‡ä»¶ç¼–è¾‘ã€å¤šçª—å£ã€æ ‡ç­¾åˆ†ç»„</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1052-Gitå…¥é—¨</title>
      <link href="/imooc/1052-Git/"/>
      <url>/imooc/1052-Git/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/1052" target="_blank" rel="noopener">https://www.imooc.com/learn/1052</a></p><p>ç®€ä»‹ï¼šæœ¬è¯¾ç¨‹ä¸»è¦é€šè¿‡å‘½ä»¤è¡Œå’Œå›¾å½¢ç•Œé¢å·¥å…·æ¥ä»‹ç»Gitçš„å®‰è£…ã€ä»“åº“åˆ›å»ºã€å·¥ä½œæµã€è¿œç¨‹ä»“åº“ã€å…‹éš†ä»“åº“ã€æ ‡ç­¾ç®¡ç†å’Œåˆ†æ”¯ç®¡ç†ç­‰Gitçš„ä¸»è¦å†…å®¹ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -æ¦‚è¿°"><a href="#ç¬¬1ç« -æ¦‚è¿°" class="headerlink" title="ç¬¬1ç«  æ¦‚è¿°"></a>ç¬¬1ç«  æ¦‚è¿°</h2><blockquote><p>ä¸»è¦ä»‹ç»Gitçš„ä½œç”¨ä»¥åŠå®‰è£…è¿‡ç¨‹ã€‚</p></blockquote><h3 id="1-1-ä¸ºä»€ä¹ˆå­¦ä¹ git"><a href="#1-1-ä¸ºä»€ä¹ˆå­¦ä¹ git" class="headerlink" title="1-1 ä¸ºä»€ä¹ˆå­¦ä¹ git"></a>1-1 ä¸ºä»€ä¹ˆå­¦ä¹ git</h3><blockquote><p>ä½œè€…ï¼šLinus Torvaldsï¼ŒåŒæ—¶ä¹Ÿæ˜¯Linuxçš„ä½œè€…ã€‚</p><p>ç‰ˆæœ¬æ§åˆ¶ï¼šè®°å½•æ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰ç‰ˆæœ¬ï¼Œå¯ä»¥æœ‰æ•ˆåœ°è¿½è¸ªæ–‡ä»¶çš„å˜åŒ–ã€‚åŒæ—¶å¾ˆå®¹æ˜“å›åˆ°ä¹‹å‰çš„çŠ¶æ€</p></blockquote><p>ä¸ºä»€ä¹ˆå­¦ä¹ Gitï¼š</p><ul><li>ç‰›é€šçš„äº’è”ç½‘ã€ç‰›é€¼çš„å¤§ç¥ä»¬éƒ½åœ¨ç”¨</li><li>å®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ï¼Œè§£å†³å¤šäººåä½œçš„é—®é¢˜</li><li>æé«˜å¼€å‘æ•ˆç‡</li><li>å¦‚æœä½ æ˜¯ç¨‹åºçŒ¿,è¯·åŠ¡å¿…å­¦Gitï¼Œäº•ä¹ æƒ¯æŠŠæ—¥å·±çš„ä»£ç åŒæ­¥åˆ°GitHubä¸Š</li></ul><p>æ³¨ï¼šGitä¸ç­‰äº GitHubå¤§å®¶æ³¨æ„äº†! Gitå’ŒGitHubå°±æ˜¯çƒå’Œçƒåœºçš„å…³ç³»!</p><p>è¯¾ç¨‹å®‰æ’ï¼š</p><blockquote><p>Gitä»‹ç»<br>Gitå®‰è£…ï¼ˆå‘½ä»¤è¡Œã€å›¾å½¢åŒ–ç•Œé¢ï¼‰<br>Gitå·¥ä½œæµ<br>æœ¬åœ°ä¸è¿œç¨‹ä»“åº“<br>åˆ†æ”¯ç®¡ç†<br>æ ‡ç­¾ç®¡ç†</p></blockquote><h3 id="1-2-Gitå®‰è£…"><a href="#1-2-Gitå®‰è£…" class="headerlink" title="1-2 Gitå®‰è£…"></a>1-2 Gitå®‰è£…</h3><p>å‘½ä»¤è¡Œï¼š</p><ul><li><p>ä¸‹è½½Window Git</p></li><li><p>Msysgit <a href="https://git-scm.com/download/win" target="_blank" rel="noopener">https://git-scm.com/download/win</a></p></li><li><p>é…ç½®ç”¨æˆ·ä¿¡æ¯</p><pre><code class="shell"># git bashgit config --global user.name &quot;tyk&quot;git config --global user.email &quot;tyk@163.com&quot;</code></pre></li><li><p>æŸ¥çœ‹ç”¨æˆ·åé‚®ç®±æ˜¯å¦é…ç½®æˆåŠŸ</p><pre><code class="shell">git config --list</code></pre></li></ul><p>å›¾å½¢åŒ–ç•Œé¢ï¼š</p><ul><li>ä¸‹è½½å®‰è£…SourceTree <a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">https://www.sourcetreeapp.com/</a></li><li>æ³¨å†Œç™»å½•</li></ul><h2 id="ç¬¬2ç« -Gitä»“åº“åˆ›å»ºåŠå·¥ä½œé‡"><a href="#ç¬¬2ç« -Gitä»“åº“åˆ›å»ºåŠå·¥ä½œé‡" class="headerlink" title="ç¬¬2ç«  Gitä»“åº“åˆ›å»ºåŠå·¥ä½œé‡"></a>ç¬¬2ç«  Gitä»“åº“åˆ›å»ºåŠå·¥ä½œé‡</h2><blockquote><p>ä¸»è¦ä»‹ç»Gitå¦‚ä½•åˆ›å»ºä»“åº“ä»¥åŠå·¥ä½œæµçš„å†…å®¹ã€‚</p></blockquote><h3 id="2-1-åˆ›å»ºä»“åº“"><a href="#2-1-åˆ›å»ºä»“åº“" class="headerlink" title="2-1 åˆ›å»ºä»“åº“"></a>2-1 åˆ›å»ºä»“åº“</h3><ul><li><p>åˆå§‹åŒ–ç‰ˆæœ¬åº“</p><pre><code class="shell">git init</code></pre></li><li><p>æ·»åŠ æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“</p><pre><code class="shell">git addgit commit</code></pre></li><li><p>æŸ¥çœ‹ä»“åº“çŠ¶æ€</p><pre><code class="shell">git status</code></pre></li></ul><p>åˆ›å»ºGitä»“åº“ï¼š</p><pre><code class="shell">mkdir democd demogit init # åˆå§‹åŒ–ç‰ˆæœ¬åº“ls -a # æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…å«éšè—æ–‡ä»¶ï¼‰echo &quot;git repo&quot; &gt;&gt; test.txt # åˆ›å»ºæ–‡ä»¶å¹¶è¿½åŠ è¾“å…¥å†…å®¹git add test.txt # æ·»åŠ æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“git commit -m &quot;repo first commit&quot; # æäº¤æ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“git status # æŸ¥çœ‹ä»“åº“çŠ¶æ€git push -f origin master # å°†æœ¬åœ°ä»“åº“å†…å®¹åŒæ­¥åˆ°è¿œç¨‹ä»“åº“</code></pre><h3 id="2-2-å·¥ä½œæµ"><a href="#2-2-å·¥ä½œæµ" class="headerlink" title="2-2 å·¥ä½œæµ"></a>2-2 å·¥ä½œæµ</h3><pre><code class="shell">git add &lt;file&gt;   # å°†æ–‡ä»¶ä»æœ¬åœ°å·¥ä½œåŒºä¸Šä¼ åˆ°æš‚å­˜åŒºgit commit -m &quot;è¯´æ˜æ“ä½œå†…å®¹&quot;  # å°†æš‚å­˜åŒºçš„æ–‡ä»¶ä¸Šä¼ åˆ°æœ¬åœ°ä»“åº“git reset HEAD &lt;file&gt; # å°†æœ¬åœ°ä»“åº“çš„å†…å®¹è¿”å›åˆ°æš‚å­˜åŒºgit checkout -- æ–‡ä»¶å # æ¸…é™¤å·¥ä½œåŒºgit log # æŸ¥è¯¢æäº¤è®°å½•çš„commitå·git reset --hard &lt;commit_id&gt; # å°†æœ¬åœ°ä»“åº“å’Œæš‚å­˜åŒºçš„å†…å®¹å…¨éƒ¨å›æ»šåˆ°commitå·æäº¤æ—¶çš„å†…å®¹git rm &lt;file&gt; # æ¸…ç©ºæ–‡ä»¶git rm --cached # æ¸…é™¤å·¥ä½œåŒºé‡Œæš‚å­˜åŒºæ²¡æœ‰çš„æ–‡ä»¶git checkout HEAD &lt;file&gt; # ç”¨æœ€ç»ˆä»“åº“çš„æ–‡ä»¶æ›¿æ¢æ‰æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„</code></pre><p>Gitå·¥ä½œæµï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gigfvzdzj30pk0bzta6.jpg" width="600" alt="Gitå·¥ä½œæµ"/><h2 id="ç¬¬3ç« -Gitä¸»è¦åŠŸèƒ½"><a href="#ç¬¬3ç« -Gitä¸»è¦åŠŸèƒ½" class="headerlink" title="ç¬¬3ç«  Gitä¸»è¦åŠŸèƒ½"></a>ç¬¬3ç«  Gitä¸»è¦åŠŸèƒ½</h2><blockquote><p>ä¸»è¦ä»‹ç»Gitè¿œç¨‹ä»“åº“ã€å…‹éš†ä»“åº“ã€æ ‡ç­¾ç®¡ç†å’Œåˆ†æ”¯ç®¡ç†çš„ä¸»è¦å†…å®¹ã€‚</p></blockquote><h3 id="3-1-è¿œç¨‹ä»“åº“"><a href="#3-1-è¿œç¨‹ä»“åº“" class="headerlink" title="3-1 è¿œç¨‹ä»“åº“"></a>3-1 è¿œç¨‹ä»“åº“</h3><p>åˆ›å»ºSSH Key</p><pre><code class="shell">ssh-keygen -t rsa -C &quot;github_registry_mail@github.com&quot;cd .ssh/cat id_rsa.pub</code></pre><p>GitHubè®¾ç½®ï¼š</p><p>â€‹    [GitHubé¦–é¡µ]-[ä¸ªäººå¤´åƒ]-[Settings]-[SSH and GPG keys]-[New SSH key]</p><p>æŸ¥çœ‹æœ¬åœ°æ˜¯å¦ä¸Githubå…³è”</p><pre><code class="shell">ssh -T git@github.com</code></pre><p>æ·»åŠ è¿œç¨‹ä»“åº“</p><pre><code class="shell">git remote add origin git@github.com:tuyrk/demo.gitgit pull origin master --allow-unrelated-historiesgit push -u origin master</code></pre><p>åœ¨GitHubåˆ›å»ºæ–°ä»“åº“ï¼š</p><p>â€‹    [GitHubé¦–é¡µ]-[åŠ å·]-[New repository]-[Create repository]</p><p>å°†æœ¬åœ°ä»“åº“æäº¤åˆ°è¿œç¨‹</p><pre><code class="shell">echo &quot;# demo&quot; &gt;&gt; README.mdgit initgit add README.mdgit commit -m &quot;first commit&quot;git remote add origin git@github.com:tuyrk/demo.gitgit push -u origin master</code></pre><p>å°†è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°</p><pre><code class="shell">git remote add origin git@github.com:tuyrk/demo.gitgit push -u origin master</code></pre><h3 id="3-2-å…‹éš†ä»“åº“"><a href="#3-2-å…‹éš†ä»“åº“" class="headerlink" title="3-2 å…‹éš†ä»“åº“"></a>3-2 å…‹éš†ä»“åº“</h3><pre><code class="shell">git clone git@github.com:tuyrk/demo.git # è·¯å¾„ä¸ºGitHubä¸­SSHè·¯å¾„</code></pre><p>æµç¨‹ï¼š</p><ol><li>å°†è¿œç¨‹ä»“åº“GitHubä¸­çš„ä»£ç å…‹éš†ä¸€ä»½åˆ°æœ¬åœ°</li><li>åœ¨æœ¬åœ°è¿›è¡Œå¼€å‘</li><li>å¼€å‘å®Œä¹‹åå°†ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“</li></ol><h3 id="3-3-æ ‡ç­¾ç®¡ç†"><a href="#3-3-æ ‡ç­¾ç®¡ç†" class="headerlink" title="3-3 æ ‡ç­¾ç®¡ç†"></a>3-3 æ ‡ç­¾ç®¡ç†</h3><pre><code class="shell">git tag # æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾git tag &lt;name&gt; # åˆ›å»ºæ ‡ç­¾git tag -a &lt;name&gt; -m &quot;comment&quot; # æŒ‡å®šæäº¤ä¿¡æ¯git tag -d &lt;name&gt; # åˆ é™¤æ ‡ç­¾git push origin &lt;name&gt; # æ ‡ç­¾å‘å¸ƒgit checkout &lt;name&gt; # åˆ‡æ¢æ ‡ç­¾-å¿«ç…§git checkout -b &lt;åˆ†æ”¯åç§°&gt; &lt;tagæ ‡ç­¾åç§°&gt; # åˆ‡æ¢æ ‡ç­¾-ç¼–è¾‘</code></pre><h3 id="3-4-åˆ†æ”¯ç®¡ç†"><a href="#3-4-åˆ†æ”¯ç®¡ç†" class="headerlink" title="3-4 åˆ†æ”¯ç®¡ç†"></a>3-4 åˆ†æ”¯ç®¡ç†</h3><pre><code class="shell">git branch # æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼Œâ€œ*â€ä»£è¡¨å½“å‰æ‰€åœ¨åˆ†æ”¯git branch &lt;åˆ†æ”¯åç§°&gt; # åˆ›å»ºåˆ†æ”¯git checkout &lt;åˆ†æ”¯åç§°&gt; # åˆ‡æ¢åˆ†æ”¯git merge &lt;åˆ†æ”¯åç§°&gt; # åˆå¹¶åˆ°masteråˆ†æ”¯ã€‚é¦–å…ˆéœ€åˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œç„¶åè¿›è¡Œåˆå¹¶git branch -d &lt;åˆ†æ”¯åç§°&gt; # åˆ é™¤åˆ†æ”¯</code></pre><h2 id="ç¬¬4ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬4ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬4ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬4ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>è¯¾ç¨‹æ€»ç»“</p></blockquote><h3 id="4-1-è¯¾ç¨‹æ€»ç»“"><a href="#4-1-è¯¾ç¨‹æ€»ç»“" class="headerlink" title="4-1 è¯¾ç¨‹æ€»ç»“"></a>4-1 è¯¾ç¨‹æ€»ç»“</h3><ul><li><p>ä»‹ç»ä¸å®‰è£…</p></li><li><p>å·¥ä½œæµ</p><p>[å·¥ä½œåŒº]=&gt;[æš‚å­˜åŒº]=&gt;[ç‰ˆæœ¬åº“]</p></li><li><p>åˆå§‹åŒ–</p><pre><code class="shell">git initgit addgit commit</code></pre></li><li><p>è¿œç¨‹ä»“åº“</p><pre><code class="shell">git remote addgit pullgit pushgit clone</code></pre></li><li><p>åˆ†æ”¯ç®¡ç†</p><pre><code class="shell">git branchgit checkoutgit merge</code></pre></li><li><p>æ ‡ç­¾ç®¡ç†</p><pre><code class="shell">git taggit push</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>390-ç‰ˆæœ¬æ§åˆ¶å…¥é—¨ â€“ æ¬è¿› Github</title>
      <link href="/imooc/390-Github/"/>
      <url>/imooc/390-Github/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/390" target="_blank" rel="noopener">https://www.imooc.com/learn/390</a></p><p>ç®€ä»‹ï¼šç‰ˆæœ¬æ§åˆ¶èƒ½å¤Ÿå¤§å¤§æé«˜ç¨‹åºå‘˜çš„å·¥ä½œæ•ˆç‡ï¼Œä½†æ˜¯é€šå¸¸ä¼šæ¶‰åŠåˆ°å‘½ä»¤è¡Œæ“ä½œï¼Œå­¦ä¹ æ›²çº¿é™¡å³­ã€‚æœ¬è¯¾ç¨‹ä¸­ä½¿ç”¨ Github ç½‘ç«™å’Œå›¾å½¢åŒ–å®¢æˆ·ç«¯æ¥å®Œæˆç‰ˆæœ¬æ§åˆ¶å·¥ä½œï¼Œæä¾›ä¸€å¥—ç®€å•å®ç”¨çš„æµç¨‹ï¼Œé…åˆå›¾è§£æ–¹å¼çš„åŸç†è®²è§£ï¼Œè®©å¤§å®¶ä»¥æœ€çŸ­çš„æ—¶é—´ä¸Šæ‰‹ Git å’Œ Github ã€‚</p></blockquote><p><a href="https://gitbeijing.com/" target="_blank" rel="noopener">https://gitbeijing.com/</a></p><p>@[TOC]</p><h2 id="ç¬¬1ç« -Githubè¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -Githubè¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  Githubè¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  Githubè¯¾ç¨‹ä»‹ç»</h2><blockquote><p>é˜è¿°æœ¬è¯¾ç¨‹çš„è¦†ç›–å†…å®¹ï¼Œé€‚åˆè§‚ä¼—ã€‚</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç»"></a>1-1 è¯¾ç¨‹ä»‹ç»</h3><p>Gitå’ŒLinuxä¹‹çˆ¶ï¼ŒLinus</p><blockquote><p>æˆ‘æ˜¯ä¸ªè‡ªè´Ÿçš„æ··è›‹ï¼Œæ‰€æœ‰æˆ‘çš„é¡¹ç›®éƒ½ä»¥æˆ‘è‡ªå·±çš„åå­—å‘½åï¼Œå…ˆæœ‰Linuxï¼Œç°åœ¨æ˜¯Git.<br>â€“Linus</p></blockquote><p>Global Information Trackerï¼šå…¨å±€ä¿¡æ¯è·Ÿè¸ªå™¨</p><p>Gitï¼šç‰ˆæœ¬æ§åˆ¶å·¥å…·</p><p><a href="https://github.com" target="_blank" rel="noopener">https://github.com</a></p><h2 id="ç¬¬2ç« -æµè§ˆå™¨ä¸­ä½¿ç”¨-Github"><a href="#ç¬¬2ç« -æµè§ˆå™¨ä¸­ä½¿ç”¨-Github" class="headerlink" title="ç¬¬2ç«  æµè§ˆå™¨ä¸­ä½¿ç”¨ Github"></a>ç¬¬2ç«  æµè§ˆå™¨ä¸­ä½¿ç”¨ Github</h2><blockquote><p>ä¸ä¼šç”¨ Gitï¼Œå…¶å®ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ Github æ¥è¿›è¡ŒåŸºæœ¬çš„ç‰ˆæœ¬æ§åˆ¶æ“ä½œçš„ã€‚</p></blockquote><h3 id="2-1-æµè§ˆå™¨ä¸­ä½¿ç”¨Github"><a href="#2-1-æµè§ˆå™¨ä¸­ä½¿ç”¨Github" class="headerlink" title="2-1 æµè§ˆå™¨ä¸­ä½¿ç”¨Github"></a>2-1 æµè§ˆå™¨ä¸­ä½¿ç”¨Github</h3><h2 id="ç¬¬3ç« -Github-å®¢æˆ·ç«¯çš„ä½¿ç”¨"><a href="#ç¬¬3ç« -Github-å®¢æˆ·ç«¯çš„ä½¿ç”¨" class="headerlink" title="ç¬¬3ç«  Github å®¢æˆ·ç«¯çš„ä½¿ç”¨"></a>ç¬¬3ç«  Github å®¢æˆ·ç«¯çš„ä½¿ç”¨</h2><blockquote><p>ä»¥ Mac ç³»ç»Ÿçš„å®¢æˆ·ç«¯ Github For Mac ä¸ºä¾‹å­æ¥è®²è§£ï¼Œä¸è¿‡ Windows ç³»ç»Ÿä¸Šä¹Ÿæœ‰ç±»ä¼¼çš„å®¢æˆ·ç«¯ã€‚</p></blockquote><h3 id="3-1-Githubå®¢æˆ·ç«¯çš„ä½¿ç”¨"><a href="#3-1-Githubå®¢æˆ·ç«¯çš„ä½¿ç”¨" class="headerlink" title="3-1 Githubå®¢æˆ·ç«¯çš„ä½¿ç”¨"></a>3-1 Githubå®¢æˆ·ç«¯çš„ä½¿ç”¨</h3><h2 id="ç¬¬4ç« -ç®€å•åˆ†æ”¯æ“ä½œ"><a href="#ç¬¬4ç« -ç®€å•åˆ†æ”¯æ“ä½œ" class="headerlink" title="ç¬¬4ç«  ç®€å•åˆ†æ”¯æ“ä½œ"></a>ç¬¬4ç«  ç®€å•åˆ†æ”¯æ“ä½œ</h2><blockquote><p>åˆ†æ”¯æ“ä½œå‡ ä¹æ˜¯æ‰€æœ‰çš„ Git é«˜çº§æ“ä½œçš„åŸºç¡€ï¼Œæœ¬ç« æ¥å­¦ä¼šä½¿ç”¨åˆ†æ”¯ã€‚</p></blockquote><h3 id="4-1-Github-ç®€å•åˆ†æ”¯æ“ä½œ"><a href="#4-1-Github-ç®€å•åˆ†æ”¯æ“ä½œ" class="headerlink" title="4-1 Github-ç®€å•åˆ†æ”¯æ“ä½œ"></a>4-1 Github-ç®€å•åˆ†æ”¯æ“ä½œ</h3><h2 id="ç¬¬5ç« -åˆ†æ”¯åˆå¹¶"><a href="#ç¬¬5ç« -åˆ†æ”¯åˆå¹¶" class="headerlink" title="ç¬¬5ç«  åˆ†æ”¯åˆå¹¶"></a>ç¬¬5ç«  åˆ†æ”¯åˆå¹¶</h2><blockquote><p>åˆ†æ”¯åˆå¹¶è¿‡ç¨‹å…¶å®å°±æ˜¯ä»£ç èåˆè¿‡ç¨‹ï¼Œä¼šæ¶‰åŠåˆ°å¤„ç†ä»£ç å†²çªçš„é—®é¢˜ã€‚</p></blockquote><h3 id="5-1-Github-åˆå¹¶åˆ†æ”¯ï¼ˆä¸Šï¼‰"><a href="#5-1-Github-åˆå¹¶åˆ†æ”¯ï¼ˆä¸Šï¼‰" class="headerlink" title="5-1 Github-åˆå¹¶åˆ†æ”¯ï¼ˆä¸Šï¼‰"></a>5-1 Github-åˆå¹¶åˆ†æ”¯ï¼ˆä¸Šï¼‰</h3><h3 id="5-2-Github-åˆå¹¶åˆ†æ”¯ï¼ˆä¸‹ï¼‰"><a href="#5-2-Github-åˆå¹¶åˆ†æ”¯ï¼ˆä¸‹ï¼‰" class="headerlink" title="5-2 Github-åˆå¹¶åˆ†æ”¯ï¼ˆä¸‹ï¼‰"></a>5-2 Github-åˆå¹¶åˆ†æ”¯ï¼ˆä¸‹ï¼‰</h3><h2 id="ç¬¬6ç« -å›¢é˜Ÿåä½œæµç¨‹"><a href="#ç¬¬6ç« -å›¢é˜Ÿåä½œæµç¨‹" class="headerlink" title="ç¬¬6ç«  å›¢é˜Ÿåä½œæµç¨‹"></a>ç¬¬6ç«  å›¢é˜Ÿåä½œæµç¨‹</h2><blockquote><p>Github å…¬å¸å†…éƒ¨ä½¿ç”¨çš„å·¥ä½œæµç¨‹ Github Flowï¼Œæ˜¯ Git å¤šç§åä½œæµç¨‹ä¸­ï¼Œæœ€ç®€å•ä¹Ÿæ˜¯æœ€æµè¡Œçš„ä¸€å¥—æ€è·¯ã€‚æœ¬ç« æ¥çœ‹çœ‹åœ¨å›¢é˜Ÿå†…éƒ¨å¦‚ä½•åº”ç”¨è¿™å¥—æµç¨‹ã€‚</p></blockquote><h3 id="6-1-Github-å›¢é˜Ÿåä½œæµç¨‹ï¼ˆä¸Šï¼‰"><a href="#6-1-Github-å›¢é˜Ÿåä½œæµç¨‹ï¼ˆä¸Šï¼‰" class="headerlink" title="6-1 Github-å›¢é˜Ÿåä½œæµç¨‹ï¼ˆä¸Šï¼‰"></a>6-1 Github-å›¢é˜Ÿåä½œæµç¨‹ï¼ˆä¸Šï¼‰</h3><h3 id="6-2-Github-å›¢é˜Ÿåä½œæµç¨‹ï¼ˆä¸‹ï¼‰"><a href="#6-2-Github-å›¢é˜Ÿåä½œæµç¨‹ï¼ˆä¸‹ï¼‰" class="headerlink" title="6-2 Github-å›¢é˜Ÿåä½œæµç¨‹ï¼ˆä¸‹ï¼‰"></a>6-2 Github-å›¢é˜Ÿåä½œæµç¨‹ï¼ˆä¸‹ï¼‰</h3><h2 id="ç¬¬7ç« -å¼€æºé¡¹ç›®è´¡çŒ®æµç¨‹"><a href="#ç¬¬7ç« -å¼€æºé¡¹ç›®è´¡çŒ®æµç¨‹" class="headerlink" title="ç¬¬7ç«  å¼€æºé¡¹ç›®è´¡çŒ®æµç¨‹"></a>ç¬¬7ç«  å¼€æºé¡¹ç›®è´¡çŒ®æµç¨‹</h2><blockquote><p>å¼€æºé¡¹ç›®ç”±äºè´¡çŒ®è€…äº’ç›¸ä¸è®¤è¯†ï¼Œæ‰€ä»¥æµç¨‹ä¸Šå¿…ç„¶æ˜¯åŒºåˆ«äºå›¢é˜Ÿæµç¨‹çš„ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šä¾ç„¶æ˜¯åŸºäº Pull Request çš„ Github Flowã€‚</p></blockquote><h3 id="7-1-å¼€æºé¡¹ç›®è´¡çŒ®æµç¨‹"><a href="#7-1-å¼€æºé¡¹ç›®è´¡çŒ®æµç¨‹" class="headerlink" title="7-1 å¼€æºé¡¹ç›®è´¡çŒ®æµç¨‹"></a>7-1 å¼€æºé¡¹ç›®è´¡çŒ®æµç¨‹</h3><h2 id="ç¬¬8ç« -Github-Issues"><a href="#ç¬¬8ç« -Github-Issues" class="headerlink" title="ç¬¬8ç«  Github Issues"></a>ç¬¬8ç«  Github Issues</h2><blockquote><p>Issues ç›¸å½“äºé¡¹ç›®è®ºå›ï¼Œé›†ä¸­è®¨è®ºé¡¹ç›®æ–°åŠŸèƒ½ï¼Œbug ä¿®å¤ä»¥åŠä»»ä½•é¡¹ç›®ç›¸å…³çš„äº‹æƒ…ã€‚ä¼šæ¶‰åŠåˆ° Markdown ä½¿ç”¨å’Œå¤šç§æŠ€å·§ã€‚</p></blockquote><h3 id="8-1-Github-Issues"><a href="#8-1-Github-Issues" class="headerlink" title="8-1 Github Issues"></a>8-1 Github Issues</h3><h2 id="ç¬¬9ç« -Github-Pages-æ­å»ºç½‘ç«™"><a href="#ç¬¬9ç« -Github-Pages-æ­å»ºç½‘ç«™" class="headerlink" title="ç¬¬9ç«  Github Pages æ­å»ºç½‘ç«™"></a>ç¬¬9ç«  Github Pages æ­å»ºç½‘ç«™</h2><blockquote><p>Github æä¾›äº†è‡ªå·±æ­å»ºé¡¹ç›®ç½‘ç«™çš„ä¸€å¥—æ¡†æ¶ï¼Œéå¸¸çš„ç®€å•å®ç”¨ã€‚</p></blockquote><h3 id="9-1-Github-Pages-æ­å»ºç½‘ç«™"><a href="#9-1-Github-Pages-æ­å»ºç½‘ç«™" class="headerlink" title="9-1 Github Pages æ­å»ºç½‘ç«™"></a>9-1 Github Pages æ­å»ºç½‘ç«™</h3><p><a href="https://pages.github.com/" target="_blank" rel="noopener">https://pages.github.com/</a></p><h2 id="ç¬¬10ç« -Github-çš„ç§˜å¯†æœºå…³"><a href="#ç¬¬10ç« -Github-çš„ç§˜å¯†æœºå…³" class="headerlink" title="ç¬¬10ç«  Github çš„ç§˜å¯†æœºå…³"></a>ç¬¬10ç«  Github çš„ç§˜å¯†æœºå…³</h2><blockquote><p>ä¸ºäº†ä¿è¯ç•Œé¢çš„ç®€çº¦ç¾è§‚ï¼ŒGithub çš„å¾ˆå¤šåŠŸèƒ½å…¶å®æ˜¯éšè—çš„ï¼Œä¾‹å¦‚ä¸€äº›éå¸¸èƒ½å¤Ÿæé«˜å·¥ä½œæ•ˆç‡çš„å¿«æ·é”®ã€‚</p></blockquote><h3 id="10-1-Githubçš„ç§˜å¯†æœºå…³"><a href="#10-1-Githubçš„ç§˜å¯†æœºå…³" class="headerlink" title="10-1 Githubçš„ç§˜å¯†æœºå…³"></a>10-1 Githubçš„ç§˜å¯†æœºå…³</h3><p>GitHubå®˜ç½‘ä¸­æœç´¢æ–‡ä»¶å¿«æ·é”®ï¼šT</p><p>GitHubç¤¾äº¤åŒ–ç¼–ç¨‹</p><p>æ€ä¹ˆç­›é€‰å­¦ä¹ å†…å®¹ï¼Ÿï¼šå¯ä»¥è¿½æ˜Ÿ</p><h2 id="ç¬¬11ç« -Until-Next-Time-Goodbye"><a href="#ç¬¬11ç« -Until-Next-Time-Goodbye" class="headerlink" title="ç¬¬11ç«  Until Next Time, Goodbye!"></a>ç¬¬11ç«  Until Next Time, Goodbye!</h2><blockquote><p>æ€»ç»“å’Œä¸‹ä¸€æ­¥çš„å­¦ä¹ å»ºè®®ã€‚</p></blockquote><h3 id="11-1-Until-Next-Time-Goodbye-01-10"><a href="#11-1-Until-Next-Time-Goodbye-01-10" class="headerlink" title="11-1 Until Next Time, Goodbye! (01:10)"></a>11-1 Until Next Time, Goodbye! (01:10)</h3>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>208-ç‰ˆæœ¬ç®¡ç†å·¥å…·ä»‹ç»â€”Gitç¯‡</title>
      <link href="/imooc/208-Git/"/>
      <url>/imooc/208-Git/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/208" target="_blank" rel="noopener">https://www.imooc.com/learn/208</a></p><p>ç®€ä»‹ï¼šæœ¬è¯¾ç¨‹ä¸»è¦è®²è§£äº†gitåœ¨å„å¹³å°çš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨ï¼ŒGitèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è§£å†³æ–‡ä»¶çš„æäº¤ã€æ£€å‡ºã€å›æº¯å†å²ã€å†²çªè§£å†³ã€å¤šäººåä½œæ¨¡å¼ç­‰é—®é¢˜ï¼Œå¹¶ä¸”å¤§å¤§æå‡æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -ç‰ˆæœ¬ç®¡ç†å·¥å…·åˆæ¢"><a href="#ç¬¬1ç« -ç‰ˆæœ¬ç®¡ç†å·¥å…·åˆæ¢" class="headerlink" title="ç¬¬1ç«  ç‰ˆæœ¬ç®¡ç†å·¥å…·åˆæ¢"></a>ç¬¬1ç«  ç‰ˆæœ¬ç®¡ç†å·¥å…·åˆæ¢</h2><blockquote><p>èŠèŠç‰ˆæœ¬ç®¡ç†å·¥å…·æ˜¯ä»€ä¹ˆï¼Œå®ƒèƒ½ä¸ºæˆ‘ä»¬åšä»€ä¹ˆã€‚</p></blockquote><h3 id="1-1-ç‰ˆæœ¬ç®¡ç†å·¥å…·ç®€ä»‹"><a href="#1-1-ç‰ˆæœ¬ç®¡ç†å·¥å…·ç®€ä»‹" class="headerlink" title="1-1 ç‰ˆæœ¬ç®¡ç†å·¥å…·ç®€ä»‹"></a>1-1 ç‰ˆæœ¬ç®¡ç†å·¥å…·ç®€ä»‹</h3><p>ç‰ˆæœ¬ç®¡ç†å·¥å…·æ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Ÿ</p><ul><li>å¤‡ä»½æ–‡ä»¶ï¼ˆç±»ä¼¼Uç›˜ï¼Œç½‘ç›˜ï¼‰</li><li>è®°å½•å†å²ï¼ˆæœ‰å„ä¸ªé˜¶æ®µçš„ä»£ç å†å²ç‰ˆæœ¬ï¼‰</li><li>å›åˆ°è¿‡å»ï¼ˆæ¢å¤å†å²ç‰ˆæœ¬ï¼‰</li><li>å¤šç«¯åä½œï¼ˆå¯ä»¥åœ¨å®¶å·¥ä½œï¼Œä¹Ÿå¯ä»¥åœ¨å…¬å¸ï¼‰</li><li>å›¢é˜Ÿåä½œï¼ˆä»£ç æ•´åˆï¼Œå¤šäººå…±åŒå®Œæˆä¸€ä¸ªé¡¹ç›®ï¼‰</li></ul><h2 id="ç¬¬2ç« -å·¥å…·çš„å†å²"><a href="#ç¬¬2ç« -å·¥å…·çš„å†å²" class="headerlink" title="ç¬¬2ç«  å·¥å…·çš„å†å²"></a>ç¬¬2ç«  å·¥å…·çš„å†å²</h2><blockquote><p>èŠèŠcvsã€svnã€gitã€githubè¿™äº›å·¥å…·çš„å‘å±•å†å²ã€‚</p></blockquote><h3 id="2-1-ç‰ˆæœ¬ç®¡ç†å·¥å…·å‘å±•å†å²"><a href="#2-1-ç‰ˆæœ¬ç®¡ç†å·¥å…·å‘å±•å†å²" class="headerlink" title="2-1 ç‰ˆæœ¬ç®¡ç†å·¥å…·å‘å±•å†å²"></a>2-1 ç‰ˆæœ¬ç®¡ç†å·¥å…·å‘å±•å†å²</h3><ol><li><p>CVS 1985ï¼Œé›†ä¸­å¼ï¼Œå§‹ç¥–ï¼ˆç½‘ç»œç¯å¢ƒï¼‰</p><p>æœ€æ—©æœŸçš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œæ˜¯æŠŠæ–‡ä»¶é›†ä¸­ä¿å­˜åˆ°ä¸­å¿ƒæœåŠ¡å™¨</p></li><li><p>SVN 2000ï¼Œé›†ä¸­å¼ï¼Œé›†å¤§æˆè€…ï¼ˆç½‘ç»œç¯å¢ƒï¼‰</p><p>åœ¨CVSçš„åŸºç¡€ä¸Šçš„åŠ å¼ºç‰ˆï¼Œå¯ä»¥è¿˜åŸåˆ°æŸä¸ªæ—¶é—´ç‚¹</p></li><li><p>Git 2005ï¼Œåˆ†å¸ƒå¼ï¼Œgeekä¸»æµï¼ˆæ— ç½‘ç¯å¢ƒï¼‰</p><p>åˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶</p></li><li><p>GitHub 2008ï¼Œæ‰˜ç®¡ç½‘ç«™ï¼Œgeekç¤¾åŒºï¼ˆç¨‹åºå‘˜æ‰˜ç®¡ç½‘ç«™ï¼‰</p><p>ç½‘ç«™æ‰˜ç®¡ï¼ŒåŸºäºGit</p></li></ol><p>é›†ä¸­å¼ï¼šæœåŠ¡å™¨ã€‚éœ€è¦è”ç½‘</p><p>åˆ†å¸ƒå¼ï¼šæ•ˆç‡é«˜ã€‚æ‹¥æœ‰ç‰ˆæœ¬åº“å³å¯ï¼ˆGitï¼‰</p><h2 id="ç¬¬3ç« -å¦‚ä½•åšä¸ªè‹±é›„"><a href="#ç¬¬3ç« -å¦‚ä½•åšä¸ªè‹±é›„" class="headerlink" title="ç¬¬3ç«  å¦‚ä½•åšä¸ªè‹±é›„"></a>ç¬¬3ç«  å¦‚ä½•åšä¸ªè‹±é›„</h2><blockquote><p>æ¼”ç¤ºgitå’Œgithubçš„åŸºæœ¬ä½¿ç”¨ï¼Œæå‡å·¥ä½œæ•ˆç‡ï¼Œè®©æˆ‘ä»¬åœ¨ç‹¬ç«‹å·¥ä½œä¸­æˆä¸ºè‹±é›„</p></blockquote><h3 id="3-1-Gitä¸‹è½½å’Œå®‰è£…"><a href="#3-1-Gitä¸‹è½½å’Œå®‰è£…" class="headerlink" title="3-1 Gitä¸‹è½½å’Œå®‰è£…"></a>3-1 Gitä¸‹è½½å’Œå®‰è£…</h3><p>å®‰è£…Gitç¯å¢ƒä¸€Windowsï¼š</p><ul><li>ä¸‹è½½Github for Windowsï¼š<a href="https://desktop.github.com/" target="_blank" rel="noopener">https://desktop.github.com/</a></li></ul><h3 id="3-2-linuxä¸‹å®‰è£…Gitç¯å¢ƒ"><a href="#3-2-linuxä¸‹å®‰è£…Gitç¯å¢ƒ" class="headerlink" title="3-2 linuxä¸‹å®‰è£…Gitç¯å¢ƒ"></a>3-2 linuxä¸‹å®‰è£…Gitç¯å¢ƒ</h3><p>å®‰è£…Gitç¯å¢ƒä¸€Linuxï¼š</p><pre><code class="shell">yum install gitgit --help</code></pre><h3 id="3-3-githubæ³¨å†Œ"><a href="#3-3-githubæ³¨å†Œ" class="headerlink" title="3-3 githubæ³¨å†Œ"></a>3-3 githubæ³¨å†Œ</h3><p><a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></p><h3 id="3-4-åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®"><a href="#3-4-åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®" class="headerlink" title="3-4 åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®"></a>3-4 åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®</h3><p><a href="https://github.com/new" target="_blank" rel="noopener">https://github.com/new</a></p><h3 id="3-5-Linuxç¯å¢ƒä¸‹æ£€å‡ºé¡¹ç›®åˆ°æœ¬åœ°"><a href="#3-5-Linuxç¯å¢ƒä¸‹æ£€å‡ºé¡¹ç›®åˆ°æœ¬åœ°" class="headerlink" title="3-5 Linuxç¯å¢ƒä¸‹æ£€å‡ºé¡¹ç›®åˆ°æœ¬åœ°"></a>3-5 Linuxç¯å¢ƒä¸‹æ£€å‡ºé¡¹ç›®åˆ°æœ¬åœ°</h3><pre><code class="shell">git clone https://github.com/tuyrk/demo.git</code></pre><h3 id="3-6-Linuxç¯å¢ƒä¸‹ç¬¬ä¸€æ¬¡æäº¤é¡¹ç›®"><a href="#3-6-Linuxç¯å¢ƒä¸‹ç¬¬ä¸€æ¬¡æäº¤é¡¹ç›®" class="headerlink" title="3-6 Linuxç¯å¢ƒä¸‹ç¬¬ä¸€æ¬¡æäº¤é¡¹ç›®"></a>3-6 Linuxç¯å¢ƒä¸‹ç¬¬ä¸€æ¬¡æäº¤é¡¹ç›®</h3><pre><code class="shell">vi log.txtgit add log.txtgit commit -m &quot;comment&quot;git pushgit config</code></pre><p>å¿½ç•¥ä¿®æ”¹ï¼š</p><ol><li>gitignoreæ·»åŠ éœ€è¦å¿½ç•¥çš„æ–‡ä»¶</li></ol><h3 id="3-7-windowsä¸‹æ£€å‡ºé¡¹ç›®å’Œæäº¤é¡¹ç›®"><a href="#3-7-windowsä¸‹æ£€å‡ºé¡¹ç›®å’Œæäº¤é¡¹ç›®" class="headerlink" title="3-7 windowsä¸‹æ£€å‡ºé¡¹ç›®å’Œæäº¤é¡¹ç›®"></a>3-7 windowsä¸‹æ£€å‡ºé¡¹ç›®å’Œæäº¤é¡¹ç›®</h3><h2 id="ç¬¬4ç« -å’Œå…¶ä»–è‹±é›„ä¸€èµ·å·¥ä½œ"><a href="#ç¬¬4ç« -å’Œå…¶ä»–è‹±é›„ä¸€èµ·å·¥ä½œ" class="headerlink" title="ç¬¬4ç«  å’Œå…¶ä»–è‹±é›„ä¸€èµ·å·¥ä½œ"></a>ç¬¬4ç«  å’Œå…¶ä»–è‹±é›„ä¸€èµ·å·¥ä½œ</h2><blockquote><p>æ¼”ç¤ºå¦‚ä½•é€šè¿‡gitå’Œgithubï¼Œè®©æˆ‘ä»¬å’Œå…¶ä»–è‹±é›„ä¸€èµ·å·¥ä½œï¼Œå‡å°‘å’Œè§£å†³åˆä½œä¸­å‡ºç°çš„å†²çª</p></blockquote><h3 id="4-1-å…³äºä»£ç å†²çª"><a href="#4-1-å…³äºä»£ç å†²çª" class="headerlink" title="4-1 å…³äºä»£ç å†²çª"></a>4-1 å…³äºä»£ç å†²çª</h3><h3 id="4-2-Linuxä¸‹å¦‚ä½•è§£å†³å†²çª"><a href="#4-2-Linuxä¸‹å¦‚ä½•è§£å†³å†²çª" class="headerlink" title="4-2 Linuxä¸‹å¦‚ä½•è§£å†³å†²çª"></a>4-2 Linuxä¸‹å¦‚ä½•è§£å†³å†²çª</h3><p>è§£å†³å†²çªæ­¥éª¤ï¼š</p><ol><li>git pullæ‹‰å–æœ€æ–°ä»£ç </li><li>git diffæŸ¥çœ‹</li><li>æ‰‹åŠ¨ä¿®æ”¹æäº¤å“ªæ¬¡å†²çª</li><li>å†æ¬¡æäº¤</li></ol><pre><code class="shell">git pullgit diffgit add log.txtgit commit -m &quot;è§£å†³å†²çªåæäº¤&quot;git push origin master</code></pre><h3 id="4-3-windowsä¸‹å¦‚ä½•è§£å†³å†²çª"><a href="#4-3-windowsä¸‹å¦‚ä½•è§£å†³å†²çª" class="headerlink" title="4-3 windowsä¸‹å¦‚ä½•è§£å†³å†²çª"></a>4-3 windowsä¸‹å¦‚ä½•è§£å†³å†²çª</h3><h3 id="4-4-å¦‚ä½•å›åˆ°è¿‡å»"><a href="#4-4-å¦‚ä½•å›åˆ°è¿‡å»" class="headerlink" title="4-4 å¦‚ä½•å›åˆ°è¿‡å»"></a>4-4 å¦‚ä½•å›åˆ°è¿‡å»</h3><p>ç‰ˆæœ¬å›æ»šæ“ä½œæ­¥éª¤ï¼š</p><pre><code class="shell">git log # æ˜¾ç¤ºæ‰€æœ‰æäº¤è®°å½•.git reset --hard &lt;æäº¤ID&gt; # å®Œæˆå›æ»šæ“ä½œgit pushgit log # æ˜¾ç¤ºæ–°çš„æäº¤è®°å½•</code></pre><p>ç‰ˆæœ¬è·³è½¬æ“ä½œæ­¥éª¤ï¼š</p><pre><code class="shell">git reflog # æŸ¥çœ‹è¯¥ç”¨æˆ·çš„æ‰€æœ‰æ“ä½œgit reset --hard &lt;æäº¤ID&gt; # å®Œæˆè·³è½¬åˆ°ç°åœ¨</code></pre><h3 id="4-5-å»ºç«‹é‡Œç¨‹ç¢‘"><a href="#4-5-å»ºç«‹é‡Œç¨‹ç¢‘" class="headerlink" title="4-5 å»ºç«‹é‡Œç¨‹ç¢‘"></a>4-5 å»ºç«‹é‡Œç¨‹ç¢‘</h3><p>é‡Œç¨‹ç¢‘ï¼Œå³ç‰ˆæœ¬å·ã€‚æ ‡ç­¾</p><pre><code class="shell">git tag -a &lt;name&gt; -m &quot;comment&quot; # åˆ›å»ºæ ‡ç­¾git push origin &lt;name&gt;git checkout &lt;name&gt; # åˆ‡æ¢æ ‡ç­¾git checkout -b &lt;åˆ†æ”¯åç§°&gt; &lt;name&gt; # åˆ‡æ¢æ ‡ç­¾git tag -d &lt;name&gt; # åˆ é™¤æ ‡ç­¾</code></pre><h3 id="4-6-åˆ†æ”¯å¼€å‘ä¹‹åˆ†æ”¯åˆå¹¶"><a href="#4-6-åˆ†æ”¯å¼€å‘ä¹‹åˆ†æ”¯åˆå¹¶" class="headerlink" title="4-6 åˆ†æ”¯å¼€å‘ä¹‹åˆ†æ”¯åˆå¹¶"></a>4-6 åˆ†æ”¯å¼€å‘ä¹‹åˆ†æ”¯åˆå¹¶</h3><pre><code class="shell">git branch &lt;åˆ†æ”¯åç§°&gt; # åˆ›å»ºåˆ†æ”¯git checkout &lt;åˆ†æ”¯åç§°&gt; # åˆ‡æ¢åˆ†æ”¯git merge &lt;åˆ†æ”¯åç§°&gt; # åˆå¹¶åˆ°masteråˆ†æ”¯ã€‚é¦–å…ˆéœ€åˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œç„¶åè¿›è¡Œåˆå¹¶git branch -d &lt;åˆ†æ”¯åç§°&gt; # åˆ é™¤åˆ†æ”¯</code></pre><h3 id="4-7-åˆ†æ”¯å¼€å‘ä¹‹åˆå¹¶åˆ°master"><a href="#4-7-åˆ†æ”¯å¼€å‘ä¹‹åˆå¹¶åˆ°master" class="headerlink" title="4-7 åˆ†æ”¯å¼€å‘ä¹‹åˆå¹¶åˆ°master"></a>4-7 åˆ†æ”¯å¼€å‘ä¹‹åˆå¹¶åˆ°master</h3><p>é€šè¿‡Githubç½‘é¡µåˆå¹¶åˆ†æ”¯</p><h3 id="4-8-å…³äºå¤šäººåˆä½œçš„ä¸€äº›ç»éªŒ"><a href="#4-8-å…³äºå¤šäººåˆä½œçš„ä¸€äº›ç»éªŒ" class="headerlink" title="4-8 å…³äºå¤šäººåˆä½œçš„ä¸€äº›ç»éªŒ"></a>4-8 å…³äºå¤šäººåˆä½œçš„ä¸€äº›ç»éªŒ</h3><p><strong>åˆ©ç”¨å·¥å…·æå‡å·¥ä½œæ•ˆç‡ï¼Œè€Œä¸æ˜¯å»å­¦ä¹ å·¥å…·æœ¬èº«</strong></p><ol><li>å¤šç”¨å®¢æˆ·ç«¯å’Œå·¥å…·ï¼Œå°‘ç”¨å‘½ä»¤è¡Œï¼Œé™¤éåœ¨linuxæœåŠ¡å™¨ä¸Šç›´æ¥å¼€å‘</li><li>æ¯æ¬¡æäº¤å‰ï¼Œdiffè‡ªå·±çš„ä»£ç ï¼Œä»¥å…æäº¤é”™è¯¯çš„ä»£ç </li><li>ä¸‹ç­å›å®¶å‰ï¼Œæ•´ç†å¥½è‡ªå·±çš„å·¥ä½œåŒº</li><li>å¹¶è¡Œçš„é¡¹ç›®ï¼Œä½¿ç”¨åˆ†æ”¯å¼€å‘</li><li>é‡åˆ°å†²çªæ—¶ï¼Œææ˜ç™½å†²çªçš„åŸå› ï¼Œåƒä¸‡ä¸è¦éšæ„ä¸¢å¼ƒåˆ«äººçš„ä»£ç </li><li>äº§å“å‘å¸ƒåï¼Œè®°å¾—æ‰“tagï¼Œæ–¹ä¾¿å°†æ¥æ‹‰åˆ†æ”¯ä¿®bug</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoé‡æ–°å‘å¸ƒåGitPagesè‡ªå®šä¹‰åŸŸåå¤±æ•ˆ</title>
      <link href="/hexo-gitpages-invalid/"/>
      <url>/hexo-gitpages-invalid/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä½¿ç”¨ <code>Github Pages</code> åŠŸèƒ½å°†åšå®¢æ‰˜ç®¡åœ¨äº† Github ä¸Šï¼Œå¹¶é…ç½® <code>CNAME</code> å°†è‡ªå·±çš„åŸŸåè§£æäº†è¿‡å»ï¼Œåœ¨ <code>Github</code> çš„ä»“åº“è®¾ç½®ä¸­å¼€å§‹ <code>Custom domain</code> çš„åŠŸèƒ½ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è‡ªå·±çš„åŸŸåè®¿é—®å•¦ã€‚</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8felp76szj311g0u00u4.jpg" alt="GitHub Pages" style="zoom:40%;" /><p>ä½†æ˜¯å‘ç°ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ¯æ¬¡é…ç½® <code>Custom domain</code> ä¹‹åï¼Œå†æ¬¡ <code>hexo deploy</code> ä¹‹åï¼Œ<code>Custom domain</code> ä¼šè¢«é‡ç½®å¤±æ•ˆã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>åœ¨ <code>hexo</code> ç”Ÿæˆçš„åšå®¢çš„ <code>source</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>CNAME</code> æ–‡ä»¶ï¼Œç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¡«å…¥ä½ çš„åŸŸåï¼Œæœ€åé‡æ–°éƒ¨ç½²hexoã€‚è¿™æ ·å°±ä¸ä¼šæ¯æ¬¡å‘å¸ƒä¹‹åï¼Œ<code>Github pages</code> é‡Œçš„ <code>Custom domain</code> éƒ½è¢«é‡ç½®æ‰å•¦ã€‚</p><pre><code class="shell">vim ource/CNAME</code></pre><pre><code class="shell">www.tuyrk.cn</code></pre>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git åŒæ—¶ç®¡ç†Githubå’ŒGitee</title>
      <link href="/git-manage-github-gitee/"/>
      <url>/git-manage-github-gitee/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h2 id="1-å–æ¶ˆgitå…¨å±€é…ç½®"><a href="#1-å–æ¶ˆgitå…¨å±€é…ç½®" class="headerlink" title="1.å–æ¶ˆgitå…¨å±€é…ç½®"></a>1.å–æ¶ˆgitå…¨å±€é…ç½®</h2><blockquote><p>å–æ¶ˆå…¨å±€çš„user.nameå’Œuser.email</p></blockquote><pre><code class="shell">git config --global --unset user.name &quot;xxx&quot;git config --global --unset user.email &quot;xxx&quot;</code></pre><p>å…¶ä¸­<code>xxx</code>æ˜¯ä»¥å‰é…ç½®çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ ä¸‹è¾¹å‘½ä»¤æŸ¥çœ‹</p><pre><code class="shell">git config --global --list</code></pre><h2 id="2-ç”Ÿæˆnewçš„ssh-keys"><a href="#2-ç”Ÿæˆnewçš„ssh-keys" class="headerlink" title="2.ç”Ÿæˆnewçš„ssh keys"></a>2.ç”Ÿæˆnewçš„ssh keys</h2><blockquote><p>å¦‚æœéœ€è¦githubå’Œgiteeéƒ½èƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”Ÿæˆgithubå’Œgiteeçš„id_rsaï¼Œ ç„¶åæ”¾åœ¨ä¸€èµ·</p></blockquote><ol><li><p>ç”ŸæˆGithub å’Œ Giteeçš„keys</p><pre><code class="shell">ssh-keygen -t rsa -f ~/.ssh/id_rsa.github -C &quot;xxx&quot;</code></pre><p>æ³¨ï¼šå…¶ä¸­<code>xxx</code>æ˜¯githubå¹³å°çš„æ³¨å†Œé‚®ç®±</p><pre><code class="shell">ssh-keygen -t rsa -f ~/.ssh/id_rsa.gitee -C &quot;...&quot;</code></pre><p>æ³¨ï¼šå…¶ä¸­<code>...</code>æ˜¯ä½ giteeå¹³å°çš„æ³¨é‚®ç®±</p></li><li><p>å°†ç”Ÿæˆçš„æ–°keysæ·»åŠ åˆ°ssh agent</p><pre><code class="shell">ssh-agent bash</code></pre><pre><code class="shell">ssh-add ~/.ssh/id_rsa.githubssh-add ~/.ssh/id_rsa.giteeexit</code></pre></li><li><p>é…ç½®configæ–‡ä»¶</p><blockquote><p>åœ¨.sshæ–‡ä»¶å¤¹ä¸‹é¢é…ç½®configæ–‡ä»¶</p></blockquote><pre><code class="shell">vim ~/.ssh/config</code></pre><pre><code class="shell"># githubHost github.comHostname ssh.github.comPreferredAuthentications publickeyIdentityFile ~/.ssh/id_rsa.githubPort 443# giteeHost gitee.comHostName gitee.comPreferredAuthentications publickeyIdentityFile ~/.ssh/id_rsa.gitee</code></pre></li></ol><h2 id="3-å¹³å°è®¾ç½®SSH"><a href="#3-å¹³å°è®¾ç½®SSH" class="headerlink" title="3.å¹³å°è®¾ç½®SSH"></a>3.å¹³å°è®¾ç½®SSH</h2><blockquote><p>é’¥åŒ™å’Œé…ç½®æ–‡ä»¶æå®šåï¼Œå°±éœ€è¦å°†æˆ‘ä»¬çš„å…¬é’¥æ”¾å…¥åˆ°æˆ‘ä»¬çš„å¹³å°ä¸­äº†</p></blockquote><ol><li><p>Githubï¼šå¤åˆ¶<code>~/.ssh/id_rsa.github.pub</code>çš„å†…å®¹åˆ°Githubå…¬é’¥</p><p>Settings &gt; SSH and GPG keys &gt; New SSH key</p></li><li><p>Giteeï¼šå¤åˆ¶<code>~/.ssh/id_rsa.gitee.pub</code>çš„å†…å®¹åˆ°Giteeå…¬é’¥</p><p>è®¾ç½® &gt; å®‰å…¨è®¾ç½® &gt; SSHå…¬é’¥</p></li></ol><h2 id="4-æµ‹è¯•æ˜¯å¦æˆåŠŸ"><a href="#4-æµ‹è¯•æ˜¯å¦æˆåŠŸ" class="headerlink" title="4.æµ‹è¯•æ˜¯å¦æˆåŠŸ"></a>4.æµ‹è¯•æ˜¯å¦æˆåŠŸ</h2><ol><li><p>Github</p><pre><code class="shell">ssh -T git@github.com</code></pre><p>ç»“æœï¼š</p><pre><code>Hi 766564616! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code></pre></li><li><p>Gitee</p><pre><code class="shell">ssh -T git@gitee.com</code></pre><p>ç»“æœï¼š</p><pre><code>Hi ç¥ç§˜çš„å°å²›å²›! You&#39;ve successfully authenticated, but GITEE.COM does not provide shell access.</code></pre></li></ol><h2 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h2><ol><li><p>Bad owner or permissions on /Users/tuyuankun/.ssh/config</p><pre><code class="shell">sudo chmod 600 config ~/.ssh/config</code></pre></li><li><p>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</p><p>@     WARNING: UNPROTECTED PRIVATE KEY FILE!     @</p><p>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</p><p>Permissions 0777 for â€˜/Users/tuyuankun/.ssh/id_rsa.giteeâ€™ are too open.</p><p>It is required that your private key files are NOT accessible by others.</p><p>This private key will be ignored.</p><p>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</p><p>@     WARNING: UNPROTECTED PRIVATE KEY FILE!     @</p><p>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</p><p>Permissions 0777 for â€˜/Users/tuyuankun/.ssh/id_rsa.githubâ€™ are too open.</p><p>It is required that your private key files are NOT accessible by others.</p><p>This private key will be ignored.</p><pre><code class="shell">sudo chmod 700 ~/.ssh/id_rsa.gitee ~/.ssh/id_rsa.github</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> github </tag>
            
            <tag> gitee </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-hexoå¿«æ·é”®è¯´æ˜</title>
      <link href="/3-hexo-shortcuts/"/>
      <url>/3-hexo-shortcuts/</url>
      
        <content type="html"><![CDATA[<p>å¿«æ·é”®ä¸ºvimé£æ ¼çš„ã€‚æŒ‰é”®å¯èƒ½ä¸vimiumï¼ˆchromeæ’ä»¶ï¼‰çš„å¿«æ·é”®æœ‰å†²çªï¼Œæ’ä»¶è®¾ç½®å±è”½æ‰æ­¤ç«™çš„å¿«æ·é”®å³å¯</p><p>å¦‚æœæœ‰æ¯”è¾ƒå¥½çš„å»ºè®®ï¼Œæ¬¢è¿éªšæ‰°ã€‚</p><h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><h3 id="æœç´¢æ¡†"><a href="#æœç´¢æ¡†" class="headerlink" title="æœç´¢æ¡†"></a>æœç´¢æ¡†</h3><table><thead><tr><th align="left">Key</th><th align="left">Descption</th></tr></thead><tbody><tr><td align="left">ESC</td><td align="left">1.å¦‚æœè¾“å…¥æ¡†æœ‰å†…å®¹ï¼Œæ¸…é™¤å†…å®¹ 2.å¦‚æœè¾“å…¥æ¡†æ— å†…å®¹ï¼Œå¤±å»ç„¦ç‚¹</td></tr><tr><td align="left">i/I</td><td align="left">è·å–ç„¦ç‚¹</td></tr><tr><td align="left">ä¸‹</td><td align="left">å‘ä¸‹é€‰æ‹©æ–‡ç« </td></tr><tr><td align="left">ä¸Š</td><td align="left">å‘ä¸Šé€‰æ‹©æ–‡ç« </td></tr><tr><td align="left">å›è½¦</td><td align="left">æ‰“å¼€å½“å‰é€‰ä¸­çš„æ–‡ç« ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™é»˜è®¤æ‰“å¼€ç¬¬ä¸€ä¸ª</td></tr></tbody></table><h3 id="å…¨å±€"><a href="#å…¨å±€" class="headerlink" title="å…¨å±€"></a>å…¨å±€</h3><table><thead><tr><th align="left">Key</th><th align="left">Descption</th></tr></thead><tbody><tr><td align="left">s/S</td><td align="left">å…¨å±/å–æ¶ˆå…¨å±</td></tr><tr><td align="left">w/W</td><td align="left">æ‰“å¼€/å…³é—­æ–‡ç« ç›®å½•</td></tr><tr><td align="left">j/J</td><td align="left">å‘ä¸‹æ»‘åŠ¨</td></tr><tr><td align="left">k/K</td><td align="left">å‘ä¸Šæ»‘åŠ¨</td></tr><tr><td align="left">gg/GG</td><td align="left">åˆ°æœ€é¡¶ç«¯</td></tr><tr><td align="left">shift+G/g</td><td align="left">åˆ°æœ€ä¸‹ç«¯</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac OSé…ç½®OpenVPNä¹‹Tunnelblick</title>
      <link href="/MacOS-OpenVPN/"/>
      <url>/MacOS-OpenVPN/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é“¾æ¥å…¬å¸å†…ç½‘éœ€è¦ä½¿ç”¨åˆ°OpenVPNï¼Œä¹‹å‰åœ¨Windowsç³»ç»Ÿç›´æ¥ä½¿ç”¨å…¬å¸æä¾›çš„<a href="https://openvpn.net/community-downloads/" target="_blank" rel="noopener">OpenVPNå®¢æˆ·ç«¯</a>ï¼Œä½†æ˜¯ä¼¼ä¹æ²¡æœ‰Macç‰ˆï¼Œæ‰€ä»¥ä½¿ç”¨äº†<a href="https://tunnelblick.net/index.html" target="_blank" rel="noopener">Tunnelblickå·¥å…·</a>ï¼Œä¸‹è¾¹è®°å½•ä¸€ä¸‹åœ¨ä½¿ç”¨ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚</p></blockquote><ol><li><p>ä¸‹è½½â¬<a href="https://tunnelblick.net/index.html" target="_blank" rel="noopener">Tunnelblickå·¥å…·</a>ï¼Œå®‰è£…</p></li><li><p>å‡†å¤‡<code>*.ovpn</code>ã€<code>*.key</code>ã€<code>*.crt</code>åœ¨åŒä¸€ç›®å½•ä¸‹</p><ul><li><p>é—®é¢˜ä¸€ï¼š<code>â€œcomp-lzoâ€ åœ¨openvpn 2.4 ä¸­å·²å¼ƒç”¨,å°†ä¼šåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ç§»é™¤ã€‚</code></p><p>è§£å†³ï¼š<a href="https://github.com/Nyr/openvpn-install/issues/430" target="_blank" rel="noopener">https://github.com/Nyr/openvpn-install/issues/430</a></p><p>åœ¨<code>*.ovpn</code>ä½¿ç”¨<code>compress lzo</code>ä»£æ›¿<code>comp-lzo</code> </p></li><li><p>é—®é¢˜äºŒï¼š<code>â€¢ &#39;ns-cert-type&#39; è¿™ä¸ªé€‰é¡¹åœ¨ OpenVPN 2.4 ç‰ˆæœ¬çš„é…ç½®ä¸­æ˜¯è¿‡æ—¶çš„ï¼Œå·²ç»åœ¨ OpenVPN 2.5 ç‰ˆæœ¬ä¸­ç§»é™¤ã€‚</code></p><p>è§£å†³ï¼šåœ¨<code>*.ovpn</code>ä½¿ç”¨<code>remote-cert-tls server</code>ä»£æ›¿<code>ns-cert-type server</code></p></li><li><p>é—®é¢˜ä¸‰ï¼š<code>unrecognized option or missing or extra parameter(s) ip-win32 (2.4.7)</code></p><p>è§£å†³ï¼šç”±äºè„šæœ¬æ˜¯å…¬å¸ä¸ºWindowsç³»ç»Ÿæä¾›çš„ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œç›´æ¥æ³¨é‡Šè¿™ä¸ªã€‚</p><pre><code class="shell"># ip-win32 dynamic -1# route-method exe</code></pre></li></ul></li><li><p>ç‚¹å‡»<code>*.ovpn</code>ã€è¿æ¥</p></li></ol><p><strong>==OpenVPNä¸­ä¸æ¨èä½¿ç”¨çš„é€‰é¡¹==</strong>ï¼š<a href="https://community.openvpn.net/openvpn/wiki/DeprecatedOptions" target="_blank" rel="noopener">https://community.openvpn.net/openvpn/wiki/DeprecatedOptions</a></p><p>OpenVPNå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶è¯¦è§£ï¼š<a href="https://blog.faystar.com/openvpn_client/" target="_blank" rel="noopener">https://blog.faystar.com/openvpn_client/</a></p><pre><code class="shell"># å®šä¹‰æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯client# å®šä¹‰ä½¿ç”¨è®¾å¤‡ç±»å‹ï¼Œä¸æœåŠ¡ç«¯ä¸€è‡´;dev tapdev tun# å®šä¹‰Windowsä¸‹ä½¿ç”¨çš„ç½‘å¡åç§°,linuxä¸éœ€è¦;dev-node æˆ‘çš„è¿æ¥# å®šä¹‰ä½¿ç”¨çš„åè®®ï¼Œä¸æœåŠ¡ç«¯ä¸€è‡´;proto tcpproto udp# æŒ‡å®šæœåŠ¡ç«¯åœ°å€å’Œç«¯å£,å¯ä»¥ç”¨å¤šè¡ŒæŒ‡å®šå¤šå°æœåŠ¡å™¨# å®ç°è´Ÿè½½å‡è¡¡ï¼ˆä»ä¸Šå¾€ä¸‹å°è¯•ï¼‰remote 118.112.188.108 1194;remote my-server-2 1194# è‹¥ä¸Šé¢é…ç½®äº†å¤šå°æœåŠ¡å™¨ï¼Œè®©å®¢æˆ·ç«¯éšæœºè¿æ¥;remote-random# è§£ææœåŠ¡å™¨åŸŸå# Keep trying indefinitely to resolve the# host name of the OpenVPN server.  Very useful# on machines which are not permanently connected# to the internet such as laptops.resolv-retry infinite# å®¢æˆ·ç«¯ä¸éœ€è¦ç»‘å®šç«¯å£# Most clients do not need to bind to# a specific local port number.nobind# ä¹Ÿæ˜¯ä¸ºäº†è®©Openvpnä¹Ÿnobodyè¿è¡Œï¼ˆå®‰å…¨ï¼‰# æ³¨æ„ï¼šWindowsä¸èƒ½è®¾ç½®;user nobody;group nobody# Try to preserve some state across restarts.persist-keypersist-tun# è‹¥å®¢æˆ·ç«¯é€šè¿‡HTTP Proxyï¼Œåœ¨è¿™é‡Œè®¾ç½®# è¦ä½¿ç”¨Proxyï¼Œä¸èƒ½ä½¿ç”¨UDPä¸ºVPNçš„é€šè®¯åè®®;http-proxy-retry # retry on connection failures;http-proxy [proxy server] [proxy port #]# æ— çº¿ç½‘ç»œæœ‰å¾ˆå¤šå¤šä½™çš„å¤´æ–‡ä»¶ï¼Œè®¾ç½®å¿½ç•¥å®ƒ;mute-replay-warnings# é‡ç‚¹ï¼Œå°±æ˜¯æŒ‡å®šcaå’Œå®¢æˆ·ç«¯çš„è¯ä¹¦# æ³¨æ„ï¼Œä¸‹é¢çš„ä¸¤ä¸ªå·æ˜¯è¿åœ¨ä¸€èµ·çš„ï¼Œä¹‹é—´æ²¡æœ‰ç©ºæ ¼.éœ€åŒæ—¶å­˜åœ¨/æ³¨é‡Šca &quot;ca.crt&quot;# cert &quot;test-1.crt&quot;# key &quot;test-1.key&quot;# å¦‚æœæœåŠ¡ç«¯æ‰“å¼€äº†PAMè®¤è¯æ¨¡å—ï¼Œå¦‚mysqlï¼ŒLDAPæ•°æ®åº“éªŒè¯ï¼Œå®¢æˆ·ç«¯éœ€è¦å¦å…¶æœ‰æ•ˆ;auth-user-pass# ä¸€äº›å®‰å…¨æªæ–½# Verify server certificate by checking# that the certicate has the nsCertType# field set to â€œserverâ€.  This is an# important precaution to protect against# a potential attack discussed here:# http://openvpn.net/howto.html#mitm## To use this feature, you will need to generate# your server certificates with the nsCertType# field set to â€œserverâ€.  The build-key-server# script in the easy-rsa folder will do this.remote-cert-tls server# å¢å¼ºéªŒè¯åŠ å¯†ï¼Œå¦‚æœä½ åœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆäº†ta.keyï¼Œé‚£ä¹ˆè¿™é‡Œå°±éœ€è¦åŠ ä¸Š# then every client must also have the key.tls-auth ta.key 1# Select a cryptographic cipher.# If the cipher option is used on the server# then you must also specify it here.;cipher x# ä½¿ç”¨lzoå‹ç¼©ï¼Œä¸æœåŠ¡ç«¯ä¸€è‡´compress lzo# Set log file verbosity.verb 3# Silence repeating messages;mute 20#é‡‡ç”¨ç”¨æˆ·åå¯†ç æ–¹å¼éªŒè¯,è‹¥ä¸ç”¨è¯ä¹¦çš„è¯,å¯ä»¥è€ƒè™‘è¿™ç§æ–¹å¼,å¯ä»¥ç»“åˆLDAPæˆ–è€…mysql;auth-user-pass#windows7ä¸Šä¼šæŠ¥é”™,å»ºè®®åŠ ä¸Šæ­¤è¡Œ# route-method exe#å¼ºè¡ŒæŒ‡å®šæ·»åŠ è·¯ç”±å‰çš„å»¶æ—¶route-delay 2#ä¸å­˜å‚¨éªŒè¯ç¼“å­˜auth-nocache#è®¾ç½®IPåœ°å€è¿‡æœŸæ—¶é—´# ip-win32 dynamic 0 7200</code></pre>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vpn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>714-æ€§èƒ½æµ‹è¯•ä¹‹LoadRunner</title>
      <link href="/imooc/714-LoadRunner/"/>
      <url>/imooc/714-LoadRunner/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/714" target="_blank" rel="noopener">https://www.imooc.com/learn/714</a></p><p>ç®€ä»‹ï¼šæ€§èƒ½æµ‹è¯•çš„å®æ–½ä¸ä»…ä»…æ˜¯æŒæ¡LoadRunnerå³å¯ï¼Œè¿˜éœ€è¦è¿›è¡Œæ€§èƒ½æµ‹è¯•è®¾è®¡ä¸æ€§èƒ½æµ‹è¯•æ„å»ºå®æ–½ç­‰ã€‚æœ¬è¯¾ç¨‹çš„ç›®æ ‡å°±æ˜¯å¸®åŠ©å„ä½æœ‹å‹æé«˜å®æˆ˜èƒ½åŠ›ï¼Œè®©æ€§èƒ½æµ‹è¯•è½åœ°ï¼Œæ¥åœ°æ°”ï¼Œè¯¾ç¨‹ä¸­ä¼šæ‹¿å®é™…æ¡ˆä¾‹ä½œä¸ºåˆ†ææ‰‹æ®µè¿›è¡Œæ¼”ç»ƒï¼Œå¢å¼ºåŠ¨æ‰‹æ“ä½œæŠ€èƒ½ã€‚ é¡¹ç›®å®æˆ˜è¿›é˜¶æ¨èè¯¾ç¨‹ï¼ï¼ï¼ æ€§èƒ½æµ‹è¯• LoadRunner å·¥å…·å®æˆ˜-æ…•è¯¾ç½‘å®æˆ˜ <a href="http://coding.imooc.com/class/127.html" target="_blank" rel="noopener">http://coding.imooc.com/class/127.html</a></p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>é€šè¿‡è¯¦ç»†çš„ç»†åˆ†æ•™å­¦ï¼Œè®©å­¦ç”Ÿç†è§£ä»€ä¹ˆæ˜¯æ€§èƒ½æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•çš„æµç¨‹ï¼Œä½¿ç”¨Loadrunneråšæ€§èƒ½æµ‹è¯•çš„æ­¥éª¤</p></blockquote><h3 id="1-1-æ€§èƒ½æµ‹è¯•å­¦ä¹ å†…å®¹æŒ‡å—-03-52"><a href="#1-1-æ€§èƒ½æµ‹è¯•å­¦ä¹ å†…å®¹æŒ‡å—-03-52" class="headerlink" title="1-1 æ€§èƒ½æµ‹è¯•å­¦ä¹ å†…å®¹æŒ‡å— (03:52)"></a>1-1 æ€§èƒ½æµ‹è¯•å­¦ä¹ å†…å®¹æŒ‡å— (03:52)</h3><p>ç›®å½•ï¼š</p><ul><li>ç¬¬ä¸€ç«  æ€§èƒ½æµ‹è¯•ç†è®º</li><li>ç¬¬äºŒç«  LoadRunnerçš„åŸºæœ¬æ“ä½œ</li><li>ç¬¬ä¸‰ç«  ç³»ç»Ÿçš„ç›‘æ§ã€åˆ†æä¸è°ƒä¼˜</li></ul><p>ç¬¬ä¸€ç«  æ€§èƒ½æµ‹è¯•ç†è®º</p><ul><li>æ€§èƒ½æµ‹è¯•çš„<strong>å¸¸ç”¨æœ¯è¯­</strong></li><li>æ€§èƒ½æµ‹è¯•çš„<strong>åº”ç”¨é¢†åŸŸ</strong></li><li>æ€§èƒ½æµ‹è¯•å¸¸ç”¨<strong>å·¥å…·çš„åŸç†</strong></li></ul><p>ç¬¬äºŒç«  LoadRunnerçš„åŸºæœ¬æ“ä½œ</p><ul><li><p>LoadRunnerçš„åŸç†åˆ†æ</p></li><li><p>LoadRunnerè„šæœ¬çš„å¼€å‘æµç¨‹</p><p>LoadRunnerçš„<strong>ä¸‰ä¸ªç»„ä»¶</strong>ï¼š</p><ul><li>VuGenï¼šåŸºæœ¬è®¾ç½®ã€æ£€æŸ¥ç‚¹ã€å‚æ•°åŒ–ã€å…³è”ã€è°ƒè¯•ã€äº‹åŠ¡</li><li>Controllerï¼šåœºæ™¯è®¾ç½®ã€åœºæ™¯æ‰§è¡Œã€èµ„æºç›‘æ§ã€é›†åˆç‚¹ã€IPæ¬ºéª—ã€è´Ÿè½½å‡è¡¡</li><li>Analysisï¼šæ‘˜è¦æŠ¥å‘Šã€å¸¸è§å›¾åˆ†æã€ç»“æœåˆ†æå®è·µ</li></ul></li></ul><p>ç¬¬ä¸‰ç«  ç³»ç»Ÿçš„ç›‘æ§ã€åˆ†æã€è°ƒä¼˜</p><ul><li>Windows/Linuxçš„ç›‘æ§ã€åˆ†æã€è°ƒä¼˜</li><li>æ•°æ®åº“çš„ç›‘æ§ã€åˆ†æã€è°ƒä¼˜</li><li>ä¸­é—´ä»¶çš„ç›‘æ§ã€åˆ†æã€è°ƒä¼˜</li></ul><h2 id="ç¬¬2ç« -ä¸»è¦æ¦‚å¿µä»‹ç»"><a href="#ç¬¬2ç« -ä¸»è¦æ¦‚å¿µä»‹ç»" class="headerlink" title="ç¬¬2ç«  ä¸»è¦æ¦‚å¿µä»‹ç»"></a>ç¬¬2ç«  ä¸»è¦æ¦‚å¿µä»‹ç»</h2><blockquote><p>ä»‹ç»æ€§èƒ½æµ‹è¯•çš„è¡ç”Ÿå²ä»¥åŠç‰¹ç‚¹ç­‰ã€‚</p></blockquote><h3 id="2-1-æ€§èƒ½æµ‹è¯•ç†è®º-09-17"><a href="#2-1-æ€§èƒ½æµ‹è¯•ç†è®º-09-17" class="headerlink" title="2-1 æ€§èƒ½æµ‹è¯•ç†è®º (09:17)"></a>2-1 æ€§èƒ½æµ‹è¯•ç†è®º (09:17)</h3><p>ç›®å½•ï¼š</p><ul><li>æ€§èƒ½æµ‹è¯•çš„æ¦‚å¿µåŠå…¶åˆ†ç±»</li><li>æ€§èƒ½æµ‹è¯•çš„æµç¨‹</li><li>æ€§èƒ½æµ‹è¯•å·¥å…·çš„åŸç†</li></ul><p>è½¯ä»¶ç³»ç»Ÿçš„æ€§èƒ½åŒ…æ‹¬ï¼šæ‰§è¡Œæ•ˆç‡ã€èµ„æºå ç”¨ã€ç³»ç»Ÿç¨³å®šæ€§ã€å®‰å…¨æ€§ã€å…¼å®¹æ€§ã€å¯é æ€§ã€å¯æ‰©å±•æ€§</p><p>æ€§èƒ½æµ‹è¯•çš„æ¦‚å¿µï¼š</p><blockquote><p>æ€§èƒ½æµ‹è¯•ä¸»è¦é€šè¿‡è‡ªåŠ¨åŒ–çš„æµ‹è¯•å·¥å…·æ¨¡æ‹Ÿå¤šç§æ­£å¸¸ã€å³°å€¼ä»¥åŠå¼‚å¸¸è´Ÿè½½æ¡ä»¶æ¥å¯¹ç³»ç»Ÿçš„å„é¡¹æ€§èƒ½æŒ‡æ ‡è¿›è¡Œæµ‹è¯•ã€‚</p></blockquote><p>æ€§èƒ½æµ‹è¯•å¸¸è§åˆ†ç±»ï¼š</p><ul><li><p>æ€§èƒ½æµ‹è¯•ï¼ˆç‹­ä¹‰ï¼‰</p><p>æ–¹æ³•ï¼šé€šè¿‡æ¨¡æ‹Ÿä¸šåŠ¡ç”Ÿäº§è¿è¡Œçš„ä¸šåŠ¡å‹åŠ›é‡å’Œä½¿ç”¨åœºæ™¯ç»„åˆï¼Œæµ‹è¯•ç³»ç»Ÿçš„æ€§èƒ½æ˜¯å¦æ»¡è¶³ç”Ÿäº§æ€§èƒ½çš„è¦æ±‚</p><p>ç›®çš„ï¼šéªŒè¯ç³»ç»Ÿæ˜¯å¦å…·æœ‰ç³»ç»Ÿå®£ç§°çš„èƒ½åŠ›</p></li><li><p>è´Ÿè½½æµ‹è¯•</p><p>æ–¹æ³•ï¼šé€šè¿‡åœ¨è¢«æµ‹ç³»ç»Ÿä¸Šä¸æ–­åŠ å‹ï¼Œç›´åˆ°æ€§èƒ½æŒ‡æ ‡è¾¾åˆ°æé™</p><p>ç›®çš„ï¼šæ‰¾åˆ°ç³»ç»Ÿå¤„ç†èƒ½åŠ›çš„æé™</p></li><li><p>å‹åŠ›æµ‹è¯•ï¼ˆå¼ºåº¦æµ‹è¯•ï¼‰</p><p>æ–¹æ³•ï¼šæµ‹è¯•ç³»ç»Ÿåœ¨ä¸€å®šé¥±å’ŒçŠ¶æ€ä¸‹ï¼Œç³»ç»Ÿèƒ½å¤Ÿå¤„ç†çš„ä¼šè¯èƒ½åŠ›ï¼Œä»¥åŠç³»ç»Ÿæ˜¯å¦ä¼šå‡ºç°é”™è¯¯</p><p>ç›®çš„ï¼šæ£€æŸ¥ç³»ç»Ÿå¤„äºå‹åŠ›æ€§èƒ½ä¸‹æ—¶ï¼Œåº”ç”¨çš„è¡¨ç°</p></li><li><p>å¹¶å‘æµ‹è¯•</p><p>æ–¹æ³•ï¼šé€šè¿‡æ¨¡æ‹Ÿç”¨æˆ·å¹¶å‘è®¿é—®ï¼Œæµ‹è¯•å¤šç”¨æˆ·å¹¶å‘è®¿é—®åŒä¸€ä¸ªåº”ç”¨ã€æ¨¡å—æˆ–è€…æ•°æ®è®°å½•æ—¶æ˜¯å¦å­˜åœ¨æ­»é”æˆ–å…¶ä»–æ€§èƒ½é—®é¢˜</p><p>ç›®çš„ï¼šå‘ç°ç³»ç»Ÿä¸­å¯èƒ½éšè—çš„å¹¶å‘è®¿é—®æ—¶çš„é—®é¢˜</p></li><li><p>é…ç½®æµ‹è¯•</p><p>æ–¹æ³•ï¼šé€šè¿‡å¯¹è¢«æµ‹ç³»ç»Ÿçš„è½¯ç¡¬ä»¶ç¯å¢ƒè¿›è¡Œè°ƒæ•´ï¼Œäº†è§£ä¸åŒè½¯ç¡¬ä»¶ç¯å¢ƒå¯¹ç³»ç»Ÿçš„æ€§èƒ½çš„å½±å“ç¨‹åº¦ï¼Œä»è€Œæ‰¾åˆ°ç³»ç»Ÿå„é¡¹èµ„æºçš„æœ€ä¼˜åˆ†é…åŸåˆ™</p><p>ç›®çš„ï¼šäº†è§£å„ç§ä¸åŒå› ç´ å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ç¨‹åº¦</p></li><li><p>å¯é æ€§æµ‹è¯•ï¼ˆç¨³å®šæ€§æµ‹è¯•ï¼‰</p><p>æ–¹æ³•ï¼šåœ¨ç»™ç³»ç»ŸåŠ è½½ä¸€å®šä¸šåŠ¡å‹åŠ›çš„æƒ…å†µä¸‹ï¼Œä½¿ç³»ç»Ÿè¿è¡Œä¸€æ®µæ—¶é—´ï¼Œä»¥æ­¤æ£€æµ‹ç³»ç»Ÿæ˜¯å¦ç¨³å®š</p><p>ç›®çš„ï¼šéªŒè¯ç³»ç»Ÿæ˜¯å¦æ”¯æŒé•¿æœŸç¨³å®šçš„è¿è¡Œ</p></li></ul><p>ç³»ç»Ÿæµ‹è¯•çš„æµç¨‹ï¼š</p><ol><li>æµ‹è¯•è®¡åˆ’é˜¶æ®µ<ul><li>æ˜ç¡®æµ‹è¯•å¯¹è±¡</li><li>å®šä¹‰æµ‹è¯•ç›®æ ‡</li><li>å®šä¹‰æµ‹è¯•é€šè¿‡çš„æ ‡å‡†</li><li>è§„åˆ’æµ‹è¯•è¿›åº¦</li><li>è§„åˆ’æµ‹è¯•å‚ä¸äººå‘˜ï¼ˆéœ€æ±‚ã€å¼€å‘ã€æµ‹è¯•ã€è¿ç»´å’Œé…ç½®ï¼‰</li><li>ç”³è¯·æµ‹è¯•èµ„æº</li><li>é£é™©æ§åˆ¶</li></ul></li><li>æµ‹è¯•è®¾è®¡é˜¶æ®µ<ul><li>è®¾è®¡æµ‹è¯•æ•°æ®</li><li>è®¾è®¡æµ‹è¯•ç”¨ä¾‹</li><li>è®¾è®¡æµ‹è¯•åœºæ™¯</li></ul></li><li>æµ‹è¯•å¼€å‘é˜¶æ®µ<ul><li>æµ‹è¯•ç¯å¢ƒæ­å»º</li><li>æµ‹è¯•è¿‡ç¨‹æ–‡æ¡£å®šä¹‰ä»¥åŠé…ç½®</li><li>æµ‹è¯•è„šæœ¬å¼€å‘ã€è°ƒè¯•</li><li>æµ‹è¯•æ•°æ®å‡†å¤‡</li><li>åŸºå‡†æµ‹è¯•</li></ul></li><li>æµ‹è¯•æ‰§è¡Œé˜¶æ®µ<ul><li>æ‰§è¡Œæµ‹è¯•æ¨¡å‹ï¼ŒåŒ…æ‹¬æ‰§è¡Œè„šæœ¬å’Œåœºæ™¯</li><li>æµ‹è¯•è¿‡ç¨‹ç›‘æ§ï¼ŒåŒ…æ‹¬æŸ¥çœ‹logã€ç›‘æ§æœåŠ¡å™¨èµ„æºã€æ•°æ®åº“å’Œä¸­é—´ä»¶ç­‰</li></ul></li><li>æµ‹è¯•ç»“æœåˆ†æé˜¶æ®µ<ul><li>æ ¹æ®æµ‹è¯•ç»“æœå’Œç›‘æ§ç»“æœè¿›è¡Œæµ‹è¯•åˆ†æ</li><li>æ ¹æ®æ€§èƒ½æµ‹è¯•ç›®æ ‡ï¼Œåˆ†æå‡ºç³»ç»Ÿå­˜åœ¨çš„æ€§èƒ½ç“¶é¢ˆï¼Œå¹¶ç»™å‡ºä¼˜åŒ–å»ºè®®</li></ul></li><li>æµ‹è¯•æŠ¥å‘Šé˜¶æ®µ<ul><li>æµ‹è¯•èŒƒå›´</li><li>æµ‹è¯•æ‰§è¡Œä»¥åŠå‚ä¸äººå‘˜</li><li>åŸºå‡†æµ‹è¯•æ•°æ®</li><li>æµ‹è¯•æ‰§è¡Œçš„è¯¦ç»†æ­¥éª¤ï¼ˆåœºæ™¯è®¾è®¡ï¼‰</li><li>æµ‹è¯•æ•°æ®è®°å½•ã€ç›‘æ§ç»“æœ</li><li>æµ‹è¯•ç»“æœå¯¹æ¯”ä»¥åŠæ€»ç»“æ€§è¯„ä»·</li></ul></li></ol><p>æ€§èƒ½æµ‹è¯•å·¥å…·(LoadRunnerã€JMeter)ç»„æˆï¼š</p><blockquote><p>è„šæœ¬ç”Ÿæˆå™¨ã€å‹åŠ›ç”Ÿæˆå™¨ã€å‹åŠ›æ§åˆ¶å™¨ã€ç»“æœåˆ†æå™¨</p></blockquote><p>æ€§èƒ½æµ‹è¯•å·¥å…·ğŸ”§çš„åŸç†ï¼š</p><p>LoadRunnerå…¶å®æ˜¯ä¸€ä¸ªä»£ç†ï¼Œä»£ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¸­é—´äººã€‚</p><p>LoadRunneré€šè¿‡ä»£ç†æˆªè·å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„äº¤äº’æ•°æ®æµ</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghjr9kftj31m40g4dip.jpg" alt="æ€§èƒ½æµ‹è¯•å·¥å…·ğŸ”§çš„åŸç†" style="zoom:30%;" /><h2 id="ç¬¬3ç« -å·¥å…·çš„å®‰è£…å’Œå¯åŠ¨"><a href="#ç¬¬3ç« -å·¥å…·çš„å®‰è£…å’Œå¯åŠ¨" class="headerlink" title="ç¬¬3ç«  å·¥å…·çš„å®‰è£…å’Œå¯åŠ¨"></a>ç¬¬3ç«  å·¥å…·çš„å®‰è£…å’Œå¯åŠ¨</h2><blockquote><p>Loadrunnerçš„ä¸‹è½½å’Œå®‰è£…æ³¨æ„äº‹é¡¹ï¼›Web ToursæœåŠ¡çš„å¯åŠ¨å’ŒåŠŸèƒ½ä»‹ç»</p></blockquote><h3 id="3-1-Loadrunnerçš„å®‰è£…ä¸ä»‹ç»-07-04"><a href="#3-1-Loadrunnerçš„å®‰è£…ä¸ä»‹ç»-07-04" class="headerlink" title="3-1 Loadrunnerçš„å®‰è£…ä¸ä»‹ç» (07:04)"></a>3-1 Loadrunnerçš„å®‰è£…ä¸ä»‹ç» (07:04)</h3><p>å®‰è£…LoadRunner(<strong>==Windowsç‰ˆ==</strong>)ï¼š</p><ul><li>ä¸‹è½½åœ°å€â¬ï¼š<a href="https://pan.baidu.com/s/1XzfbZ7r6OlV1T61IA-mGvQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1XzfbZ7r6OlV1T61IA-mGvQ</a> å¯†ç :1sbr</li></ul><p>LoadRunnerçš„ç»„ä»¶ï¼š</p><ul><li>Virtual User Generatorï¼šå½•åˆ¶æœ€ç»ˆç”¨æˆ·ä¸šåŠ¡æµç¨‹å¹¶åˆ›å»ºæ€§èƒ½æµ‹è¯•è„šæœ¬</li><li>Controllerï¼šç»„ç»‡ã€é©±åŠ¨ã€ç®¡ç†å¹¶ç›‘æ§è´Ÿè½½æµ‹è¯•</li><li>Analysisï¼šç”¨äºæŸ¥çœ‹ã€å‰–æå’Œæ¯”è¾ƒæ€§èƒ½ç»“æœ</li></ul><p>LoadRunnerçš„åŠŸèƒ½ï¼š</p><ul><li>è½»æ¾åˆ›å»ºè™šæ‹Ÿç”¨æˆ·</li><li>åˆ›å»ºçœŸå®çš„è´Ÿè½½</li><li>åˆ†æç»“æœä»¥ç²¾ç¡®å®šä½é—®é¢˜æ‰€åœ¨</li><li>é‡å¤æµ‹è¯•ä¿è¯ç³»ç»Ÿå‘å¸ƒçš„é«˜æ€§èƒ½</li></ul><h3 id="3-2-HP-Web-Toursä½¿ç”¨-05-01"><a href="#3-2-HP-Web-Toursä½¿ç”¨-05-01" class="headerlink" title="3-2 HP Web Toursä½¿ç”¨ (05:01)"></a>3-2 HP Web Toursä½¿ç”¨ (05:01)</h3><p>å¯åŠ¨Web ToursæœåŠ¡</p><pre><code>/HP/LoadRunner/WebTours/StartServer.bat</code></pre><p>è®¿é—®Web Tours</p><pre><code>http://127.0.0.1:1080/WebTours/</code></pre><p>å¸å·ï¼šjojo  å¯†ç ï¼šbean</p><p>Web ToursåŠŸèƒ½ä»‹ç»ï¼š</p><blockquote><p>æ³¨å†Œï¼Œç™»å½•ï¼Œè®¢ç¥¨ï¼ŒæŸ¥çœ‹å†å²è®¢ç¥¨è®°å½•ï¼Œå–æ¶ˆè®¢ç¥¨ï¼Œé€€å‡º</p></blockquote><h2 id="ç¬¬4ç« -å½•åˆ¶æµ‹è¯•è„šæœ¬"><a href="#ç¬¬4ç« -å½•åˆ¶æµ‹è¯•è„šæœ¬" class="headerlink" title="ç¬¬4ç«  å½•åˆ¶æµ‹è¯•è„šæœ¬"></a>ç¬¬4ç«  å½•åˆ¶æµ‹è¯•è„šæœ¬</h2><blockquote><p>ä»‹ç»VUGenå½•åˆ¶è„šæœ¬çš„æ­¥éª¤ï¼Œä»‹ç»Loadrunnerçš„ä¸¤ç§å½•åˆ¶é€‰é¡¹ï¼›å½•åˆ¶ç™»å½•ã€è®¢ç¥¨ã€æŸ¥è¯¢å’Œé€€å‡ºç­‰æ“ä½œæµç¨‹ï¼›å¯¹å½•åˆ¶çš„è„šæœ¬è¿›è¡Œå‚æ•°åŒ–å’Œå…³è”ç­‰å¢å¼ºï¼Œä½¿å¾—è„šæœ¬èƒ½å›æ”¾æˆåŠŸï¼›ä»‹ç»å‚æ•°åŒ–ä¸åŒé€‰é¡¹ç»„åˆçš„ç”¨é€”</p></blockquote><h3 id="4-1-å½•åˆ¶é€‰é¡¹-07-39"><a href="#4-1-å½•åˆ¶é€‰é¡¹-07-39" class="headerlink" title="4-1 å½•åˆ¶é€‰é¡¹ (07:39)"></a>4-1 å½•åˆ¶é€‰é¡¹ (07:39)</h3><h3 id="4-2-å½•åˆ¶è„šæœ¬å‰æ¦‚å¿µ-11-10"><a href="#4-2-å½•åˆ¶è„šæœ¬å‰æ¦‚å¿µ-11-10" class="headerlink" title="4-2 å½•åˆ¶è„šæœ¬å‰æ¦‚å¿µ (11:10)"></a>4-2 å½•åˆ¶è„šæœ¬å‰æ¦‚å¿µ (11:10)</h3><h3 id="4-3-è°ƒè¯•è„šæœ¬-31-59"><a href="#4-3-è°ƒè¯•è„šæœ¬-31-59" class="headerlink" title="4-3 è°ƒè¯•è„šæœ¬ (31:59)"></a>4-3 è°ƒè¯•è„šæœ¬ (31:59)</h3><h2 id="ç¬¬5ç« -åˆ›å»ºæµ‹è¯•åœºæ™¯"><a href="#ç¬¬5ç« -åˆ›å»ºæµ‹è¯•åœºæ™¯" class="headerlink" title="ç¬¬5ç«  åˆ›å»ºæµ‹è¯•åœºæ™¯"></a>ç¬¬5ç«  åˆ›å»ºæµ‹è¯•åœºæ™¯</h2><blockquote><p>ä»è„šæœ¬åˆ°åˆ›å»ºåœºæ™¯ï¼Œå†åˆ°è¿è¡Œåœºæ™¯çš„æµç¨‹åšè¯¦ç»†è®²è§£</p></blockquote><h3 id="5-1-è®¾ç½®å¹¶æ‰§è¡Œåœºæ™¯-25-18"><a href="#5-1-è®¾ç½®å¹¶æ‰§è¡Œåœºæ™¯-25-18" class="headerlink" title="5-1 è®¾ç½®å¹¶æ‰§è¡Œåœºæ™¯ (25:18)"></a>5-1 è®¾ç½®å¹¶æ‰§è¡Œåœºæ™¯ (25:18)</h3><h2 id="ç¬¬6ç« -åˆ†ææµ‹è¯•ç»“æœ"><a href="#ç¬¬6ç« -åˆ†ææµ‹è¯•ç»“æœ" class="headerlink" title="ç¬¬6ç«  åˆ†ææµ‹è¯•ç»“æœ"></a>ç¬¬6ç«  åˆ†ææµ‹è¯•ç»“æœ</h2><blockquote><p>Loadrunnerç»“æœçš„åˆ†æå’Œå¯¼å‡ºæŠ¥å‘Š</p></blockquote><h3 id="6-1-æµ‹è¯•ç»“æœåˆ†æ-09-41"><a href="#6-1-æµ‹è¯•ç»“æœåˆ†æ-09-41" class="headerlink" title="6-1 æµ‹è¯•ç»“æœåˆ†æ (09:41)"></a>6-1 æµ‹è¯•ç»“æœåˆ†æ (09:41)</h3><h2 id="ç¬¬7ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬7ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬7ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬7ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>é€šè¿‡æœ¬è¯¾ç¨‹ï¼Œæˆ‘ä»¬å­¦ä¹ å’Œç†è§£äº†ä½¿ç”¨Loadrunneråšæ€§èƒ½æµ‹è¯•çš„æ­¥éª¤å’Œæ–¹æ³•ã€‚</p></blockquote><h3 id="7-1-æ€§èƒ½æµ‹è¯•æ¡†æ¶åŸºç¡€è¯¾ç¨‹æ€»ç»“-03-29"><a href="#7-1-æ€§èƒ½æµ‹è¯•æ¡†æ¶åŸºç¡€è¯¾ç¨‹æ€»ç»“-03-29" class="headerlink" title="7-1 æ€§èƒ½æµ‹è¯•æ¡†æ¶åŸºç¡€è¯¾ç¨‹æ€»ç»“ (03:29)"></a>7-1 æ€§èƒ½æµ‹è¯•æ¡†æ¶åŸºç¡€è¯¾ç¨‹æ€»ç»“ (03:29)</h3>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€§èƒ½æµ‹è¯• </tag>
            
            <tag> LoadRunner </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>735-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡</title>
      <link href="/imooc/735-JMeter/"/>
      <url>/imooc/735-JMeter/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/735" target="_blank" rel="noopener">https://www.imooc.com/learn/735</a></p><p>ç®€ä»‹ï¼šæœ¬è¯¾ç¨‹é€šè¿‡é€šä¿—æ˜“æ‡‚çš„è®²æ³•ï¼Œéå¸¸å®¹æ˜“ç†è§£çš„æ–¹å¼å»è®²è§£å¦‚ä½•ä½¿ç”¨jmeterè¿›è¡Œwebåº”ç”¨çš„æ€§èƒ½æµ‹è¯•ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -jmeteråŸºæœ¬ä»‹ç»"><a href="#ç¬¬1ç« -jmeteråŸºæœ¬ä»‹ç»" class="headerlink" title="ç¬¬1ç«  jmeteråŸºæœ¬ä»‹ç»"></a>ç¬¬1ç«  jmeteråŸºæœ¬ä»‹ç»</h2><blockquote><p>äº†è§£JmeteråŠæœ¬è¯¾ç¨‹çš„ä¸»è¦å†…å®¹ï¼ŒçŸ¥é“å¦‚ä½•ä¸‹è½½åˆ°Jmeterï¼›äº†è§£Jmeterçš„ç»„æˆå¹¶äº†è§£æ€§èƒ½æµ‹è¯•å·¥å…·çš„ç»„æˆï¼›äº†è§£jmeterçš„ç›®å½•åŠä¸ºä»€ä¹ˆä½¿ç”¨jmeter</p></blockquote><h3 id="1-1-Jmeteræ•´ä½“ç®€ä»‹-20-20"><a href="#1-1-Jmeteræ•´ä½“ç®€ä»‹-20-20" class="headerlink" title="1-1 Jmeteræ•´ä½“ç®€ä»‹ (20:20)"></a>1-1 Jmeteræ•´ä½“ç®€ä»‹ (20:20)</h3><p>è½¯ä»¶æ¶æ„ï¼š</p><ul><li><p>BSï¼šbrowser-server</p></li><li><p>CSï¼šclient-server</p></li></ul><p>Jmeterç®€ä»‹ï¼š</p><ul><li><p>å®˜ç½‘ï¼š<a href="https://jmeter.apache.org/" target="_blank" rel="noopener">https://jmeter.apache.org/</a></p></li><li><p>éœ€è¦Javaç¯å¢ƒä½œä¸ºæ”¯æ’‘ã€‚</p></li></ul><p>ä¸‹è½½ï¼š<a href="http://mirror.bit.edu.cn/apache//jmeter/binaries/apache-jmeter-5.1.1.zip" target="_blank" rel="noopener">http://mirror.bit.edu.cn/apache//jmeter/binaries/apache-jmeter-5.1.1.zip</a></p><p>Jmeterç»„æˆï¼š</p><ul><li><p>å–æ ·å™¨</p><p>è¿›è¡Œè„šæœ¬é€»è¾‘æ§åˆ¶ï¼ˆæ§åˆ¶ä¸šåŠ¡æµç¨‹ã€‚ä»€ä¹ˆæ ·çš„è¯·æ±‚ï¼Œä»€ä¹ˆæ—¶å€™å‘å‡ºè¯·æ±‚ç­‰ï¼‰</p></li><li><p>çº¿ç¨‹ç»„</p><p>åœºæ™¯è®¾ç½®ï¼ˆå¤šå°‘çº¿ç¨‹ã€‚å¤šå°‘ç”¨æˆ·è®¿é—®ï¼Œè®¿é—®å¤šå°‘æ¬¡ç­‰ï¼‰</p></li><li><p>ç›‘è§†å™¨</p><p>ç›‘æ§æˆ‘ä»¬çš„è„šæœ¬è¿è¡Œï¼Œå–å¾—æ€§èƒ½æŒ‡æ ‡ï¼ˆç”µé‡ç­‰ï¼‰</p></li></ul><p>ä»»ä½•ä¸€æ¬¾æ€§èƒ½æµ‹è¯•å·¥å…·éƒ½åº”è¯¥æ˜¯ç”±è¿™ä¸‰éƒ¨åˆ†ç»„æˆ</p><p>Jmeteræ“ä½œï¼š</p><ol><li><p>æ·»åŠ çº¿ç¨‹ç»„(Thread Group)ï¼š[Test Plan]-[Add]-[Threads(Users)]-[Thread Group]</p><p>Thread Propertiesï¼ˆçº¿ç¨‹å±æ€§ï¼‰</p><ul><li>Numbers of Threads(users)ï¼šæ§åˆ¶å¤šå°‘ç”¨æˆ·è¿›è¡Œå¹¶å‘</li></ul></li></ol><ul><li>Ramp-UpPeriod(in seconds)ï¼šåœ¨å¤šå°‘ç§’ä¹‹å†…è¿›è¡Œå¹¶å‘ã€‚åŠ å‹ç­–ç•¥<ul><li>Loop Countï¼šå¾ªç¯æ¬¡æ•°</li></ul></li></ul><ol start="2"><li><p>æ·»åŠ å–æ ·å™¨(Sampler)ï¼š[Thread Group]-[Add]-[Sampler]-[HTTP Request]</p></li><li><p>æ·»åŠ ç›‘å¬å™¨(Listener)</p><ul><li><p>æŸ¥çœ‹ç»“æœæ ‘(View Results Tree)ï¼š[Thread Group]-[Add]-[Listener]-[View Results Tree]</p><p>ã€æŸ¥çœ‹ç»“æœæ ‘(View Results Tree)ã€‘è¾…åŠ©è¿›è¡Œè„šæœ¬è°ƒè¯•</p></li><li><p>èšåˆæŠ¥å‘Š(Aggregate Report)ï¼š[Thread Group]-[Add]-[Listener]-[Aggregate Report]</p><p>ç»Ÿè®¡è®¿é—®äº†å¤šå°‘æ¬¡ï¼Œè®¿é—®æ—¶é—´ï¼Œé”™è¯¯ç‡</p></li></ul></li><li><p>é€»è¾‘æ§åˆ¶å™¨(Logic Controller)</p></li><li><p>é…ç½®å…ƒä»¶(Congif Element)</p><p>å¦‚æœåœ¨å‹æµ‹è¿‡ç¨‹ä¸­å‡ºç°no cookiesä¿¡æ¯ï¼Œå°±æ·»åŠ HTTP Header Managerã€HTTP Cookie Manager</p></li><li><p>å®šæ—¶å™¨(Timer)</p></li><li><p>å‰ç½®å¤„ç†å™¨(Pre Processors)</p><p>åœ¨åšå–æ ·å™¨(Sampler)ä¹‹å‰éœ€è¦åšäº›ä»€ä¹ˆæ“ä½œ</p></li><li><p>åç½®å¤„ç†å™¨(Post Processors)</p></li><li><p>æ–­è¨€(Assertions)</p><p>åœ¨åç½®å¤„ç†å™¨(Post Processors)ä¹‹ååˆ¤æ–­è¿”å›æ˜¯å¦å’ŒæœŸæœ›å€¼ä¸€è‡´ã€‚</p><p>åœ¨åšå¤šå¹¶å‘å¤„ç†æ—¶ï¼Œä¸å»ºè®®ä½¿ç”¨JMeterè¿›è¡Œæ–­è¨€ã€‚åœ¨è®¿é—®è¯·æ±‚æ—¶è‡ªå®šä¹‰äº†å˜é‡ï¼Œç”±äºå¤šä¸ªè¯·æ±‚è®¿é—®é€Ÿåº¦çš„å½±å“ï¼Œå…±äº«çš„ä¸€ä¸ªå˜é‡å°±æœ‰å¯èƒ½å‡ºç°æ•°æ®çš„ä¸å‡†ç¡®ã€‚</p></li><li><p>æµ‹è¯•ç¢ç‰‡(Test Fragment)</p></li></ol><h2 id="ç¬¬2ç« -ä½¿ç”¨badboyå½•åˆ¶jmeterè„šæœ¬"><a href="#ç¬¬2ç« -ä½¿ç”¨badboyå½•åˆ¶jmeterè„šæœ¬" class="headerlink" title="ç¬¬2ç«  ä½¿ç”¨badboyå½•åˆ¶jmeterè„šæœ¬"></a>ç¬¬2ç«  ä½¿ç”¨badboyå½•åˆ¶jmeterè„šæœ¬</h2><blockquote><p>ç†Ÿæ‚‰jmeterçš„å½•åˆ¶æ–¹å¼åŠå¦‚ä½•æ€è€ƒå»åˆ¶ä½œä¸€ä¸ªè„šæœ¬ï¼›äº†è§£badboyçš„ç»„æˆï¼›å­¦ä¼šä½¿ç”¨badboyå½•åˆ¶è„šæœ¬ï¼›èƒ½å¤Ÿä½¿ç”¨jmeterå°†badboyè„šæœ¬è°ƒè¯•è¿è¡ŒæˆåŠŸ</p></blockquote><h3 id="2-1-Jmeterå½•åˆ¶æ–¹å¼å’Œæ€è·¯åŠbadboyç®€ä»‹-10-10"><a href="#2-1-Jmeterå½•åˆ¶æ–¹å¼å’Œæ€è·¯åŠbadboyç®€ä»‹-10-10" class="headerlink" title="2-1 Jmeterå½•åˆ¶æ–¹å¼å’Œæ€è·¯åŠbadboyç®€ä»‹ (10:10)"></a>2-1 Jmeterå½•åˆ¶æ–¹å¼å’Œæ€è·¯åŠbadboyç®€ä»‹ (10:10)</h3><p>JMeterè„šæœ¬çš„ä¸¤ç§å½•åˆ¶æ–¹å¼ï¼š</p><ul><li><p>ä½¿ç”¨badboyè¿›è¡Œå½•åˆ¶</p><p>badboy(ä¹Ÿæ˜¯ä¸€æ¬¾è½¯ä»¶)èƒ½å¤Ÿè¿›è¡Œæµè§ˆå™¨çš„æ“ä½œè¡Œä¸ºçš„å½•åˆ¶ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¯¼å‡ºJMeterè„šæœ¬ã€‚</p></li><li><p>ä½¿ç”¨ä»£ç†æ–¹å¼è¿›è¡Œå½•åˆ¶</p><p>ä»£ç†æ–¹å¼æ˜¯æŒ‡ä¸å€ŸåŠ©ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œç„¶åè¿›è¡Œæµè§ˆå™¨ä¸­çš„ä¸€äº›è®¾ç½®ã€‚ç›‘å¬ç«¯å£å·æ•æ‰åœ¨æµè§ˆå™¨ä¸Šçš„ç½‘ç»œè¯·æ±‚ï¼Œç„¶åè¿›è¡Œå½•åˆ¶</p><p>ç±»ä¼¼äºæŠ“åŒ…å·¥å…·Fiddlerã€‚æŠ“åŒ…å·¥å…·ï¼šFiddlerã€Charlesã€Wireshark</p></li></ul><p>è„šæœ¬å½•åˆ¶çš„æµç¨‹ä¸æ€è·¯</p><blockquote><p>ä¸šåŠ¡æµç¨‹=&gt;å½•åˆ¶å·¥å…·=&gt;è„šæœ¬åˆ¶ä½œ=&gt;æ€§èƒ½æµ‹è¯•</p></blockquote><p>Badboyï¼š<a href="http://www.badboy.com.au" target="_blank" rel="noopener">http://www.badboy.com.au</a></p><p>æ³¨ï¼šç›®å‰(2019-09-14)è®¿é—®ä¸äº†å®˜ç½‘ï¼ŒBadboyä¼¼ä¹ä¹Ÿæ²¡æœ‰Macç‰ˆã€‚</p><p>Badboyç»„æˆï¼š</p><blockquote><p>å·¥å…·åŒºã€åœ°å€æ ã€è„šæœ¬åŒºã€è§†å›¾åŒº</p></blockquote><p>Badboyä»‹ç»ä¸æ¼”ç¤º</p><ol><li>åœ°å€æ è¾“å…¥åœ°å€</li><li>è§†å›¾åŒºè¿›è¡Œæ“ä½œ</li><li>è„šæœ¬åŒºè‡ªåŠ¨è®°å½•ç”Ÿæˆç›¸åº”æ“ä½œ</li><li>ç‚¹å‡»å·¥å…·æ å°çº¢ç‚¹å®Œæˆå½•åˆ¶</li></ol><h3 id="2-2-ä½¿ç”¨badboyè¿›è¡Œjmeterè„šæœ¬å½•åˆ¶-07-30"><a href="#2-2-ä½¿ç”¨badboyè¿›è¡Œjmeterè„šæœ¬å½•åˆ¶-07-30" class="headerlink" title="2-2 ä½¿ç”¨badboyè¿›è¡Œjmeterè„šæœ¬å½•åˆ¶ (07:30)"></a>2-2 ä½¿ç”¨badboyè¿›è¡Œjmeterè„šæœ¬å½•åˆ¶ (07:30)</h3><p>BugFreeï¼šBugç®¡ç†ç³»ç»Ÿã€‚ç›®å‰å·²ç”±ç¦…é“ä»£æ›¿ã€‚</p><p>Badboyè¿›è¡ŒJMeterè„šæœ¬å½•åˆ¶ï¼š</p><ol><li>åœ°å€æ è¾“å…¥åœ°å€</li><li>è§†å›¾åŒºè¿›è¡Œå½•åˆ¶æ­¥éª¤æ“ä½œ</li><li>è„šæœ¬åŒºè‡ªåŠ¨è®°å½•ç”Ÿæˆç›¸åº”æ“ä½œ</li><li>ç‚¹å‡»å·¥å…·æ å°çº¢ç‚¹å®Œæˆå½•åˆ¶</li><li>ç‚¹å‡»File=&gt;Export to JMeter=&gt;ä¿å­˜*.jmxæ–‡ä»¶</li></ol><p>.jmxåç¼€åå°±æ˜¯JMeterå¯æ‰§è¡Œæ–‡ä»¶</p><h3 id="2-3-Jmeterè¿è¡Œbadboyè„šæœ¬-17-57"><a href="#2-3-Jmeterè¿è¡Œbadboyè„šæœ¬-17-57" class="headerlink" title="2-3 Jmeterè¿è¡Œbadboyè„šæœ¬ (17:57)"></a>2-3 Jmeterè¿è¡Œbadboyè„šæœ¬ (17:57)</h3><ol><li>ç‚¹å‡»File=&gt;Open(command+O)=&gt;é€‰æ‹©*.jmxæ–‡ä»¶=&gt;Open</li><li>Thread Groupå‡ºç°äº†ç›¸åº”æ­¥éª¤</li><li>Thread Group=&gt;Add=&gt;Listener=&gt;View Results Tree</li><li>ç‚¹å‡»Start(å·¥å…·æ ä¸Šçš„ç»¿è‰²ä¸‰è§’å½¢)å›æ”¾æ‰€æœ‰æ­¥éª¤</li></ol><p>ã€æŸ¥çœ‹ç»“æœæ ‘ã€‘ä¸­çš„è¯·æ±‚ä¸ºç»¿è‰²å¹¶ä¸ä»£è¡¨è¯·æ±‚æˆåŠŸï¼Œè€Œåªæ˜¯ä»£è¡¨ç½‘ç»œæ˜¯å¦è”é€šã€‚é€šè¿‡HTMLæ¨¡å¼æŸ¥çœ‹ç›¸åº”ç»“æœå‘ç°æ‰€æœ‰çš„è¿”å›é¡µé¢éƒ½æ˜¯ç™»å½•ç•Œé¢</p><p>Redirect Automatically(è‡ªåŠ¨é‡å®šå‘)</p><p>Follow Redirects(è·Ÿé‡å®šå‘)</p><p>Use KeepAlive(ä¿æŒé•¿é“¾æ¥)</p><p>Use multipart/form-data</p><p>Browser-compatible headers</p><p>ç¬¬ä¸‰æ–¹å½•åˆ¶ä¸‹æ¥çš„è„šæœ¬å¯èƒ½å­˜åœ¨çš„å‡ºé”™ç‚¹ï¼š</p><ol><li><p>æ£€æŸ¥æ˜¯å¦ç™»å½•ç³»ç»Ÿ</p></li><li><p>å½•åˆ¶äº§ç”Ÿçš„URLä¸å®é™…ä¸åŒ</p><p>æ ¹æ®ç½‘é¡µè·¯å¾„ä¿®æ”¹</p></li><li><p>é€‰æ‹©ä¸º[è·Ÿè¸ªé‡å®šå‘]</p></li><li><p>å½•åˆ¶åçš„è„šæœ¬å‚æ•°å‡ºç°ä¹±ç </p><p>ä¿®æ”¹å­—ç¬¦ç¼–ç æ ¼å¼[Content encoding]ä¸ºUTF8</p></li></ol><p>è‡ªåŠ¨é‡å®šå‘ä¸è·Ÿéšé‡å®šå‘çš„åŒºåˆ«ï¼š</p><ul><li><p>è‡ªåŠ¨é‡å®šå‘ï¼šHttpClientæ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¦‚æœè¯·æ±‚ä¸­åŒ…å«é‡å®šå‘è¯·æ±‚ï¼ŒHttpClientæ˜¯å¯ä»¥è‡ªåŠ¨è·³è½¬çš„ï¼Œä½†æ˜¯åªé’ˆå¯¹GETå’ŒHeadè¯·æ±‚ã€‚å‹¾é€‰æ­¤é¡¹åˆ™â€œè·Ÿéšé‡å®šå‘â€å¤±æ•ˆã€‚</p><p>è‡ªåŠ¨é‡å®šå‘å¯ä»¥è‡ªåŠ¨è½¬å‘åˆ°æœ€ç»ˆç›®æ ‡é¡µé¢ï¼Œä½†æ˜¯JMeteræ˜¯ä¸è®°å½•é‡å®šå‘è¿‡ç¨‹å†…å®¹çš„ï¼Œæ¯”å¦‚åœ¨[æŸ¥çœ‹ç»“æœæ ‘]ä¸­æ˜¯æ— æ³•æ‰¾åˆ°é‡å®šå‘è¿‡ç¨‹å†…å®¹çš„ã€‚å¦‚æœæ­¤æ—¶ä½ æƒ³åšå…³è”ï¼Œé‚£å°±æ¯”è¾ƒé—æ†¾äº†ï¼Œä½ æ— æ³•å…³è”åˆ°ã€‚</p><p>ä¾‹å¦‚ï¼šAé‡å®šå‘åˆ°Bï¼Œæ­¤æ—¶åªè®°å½•Bçš„å†…å®¹ä¸è®°å½•Açš„å†…å®¹ï¼ŒAçš„å“åº”å†…å®¹æˆ‘ä»¬æš‚æ—¶ä¸”å«è¿‡ç¨‹å†…å®¹</p></li><li><p>è·Ÿéšé‡å®šå‘ï¼šHttp Requestå–æ ·å™¨çš„é»˜è®¤é€‰é¡¹ï¼Œä½†å“åº”Codeæ˜¯3XXæ—¶ï¼ˆæ¯”å¦‚301æ˜¯é‡å®šå‘ï¼‰ï¼Œè‡ªåŠ¨è·³è½¬è‡³ç›®æ ‡åœ°å€ã€‚ä¸è‡ªåŠ¨é‡å®šå‘ä¸åŒï¼ŒJMeterä¼šè®°å½•é‡å®šå‘è¿‡ç¨‹ä¸­çš„æ‰€æœ‰è¯·æ±‚å“åº”ï¼Œåœ¨æŸ¥çœ‹ç»“æœæ ‘æ—¶å¯ä»¥çœ‹åˆ°æœåŠ¡å™¨è¿”å›çš„å†…å®¹ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¯¹å“åº”çš„å†…å®¹åšå…³è”ã€‚</p><p>æ¯”å¦‚ä½ è¦æµ‹è¯•ç™»å½•ï¼Œä½ æŠŠPOSTè¯·æ±‚æ”¹ä¸ºè·Ÿéšé‡å®šå‘å°±å¯ä»¥äº†</p></li></ul><h2 id="ç¬¬3ç« -jmeterä»£ç†å½•åˆ¶åŠè¿è¡Œ"><a href="#ç¬¬3ç« -jmeterä»£ç†å½•åˆ¶åŠè¿è¡Œ" class="headerlink" title="ç¬¬3ç«  jmeterä»£ç†å½•åˆ¶åŠè¿è¡Œ"></a>ç¬¬3ç«  jmeterä»£ç†å½•åˆ¶åŠè¿è¡Œ</h2><blockquote><p>äº†è§£jmeterä»£ç†å½•åˆ¶çš„è®¾ç½®æ–¹å¼ï¼›èƒ½å¤ŸæŠŠä»£ç†å½•åˆ¶è®¾ç½®å®Œæˆï¼›å¯ä»¥ä½¿ç”¨ä»£ç†å½•åˆ¶æ–¹å¼å½•åˆ¶å®Œæˆè„šæœ¬ï¼›èƒ½å¤Ÿä½¿ç”¨jmeterå°†ä»£ç†å½•åˆ¶çš„è„šæœ¬è°ƒè¯•è¿è¡ŒæˆåŠŸ</p></blockquote><h3 id="3-1-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-ä»£ç†å½•åˆ¶åŠè„šæœ¬è¿è¡Œ-23-35"><a href="#3-1-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-ä»£ç†å½•åˆ¶åŠè„šæœ¬è¿è¡Œ-23-35" class="headerlink" title="3-1 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-ä»£ç†å½•åˆ¶åŠè„šæœ¬è¿è¡Œ (23:35)"></a>3-1 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-ä»£ç†å½•åˆ¶åŠè„šæœ¬è¿è¡Œ (23:35)</h3><p>JMeterä»£ç†å½•åˆ¶ï¼š</p><ul><li><p>HTTPè¯·æ±‚é»˜è®¤å€¼</p><p>è¾“å…¥è¢«æµ‹è¯•çš„URLåœ°å€(åŸŸå/IP+ç«¯å£å·)</p></li><li><p>HTTPä»£ç†æœåŠ¡å™¨</p><p>HTTPä»£ç†æœåŠ¡å™¨å’Œå›½å¤–ç¿»å¢™ä»£ç†æœåŠ¡å™¨çš„å·¥ä½œåŸç†å·®ä¸å¤š</p></li><li><p>æµè§ˆå™¨è®¾ç½®</p><p>å±€åŸŸç½‘è®¾ç½®çš„ç«¯å£å·éœ€è¦ä¸ä»£ç†æœåŠ¡å™¨çš„ç«¯å£å·ä¿æŒä¸€è‡´ã€‚ç„¶ååœ¨æµè§ˆå™¨çš„æ“ä½œå°±ä¼šè¢«ä»£ç†æœåŠ¡å™¨æ•æ‰åˆ°ï¼Œä»è€Œå½¢æˆç³»ç»Ÿæµ‹è¯•çš„è„šæœ¬ã€‚</p></li></ul><ol><li><p>åˆ›å»ºHTTPä»£ç†æœåŠ¡å™¨ï¼šTest Plan=&gt;Add=&gt;Non-Test Elements=&gt;HTTP(S) Test Script Recorder</p></li><li><p>åœ¨[Global Settings]-[Port]è®¾ç½®ç«¯å£</p></li><li><p>åœ¨[Test Plan Creation]-[Test Plan content]-[Target Controller]é€‰æ‹©ã€‚<strong>å¿…é¡»è®¾ç½®</strong>ã€‚</p></li><li><p>æµè§ˆå™¨è®¾ç½®ï¼š</p><ul><li>IEæµè§ˆå™¨ï¼š[å·¥å…·]-[Interneté€‰é¡¹]-[è¿æ¥]-[å±€åŸŸç½‘è®¾ç½®]-[ä»£ç†æœåŠ¡å™¨]-[åœ°å€+ç«¯å£]</li><li>Chromeï¼š[å·¥å…·]-[è®¾ç½®]-[é«˜çº§]-[æ‰“å¼€ä»£ç†è®¾ç½®]-[ç½‘é¡µä»£ç†(HTTP)/å®‰å…¨ç½‘é¡µä»£ç†(HTTPS)]â€“[åœ°å€+ç«¯å£]</li></ul><p>åœ°å€ã€ç«¯å£ä¸ºJMeterä»£ç†æœåŠ¡å™¨çš„ç›¸åº”è®¾ç½®ã€‚</p></li><li><p>åœ¨æµè§ˆå™¨è¿›è¡Œç›¸åº”ä¸šåŠ¡æ“ä½œï¼ŒJMeterä¼šè‡ªåŠ¨è®°å½•æ“ä½œåŠèµ„æºæ–‡ä»¶</p></li><li><p>ä½¿ç”¨åŒ…å«æ¨¡å¼ã€æ’é™¤æ¨¡å¼ï¼Œä¿ç•™æˆ–è¿‡æ»¤ä¸éœ€è¦çš„èµ„æºæ–‡ä»¶ã€‚</p><p>[Requests Filtering]-[URL Patterns to Exclude]-[Add suggested excludes]ï¼Œæˆ–è€…ç‚¹å‡»[Add]è‡ªå®šä¹‰æ­£åˆ™åŒ¹é…</p></li></ol><p>Webåº”ç”¨ç¨‹åºéœ€æ·»åŠ HTTP Cookie Manager(HTTP Cookieç®¡ç†å™¨)å’ŒHTTP Cache Manager</p><blockquote><p>[Test Plan]-[Add]-[Config Element]-[HTTP Cookie Manager]</p><p>[Test Plan]-[Add]-[Config Element]-[HTTP Cache Manager]</p></blockquote><p><strong>æ³¨</strong>ï¼šå¿…é¡»æ·»åŠ ã€æŸ¥çœ‹ç»“æœæ ‘(View Results Tree)ã€‘å’Œã€èšåˆæŠ¥å‘Š(Aggregate Report)ã€‘é€šè¿‡ç›´è§‚æ•°æ®åˆ¤æ–­è„šæœ¬æ˜¯å¦å‡ºç°é—®é¢˜ã€‚</p><h2 id="ç¬¬4ç« -jmeterè„šæœ¬åˆ¶ä½œ"><a href="#ç¬¬4ç« -jmeterè„šæœ¬åˆ¶ä½œ" class="headerlink" title="ç¬¬4ç«  jmeterè„šæœ¬åˆ¶ä½œ"></a>ç¬¬4ç«  jmeterè„šæœ¬åˆ¶ä½œ</h2><blockquote><p>èƒ½å¤Ÿè‡ªå®šä¹‰å˜é‡ï¼Œå®ç°å€¼çš„ç»Ÿä¸€åŒ–ç®¡ç†ï¼›å¯ä»¥è‡ªä¸»ä½¿ç”¨å‡½æ•°åŠ©æ‰‹è¿›è¡Œå‚æ•°åŒ–ï¼›å¯ä»¥ä½¿ç”¨csvæ–‡ä»¶è¿›è¡Œå‚æ•°åŒ–é…ç½®ï¼Œè¾¾æˆå‚æ•°åŒ–çš„ç›®çš„</p></blockquote><h3 id="4-1-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-ç”¨æˆ·è‡ªå®šä¹‰å˜é‡-07-33"><a href="#4-1-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-ç”¨æˆ·è‡ªå®šä¹‰å˜é‡-07-33" class="headerlink" title="4-1 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-ç”¨æˆ·è‡ªå®šä¹‰å˜é‡ (07:33)"></a>4-1 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-ç”¨æˆ·è‡ªå®šä¹‰å˜é‡ (07:33)</h3><p>ç”¨æˆ·è‡ªå®šä¹‰å˜é‡ä½œç”¨ï¼š</p><blockquote><p>æŠŠIPåœ°å€ã€ç«¯å£å·ã€åº”ç”¨ä¸Šä¸‹æ–‡ç­‰å­—æ®µç”¨ä¸€ä¸ªå˜é‡å»ä»£æ›¿ï¼Œæµ‹è¯•ç¯å¢ƒå˜åŒ–æ—¶æ”¹å˜ä¸€ä¸‹å˜é‡å€¼å³å¯ã€‚</p></blockquote><p>æ·»åŠ ç”¨æˆ·å˜é‡ï¼š[Thread Group]-[Add]-[Config Element]-[User Defined Variables]</p><p>ä½¿ç”¨ç”¨æˆ·å˜é‡ï¼š<code>${variable_name}</code></p><h3 id="4-2-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-CsvReaderå‡½æ•°å‚æ•°åŒ–-07-11"><a href="#4-2-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-CsvReaderå‡½æ•°å‚æ•°åŒ–-07-11" class="headerlink" title="4-2 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-CsvReaderå‡½æ•°å‚æ•°åŒ– (07:11)"></a>4-2 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-CsvReaderå‡½æ•°å‚æ•°åŒ– (07:11)</h3><p>æ–‡ä»¶å‚æ•°åŒ–æ–¹å¼ï¼š</p><blockquote><ol><li>å‡½æ•°åŠ©æ‰‹</li><li>csv data set config</li></ol></blockquote><p>å‡½æ•°åŠ©æ‰‹ï¼š</p><blockquote><p>[Tools]-[Function Helper Dialog(Shift+Command+F1)]-[Choose a function]-[_CSVRead]-[å¡«å†™æ–‡ä»¶åç§°+åˆ—å·]-[Generate &amp; Copy to clipboard]-[ç²˜è´´åˆ°å¯¹åº”å±æ€§å€¼æ¡†]</p></blockquote><p>å¦‚ï¼š<code>${_CSVRead(D:\csv.txt,column_idx)}</code></p><p>æ³¨ï¼š</p><ol><li>æ–‡ä»¶å¯ä»¥æ˜¯*.txtï¼Œä½†å¿…é¡»ä»¥<code>,</code>éš”å¼€ã€‚</li><li>åˆ—å·ä»<code>0</code>å¼€å§‹</li><li>æ›´æ”¹çº¿ç¨‹æ•°(Number of Threads)ï¼Œ_CSVReadä¼šè‡ªåŠ¨éå†(è¡Œå·é€’å¢)csv.txt</li></ol><h3 id="4-3-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-CsvDataSetConfigå‚æ•°åŒ–-09-03"><a href="#4-3-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-CsvDataSetConfigå‚æ•°åŒ–-09-03" class="headerlink" title="4-3 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-CsvDataSetConfigå‚æ•°åŒ– (09:03)"></a>4-3 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-CsvDataSetConfigå‚æ•°åŒ– (09:03)</h3><p>csv data set configï¼š</p><blockquote><p>[Thread Group]-[Add]-[Config Element]-[CSV Data Set Config]</p></blockquote><ol><li><p>Variable Names(comma-delimited)ï¼šè®¾ç½®å˜é‡åç§°ï¼Œ<code>title,build</code></p><ul><li>å¼•ç”¨å£°æ˜çš„å˜é‡ï¼š<code>${title}</code>ã€<code>${build}</code></li></ul></li><li><p>Delimiterï¼šåˆ†éš”ç¬¦</p></li><li><p>Allow quoted dataï¼šæ˜¯å¦å…è®¸å¸¦å¼•å·</p></li><li><p>Recycle on EOFï¼šé‡åˆ°æ–‡ä»¶ç»“æŸç¬¦å†æ¬¡å¾ªç¯</p></li><li><p>Stop thread on EOFï¼šé‡åˆ°æ–‡ä»¶ç»“æŸç¬¦åœæ­¢çº¿ç¨‹</p></li><li><p>Sharing modeï¼šçº¿ç¨‹å…±äº«æ¨¡å¼</p><ul><li>All threadsï¼šæµ‹è¯•è®¡åˆ’ä¸­æ‰€æœ‰çº¿ç¨‹ï¼Œå‡å¦‚è¯´æœ‰çº¿ç¨‹1åˆ°çº¿ç¨‹n (n&gt;1)ï¼Œçº¿ç¨‹1å–äº†ä¸€æ¬¡å€¼åï¼Œçº¿ç¨‹2å–å€¼æ—¶ï¼Œå–åˆ°çš„æ˜¯csvæ–‡ä»¶ä¸­çš„ä¸‹ä¸€è¡Œï¼Œå³ä¸çº¿ç¨‹1å–çš„ä¸æ˜¯åŒä¸€è¡Œã€‚</li><li>Current thread groupï¼šå½“å‰çº¿ç¨‹ç»„ï¼Œå‡è®¾æœ‰çº¿ç¨‹ç»„Aã€çº¿ç¨‹ç»„Bï¼ŒAç»„å†…æœ‰çº¿ç¨‹A1åˆ°çº¿ç¨‹Anï¼Œçº¿ç¨‹ç»„Bå†…æœ‰çº¿ç¨‹B1åˆ°çº¿ç¨‹Bnã€‚å–ä¹‹æƒ…å†µæ˜¯ï¼šçº¿ç¨‹A1å–åˆ°äº†ç¬¬1è¡Œï¼Œçº¿ç¨‹A2å–ç¬¬2è¡Œï¼Œç°åœ¨B1å–ç¬¬1è¡Œï¼Œçº¿ç¨‹B2å–ç¬¬2è¡Œã€‚</li><li>Current threadï¼šå½“å‰çº¿ç¨‹ã€‚å‡è®¾æµ‹è¯•è®¡åˆ’å†…æœ‰çº¿ç¨‹1åˆ°çº¿ç¨‹n (n&gt;1)ï¼Œåˆ™çº¿ç¨‹1å–äº†ç¬¬1è¡Œï¼Œçº¿ç¨‹2ä¹Ÿå–ç¬¬1è¡Œã€‚</li></ul></li></ol><h2 id="ç¬¬5ç« -å…³è”çš„ä½¿ç”¨åŠæ€»ç»“"><a href="#ç¬¬5ç« -å…³è”çš„ä½¿ç”¨åŠæ€»ç»“" class="headerlink" title="ç¬¬5ç«  å…³è”çš„ä½¿ç”¨åŠæ€»ç»“"></a>ç¬¬5ç«  å…³è”çš„ä½¿ç”¨åŠæ€»ç»“</h2><blockquote><p>é€šè¿‡å…³è”çš„å­¦ä¹ ï¼Œå¯ä»¥å‡†ç¡®çš„è¿›è¡Œå…³è”ï¼Œæ’æŸ¥è„šæœ¬é”™è¯¯ï¼Œå®Œæˆæ€§èƒ½æµ‹è¯•è„šæœ¬ï¼Œå­¦åˆ°è¿™é‡Œï¼Œå¯ä»¥å®Œæˆæ•´ä¸ªè„šæœ¬çš„åˆ¶ä½œï¼Œç‹¬ç«‹è¿›è¡ŒåŸºæœ¬çš„æ€§èƒ½æµ‹è¯•</p></blockquote><h3 id="5-1-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-å…³è”çš„ä½¿ç”¨åŠæ€»ç»“-26-40"><a href="#5-1-JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-å…³è”çš„ä½¿ç”¨åŠæ€»ç»“-26-40" class="headerlink" title="5-1 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-å…³è”çš„ä½¿ç”¨åŠæ€»ç»“ (26:40)"></a>5-1 JMeteræ€§èƒ½æµ‹è¯•å…¥é—¨ç¯‡-å…³è”çš„ä½¿ç”¨åŠæ€»ç»“ (26:40)</h3><p>å…³è”ï¼š</p><blockquote><p>å½“ä¸Šæ–‡ä¸­çš„æœ‰ä¸€äº›å˜é‡çš„å€¼åœ¨ä¸‹æ–‡ä¸­è¢«ä½¿ç”¨ã€‚</p></blockquote><p>æ·»åŠ æ­£åˆ™è¡¨è¾¾å¼æå–å™¨ï¼š[HTTP Request]-[Add]-[Post Processors]-[Regular Expression Extractor]</p><ol><li><p>å¼•ç”¨åç§°(Name of created variable)ï¼š<code>bugId</code></p></li><li><p>æ­£åˆ™è¡¨è¾¾å¼(Regular Expression)ï¼š<code>å·¦è¾¹ç•Œ(.+?)å³è¾¹ç•Œ</code></p><p><code>.</code>åŒ¹é…ä»»æ„å­—ç¬¦(é™¤äº†æ–œæ )ï¼Œ<code>+</code>ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œ<code>?</code>0æ¬¡æˆ–å¤šæ¬¡</p></li><li><p>æ¨¡ç‰ˆ(Template)ï¼š<code>$1$</code>ã€‚æŒ‡çš„æ˜¯åŒ¹é…ç¬¬ä¸€ä¸ªç»“æœ</p></li><li><p>åŒ¹é…æ•°å­—(0ä»£è¡¨éšæœº)(Match No.(0 for Random))ï¼š<code>0</code></p></li><li><p>å¼•ç”¨ä¸Šæ–‡å˜é‡åç§°ï¼š${bugId}</p></li></ol><p>æ³¨ï¼šåœ¨è°ƒè¯•æµ‹è¯•è„šæœ¬æ—¶ï¼Œå¤šæ³¨æ„ç¼–ç ã€‚</p><p>:star: <strong>è§£å†³ä¸­æ–‡ä¹±ç </strong>ï¼š</p><ol><li><p>[Content encoding]è®¾ç½®ä¸ºUTF-8ï¼ŒåŒæ—¶å‹¾é€‰å‚æ•°åçš„[ç¼–ç ?]</p></li><li><p>vim ~/bin/jmeter.properties</p><p>sampleresult.default.encoding=UTF-8</p></li></ol><p>loadrunnerä¸JMeterå…³è”çš„ä¸åŒä¹‹å¤„ï¼š</p><ol><li><p>åœ¨loadrunnerä¸­ï¼Œå…³è”å‡½æ•°æ˜¯å†™åœ¨è¦è·å–å˜é‡å€¼çš„é¡µé¢çš„å‰é¢ï¼›</p><p>åœ¨JMeterä¸­ï¼Œå…³è”å‡½æ•°æ˜¯å†™åœ¨è¦è·å–å˜é‡å€¼çš„é¡µé¢çš„åé¢ã€‚</p></li><li><p>åœ¨loadrunnerä¸­ï¼Œå…³è”å‡½æ•°æ˜¯æ³¨å†Œå‡½æ•°ï¼›</p><p>åœ¨JMeterä¸­ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–å™¨è¿›è¡Œå…³è”</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€§èƒ½æµ‹è¯• </tag>
            
            <tag> JMeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>719-JMeterä¹‹HTTPåè®®æ¥å£æ€§èƒ½æµ‹è¯•</title>
      <link href="/imooc/791-JMeterHTTP/"/>
      <url>/imooc/791-JMeterHTTP/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/791" target="_blank" rel="noopener">https://www.imooc.com/learn/791</a></p><p>ç®€ä»‹ï¼šæ¥å£çš„æµ‹è¯•ï¼Œå¹¶ä¸ä»…ä»…æ˜¯æŒæ¡æŸä¸€ç§å·¥å…·ã€‚å·¥å…·æ˜¯æ­»çš„ï¼Œå¹¶ä¸”æ˜¯å¤šç§å¤šæ ·çš„ï¼Œæœ¬è¯¾ç¨‹é€šè¿‡å±‚å±‚å‰–æçš„æ–¹å¼æ¥å¸®åŠ©åŒå­¦ä»¬äº†è§£httpåè®®ï¼Œè®©å­¦ä¹ çš„åŒå­¦å¹¶ä¸ä»…ä»…ä¼šåšæ¥å£çš„åŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•ï¼Œå¹¶ä¸”èƒ½å¤Ÿäº†è§£ä»€ä¹ˆæ˜¯çœŸæ­£çš„æ¥å£ï¼Œæ¶ˆé™¤æ­§ä¹‰ã€‚ æ…•è¯¾ç½‘æµ‹è¯•äº¤æµç¾¤ 559506833</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹å¤§çº²ä»‹ç»åŠæ¥å£ç†è§£"><a href="#ç¬¬1ç« -è¯¾ç¨‹å¤§çº²ä»‹ç»åŠæ¥å£ç†è§£" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹å¤§çº²ä»‹ç»åŠæ¥å£ç†è§£"></a>ç¬¬1ç«  è¯¾ç¨‹å¤§çº²ä»‹ç»åŠæ¥å£ç†è§£</h2><blockquote><p>äº†è§£æœ¬æ¬¡è¯¾ç¨‹çš„åŸºæœ¬å†…å®¹ï¼›æŒæ¡æµ‹è¯•ä¸å¼€å‘å¯¹æ¥å£çš„ä¸åŒç†è§£</p></blockquote><h3 id="1-1-è¯¾ç¨‹å†…å®¹ä»‹ç»-04-28"><a href="#1-1-è¯¾ç¨‹å†…å®¹ä»‹ç»-04-28" class="headerlink" title="1-1 è¯¾ç¨‹å†…å®¹ä»‹ç» (04:28)"></a>1-1 è¯¾ç¨‹å†…å®¹ä»‹ç» (04:28)</h3><ol><li>ä¸åŒè§’è‰²çœ¼ä¸­çš„æ¥å£ï¼ˆå¼€å‘ã€æµ‹è¯•ï¼‰</li><li>å¸¸è§çš„æ¥å£åè®®ï¼ˆå¦‚HTTPç­‰ï¼‰</li><li>HTTPåè®®æ ˆä¸­çš„ä½ç½®ï¼ˆHTTPåè®®çš„åº•å±‚åŸç†ï¼‰</li><li>HTTPåè®®å“åº”ç ï¼ˆ2XXã€4XXã€5XXï¼‰</li><li>HTTPåè®®å“åº”æ¨¡å‹ï¼ˆä¸€æ¬¡è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼‰</li><li>å¸¸è§HTTPåè®®çš„è¯·æ±‚æ–¹å¼ï¼ˆGETã€POSTç­‰ï¼‰</li><li>JMeterçš„åŠŸèƒ½ä»‹ç»</li><li>GETè¯·æ±‚ä¸POSTè¯·æ±‚ï¼ˆå®æˆ˜-å¦‚ä½•æµ‹è¯•ï¼‰</li></ol><h3 id="1-2-ä¸åŒè§’è‰²çœ¼ä¸­çš„æ¥å£-04-50"><a href="#1-2-ä¸åŒè§’è‰²çœ¼ä¸­çš„æ¥å£-04-50" class="headerlink" title="1-2 ä¸åŒè§’è‰²çœ¼ä¸­çš„æ¥å£ (04:50)"></a>1-2 ä¸åŒè§’è‰²çœ¼ä¸­çš„æ¥å£ (04:50)</h3><ul><li><p>å¼€å‘çœ¼ä¸­çš„æ¥å£ï¼šæ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„å¯¹æ¥æ–¹å¼å®šä¹‰</p><p>åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œåˆ›å»ºä¸€ä¸ªæ¥å£çš„å®ç°ç±»ï¼Œå¿…é¡»å®ç°è¿™ä¸ªæ¥å£é‡Œçš„æ‰€æœ‰æ–¹æ³•ã€‚</p></li><li><p>æµ‹è¯•çœ¼ä¸­çš„æ¥å£ï¼šå¯ä»¥ç‹¬ç«‹éƒ¨ç½²æˆæœåŠ¡çš„åè®®æ¥å£</p><p>åè®®æ¥å£ï¼ˆHTTPã€FTPç­‰ï¼‰ã€‚åˆ©ç”¨ä¸­é—´ä»¶å®ç°æŸä¸ªåŠŸèƒ½éœ€æ±‚</p></li></ul><h2 id="ç¬¬2ç« -HTTPåè®®åŸºæœ¬ä»‹ç»äº†è§£"><a href="#ç¬¬2ç« -HTTPåè®®åŸºæœ¬ä»‹ç»äº†è§£" class="headerlink" title="ç¬¬2ç«  HTTPåè®®åŸºæœ¬ä»‹ç»äº†è§£"></a>ç¬¬2ç«  HTTPåè®®åŸºæœ¬ä»‹ç»äº†è§£</h2><blockquote><p>æŒæ¡å¸¸è§æ¥å£çš„åè®®ï¼›ç†è§£httpåè®®æ ˆçš„ä½ç½®ï¼›æŒæ¡å“åº”ç å¹¶èƒ½å¤Ÿæ ¹æ®å“åº”ç å»å®šä½é”™è¯¯ï¼›æŒæ¡ä¸€æ¬¡è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸå¹¶æŒæ¡ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®æµï¼›æŒæ¡å¸¸ç”¨è¯·æ±‚æ–¹å¼ï¼Œå¹¶èƒ½å¤ŸåŒºåˆ«ä¸åŒçš„è¯·æ±‚çš„è¡¨ç°å½¢å¼</p></blockquote><h3 id="2-1-å¸¸è§çš„æ¥å£åè®®-03-30"><a href="#2-1-å¸¸è§çš„æ¥å£åè®®-03-30" class="headerlink" title="2-1 å¸¸è§çš„æ¥å£åè®® (03:30)"></a>2-1 å¸¸è§çš„æ¥å£åè®® (03:30)</h3><table><thead><tr><th>åè®®</th><th>ä¸­æ–‡åç§°</th></tr></thead><tbody><tr><td>HTTP</td><td>è¶…æ–‡æœ¬ä¼ è¾“åè®®</td></tr><tr><td>HTTPS</td><td>å®‰å…¨è¶…æ–‡æœ¬ä¼ è¾“åè®®</td></tr><tr><td>FTP</td><td>æ–‡ä»¶ä¼ è¾“åè®®</td></tr><tr><td>TCP</td><td>ç½‘ç»œæ§åˆ¶åè®®</td></tr><tr><td>IP</td><td>äº’è”ç½‘åè®®</td></tr><tr><td>UDP</td><td>ç”¨æˆ·æ•°æ®åè®®</td></tr></tbody></table><h3 id="2-2-HTTPåè®®æ ˆä¸­çš„ä½ç½®-02-03"><a href="#2-2-HTTPåè®®æ ˆä¸­çš„ä½ç½®-02-03" class="headerlink" title="2-2 HTTPåè®®æ ˆä¸­çš„ä½ç½® (02:03)"></a>2-2 HTTPåè®®æ ˆä¸­çš„ä½ç½® (02:03)</h3><p>HTTPåè®®æ ˆä¸­çš„ä½ç½®ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghioyetnj314g0qitb4.jpg" alt="HTTPåè®®æ ˆä¸­çš„ä½ç½®" style="zoom:30%;" /><p>æ³¨ï¼š</p><ul><li>SSLï¼šå®‰å…¨å¥—æ¥å±‚åè®®</li><li>TLSï¼šä¼ è¾“å±‚å®‰å…¨æ€§åè®®</li></ul><p>HTTPä¸HTTPSç½‘ç»œå±‚åŒºåˆ«ï¼š</p><ul><li><p>HTTPSæ˜¯æ„å»ºåœ¨SSLï¼ˆå®‰å…¨å¥—æ¥å±‚åè®®ï¼‰ä¹‹ä¸Šçš„ï¼Œ</p><p>ä¹Ÿæœ‰æ„å»ºåœ¨TLSï¼ˆä¼ è¾“å±‚å®‰å…¨æ€§åè®®ï¼‰ä¹‹ä¸Šï¼›</p></li><li><p>HTTPæ˜¯æ„å»ºåœ¨TCPï¼ˆç½‘ç»œæ§åˆ¶åè®®ï¼‰ä¹‹ä¸Šçš„ï¼›</p></li></ul><h3 id="2-3-HTTPåè®®å“åº”ç -08-50"><a href="#2-3-HTTPåè®®å“åº”ç -08-50" class="headerlink" title="2-3 HTTPåè®®å“åº”ç  (08:50)"></a>2-3 HTTPåè®®å“åº”ç  (08:50)</h3><blockquote><p>æ¯ä¸€ä¸ªå“åº”ç éƒ½ä»£è¡¨äº†æœåŠ¡ç«¯åé¦ˆçš„ä¸€ç§å“åº”çŠ¶æ€ï¼Œä¹Ÿæ ‡è¯†äº†æœ¬æ¬¡è¯·æ±‚æ˜¯å¦æˆåŠŸ</p></blockquote><p><a href="https://www.runoob.com/http/http-status-codes.html" target="_blank" rel="noopener">HTTPçŠ¶æ€ç |èœé¸Ÿæ•™ç¨‹</a></p><ol><li><p>1XXï¼šä¿¡æ¯å“åº”ç±»ï¼Œè¡¨ç¤ºæ¥å—åˆ°è¯·æ±‚å¹¶ä¸”ç»§ç»­å¤„ç†ï¼ˆä¸­é—´çŠ¶æ€ï¼‰</p></li><li><p>2XXï¼šå¤„ç†æˆåŠŸå“åº”ç±»ï¼Œè¡¨ç¤ºåŠ¨ä½œè¢«æˆåŠŸæ¥æ”¶ã€ç†è§£å’Œæ¥å—</p></li><li><p>3XXï¼šé‡å®šå‘å“åº”ç±»ï¼Œä¸ºäº†å®ŒæˆæŒ‡å®šçš„åŠ¨ä½œï¼Œå¿…é¡»æ¥å—è¿›ä¸€æ­¥å¤„ç†</p></li><li><p>4XXï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼Œå®¢æˆ·è¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–è€…æ˜¯ä¸èƒ½æ­£ç¡®æ‰§è¡Œ</p><p>æ£€æŸ¥è¯·æ±‚URLæ˜¯å¦æ­£ç¡®</p></li><li><p>5XXï¼šæœåŠ¡ç«¯é”™è¯¯ï¼ŒæœåŠ¡å™¨ä¸èƒ½æ­£ç¡®æ‰§è¡Œä¸€ä¸ªæ­£ç¡®çš„è¯·æ±‚</p><p>å¿…é¡»åœ¨æµ‹è¯•æ—¶è§£å†³æ­¤ç±»å‹é”™è¯¯ã€‚æŸ¥çœ‹æœåŠ¡å™¨ç«¯æ—¥å¿—ï¼Œé‡å¯æœåŠ¡</p></li></ol><h3 id="2-4-HTTPåè®®è¯·æ±‚å“åº”æ¨¡å‹-16-23"><a href="#2-4-HTTPåè®®è¯·æ±‚å“åº”æ¨¡å‹-16-23" class="headerlink" title="2-4 HTTPåè®®è¯·æ±‚å“åº”æ¨¡å‹ (16:23)"></a>2-4 HTTPåè®®è¯·æ±‚å“åº”æ¨¡å‹ (16:23)</h3><p>HTTPåè®®è¯·æ±‚å“åº”æ¨¡å‹ï¼šï¼ˆä¸€æ¬¡è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ€ç®€å•çš„è½¯ä»¶åˆ†å±‚ï¼‰</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ghipxi3nj30l40kqdgm.jpg" alt="HTTPåè®®è¯·æ±‚å“åº”æ¨¡å‹" style="zoom:45%;" /><p>åœºæ™¯ï¼šç™»å½•</p><ol><li><p>å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åˆ°APIæ¥å£å±‚</p><ul><li>ç”¨æˆ·åœ¨å®¢æˆ·ç«¯å¡«å†™ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡»ç™»å½•ï¼Œå‘é€è¯·æ±‚</li></ul></li><li><p>APIæ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘èµ·çš„ç”¨æˆ·è¯·æ±‚</p><ul><li><p>APIå¯¹ä¸šåŠ¡é€»è¾‘è¿›è¡ŒéªŒè¯</p><p>éªŒè¯ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦åˆæ³•ï¼ˆä¾‹å¦‚ï¼šç”¨æˆ·åè¦æ±‚å¿…é¡»ä¸ºçœŸå®çš„æ‰‹æœºå·ç ã€‚å¦‚æœéªŒè¯å¤±è´¥ï¼Œå³ç”¨æˆ·åä¸åˆæ³•ï¼Œé‚£ä¹ˆéœ€è¦ç»™å®¢æˆ·ç«¯è¿”å›(è‡ªå®šä¹‰)å“åº”ç ï¼Œæ¯”å¦‚ç å€¼ä¸º1.2.3ï¼Œ1ä»£è¡¨ç”¨æˆ·åæ ¼å¼é”™è¯¯ï¼Œ2ä»£è¡¨ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œ3ä»£è¡¨å¯†ç æ ¼å¼é”™è¯¯ï¼‰</p></li></ul></li><li><p>APIä¼šå°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®å‘ç»™DBå±‚ï¼ˆæ•°æ®åº“ï¼‰</p><p>CRUDï¼šCreateã€Readã€Updateã€Delete</p><ul><li>æ•°æ®åº“æŸ¥è¯¢æˆåŠŸè¿”å›1ï¼Œå¤±è´¥è¿”å›0</li></ul></li><li><p>DBä¼šå°†æŸ¥è¯¢æ•°æ®åº“çš„æ¡ç›®æ•°è¿”å›ç»™API</p></li><li><p>APIè¿”å›æˆåŠŸæˆ–å¤±è´¥çš„çŠ¶æ€ç ç»™å®¢æˆ·ç«¯</p></li><li><p>å®¢æˆ·ç«¯å°†è¿”å›ä¿¡æ¯æç¤ºç»™ç”¨æˆ·</p></li></ol><p>ç®€å•çš„è½¯ä»¶åˆ†å±‚ï¼š</p><ol><li><p>å®¢æˆ·ç«¯</p><p>åŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€è‡ªåŠ¨åŒ–æµ‹è¯•</p></li><li><p>æ¥å£å±‚</p><p>æ¥å£æµ‹è¯•ï¼ŒåŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€è‡ªåŠ¨åŒ–æµ‹è¯•(æ›´å¥½ç»´æŠ¤è„šæœ¬ï¼Œä¸æ¶‰åŠé¡µé¢å…ƒç´ çš„æ”¹å˜ï¼Œæœ€å¤šåªæ˜¯æ¥å£,æ•°æ®æ ¼å¼,ä¼ è¾“æ•°æ®å†…å®¹çš„æ”¹å˜)</p></li><li><p>æ•°æ®åº“å±‚</p><p>å¯ä»¥å°†å¼€å‘äººå‘˜ä½¿ç”¨åˆ°çš„SQLè¯­å¥å•ç‹¬æ‹¿å‡ºæ¥è¿›è¡Œæ€§èƒ½æµ‹è¯•</p></li></ol><h3 id="2-5-å¸¸ç”¨HTTPè¯·æ±‚æ–¹å¼-08-52"><a href="#2-5-å¸¸ç”¨HTTPè¯·æ±‚æ–¹å¼-08-52" class="headerlink" title="2-5 å¸¸ç”¨HTTPè¯·æ±‚æ–¹å¼ (08:52)"></a>2-5 å¸¸ç”¨HTTPè¯·æ±‚æ–¹å¼ (08:52)</h3><p>æœ€å¸¸ç”¨çš„HTTPè¯·æ±‚æ–¹å¼ï¼š</p><ol><li><p>GETè¯·æ±‚</p><p>URLï¼š</p><pre><code>http://127.0.0.1:8080?username=zhangsan&amp;password=123456</code></pre></li><li><p>POSTè¯·æ±‚</p><p>URLï¼š</p><pre><code class="json">http://127.0.0.1:8080</code></pre><p>è¯·æ±‚ä½“ï¼š</p><pre><code class="json">{  [      &quot;username&quot;: &quot;zhangsan&quot;,      &quot;password&quot;: &quot;123456&quot;  ]}</code></pre></li></ol><p>HTTPè¯·æ±‚çš„æ–¹æ³•ï¼š</p><blockquote><p>HTTP/1.1åè®®ä¸­å…±å®šä¹‰äº†å…«ç§è¯·æ±‚æ–¹æ³•ï¼ˆæœ‰æ—¶ä¹Ÿå«åšâ€œåŠ¨ä½œâ€ï¼‰ï¼Œæ¥è¡¨æ˜Request-URLæŒ‡å®šçš„èµ„æºä¸åŒçš„æ“ä½œæ–¹å¼</p></blockquote><ol><li><p>OPTIONS</p><p>è¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„HTTPè¯·æ±‚æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å‘WebæœåŠ¡å™¨å‘é€â€œ*â€çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§</p></li><li><p>HEAD</p><p>å‘æœåŠ¡å™¨ç´¢ä¸GETè¯·æ±‚ç›¸ä¸€è‡´çš„å“åº”ï¼Œåªä¸è¿‡å“åº”ä½“å°†ä¸ä¼šè¢«è¿”å›ã€‚</p><p>è¿™ä¸€æ–¹æ³•å¯ä»¥åœ¨ä¸å¿…ä¼ è¾“æ•´ä¸ªå“åº”å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–åŒ…å«åœ¨å“åº”å°æ¶ˆæ¯å¤´ä¸­çš„å…ƒä¿¡æ¯</p></li><li><p><strong>:star: GET</strong></p><p>å‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ã€‚</p><p>æ³¨æ„ï¼šGETæ–¹æ³•ä¸åº”å½“è¢«ç”¨äºäº§ç”Ÿâ€œå‰¯ä½œç”¨â€çš„æ“ä½œä¸­ï¼Œä¾‹å¦‚åœ¨Web Applicationä¸­ï¼Œå…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯GETå¯èƒ½ä¼šè¢«ç½‘ç»œèœ˜è››ç­‰éšæ„è®¿é—®ã€‚</p></li><li><p><strong>:star: POST</strong></p><p>å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚ï¼Œæäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰</p><p>æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚</p><p>POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°èµ„æºçš„å»ºç«‹å’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹</p></li><li><p>PUT</p><p>å‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹</p></li><li><p>DELETE</p><p>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤Request-URLæ‰€æ ‡è¯†çš„èµ„æº</p></li><li><p>TRACE</p><p>å›æ˜¾æœåŠ¡å™¨æ‰€æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­</p></li><li><p>CONNECT</p><p>HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨</p></li></ol><p><strong>æ³¨æ„ï¼š</strong></p><ol><li><p>æ–¹æ³•åç§°æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚</p><p>å½“æŸä¸ªè¯·æ±‚æ‰€é’ˆå¯¹çš„èµ„æºä¸æ”¯æŒå¯¹åº”çš„è¯·æ±‚æ–¹æ³•çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨åº”å½“è¿”å›çŠ¶æ€ç 405(Method Not Allowed)ï¼›å½“æœåŠ¡å™¨ä¸è®¤è¯†æˆ–è€…ä¸æ”¯æŒå¯¹åº”çš„è¯·æ±‚æ–¹æ³•æ—¶ï¼Œåº”è¿”å›çŠ¶æ€ç 501(Not Implemented)ã€‚</p></li><li><p>HTTPæœåŠ¡å™¨è‡³å°‘åº”è¯¥å®ç°GETå’ŒHEAD/POSTæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•éƒ½æ˜¯å¯é€‰çš„ï¼Œæ­¤å¤–é™¤ä¸Šè¿°æ–¹æ³•</p></li></ol><h2 id="ç¬¬3ç« -JMeterçš„getè¯·æ±‚ä»‹ç»åŠä½¿ç”¨"><a href="#ç¬¬3ç« -JMeterçš„getè¯·æ±‚ä»‹ç»åŠä½¿ç”¨" class="headerlink" title="ç¬¬3ç«  JMeterçš„getè¯·æ±‚ä»‹ç»åŠä½¿ç”¨"></a>ç¬¬3ç«  JMeterçš„getè¯·æ±‚ä»‹ç»åŠä½¿ç”¨</h2><blockquote><p>äº†è§£jmeterèƒ½å¤Ÿåšä»€ä¹ˆï¼›äº†è§£getæ¥å£è¿è¡ŒåŸç†ï¼›èƒ½å¤Ÿè‡ªä¸»å¼€å‘getè¯·æ±‚è„šæœ¬å¹¶ä¸”è§£å†³ä¹±ç é—®é¢˜ï¼›èƒ½å¤ŸæŒæ¡å‡½æ•°åŠ©æ‰‹çš„å‚æ•°åŒ–æ–¹å¼ï¼›èƒ½å¤ŸæŒæ¡çº¿ç¨‹ç»„ä¸­å„ä¸ªé€‰é¡¹çš„æ„ä¹‰å¹¶èƒ½å¤Ÿè¿›è¡Œç¬¦åˆä¸šåŠ¡é€»è¾‘çš„åœºæ™¯è®¾ç½®</p></blockquote><h3 id="3-1-JMeteråŠŸèƒ½ä»‹ç»-06-21"><a href="#3-1-JMeteråŠŸèƒ½ä»‹ç»-06-21" class="headerlink" title="3-1 JMeteråŠŸèƒ½ä»‹ç» (06:21)"></a>3-1 JMeteråŠŸèƒ½ä»‹ç» (06:21)</h3><p>ä¸‡èƒ½çš„JMeter</p><ol><li>BS(Browser-Server)æ¶æ„åº”ç”¨æ€§èƒ½(åˆ†ä¸‰å±‚ï¼š1.æµè§ˆå™¨æ€§èƒ½ï¼›2.APIæ€§èƒ½ï¼›3.æ•°æ®åº“æ€§èƒ½æµ‹è¯•)</li><li>HTTPåè®®æ¥å£åŠŸèƒ½ä¸æ€§èƒ½</li><li>FTPåè®®æ¥å£åŠŸèƒ½ä¸æ€§èƒ½</li><li>MySQLæ•°æ®åº“æ€§èƒ½(å¢åˆ æ”¹æŸ¥è„šæœ¬æµ‹è¯•)</li><li>MongoDBæ•°æ®åº“æ€§èƒ½(æ•°æ®é‡å¤§ï¼Œè¾ƒé‡è¦çš„è¯»å†™åŠŸèƒ½æ€§èƒ½)</li><li><strong>:star: æ”¯æŒè‡ªå®šä¹‰Javaç»„ä»¶å¼€å‘</strong>(JMeterå·¥å…·çš„ç»„ä»¶ä¸æ»¡è¶³æ˜¯å¯ä»¥å¼€å‘æ–°çš„ç»„ä»¶ï¼ŒJavaä»£ç è„šæœ¬æ–¹ä¾¿ç®¡ç†)</li></ol><h3 id="3-2-getæ¥å£ä»£ç å¼€å‘åŠåŸç†è®²è§£-11-51"><a href="#3-2-getæ¥å£ä»£ç å¼€å‘åŠåŸç†è®²è§£-11-51" class="headerlink" title="3-2 getæ¥å£ä»£ç å¼€å‘åŠåŸç†è®²è§£ (11:51)"></a>3-2 getæ¥å£ä»£ç å¼€å‘åŠåŸç†è®²è§£ (11:51)</h3><ol><li><p><a href="https://jmeter.apache.org/" target="_blank" rel="noopener">JMeter</a>ä¸‹è½½ï¼š<a href="https://jmeter.apache.org/download_jmeter.cgi" target="_blank" rel="noopener">https://jmeter.apache.org/download_jmeter.cgi</a></p><p>Windowsç³»ç»Ÿï¼šè¿è¡Œjmeter.bat</p><p>Linuxã€Macç³»ç»Ÿï¼šè¿è¡Œjmeter.sh</p></li><li><p>SpringBootæ¥å£å¼€å‘</p><p>DemoApplication.java</p><pre><code class="java">@SpringBootApplicationpublic class DemoApplication {    public static void main(String[] args) {        ConfigurableApplicationContext context = SpringApplication.run(DemoApplication.class,args);        for (String str : context.getEnvironment().getActiveProfiles()) {            System.out.println(str);        }    }}</code></pre><p>DemoAPI.java</p><pre><code class="java">@RestController@RequestMapping(&quot;/demoAPI&quot;)public class DemoAPI {    // http://127.0.0.1:8080/demoAPI/getDemo/zhangsan    @RequestMapping(value = &quot;/getDemo/{userName}&quot;,method = RequestMethod.GET)    public String getDemo(@PathVariable String userName){        String s = &quot; is pig&quot;;        userName = userName + s;        return &quot;æ‚¨è¾“å…¥çš„æ•°æ®æ˜¯ï¼š&quot; + userName;    }}</code></pre></li></ol><h3 id="3-3-getæ¥å£æµ‹è¯•åŠå¸¸è§ä¹±ç é—®é¢˜-24-50"><a href="#3-3-getæ¥å£æµ‹è¯•åŠå¸¸è§ä¹±ç é—®é¢˜-24-50" class="headerlink" title="3-3 getæ¥å£æµ‹è¯•åŠå¸¸è§ä¹±ç é—®é¢˜ (24:50)"></a>3-3 getæ¥å£æµ‹è¯•åŠå¸¸è§ä¹±ç é—®é¢˜ (24:50)</h3><ol><li><p>æ·»åŠ çº¿ç¨‹ç»„(Thread Group)</p><p>[Test Plan]-[Add]-[Threads(Users)]-[Thread Group]</p></li><li><p>æ·»åŠ å–æ ·å™¨(Sampler)ï¼š[Thread Group]-[Add]-[Sampler]-[HTTP Request]</p></li><li><p>æ·»åŠ æœåŠ¡å™¨ä¿¡æ¯(Web Server)</p><ul><li>Protocol[http]ï¼šhttp</li><li>Server Name OR IPï¼š127.0.0.1</li><li>Port Numberï¼š8080</li></ul></li><li><p>æ·»åŠ HTTPè¯·æ±‚ä¿¡æ¯(HTTP Request)</p><ul><li>Methodï¼šGET</li><li>Pathï¼š/demoAPI/getDemo/zhangsan</li><li>Content encodingï¼šUTF-8</li><li>è·Ÿéšé‡å®šå‘(Follow Redirects)ã€ä½¿ç”¨Keep Alive(Use Keep Alive)</li></ul></li><li><p>æ·»åŠ æŸ¥çœ‹ç»“æœæ ‘(View Results Tree)ï¼š[Thread Group]-[Add]-[Listener]-[View Results Tree]</p></li><li><p>ç‚¹å‡»ç»¿è‰²å°ç®­å¤´è¿è¡Œè®¿é—®</p></li><li><p>èšåˆæŠ¥å‘Š(Aggregate Report)ï¼š[Thread Group]-[Add]-[Listener]-[Aggregate Report]</p><p>ååº”æ•´ä¸ªæµ‹è¯•ç»“æœå¿«æ…¢ã€å¹¶å‘é‡</p><p>å…³æ³¨æŒ‡æ ‡ï¼šAverage(å¹³å‡å€¼)ã€Error%(é”™è¯¯ç‡)ã€Throughput(ååé‡)ã€</p><p>Received KB/sec(æ¥æ”¶)ã€Sent KB/sec(å‘é€)ã€90%Line(90%ç™¾åˆ†ä½)</p></li></ol><p><strong>æ³¨</strong>ï¼šåœ¨çœŸæ­£åšæµ‹è¯•æ—¶åº”è¯¥æŠŠ[æŸ¥çœ‹ç»“æœæ ‘(View Result Tree)]å»æ‰ï¼Œæ‰“å°æ—¥å¿—è®°å½•ä¼šæ¶ˆè€—å¤§é‡IOã€CPUç­‰èµ„æº</p><p>:star: æµ‹è¯•å¹¶è§£å†³è¯·æ±‚å“åº”æ•°æ®ä¹±ç ï¼š</p><pre><code>http://www.weather.com.cn/data/sk/101010100.htmlhttp://www.weather.com.cn/data/cityinfo/101010100.html</code></pre><ol><li>åœ¨Content encodingä¸­è®¾ç½®UTF-8ã€‚æ— æ•ˆ</li><li>æ‰“å¼€/bin/jmeter.propertiesæœç´¢<code>sampleresult.default.encoding=ISO-8859-1</code>ï¼Œè®¾ç½®ä¸ºUTF-8ã€‚æœ‰æ•ˆ</li><li>[Thread Group]-[Add]-[Post Processors]-[BeanShell PostProcessor]-[Script]ï¼š<code>prev.setDataEncoding(&quot;UTF-8&quot;)</code>ã€‚æœ‰æ•ˆ</li></ol><h3 id="3-4-å‚æ•°åŒ–ï¼å‡½æ•°åŠ©æ‰‹-06-12"><a href="#3-4-å‚æ•°åŒ–ï¼å‡½æ•°åŠ©æ‰‹-06-12" class="headerlink" title="3-4 å‚æ•°åŒ–ï¼å‡½æ•°åŠ©æ‰‹ (06:12)"></a>3-4 å‚æ•°åŒ–ï¼å‡½æ•°åŠ©æ‰‹ (06:12)</h3><blockquote><p>æ„ä¹‰ï¼šæ•°æ®çš„å¤šå˜ã€‚</p></blockquote><p>[Tools]-[Function Helper Dialog]-[Choose a function(__CSVRead)]-[Generate &amp; Copy to Clipboard]</p><ul><li><p>è¾“å…¥å‚æ•°ï¼š</p><p>CSV file to get values from | *aliasï¼šæ–‡ä»¶è·¯å¾„</p><p>Column number of CSV file | next | *aliasï¼šæ–‡ä»¶åˆ—å·ï¼Œ0</p></li><li><p>ç‚¹å‡»ç”Ÿæˆï¼šä»£è¡¨æŸä¸ªæ•°å€¼</p><pre><code>${__CSVRead(æ–‡ä»¶è·¯å¾„, 0)}</code></pre></li><li><p>å¤åˆ¶åˆ°é“¾æ¥ğŸ”—ï¼š</p><pre><code>/demoAPI/getDemo/${__CSVRead(æ–‡ä»¶è·¯å¾„, 0)}</code></pre></li></ul><h3 id="3-5-åœºæ™¯è®¾ç½®ï¼ˆgetè¯·æ±‚ï¼‰-06-56"><a href="#3-5-åœºæ™¯è®¾ç½®ï¼ˆgetè¯·æ±‚ï¼‰-06-56" class="headerlink" title="3-5 åœºæ™¯è®¾ç½®ï¼ˆgetè¯·æ±‚ï¼‰ (06:56)"></a>3-5 åœºæ™¯è®¾ç½®ï¼ˆgetè¯·æ±‚ï¼‰ (06:56)</h3><blockquote><p>åœºæ™¯è®¾ç½®å³é…ç½®çº¿ç¨‹ç»„</p></blockquote><p>Thread Propertiesï¼š</p><ul><li>Number of Threadsï¼šçº¿ç¨‹æ•°</li><li>Ramp-Up Period(in seconds)ï¼šæ¯ç§’å½“ä¸­æœ‰å¤šå°‘ç”¨æˆ·è¿›è¡Œè®¿é—®(åŠ å‹ç­–ç•¥)</li><li>Loop Countï¼šå¾ªç¯æ¬¡æ•°</li></ul><p>å¤æ‚åœºæ™¯éœ€è¦ä½¿ç”¨å¤šä¸ªçº¿ç¨‹ç»„</p><h2 id="ç¬¬4ç« -JMeterçš„postè¯·æ±‚ä»‹ç»åŠä½¿ç”¨"><a href="#ç¬¬4ç« -JMeterçš„postè¯·æ±‚ä»‹ç»åŠä½¿ç”¨" class="headerlink" title="ç¬¬4ç«  JMeterçš„postè¯·æ±‚ä»‹ç»åŠä½¿ç”¨"></a>ç¬¬4ç«  JMeterçš„postè¯·æ±‚ä»‹ç»åŠä½¿ç”¨</h2><blockquote><p>å­¦ä¹ èƒ½å¤Ÿäº†è§£postæ¥å£å¼€å‘çš„åŸç†ï¼›èƒ½å¤ŸæŒæ¡postæ¥å£ä¸­mapæ ¼å¼çš„æ•°æ®ä¼ é€’çš„è®¿é—®æ–¹å¼ï¼›èƒ½å¤Ÿäº†è§£jsonæ ¼å¼ä¼ é€’æ•°æ®ä¼ é€’çš„åŸç†ï¼›èƒ½å¤ŸæŒæ¡postæ¥å£ä¸­jsonæ ¼å¼çš„æ•°æ®ä¼ é€’çš„è®¿é—®æ–¹å¼</p></blockquote><h3 id="4-1-postæ¥å£ä»£ç å¼€å‘åŠåŸç†-07-52"><a href="#4-1-postæ¥å£ä»£ç å¼€å‘åŠåŸç†-07-52" class="headerlink" title="4-1 postæ¥å£ä»£ç å¼€å‘åŠåŸç† (07:52)"></a>4-1 postæ¥å£ä»£ç å¼€å‘åŠåŸç† (07:52)</h3><pre><code class="java">// http://127.0.0.1:8080/demoAPI/postDemo/*{  &quot;userName&quot;: &quot;zhangsan&quot;}*/public static int count = 0;@RequestMapping(value = &quot;/postDemo&quot;, method = RequestMethod.POST)public String postDemo(@RequestParam String userName){  count++;  String result = &quot;æ¥å£æ˜¯ç¬¬&quot; + count + &quot;æ¬¡è¢«è°ƒç”¨,æ‚¨çš„ç”¨æˆ·åæ˜¯&quot; + userName;  return result;}</code></pre><p>ä½¿ç”¨POSTMANå·¥å…·ğŸ”§è°ƒç”¨æµ‹è¯•æ¥å£ã€‚</p><h3 id="4-2-æ¥å£æµ‹è¯•å®æˆ˜ï¼mapå‚æ•°æ ¼å¼-04-55"><a href="#4-2-æ¥å£æµ‹è¯•å®æˆ˜ï¼mapå‚æ•°æ ¼å¼-04-55" class="headerlink" title="4-2 æ¥å£æµ‹è¯•å®æˆ˜ï¼mapå‚æ•°æ ¼å¼ (04:55)"></a>4-2 æ¥å£æµ‹è¯•å®æˆ˜ï¼mapå‚æ•°æ ¼å¼ (04:55)</h3><ol><li><p>æ·»åŠ çº¿ç¨‹ç»„(Thread Group)</p><p>[Test Plan]-[Add]-[Threads(Users)]-[Thread Group]</p></li><li><p>æ·»åŠ å–æ ·å™¨(Sampler)ï¼š[Thread Group]-[Add]-[Sampler]-[HTTP Request]</p></li><li><p>æ·»åŠ æœåŠ¡å™¨ä¿¡æ¯(Web Server)</p><ul><li>Protocol[http]ï¼šhttp</li><li>Server Name OR IPï¼š127.0.0.1</li><li>Port Numberï¼š8080</li></ul></li><li><p>æ·»åŠ HTTPè¯·æ±‚ä¿¡æ¯(HTTP Request)</p><ul><li>Methodï¼šPOST</li><li>Pathï¼š/demoAPI/postDemo</li><li>Content encodingï¼šUTF-8</li><li>è·Ÿéšé‡å®šå‘(Follow Redirects)ã€ä½¿ç”¨Keep Alive(Use Keep Alive)</li></ul></li><li><p>æ·»åŠ å‚æ•°ï¼š[Parameters]-[Add]</p><ul><li>userNameï¼šzhangsan</li></ul><p>ä½¿ç”¨å‡½æ•°åŠ©æ‰‹__CSVRead <code>${CSVRead(æ–‡ä»¶è·¯å¾„, 0)}</code> åŠ¨æ€è·å–CSVçš„æ•°æ®</p></li><li><p>ç‚¹å‡»ç»¿è‰²å°ç®­å¤´è¿è¡Œè®¿é—®</p></li></ol><h3 id="4-3-jsonæ ¼å¼æ•°æ®ä¼ é€’æ¥å£åŸç†åŠå¼€å‘-06-31"><a href="#4-3-jsonæ ¼å¼æ•°æ®ä¼ é€’æ¥å£åŸç†åŠå¼€å‘-06-31" class="headerlink" title="4-3 jsonæ ¼å¼æ•°æ®ä¼ é€’æ¥å£åŸç†åŠå¼€å‘ (06:31)"></a>4-3 jsonæ ¼å¼æ•°æ®ä¼ é€’æ¥å£åŸç†åŠå¼€å‘ (06:31)</h3><pre><code class="java">// http://127.0.0.1:8080/demoAPI/postJson/*{  &quot;name&quot;: &quot;zhangsan&quot;,  &quot;clazz&quot;: &quot;ä¸€å¹´ä¸€ç­&quot;}*/public static int count = 0;@ResponseBody@RequestMapping(value = &quot;/postJson&quot;, method = RequestMethod.POST)public String postDemo(@RequestBody Student student){  Student stu = new Student();  stu.setName(student.getName());  stu.setClazz(student.getClazz());  return stu;}</code></pre><pre><code class="java">@Datapublic class Student {  private String name;  private String clazz;}</code></pre><pre><code>Content-Type: application/json</code></pre><h3 id="4-4-jsonæ ¼å¼postè¯·æ±‚å®æˆ˜-05-03"><a href="#4-4-jsonæ ¼å¼postè¯·æ±‚å®æˆ˜-05-03" class="headerlink" title="4-4 jsonæ ¼å¼postè¯·æ±‚å®æˆ˜ (05:03)"></a>4-4 jsonæ ¼å¼postè¯·æ±‚å®æˆ˜ (05:03)</h3><ol><li><p>æ·»åŠ çº¿ç¨‹ç»„(Thread Group)</p><p>[Test Plan]-[Add]-[Threads(Users)]-[Thread Group]</p></li><li><p>æ·»åŠ å–æ ·å™¨(Sampler)ï¼š[Thread Group]-[Add]-[Sampler]-[HTTP Request]</p></li><li><p>æ·»åŠ æœåŠ¡å™¨ä¿¡æ¯(Web Server)</p><ul><li>Protocol[http]ï¼šhttp</li><li>Server Name OR IPï¼š127.0.0.1</li><li>Port Numberï¼š8080</li></ul></li><li><p>æ·»åŠ HTTPè¯·æ±‚ä¿¡æ¯(HTTP Request)</p><ul><li>Methodï¼šPOST</li><li>Pathï¼š/demoAPI/postJson</li><li>Content encodingï¼šUTF-8</li><li>è·Ÿéšé‡å®šå‘(Follow Redirects)ã€ä½¿ç”¨Keep Alive(Use Keep Alive)</li></ul></li><li><p>æ·»åŠ å‚æ•°ï¼š[Body Data]</p><pre><code class="json">{  &quot;name&quot;: &quot;zhangsan&quot;,  &quot;clazz&quot;: &quot;ä¸€å¹´ä¸€ç­&quot;}</code></pre><p>ä½¿ç”¨å‡½æ•°åŠ©æ‰‹__CSVRead <code>${CSVRead(æ–‡ä»¶è·¯å¾„, 0)}</code> åŠ¨æ€è·å–CSVçš„æ•°æ®</p></li><li><p>æ·»åŠ HTTPä¿¡æ¯å¤´ç®¡ç†å™¨ï¼š[Thread Group]-[Add]-[Config Element]-[HTTP Header Manager]-[Add]</p><ul><li>Content-Typeï¼šapplication/json</li></ul></li><li><p>ç‚¹å‡»ç»¿è‰²å°ç®­å¤´è¿è¡Œè®¿é—®</p></li></ol><h2 id="ç¬¬5ç« -JMeterä¹‹æ¥å£æ€§èƒ½æµ‹è¯•-è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬5ç« -JMeterä¹‹æ¥å£æ€§èƒ½æµ‹è¯•-è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬5ç«  JMeterä¹‹æ¥å£æ€§èƒ½æµ‹è¯•-è¯¾ç¨‹æ€»ç»“"></a>ç¬¬5ç«  JMeterä¹‹æ¥å£æ€§èƒ½æµ‹è¯•-è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>æŒæ¡æœ¬æ¬¡è¯¾ç¨‹çš„æ‰€æœ‰é‡ç‚¹å†…å®¹ï¼Œèƒ½å¤Ÿç‹¬ç«‹è¿›è¡Œæ¥å£æµ‹è¯•</p></blockquote><h3 id="5-1-è¯¾ç¨‹æ€»ç»“-03-31"><a href="#5-1-è¯¾ç¨‹æ€»ç»“-03-31" class="headerlink" title="5-1 è¯¾ç¨‹æ€»ç»“ (03:31)"></a>5-1 è¯¾ç¨‹æ€»ç»“ (03:31)</h3><ol><li>å¸¸è§çš„æ¥å£åè®®ï¼ˆHTTPåè®®ã€FTPåè®®ï¼‰</li><li>HTTPåè®®å“åº”ç </li><li>HTTPåè®®å“åº”æ¨¡å‹ï¼ˆHTTPç”Ÿå‘½å‘¨æœŸï¼‰</li><li>GETè¯·æ±‚çš„å¼€å‘ä¸æµ‹è¯•</li><li>POSTè¯·æ±‚çš„å¼€å‘ä¸æµ‹è¯•</li><li>åœºæ™¯è®¾ç½®ï¼ˆé…ç½®çº¿ç¨‹ç»„ä¿¡æ¯ï¼‰</li><li>å‚æ•°åŒ–ï¼ˆå‡½æ•°åŠ©æ‰‹å‚æ•°åŒ–ã€å¤–éƒ¨æ–‡ä»¶å‚æ•°åŒ–ï¼‰</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€§èƒ½æµ‹è¯• </tag>
            
            <tag> JMeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>889-ElasticSearchå…¥é—¨</title>
      <link href="/imooc/889-ElasticSearch/"/>
      <url>/imooc/889-ElasticSearch/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/889" target="_blank" rel="noopener">https://www.imooc.com/learn/889</a></p><p>ç®€ä»‹ï¼šElasticSearchæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€å¯æ‰©å±•ã€å®æ—¶çš„æœç´¢ä¸æ•°æ®åˆ†æå¼•æ“ï¼Œå®ƒèƒ½ä»é¡¹ç›®ä¸€å¼€å§‹å°±èµ‹äºˆä½ çš„æ•°æ®ä»¥æœç´¢ã€åˆ†æå’Œæ¢ç´¢çš„èƒ½åŠ›ã€‚é€šè¿‡æœ¬è¯¾ç¨‹çš„å­¦ä¹ ï¼Œä½ å¯ä»¥äº†è§£åˆ°ï¼ŒElasticSearchåœ¨äº’è”ç½‘è¡Œä¸šé‡Œçš„ç«çƒ­ç¨‹åº¦ï¼Œä¹Ÿå¯ä»¥äº†è§£åˆ°å®ƒçš„å®é™…åº”ç”¨åœºæ™¯ã€‚æœ¬è¯¾ç¨‹ä¼šé€šè¿‡ç†è®ºä¸å®è·µç›¸ç»“åˆçš„æ–¹å¼ï¼Œå¸¦é¢†ä½ ä¸€æ­¥ä¸€æ­¥èµ°è¿›ElasticSearchçš„ä¸–ç•Œï¼Œä½¿ä½ è½»æ¾æŒæ¡ElasticSearchçš„åŸºæœ¬æ¦‚å¿µï¼Œå­¦ä¹ ElasticSearchçš„æœåŠ¡æ­å»ºï¼Œäº†è§£ElasticSearchçš„å¸¸ç”¨æŠ€å·§ï¼Œå¹¶é€šè¿‡æ¡ˆä¾‹é¡¹ç›®è®©ä½ æ‹¥æœ‰å®é™…çš„åº”ç”¨èƒ½åŠ›ã€‚ è€å¸ˆå®æˆ˜è¯¾ç¨‹å·²ç»ä¸Šçº¿ï¼š<a href="http://coding.imooc.com/class/167.html" target="_blank" rel="noopener">http://coding.imooc.com/class/167.html</a> ElasticSearch+MySQL+Kafkaå¼ºåŠ›ç»„åˆï¼Œæ›´æœ‰ESç»“åˆç™¾åº¦åœ°å›¾ï¼ŒNginxç­‰é«˜çº§åº”ç”¨ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>ä»‹ç»Elastic Searchçš„ç”±æ¥ï¼Œåº”ç”¨åœºæ™¯ï¼Œè¯¾ç¨‹éœ€è¦çš„å‰ç½®çŸ¥è¯†ï¼Œç¯å¢ƒè¦æ±‚ï¼Œä»‹ç»è¯¾ç¨‹å®‰æ’</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title=" 1-1 è¯¾ç¨‹ä»‹ç»"></a><a href="https://www.imooc.com/video/15762" target="_blank" rel="noopener"> 1-1 è¯¾ç¨‹ä»‹ç»</a></h3><p>ä»€ä¹ˆæ˜¯ElasticSearchï¼Ÿ</p><ul><li><p>åŸºäºApache Luceneæ„å»ºçš„å¼€æºæœç´¢å¼•æ“</p><p>Luceneç›¸å¯¹å¤æ‚ï¼Œéœ€è¦æ·±åšçš„æœç´¢ç†è®ºçŸ¥è¯†ï¼Œéš¾ä»¥é›†æˆ</p></li><li><p>é‡‡ç”¨Javaç¼–å†™ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„RESTFul API</p></li><li><p>è½»æ¾çš„æ¨ªå‘æ‰©å±•ï¼Œå¯æ”¯æŒPBçº§çš„ç»“æ„åŒ–æˆ–éç»“æ„åŒ– æ•°æ®å¤„ç†</p></li></ul><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>æµ·é‡æ•°æ®åˆ†æå¼•æ“</li><li>ç«™å†…æœç´¢å¼•æ“</li><li>æ•°æ®ä»“åº“</li></ul><p>ä¸€çº¿å…¬å¸å®é™…åº”ç”¨åœºæ™¯ï¼š</p><ul><li>è‹±å›½å«æŠ¥-å®æ—¶åˆ†æå…¬ä¼—å¯¹æ–‡ç« çš„å›åº”</li><li>ç»´åŸºç™¾ç§‘ã€Github-ç«™å†…å®æ—¶æœç´¢</li><li>ç™¾åº¦-å®æ—¶æ—¥å¿—ç›‘æ§å¹³å°</li><li>é˜¿é‡Œå·´å·´ã€Googleã€äº¬ä¸œç­‰ç­‰</li></ul><p>å‰ç½®çŸ¥è¯†</p><ul><li>ç†Ÿæ‚‰ç”¨Mavenæ„å»ºé¡¹ç›®</li><li>äº†è§£Spring Bootçš„åŸºæœ¬ä½¿ç”¨</li></ul><p>ç¯å¢ƒè¦æ±‚ï¼š</p><ul><li>IDEå·¥å…·ï¼šIntellij IDEAã€Eclipseç­‰å¸¸ç”¨IDEå³å¯</li><li>Javaï¼šJDK1.8</li><li>å…¶ä»–ä¾èµ–ï¼šMavenã€NodeJS(6.0ä»¥ä¸Š)</li></ul><p>è¯¾ç¨‹ç®€ä»‹ï¼š</p><ul><li>å®‰è£…=ã€‹åŸºç¡€æ¦‚å¿µ=ã€‹åŸºæœ¬ç”¨æ³•=ã€‹é«˜çº§æŸ¥è¯¢=ã€‹å®æˆ˜æ¼”ç»ƒ=ã€‹è¯¾ç¨‹æ€»ç»“</li></ul><h2 id="ç¬¬2ç« -å®‰è£…"><a href="#ç¬¬2ç« -å®‰è£…" class="headerlink" title="ç¬¬2ç«  å®‰è£…"></a>ç¬¬2ç«  å®‰è£…</h2><blockquote><p>å…ˆä»å•ä¸ªèŠ‚ç‚¹çš„å®‰è£…è®²èµ·ï¼Œç„¶åæŠŠæ’ä»¶å®‰è£…æµç¨‹èµ°ä¸€éï¼Œå¹¶è¯´ä¸€ä¸‹æ’ä»¶çš„ä¸»è¦ä½œç”¨ï¼Œæœ€åæŠŠåˆ†å¸ƒå¼å®‰è£…ç®€å•çš„ä»‹ç»ä¸€ä¸‹</p></blockquote><h3 id="2-1-ESç‰ˆæœ¬å†å²å’Œé€‰æ‹©"><a href="#2-1-ESç‰ˆæœ¬å†å²å’Œé€‰æ‹©" class="headerlink" title=" 2-1 ESç‰ˆæœ¬å†å²å’Œé€‰æ‹©"></a><a href="https://www.imooc.com/video/15763" target="_blank" rel="noopener"> 2-1 ESç‰ˆæœ¬å†å²å’Œé€‰æ‹©</a></h3><ul><li>ç‰ˆæœ¬å†å² 1.x -&gt; 2.x -&gt; 5.x</li><li>ç‰ˆæœ¬é€‰æ‹© 5.xä»¥ä¸Š</li></ul><p>å®‰è£…</p><ul><li>å•å®ä¾‹å®‰è£…</li><li>å®ç”¨æ’ä»¶Headå®‰è£…</li><li>åˆ†å¸ƒå¼å®‰è£…</li></ul><h3 id="2-2-å•å®ä¾‹å®‰è£…"><a href="#2-2-å•å®ä¾‹å®‰è£…" class="headerlink" title=" 2-2 å•å®ä¾‹å®‰è£…"></a><a href="https://www.imooc.com/video/15764" target="_blank" rel="noopener"> 2-2 å•å®ä¾‹å®‰è£…</a></h3><blockquote><p><a href="https://www.elastic.co/cn/" target="_blank" rel="noopener">ElasticSearchå®˜ç½‘é¦–é¡µ</a> </p></blockquote><pre><code class="shell"># ä¸‹è½½wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.3.1-linux-x86_64.tar.gz# è§£å‹tar -zvxf elasticsearch-7.3.1-linux-x86_64.tar.gz# è¿›å…¥HOMEç›®å½•cd elasticsearch-7.3.1-linux-x86_64# è¿è¡ŒElasticSearchç¨‹åºsh ./bin/elasticsearch# è·å–ElasticSearchæœåŠ¡ä¿¡æ¯curl http://localhost:9200/</code></pre><h3 id="2-3-æ’ä»¶å®‰è£…"><a href="#2-3-æ’ä»¶å®‰è£…" class="headerlink" title=" 2-3 æ’ä»¶å®‰è£…"></a><a href="https://www.imooc.com/video/15765" target="_blank" rel="noopener"> 2-3 æ’ä»¶å®‰è£…</a></h3><blockquote><p><a href="https://github.com/mobz/elasticsearch-head" target="_blank" rel="noopener">Githubä¸»é¡µ</a></p></blockquote><pre><code class="shell"># ä¸‹è½½wget https://github.com/mobz/elasticsearch-head/archive/master.zip# è§£å‹unzip master.zip# è¿›å…¥HOMEç›®å½•cd elasticsearch-head-master# ç¼–è¯‘æºç npm install# è¿è¡Œç¨‹åºnpm run start# è®¿é—®æœåŠ¡åœ°å€open http://localhost:9100/</code></pre><ul><li><p>ä¿®æ”¹ElasticSearché…ç½®</p><pre><code class="shell">vim config/elasticsearch.yml</code></pre><pre><code class="yaml">http.cors.enabled: truehttp.cors.allow-origin: &quot;*&quot;</code></pre><p>é‡å¯ElasticSearchã€Head</p></li></ul><h3 id="2-4-åˆ†å¸ƒå¼å®‰è£…"><a href="#2-4-åˆ†å¸ƒå¼å®‰è£…" class="headerlink" title=" 2-4 åˆ†å¸ƒå¼å®‰è£…"></a><a href="https://www.imooc.com/video/15766" target="_blank" rel="noopener"> 2-4 åˆ†å¸ƒå¼å®‰è£…</a></h3><p>ä¿®æ”¹ElasticSearché…ç½®</p><ul><li><p>ä¸»èŠ‚ç‚¹ï¼š</p><pre><code class="shell">vim config/elasticsearch.yml# -import ~~master~~# æŸ¥çœ‹è¿›ç¨‹ps -ef | grep `pwd`# åå°å¯åŠ¨ElasticSearch./bin/elasticsearch -d</code></pre><pre><code class="yaml"># ~~master~~cluster.name: walinode.name: masternode.master: truenetwork.host: 127.0.0.1</code></pre></li><li><p>ä»èŠ‚ç‚¹</p><pre><code class="shell"># åˆ›å»ºå­èŠ‚ç‚¹ç›®å½•mkdir es_slave# æ‹·è´ElasticSearchcp elasticsearch-7.3.1-linux-x86_64.tar.gz es_slave# è§£å‹tar -zvxf elasticsearch-7.3.1-linux-x86_64.tar.gz# å¤åˆ¶ä¸¤ä»½å­èŠ‚ç‚¹ç¨‹åºcp -r elasticsearch-7.3.1-linux-x86_64 es_slave1cp -r elasticsearch-7.3.1-linux-x86_64 es_slave2cd es_slave1vi config/elasticsearch.yml# -import ~~es_slave1~~# åå°å¯åŠ¨ElasticSearch./bin/elasticsearch -dcd es_slave2vi config/elasticsearch.yml# -import ~~es_slave2~~# åå°å¯åŠ¨ElasticSearch./bin/elasticsearch -d</code></pre><pre><code class="yaml"># ~~es_slave1~~cluster.name: walinode.name: slave1network.host: 127.0.0.1http.port: 8001</code></pre><pre><code class="yaml"># ~~es_slave2~~cluster.name: walinode.name: slave2network.host: 127.0.0.1http.port: 8002</code></pre></li></ul><h2 id="ç¬¬3ç« -åŸºç¡€æ¦‚å¿µ"><a href="#ç¬¬3ç« -åŸºç¡€æ¦‚å¿µ" class="headerlink" title="ç¬¬3ç«  åŸºç¡€æ¦‚å¿µ"></a>ç¬¬3ç«  åŸºç¡€æ¦‚å¿µ</h2><blockquote><p>ç»“åˆHeadæ’ä»¶ï¼Œç®€å•çš„è®²è§£é›†ç¾¤ã€èŠ‚ç‚¹çš„æ¦‚å¿µï¼Œé‡ç‚¹è®²è§£ç´¢å¼•åŠå…¶é‡è¦æ€§ï¼Œåˆ†ç‰‡å’Œå¤‡ä»½å±äºç´¢å¼•çš„é™„å±æ¦‚å¿µï¼Œä¸€ç¬”å¸¦è¿‡ï¼Œç±»å‹ã€æ–‡æ¡£ç®€å•è®²è§£ä¸‹ï¼Œå¹¶å°†ç´¢å¼•ã€ç±»å‹ã€æ–‡æ¡£ä¸‰è€…çš„å…³ç³»è®²è§£æ¸…æ¥š</p></blockquote><h3 id="3-1-åŸºç¡€æ¦‚å¿µ"><a href="#3-1-åŸºç¡€æ¦‚å¿µ" class="headerlink" title=" 3-1 åŸºç¡€æ¦‚å¿µ"></a><a href="https://www.imooc.com/video/15767" target="_blank" rel="noopener"> 3-1 åŸºç¡€æ¦‚å¿µ</a></h3><p>é›†ç¾¤å’ŒèŠ‚ç‚¹ï¼š</p><ul><li>èŠ‚ç‚¹1+èŠ‚ç‚¹2+â€¦+â€¦+èŠ‚ç‚¹N ==ã€‹é›†ç¾¤</li></ul><p>åŸºç¡€æ¦‚å¿µ</p><ul><li><p>ç´¢å¼•ï¼šå«æœ‰ç›¸åŒå±æ€§çš„æ–‡æ¡£é›†åˆ</p></li><li><p>ç±»å‹ï¼šç´¢å¼•å¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹ï¼Œæ–‡æ¡£å¿…é¡»å±äºä¸€ä¸ªç±»å‹</p></li><li><p>æ–‡æ¡£ï¼šæ–‡æ¡£æ˜¯å¯ä»¥è¢«ç´¢å¼•çš„åŸºæœ¬æ•°æ®å•ä½</p></li><li><p>åˆ†ç‰‡ï¼šæ¯ä¸ªç´¢å¼•éƒ½æœ‰å¤šä¸ªåˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡æ˜¯ä¸€ä¸ªLuceneç´¢å¼•</p></li><li><p>å¤‡ä»½ï¼šæ‹·è´ä¸€ä»½åˆ†ç‰‡å°±å¯ä»¥å®Œæˆäº†åˆ†ç‰‡çš„å¤‡ä»½</p></li></ul><h2 id="ç¬¬4ç« -åŸºæœ¬ç”¨æ³•"><a href="#ç¬¬4ç« -åŸºæœ¬ç”¨æ³•" class="headerlink" title="ç¬¬4ç«  åŸºæœ¬ç”¨æ³•"></a>ç¬¬4ç«  åŸºæœ¬ç”¨æ³•</h2><blockquote><p>æœ¬ç« èŠ‚ä¸»è¦å¸¦é¢†å­¦ç”Ÿä¸€èµ·å­¦ä¹ ElasticSearchçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶äº†è§£å¸¸ç”¨çš„REST APIï¼Œè®²è§£è¿‡ç¨‹ä¸­è¦å°†å‘½ä»¤è¡Œä¸headæ’ä»¶ç›¸ç»“åˆä»¥æ¼”ç¤ºç›¸åº”æ“ä½œã€‚</p></blockquote><h3 id="4-1-ç´¢å¼•åˆ›å»º"><a href="#4-1-ç´¢å¼•åˆ›å»º" class="headerlink" title=" 4-1 ç´¢å¼•åˆ›å»º"></a><a href="https://www.imooc.com/video/15768" target="_blank" rel="noopener"> 4-1 ç´¢å¼•åˆ›å»º</a></h3><blockquote><ul><li>éç»“æ„åŒ–åˆ›å»º</li><li>ç»“æ„åŒ–åˆ›å»º</li></ul></blockquote><p>RESTFul APIï¼š</p><ul><li><p>APIåŸºæœ¬æ ¼å¼</p><pre><code>http://&lt;ip&gt;:&lt;port&gt;/&lt;ç´¢å¼•&gt;/&lt;ç±»å‹&gt;/&lt;æ–‡æ¡£ID&gt;</code></pre></li><li><p>å¸¸ç”¨HTTPåŠ¨è¯ï¼šGET/PUT/POST/DELETE</p></li></ul><p>Headæ’ä»¶åˆ›å»ºç´¢å¼•ï¼ˆéç»“æ„åŒ–ï¼‰ï¼š</p><ol><li><p>è®¿é—®HeadæœåŠ¡åœ°å€ï¼š<a href="http://127.0.0.1:9100" target="_blank" rel="noopener">http://127.0.0.1:9100</a></p></li><li><p>ç´¢å¼•-æ–°å»ºç´¢å¼•</p></li><li><p>æ¦‚è§ˆ</p><p>ç²—çº¿æ¡†ä¸ºä¸»åˆ†ç‰‡ï¼Œæ—è¾¹ç»†çº¿æ¡†ä¸ºåˆ†ç‰‡å¤‡ä»½</p></li></ol><p>Headæ’ä»¶åˆ›å»ºç´¢å¼•ï¼ˆç»“æ„åŒ–ï¼‰ï¼š</p><ol><li><p>å¤åˆæŸ¥è¯¢-æŸ¥è¯¢</p></li><li><p>å‚æ•°ä¿¡æ¯</p><pre><code>http://127.0.0.1:9200/book/novel/_mappings POST</code></pre><pre><code class="json">{    &quot;novel&quot;: {        &quot;properties&quot;: {            &quot;title&quot;:{                &quot;type&quot;: &quot;text&quot;            }        }    }}</code></pre></li><li><p>éªŒè¯JSON-æäº¤è¯·æ±‚</p></li><li><p>æ¦‚è§ˆ-åˆ·æ–°-ä¿¡æ¯-ç´¢å¼•ä¿¡æ¯-mappings</p></li></ol><p>Postmanåˆ›å»ºç´¢å¼•</p><ol><li><pre><code>PUT http://127.0.0.1:9200/people</code></pre></li><li><pre><code>{    &quot;settings&quot;: {        &quot;number_of_shards&quot;: 3,        &quot;number_of_replicas&quot;: 1    },    &quot;mappings&quot;: {        &quot;man&quot;: {            &quot;properties&quot;: {                &quot;name&quot;: {&quot;type&quot;: &quot;text&quot;},                &quot;country&quot;: {&quot;type&quot;: &quot;keyword&quot;},                &quot;age&quot;: {                    &quot;type&quot;: &quot;integer&quot;                },                &quot;date&quot;: {                    &quot;type&quot;: &quot;date&quot;,                    &quot;format&quot;: &quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;                }            }        },        &quot;woman&quot;: {        }    }}</code></pre></li></ol><h3 id="4-2-æ’å…¥"><a href="#4-2-æ’å…¥" class="headerlink" title=" 4-2 æ’å…¥"></a><a href="https://www.imooc.com/video/15769" target="_blank" rel="noopener"> 4-2 æ’å…¥</a></h3><blockquote><ul><li>æŒ‡å®šæ–‡æ¡£IDæ’å…¥</li><li>è‡ªåŠ¨äº§ç”Ÿæ–‡æ¡£IDæ’å…¥</li></ul></blockquote><p>æ–‡æ¡£IDï¼šå”¯ä¸€ç´¢å¼•å€¼ï¼ŒæŒ‡å‘æ–‡æ¡£æ•°æ®</p><p>æŒ‡å®šæ–‡æ¡£IDæ’å…¥ï¼š</p><ol><li><pre><code>PUT http://127.0.0.1:9200/people/man/1</code></pre></li><li><pre><code class="json">{    &quot;name&quot;: &quot;ç“¦åŠ›&quot;, &quot;country&quot;: &quot;China&quot;,    &quot;age&quot;: 30,    &quot;date&quot;: &quot;1987-03-07&quot;}</code></pre></li><li><p>æ¦‚è§ˆ-docsï¼šç´¢å¼•ä¸‹æ‰€æœ‰æ–‡æ¡£çš„æ•°é‡å€¼</p></li><li><p>æ•°æ®æµè§ˆ</p></li></ol><p>è‡ªåŠ¨äº§ç”Ÿæ–‡æ¡£IDæ’å…¥ï¼š</p><ol><li><pre><code>POST http://127.0.0.1:9200/people/man</code></pre></li><li><pre><code class="json">{    &quot;name&quot;: &quot;ç“¦åŠ›&quot;,    &quot;country&quot;: &quot;China&quot;,    &quot;age&quot;: 30,    &quot;date&quot;: &quot;1987-03-07&quot;}</code></pre></li></ol><h3 id="4-3-ä¿®æ”¹"><a href="#4-3-ä¿®æ”¹" class="headerlink" title=" 4-3 ä¿®æ”¹"></a><a href="https://www.imooc.com/video/15770" target="_blank" rel="noopener"> 4-3 ä¿®æ”¹</a></h3><blockquote><ul><li>ç›´æ¥ä¿®æ”¹æ–‡æ¡£</li><li>è„šæœ¬ä¿®æ”¹æ–‡æ¡£</li></ul></blockquote><p>ç›´æ¥ä¿®æ”¹æ–‡æ¡£</p><ol><li><pre><code>POST http://127.0.0.1:9200/people/man/1/_update</code></pre></li><li><pre><code class="json">{    &quot;doc&quot;: {        &quot;name&quot;: &quot;è°æ˜¯ç“¦åŠ›&quot;    }}</code></pre></li></ol><p>è„šæœ¬ä¿®æ”¹æ–‡æ¡£</p><ol><li><pre><code>POST http://127.0.0.1:9200/people/man/1/_update</code></pre></li><li><pre><code class="json">{    &quot;script&quot;: {        &quot;lang&quot;: &quot;painless&quot;,        &quot;inline&quot;: &quot;ctx._source.age += 10&quot;    }}</code></pre><pre><code class="json">{    &quot;script&quot;: {        &quot;lang&quot;: &quot;painless&quot;,        &quot;inline&quot;: &quot;ctx._source.age += params.age&quot;,        &quot;params&quot;: {            &quot;age&quot;: 100        }    }}</code></pre></li></ol><h3 id="4-4-åˆ é™¤"><a href="#4-4-åˆ é™¤" class="headerlink" title=" 4-4 åˆ é™¤"></a><a href="https://www.imooc.com/video/15771" target="_blank" rel="noopener"> 4-4 åˆ é™¤</a></h3><blockquote><ul><li>åˆ é™¤æ–‡æ¡£</li><li>åˆ é™¤ç´¢å¼•</li></ul></blockquote><p>åˆ é™¤æ–‡æ¡£</p><pre><code>DELETE http://127.0.0.1:9200/people/man/1</code></pre><p>åˆ é™¤ç´¢å¼•</p><ul><li><p>Headæ’ä»¶åˆ é™¤</p><p>æ¦‚è§ˆ-åŠ¨ä½œ-åˆ é™¤-è¾“å…¥åˆ é™¤-ç¡®å®š</p></li><li><p>Postmanåˆ é™¤</p><pre><code>DELETE http://127.0.0.1:9200/people</code></pre></li></ul><p>åˆ é™¤ç´¢å¼•æ˜¯ä¸€ä¸ªéå¸¸å±é™©çš„æ“ä½œã€‚</p><h3 id="4-5-æŸ¥è¯¢"><a href="#4-5-æŸ¥è¯¢" class="headerlink" title=" 4-5 æŸ¥è¯¢"></a><a href="https://www.imooc.com/video/15772" target="_blank" rel="noopener"> 4-5 æŸ¥è¯¢</a></h3><blockquote><ul><li>ç®€å•æŸ¥è¯¢</li><li>æ¡ä»¶æŸ¥è¯¢</li><li>èšåˆæŸ¥è¯¢</li></ul></blockquote><p>äº‹å…ˆåˆ›å»ºç´¢å¼•bookï¼š</p><pre><code>PUT http://127.0.0.1:9200/book</code></pre><pre><code class="json">{    &quot;settings&quot;: {        &quot;number_of_shards&quot;: 3,        &quot;number_of_replicas&quot;: 1    },    &quot;mappings&quot;: {        &quot;novel&quot;: {            &quot;properties&quot;: {                &quot;word_count&quot;: {                    &quot;type&quot;: &quot;integer&quot;                },                &quot;author&quot;: {                    &quot;type&quot;: &quot;keyword&quot;                },                &quot;title&quot;: {                    &quot;type&quot;: &quot;text&quot;                },                &quot;publish_date&quot;: {                    &quot;format&quot;: &quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;,                    &quot;type&quot;: &quot;date&quot;                }            }        }    }}</code></pre><p>æ’å…¥æ•°æ®ï¼š</p><pre><code>PUT http://127.0.0.1:9200/book/novel/1</code></pre><pre><code class="json">{    &quot;word_count&quot;: &quot;5000&quot;,    &quot;author&quot;: &quot;ç‹äº”&quot;,    &quot;title&quot;: &quot;èœè°±&quot;,    &quot;publish_date&quot;: &quot;2002-10-01&quot;}</code></pre><p>book novel 5  1 ç‹äº” èœè°±                    5000  2002-10-01<br>book novel 8  1 ç“¦åŠ› ElasticSearchå…¥é—¨       3000  2017-08-20<br>book novel 9  1 å¾ˆèƒ–çš„ç“¦åŠ› ElasticSearchç²¾é€š 3000  2017-08-15<br>book novel 10 1 ç‰›é­”ç‹ èŠ­è•‰æ‰‡                1000  2000-10-01<br>book novel 2  1 æä¸‰ Javaå…¥é—¨                2000  2010-10-01<br>book novel 4  1 æå›› ElasticSearchå¤§æ³•å¥½     1000  2017-08-01<br>book novel 6  1 èµµå…­ å‰‘è°±                    10000 1997-01-01<br>book novel 1  1 å¼ ä¸‰ ç§»é­‚å¤§æ³•                1000  2000-10-01<br>book novel 7  1 å¼ ä¸‰ä¸° å¤ªææ‹³                1000  1997-01-01<br>book novel 3  1 å¼ å›› Pythonå…¥é—¨              2000  2005-10-01<br>book novel 11 1 å­™æ‚Ÿç©º ä¸ƒåäºŒå˜              1000  2000-10-01</p><p>ç®€å•æŸ¥è¯¢ï¼š</p><pre><code>GET http://127.0.0.1:9200/book/novel/1</code></pre><p>æ¡ä»¶æŸ¥è¯¢ï¼š</p><ul><li><p>æŸ¥è¯¢æ‰€æœ‰</p><pre><code>POST http://127.0.0.1:9200/book/_search</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;match_all&quot;: {}    },    &quot;form&quot;: 1,    &quot;size&quot;: 1}</code></pre><p>å…³é”®è¯æŸ¥è¯¢</p><pre><code class="json">{    &quot;query&quot;: {        &quot;match&quot;: {            &quot;title&quot;: &quot;ElasticSearch&quot;        }    },    &quot;sort&quot;: [        {&quot;publish_date&quot;: {&quot;order&quot;: &quot;desc&quot;}}    ]}</code></pre></li><li><p>æ¡ä»¶æŸ¥è¯¢</p><pre><code>POST http://127.0.0.1:9200/book/_search</code></pre><pre><code class="json">{    &quot;aggs&quot;: {        &quot;group_by_word_count&quot;: {            &quot;terms&quot;: {                &quot;field&quot;: &quot;word_count&quot;            }        },        &quot;group_by_publish_date&quot;: {            &quot;terms&quot;: {                &quot;field&quot;: &quot;publish_date&quot;            }        }    }}</code></pre></li><li><p>èšåˆæŸ¥è¯¢</p><pre><code>POST http://127.0.0.1:9200/book/_search</code></pre><pre><code class="json">{    &quot;aggs&quot;: {        &quot;grades_word_count&quot;: {            &quot;stats&quot;: {                &quot;field&quot;: word_count            }        }    }}</code></pre><pre><code class="json">{    &quot;aggs&quot;: {        &quot;grades_word_count&quot;: {            &quot;min&quot;: {                &quot;field&quot;: word_count            }        }    }}</code></pre></li></ul><h2 id="ç¬¬5ç« -é«˜çº§æŸ¥è¯¢"><a href="#ç¬¬5ç« -é«˜çº§æŸ¥è¯¢" class="headerlink" title="ç¬¬5ç«  é«˜çº§æŸ¥è¯¢"></a>ç¬¬5ç«  é«˜çº§æŸ¥è¯¢</h2><blockquote><p>å°†queryä¸filteråˆ†å¼€è®²è§£ï¼Œå¹¶æŠŠç›¸åº”çš„å…³é”®è¯åˆ—ä¸¾ä¸€äº›ï¼Œç»“åˆå®ä¾‹æ“ä½œï¼Œæœ€åå°†queryä¸filterç»„åˆèµ·æ¥ï¼Œè®²è§£å®ä¾‹</p></blockquote><h3 id="5-1-query"><a href="#5-1-query" class="headerlink" title=" 5-1 query"></a><a href="https://www.imooc.com/video/15759" target="_blank" rel="noopener"> 5-1 query</a></h3><p>é«˜çº§æŸ¥è¯¢ï¼š</p><ul><li>å­æ¡ä»¶æŸ¥è¯¢ï¼šç‰¹å®šå­—æ®µæŸ¥è¯¢æ‰€æŒ‡ç‰¹å®šå€¼</li><li>å¤åˆæ¡ä»¶æŸ¥è¯¢ï¼šä»¥ä¸€å®šçš„é€»è¾‘ç»„åˆå­æ¡ä»¶æŸ¥è¯¢</li></ul><p>å­æ¡ä»¶æŸ¥è¯¢</p><ul><li>Query context</li><li>Filter context</li></ul><p>Query Context</p><blockquote><p>åœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œé™¤äº†åˆ¤æ–­æ–‡æ¡£æ˜¯å¦æ»¡è¶³æŸ¥è¯¢æ¡ä»¶å¤–ï¼ŒESè¿˜ä¼šè®¡ç®—ä¸€ä¸ª_scoreæ¥æ ‡è¯†åŒ¹é…çš„ç¨‹åº¦ï¼Œæ—¨åœ¨åˆ¤æ–­ç›®æ ‡æ–‡æ¡£å’ŒæŸ¥è¯¢æ¡ä»¶åŒ¹é…çš„æœ‰å¤šå¥½ã€‚</p></blockquote><p>å¸¸ç”¨æŸ¥è¯¢ï¼š</p><ul><li>å…¨æ–‡æœ¬æŸ¥è¯¢ï¼šé’ˆå¯¹æ–‡æœ¬ç±»å‹æ•°æ®</li><li>å­—æ®µçº§åˆ«æŸ¥è¯¢ï¼šé’ˆå¯¹ç»“æ„åŒ–æ•°æ®ï¼Œå¦‚æ•°å­—ã€æ—¥æœŸç­‰</li></ul><pre><code>POST http://127.0.0.1:9200/book/_search</code></pre><ul><li><p>æ¨¡ç³ŠåŒ¹é…(åŒ¹é…ï¼šElasticSearch+å…¥é—¨)</p><pre><code class="json">{    &quot;query&quot;: {        &quot;match&quot;: {            &quot;title&quot;: &quot;ElasticSearchå…¥é—¨&quot;        }    }}</code></pre></li><li><p>ä¹ è¯­åŒ¹é…(åŒ¹é…ï¼šElasticSearchå…¥é—¨)</p><pre><code class="json">{    &quot;query&quot;: {        &quot;match_phrase&quot;: {            &quot;title&quot;: &quot;ElasticSearchå…¥é—¨&quot;        }    }}</code></pre></li><li><p>å¤šå­—æ®µæ¨¡ç³ŠåŒ¹é…</p><pre><code class="json">{    &quot;query&quot;: {        &quot;multi_match&quot;: {            &quot;query&quot;: &quot;ç“¦åŠ›&quot;,            &quot;fields&quot;: [&quot;author&quot;, &quot;title&quot;]        }    }}</code></pre></li><li><p>è¯­æ³•åŒ¹é…</p><pre><code class="json">{    &quot;query&quot;: {        &quot;query_string&quot;: {            &quot;query&quot;: &quot;ElasticSearch AND å¤§æ³•&quot;        }    }}</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;query_string&quot;: {            &quot;query&quot;: &quot;(ElasticSearch AND å¤§æ³•) OR Python&quot;        }    }}</code></pre></li><li><p>å¤šå­—æ®µè¯­æ³•åŒ¹é…</p><pre><code class="json">{    &quot;query&quot;: {        &quot;query_string&quot;: {            &quot;query&quot;: &quot;ç“¦åŠ› OR ElasticSearch&quot;,            &quot;fields&quot;: [&quot;title&quot;, &quot;author&quot;]        }    }}</code></pre></li><li><p>å­—æ®µåŒ¹é…</p><pre><code class="json">{    &quot;query&quot;: {        &quot;term&quot;: {            &quot;word_count&quot;: 1000        }    }}</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;term&quot;: {            &quot;author&quot;: &quot;ç“¦åŠ›&quot;        }    }}</code></pre></li><li><p>èŒƒå›´åŒ¹é…ï¼ˆæ•°å­—ã€æ—¥æœŸï¼‰</p><pre><code class="json">{    &quot;query&quot;: {        &quot;range&quot;: {            &quot;word_count&quot;: {                &quot;gte&quot;: 1000,                &quot;lte&quot;: 2000            }        }    }}</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;range&quot;: {            &quot;publish_date&quot;: {                &quot;gt&quot;: &quot;2019-08-29&quot;,                &quot;lte&quot;: &quot;now&quot;            }        }    }}</code></pre><p>nowï¼šä»£è¡¨å½“å‰æ—¶é—´</p></li></ul><h3 id="5-2-filter"><a href="#5-2-filter" class="headerlink" title=" 5-2 filter"></a><a href="https://www.imooc.com/video/15760" target="_blank" rel="noopener"> 5-2 filter</a></h3><p>Filter Context</p><blockquote><p>åœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œåªåˆ¤æ–­è¯¥æ–‡æ¡£æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œåªæœ‰Yesæˆ–è€…No</p></blockquote><pre><code>POST http://127.0.0.1:9200/book/_search</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;bool&quot;: {            &quot;filter&quot;: {                &quot;term&quot;: {                    &quot;word_count&quot;: 1000                }            }        }    }}</code></pre><p>filteråšæ•°æ®è¿‡æ»¤çš„ï¼Œå¹¶ä¸”ä¼šå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç¼“å­˜ï¼Œæ‰€ä»¥filteræ¯”queryè¦å¿«ä¸€äº›ã€‚</p><h3 id="5-3-å¤åˆæŸ¥è¯¢"><a href="#5-3-å¤åˆæŸ¥è¯¢" class="headerlink" title=" 5-3 å¤åˆæŸ¥è¯¢"></a><a href="https://www.imooc.com/video/15761" target="_blank" rel="noopener"> 5-3 å¤åˆæŸ¥è¯¢</a></h3><p>å¸¸ç”¨æŸ¥è¯¢ï¼š</p><ul><li>å›ºå®šåˆ†æ•°æŸ¥è¯¢</li><li>å¸ƒå°”æŸ¥è¯¢</li></ul><pre><code>POST http://127.0.0.1:9200/book/_search</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;match&quot;: {            &quot;title&quot;: &quot;ElasticSearch&quot;        }    }}</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;constant_score&quot;: {            &quot;filter&quot;: {                &quot;match&quot;: {                    &quot;title&quot;: &quot;ElasticSearch&quot;                }            },            &quot;boost&quot;: 2        }    }}</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;bool&quot;: {            &quot;should&quot;: [                {                    &quot;match&quot;: {                        &quot;author&quot;: &quot;ç“¦åŠ›&quot;                    }                },                {                    &quot;match&quot;: {                        &quot;title&quot;: &quot;ElasticSearch&quot;                    }                }            ]        }    }}</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;bool&quot;: {            &quot;must&quot;: [                {                    &quot;match&quot;: {                        &quot;author&quot;: &quot;ç“¦åŠ›&quot;                    }                },                {                    &quot;match&quot;: {                        &quot;title&quot;: &quot;ElasticSearch&quot;                    }                }            ],            &quot;filter&quot;: [                {                    &quot;term&quot;: {                        &quot;word_count&quot;: 1000                    }                }            ]        }    }}</code></pre><pre><code class="json">{    &quot;query&quot;: {        &quot;bool&quot;: {            &quot;must_not&quot;: {                &quot;term&quot;: {                    &quot;author&quot;: &quot;ç“¦åŠ›&quot;                }            }        }    }}</code></pre><p>å›ºå®šåˆ†æ•°æŸ¥è¯¢ä¸æ”¯æŒmatchï¼Œåªæ”¯æŒfilter</p><h2 id="ç¬¬6ç« -Spring-Booté›†æˆES"><a href="#ç¬¬6ç« -Spring-Booté›†æˆES" class="headerlink" title="ç¬¬6ç«  Spring Booté›†æˆES"></a>ç¬¬6ç«  Spring Booté›†æˆES</h2><blockquote><p>ç›´æ¥æ¼”ç¤ºSpringBooté›†æˆESï¼Œåšæ¥å£å¼€å‘</p><p>ä»¥ä¸‹ä½¿ç”¨ElasticSearch7.3.1åšæ¼”ç¤º</p></blockquote><h3 id="6-1-SpringBooté›†æˆElasticSearch"><a href="#6-1-SpringBooté›†æˆElasticSearch" class="headerlink" title=" 6-1 SpringBooté›†æˆElasticSearch"></a><a href="https://www.imooc.com/video/15758" target="_blank" rel="noopener"> 6-1 SpringBooté›†æˆElasticSearch</a></h3><p>å®æˆ˜æ¼”ç»ƒï¼š</p><ul><li>Spring Booté›†æˆES</li><li>å›¾ä¹¦ä¿¡æ¯ç®¡ç†æ¥å£å¼€å‘</li></ul><p>Pom.xml</p><pre><code class="xml">&lt;dependency&gt;  &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;  &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;  &lt;version&gt;${elasticsearch.version}&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;  &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;  &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;  &lt;version&gt;${elasticsearch.version}&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;  &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;  &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;  &lt;version&gt;${elasticsearch.version}&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;  &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;  &lt;artifactId&gt;elasticsearch-rest-client-sniffer&lt;/artifactId&gt;  &lt;version&gt;${elasticsearch.version}&lt;/version&gt;&lt;/dependency&gt;</code></pre><p>é…ç½®Spring Bean</p><pre><code class="java">@Configurationpublic class ESConfig {    @Bean    public RestHighLevelClient client() throws UnknownHostException {        RestHighLevelClient client = new RestHighLevelClient(                RestClient.builder(                        new HttpHost(&quot;127.0.0.1&quot;, 9200, &quot;http&quot;)));        return client;    }}</code></pre><p>ESController</p><pre><code class="java">@RestController@RequestMapping(&quot;/novel&quot;)public class ESController {  @Autowired  private RestHighLevelClient client;  // todo }</code></pre><p>è¿è¡Œ</p><pre><code class="shell">mvn spring-boot:run</code></pre><h3 id="6-2-æŸ¥è¯¢æ¥å£å¼€å‘"><a href="#6-2-æŸ¥è¯¢æ¥å£å¼€å‘" class="headerlink" title=" 6-2 æŸ¥è¯¢æ¥å£å¼€å‘"></a><a href="https://www.imooc.com/video/15773" target="_blank" rel="noopener"> 6-2 æŸ¥è¯¢æ¥å£å¼€å‘</a></h3><p>æ¥å£å¼€å‘ï¼š</p><ul><li>æ–°å¢å›¾ä¹¦ä¿¡æ¯åŠŸèƒ½å¼€å‘</li><li>ä¿®æ”¹å›¾ä¹¦ä¿¡æ¯åŠŸèƒ½å¼€å‘</li><li>åˆ é™¤åŠŸèƒ½å¼€å‘</li><li>ç»¼åˆæŸ¥è¯¢æ¥å£å¼€å‘</li></ul><pre><code class="java">@GetMapping(&quot;/{id}&quot;)public ResponseEntity get(@PathVariable(name = &quot;id&quot;) String id) {  if (id.isEmpty()) {    return new ResponseEntity(HttpStatus.NOT_FOUND);  }  GetRequest novelRequest = new GetRequest(&quot;novel&quot;, id);  try {    GetResponse novelResponse = this.client.get(novelRequest, RequestOptions.DEFAULT);    if (novelResponse.isExists()) {      System.out.println(novelResponse);      return new ResponseEntity(novelResponse.getSource(), HttpStatus.OK);    }  } catch (IOException e) {    e.printStackTrace();    return new ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR);  }  return new ResponseEntity(HttpStatus.NOT_FOUND);}</code></pre><p>è¿è¡Œï¼š</p><pre><code class="shell">mvn spring-boot:runGET http://127.0.0.1:8080/novel/1</code></pre><h3 id="6-3-å¢åŠ æ¥å£å¼€å‘"><a href="#6-3-å¢åŠ æ¥å£å¼€å‘" class="headerlink" title=" 6-3 å¢åŠ æ¥å£å¼€å‘"></a><a href="https://www.imooc.com/video/15775" target="_blank" rel="noopener"> 6-3 å¢åŠ æ¥å£å¼€å‘</a></h3><pre><code class="java">@PostMapping(&quot;&quot;)public ResponseEntity add(@RequestBody Novel novel) {  try {    Gson gson = new Gson();    Map novelMap = gson.fromJson(gson.toJson(novel), Map.class);    IndexRequest novelRequest = new IndexRequest(&quot;novel&quot;).id(UUID.randomUUID().toString()).source(novelMap);    IndexResponse novelResponse = this.client.index(novelRequest, RequestOptions.DEFAULT);    System.out.println(novelResponse);    return new ResponseEntity(novelResponse.getId(), HttpStatus.OK);  } catch (IOException e) {    e.printStackTrace();    return new ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR);  }}</code></pre><pre><code class="java">@Datapublic class Novel {    private String title;    private String author;    @JsonProperty(value = &quot;word_count&quot;)    private String wordCount;    @JsonProperty(value = &quot;publish_date&quot;)    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)    private Date publishDate;}</code></pre><p>è¿è¡Œ</p><pre><code>POST http://127.0.0.1:8080/novel</code></pre><pre><code class="json">{    &quot;title&quot;: &quot;å¤§è¯è¥¿æ¸¸&quot;,    &quot;author&quot;: &quot;åˆ˜é•‡ä¼Ÿ&quot;,    &quot;word_count&quot;: &quot;1008&quot;,    &quot;publish_date&quot;: &quot;2019-09-08&quot;}</code></pre><h3 id="6-4-åˆ é™¤æ¥å£å¼€å‘"><a href="#6-4-åˆ é™¤æ¥å£å¼€å‘" class="headerlink" title=" 6-4 åˆ é™¤æ¥å£å¼€å‘"></a><a href="https://www.imooc.com/video/15774" target="_blank" rel="noopener"> 6-4 åˆ é™¤æ¥å£å¼€å‘</a></h3><pre><code class="java">@DeleteMapping(&quot;/{id}&quot;)public ResponseEntity delete(@PathVariable(name = &quot;id&quot;) String id) {  DeleteRequest novelRequest = new DeleteRequest(&quot;novel&quot;, id);  try {    DeleteResponse novelResponse = this.client.delete(novelRequest, RequestOptions.DEFAULT);    System.out.println(novelResponse);    return new ResponseEntity(novelResponse.getResult().toString(),HttpStatus.OK);  } catch (IOException e) {    e.printStackTrace();    return new ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR);  }}</code></pre><p>è¿è¡Œ</p><pre><code>DELETE http://127.0.0.1:8080/novel/1</code></pre><h3 id="6-5-æ›´æ–°æ¥å£å¼€å‘"><a href="#6-5-æ›´æ–°æ¥å£å¼€å‘" class="headerlink" title=" 6-5 æ›´æ–°æ¥å£å¼€å‘"></a><a href="https://www.imooc.com/video/15776" target="_blank" rel="noopener"> 6-5 æ›´æ–°æ¥å£å¼€å‘</a></h3><pre><code class="java">@PutMapping(&quot;/{id}&quot;)public ResponseEntity update(@PathVariable(name = &quot;id&quot;) String id, @RequestBody Novel novel) {  try {    Gson gson = new Gson();    Map map = gson.fromJson(gson.toJson(novel), Map.class);    UpdateRequest novelRequest = new UpdateRequest(&quot;novel&quot;, id).doc(map);    UpdateResponse novelResponse = this.client.update(novelRequest, RequestOptions.DEFAULT);    System.out.println(novelResponse);    return new ResponseEntity(novelResponse.getResult().toString(), HttpStatus.OK);  } catch (IOException e) {    e.printStackTrace();    return new ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR);  }}</code></pre><p>è¿è¡Œ</p><pre><code>PUT http://127.0.0.1:8080/novel/1</code></pre><pre><code class="json">{    &quot;title&quot;: &quot;å¤§è¯è¥¿æ¸¸&quot;,    &quot;author&quot;: &quot;åˆ˜é•‡ä¼Ÿ&quot;,    &quot;word_count&quot;: &quot;1008&quot;,    &quot;publish_date&quot;: &quot;2019-09-08&quot;}</code></pre><h3 id="6-6-å¤åˆæŸ¥è¯¢æ¥å£å¼€å‘"><a href="#6-6-å¤åˆæŸ¥è¯¢æ¥å£å¼€å‘" class="headerlink" title=" 6-6 å¤åˆæŸ¥è¯¢æ¥å£å¼€å‘"></a><a href="https://www.imooc.com/video/15777" target="_blank" rel="noopener"> 6-6 å¤åˆæŸ¥è¯¢æ¥å£å¼€å‘</a></h3><pre><code class="java">@GetMapping(&quot;&quot;)public ResponseEntity query(@RequestParam(value = &quot;author&quot;, required = false) String author,                            @RequestParam(value = &quot;title&quot;, required = false) String title,                            @RequestParam(value = &quot;gt_word_count&quot;, defaultValue = &quot;0&quot;) Integer gtWordCount,                            @RequestParam(value = &quot;lt_word_count&quot;, required = false) Integer ltWordCount) {    BoolQueryBuilder boolQueryBuilder = QueryBuilders.boolQuery();    if (author != null) {        boolQueryBuilder.must(QueryBuilders.matchQuery(&quot;author&quot;, author));    }    if (title != null) {        boolQueryBuilder.must(QueryBuilders.matchQuery(&quot;title&quot;, title));    }    RangeQueryBuilder wordCountRangeQuery = QueryBuilders.rangeQuery(&quot;word_count&quot;)            .from(gtWordCount);    if (ltWordCount != null &amp;&amp; 0 &lt; ltWordCount) {        wordCountRangeQuery.to(ltWordCount);    }    boolQueryBuilder.filter(wordCountRangeQuery);    SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder()            .query(boolQueryBuilder)            .from(0)            .size(10);    SearchRequest novelSearchRequest = new SearchRequest(&quot;novel&quot;)            .source(searchSourceBuilder)            .searchType(SearchType.DFS_QUERY_THEN_FETCH);    System.out.println(novelSearchRequest.source());    try {        SearchResponse novelSearchResponse = this.client.search(novelSearchRequest, RequestOptions.DEFAULT);        System.out.println(novelSearchResponse);        ArrayList&lt;Map&lt;String, Object&gt;&gt; result = new ArrayList&lt;&gt;();        novelSearchResponse.getHits().forEach(e -&gt; {            result.add(e.getSourceAsMap());        });        return new ResponseEntity(result, HttpStatus.OK);    } catch (IOException e) {        e.printStackTrace();        return new ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR);    }}</code></pre><h2 id="ç¬¬7ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬7ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬7ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬7ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>è¯¾ç¨‹æ€»ç»“</p></blockquote><h3 id="7-1-è¯¾ç¨‹æ€»ç»“"><a href="#7-1-è¯¾ç¨‹æ€»ç»“" class="headerlink" title=" 7-1 è¯¾ç¨‹æ€»ç»“"></a><a href="https://www.imooc.com/video/15757" target="_blank" rel="noopener"> 7-1 è¯¾ç¨‹æ€»ç»“</a></h3><ol><li><p>ESç®€ä»‹</p><p>ESä½¿ç”¨åœºæ™¯ä¾‹å­</p><p>ESçš„ç«çƒ­ç¨‹åº¦-é‡è¦æ€§</p></li><li><p>å®‰è£…</p><p>ESä½¿ç”¨æ’ä»¶HEAD</p><p>ESåˆ†å¸ƒå¼å®‰è£…ï¼Œå®ç°äº†ESçš„æ¨ªå‘æ‰©å®¹</p></li><li><p>åŸºç¡€æ¦‚å¿µ</p></li><li><p>åŸºæœ¬ç”¨æ³•</p><p>å¢åˆ æŸ¥æ”¹åŠŸèƒ½</p></li><li><p>é«˜çº§æŸ¥è¯¢</p></li><li><p>å®æˆ˜æ¼”ç»ƒ</p><p>å°†ESé›†æˆåˆ°SpringBoot</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>951-MyCATå…¥é—¨åŠåº”ç”¨</title>
      <link href="/imooc/951-MyCat/"/>
      <url>/imooc/951-MyCat/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/951" target="_blank" rel="noopener">https://www.imooc.com/learn/951</a></p><p>ç®€ä»‹ï¼šæœ¬è¯¾ç¨‹ä»å®é™…ç”Ÿäº§ç¯å¢ƒåº”ç”¨MyCATå…¥æ‰‹ï¼Œè®²è§£MyCATçš„åŸºç¡€çŸ¥è¯†å’ŒMyCATçš„åŸºæœ¬åº”ç”¨æ“ä½œï¼Œæœ¬è¯¾ç¨‹çš„ç›®æ ‡å°±æ˜¯â€œçœ‹å¾—æ‡‚ã€å­¦å¾—ä¼šã€åšå¾—å‡ºâ€ï¼Œä¸ºåç»­çš„å­¦ä¹ æ‰“ä¸‹å¤¯å®çš„åŸºç¡€ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>æœ¬ç« èŠ‚ä¸»è¦ä»‹ç»è¯¾ç¨‹ç»“æ„</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç»"></a>1-1 è¯¾ç¨‹ä»‹ç»</h3><p>å­¦ä¹ ç›®çš„ï¼š</p><ul><li>æŒæ¡åœ¨æ•°æ®åº“è´Ÿè½½å¢å¤§æ—¶çš„å¤„ç†æ–¹æ³•</li><li>ç†è§£MyCatçš„åŸºç¡€æ¦‚å¿µï¼ˆåˆ†åº“ã€åˆ†è¡¨ã€é€»è¾‘åº“ã€é€»è¾‘è¡¨ï¼‰</li><li>æŒæ¡MyCatçš„åŸºç¡€é…ç½®å’Œç›‘æ§æ–¹æ³•</li></ul><h2 id="ç¬¬2ç« -MyCATä»‹ç»"><a href="#ç¬¬2ç« -MyCATä»‹ç»" class="headerlink" title="ç¬¬2ç«  MyCATä»‹ç»"></a>ç¬¬2ç«  MyCATä»‹ç»</h2><blockquote><p>æœ¬ç« èŠ‚ä¸»è¦ä»‹ç»MyCATçš„ä¸»è¦åº”ç”¨åœºæ™¯å’Œä¼˜åŠ¿ï¼Œç”¨æ¥å¸®åŠ©å¤§å®¶äº†è§£MyCATå…·ä½“åº”ç”¨åœ¨ä»€ä¹ˆæ ·çš„ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p></blockquote><h3 id="2-1-MyCATå‰ä¸–ä»Šç”Ÿ"><a href="#2-1-MyCATå‰ä¸–ä»Šç”Ÿ" class="headerlink" title="2-1 MyCATå‰ä¸–ä»Šç”Ÿ"></a>2-1 MyCATå‰ä¸–ä»Šç”Ÿ</h3><p>é˜¿é‡Œå¼€æºæ•°æ®åº“ä¸­é—´ä»¶äº§å“ï¼š</p><ul><li><p>2008å¹´ï¼šAmoebaã€‚</p><p>é˜¿é‡Œä½¿ç”¨å¤šå°MySQLæ•°æ®åº“æ¥æ›¿ä»£Oracleæ•°æ®åº“</p><p>å……å½“MySQLåˆ†å¸ƒå¼æ•°æ®åº“ä¸­é—´å±‚ï¼Œä¸»è¦åº”ç”¨åœ¨è®¿é—®å±‚ï¼Œå……å½“åº”ç”¨ç¨‹åºä¸æ•°æ®åº“ä¹‹é—´çš„ä»£ç†</p><p>å…·æœ‰è´Ÿè½½å‡è¡¡ã€é«˜å¯ç”¨ã€SQLè¿‡æ»¤ï¼Œæ”¯æŒå¯¹åç«¯æ•°æ®åº“çš„è¯»å†™åˆ†ç¦»</p></li><li><p>2012å¹´ï¼šCobar</p><p>åº”ç”¨3000+å°æœåŠ¡å™¨çš„é›†ç¾¤è§„æ¨¡</p><p>æ˜å¤©å¯å¤„ç†è¶…è¿‡10äº¿çš„æ•°æ®åº“è®¿é—®</p></li><li><p>2013å¹´ï¼šMyCat</p><p>è§£å†³äº†Cobaråœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹å‡æ­»</p><p>å‰åç«¯çš„â€¦â€¦å¹¶ä¸æ˜¯ç»Ÿä¸€çš„</p></li></ul><h3 id="2-2-MyCATçš„ä¸»è¦åŠŸèƒ½"><a href="#2-2-MyCATçš„ä¸»è¦åŠŸèƒ½" class="headerlink" title="2-2 MyCATçš„ä¸»è¦åŠŸèƒ½"></a>2-2 MyCATçš„ä¸»è¦åŠŸèƒ½</h3><p>MyCatçš„ä¸»è¦ä½œç”¨ï¼š</p><ul><li><p>å®ç°äº†MySQLé€šä¿¡åè®®çš„<strong>åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿä¸­é—´å±‚</strong></p><p>æ•°æ®åº“ä¸­é—´å±‚ï¼šåœ¨æ¶æ„ä¸­çš„ä½ç½®ï¼Œä½äºå‰ç«¯åº”ç”¨å’Œåç«¯æ•°æ®åº“ä¹‹é—´çš„ä¸€ä¸ªåº”ç”¨è½¯ä»¶</p><p>æ•°æ®åº“ä¸­é—´å±‚ï¼šä½œç”¨ï¼Œè¯»å†™åˆ†ç¦»ã€è´Ÿè½½å‡è¡¡ã€æ•°æ®åº“è¿æ¥æ± ï¼ˆç»Ÿä¸€æ§åˆ¶æ•°æ®åº“çš„è¿æ¥æ•°é‡ï¼‰ã€å±è”½åç«¯æ•°æ®åº“çš„å˜æ›´ã€è¿æ¥å¤šç§ç±»å‹æ•°æ®åº“ï¼ˆå¦‚MSSQLã€MongoDBç­‰<strong>åŒ…æ‹¬éå…³ç³»å‹æ•°æ®åº“</strong>ï¼‰</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gief3798j30hm07cq3l.jpg"  width="350" alt="åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿä¸­é—´å±‚"/></li><li><p>å®ç°æ•°æ®åº“çš„è¯»å†™åˆ†ç¦»</p><p>MySQLä¸»ä»å¤åˆ¶é›†ç¾¤ï¼ˆå†™æ“ä½œåœ¨ä¸»æ•°æ®åº“ä¸­æ‰§è¡Œã€è¯»æ“ä½œåœ¨ä»æ•°æ®åº“ä¸­æ‰§è¡Œï¼‰</p><p>ä¸»ä»å¤åˆ¶å®ç°åŸç†</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gieg9chlj307x09x3yo.jpg"  width="200" alt="æ•°æ®åº“çš„è¯»å†™åˆ†ç¦»"/><p>MyCatæ”¯æŒè¯»æ•°æ®åº“çš„è´Ÿè½½å‡è¡¡</p><p>è¿™ç§æƒ…å†µå¤šå‡ºç°åœ¨ä¸€ä¸»å¤šä»çš„æ¶æ„ä¸Šï¼Œå°†è¯»è´Ÿè½½åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šè¿›è¡Œè´Ÿè½½å‡è¡¡</p></li></ul><p>  MyCatæ”¯æŒåç«¯MySQLé«˜å¯ç”¨</p><p>  æ­¤å¤„çš„é«˜å¯ç”¨ä¸åŒäºé€šè¿‡MHAå’Œ3Mæ–¹å¼å¤åˆ¶æ¶æ„æ¥å®ç°çš„é«˜å¯ç”¨ã€‚åœ¨MHAå’Œ3Mæ¶æ„ä¸­ï¼Œå½“ä¸»èŠ‚ç‚¹å®•æœºä¹‹åæ˜¯å¯ä»¥è‡ªåŠ¨ä»å¤šä¸ªä»èŠ‚ç‚¹ä¸­é€‰æ‹©ä¸€ä¸ªæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†å…¶ä»–ä»èŠ‚ç‚¹å¯¹è¿™ä¸ªæ–°çš„ä¸»èŠ‚ç‚¹é‡æ–°è¿›è¡ŒåŒæ­¥ã€‚</p><p>  MyCatå¯¹åç«¯æ•°æ®åº“çš„é«˜å¯ç”¨æ˜¯æŒ‡ï¼Œåœ¨é…ç½®çš„æ—¶å€™ï¼Œé™¤äº†ä¸»èŠ‚ç‚¹ä¹‹å¤–ï¼Œå¯ä»¥æŒ‡å®šä»èŠ‚ç‚¹ï¼Œå®ç°å†™æ“ä½œã€‚å½“ä¸»èŠ‚ç‚¹å®•æœºä¹‹åï¼ŒMyCatä¼šæŠŠå†™çš„SQLè·¯ç”±åˆ°é…ç½®çš„å†™ä»èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”ä¸æ”¯æŒæŠŠå…¶ä»–çš„ä»èŠ‚ç‚¹å¯¹æ–°èŠ‚ç‚¹è¿›è¡Œä¸»ä»åŒæ­¥ã€‚</p><ul><li><p>æ•°æ®åº“å‚ç›´æ‹†åˆ†</p><p>å‚ç›´åˆ‡è›‹ç³•â€¦</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8giegt6poj30jy08h0tk.jpg"  width="400" alt="æ•°æ®åº“å‚ç›´æ‹†åˆ†"/></li><li><p>æ•°æ®åº“æ°´å¹³æ‹†åˆ†ï¼ˆåˆ†åº“ã€åˆ†è¡¨ï¼‰</p><p>æ°´å¹³åˆ‡è›‹ç³•â€¦</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8giefdedqj30ml08g75d.jpg"  width="430" alt="æ•°æ®åº“æ°´å¹³æ‹†åˆ†"/><p>å°†ä¸€ä¸ªæ•°æ®åº“é€šè¿‡ä¸€å®šè§„åˆ™è¿›è¡Œåˆ‡åˆ†æˆå¤šä¸ªæ•°æ®åº“ã€‚æ¯”å¦‚ï¼Œå¯¹userIdå–æ¨¡æ¥è¿›è¡Œåˆ‡åˆ†ï¼Œå°†userè¡¨å‡åŒ€çš„åˆ†åˆ°ä¸‰ä¸ªæ•°æ®åº“ä¸­ï¼ˆä¸‰ä¸ªåº“çš„è¡¨ç»“æ„æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼‰ã€‚</p><p>å‰ç«¯åº”ç”¨é€šè¿‡MyCatä»¥åŠåˆ‡åˆ†è§„åˆ™æ¥å¯¹åˆ‡åˆ†åçš„æ•°æ®åº“è¿›è¡Œè®¿é—®ã€‚</p><p>MyCatç»Ÿä¸€å®ç°äº†åˆ‡åˆ†é€»è¾‘ï¼Œè€Œä¸åŒåœ¨å‰ç«¯åº”ç”¨ä¸­å®ç°åˆ‡åˆ†é€»è¾‘ã€‚</p></li></ul><h3 id="2-3-MyCATçš„ä¸»è¦åŠŸèƒ½"><a href="#2-3-MyCATçš„ä¸»è¦åŠŸèƒ½" class="headerlink" title="2-3 MyCATçš„ä¸»è¦åŠŸèƒ½"></a>2-3 MyCATçš„ä¸»è¦åŠŸèƒ½</h3><p>è§ã€2-2 MyCATçš„ä¸»è¦åŠŸèƒ½ã€‘</p><h3 id="2-4-MyCATçš„ä¸»è¦åŠŸèƒ½"><a href="#2-4-MyCATçš„ä¸»è¦åŠŸèƒ½" class="headerlink" title="2-4 MyCATçš„ä¸»è¦åŠŸèƒ½"></a>2-4 MyCATçš„ä¸»è¦åŠŸèƒ½</h3><p>è§ã€2-2 MyCATçš„ä¸»è¦åŠŸèƒ½ã€‘</p><h3 id="2-5-MyCATçš„åº”ç”¨åœºæ™¯"><a href="#2-5-MyCATçš„åº”ç”¨åœºæ™¯" class="headerlink" title="2-5 MyCATçš„åº”ç”¨åœºæ™¯"></a>2-5 MyCATçš„åº”ç”¨åœºæ™¯</h3><ul><li><p>éœ€è¦è¿›è¡Œè¯»å†™åˆ†ç¦»çš„åœºæ™¯</p><p>åœ¨ä¸€å°æ•°æ®åº“æœåŠ¡å™¨ä¸Šè¿›è¡Œè¯»å†™æ··åˆæ“ä½œæ—¶ï¼Œæ•°æ®åº“è¯»å†™æ€§èƒ½å¤§å¹…ä¸‹é™ï¼Œå¹¶ä¸”è¯»è´Ÿè½½æ˜æ˜¾é«˜äºå†™è´Ÿè½½</p><p>MyCatæ”¯æŒå¤šç§åç«¯MySQLé›†ç¾¤æ–¹æ¡ˆæ¥è¿›è¡Œè¯»å†™åˆ†ç¦»ï¼Œå¦‚ä¸€ä¸»ä¸€ä»ã€ä¸€ä¸»å¤šä»ã€ä¸»ä¸»å¤åˆ¶ã€PXCé›†ç¾¤ç­‰ç­‰</p></li><li><p>éœ€è¦è¿›è¡Œåˆ†åº“åˆ†è¡¨çš„åœºæ™¯ï¼ˆåˆ‡åˆ†ï¼‰</p><p>æœ€å¤§æ”¯æŒå•è¡¨1000äº¿çš„æ“ä½œ</p></li><li><p>å¤šç§Ÿæˆ·åœºæ™¯ï¼ˆè½¯ä»¶æ¶æ„ï¼‰</p><p>åœ¨å¤šç”¨æˆ·çš„ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨å…±åŒçš„æ•°æ®åº“ç³»ç»Ÿçš„ç»„ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ç¡®ä¿å„ä¸ª ç”¨æˆ·ä¹‹é—´å…·æœ‰æ•°æ®éš”ç¦»æ€§ã€‚å¦‚äº‘æœåŠ¡ã€‚</p></li><li><p>æ•°æ®ç»Ÿè®¡ç³»ç»Ÿ</p></li><li><p>HBASEçš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆ</p><p>HBASEæ˜¯åŸºäºHadoopçš„ä¸€ç§åˆ†å¸ƒå¼åˆ—å­˜å‚¨æ•°æ®åº“</p><p>MySQLå…³ç³»å‹æ•°æ®åº“ä¸ºè¡Œå­˜å‚¨</p></li><li><p>éœ€è¦ä½¿ç”¨åŒæ ·çš„æ–¹å¼æŸ¥è¯¢å¤šç§æ•°æ®åº“çš„åœºæ™¯</p><p>MyCatå¯ä»¥åŒæ—¶æ”¯æŒå¤šç§æ•°æ®åº“ï¼Œå¦‚å…³ç³»å‹æ•°æ®åº“å’ŒNoSQLéå…³ç³»å‹æ•°æ®åº“ã€‚MyCatåªå‘åº”ç”¨æä¾›ä¸€ä¸ªIPè®¿é—®åœ°å€ï¼Œè€Œæ•°æ®åº“å­˜å‚¨æ–¹å¼çš„å®ç°åˆ™å¯ä»¥ä½¿ç”¨å„ç§æ–¹æ¡ˆã€‚</p></li></ul><h3 id="2-6-MyCATçš„ä¼˜åŠ¿"><a href="#2-6-MyCATçš„ä¼˜åŠ¿" class="headerlink" title="2-6 MyCATçš„ä¼˜åŠ¿"></a>2-6 MyCATçš„ä¼˜åŠ¿</h3><ul><li>åŸºäºé˜¿é‡Œçš„Cobarç³»ç»Ÿå¼€å‘</li><li>å¼€å‘ç¤¾åŒºæ´»è·ƒ</li><li>å®Œå…¨å¼€æºå¯ä»¥è‡ªå®šä¹‰å¼€å‘</li><li>æ”¯æŒå¤šç§å…³ç³»å‹åŠNoSQLæ•°æ®åº“</li><li>ä½¿ç”¨JAVAå¼€å‘ï¼Œå¯ä»¥éƒ¨ç½²åœ¨å¤šç§ç³»ç»Ÿä¸Šã€‚å»ºè®®éƒ¨ç½²åœ¨Linux</li><li>å…·æœ‰åœ¨å¤šç§è¡Œä¸šå’Œé¡¹ç›®ä¸­åº”ç”¨çš„æˆåŠŸæ¡ˆä¾‹</li></ul><h2 id="ç¬¬3ç« -MyCATåŸºç¡€"><a href="#ç¬¬3ç« -MyCATåŸºç¡€" class="headerlink" title="ç¬¬3ç«  MyCATåŸºç¡€"></a>ç¬¬3ç«  MyCATåŸºç¡€</h2><blockquote><p>æœ¬ç« èŠ‚ä¸»è¦è®²è§£MyCATçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬MyCATçš„å®‰è£…ï¼Œå¯åŠ¨é…ç½®å’Œåº”ç”¨ç­‰ã€‚é€šè¿‡è€å¸ˆé€»è¾‘æ¸…æ™°çš„è®²è§£ï¼Œè®©å¤§å®¶ç†è§£å¹¶æŒæ¡MyCATåœ¨å®æˆ˜ä¸­çš„åŸºæœ¬åº”ç”¨ã€‚</p></blockquote><h3 id="3-1-MyCATçš„åŸºæœ¬æ¦‚å¿µ"><a href="#3-1-MyCATçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3-1 MyCATçš„åŸºæœ¬æ¦‚å¿µ"></a>3-1 MyCATçš„åŸºæœ¬æ¦‚å¿µ</h3><ul><li><p>MYCATä¸­çš„æ•°æ®åº“ä¸€é€»è¾‘åº“</p><p>user_dbæ˜¯é€»è¾‘æ•°æ®åº“ï¼›db01ã€db02ã€db03æ˜¯ç‰©ç†æ•°æ®åº“</p><p>MyCatä¸­åªä¿å­˜é€»è¾‘åº“çš„å®šä¹‰ï¼Œä¸ä¿å­˜æ•°æ®ï¼Œå…·ä½“çš„æ•°æ®å­˜å‚¨åœ¨ç‰©ç†æ•°æ®åº“ä¸­</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gieftwvlj30j908k0tq.jpg"  width="430" alt="MYCATä¸­çš„æ•°æ®åº“ä¸€é€»è¾‘åº“"/></li><li><p>MYCATä¸­çš„æ•°æ®åº“ä¸€é€»è¾‘è¡¨</p><p>å¯ä»¥ç”¨æ•°æ®åº“ä¸­è§†å›¾çš„æ¦‚å¿µç†è§£</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8giehbahcj30fo07paam.jpg"  width="430" alt="MYCATä¸­çš„æ•°æ®åº“ä¸€é€»è¾‘è¡¨"/></li></ul><h3 id="3-2-MyCATçš„å…³é”®ç‰¹æ€§"><a href="#3-2-MyCATçš„å…³é”®ç‰¹æ€§" class="headerlink" title="3-2 MyCATçš„å…³é”®ç‰¹æ€§"></a>3-2 MyCATçš„å…³é”®ç‰¹æ€§</h3><ul><li><p>æ”¯æŒ<strong>SQL92æ ‡å‡†</strong></p></li><li><p>æ”¯æŒMySQLé›†ç¾¤</p></li><li><p>æ”¯æŒJDBCè¿æ¥æ•°æ®åº“</p></li><li><p>æ”¯æŒNOSQLæ•°æ®åº“</p></li><li><p>æ”¯æŒ<strong>è‡ªåŠ¨æ•…éšœåˆ‡æ¢</strong>ï¼Œé«˜å¯ç”¨æ€§</p></li><li><p>æ”¯æŒ<strong>è¯»å†™åˆ†ç¦»</strong></p></li><li><p>æ”¯æŒå…¨å±€è¡¨</p><p>å°†è¾ƒå°‘å˜åŠ¨çš„æ•°æ®ç»Ÿä¸€å­˜å‚¨èµ·æ¥</p></li><li><p>æ”¯æŒç‹¬æœ‰çš„åŸºäºERå…³ç³»çš„åˆ†ç‰‡ç­–ç•¥</p><p>æ ¹æ®å®ä½“å…³ç³»ERæ¨¡å‹ï¼Œå°†ç›¸å…³çš„è¡¨å­˜å‚¨åœ¨ä¸€ä¸ªåˆ†ç‰‡ä¸Šï¼Œé¿å…è°ƒç”¨æ—¶è·¨åˆ†ç‰‡</p></li><li><p>æ”¯æŒä¸€è‡´æ€§HASHåˆ†ç‰‡</p></li><li><p>å¤šå¹³å°æ”¯æŒï¼Œéƒ¨ç½²ç®€å•æ–¹ä¾¿</p></li><li><p>æ”¯æŒ<strong>å…¨å±€åºåˆ—å·</strong></p><p>å°†å¤šä¸ªæ•°æ®åº“è¡¨çš„è‡ªå¢IDç»Ÿä¸€èµ·æ¥ï¼Œä¸å‡ºç°é‡å¤ID</p></li></ul><h3 id="3-3-å®‰è£…MyCAT"><a href="#3-3-å®‰è£…MyCAT" class="headerlink" title="3-3 å®‰è£…MyCAT"></a>3-3 å®‰è£…MyCAT</h3><ol><li><p>å®‰è£…Javaç¯å¢ƒ</p></li><li><p>ä¸‹è½½MyCat</p></li><li><p>æ–°å»ºMyCatç”¨æˆ·</p><p>åœ¨Linuxç³»ç»Ÿç¯å¢ƒä¸‹ï¼Œæœ€å¥½ä¸ºæ¯ä¸€æ¬¾è½¯ä»¶éƒ½ç‹¬ç«‹çš„å»ºç«‹ä¸€ä¸ªè¿è¡Œè´¦å·ã€‚æ—¢å®‰å…¨åˆå¯ä»¥å¯¹è´¦å·è¿›è¡Œèµ„æºçš„é™åˆ¶</p></li><li><p>è§£å‹MyCat</p></li><li><p>é…ç½®ç¯å¢ƒå˜é‡</p><p>Javaçš„HOMEç›®å½•</p><p>Javaçš„CLASSPATHç›®å½•</p><p>MyCatçš„HOMEç›®å½•</p></li><li><p>å¯åŠ¨MyCat</p></li></ol><h3 id="3-4-MyCATå®‰è£…"><a href="#3-4-MyCATå®‰è£…" class="headerlink" title="3-4 MyCATå®‰è£…"></a>3-4 MyCATå®‰è£…</h3><pre><code class="shell">java -versionyum install java-1.7.0-openjdkwget http://dl.mycat.io/1.6.7.1/Mycat-server-1.6.7.1-release-20190627191042-linux.tar.gzadduser mycat # å»ºç«‹mycatç”¨æˆ·tar -xzvf Mycat-server-1.6.7.1-release-20190627191042-linux.tar.gz # è§£å‹MyCatå®‰è£…æ–‡ä»¶mv mycat /usr/local/ # ç§»åŠ¨MyCatå®‰è£…æ–‡ä»¶åˆ°/usr/local/chown mycat:mycat -R mycat # #æ”¹å˜å½“å‰æ–‡ä»¶å¤¹å±ä¸»å’Œå±ç»„vi /etc/profile # é…ç½®ç¯å¢ƒå˜é‡export JAVA_HOME=/usrexport MYCAT_HOME=/usr/local/mycat</code></pre><p>Linuxç³»ç»Ÿå®‰è£…ä»»ä½•ä¸€ç§è½¯ä»¶æœ€å¥½éƒ½è¦æ–°å»ºä¸€ä¸ªç‹¬ç«‹ç”¨æˆ·ï¼Œä¸è¦ç”¨rootè¿è¡Œï¼Œä¸ç„¶ä¼šäº§ç”Ÿä¸å®‰å…¨çš„å› ç´ </p><h3 id="3-5-MyCATå¯åŠ¨-03-48"><a href="#3-5-MyCATå¯åŠ¨-03-48" class="headerlink" title="3-5 MyCATå¯åŠ¨ (03:48)"></a>3-5 MyCATå¯åŠ¨ (03:48)</h3><p>MyCatä¸¤ç§å¯åŠ¨æ–¹å¼ï¼š</p><ol><li><p>åŸºäºè„šæœ¬çš„å¯åŠ¨æ–¹å¼</p><p>å¯åŠ¨è„šæœ¬ï¼š</p><pre><code class="shell">$MYCAT_HOME/bin/startup_nowrap.sh==&gt;/usr/local/mycat/bin/startup_nowrap.sh</code></pre><p>è„šæœ¬å‚æ•°ï¼š</p><p>å½“è¿è¡ŒMyCatæ—¶ï¼ŒæŠ¥å†…å­˜ä¸è¶³æˆ–è€…æ˜¯å†…å­˜æº¢å‡ºå¼‚å¸¸</p><pre><code class="shell">JAVA_OPTS=&quot;-server -Xms1G -Xmx2G -XX:MaxPermSize=64M -XX:+AggressiveOpts -XX:MaxDirectMemorySize=2G&quot;</code></pre><pre><code class="shell"># åˆ‡æ¢åˆ°mycatç”¨æˆ·su - mycatcd /usr/local/mycat# é€šè¿‡è„šæœ¬å¯åŠ¨MyCatbin/startup_nowrap.sh# æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ps -ef# æŸ¥çœ‹æ—¥å¿—cd /usr/local/mycat/logsmore mycat.log</code></pre></li><li><p>binä¸‹å·²æ‰“åŒ…çš„mycat</p></li></ol><h3 id="3-6-MyCATé…ç½®æ–‡ä»¶"><a href="#3-6-MyCATé…ç½®æ–‡ä»¶" class="headerlink" title="3-6 MyCATé…ç½®æ–‡ä»¶"></a>3-6 MyCATé…ç½®æ–‡ä»¶</h3><ul><li>schema.xmlç”¨äºé…ç½®é€»è¾‘åº“è¡¨åŠæ•°æ®èŠ‚ç‚¹ï¼Œæ•°æ®æº</li><li>rule.xmlç”¨äºé…ç½®è¡¨çš„åˆ†ç‰‡è§„åˆ™</li><li>server.xmlç”¨äºé…ç½®æœåŠ¡å™¨æƒé™</li></ul><p>schema.xmlæ–‡ä»¶</p><ul><li><p>å®šä¹‰é€»è¾‘åº“è¡¨</p><p>é€»è¾‘è¡¨æ˜¯è¦ä¾èµ–äºé€»è¾‘åº“å­˜åœ¨çš„ã€‚</p><p>å¦‚æœæ•°æ®åº“ä¸éœ€è¦è¿›è¡Œåˆ†ç‰‡ï¼Œåªè¿›è¡Œè¯»å†™åˆ†ç¦»ï¼Œæ­¤æ—¶ä¸ç”¨é…ç½®<table>æ ‡ç­¾ï¼Œè€Œåªä¿ç•™<schema>æ ‡ç­¾</p><pre><code class="xml">&lt;schema&gt;    &lt;table&gt;    &lt;/table&gt;&lt;/schema&gt;</code></pre></li><li><p>å®šä¹‰æ•°æ®èŠ‚ç‚¹</p><p>å®šä¹‰MyCatçš„åˆ†ç‰‡èŠ‚ç‚¹ï¼Œä¸€ä¸ªæ•°æ®èŠ‚ç‚¹å°±ä»£è¡¨ç€ä¸€ä¸ªç‹¬ç«‹çš„åˆ†ç‰‡ã€‚å…¶å†…å®¹åŒ…æ‹¬æ•°æ®åº“èŠ‚ç‚¹çš„åå­—ã€æ•°æ®æºçœŸå®ç‰©ç†æ•°æ®åº“çš„åç§°</p><pre><code class="xml">&lt;dataNode&gt;&lt;/dataNode&gt;</code></pre></li><li><p>å®šä¹‰æ•°æ®èŠ‚ç‚¹çš„ç‰©ç†æ•°æ®æº</p><p>å®šä¹‰äº†ä¸€ç»„ä¸»æœºèŠ‚ç‚¹ï¼Œæ˜¯çœŸå®ç‰©ç†æ•°æ®åº“çš„å®ä¾‹ã€‚</p><p>ä¸€ä¸ª<dataHost>æ ‡ç­¾æ‰€æŒ‡å®šçš„ä¸»æœºå°±æ˜¯ä¸€ç»„çœŸå®çš„MySQLæ•°æ®åº“é›†ç¾¤</p><p>è¯»å†™åˆ†ç¦»é…ç½®ã€å¿ƒè·³æ£€æµ‹ã€‚ã€‚ã€‚</p><pre><code class="xml">&lt;dataHost&gt;&lt;/dataHost&gt;</code></pre></li></ul><p>rule.xmlæ–‡ä»¶</p><ul><li><p>å®šä¹‰è¡¨ä½¿ç”¨çš„åˆ†ç‰‡è§„åˆ™</p><pre><code class="xml">&lt;tableRule name=&quot;&quot;&gt;&lt;/tableRule&gt;</code></pre></li><li><p>å®šä¹‰åˆ†ç‰‡ç®—æ³•</p><pre><code class="xml">&lt;function name=&quot;&quot;&gt;&lt;/function&gt;</code></pre></li></ul><p>server.xmlæ–‡ä»¶</p><ul><li><p>ç”¨äºå®šä¹‰ç³»ç»Ÿé…ç½®</p><p>ç³»ç»Ÿç«¯å£å·ã€ç³»ç»Ÿä½¿ç”¨å†…å­˜å¤§å°ã€timeoutæ—¶é—´</p><pre><code class="xml">&lt;system&gt;    &lt;property name=&quot;&quot;&gt;    &lt;/property&gt;&lt;/system&gt;</code></pre></li><li><p>ç”¨äºå®šä¹‰è¿æ¥MyCatçš„ç”¨æˆ·ä¿¡æ¯</p><p>ç”¨æˆ·åå­—ã€å¯†ç </p><p>åªæœ‰åœ¨server.xmlä¸­å­˜åœ¨çš„ç”¨æˆ·æ‰å¯ä»¥é€šè¿‡MyCatè¿æ¥åˆ°åç«¯æ•°æ®åº“</p><pre><code class="xml">&lt;user&gt;&lt;/user&gt;</code></pre></li></ul><h3 id="3-7-MyCATè¯»å†™åˆ†ç¦»"><a href="#3-7-MyCATè¯»å†™åˆ†ç¦»" class="headerlink" title="3-7 MyCATè¯»å†™åˆ†ç¦»"></a>3-7 MyCATè¯»å†™åˆ†ç¦»</h3><p>ä¸‰å°æœåŠ¡å™¨ï¼šMyCatæœåŠ¡å™¨ï¼ˆnode1ï¼‰ã€ä¸¤å°MySQLæœåŠ¡å™¨ï¼ˆMaster-node2ã€Slave-node3ï¼‰</p><p>æ˜¾ç¤ºxmlæ–‡ä»¶ï¼š</p><pre><code class="shell">ls -lh *xml</code></pre><p>MyCatå®ç°æ•°æ®åº“è¯»å†™åˆ†ç¦»åªéœ€é…ç½®ä¸¤ä¸ªæ–‡ä»¶ï¼šschema.xmlã€server.xml</p><pre><code class="xml">&lt;!-- /usr/local/mycat/conf/schema.xml --&gt;&lt;mycat:schema&gt;    &lt;!-- é…ç½®é€»è¾‘åº“USERDB --&gt;    &lt;schema name=&quot;USERDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dn1&quot;&gt;&lt;/schema&gt;    &lt;!-- å®šä¹‰æ•°æ®èŠ‚ç‚¹node1 --&gt;    &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;node1&quot; database=&quot;user_db&quot; /&gt;    &lt;!-- å®šä¹‰æ•°æ®åº“é›†ç¾¤ --&gt;    &lt;dataHost name=&quot;node1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; blance=&quot;1&quot; writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot; slaveThreshold=&quot;100&quot;&gt;        &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;        &lt;writeHost host=&quot;10.102.13.3&quot; url=&quot;10.102.13.3:3306&quot; user=&quot;im_user&quot; password=&quot;123456&quot;&gt;            &lt;readHost host=&quot;10.102.13.4&quot; url=&quot;10.102.13.4:3306&quot; user=&quot;im_user&quot; password=&quot;123456&quot; /&gt;        &lt;/writeHost&gt;        &lt;writeHost host=&quot;10.102.13.4&quot; url=&quot;10.102.13.4:3306&quot; user=&quot;im_user&quot; password=&quot;123456&quot; /&gt;    &lt;/dataHost&gt;&lt;/mycat:schema&gt;</code></pre><p>æ³¨ï¼š</p><ul><li><p><code>sqlMaxLimit=&quot;100&quot;</code>æ¯ä¸€æ¡SQLåªè¿”å›100è¡Œè®°å½•</p><p>å¦‚æœæ•°æ®åº“è¿›è¡Œäº†åˆ†ç‰‡æ“ä½œï¼ŒæŸ¥è¯¢æ•°æ®ä¼šä»æ‰€æœ‰åˆ†ç‰‡ä¸­æŸ¥è¯¢ã€‚æ­¤æ—¶ä¼šå¯¹ç³»ç»Ÿé€ æˆè´Ÿè½½</p></li><li><p><code>dataNode=&quot;dn1&quot;</code>å®šä¹‰äº†æ•°æ®èŠ‚ç‚¹dn1</p></li><li><p><code>blance=&quot;1&quot;</code>å®šä¹‰äº†æ˜¯å¦å¯¹åç«¯å¤šä¸ªä»æ•°æ®åº“è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚1æ˜¯0å¦</p></li><li><p><code>&lt;heartbeat&gt;</code>å®šä¹‰äº†å¦‚ä½•ç›‘æµ‹åç«¯æ•°æ®åº“æ˜¯å¦å¥åº·</p></li><li><p><code>user=&quot;im_user&quot; password=&quot;123456&quot;</code>å®šä¹‰äº†åç«¯ç‰©ç†æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç </p></li></ul><pre><code class="xml">&lt;!-- /usr/local/mycat/conf/server.xml --&gt;&lt;mycat:server&gt;    &lt;system&gt;        &lt;property name=&quot;serverPort&quot;&gt;3306&lt;/property&gt;        &lt;property name=&quot;managerPort&quot;&gt;9066&lt;/property&gt;        &lt;property name=&quot;nonePasswordLogin&quot;&gt;0&lt;/property&gt;        &lt;property name=&quot;useHandshakeV10&quot;&gt;1&lt;/property&gt;        &lt;property name=&quot;useSqlStat&quot;&gt;0&lt;/property&gt;        &lt;property name=&quot;useGTob]eTablecheck&quot;&gt;0&lt;/property&gt;        &lt;property name=&quot;sequnceHandlerType&quot;&gt;2&lt;/property&gt;        &lt;property name=&quot;subqueryRelationshipcheck&quot;&gt; fal se&lt;/property&gt;        &lt;property name=&quot;processorBufferPoolType&quot;&gt;0&lt;/property&gt;        &lt;property name=&quot;handlepistributedTransactions&quot;&gt;0&lt;/property&gt;        &lt;property name=&quot;useoffHeapForMerge&quot;&gt;1&lt;/property&gt;        &lt;property name=&quot;memoryPageSize&quot;&gt;64k&lt;/property&gt;        &lt;property name=&quot;spi11sFileBuffersize&quot;&gt;1k&lt;/property&gt;        &lt;property name=&quot;usestreamoutput&quot;&gt;0&lt;/property&gt;        &lt;property name=&quot;systemReserveMemorysize&quot;&gt;384m&lt;/property&gt;        &lt;property name=&quot;usezkSwitch&quot;&gt;false&lt;/property&gt;    &lt;/system&gt;    &lt;user name=&quot;root&quot; defaultAccount=&quot;true&quot;&gt;        &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt;        &lt;property name=&quot;schemas&quot;&gt;USERDB&lt;/property&gt;    &lt;/user&gt;    &lt;user name=&quot;mc_user&quot;&gt;        &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt;        &lt;property name=&quot;schemas&quot;&gt;USERDB&lt;/property&gt;        &lt;property name=&quot;readOnly&quot;&gt;true&lt;/property&gt;    &lt;/user&gt;&lt;/mycat:server&gt;</code></pre><p>æ³¨ï¼š</p><ul><li><code>&lt;user&gt;</code>å®šä¹‰çš„ç”¨æˆ·åœ¨åç«¯æ•°æ®åº“ä¸­å®é™…å¹¶ä¸å­˜åœ¨</li></ul><p>é‡å¯MyCatï¼š</p><pre><code class="shell"># /usr/local/mycatbin/mycat stopbin/mycat start</code></pre><p>é€šè¿‡MyCatå†™æ•°æ®ï¼Œç„¶åå†è¯»å–ï¼š</p><pre><code class="python"># /root/script/init_data.pyimport MySQLdbfrom faker import Fakertry:    conn = MysQLdb.connect(host=&#39;127.0.0.1&#39;, user=&#39;root&#39;,passwd=&#39;123456&#39;, db=&#39;USERDB&#39;, charset=&quot;utf8&quot;)    cursor=conn. cursor(MySQLdb.cursors.Dictcursor)except MysQLdb.Error, e:    print &quot;Error %d: %s \n&quot; % (e.args[0],e. args[1])try:    faker=Faker()    # write data    for i in range(0, 10):        InSQL=&quot;&quot;&quot;            insert into customer_login(login_name, password, user_stats) VALUES(&#39;%s&#39;, md5(&#39;%s&#39;), 1)        &quot;&quot;&quot;%(faker.name(), faker.ean13())        print InSQL        cursor.execute(InSQL)        cursor.execute(&#39;commit&#39;)    # read data    for i in range(0, 10):        sQLstr=&quot;&quot;&quot;            select login_name from customer_login where customer_id = %d;        &quot;&quot;&quot;%(i)        cursor.execute(SQLstr)        resuit = cursor. fetchall()        print resultexcept MysQLdb.Error,e:    print &quot;Error %d: %s \n&quot; % (e.args[0], e.args[1])finally    cursor.close()    conn.close()</code></pre><p>æ‰§è¡Œç¨‹åºï¼š</p><pre><code class="shell"># /root/scriptpython init_data.py</code></pre><p>æŸ¥çœ‹MyCatæ—¥å¿—ï¼š</p><pre><code class="shell">more /usr/local/mycay/logs/mycat.log</code></pre><p>è·Ÿè¸ªæ—¥å¿—æ–‡ä»¶ï¼š</p><pre><code class="shell">tailf /usr/local/mycay/logs/mycat.log</code></pre><h3 id="3-8-MyCATè¯»å†™åˆ†ç¦»æ€»ç»“"><a href="#3-8-MyCATè¯»å†™åˆ†ç¦»æ€»ç»“" class="headerlink" title="3-8 MyCATè¯»å†™åˆ†ç¦»æ€»ç»“"></a>3-8 MyCATè¯»å†™åˆ†ç¦»æ€»ç»“</h3><p>æ­¥éª¤ï¼š</p><ol><li><p>ä¿®æ”¹schema.xmlæ–‡ä»¶ï¼ˆ/usr/local/mycat/conf/schema.xmlï¼‰</p><p>å¯¹åç«¯æ•°æ®åº“çš„é€»è¾‘åº“ã€æ•°æ®èŠ‚ç‚¹ã€æ•°æ®ä¸»æœºèŠ‚ç‚¹è¿›è¡Œé…ç½®</p><p>ç”±äºæœªè¿›è¡Œåˆ†ç‰‡æ“ä½œï¼Œåªéœ€é…ç½®<schema>æ ‡ç­¾ï¼Œæ— éœ€é…ç½®<table>æ ‡ç­¾</p></li><li><p>ä¿®æ”¹server.xmlæ–‡ä»¶ï¼ˆ/usr/local/mycat/conf/server.xmlï¼‰</p><p>MyCatå‘åº”ç”¨ç¨‹åºæä¾›çš„æœåŠ¡ç«¯å£ã€MyCatç”¨æˆ·</p></li></ol><h3 id="3-9-MyCATç®¡ç†"><a href="#3-9-MyCATç®¡ç†" class="headerlink" title="3-9 MyCATç®¡ç†"></a>3-9 MyCATç®¡ç†</h3><p>ä½¿ç”¨MySQLå®¢æˆ·ç«¯ç®¡ç†MyCat</p><ul><li>ç®¡ç†ç«¯å£ï¼š<code>&lt;property name=&quot;managerPort&quot;&gt;9066&lt;/property&gt;</code></li><li>å‘½ä»¤ï¼š<code>mysql -uroot -p123456 -h127.0.0.1 -P9066</code></li><li>æŸ¥çœ‹ç®¡ç†å‘½ä»¤ï¼š<code>show @@help</code></li></ul><p>å¸¸ç”¨ç®¡ç†å‘½ä»¤</p><ul><li><p>åŠ¨æ€åŠ è½½é…ç½®æ–‡ä»¶ï¼š<code>reload @@config</code></p><p>åŠ¨æ€åŠ è½½MyCaté…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½èƒ½å¤Ÿé€šè¿‡è¯¥å‘½ä»¤åŠ è½½çš„ï¼ŒæŸäº›è¿˜éœ€è¦å¯¹MyCatè¿›è¡Œé‡å¯ï¼ŒåæœŸè¿˜ä¼šæœ‰MyCaté«˜å¯ç”¨æ–¹æ¡ˆé¿å…é‡å¯å¯¹åº”ç”¨ç¨‹åºçš„å½±å“ã€‚</p></li><li><p>æŸ¥çœ‹æ•°æ®èŠ‚ç‚¹ï¼š<code>show @@datanode</code></p><p>æŸ¥çœ‹MyCatä¸­é…ç½®çš„èŠ‚ç‚¹è¯¦æƒ…</p></li><li><p>æŸ¥çœ‹åç«¯æ•°æ®åº“ï¼š<code>show @@datasource</code></p><p>æŸ¥çœ‹MyCatåç«¯çš„ç‰©ç†æ•°æ®åº“çš„è¯¦æƒ…</p></li><li><p>æŸ¥çœ‹åç«¯æ•°æ®åº“è¿æ¥ï¼š<code>show @@backend</code></p><p>æŸ¥çœ‹MyCatåç«¯çš„æ•°æ®åº“çš„è¿æ¥æƒ…å†µ</p></li></ul><h2 id="ç¬¬4ç« -MyCATæ—¥å¿—åˆ†æ"><a href="#ç¬¬4ç« -MyCATæ—¥å¿—åˆ†æ" class="headerlink" title="ç¬¬4ç«  MyCATæ—¥å¿—åˆ†æ"></a>ç¬¬4ç«  MyCATæ—¥å¿—åˆ†æ</h2><blockquote><p>é€šè¿‡å­¦ä¹ MyCATæ—¥å¿—ï¼ŒæŒæ¡MyCATè¿è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ä»¥åŠåº”ç”¨æ—¥å¿—å¯¹MyCATè¿è¡Œæ—¶çš„é”™è¯¯è¿›è¡Œè·Ÿè¸ªå¤„ç†ã€‚</p></blockquote><h3 id="4-1-MyCATæ—¥å¿—"><a href="#4-1-MyCATæ—¥å¿—" class="headerlink" title="4-1 MyCATæ—¥å¿—"></a>4-1 MyCATæ—¥å¿—</h3><p>é…ç½®MyCatæ—¥å¿—ï¼š</p><ul><li><p>MyCatä½¿ç”¨Apache log4jé¡¹ç›®ç®¡ç†æ—¥å¿—</p></li><li><p>MyCaté…ç½®æ–‡ä»¶ï¼šconf/log4j2.xml</p></li></ul><p>log4j2.xmlä½œç”¨</p><ul><li><p>é…ç½®æ—¥å¿—æ ¼å¼</p><pre><code class="xml">&lt;PatternLayout&gt;    &lt;Pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} %5p [%t] - %m%n&lt;/Pattern&gt;&lt;/PatternLayout&gt;</code></pre><pre><code class="log">2019-07-07 15:22:02.485 DEBUG [Timer1] - con query sql:select user() to con:MySQLConnection</code></pre><p>æ³¨ï¼š</p><ul><li>%dï¼šå®šä¹‰æ—¶é—´ã€‚å¦‚ï¼š2019-07-07 15:22:02.485</li><li>%5pï¼šæ—¥å¿—çº§åˆ«ã€‚å¦‚ï¼šDEBUG</li><li>%tï¼šçº¿ç¨‹ä¿¡æ¯ã€‚å¦‚ï¼š[Timer1]</li><li>%mï¼šä»£ç æç¤ºä¿¡æ¯ã€‚å¦‚ï¼šcon query sql:select user() to con:MySQLConnection</li><li>%nï¼šå›è½¦ç¬¦</li></ul></li><li><p>é…ç½®æ—¥å¿—çº§åˆ«</p><ul><li><p><code>&lt;asyncRoot level=&quot;info&quot; includeLocation=&quot;true&quot; /&gt;</code></p></li><li><p>ALL &lt; Trace &lt; Debug &lt; Info &lt; Warn &lt; Error &lt; Fatal &lt; OFF</p></li><li><p>æ³¨ï¼š</p><ul><li>ä¸€èˆ¬è®¾ç½®Debugæ¨¡å¼ï¼Œæœ€å¼ºä¹Ÿå°±æ˜¯Infoç±»å‹</li></ul></li></ul></li></ul><h3 id="4-2-MyCATæ—¥å¿—"><a href="#4-2-MyCATæ—¥å¿—" class="headerlink" title="4-2 MyCATæ—¥å¿—"></a>4-2 MyCATæ—¥å¿—</h3><ol><li><p>MyCatå¯åŠ¨è¿‡ç¨‹ä¸­è¾“å‡ºçš„æ—¥å¿—</p><pre><code class="log">10:45:06.377 INFO [ WrapperSimpleAppMain]-total resouces of dataHost nodel is:310:45:06.389 INFO [ WrapperSimpleAppMain]-create layer cache pool TableID2DataNodeCache of type encache, default cache size 10000, default expire seconds1800010:45:06.391 INFO [ WrapperSimpleAppMain]-create child Cache: TESTDB_ORDERS for layered cache TableID2DataNodeCache, size 50000, expire seconds 1800010:45:06.523 DEBUG [ WrappersimpleAppMain]-Configuring ehcache from ehcache. xml found in the classpath: file:/usr/1ocal/mycat/conf/ehcache. xml10:45:06.525 DEBUG [ WrappersimpleAppMain]-Configuring ehcache from URL: file:/usr/1ocal/mycat/conf/ehcache. xmll10:45:06.525 DEBUG [ WrappersimpleAppMain]-Configuring ehcache from InputStream10:45:06.652 DEBUG [ WrapperSimpleAppMain]-Ignoring ehcache attribute xmlns: mycat10:45:06.653 DEBUG [ WrapperSimpleAppMain]-Ignoring ehcache attribute xmlns: xsi10:45:06.653 DEBUG [ WrapperSimpleAppMain]-Ignoring ehcache attribute maxEntriesLocalHeap10:45:06.656 DEBUG [ WrapperSimpleAppMain]-Ignoring ehcache attribute xsi: noNamespaceSchemalocation10:45:06.689 DEBUG [ WrappersimpleAppMain]-Creating new CacheManager with default config10:45:06.723 DEBUG [ WrapperSimpleAppMain]-propertiesstring is null.10:45:06.812 DEBUG[ WrapperSimpleAppMain]-Cacheuriter factory not configured. Skipping...10:45:06.812 DEBUG [ WrappersimpleAppMain]-Initialized net. sf. ehcache. store. NotifyingMemoryStore for SQLRouteCache10:45:06.813 DEBUG [ WrappersimpleAppMain]-Initialised cache: SQLRouteCache10:45:06.828 INFO [ WrappersimpleAppMain]-dyna class load from./catlet, and auto check for class file modified every 60 seconds10:45:06.830 DEBUG [ WrappersimpleAppMain]-baseDir./tmlogs/10:45:06.830 DEBUG[ WrappersimpleAppMain]-baseName tmlog</code></pre><p>æ³¨ï¼š</p><ul><li>total resouces of dataHost nodel is:3ã€‚3ä¸ªä¸»æœºèŠ‚ç‚¹</li></ul></li><li><p>MyCatçº¿ç¨‹æ•°</p><pre><code class="log">10:45:06.875 INFO[ WrapperslimpleAppMain]-MyCat is ready to startup.â€¦.10:45:06.875 INFO [ WrappersimpleAppMain]-Startup processors..., total processors:48, aio thread pool size:96each process allocated socket buffer pool bytes,a page size:2097152 a page&#39;s chunk number(Pagesize/Chunksize) is:512buffer page&#39;s number is:960</code></pre><p>æ³¨ï¼š</p><ul><li>total processors:48ã€‚çº¿ç¨‹æ•°ä¸º48ï¼Œé»˜è®¤ä¸ºçº¿ç¨‹æ•°ç­‰äºCPUæ ¸æ•°ã€‚</li><li>aio thread pool size:96ã€‚aioè¿›ç¨‹æ± æ•°é‡ä¸ºCPUæ ¸æ•°çš„ä¸¤å€</li></ul></li><li><p>server.xmlä¸­é…ç½®MyCatçš„å¯åŠ¨å‚æ•°</p><pre><code class="log">10:45:06.875 INFO[ WrapperSimpleAppMain]-sysconfig params: Systemconfig[processorBufferLocalPercent=100,frontSocketSoRcvbuf=1048576,frontSocketSoSndbuf=4194304,backSocketSoRcvbuf=4194384,backSocketSosndbuf=1048576,frontSocketNoDelay=1,backSocketNoDelay=1,maxStringLiteralLength=65535,frontwriteQueueSize=2048,bindIp=0.0.0.0,serverPort=3306,managerPort=9066,charset=utf8,processors=48,processorExecutor=96,timerExecutor=2,managerExecutor=2,idleTimeout=1800000,catletC1assCheckSeconds=60,sqlExecuteTimeout=300,processorCheckPeriod=1000,dataNodeIdleCheckPeriod=300000,dataNodeHeartbeatPeriod=10000,clusterHeartbeatUser=HEARTBEAT_USER_,clusterHeartbeatPass=_HEARTBEAT_PASS_,clusterHeartbeatPeriod=5000,clusterHeartbeatTimeout=10000,clusterHeartbeatRetry=10,txIsolation=3,parserCommentVersion=50148,sq1RecordCount=10,bufferPoolPageSize=2097152,bufferPoolChunkSize=4096,bufferPoolPageNumber=960,maxResultSet=524288,bigResultsizesqlCount=10,bufferUsagePercent=80,flowControlRejectStrategy=0,clearBigSqLResultSetMapMS=600000,defaultMaxLimit=100,sequnceHandlerType=2,mutiNodeLimitType=e,mutiNodePatchSize=100,defaultSqlParser=druidparser,usingArO=0,packetHeaderSize=4,maxPacketsize=16777216,mycatNodeId=1]</code></pre><p>æ³¨ï¼š</p><ul><li>serverPort=3306ã€‚MyCatå¯¹å¤–æä¾›æœåŠ¡çš„ç«¯å£å·</li><li>managerPort=9066ã€‚MyCatç®¡ç†ç«¯å£</li><li>charset=utf8ã€‚MyCaté»˜è®¤å­—ç¬¦é›†</li><li>processors=48ã€‚MyCayè¿›ç¨‹æ•°</li><li>processorExecutor=96ã€‚MyCayè¿›ç¨‹æ± å¤§å°</li><li>idleTimeout=1800000ã€‚åº”ç”¨ç¨‹åºä¸MyCatè¿æ¥è¶…æ—¶æ—¶é—´</li><li>defaultMaxLimit=100ã€‚MyCaté»˜è®¤è¿”å›ç»“æœé›†è¡Œæ•°</li><li>maxPacketsize=16777216ã€‚æœ€å¤§åŒ…å¤§å°ï¼Œä¸€å®šä¸èƒ½å¤§äºåœ¨MySQLä¸­é…ç½®çš„å¤§å°ã€‚</li></ul></li><li><p>MyCatç›‘å¬ç«¯å£çš„å¯åŠ¨</p><pre><code class="log">10:45:08.158 INFO [WrapperSimpleAppMain]-using nio network handler10:45:08.224 INFO [WrapperSimpleAppMain]-$ MyCatManager is started and listening on 906610:45:08.224 INFO[WrappersimpleAppMain]-$_MyCatserver is started and listening on 3306</code></pre></li><li><p>MyCatå¯¹åç«¯è¿æ¥æ± çš„åˆå§‹åŒ–</p><pre><code class="log">10:45:08.224 INFO[WrapperSimpleAppMain]-============================10:45:08.224 INFO[WrapperSimpleAppMain]-Initialize dataHost...10:45:08.224 INFO[WrappersimpleAppMain]-init datahost:nodel to use datasource index:110:45:08.225 INFO[WrappersimpleAppMain]-init backend myqsl sourceï¼Œcreate connections total 10 for 192.168.13.4 index:110:45:08.226 INFO[WrappersimpleAppMain]-no ilde connection in pool, create new connection for 192.168.13.4 of schema user_db10:45:08.227 INFO[WrappersimpleAppMain]-no ilde connection in pool, create new connection for 192.168.13.4 of schema user_db10:45:08.228 INFO[WrappersimpleAppMain]-no ilde connection in pool, create new connection for 192.168.13.4 of schema user_db10:45:08.229 INFO[WrappersimpleAppMain]-no ilde connection in pool, create new connection for 192.168.13.4 of schema user_db10:45:08.271 INFO[$_NIOREACTOR-1-RW]-connected successfuly MysQLConnection[id=1, 1astTime=1520217908270, user=im_user, schema=user_db, old shema=user_db, borrowed=true, fromslaveDB=false, threadId=2233481, harset=utf8, txIsolat ion=3, autocommit=true, attachment=nul1, respHandler=null, host=192.168.13.4, port=3306, statussync=null, uriteQueue=e, modifiedSQLExecuted=false]10:45:08.271 INFO[$_NIOREACTOR-5-RW]-connected successfuly MysQLConnection[id=5, 1astTime=152021790827e, er=imuser, schema=user_db, old shema=user_db, borrowed=true, fromslaveDB=false, threadId=2233482, harset=utf8, txIsolat ion=3, autocommit=true, attachment=nul1, respHandler=nul1, host=192.168.13.4, port=3306, statussync=null, writeQueue=0, modifiedSQLExecuted=false]</code></pre></li><li><p>MyCatåˆå§‹åŒ–å®Œæˆä¹‹åçš„è¾“å‡º</p><pre><code class="log">10:45:08.334 INFO [WrapperSimpleAppMain]-init result :finished 10 success 10 target count:1010:45:08.334 INFO [WrappersimpleAppMain]-nodel index:1 init success</code></pre></li><li><p>MyCatå¯¹åç«¯æ•°æ®åº“è¿›è¡Œå¿ƒè·³æ£€æµ‹</p><pre><code class="log">10:45:08.347 INFO [ Timer1]-no ilde connection in pool, create new connection for 192.168.13.3 of schema user db10:45:08.348DEBUG[ Timer1]-con query sql: select user() to con: MysQLConnection [ id=2, 1astTime=1520217908348, iser=im_user, schema=user_db, old shema=user_db, borrowed=true, fromslaveDB=false, threadId=2233483, charset=utf8, txIsol ation=3, autocommit=true, attachment=nul1, respHandler=nul1, host=192.168.13.4, port=3306, statussync=null, writeQueue=0,m odifiedSQLExecuted=false]10:45:08.348 INFO[$_NIOREACTOR-11-RW]-connectionAcquired MySQLConnection [ id=11,1astTime=1520217908348, er=im_user, schema=user_db, old shema=user_db, borrowed=true, fromslaveDB=true, threadId=2233490, charset=utf8, txIsolatio1=3, autocommit=true, attachment=nul1, respHandler=null, host=192.168,13.4, port=3306, statussync=nul1, writeQueue=e, modif iedSQLExecuted=false]10:45:08.373 INFO [ Timer1]-no ilde connection in pool, create new connection for 192.168.13.4 of schema user_db18:45:08.377 DEBUG[$_NTOREACTOR-12-RW]-con query sql: select user() to con: MysQLconnection [ id=12, lastTime=1520217908377, user=im_user, schema=user_db, old shema=user_db, borrowed=true, fromslaveDB=false, threadId=908148, charset=utf8, txIsolation=3, autocommit=true, attachment=nul1, respHandler=nu11, host=192.168.13.3, port=3306, statusSync=nul1, wri teQueue=e, modifiedSQLExecuted=false]</code></pre></li><li><p>åº”ç”¨ç¨‹åºç™»å½•åˆ°MyCatè¾“å‡ºçš„ä¿¡æ¯</p><pre><code class="log">14:16:48.257 INFO[$_NIOREACTOR-7-RW]-ServerConnection [ id=6, schema=USERDB, host=127.0.0.1, user=root, txIsolation=3, autocommit=true, schema=USERDB]&#39;root&#39; login success14:16:48.259 DEBUG [$_NIOREACTOR-7-RW]-ServerConnection [ id=6, schema=USERDB, host=127.0.0.1, user=root, txIsolation=3, autocommit=true, schema=USERDB] show databases14:16:48.260 DEBUG [$_NIOREACTOR-7-RW]-ServerConnection [ id=6, schema=USERDB, host=127.0.0.1, user=root, txIsolation=3, autocommit=true, schema=USERDB] show tables14:16:48.260 DEBUG[$_NIOREACTOR-7-RW]-ServerConnection [ id=6, schema=USERDB, host=127.0.0.1, user=root, txIsolation=3, autocommit=true, schema=USERDB] show tables, route={    1-&gt;dnl{ show tables}} rrs</code></pre></li><li><p>å‘MyCatå‘é€ä¸€æ¡SQLè¯­å¥è¾“å‡ºçš„æ—¥å¿—</p><pre><code class="log">14:16:48.262 DEBUG [$_NIOREACTOR-7-RW]-ServerConnection [ id=6, schema=USERDB, host=127.0.0.1, user=root, txIsolation=3, autocommit=true, schema=USERDB] select * from customer_login where login_name=&#39; John Miller14:16:48.263 DEBUG[$_NIOREACTOR-7-RW]-SQLRouteCache miss cache, key: USERDB select * from customer_1ogin where login_name=&#39;John Miller&#39;14:16:48.263 DEBUG [$_NIOREACTOR-7-RW]-ServerConnection [ id=6, schema=USERDB, host=127.0.0.1, user=root, txIsolation=3, autocommit=true, schema=USERDB] select * from customer_login where 1ogin_name=&#39; John Miller&#39;, route={    1-&gt; dnl{ select * from customer_login where login_name=&#39; John Miller}} rrs</code></pre></li><li><p>å…·ä½“SQLæ‰§è¡Œè¿‡ç¨‹</p><pre><code class="log">14:16:48.263 DEBUG [$_NIOREACTOR-7-RW]-select read source 192.168.13.4 for dataHost: nodel14:16:48.265 DEBUG[$_NIOREACTOR-13-RW]-release connection MySQLConnection [ id=13,1astTime=1520230608256, user=im_user, schema=user_db, old shema=user_db, borrowed=true, fromslaveDB=true, threadId=2233491, charset=utf8, txIsolation=3, autocommit=true, attachment=dnl{ select * from customer_login where login_name=&#39; John Miller&#39;}, respHandler=SingleNodeHandler [ node=dn1{ select * from customer_login where login_name=&#39;John Miller&#39;}, packetId=8], host=192.168.13.4, port=3306, statussync=null, writeQueue=0, modifiedSQLExecuted=false]</code></pre></li></ol><h2 id="ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>æœ¬ç« èŠ‚ä¸»è¦å¯¹è¯¾ç¨‹ä¸­æ¶‰åŠåˆ°çš„å…¨éƒ¨çŸ¥è¯†ç‚¹è¿›è¡ŒçŸ¥è¯†æ€»ç»“ã€‚å¹¶ä»‹ç»è¿›ä¸€æ­¥å­¦ä¹ MyCATçš„å­¦ä¹ é€”å¾„ã€‚</p></blockquote><h3 id="5-1-æ€»ç»“"><a href="#5-1-æ€»ç»“" class="headerlink" title="5-1 æ€»ç»“"></a>5-1 æ€»ç»“</h3><p>å·²å­¦å†…å®¹ï¼š</p><ul><li>MyCatèµ·æº</li><li>MyCatåŸºæœ¬æ¦‚å¿µ</li><li>å¦‚ä½•å®‰è£…ã€å¯åŠ¨ã€é…ç½®MyCat</li><li>åˆ©ç”¨MyCatå®ç°å¯¹åç«¯æ•°æ®åº“çš„è¯»å†™åˆ†ç¦»</li><li>MyCatä¸»è¦åŠŸèƒ½å’Œåº”ç”¨åœºæ™¯</li></ul><p>æœªè®²å†…å®¹ï¼š</p><ul><li>å¦‚ä½•åˆ©ç”¨MyCatå¯¹åç«¯æ•°æ®åº“è¿›è¡Œåˆ†ç‰‡</li><li>å¦‚ä½•å¯¹åˆ†ç‰‡é›†ç¾¤è¿›è¡Œå¤‡ä»½</li><li>åˆ†ç‰‡é›†ç¾¤ä¸­å®•æœºä¸€å°æœåŠ¡å™¨ä¼šæœ‰ä»€ä¹ˆå½±å“</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mycat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>945-SpringBoot+MyBatisæ­å»ºè¿·ä½ å°ç¨‹åº</title>
      <link href="/imooc/945-mini-app/"/>
      <url>/imooc/945-mini-app/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/945" target="_blank" rel="noopener">https://www.imooc.com/learn/945</a></p><p>ç®€ä»‹ï¼šç”¨Spring Bootæ¡†æ¶å¤§å¤§ç®€åŒ–äº†æ–°Springåº”ç”¨çš„åˆå§‹æ­å»ºä»¥åŠå¼€å‘è¿‡ç¨‹ï¼Œåœ¨å¼€å‘äººå‘˜ä¸­è¶Šæ¥è¶Šå—åˆ°æ¬¢è¿ã€‚å¾®ä¿¡å°ç¨‹åºä½œä¸ºç›®å‰ç‚™æ‰‹å¯çƒ­çš„åº”ç”¨ï¼Œå¾ˆæœ‰å¯èƒ½åœ¨æœªæ¥å æ®è½»åº”ç”¨çš„å¸‚åœºã€‚æœ¬é—¨è¯¾ç¨‹çš„ä¸»è¦ç›®çš„æ˜¯å°†ä¸¤è€…ç»“åˆèµ·æ¥ï¼ŒåŒæ—¶å¸Œæœ›ä½œä¸ºå…¥é—¨ç¿”ä»”ä¹‹å‰å®æˆ˜è¯¾çš„ä¸€ä¸ªæ›´ä½é—¨æ§›çš„è¯¾ç¨‹è¿›è¡Œè®²è§£ã€‚æœ¬è¯¾åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†å¸¦é¢†å¤§å®¶æ˜ç¡®éœ€æ±‚ï¼Œä»é›¶å¼€å§‹è¿›è¡ŒSpringBoot+MyBatisçš„æ¡†æ¶æ­å»ºï¼›ç¬¬äºŒéƒ¨åˆ†å’±ä»¬å°†ä¾æ®ä¸šåŠ¡æ¨¡å—é…åˆUTå®ç°åç«¯å®Œæ•´çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼›æœ€åæˆ‘ä»¬å°†æ¥åˆ°å¾®ä¿¡å°ç¨‹åºå¼€å‘éƒ¨åˆ†ï¼Œå¸®å¤§å®¶å…¥é—¨å¾®ä¿¡å°ç¨‹åºå¼€å‘ï¼Œå¹¶æ•™ä¼šå¤§å®¶å‰åè”è°ƒã€‚è€å¸ˆç›¸å…³å®æˆ˜è¯¾ç¨‹ï¼š<a href="http://coding.imooc.com/class/144.html" target="_blank" rel="noopener">http://coding.imooc.com/class/144.html</a> è€å¸ˆçš„é¢è¯•è¯¾ç¨‹ï¼š <a href="https://coding.imooc.com/class/303.html" target="_blank" rel="noopener">https://coding.imooc.com/class/303.html</a></p></blockquote><p><a href="https://gitee.com/xiangze/areadisplay" target="_blank" rel="noopener">è®²å¸ˆæºç -å‰ç«¯</a><br><a href="https://gitee.com/xiangze/demo" target="_blank" rel="noopener">è®²å¸ˆæºç -åç«¯</a></p><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>æœ¬ç« èŠ‚è®²è§£æœ¬é—¨è¯¾ç¨‹çš„ä¸»æ—¨ï¼Œä¾¿äºåŒå­¦æŒæ¡è¯¾ç¨‹çš„æ¥é¾™å»è„‰ã€‚</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç»"></a>1-1 è¯¾ç¨‹ä»‹ç»</h3><p>å­¦ä¹ æœ¬é—¨è¯¾ç¨‹çš„ä½œç”¨ï¼š</p><ul><li>å­¦ä¼šä»0æ­å»ºåç«¯çš„SpringBoot + MyBatisæ¡†æ¶</li><li>å¾®ä¿¡å°ç¨‹åºå…¥é—¨</li><li>è§„èŒƒçš„ä»£ç ç¼–å†™</li></ul><p>æœ¬é—¨è¯¾ç¨‹çš„æ¡†æ¶ï¼š</p><ul><li>ä»0æ­å»ºåç«¯çš„springboot + mybatisæ¡†æ¶</li><li>å®ç°åç«¯çš„ä¸šåŠ¡åŠŸèƒ½</li><li>å®ç°æœ¬åœ°å¾®ä¿¡å°ç¨‹åºçš„å‰ç«¯å¼€å‘</li><li>å‰ç«¯ä¸åç«¯çš„è”è°ƒ</li></ul><p>æŠ€æœ¯å‚¨å¤‡è¦æ±‚ï¼š</p><ul><li>åŸºæœ¬çš„JavaçŸ¥è¯†</li><li>åŸºæœ¬çš„å‰ç«¯å¼€å‘çŸ¥è¯†(ç®€å•äº†è§£HTML,JSç­‰)</li><li>Spring , MybatisåŸºç¡€çŸ¥è¯†(ä¸ä¼šä¹Ÿæ²¡å…³ç³»)</li></ul><h3 id="1-2-æœ€ç»ˆæ•ˆæœå±•ç¤º"><a href="#1-2-æœ€ç»ˆæ•ˆæœå±•ç¤º" class="headerlink" title="1-2 æœ€ç»ˆæ•ˆæœå±•ç¤º"></a>1-2 æœ€ç»ˆæ•ˆæœå±•ç¤º</h3><p>ç™»å½•ã€åŒºåŸŸä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥</p><h2 id="ç¬¬2ç« -é¡¹ç›®è®¾è®¡åŠæ¡†æ¶æ­å»º"><a href="#ç¬¬2ç« -é¡¹ç›®è®¾è®¡åŠæ¡†æ¶æ­å»º" class="headerlink" title="ç¬¬2ç«  é¡¹ç›®è®¾è®¡åŠæ¡†æ¶æ­å»º"></a>ç¬¬2ç«  é¡¹ç›®è®¾è®¡åŠæ¡†æ¶æ­å»º</h2><blockquote><p>æœ¬ç« èŠ‚è®²è§£é¡¹ç›®çš„éœ€æ±‚åˆ†æã€æ•°æ®åº“è®¾è®¡ä»¥åŠåç«¯SpringBoot + Mybatisæ¡†æ¶çš„æ­å»º</p></blockquote><h3 id="2-1-SpringBootçš„æ­å»ºä¸å¯åŠ¨ä¸Š"><a href="#2-1-SpringBootçš„æ­å»ºä¸å¯åŠ¨ä¸Š" class="headerlink" title="2-1 SpringBootçš„æ­å»ºä¸å¯åŠ¨ä¸Š"></a>2-1 SpringBootçš„æ­å»ºä¸å¯åŠ¨ä¸Š</h3><p><a href="https://spring.io/" target="_blank" rel="noopener">Springå®˜ç½‘</a></p><pre><code class="yaml">server.context-path=/demo //è®¾ç½®ä¸Šä¸‹æ–‡è·¯å¾„  server.port=8888 //è®¾ç½®ç«¯å£å·</code></pre><h3 id="2-3-åŠŸèƒ½ç‚¹çš„æ˜ç¡®"><a href="#2-3-åŠŸèƒ½ç‚¹çš„æ˜ç¡®" class="headerlink" title="2-3 åŠŸèƒ½ç‚¹çš„æ˜ç¡®"></a>2-3 åŠŸèƒ½ç‚¹çš„æ˜ç¡®</h3><p>åŒºåŸŸä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥</p><h3 id="2-4-è¡¨è®¾è®¡ä¸å®ä½“ç±»çš„åˆ›å»º"><a href="#2-4-è¡¨è®¾è®¡ä¸å®ä½“ç±»çš„åˆ›å»º" class="headerlink" title="2-4 è¡¨è®¾è®¡ä¸å®ä½“ç±»çš„åˆ›å»º"></a>2-4 è¡¨è®¾è®¡ä¸å®ä½“ç±»çš„åˆ›å»º</h3><ul><li><p>è¡¨è®¾è®¡</p><pre><code class="sql">CREATE DATABASE IF NOT EXISTS `imooc_945_mini_app`;USE `imooc_945_mini_app`;SET NAMES utf8mb4;SET FOREIGN_KEY_CHECKS = 0;-- ------------------------------ Table structure for tb_area-- ----------------------------DROP TABLE IF EXISTS `tb_area`;CREATE TABLE `tb_area` (  `area_id`        INT(2)      NOT NULL AUTO_INCREMENT  COMMENT &#39;ä¸»é”®ID&#39;,  `area_name`      VARCHAR(200) CHARACTER SET utf8  COLLATE utf8_general_ci      NOT NULL  COMMENT &#39;åç§°&#39;,  `priority`       INT(2)      NOT NULL DEFAULT 0  COMMENT &#39;æƒé‡ï¼Œè¶Šå¤§è¶Šæ’å‰æ˜¾ç¤º&#39;,  `create_time`    DATETIME(0) NULL     DEFAULT NULL  COMMENT &#39;åˆ›å»ºæ—¶é—´&#39;,  `last_edit_time` DATETIME(0) NULL     DEFAULT NULL  COMMENT &#39;æ›´æ–°æ—¶é—´&#39;,  PRIMARY KEY (`area_id`) USING BTREE,  UNIQUE INDEX `UK_AREA`(`area_name`) USING BTREE)  ENGINE = InnoDB  AUTO_INCREMENT = 1  CHARACTER SET = utf8  COLLATE = utf8_general_ci  COMMENT = &#39;åŒºåŸŸä¿¡æ¯&#39;  ROW_FORMAT = DYNAMIC;SET FOREIGN_KEY_CHECKS = 1;</code></pre></li><li><p>å®ä½“ç±»</p><pre><code class="java">// åŒºåŸŸä¿¡æ¯public class Area {    // ä¸»é”®ID    private Integer areaId;    // åç§°    private String areaName;    // æƒé‡ï¼Œè¶Šå¤§è¶Šæ’å‰æ˜¾ç¤º    private Integer priority;    // åˆ›å»ºæ—¶é—´    private Date createTime;    // æ›´æ–°æ—¶é—´    private Date lastEditTime;}</code></pre></li></ul><h2 id="ç¬¬3ç« -é¡¹ç›®å¼€å‘"><a href="#ç¬¬3ç« -é¡¹ç›®å¼€å‘" class="headerlink" title="ç¬¬3ç«  é¡¹ç›®å¼€å‘"></a>ç¬¬3ç«  é¡¹ç›®å¼€å‘</h2><blockquote><p>æœ¬ç« èŠ‚å¸¦é¢†å¤§å®¶ä»é›¶å¼€å§‹ä»Daoåˆ°Controllerå¼€å‘ä¸€ä¸ªå®Œæ•´çš„å¸¦å•å…ƒæµ‹è¯•å¢åˆ æ”¹æŸ¥åç«¯ã€‚</p></blockquote><ul><li>é…ç½®</li><li>æ¥å£</li><li>mapper</li><li>utï¼Œå³å•å…ƒæµ‹è¯•</li></ul><h3 id="3-1-pomçš„é…ç½®"><a href="#3-1-pomçš„é…ç½®" class="headerlink" title="3-1 pomçš„é…ç½®"></a>3-1 pomçš„é…ç½®</h3><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;    &lt;version&gt;2.0.0&lt;/version&gt;&lt;/dependency&gt;&lt;!--æ•°æ®åº“--&gt;&lt;dependency&gt;    &lt;groupId&gt;mysql&lt;/groupId&gt;    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--è¿æ¥æ± --&gt;&lt;dependency&gt;    &lt;groupId&gt;com.mchange&lt;/groupId&gt;    &lt;artifactId&gt;c3p0&lt;/artifactId&gt;    &lt;version&gt;0.9.5.2&lt;/version&gt;&lt;/dependency&gt;</code></pre><h3 id="3-2-mybatis-configçš„é…ç½®"><a href="#3-2-mybatis-configçš„é…ç½®" class="headerlink" title="3-2 mybatis-configçš„é…ç½®"></a>3-2 mybatis-configçš„é…ç½®</h3><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt;    &lt;!--é…ç½®å…¨å±€å±æ€§--&gt;    &lt;settings&gt;        &lt;!--ä½¿ç”¨JDBCçš„getGeneratedKeysè·å–æ•°æ®åº“è‡ªå¢ä¸»é”®å€¼--&gt;        &lt;setting name=&quot;useGeneratedKeys&quot; value=&quot;true&quot;/&gt;        &lt;!--ä½¿ç”¨åˆ—æ ‡ç­¾æ›¿æ¢åˆ—åˆ«å é»˜è®¤ï¼štrue--&gt;        &lt;setting name=&quot;useColumnLabel&quot; value=&quot;true&quot;/&gt;        &lt;!--å¼€å¯é©¼å³°å‘½åè½¬æ¢ï¼šTable{create_time} -&gt; Entity{createTime}--&gt;        &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;    &lt;/settings&gt;&lt;/configuration&gt;</code></pre><h3 id="3-3-datasourceå’Œsessionfactorybeançš„é…ç½®"><a href="#3-3-datasourceå’Œsessionfactorybeançš„é…ç½®" class="headerlink" title="3-3 datasourceå’Œsessionfactorybeançš„é…ç½®"></a>3-3 datasourceå’Œsessionfactorybeançš„é…ç½®</h3><ul><li><p>é…ç½®datasourceåˆ°iocå®¹å™¨é‡Œé¢</p><pre><code class="java">@Configuration// é…ç½®mybatis mapperçš„æ‰«æè·¯å¾„@MapperScan(&quot;com.tuyrk.dao&quot;)public class DataSourceConfiguration {    @Value(&quot;${jdbc.driver}&quot;)    private String jdbcDriver;    @Value((&quot;${jdbc.url}&quot;))    private String jdbcUrl;    @Value(&quot;${jdbc.username}&quot;)    private String jdbcUsername;    @Value(&quot;${jdbc.password}&quot;)    private String jdbcPassword;    // ç”Ÿæˆä¸spring-dao.xmlå¯¹åº”çš„bean dataSource    @Bean(name = &quot;dataSource&quot;)    public ComboPooledDataSource createDataSource() throws PropertyVetoException {        // ç”Ÿæˆdatasourceå®ä¾‹        ComboPooledDataSource dataSource = new ComboPooledDataSource();        // è·Ÿé…ç½®æ–‡ä»¶ä¸€æ ·è®¾ç½®ä»¥ä¸‹ä¿¡æ¯        // é©±åŠ¨        dataSource.setDriverClass(jdbcDriver);        // æ•°æ®åº“è¿æ¥URL        dataSource.setJdbcUrl(jdbcUrl);        // è®¾ç½®ç”¨æˆ·å        dataSource.setUser(jdbcUsername);        // è®¾ç½®ç”¨æˆ·å¯†ç         dataSource.setPassword(jdbcPassword);        // é…ç½®c3p0è¿æ¥æ± çš„ç§æœ‰å±æ€§        // è¿æ¥æ± æœ€å¤§çº¿ç¨‹æ•°        dataSource.setMaxPoolSize(30);        // è¿æ¥æ± æœ€å°çº¿ç¨‹æ•°        dataSource.setMinPoolSize(10);        //å…³é—­è¿æ¥åä¸è‡ªåŠ¨commit        dataSource.setAutoCommitOnClose(false);        // è¿æ¥è¶…æ—¶æ—¶é—´        dataSource.setCheckoutTimeout(10000);        // è¿æ¥å¤±è´¥é‡è¯•æ¬¡æ•°        dataSource.setAcquireRetryAttempts(2);        return dataSource;    }}</code></pre></li><li><p>åˆ›å»ºsqlSessionFactoryBeanå®ä¾‹</p><pre><code class="java">@Configurationpublic class SessionFactoryConfiguration {    // mybatis-config.xmlé…ç½®æ–‡ä»¶çš„è·¯å¾„    @Value(&quot;${mybatis_config_file}&quot;)    private String mybatisConfigFilePath;    // mybatis mapperæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„    @Value(&quot;${mapper_path}&quot;)    private String mapperPath;    // å®ä½“ç±»æ‰€åœ¨çš„Package    @Value(&quot;${entity_package}&quot;)    private String entityPackage;    @Autowired    @Qualifier(&quot;dataSource&quot;)    private DataSource dataSource;    // åˆ›å»ºsqlSessionFactoryBeanå®ä¾‹ å¹¶ä¸”è®¾ç½®configtion è®¾ç½®mapperæ˜ å°„è·¯å¾„ è®¾ç½®datasourceæ•°æ®æº    @Bean(name = &quot;sqlSessionFactory&quot;)    public SqlSessionFactoryBean createSqlSessionFactoryBean() throws IOException {        SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();        // è®¾ç½®mybatis configuration æ‰«æè·¯å¾„        sqlSessionFactoryBean.setConfigLocation(new ClassPathResource(mybatisConfigFilePath));        // æ·»åŠ mapper æ‰«æè·¯å¾„        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();        String packageSearchPath = PathMatchingResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX + mapperPath;        sqlSessionFactoryBean.setMapperLocations(resolver.getResources(packageSearchPath));        // è®¾ç½®dataSource        sqlSessionFactoryBean.setDataSource(dataSource);        // è®¾ç½®typeAlias åŒ…æ‰«æè·¯å¾„        sqlSessionFactoryBean.setTypeAliasesPackage(entityPackage);        return sqlSessionFactoryBean;    }}</code></pre></li></ul><h3 id="3-4-daoçš„åˆ›å»º"><a href="#3-4-daoçš„åˆ›å»º" class="headerlink" title="3-4 daoçš„åˆ›å»º"></a>3-4 daoçš„åˆ›å»º</h3><pre><code class="java">public interface AreaDao {    // åˆ—å‡ºåŒºåŸŸåˆ—è¡¨    List&lt;Area&gt; queryArea();    // æ ¹æ®Idåˆ—å‡ºå…·ä½“åŒºåŸŸ    Area queryAreaById(Integer areaId);    // æ’å…¥åŒºåŸŸä¿¡æ¯    Integer insertArea(Area area);    // æ›´æ–°åŒºåŸŸä¿¡æ¯    Integer updateArea(Area area);    // åˆ é™¤åŒºåŸŸä¿¡æ¯    Integer deleteArea(Integer areaId);}</code></pre><h3 id="3-5-mapperçš„ç¼–å†™"><a href="#3-5-mapperçš„ç¼–å†™" class="headerlink" title="3-5 mapperçš„ç¼–å†™"></a>3-5 mapperçš„ç¼–å†™</h3><p>è‡ªåŠ¨åŒ–ç”Ÿæˆmapperå·¥å…·ï¼š</p><ul><li><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE mapper      PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;      &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.tuyrk.dao.AreaDao&quot;&gt;  &lt;!-- æŸ¥è¯¢åŒºåŸŸä¿¡æ¯åˆ—è¡¨ --&gt;  &lt;select id=&quot;queryArea&quot; resultType=&quot;com.tuyrk.entity.Area&quot;&gt;      SELECT          area_id,          area_name,          priority,          create_time,          last_edit_time      FROM tb_area      ORDER BY priority DESC;  &lt;/select&gt;  &lt;!-- æ ¹æ®åŒºåŸŸIDï¼ŒæŸ¥è¯¢åŒºåŸŸä¿¡æ¯ --&gt;  &lt;select id=&quot;queryAreaById&quot; resultType=&quot;com.tuyrk.entity.Area&quot;&gt;      SELECT          area_id,          area_name,          priority,          create_time,          last_edit_time      FROM tb_area      WHERE area_id = #{areaId}  &lt;/select&gt;  &lt;!-- æ–°å¢åŒºåŸŸä¿¡æ¯ --&gt;  &lt;insert id=&quot;insertArea&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;areaId&quot; keyColumn=&quot;area_id&quot;          parameterType=&quot;com.tuyrk.entity.Area&quot;&gt;      INSERT INTO tb_area (area_name, priority, create_time, last_edit_time)      VALUES (#{areaName}, #{priority}, #{createTime}, #{lastEditTime});  &lt;/insert&gt;  &lt;!-- æ›´æ–°åŒºåŸŸä¿¡æ¯ --&gt;  &lt;update id=&quot;updateArea&quot; parameterType=&quot;com.tuyrk.entity.Area&quot;&gt;      update tb_area      &lt;set&gt;          &lt;if test=&quot;areaName != null&quot;&gt;area_name = #{areaName},&lt;/if&gt;          &lt;if test=&quot;priority != null&quot;&gt;priority = #{priority},&lt;/if&gt;          &lt;if test=&quot;lastEditTime != null&quot;&gt;last_edit_time = #{lastEditTime}&lt;/if&gt;      &lt;/set&gt;      where area_id = #{areaId};  &lt;/update&gt;  &lt;!-- æ ¹æ®åŒºåŸŸIDï¼Œåˆ é™¤åŒºåŸŸä¿¡æ¯ --&gt;  &lt;delete id=&quot;deleteArea&quot;&gt;      DELETE FROM tb_area      WHERE area_id = #{areaId};  &lt;/delete&gt;&lt;/mapper&gt;</code></pre><h3 id="3-6-daoå±‚å¼€å‘"><a href="#3-6-daoå±‚å¼€å‘" class="headerlink" title="3-6 daoå±‚å¼€å‘"></a>3-6 daoå±‚å¼€å‘</h3><pre><code class="java">@Autowiredprivate AreaDao areaDao;</code></pre></li></ul><p><strong>areaDaoçº¢çº¿æŠ¥é”™è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>ã€Fileã€‘==&gt;ã€settingsã€‘==&gt;ã€Inspectionsã€‘==&gt;ã€Springã€‘==&gt;ã€Spring Coreã€‘==&gt;ã€Codeã€‘==&gt;ã€Autowiring for Bean Classã€‘==&gt;ã€Warningã€‘</li></ul><p>UTå•å…ƒæµ‹è¯•ï¼š</p><ul><li><p>AreaDaoTest.javaçš„ç¼–å†™</p><pre><code class="java">@RunWith(SpringRunner.class)@SpringBootTestpublic class AreaDaoTest {    //é€šè¿‡springå®¹å™¨æ³¨å…¥Daoçš„å®ç°ç±»    @Autowired    private AreaDao areaDao;    @Test    public void queryArea() {        List&lt;Area&gt; areaList = areaDao.queryArea();        // éªŒè¯é¢„æœŸå€¼å’Œå®é™…å€¼æ˜¯å¦ç›¸ç¬¦        assertEquals(2, areaList.size());    }    // ...}</code></pre></li></ul><p><strong>å¦‚æ­¤ç¹å¤šçš„æ¡†æ¶åº”è¯¥å­¦ä¹ å“ªä¸€ä¸ª</strong>ï¼Ÿ</p><ul><li><p>ç­”ï¼šSpringã€‚å¤šçœ‹Springæºç ï¼Œå­¦ä¹ æ¡†æ¶è®¾è®¡ã€‚</p><h3 id="3-7-serviceå±‚çš„å®ç°"><a href="#3-7-serviceå±‚çš„å®ç°" class="headerlink" title="3-7 serviceå±‚çš„å®ç°"></a>3-7 serviceå±‚çš„å®ç°</h3></li><li><p>é…ç½®<br>å¯¹æ ‡spring-serviceé‡Œé¢çš„transactionManager<br>ç»§æ‰¿TransactionManagementConfigurationæ˜¯å› ä¸ºå¼€å¯annotation-driven</p><pre><code class="java">@Configuration// é¦–å…ˆä½¿ç”¨æ³¨è§£ @EnableTransactionManagement å¼€å¯äº‹åŠ¡æ”¯æŒå// åœ¨Serviceæ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£ @Transactional ä¾¿å¯@EnableTransactionManagement// å¼€å¯äº‹åŠ¡çš„ç®¡ç†public class TransactionManagementConfiguration implements TransactionManagementConfigurer {    @Autowired    // æ³¨å…¥DataSourceConfigurationé‡Œè¾¹çš„DataSourceï¼Œé€šè¿‡createDataSource()è·å–    private DataSource dataSource;     // å…³äºäº‹åŠ¡ç®¡ç†ï¼Œéœ€è¦è¿”å›PlatformTransactionManagerçš„å®ç°    @Override    public PlatformTransactionManager annotationDrivenTransactionManager() {        return new DataSourceTransactionManager(dataSource);    }}</code></pre></li><li><p>æ¥å£</p><pre><code class="java">public interface AreaService {    // è·å–åŒºåŸŸåˆ—è¡¨    List&lt;Area&gt; getAreaList();    // é€šè¿‡åŒºåŸŸIdè·å–åŒºåŸŸä¿¡æ¯    Area getAreaById(int areaId);    // å¢åŠ åŒºåŸŸä¿¡æ¯    boolean addArea(Area area);    // ä¿®æ”¹åŒºåŸŸä¿¡æ¯    boolean modifyArea(Area area);    // åˆ é™¤åŒºåŸŸä¿¡æ¯    boolean deleteArea(int areaId);}</code></pre></li><li><p>å®ç°ç±»</p><h3 id="3-8-ä¸šåŠ¡controlleræ–¹æ³•çš„å®ç°"><a href="#3-8-ä¸šåŠ¡controlleræ–¹æ³•çš„å®ç°" class="headerlink" title="3-8 ä¸šåŠ¡controlleræ–¹æ³•çš„å®ç°"></a>3-8 ä¸šåŠ¡controlleræ–¹æ³•çš„å®ç°</h3></li><li><p>ä¸šåŠ¡Controlleræ–¹æ³•çš„å®ç°</p></li><li><p>ç»Ÿä¸€å¼‚å¸¸å¤„ç†</p></li></ul><p>æµè§ˆå™¨JSONæ ¼å¼åŒ–æŸ¥çœ‹æ’ä»¶ï¼šJsonView</p><h3 id="3-9-ç»Ÿä¸€å¼‚å¸¸å¤„ç†åŠŸèƒ½çš„å®ç°"><a href="#3-9-ç»Ÿä¸€å¼‚å¸¸å¤„ç†åŠŸèƒ½çš„å®ç°" class="headerlink" title="3-9 ç»Ÿä¸€å¼‚å¸¸å¤„ç†åŠŸèƒ½çš„å®ç°"></a>3-9 ç»Ÿä¸€å¼‚å¸¸å¤„ç†åŠŸèƒ½çš„å®ç°</h3><pre><code class="java">@ControllerAdvicepublic class GlobalExceptionHandler {    @ExceptionHandler(value = Exception.class)    @ResponseBody    public Map&lt;String, Object&gt; handlerException(HttpServletRequest request, Exception e) {        Map&lt;String, Object&gt; modelMap = new HashMap&lt;&gt;();        modelMap.put(&quot;success&quot;, false);        modelMap.put(&quot;errMsg&quot;, e.getMessage());        return modelMap;    }}</code></pre><h2 id="ç¬¬4ç« -å¾®ä¿¡å°ç¨‹åºçš„å…¥é—¨åŠå‰åè”è°ƒ"><a href="#ç¬¬4ç« -å¾®ä¿¡å°ç¨‹åºçš„å…¥é—¨åŠå‰åè”è°ƒ" class="headerlink" title="ç¬¬4ç«  å¾®ä¿¡å°ç¨‹åºçš„å…¥é—¨åŠå‰åè”è°ƒ"></a>ç¬¬4ç«  å¾®ä¿¡å°ç¨‹åºçš„å…¥é—¨åŠå‰åè”è°ƒ</h2><blockquote><p>æœ¬ç« èŠ‚å°†å¸¦é¢†å¤§å®¶å…¥é—¨å¾®ä¿¡å°ç¨‹åºï¼Œå¹¶å®ç°æœ¬é¡¹ç›®çš„å‰ç«¯åŠŸèƒ½ï¼ŒåŒæ—¶è¿›è¡Œå‰åç«¯è”è°ƒã€‚</p></blockquote><h3 id="4-1-å¾®ä¿¡å°ç¨‹åºç®€ä»‹"><a href="#4-1-å¾®ä¿¡å°ç¨‹åºç®€ä»‹" class="headerlink" title="4-1 å¾®ä¿¡å°ç¨‹åºç®€ä»‹"></a>4-1 å¾®ä¿¡å°ç¨‹åºç®€ä»‹</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/index.html" target="_blank" rel="noopener">å°ç¨‹åºå¼€å‘æ–‡æ¡£</a></p><p>å°ç¨‹åºä»£ç æ„æˆï¼š</p><ol><li>JSONé…ç½®</li><li>WXMLæ¨¡æ¿</li><li>WXSSæ ·å¼</li><li>JSé€»è¾‘äº¤äº’<h3 id="4-2-å¾®ä¿¡å¼€å‘è€…å·¥å…·ç®€ä»‹"><a href="#4-2-å¾®ä¿¡å¼€å‘è€…å·¥å…·ç®€ä»‹" class="headerlink" title="4-2 å¾®ä¿¡å¼€å‘è€…å·¥å…·ç®€ä»‹"></a>4-2 å¾®ä¿¡å¼€å‘è€…å·¥å…·ç®€ä»‹</h3><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener">ä¸‹è½½</a></li></ol><p>æ¨¡æ‹Ÿå™¨ã€ç¼–è¾‘å™¨ã€è°ƒè¯•å™¨</p><h3 id="4-3-åˆ›å»ºæ–°çš„å°ç¨‹åº"><a href="#4-3-åˆ›å»ºæ–°çš„å°ç¨‹åº" class="headerlink" title="4-3 åˆ›å»ºæ–°çš„å°ç¨‹åº"></a>4-3 åˆ›å»ºæ–°çš„å°ç¨‹åº</h3><p>ã€é¡¹ç›®ç›®å½•ã€‘==&gt;ã€APPIDï¼ˆæµ‹è¯•å·ï¼‰ã€‘==&gt;ã€é¡¹ç›®åç§°ã€‘==&gt;ã€å»ºç«‹æ™®é€šå¿«é€Ÿå¯åŠ¨æ¨¡æ¿ã€‘</p><h3 id="4-4-åˆ—è¡¨é¡µå¼€å‘"><a href="#4-4-åˆ—è¡¨é¡µå¼€å‘" class="headerlink" title="4-4 åˆ—è¡¨é¡µå¼€å‘"></a>4-4 åˆ—è¡¨é¡µå¼€å‘</h3><p>ä¿®æ”¹æ ‡é¢˜ï¼š</p><ul><li>åœ¨*.jsonä¸­æ·»åŠ <code>&quot;navigationBarTitleText&quot;: &quot;åŒºåŸŸä¿¡æ¯åˆ—è¡¨&quot;</code></li></ul><p>ç»„ä»¶ï¼š</p><ul><li>viewï¼šç±»ä¼¼äºhtmlçš„div</li><li>scroll-viewï¼šå¯æ»šåŠ¨è¯•å›¾åŒºåŸŸ</li><li>textï¼šæ–‡æœ¬</li></ul><pre><code class="html">&lt;!--pages/list/list.wxml--&gt;&lt;view class=&#39;container&#39;&gt;  &lt;!-- è¡¨å¤´ --&gt;  &lt;view class=&#39;widget&#39;&gt;    &lt;text class=&#39;column&#39;&gt;ID&lt;/text&gt;    &lt;text class=&#39;column&#39;&gt;åŒºåŸŸå&lt;/text&gt;    &lt;text class=&#39;column&#39;&gt;ä¼˜å…ˆçº§&lt;/text&gt;    &lt;text class=&#39;link-column&#39;&gt;æ“ä½œ&lt;/text&gt;  &lt;/view&gt;  &lt;!-- æ•°æ®å±•ç¤ºåŒºåŸŸ --&gt;  &lt;scroll-view scroll-y=&quot;true&quot;&gt;    &lt;view&gt;      &lt;block wx:for=&quot;{{list}}&quot;&gt;        &lt;view class=&quot;widget&quot;&gt;          &lt;text class=&#39;column&#39;&gt;{{item.areaId}}&lt;/text&gt;          &lt;text class=&#39;column&#39;&gt;{{item.areaName}}&lt;/text&gt;          &lt;text class=&#39;column&#39;&gt;{{item.priority}}&lt;/text&gt;          &lt;view class=&#39;link-column&#39;&gt;            &lt;navigator class=&#39;link&#39; url=&#39;../operation/operation?areaId={{item.areaId}}&#39;&gt;ç¼–è¾‘&lt;/navigator&gt;|            &lt;text class=&#39;link&#39; bindtap=&#39;deleteArea&#39; data-areaid=&#39;{{item.areaId}}&#39; data-areaname=&#39;{{item.areaName}}&#39; data-index=&#39;{{index}}&#39;&gt;åˆ é™¤&lt;/text&gt;          &lt;/view&gt;        &lt;/view&gt;      &lt;/block&gt;    &lt;/view&gt;  &lt;/scroll-view&gt;  &lt;!-- æŒ‰é’® --&gt;  &lt;button type=&#39;primary&#39; bindtap=&#39;addArea&#39;&gt;æ·»åŠ åŒºåŸŸä¿¡æ¯&lt;/button&gt;&lt;/view&gt;</code></pre><ul><li><p>åˆ—è¡¨å±•ç¤º</p><pre><code class="javascript">onShow: function() {  var that = this;  wx.request({    url: &#39;http://127.0.0.1:8888/demo/superadmin/listarea&#39;,    data: {},    method: &#39;GET&#39;,    success: function(res) {      var list = res.data.areaList;      console.log(res);      if (list == null) {        var toastText = &#39;è·å–æ•°æ®å¤±è´¥&#39; + res.data.errMsg;        wx.showToast({          title: toastText,          icon: &#39;&#39;,          duration: 2000        })      } else {        that.setData({          list: list        });      }    }  })}</code></pre></li><li><p>åˆ é™¤åŠŸèƒ½</p><pre><code class="javascript">deleteArea: function(e) {  var that = this;  // 0. è¯¢é—®ç”¨æˆ·æ˜¯å¦åˆ é™¤è¯¥ä¿¡æ¯  wx.showModal({    title: &#39;æç¤º&#39;,    content: &#39;ç¡®å®šè¦åˆ é™¤[&#39; + e.target.dataset.areaname + &#39;]å—ï¼Ÿ&#39;,    success: function(sm) {      // å¦‚æœç‚¹å‡»ç¡®è®¤ï¼Œ      if (sm.confirm) {        // 1. è·å–areaIdï¼Œå°†å…¶ä¼ é€’ç»™åå°åšåˆ é™¤æ“ä½œ        wx.request({          url: &#39;http://127.0.0.1:8888/demo/superadmin/removearea&#39;,          data: {            &quot;areaId&quot;: e.target.dataset.areaid          },          method: &#39;GET&#39;,          success: function(res) {            var result = res.data.success;            var toastText = &quot;åˆ é™¤æˆåŠŸï¼&quot;;            if (result != true) {              toastText = &quot;åˆªé™¤å¤±æ•—ï¼&quot;;            } else {              // 2. æ›´æ–°listå€¼              that.data.list.splice(e.target.dataset.index, 1);              that.setData({                list: that.data.list              })            }            // å½ˆå‡ºæç¤º            wx.showToast({              title: toastText,              icon: &#39;&#39;,              duration: 2000            })          }        })      }    }  })}</code></pre></li><li><p>è·³è½¬åˆ°æ·»åŠ åŒºåŸŸä¿¡æ¯</p><pre><code class="javascript">addArea: function() {  wx.navigateTo({    url: &#39;../operation/operation&#39;  });}</code></pre></li></ul><h3 id="4-7-åˆ—è¡¨é¡µå‰åç«¯è”è°ƒ"><a href="#4-7-åˆ—è¡¨é¡µå‰åç«¯è”è°ƒ" class="headerlink" title="4-7 åˆ—è¡¨é¡µå‰åç«¯è”è°ƒ"></a>4-7 åˆ—è¡¨é¡µå‰åç«¯è”è°ƒ</h3><h3 id="4-8-åŒºåŸŸä¿¡æ¯ç¼–è¾‘é¡µçš„å¼€å‘"><a href="#4-8-åŒºåŸŸä¿¡æ¯ç¼–è¾‘é¡µçš„å¼€å‘" class="headerlink" title="4-8 åŒºåŸŸä¿¡æ¯ç¼–è¾‘é¡µçš„å¼€å‘"></a>4-8 åŒºåŸŸä¿¡æ¯ç¼–è¾‘é¡µçš„å¼€å‘</h3><pre><code class="html">&lt;!--pages/operation/operation.wxml--&gt;&lt;view class=&quot;container&quot;&gt;  &lt;form bindsubmit=&#39;formSubmit&#39; bindreset=&#39;formReset&#39;&gt;    &lt;!-- è¾“å…¥æ¡†  --&gt;    &lt;view class=&#39;row&#39;&gt;      &lt;text&gt;åŒºåŸŸåï¼š&lt;/text&gt;      &lt;input type=&#39;text&#39; name=&#39;areaName&#39; placeholder=&#39;è¯·è¾“å…¥åŒºåŸŸå&#39; value=&#39;{{areaName}}&#39;/&gt;    &lt;/view&gt;    &lt;view class=&#39;row&#39;&gt;      &lt;text&gt;ä¼˜å…ˆçº§ï¼š&lt;/text&gt;      &lt;input type=&#39;number&#39; name=&#39;priority&#39; placeholder=&#39;æ•°å€¼è¶Šå¤§è¶Šé å‰&#39; value=&#39;{{priority}}&#39;/&gt;    &lt;/view&gt;    &lt;!-- æŒ‰é’®  --&gt;    &lt;view class=&#39;row&#39;&gt;      &lt;button type=&#39;primary&#39; form-type=&#39;submit&#39;&gt;æäº¤&lt;/button&gt;      &lt;button type=&#39;primary&#39; form-type=&#39;reset&#39;&gt;æ¸…ç©º&lt;/button&gt;    &lt;/view&gt;  &lt;/form&gt;&lt;/view&gt;</code></pre><ul><li>åŒºåŸŸä¿¡æ¯æ·»åŠ </li><li>åŒºåŸŸä¿¡æ¯æ›´æ–°</li></ul><ul><li><p>é¡µé¢çš„åˆå§‹æ•°æ®</p><pre><code class="javascript">data: {  areaId: undefined,  areaName: &#39;&#39;,  priority: &#39;&#39;,  addUrl: &#39;http://127.0.0.1:8888/demo/superadmin/addarea&#39;,  modifyUrl: &#39;http://127.0.0.1:8888/demo/superadmin/modifyarea&#39;}</code></pre></li><li><p>ç¼–è¾‘é¡µè·å–åŒºåŸŸä¿¡æ¯</p><pre><code class="javascript">onLoad: function(options) {  var that = this;  // é¡µé¢åˆå§‹åŒ– optionsä¸ºé¡µé¢è·³è½¬æ‰€å¸¦æ¥çš„å‚æ•°  this.setData({    areaId: options.areaId  });  if (options.areaId == undefined) {    return;  }  // å‘åç«¯å‘é€è¯·æ±‚ï¼Œè·å–areaIdçš„åŒºåŸŸä¿¡æ¯  wx.request({    url: &#39;http://127.0.0.1:8888/demo/superadmin/getareabyid&#39;,    data: {      &quot;areaId&quot;: options.areaId    },    method: &#39;GET&#39;,    success: function(res) {      var area = res.data.area;      if (area == undefined) {        var toastText = &quot;è·å–æ•°æ®å¤±è´¥&quot; + res.data.errMsg;        wx.showToast({          title: toastText,          icon: &#39;&#39;,          duration: 2000        });      } else {        that.setData({          areaName: area.areaName,          priority: area.priority        });      }    }  })}</code></pre></li><li><p>æäº¤åŒºåŸŸä¿¡æ¯è¡¨å•</p><pre><code class="javascript">formSubmit: function (e) {  var that = this;  // é»˜è®¤ä¸ºæ–°å¢æ“ä½œ  var formData = e.detail.value;  var url = that.data.addUrl;  // å¦‚æœareaIdä¸ä¸ºç©ºï¼Œåˆ™ä¸ºæ›´æ–°æ“ä½œ  if (that.data.areaId != undefined) {    formData.areaId = that.data.areaId;    url = that.data.modifyUrl;  }  wx.request({    url: url,    data: JSON.stringify(formData),    method: &#39;POST&#39;,    header: {      &#39;Content-Type&#39;: &#39;application/json&#39;    },    success: function(res) {      var result = res.data.success;      var toastText = &quot;æ“ä½œæˆåŠŸ&quot;;      if (result != true) {        toastText = &quot;æ“ä½œå¤±è´¥&quot; + res.data.errMsg;      }      wx.showToast({        title: toastText,        icon: &#39;&#39;,        duration: 2000      });      if (that.data.areaId == undefined) {        wx.redirectTo({          url: &#39;../list/list&#39;        })      }    }  });}</code></pre></li></ul><h3 id="4-9-åŒºåŸŸä¿¡æ¯ç¼–è¾‘é¡µçš„è”è°ƒ"><a href="#4-9-åŒºåŸŸä¿¡æ¯ç¼–è¾‘é¡µçš„è”è°ƒ" class="headerlink" title="4-9 åŒºåŸŸä¿¡æ¯ç¼–è¾‘é¡µçš„è”è°ƒ"></a>4-9 åŒºåŸŸä¿¡æ¯ç¼–è¾‘é¡µçš„è”è°ƒ</h3><h2 id="ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“ä¸å±•æœ›"><a href="#ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“ä¸å±•æœ›" class="headerlink" title="ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“ä¸å±•æœ›"></a>ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“ä¸å±•æœ›</h2><blockquote><p>ä»æ•´ä½“ä¸Šå¤ä¹ ä¸‹æœ¬é—¨è¯¾ç¨‹çš„çŸ¥è¯†ç‚¹</p></blockquote><ol><li>HelloWorld Controller</li><li>è¡¨è®¾è®¡å’Œå®ä½“ç±»çš„åˆ›å»º</li><li>daoå±‚é…ç½®ï¼šmybatis-configï¼Œ</li><li>serviceå±‚é…ç½®ï¼šäº‹åŠ¡ï¼Œæ¥å£åŠå®ç°ç±»</li><li>Controllerå±‚ï¼šå¢åˆ æ”¹æŸ¥</li><li>å¾®ä¿¡å°ç¨‹åºï¼Œå¾®ä¿¡å¼€å‘è€…å·¥å…·</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>993-MySQLé›†ç¾¤ï¼ˆPXCï¼‰å…¥é—¨</title>
      <link href="/imooc/993-MySQL-PXC/"/>
      <url>/imooc/993-MySQL-PXC/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/993" target="_blank" rel="noopener">https://www.imooc.com/learn/993</a></p><p>ç®€ä»‹ï¼šæœ¬è¯¾ç¨‹ä»¥é¡¹ç›®æ¼”ç¤ºä¸ºä¾‹ï¼Œè®²è§£PXCé›†ç¾¤åŸç†ã€PXCæ•°æ®åŒæ­¥ä¸ReplicationåŒæ­¥çš„åŒºåˆ«ã€PXCçš„å¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥ã€Dockerè™šæ‹Ÿæœºéƒ¨ç½²MySQLé›†ç¾¤ï¼Œå¹¶ä»¥æ¡ˆä¾‹éªŒè¯Replicationæ–¹æ¡ˆçš„æ•°æ®ä¸ä¸€è‡´æ€§ã€PXCæ–¹æ¡ˆæ•°æ®ä¸€è‡´æ€§</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p> æœ¬ç« æ€»ä½“ä»‹ç»æœ¬è¯¾ç¨‹å­¦ä¹ çš„ç›®æ ‡å’Œå­¦åˆ°çš„çŸ¥è¯†ã€‚</p></blockquote><h3 id="1-1-å¼•è¨€"><a href="#1-1-å¼•è¨€" class="headerlink" title="1-1 å¼•è¨€"></a>1-1 å¼•è¨€</h3><p>å¼•è¨€ï¼š</p><ul><li><p>ä¼´éšäº’è”ç½‘ç»æµçš„å…´èµ·ï¼Œè¶Šæ¥è¶Šå¤šçš„é¢†åŸŸéœ€è¦ç›¸åº”çš„æŠ€æœ¯æ–¹æ¡ˆ</p></li><li><p>è¡Œä¸šï¼šæ‰“è½¦è½¯ä»¶ã€ç”µå•†å¹³å°ã€ç›´æ’­å¹³å°ã€ç”µå­æ”¯ä»˜ã€åª’ä½“ç¤¾äº¤</p></li><li><p>æ¡ˆä¾‹ï¼šæ»´æ»´å‡ºè¡Œã€æ·˜å®/äº¬ä¸œã€æ–—é±¼ç›´æ’­ã€æ”¯ä»˜å®/å¾®ä¿¡ã€QQ</p></li></ul><p>å•æœºå•èŠ‚ç‚¹æ•°æ®åº“æ²¡æœ‰å†—ä½™è®¾è®¡ï¼Œå¦‚æœæ•°æ®åº“èŠ‚ç‚¹æŒ‚æ‰ï¼ˆæ–­ç”µã€æ–­ç½‘ï¼‰ï¼Œåˆ™å…¨éƒ¨ä¸èƒ½ä½¿ç”¨ï¼ˆç½‘ç«™ä¸èƒ½è®¿é—®ï¼‰</p><p>ä½¿ç”¨å†—ä½™è®¾è®¡ï¼Œå³æ•°æ®åº“èŠ‚ç‚¹é›†ç¾¤åœ¨ä¸€èµ·ï¼Œæ€§èƒ½ç¿»å€ã€‚æ•°æ®åº“é›†ç¾¤ã€‚</p><p><strong><em>å‘BATé«˜æ ‡å‡†çœ‹é½ã€‚</em></strong></p><h3 id="1-2-å¤©çŒ«åŒåä¸€æ¡ˆä¾‹"><a href="#1-2-å¤©çŒ«åŒåä¸€æ¡ˆä¾‹" class="headerlink" title="1-2 å¤©çŒ«åŒåä¸€æ¡ˆä¾‹"></a>1-2 å¤©çŒ«åŒåä¸€æ¡ˆä¾‹</h3><p>å¤©çŒ«åŒåä¸€ï¼š</p><ul><li>2017å¹´å¤©çŒ«åŒ11äº¤æ˜“é¢1682äº¿å…ƒï¼Œ3åˆ†é’Ÿç ´ç™¾äº¿ï¼Œ9å°æ—¶ç ´å¹²äº¿</li><li>äº¤æ˜“å³°å€¼32.5ä¸‡/ç§’ï¼Œæ”¯ä»˜å³°å€¼25.6ä¸‡/ç§’ï¼Œæ•°æ®åº“å³°å€¼4200ä¸‡/ç§’</li><li>äº‘æœåŠ¡å™¨ã€è´Ÿè½½å‡è¡¡ã€RDSäº‘æ•°æ®åº“ç­‰æŠ€æœ¯</li></ul><p>æ·˜å®/å¤©çŒ«ä½¿ç”¨3000+å°æ•°æ®åº“</p><h3 id="1-3-å¾®ä¿¡çº¢åŒ…æ¡ˆä¾‹"><a href="#1-3-å¾®ä¿¡çº¢åŒ…æ¡ˆä¾‹" class="headerlink" title="1-3 å¾®ä¿¡çº¢åŒ…æ¡ˆä¾‹"></a>1-3 å¾®ä¿¡çº¢åŒ…æ¡ˆä¾‹</h3><p>å¾®ä¿¡çº¢åŒ…ï¼š</p><ul><li>2017å¹´é™¤å¤•å½“å¤©ï¼Œå…¨å›½äººæ°‘æ€»å…±æ”¶å‘142äº¿ä¸ªçº¢åŒ…ï¼Œå³°å€¼42ä¸‡/ç§’</li><li>å¤®è§†æ˜¥æ™šå¾®ä¿¡æ‘‡ä¸€æ‘‡äº’åŠ¨æ€»é‡è¾¾110äº¿æ¬¡ï¼Œå³°å€¼8.1äº¿/ç§’</li><li>è¯·æ±‚æ’é˜Ÿä¸²è¡ŒåŒ–ã€åŒç»´åº¦åˆ†åº“è¡¨ç­‰è®¾è®¡</li></ul><h3 id="1-4-æŠ€æœ¯å­¦ä¹ çš„ç›®æ ‡å’Œæ–¹å¼"><a href="#1-4-æŠ€æœ¯å­¦ä¹ çš„ç›®æ ‡å’Œæ–¹å¼" class="headerlink" title="1-4 æŠ€æœ¯å­¦ä¹ çš„ç›®æ ‡å’Œæ–¹å¼"></a>1-4 æŠ€æœ¯å­¦ä¹ çš„ç›®æ ‡å’Œæ–¹å¼</h3><p>æŠ€æœ¯å­¦ä¹ çš„ç›®æ ‡å’Œæ–¹å¼</p><ul><li>å‘å¤§å‹äº’è”ç½‘åº”ç”¨çœ‹é½ï¼Œå­¦ä¹ æ¶æ„è®¾è®¡å’Œä¸šåŠ¡å¤„ç†</li><li>ç”±æµ…å…¥æ·±ï¼Œå¾ªåºæ¸è¿›ï¼›æ¡ˆä¾‹ç”±å°åˆ°å¤§ï¼Œé€æ­¥æ‰©å±•</li><li>â€œè§†é¢‘å­¦ä¹ â€ä¼˜äºâ€œçœ‹ä¹¦å­¦ä¹ â€</li></ul><h3 id="1-5-è¯¾ç¨‹å­¦ä¹ ç›®æ ‡"><a href="#1-5-è¯¾ç¨‹å­¦ä¹ ç›®æ ‡" class="headerlink" title="1-5 è¯¾ç¨‹å­¦ä¹ ç›®æ ‡"></a>1-5 è¯¾ç¨‹å­¦ä¹ ç›®æ ‡</h3><p>æœ¬é—¨è¯¾ç¨‹å­¦ä¹ ç›®æ ‡</p><ul><li><p>æŒæ¡PXCé›†ç¾¤MySQLæ–¹æ¡ˆçš„åŸç†</p></li><li><p>æŒæ¡PXCé›†ç¾¤çš„å¼ºä¸€è‡´æ€§</p></li><li><p>æŒæ¡PXCé›†ç¾¤çš„é«˜å¯ç”¨æ–¹æ¡ˆ</p></li></ul><h3 id="1-6-ç¡¬ä»¶ç¯å¢ƒä»‹ç»"><a href="#1-6-ç¡¬ä»¶ç¯å¢ƒä»‹ç»" class="headerlink" title="1-6 ç¡¬ä»¶ç¯å¢ƒä»‹ç»"></a>1-6 ç¡¬ä»¶ç¯å¢ƒä»‹ç»</h3><p>ç¡¬ä»¶ç¯å¢ƒéœ€æ±‚</p><ul><li>Win10Ã—64ä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆ/Linux/MacOS</li><li>Dockerè™šæ‹Ÿæœº</li><li>å†…å­˜8GBä»¥ä¸Š</li></ul><pre><code class="shell">docker ps -apxc * 3 + haproxy * 1</code></pre><h2 id="ç¬¬2ç« -PXCåŸç†"><a href="#ç¬¬2ç« -PXCåŸç†" class="headerlink" title="ç¬¬2ç«  PXCåŸç†"></a>ç¬¬2ç«  PXCåŸç†</h2><blockquote><p>æœ¬ç« ä»‹ç»æ•°æ®åº“é›†ç¾¤çš„å¿…è¦æ€§ï¼Œä»¥é¡¹ç›®æ¼”ç¤ºåœ¨æ•°æ®åº“é›†ç¾¤ã€Tomcaté›†ç¾¤ã€Redisé›†ç¾¤ã€Nginxè´Ÿè½½å‡è¡¡çš„éƒ¨ç½²ç¯å¢ƒä¸‹ï¼Œåå°ç¨‹åºé‡åˆ°å„ç§å®•æœºï¼Œä½†æ˜¯åå°ç¨‹åºä»ç„¶é«˜å¯ç”¨ï¼Œæœ€åä»‹ç»PXCæ•°æ®åŒæ­¥çš„åŸç†ã€‚</p></blockquote><h3 id="2-1-å•èŠ‚ç‚¹æ•°æ®åº“çš„ä»‹ç»"><a href="#2-1-å•èŠ‚ç‚¹æ•°æ®åº“çš„ä»‹ç»" class="headerlink" title="2-1 å•èŠ‚ç‚¹æ•°æ®åº“çš„ä»‹ç»"></a>2-1 å•èŠ‚ç‚¹æ•°æ®åº“çš„ä»‹ç»</h3><p>æ•°æ®åº“é›†ç¾¤çš„å¿…è¦æ€§</p><p>å•èŠ‚ç‚¹æ•°æ®åº“çš„å¼Šç—…ï¼š<br>æƒ…å†µè¯´æ˜</p><ul><li>å¤§å‹äº’è”ç½‘ç¨‹åºç”¨æˆ·ç¾¤ä½“åºå¤§ï¼Œæ‰€ä»¥æ¶æ„å¿…é¡»è¦ç‰¹æ®Šè®¾è®¡</li><li>å•èŠ‚ç‚¹çš„æ•°æ®åº“æ— æ³•æ»¡è¶³æ€§èƒ½ä¸Šçš„è¦æ±‚</li><li>å•èŠ‚ç‚¹çš„æ•°æ®åº“æ²¡æœ‰å†—ä½™è®¾è®¡ï¼Œæ— æ³•æ»¡è¶³é«˜å¯ç”¨</li></ul><p>å•èŠ‚ç‚¹æ•°æ®åº“å‹åŠ›æµ‹è¯•ï¼š</p><ul><li><p>æµ‹è¯•æ¡ˆä¾‹</p><pre><code class="mysql">mysqlslap -hlocalhost -uroot -p123456 -P3306# å¹¶å‘é‡5000è¿æ¥--concurrency=5000 --iterations=1 --auto-generate-sql--auto-generate-sql-load-type=mixed--auto-generate-sql-add-autoincrement--engine=innodb# å…±æµ‹è¯•5000æ¡SQLè¯­å¥--number-of-queries=5000--debug-info</code></pre></li><li><p>æµ‹è¯•ç»“æœ</p><pre><code class="bash">Benchmark    Running for engine innodb    Average number of seconds to run all queries: 0.234 seconds    Minimum number of seconds to run all queries:0.234 seconds    Maximum number of seconds to run all queries:0.234 seconds    Number of clients running queries:100    Average number of queries per client50Benchmark    Running for engine innodb    Average number of seconds to run all queries: 1.656 seconds    Minimum number of seconds to run all queries:1.656 seconds    Maximum number of seconds to run all queries:1.656 seconds    Number of clients running queries:500    Average number of queries per clien:10Benchmark    Running for engine innodb    Average number of seconds to run all queries: 2.187 seconds    Minimum number of seconds to run all queries:2.187 seconds    Maximum number of seconds to run all queries:2.187 seconds    Number of clients running queries:1000    Average number of queries per client:5</code></pre><p>å¹¶å‘100ã€500å’Œ1000ä¸ªè¿æ¥ï¼Œæ‰§è¡Œ5000æ¬¡æŸ¥è¯¢ï¼Œå•èŠ‚ç‚¹æ•°æ®è¿˜å¯ä»¥æ­£å¸¸åº”å¯¹ï¼Œæ²¡æœ‰å¤ªå¤§çš„é—®é¢˜ã€‚</p><p>å½“å¹¶å‘10000ä¸ªè¿æ¥æ‰§è¡Œ10000æ¬¡æŸ¥è¯¢ï¼Œæ•°æ®åº“åˆ™ä¼šæ‹’ç»ä¸€éƒ¨åˆ†è¯·æ±‚ï¼Œä»…å®Œæˆå¦ä¸€éƒ¨åˆ†æ¥æ”¶çš„è¯·æ±‚ã€‚</p></li></ul><h3 id="2-2-PXCé›†ç¾¤æ–¹æ¡ˆ"><a href="#2-2-PXCé›†ç¾¤æ–¹æ¡ˆ" class="headerlink" title="2-2 PXCé›†ç¾¤æ–¹æ¡ˆ"></a>2-2 PXCé›†ç¾¤æ–¹æ¡ˆ</h3><p>å•èŠ‚ç‚¹æ•°æ®åº“çš„é«˜å¯ç”¨æµ‹è¯•ï¼š</p><p>æµ‹è¯•æ¡ˆä¾‹</p><ul><li><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifkl2e6j30jl08qwes.jpg"  width="350" alt="å•èŠ‚ç‚¹æ•°æ®åº“çš„é«˜å¯ç”¨æµ‹è¯•"/></li></ul><p>MySQLé«˜æ€§èƒ½é«˜å¯ç”¨é›†ç¾¤æ–¹æ¡ˆï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifm5x9cj31do0lo0wr.jpg"  width="600" alt="MySQLé«˜æ€§èƒ½é«˜å¯ç”¨é›†ç¾¤æ–¹æ¡ˆ"/><p>MySQLå•è¡¨æ•°æ®é‡ä¸èƒ½è¶…è¿‡2000ä¸‡æ¡ã€‚æ€§èƒ½æé€Ÿä¸‹é™ã€‚ </p><p>Mycatï¼šå›½å†…ä¸»æµæ•°æ®åˆ‡åˆ†ä¸­é—´ä»¶ï¼Œé˜¿é‡Œå·´å·´å¼€æºã€Javaç¼–å†™ã€è·¨å¹³å°ã€‚</p><p>åˆ†ç‰‡ï¼šåˆ©ç”¨Mycatåˆ‡åˆ†åï¼Œä¸€ç»„é›†ç¾¤å°±å«ä¸€ä¸ªåˆ†ç‰‡ã€‚</p><p>åˆ‡åˆ†ç®—æ³•</p><ul><li><p>æŒ‰ç…§æ—¥æœŸã®ï¼ˆå¹´ä»½/æœˆä»½/å¤©ï¼‰è¿›è¡Œåˆ‡åˆ†åˆ‡åˆ†</p></li><li><p>æŒ‰ç…§æŸä¸€åˆ—çš„å›ºå®šå€¼ï¼ˆä¸»é”®IDï¼Œå¯¹åˆ†ç‰‡æ•°2æ±‚ä½™ï¼‰åˆ‡åˆ†</p></li></ul><p>PXCâ€“&gt;HAâ€“&gt;Mycat</p><p>PXCæ•°æ®è¯»å†™æ˜¯å¼ºä¸€è‡´æ€§ï¼Œä½†æ˜¯ç‰ºç‰²äº†æ€§èƒ½</p><h3 id="2-3-Replicationé›†ç¾¤æ–¹æ¡ˆ"><a href="#2-3-Replicationé›†ç¾¤æ–¹æ¡ˆ" class="headerlink" title="2-3 Replicationé›†ç¾¤æ–¹æ¡ˆ"></a>2-3 Replicationé›†ç¾¤æ–¹æ¡ˆ</h3><p>ååŒè¿‡æ»¤ç®—æ³•ï¼š</p><ul><li>æµè§ˆè®°å½•ä¼šäº§ç”Ÿæ—¥å¿—æ•°æ®ï¼Œå°†æ—¥å¿—æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚å¤§æ•°æ®ç®—æ³•æ ¹æ®æ—¥å¿—æ•°æ®åˆ†æå½“å‰ç”¨æˆ·è¡Œä¸ºï¼Œæ‰¾å‡ºä¸ä¹‹ç›¸åŒå…´è¶£çš„ç”¨æˆ·ï¼Œç„¶åå‘å½“å‰ç”¨æˆ·æ¨èå…¶ä»–ç”¨æˆ·çš„å–œå¥½çš„å•†å“ã€æ–°é—»ã€‚</li></ul><p>å•æ¡æ—¥å¿—æ•°æ®æ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼Œè€Œå¤§é‡æ—¥å¿—æ•°æ®æ‰æœ‰ä½¿ç”¨ä»·å€¼ã€‚æ­¤æ—¶ä¾¿å¯ä»¥ä½¿ç”¨Replicationé›†ç¾¤ã€‚</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifpe3gvj30u00by0tx.jpg"  width="600" alt="MySQLé«˜æ€§èƒ½é«˜å¯ç”¨é›†ç¾¤æ–¹æ¡ˆ"/><p>åº”ç”¨è½¯ä»¶æ•°æ®æ¶æ„ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifn0csaj30ff08mq37.jpg"  width="400" alt="åº”ç”¨è½¯ä»¶æ•°æ®æ¶æ„"/><h3 id="2-4-ç³»ç»Ÿæ¶æ„æ–¹æ¡ˆä»‹ç»"><a href="#2-4-ç³»ç»Ÿæ¶æ„æ–¹æ¡ˆä»‹ç»" class="headerlink" title="2-4 ç³»ç»Ÿæ¶æ„æ–¹æ¡ˆä»‹ç»"></a>2-4 ç³»ç»Ÿæ¶æ„æ–¹æ¡ˆä»‹ç»</h3><p>äº’è”ç½‘å¤§å‹åº”ç”¨æ¶æ„åˆ†æï¼š</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi4w17xoj31000jcjz7.jpg" alt="ç³»ç»Ÿæ¶æ„æ–¹æ¡ˆ"></p><p>äº’è”ç½‘å¤§å‹åº”ç”¨æŠ€æœ¯åˆ†æï¼š</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gi4xg1xfj30vk0k0k16.jpg" alt="ç³»ç»Ÿæ¶æ„æ–¹æ¡ˆ"></p><h3 id="2-5-APPé¡¹ç›®ä»‹ç»"><a href="#2-5-APPé¡¹ç›®ä»‹ç»" class="headerlink" title="2-5 APPé¡¹ç›®ä»‹ç»"></a>2-5 APPé¡¹ç›®ä»‹ç»</h3><p>APPé¡¹ç›®æˆªå›¾ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifo5e3lj310e0h2q5l.jpg"  width="600" alt="APPé¡¹ç›®æˆªå›¾"/><p>ã€ç™»å½•ç•Œé¢ã€‘-ã€æ¬¢è¿ç•Œé¢ã€‘-ã€äººæ‰æ‹›è˜ç•Œé¢ã€‘</p><p>APPé¡¹ç›®æ¶æ„è®¾è®¡ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifjbscbj30s608y0tk.jpg"  width="600" alt="APPé¡¹ç›®æ¶æ„è®¾è®¡"/><p>æœåŠ¡å™¨ç«¯å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨å®ç°ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifowc6lj30p708xwf7.jpg"  width="600" alt="æœåŠ¡å™¨ç«¯å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨å®ç°"/><p>æ¶ˆæ¯é˜Ÿåˆ—å®ç°ä¸šåŠ¡çš„è§£è€¦ã€‚</p><p>ç”Ÿäº§è€…ä¸çŸ¥é“è°æ¥æ¥æ”¶è¿™ä¸ªæ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ä¹Ÿä¸çŸ¥é“æ˜¯å“ªä¸ªç”Ÿäº§è€…å‘æ¥çš„æ¶ˆæ¯ã€‚</p><p>æ¶ˆæ¯é˜Ÿåˆ—çš„ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ol><li>å¼‚æ­¥æ¶ˆæ¯å‘é€ã€‚</li><li>åˆ©ç”¨å¼‚æ­¥æ¶ˆæ¯å‘é€ï¼Œè¿›è¡Œä¸šåŠ¡åŠŸèƒ½çš„è§£è€¦ã€‚å³æŠŠä¸æ˜¯å¼ºä¾èµ–ï¼Œä¸æ˜¯å®æ—¶è¿”å›çš„åŠŸèƒ½åšæˆæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿™æ ·ä¸ç®¡æ˜¯è°ƒç”¨æ–¹è¿˜æ˜¯è¢«è°ƒç”¨æ–¹çš„æ”¹åŠ¨ï¼Œå¯¹å¦ä¸€æ–¹çš„ä¾èµ–å°±ä¼šå‡å°ç”šè‡³æ¶ˆé™¤ã€‚</li></ol><h3 id="2-6-Dockerè™šæ‹Ÿæœºéƒ¨ç½²MySQLé›†ç¾¤"><a href="#2-6-Dockerè™šæ‹Ÿæœºéƒ¨ç½²MySQLé›†ç¾¤" class="headerlink" title="2-6 Dockerè™šæ‹Ÿæœºéƒ¨ç½²MySQLé›†ç¾¤"></a>2-6 Dockerè™šæ‹Ÿæœºéƒ¨ç½²MySQLé›†ç¾¤</h3><p>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</p><pre><code class="shell">docker ps -a</code></pre><h3 id="2-7-APPé¡¹ç›®æ¼”ç¤º"><a href="#2-7-APPé¡¹ç›®æ¼”ç¤º" class="headerlink" title="2-7 APPé¡¹ç›®æ¼”ç¤º"></a>2-7 APPé¡¹ç›®æ¼”ç¤º</h3><p>å¦‚æœPXCé›†ç¾¤ä¸­çš„ä¸»æœºæŒ‚æ‰çš„æ•°ç›®è¶…è¿‡ä¸€åŠï¼Œåˆ™å…¶å®ƒä¹Ÿä¸èƒ½æä¾›æœåŠ¡</p><p>å¤§å­¦æ‰€å‚¨å¤‡çŸ¥è¯†åšå‡ºçš„é¡¹ç›®ï¼š</p><ol><li><p>æ€§èƒ½ä¸è¶³</p></li><li><p>æ•…éšœæŠµå¾¡èƒ½åŠ›ä¸è¶³</p></li></ol><h3 id="2-8-PXCç®€ä»‹"><a href="#2-8-PXCç®€ä»‹" class="headerlink" title="2-8 PXCç®€ä»‹"></a>2-8 PXCç®€ä»‹</h3><p>Percona XtraDB Cluster</p><ul><li>PXCé€šè¿‡Galeraå°†ä¸åŒçš„MySQLå®ä¾‹è¿æ¥èµ·æ¥ï¼Œå®ç°å¤šä¸»æœºç¾¤</li><li>PXCåŸºäºPercona Serverï¼ˆæ€§èƒ½è¾ƒMySQLæœ‰æ˜¾è‘—æå‡ï¼‰</li><li>PXCæ˜¯ä¼—å¤šMySQLé›†ç¾¤æ–¹æ¡ˆçš„ä¸€ç§</li></ul><p>PXCæ–¹æ¡ˆä¸Replicationæ–¹æ¡ˆå¯¹æ¯”ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gikqijyej30pt0g0my1.jpg"  width="400" alt="PXCæ–¹æ¡ˆ"/><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gikprxo8j30hu0bvglz.jpg"  width="350" alt="Replicationæ–¹æ¡ˆ"/><h3 id="2-9-PXCæµ‹è¯•æ¡ˆä¾‹"><a href="#2-9-PXCæµ‹è¯•æ¡ˆä¾‹" class="headerlink" title="2-9 PXCæµ‹è¯•æ¡ˆä¾‹"></a>2-9 PXCæµ‹è¯•æ¡ˆä¾‹</h3><pre><code class="shell">docker pa -a</code></pre><p>PXCæ–¹æ¡ˆï¼š</p><pre><code class="mysql"># node1CREATE DATABASE test;USE test;# node5CREATE TABLE student(    id INT PRIMARY KEY,    name VARCHAR(200) NOT NULL);# node4INSERT INTO student(id, name)VALUES (1, &quot;Scott&quot;), (2, &quot;Jack&quot;);</code></pre><p>Replicationæ–¹æ¡ˆï¼š</p><pre><code class="mysql"># masterCREATE DATABASE test;USE test;CREATE TABLE student(    id INT PRIMARY KEY,    name VARCHAR(200) NOT NULL);INSERT INTO student    SET id = 1, name = &quot;Scott&quot;;# slaveINSERT INTO student    SET id = 2, name = &quot;Jack&quot;;</code></pre><p>PXCé›†ç¾¤çš„èŠ‚ç‚¹ä¹‹é—´æ˜¯åŒå‘åŒæ­¥ï¼Œæ²¡æœ‰ä¸»ä»ä¹‹åˆ†ã€‚</p><p>Replicationæ˜¯å•å‘åŒæ­¥ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åŒæ­¥åˆ°ä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹ä¹Ÿå¯ä»¥å†™å…¥æ•°æ®ï¼Œä½†ä¸ä¼šåŒæ­¥æ•°æ®åˆ°ä¸»èŠ‚ç‚¹ã€‚</p><p>PXCåŒå‘åŒæ­¥ä»æ¼”ç¤ºçš„è€—æ—¶çœ‹æ¯”Replicationæ…¢6å€ï¼Œä¸€ä¸ªinsertçº¦80å¤šæ¯«ç§’ï¼Œreplicationåªè¦10å¤šæ¯«ç§’ã€‚</p><h3 id="2-10-PXCé›†ç¾¤å·¥ä½œåŸç†"><a href="#2-10-PXCé›†ç¾¤å·¥ä½œåŸç†" class="headerlink" title="2-10 PXCé›†ç¾¤å·¥ä½œåŸç†"></a>2-10 PXCé›†ç¾¤å·¥ä½œåŸç†</h3><p>PXCé›†ç¾¤å·¥ä½œåŸç†ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifqb2j3j31b80rw76u.jpg"  width="800" alt="PXCé›†ç¾¤å·¥ä½œåŸç†"/><p>æ•°æ®çš„åŒæ­¥æ˜¯ç”±PXCå®Œæˆçš„ã€‚</p><p>æ•°æ®åº“äº‹åŠ¡ï¼ŒæŒ‡çš„æ˜¯é€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œç»„æˆè¿™ç»„äº‹åŠ¡çš„æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸã€‚</p><p>ä¸€ä¸ªäº‹åŠ¡è‹¥æœ‰å¤šä¸ªæ“ä½œï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å¼€å¯äº‹åŠ¡ã€‚ä¸”è¦æ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼Œæ‰èƒ½å°†æ“ä½œæŒä¹…åŒ–åˆ°æ•°æ®åº“ã€‚</p><h2 id="ç¬¬3ç« -PXCæ•°æ®å¼ºä¸€è‡´æ€§"><a href="#ç¬¬3ç« -PXCæ•°æ®å¼ºä¸€è‡´æ€§" class="headerlink" title="ç¬¬3ç«  PXCæ•°æ®å¼ºä¸€è‡´æ€§"></a>ç¬¬3ç«  PXCæ•°æ®å¼ºä¸€è‡´æ€§</h2><blockquote><p>æœ¬ç« ä»‹ç»PXCå’ŒReplicationä¸¤ç§é›†ç¾¤æ–¹æ¡ˆåœ¨æ•°æ®åŒæ­¥ä¸Šçš„åŒºåˆ«ã€‚</p></blockquote><h3 id="3-1-PXCä¸Replicationæ–¹æ¡ˆä¼˜åŠ£ä»‹ç»"><a href="#3-1-PXCä¸Replicationæ–¹æ¡ˆä¼˜åŠ£ä»‹ç»" class="headerlink" title="3-1 PXCä¸Replicationæ–¹æ¡ˆä¼˜åŠ£ä»‹ç»"></a>3-1 PXCä¸Replicationæ–¹æ¡ˆä¼˜åŠ£ä»‹ç»</h3><p>PXCçš„æ•°æ®å¼ºä¸€è‡´æ€§ï¼š</p><ul><li>åŒæ­¥å¤åˆ¶ï¼Œäº‹åŠ¡åœ¨æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹è¦ä¹ˆåŒæ—¶æäº¤ï¼Œè¦ä¹ˆä¸æäº¤</li><li>Replicationé‡‡ç”¨å¼‚æ­¥å¤åˆ¶ï¼Œæ— æ³•ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</li></ul><p>PXCå’ŒReplicationæ–¹æ¡ˆä¼˜åŠ£ï¼š</p><ul><li><p>Replicationå†™å…¥é€Ÿåº¦å¿«ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</p><p>å¼‚æ­¥å¤åˆ¶ï¼Œåˆ†ä¸ºmasterèŠ‚ç‚¹å’ŒslaveèŠ‚ç‚¹ã€‚</p><p>masterèŠ‚ç‚¹å†™å…¥æ•°æ®æäº¤äº‹åŠ¡åï¼Œå³è¿”å›ç»“æœç»™å®¢æˆ·ç«¯ï¼Œä¸ç®¡slaveèŠ‚ç‚¹çš„æ•°æ®æ˜¯å¦ä¸€è‡´ã€‚</p></li><li><p>PXCå¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä½†æ˜¯å†™å…¥é€Ÿåº·æ…¢</p><p>PXCçš„æ•°æ®å¼ºä¸€è‡´æ€§ç‰ºç‰²äº†é€Ÿåº¦ä¸ºä»£ä»·ã€‚</p><p>èŠ‚ç‚¹é—´åŒæ­¥å¤åˆ¶æ•°æ®ï¼Œå°†äº‹åŠ¡æ‰§è¡Œç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></li><li><p>PXCå’ŒReplicationåªå®ç°äº†æ•°æ®çš„åŒæ­¥ï¼Œæ²¡æœ‰æ•°æ®åˆ‡åˆ†åŠŸèƒ½</p></li></ul><p>PXCä¸Replicationä¸¤ç§æ–¹æ¡ˆç»“åˆï¼š</p><ol><li>é‡è¦æ•°æ®ä¿å­˜åœ¨PXCé›†ç¾¤ã€‚</li><li>éé‡è¦æ•°æ®ï¼ˆæ“ä½œçš„è®°å½•ï¼‰ä¿å­˜åœ¨Replicationé›†ç¾¤</li></ol><p>å½“MySQLå•è¡¨æ•°æ®é‡è¶…è¿‡2000ä¸‡æ¡æ—¶ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œæ•°æ®åˆ‡åˆ†ï¼Œå³åˆ©ç”¨ä¸¤ä¸ªç”šè‡³å¤šä¸ªé›†ç¾¤æ¥å­˜å‚¨ä¸åŒçš„æ•°æ®</p><p>é˜¿é‡Œå·´å·´å¼€æºä¸­é—´ä»¶MyCatå¯ä»¥å°†ä¸¤ä¸ªé›†ç¾¤åšæ•°æ®åˆ‡åˆ†</p><h3 id="3-2-PXCä¸Replicationæ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”"><a href="#3-2-PXCä¸Replicationæ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”" class="headerlink" title="3-2 PXCä¸Replicationæ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”"></a>3-2 PXCä¸Replicationæ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”</h3><p>PXCå’ŒReplicationæ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”ï¼š</p><ul><li>2016å¹´æ˜¥èŠ‚ï¼Œå¾®ä¿¡çº¢åŒ…æ”¯ä»˜å³°å€¼15.8ä¸‡æ¬¡/ç§’ï¼Œåˆ›ä¸‹ä¸–ç•Œçºªå½•</li><li>2017å¤©çŒ«åŒ11ï¼Œæ•°æ®åº“å³°å€¼4200ä¸‡æ¬¡/ç§’ï¼Œæ”¯ä»˜å³°å€¼25.6ä¸‡æ¬¡/ç§’</li></ul><p>PXCé›†ç¾¤æ³¨æ„ï¼š</p><ol><li><p>PXCé›†ç¾¤è§„æ¨¡ä¸èƒ½å¤ªå¤§</p></li><li><p>PXCé›†ç¾¤æ€§èƒ½ç“¶é¢ˆä¸åœ¨äºæ€§èƒ½æœ€å¥½çš„èŠ‚ç‚¹ï¼Œè€Œåœ¨äºæ€§èƒ½æœ€å·®çš„èŠ‚ç‚¹</p><p>å°½é‡ä¿è¯èŠ‚ç‚¹çš„é…ç½®ä¸€è‡´</p></li></ol><p>PXCå’ŒReplicationç»„åˆæ–¹æ¡ˆï¼š</p><ul><li><p>PXCæ–¹æ¡ˆå­˜å‚¨é«˜ä»·å€¼æ•°æ®ï¼Œå¦‚ï¼šè´¦æˆ·ã€è®¢å•ã€äº¤æ˜“ç­‰ç­‰</p></li><li><p>Replicationæ–¹æ¡ˆå­˜å‚¨ä½ä»·å€¼æ•°æ®ï¼Œå¦‚ï¼šæƒé™ã€é€šçŸ¥ã€æ—¥å¿—ç­‰ç­‰</p></li><li><p>ç”¨MyCatæˆ–JDBC-Shardingåˆ‡åˆ†æ•°æ®ç®¡ç†é›†ç¾¤</p><p>æŒ‰ç…§ä¸»é”®IDå€¼ã€å¹´æœˆæ—¥ã€æŸä¸€å­—æ®µç­‰ç­‰è¿›è¡Œåˆ‡åˆ†</p></li></ul><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifk38zsj30h505iq32.jpg"  width="400" alt="PXCé›†ç¾¤å·¥ä½œåŸç†"/><p>MyCatæœ¬èº«ä¹Ÿéœ€è¦é«˜å¯ç”¨ã€éœ€å†—ä½™è®¾è®¡ã€‚</p><p>æ­å»ºä¸¤ä¸ªMyCatï¼Œå†ç”¨Linuxçš„è™šæ‹ŸIPæŠ€æœ¯è™šæ‹Ÿä¸€ä¸ªIPä¾›å®¢æˆ·ç«¯ç¨‹åºè®¿é—®ï¼Œå†ç”±ä¸¤ä¸ªMyCatå»äº‰æŠ¢è¿™ä¸ªè™šæ‹ŸIPï¼Œå¦‚æœå“ªä¸ªMyCatæŒ‚äº†ï¼Œå¦ä¸€ä¸ªMyCatå°±ä¼šæ¥æ”¶åˆ°è¿™ä¸ªIPç»§ç»­æä¾›æœåŠ¡ã€‚</p><h3 id="3-3-æ¡ˆä¾‹éªŒè¯Replicationæ–¹æ¡ˆçš„æ•°æ®ä¸ä¸€è‡´æ€§"><a href="#3-3-æ¡ˆä¾‹éªŒè¯Replicationæ–¹æ¡ˆçš„æ•°æ®ä¸ä¸€è‡´æ€§" class="headerlink" title="3-3 æ¡ˆä¾‹éªŒè¯Replicationæ–¹æ¡ˆçš„æ•°æ®ä¸ä¸€è‡´æ€§"></a>3-3 æ¡ˆä¾‹éªŒè¯Replicationæ–¹æ¡ˆçš„æ•°æ®ä¸ä¸€è‡´æ€§</h3><p>æ¡ˆä¾‹ä»‹ç»ï¼š</p><ul><li><p>æ­å»ºä¸€ç»„ä¸¤èŠ‚ç‚¹çš„Replicationé›†ç¾¤</p></li><li><p>ä½¿ç”¨MyCatå®ç°Masterå’ŒSlaveèŠ‚ç‚¹çš„è¯»å†™åˆ†ç¦»</p></li><li><p>è®¾ç½®é˜²ç«å¢™ç½‘ç»œè§„åˆ™ï¼ŒMasterå’ŒSlaveä¹‹é—´ç¦æ­¢è®¿é—®ï¼Œæ–­å¼€åŒæ­¥</p><p>æ³¨ï¼š</p><ul><li>MyCaté»˜è®¤ç«¯å£8066</li></ul><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifj5gsbj30s608y0tk.jpg"  width="400" alt="Replicationæ–¹æ¡ˆæ¡ˆä¾‹ä»‹ç»"/></li></ul><p>æ­¥éª¤ï¼š</p><ol><li><p>åœ¨Masteråˆ›å»ºæ•°æ®åº“ã€æ•°æ®è¡¨ï¼ŒåŒæ—¶æ’å…¥ä¸¤æ¡æ•°æ®ï¼š</p><pre><code class="mysql"># masterCREATE DATABASE test;USE test;CREATE TABLE student(    id INT PRIMARY KEY,    name VARCHAR(200) NOT NULL);INSERT INTO student(id, name)VALUES (1, &quot;Scott&quot;), (2, &quot;Jack&quot;);</code></pre><p>MyCaté…ç½®æ–‡ä»¶ä»‹ç»ï¼š</p><pre><code class="xml">&lt;!-- schema.xml --&gt;&lt;dataHost describe=&quot;é…ç½®æ•°æ®åº“è¿æ¥&quot;&gt;    &lt;heartbeat describe=&quot;å¿ƒè·³æ£€æµ‹ï¼Œå®æ—¶æ£€æµ‹MySQLèŠ‚ç‚¹æ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœMySQLèŠ‚ç‚¹æŒ‚æ‰ï¼Œåˆ™å‘å†—ä½™èŠ‚ç‚¹å‘é€è¯·æ±‚&quot;&gt;    &lt;/heartbeat&gt;    &lt;writeHost describe=&quot;å†™èŠ‚ç‚¹ã€‚Master&quot;&gt;        &lt;readHost describe=&quot;è¯»èŠ‚ç‚¹ã€‚Slave&quot;&gt;&lt;/readHost&gt;    &lt;/writeHost&gt;&lt;/dataHost&gt;</code></pre></li><li><p>åœ¨MyCatæŸ¥è¯¢æ•°æ®è¡¨å¯ä»¥æŸ¥çœ‹åˆ°ä¸¤æ¡æ•°æ®ï¼š</p><pre><code class="mysql"># MyCatSELECT * FROM student;</code></pre></li><li><p>å…³é—­Masterä¸Slaveä¹‹é—´çš„åŒæ­¥è®¾ç½®ï¼š</p><p>åŒæ­¥æ“ä½œæ˜¯åœ¨SlaveèŠ‚ç‚¹é…ç½®çš„ã€‚</p><pre><code class="mysql"># slaveSHOW SLAVE STATUS;# Salve_IO_Running Slave_SQL_Running# YES               YESSTOP SLAVE;# Salve_IO_Running Slave_SQL_Running# NO               NO</code></pre></li><li><p>åœ¨MyCatæ’å…¥ä¸€æ¡æ•°æ®ï¼š</p><pre><code class="mysql"># MyCatINSERT INTO student(id, name)VALUES(3, &quot;admin&quot;);</code></pre></li><li><p>åœ¨MyCatæŸ¥è¯¢æ•°æ®è¡¨å¯ä»¥æŸ¥çœ‹åˆ°åªæœ‰ä¸¤æ¡æ•°æ®ï¼Œæ— æ­¥éª¤4ä¸­æ’å…¥çš„æ•°æ®</p><pre><code class="mysql"># MyCatSELECT * FROM student;</code></pre></li></ol><h3 id="3-4-æ¡ˆä¾‹éªŒè¯PXCæ–¹æ¡ˆæ•°æ®ä¸€è‡´æ€§"><a href="#3-4-æ¡ˆä¾‹éªŒè¯PXCæ–¹æ¡ˆæ•°æ®ä¸€è‡´æ€§" class="headerlink" title="3-4 æ¡ˆä¾‹éªŒè¯PXCæ–¹æ¡ˆæ•°æ®ä¸€è‡´æ€§"></a>3-4 æ¡ˆä¾‹éªŒè¯PXCæ–¹æ¡ˆæ•°æ®ä¸€è‡´æ€§</h3><p>æ¡ˆä¾‹ä»‹ç»ï¼š</p><ul><li><p>æ­å»ºä¸€ç»„ä¸‰èŠ‚ç‚¹çš„PXCé›†ç¾¤</p></li><li><p>ä½¿ç”¨MyCatå®ç°PXCèŠ‚ç‚¹çš„è¯»å†™åˆ†ç¦»</p></li><li><p>è®¾ç½®é˜²ç«å¢™ç½‘ç»œè§„åˆ™ï¼ŒPXCä¹‹é—´ç¦æ­¢è®¿é—®ï¼Œæ–­å¼€åŒæ­¥</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifnems7j30f50863yn.jpg"  width="400" alt="Replicationæ–¹æ¡ˆæ¡ˆä¾‹ä»‹ç»"/></li></ul><pre><code class="shell"># æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker ps -a# è¿›å…¥node1æ•°æ®åº“èŠ‚ç‚¹docker exec -it node1 bashiptables -A INPUT -p tcp --dport 4444 -j DROPiptables -A OUTPUT -p tcp --dport 4444 -j DROPiptables -A INPUT -p tcp --dport 4567 -j DROPiptables -A OUTPUT -p tcp --dport 4567 -j DROPiptables -A INPUT -p tcp --dport 4568 -j DROPiptables -A OUTPUT -p tcp --dport 4568 -j DROP# è¿›å…¥node2æ•°æ®åº“èŠ‚ç‚¹...# è¿›å…¥node3æ•°æ®åº“èŠ‚ç‚¹...</code></pre><h2 id="ç¬¬4ç« -PXCçš„å¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥"><a href="#ç¬¬4ç« -PXCçš„å¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥" class="headerlink" title="ç¬¬4ç«  PXCçš„å¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥"></a>ç¬¬4ç«  PXCçš„å¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥</h2><blockquote><p>æœ¬ç« ä»‹ç»å¹¶æ¼”ç¤ºPXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥å’ŒHaProxyé«˜å¯ç”¨æ–¹æ¡ˆ</p></blockquote><h3 id="4-1-PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥"><a href="#4-1-PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥" class="headerlink" title="4-1 PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥"></a>4-1 PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥</h3><p>å¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥ï¼š</p><ul><li>PXCé›†ç¾¤æ²¡æœ‰ä¸»ä»èŠ‚ç‚¹ä¹‹åˆ†ï¼Œä»»ä½•èŠ‚ç‚¹éƒ½æ˜¯å¯è¯»å¯å†™çš„</li><li>Replicationé›†ç¾¤çš„ä¸»èŠ‚ç‚¹ï¼ˆå†™èŠ‚ç‚¹ï¼‰å®•æœºï¼Œä»èŠ‚ç‚¹ä¸èƒ½è‡ªåŠ¨å‡çº§ä¸ºä¸»èŠ‚ç‚¹</li><li>Replicationé›†ç¾¤å¿…é¡»ä¸ºä¸»èŠ‚ç‚¹è®¾ç½®å†—ä½™èŠ‚ç‚¹ï¼Œè€ŒPXCä¸å¿…è¿™æ ·</li></ul><p>æ¡ˆä¾‹æµ‹è¯•ï¼š</p><ul><li>åˆ©ç”¨Javaç¨‹åºå‘ä¸‰èŠ‚ç‚¹çš„PXCé›†ç¾¤æ¯ä¸ªèŠ‚ç‚¹åŒæ—¶å†™å…¥æ•°æ®</li><li>ç¨‹åºæ‰§è¡Œç»“æŸä¹‹åï¼ŒæŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®æ˜¯å¦åŒæ­¥æ­£ç¡®</li><li>å¾—å‡ºPXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥çš„ç»“è®º</li></ul><p>Javaçº¿ç¨‹ï¼š</p><pre><code class="java">// MyThread.java@Dataclass MyThread extends Thread {    String url;    String username;    String pas sword;    String threadName;    override run() {        var con = DriverManager.getConnection(url, username, password);        var pst = con.prepareStatement(&quot;INSERT INTO student(name) VALUES (?)&quot;);        for(i : 1 ... 50) {            pst.setobject(1, threadName);            pst.execute;            Thread.sleep(5000);        }        con.close();        println(&quot;çº¿ç¨‹æ‰§è¡Œç»“æŸ&quot;);    }}</code></pre><pre><code class="java">// Test.javaclass Test {    def static void main(String[] args) {        var t1=new MyThread(&quot;jdbc: mysq1://127.0.0.1:3306/test?useUnicode=true&amp;characterEncoding=UTF-8&quot;, &quot;root&quot;, &quot;123456&quot;, &quot;Cçº¿ç¨‹&quot;);        var t2=new MyThread(&quot;jdbc: mysql://127.0.0.1:3307/test?useUnicode=true&amp;characterEncoding=UTF-8&quot;, &quot;root&quot;, &quot;123456&quot;, &quot;Cçº¿ç¨‹&quot;);        var t3=new MyThread(&quot;jdbc: mysql://127.0.0.1:3308/test?useUnicode=true&amp;characterEncoding=UTF-8&quot;, &quot;root&quot;, &quot;123456&quot;, &quot;Cçº¿ç¨‹&quot;);        t1. start();        t2. start();        t3. start();    }}</code></pre><p>Javaè¯­æ³•ä¸¥è°¨ã€ä½†å•°å—¦ã€‚</p><p>IBMå¼€å‘äº†Xtendã€SUNå‘å¼€äº†Groovyã€Kotlinç­‰éƒ½æ‰©å±•ç®€åŒ–Javaè¯­æ³•</p><h3 id="4-2-PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥æ¡ˆä¾‹"><a href="#4-2-PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥æ¡ˆä¾‹" class="headerlink" title="4-2 PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥æ¡ˆä¾‹"></a>4-2 PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥æ¡ˆä¾‹</h3><p>åœ¨å·²è®¾ç½®IDä¸»é”®è‡ªå¢çš„æƒ…å†µä¸‹ï¼Œä¸ºä½•PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥çš„ä¸»é”®å€¼ä¸è¿ç»­ï¼Ÿ</p><ul><li>å¤šä¸ªèŠ‚ç‚¹å¹¶å‘å†™å…¥æ—¶åŒæ—¶ç”Ÿæˆäº†ç›¸åŒçš„IDä¸»é”®å€¼ï¼Œæ­¤æ—¶å»åŒæ­¥å…¶ä»–æ•°æ®åº“èŠ‚ç‚¹ä¼šå› ä¸ºIDå€¼è¢«å ç”¨è€Œé©³å›åŒæ­¥ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆä¸€ä¸ªIDä¸»é”®å€¼åå†å‘èµ·åŒæ­¥è¯·æ±‚ã€‚å¦‚ï¼šAèŠ‚ç‚¹ç”¨äº†ä¸»é”®2ï¼ŒBèŠ‚ç‚¹ä¹Ÿ ç”¨äº†ä¸»é”®2ï¼Œè¿™ä¸ªæ—¶å€™åŒæ­¥å°±ä¸èƒ½è¿›è¡Œï¼Œç„¶åBèŠ‚ç‚¹å°±ç”¨äº†ä¸»é”®3ï¼ŒAèŠ‚ç‚¹å°±ç”¨äº†ä¸»é”®4ã€‚</li></ul><p>å¦‚ä½•é¿å…ä¸»é”®å€¼ä¸è¿ç»­ï¼Ÿ</p><ul><li>å°†ä¸»é”®ç”Ÿæˆä»»åŠ¡ä»æ•°æ®åº“æœ¬åœ°ç§»äº¤ç»™æ•°æ®åº“é›†ç¾¤ä¸­é—´ä»¶ï¼Œå¦‚MyCatã€‚ä»è€Œé¿å…å†²çªï¼Œä¸è¿ç»­</li></ul><p>éªŒè¯PXCå¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥æ•°æ®åº“èŠ‚ç‚¹çš„æ•°æ®æ˜¯å¦åŒæ­¥æˆåŠŸï¼š</p><pre><code class="mysql"># node1/node2/node3use test;SELECT COUNT(*) FROM student;</code></pre><p>åŒæ—¶å¤šèŠ‚ç‚¹å¹¶å‘ï¼ˆä¸‰çº¿ç¨‹ï¼‰å†™å…¥50æ¡è®°å½•ï¼Œæœ€ç»ˆæœ‰150æ¡è®°å½•ã€‚</p><p>PXCé›†ç¾¤å¤šèŠ‚ç‚¹å¹¶å‘å†™å…¥éªŒè¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚</p><h3 id="4-3-Haproxyé«˜å¯ç”¨æ–¹æ¡ˆä»‹ç»"><a href="#4-3-Haproxyé«˜å¯ç”¨æ–¹æ¡ˆä»‹ç»" class="headerlink" title="4-3 Haproxyé«˜å¯ç”¨æ–¹æ¡ˆä»‹ç»"></a>4-3 Haproxyé«˜å¯ç”¨æ–¹æ¡ˆä»‹ç»</h3><p>Haproxyé«˜å¯ç”¨æ–¹æ¡ˆï¼š</p><ul><li><p>PXCèŠ‚ç‚¹å¯è¯»å¯å†™ï¼Œåº”è¯¥é‡‡ç”¨è´Ÿè½½å‡è¡¡æŠ€æœ¯ç®¡ç†è¿™äº›èŠ‚ç‚¹</p></li><li><p>ç¨‹åºè®¾è®¡ä¸­ï¼Œæ•°æ®æºæ¥å£åº”è¯¥å•ä¸€ï¼Œå¯¹æ¥è´Ÿè½½å‡è¡¡ä¸­é—´ä»¶</p></li><li><p>Haproxyæ˜¯è‘—åçš„è´Ÿè½½å‡è¡¡ä¸­é—´ä»¶ï¼Œå¾ˆé€‚åˆè´Ÿè½½å‡è¡¡PXCé›†ç¾¤</p><p>æ³¨ï¼š</p><ul><li>NGINXå¯å®ç°Tomcatçš„è´Ÿè½½å‡è¡¡ï¼Œæ˜¯åŸºäºHTTPåè®®çš„ã€‚æœ€è¿‘æ–°ç‰ˆNGINXæ‰æ”¯æŒTCP/IPåè®®ï¼Œäº§å“è¿˜ä¸å¤Ÿæˆç†Ÿã€‚</li><li>æ•…ä½¿ç”¨Haproxyåšæ•°æ®åº“é›†ç¾¤çš„è´Ÿè½½å‡è¡¡ã€‚</li></ul></li></ul><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gifqpcfyj30ho0ajq3e.jpg"  width="400" alt="Haproxyé«˜å¯ç”¨æ–¹æ¡ˆ"/><p>PXCé›†ç¾¤æœ€å¥½æ˜¯å¥‡æ•°æ•°é‡ï¼ˆæœ€å°‘è¦ä¸‰ä¸ªèŠ‚ç‚¹ï¼‰ï¼ŒPXCé›†ç¾¤å¯èƒ½å‡ºç°è„‘è£‚çš„æƒ…å†µ</p><h3 id="4-4-Haproxyé«˜å¯ç”¨æ¡ˆä¾‹1"><a href="#4-4-Haproxyé«˜å¯ç”¨æ¡ˆä¾‹1" class="headerlink" title="4-4 Haproxyé«˜å¯ç”¨æ¡ˆä¾‹1"></a>4-4 Haproxyé«˜å¯ç”¨æ¡ˆä¾‹1</h3><pre><code class="shell"># æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨å®ä¾‹docker ps -a</code></pre><pre><code class="cfg"># haproxy.cfg# é…ç½®ç®¡ç†ç”»é¢listen admin_stats  # ç®¡ç†ä¿¡æ¯çš„åå­—ã€‚å¯éšæ„        bind 0.0.0.0:8888  # ç®¡ç†ç”»é¢çš„IPä¸ç«¯å£ï¼Œä»»ä½•IPåœ°å€å‡å¯è®¿é—®ã€‚        mode http  # ç½‘ç»œåè®®ä½¿ç”¨HTTP        stats uri /dbs  # è®¿é—®URI        stats realm Global\ statistics        stats auth admin:admin  # ç®¡ç†ç”»é¢çš„ç™»å½•è´¦å·å¯†ç # è´Ÿè½½å‡è¡¡listen proxy-mysql  # è´Ÿè½½å‡è¡¡çš„åå­—ã€‚å¯éšæ„        bind 0.0.0.0:3306  # è´Ÿè½½å‡è¡¡çš„å…¥å£IPä¸ç«¯å£ï¼Œä»»ä½•IPåœ°å€å‡å¯è®¿é—®ã€‚        mode tcp  # ç½‘ç»œåè®®ä½¿ç”¨TCPã€‚MySQLé»˜è®¤ä¸ºTCPåè®®ï¼Œä¸èƒ½ä¸ºHTTPåè®®        balance roundrobin  # ä½¿ç”¨è½®è¯¢çš„æ–¹å¼å»åˆ†å‘è¯·æ±‚ï¼ˆåˆ†å‘æƒé‡ï¼‰        option tcplog  # è®°å½•æ—¥å¿—        option mysql-check user haproxy  # å®šæœŸå‘é€å¿ƒè·³æ£€æµ‹ï¼Œâ€˜haproxyâ€™ä¸ºHaproxyå®¹å™¨çš„ç”¨æˆ·å        server MySQL_1 172.18.0.2:3306 check weight 1 maxconn 2000        server MySQL_2 172.18.0.3:3306 check weight 1 maxconn 2000        server MySQL_3 172.18.0.4:3306 check weight 1 maxconn 2000        option tcpka</code></pre><h3 id="4-5-Haproxyé«˜å¯ç”¨æ¡ˆä¾‹2"><a href="#4-5-Haproxyé«˜å¯ç”¨æ¡ˆä¾‹2" class="headerlink" title="4-5 Haproxyé«˜å¯ç”¨æ¡ˆä¾‹2"></a>4-5 Haproxyé«˜å¯ç”¨æ¡ˆä¾‹2</h3><pre><code class="mysql"># haproxyCREATE DATABASE test;USE test;CREATE TABLE student (    id INT PRIMARY KEY,    name VARCHAR(200) NOT NULL);INSERT INTO student(id, name)VALUES (1, &quot;Scott&quot;);</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>867-Dockerå…¥é—¨</title>
      <link href="/imooc/867-Docker/"/>
      <url>/imooc/867-Docker/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/867" target="_blank" rel="noopener">https://www.imooc.com/learn/867</a></p><p>ç®€ä»‹ï¼šæœ¬è¯¾ç¨‹ä»æœ€åŸºç¡€çš„å®‰è£…å¼€å§‹ï¼Œé€šè¿‡å¤§é‡çš„å®é™…æ“ä½œå¾ªåºæ¸è¿›åœ°ä»‹ç»DockeråŸºæœ¬çŸ¥è¯†ã€‚ä»æœ€åŸºæœ¬çš„é•œåƒã€å®¹å™¨å¼€å§‹ï¼Œå­¦ä¹ Dockerfileç¼–å†™ï¼Œå®¹å™¨æ“ä½œï¼Œåˆ°å®Œæˆä¸€ä¸ªå¤šå®¹å™¨çš„åº”ç”¨ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ç®€ä»‹"><a href="#ç¬¬1ç« -è¯¾ç¨‹ç®€ä»‹" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ç®€ä»‹"></a>ç¬¬1ç«  è¯¾ç¨‹ç®€ä»‹</h2><blockquote><p>ä»‹ç»Dockerä»¥åŠå®‰è£…æ–¹å¼</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç»"></a>1-1 è¯¾ç¨‹ä»‹ç»</h3><p>Dockerç®€ä»‹ï¼š</p><blockquote><p>Dockeræ˜¯å®¹å™¨æŠ€æœ¯çš„ä»£è¡¨ã€‚<br>å®¹å™¨æŠ€æœ¯æœ¬è´¨ä¸Šæ˜¯<strong>å°†ç¨‹åºéš”ç¦»ã€æ‰“åŒ…çš„ä¸€ä¸ªæŠ€æœ¯</strong>ã€‚</p></blockquote><p>è§£å†³é—®é¢˜ï¼š</p><blockquote><p><strong>è§£å†³è½¯ä»¶åŒ…å®‰è£…çš„é—®é¢˜</strong><br>ç†é¡ºäº†å¼€å‘ä¸è¿ç»´ç¯å¢ƒçš„å·®å¼‚ï¼Œä½¿å¼€å‘å’Œè¿ç»´å¯ä»¥ä½¿ç”¨åŒä¸€ç§è¯­è¨€è¿›è¡Œæ²Ÿé€š</p></blockquote><p>Dockerå…¥é—¨æ•™ç¨‹</p><blockquote><p>Dockerç®€ä»‹ï¼šä»€ä¹ˆæ˜¯Docker<br>é•œåƒä¸å®¹å™¨<br>å®¹å™¨å­˜å‚¨<br>Registry<br>å¤šå®¹å™¨app</p></blockquote><p>é¢å‘ç”¨æˆ·</p><blockquote><p>å¯¹dockeræ„Ÿå…´è¶£çš„ã€‚å¼€å‘ã€æµ‹è¯•ã€è¿ç»´</p></blockquote><p>é¢„å¤‡çŸ¥è¯†</p><blockquote><p>linuxå‘½ä»¤è¡Œ<br>bash shellè„šæœ¬</p></blockquote><h3 id="1-2-Dockerä»‹ç»"><a href="#1-2-Dockerä»‹ç»" class="headerlink" title="1-2 Dockerä»‹ç»"></a>1-2 Dockerä»‹ç»</h3><p>ä»€ä¹ˆæ˜¯Docker</p><blockquote><p>Docker: an open source project to pack, ship and run any application as a lightweight container.<br>æ˜¯ä¸€ä¸ªå¼€æºçš„é¡¹ç›®ï¼Œå¯ä»¥ä½¿ä»»ä½•åº”ç”¨ä»¥è½»é‡çº§çš„å½¢å¼æ‰“åŒ…ã€å‘å¸ƒå’Œè¿è¡Œ</p><p>Node. js: allows to package an application with all of its dependencies into a standardized unit.<br>å…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–ä»¥ä¸€ç§æ ‡å‡†çš„å•ä½æ¥è¿›è¡Œæ‰“åŒ…</p></blockquote><blockquote><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œå¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œ<br>ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚<br>å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚</p></blockquote><p>ä¸ç°æœ‰æŠ€æœ¯è¿›è¡Œç±»æ¯”</p><blockquote><p>å¯ä»¥ç²—ç³™åœ°ç†è§£ä¸ºè½»é‡çº§çš„è™šæ‹Ÿæœº<br>å¼€æŒ‚çš„chrootï¼ˆchrootï¼šå¯¹åº”ç”¨ç¨‹åºä½œäº†æ–‡ä»¶ç³»ç»Ÿçš„åˆ†ç¦»ï¼‰</p></blockquote><p>Dockerä¸è™šæ‹Ÿæœºï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gif4j6saj30mq0dbdgu.jpg"  width="450" alt="Dockerä¸è™šæ‹Ÿæœº"/><p>æ³¨ï¼š</p><ul><li>å·¦è¾¹ä¸ºè™šæ‹Ÿæœºï¼Œå³è¾¹ä¸ºDocker</li><li>Hypervisorå±‚ï¼šè™šæ‹Ÿå‡ºç¡¬ä»¶</li><li>Guest OSï¼šç¡¬ä»¶ä¸Šå®‰è£…å®Œå…¨ç‹¬ç«‹çš„Guest OS</li><li>Docker Engineï¼šåˆ©ç”¨Namespaceã€Control Groupå°†åº”ç”¨ç¨‹åºåˆ†ç¦»</li><li>Dockeræ²¡æœ‰Hypervisorè™šæ‹Ÿå±‚ï¼Œä¼šè½»é‡å¾ˆå¤š</li></ul><h3 id="1-3-docker-macå®‰è£…"><a href="#1-3-docker-macå®‰è£…" class="headerlink" title="1-3 docker macå®‰è£…"></a>1-3 docker macå®‰è£…</h3><ul><li><p>ä¸‹è½½</p><blockquote><p>å®˜ç½‘åœ°å€ï¼š<a href="https://www.docker.com/" target="_blank" rel="noopener">https://www.docker.com/</a><br>ä¸‹è½½å®‰è£…åŒ…ï¼š<a href="https://www.docker.com/docker-windows" target="_blank" rel="noopener">https://www.docker.com/docker-windows</a></p></blockquote></li><li><p>å®‰è£…</p><blockquote><p>æ‰“å¼€docker<br>open Docker.dmgæˆ–åŒå‡»Docker.dmg<br>å°†Dockeræ‹–åˆ°Applicationsé‡Œé¢</p><p>éªŒè¯å®‰è£…ï¼šdocker info</p></blockquote></li><li><p>é…ç½®</p><blockquote><p>é•œåƒåŠ é€Ÿï¼š</p><p>ã€Preferencesâ€¦ã€‘=&gt;ã€Advancedã€‘=&gt;ã€Registry mirrorsã€‘</p></blockquote></li></ul><h3 id="1-4-docker-linuxå®‰è£…"><a href="#1-4-docker-linuxå®‰è£…" class="headerlink" title="1-4 docker linuxå®‰è£…"></a>1-4 docker linuxå®‰è£…</h3><pre><code class="shell">## Ubuntu# å®‰è£…dockeræœ¬èº«sudo wget -qO- https://get.docker.com | sh# å…è®¸érootç”¨æˆ·è¿è¡Œdockersudo usermod -aG docker tyk# éªŒè¯å®‰è£…docker info</code></pre><p>æ³¨ï¼š</p><ul><li>-qï¼šæ ‡è¯†è¾“å‡ºè¦ç®€å•</li><li>O-ï¼šæ ‡è¯†æ ‡å‡†è¾“å‡ºï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°æ–‡ä»¶</li></ul><pre><code class="shell">## CentOS7# ç³»ç»Ÿ CentOS-Extras åº“ä¸­å·²å¸¦ Dockerï¼Œå¯ä»¥ç›´æ¥å®‰è£…ï¼šsudo yum install docker# å®‰è£…ä¹‹åå¯åŠ¨DockeræœåŠ¡ï¼Œå¹¶è®©å®ƒéšç³»ç»Ÿå¯åŠ¨è‡ªåŠ¨åŠ è½½ã€‚sudo service docker startsudo chkconfig docker on</code></pre><h3 id="1-5-docker-windowså®‰è£…"><a href="#1-5-docker-windowså®‰è£…" class="headerlink" title="1-5 docker windowså®‰è£…"></a>1-5 docker windowså®‰è£…</h3><ul><li><p>ä¸‹è½½</p><blockquote><p>å®˜ç½‘åœ°å€ï¼š<a href="https://www.docker.com/" target="_blank" rel="noopener">https://www.docker.com/</a><br>ä¸‹è½½å®‰è£…åŒ…ï¼š<a href="https://www.docker.com/docker-windows" target="_blank" rel="noopener">https://www.docker.com/docker-windows</a></p></blockquote></li><li><p>å®‰è£…</p><blockquote><p>æ‰§è¡Œå®‰è£…åŒ…ï¼šDocker for Windows Installer.exe</p><p>éªŒè¯å®‰è£…ï¼šdocker info</p></blockquote></li><li><p>é…ç½®</p><blockquote><p>é•œåƒåŠ é€Ÿï¼š</p><p>ã€settingsã€‘=&gt;ã€Daemonã€‘=&gt;ã€Registry mirrorsã€‘</p></blockquote></li></ul><h2 id="ç¬¬2ç« -å®è·µç¬¬ä¸€æ­¥"><a href="#ç¬¬2ç« -å®è·µç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬2ç«  å®è·µç¬¬ä¸€æ­¥"></a>ç¬¬2ç«  å®è·µç¬¬ä¸€æ­¥</h2><blockquote><p>åˆ›å»ºç¬¬ä¸€ä¸ªHello world</p></blockquote><h3 id="2-1-dockeræ¶æ„ä»‹ç»ä¸å®æˆ˜"><a href="#2-1-dockeræ¶æ„ä»‹ç»ä¸å®æˆ˜" class="headerlink" title="2-1 dockeræ¶æ„ä»‹ç»ä¸å®æˆ˜"></a>2-1 dockeræ¶æ„ä»‹ç»ä¸å®æˆ˜</h3><p>Dockeræ¶æ„ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gif53qczj30mm0cowfg.jpg"  width="600" alt="Dockeræ¶æ„"/><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gif5kicqj30ha0b63yu.jpg"  width="400" alt="Dockeræ¶æ„"/><p> ä½¿ç”¨ubuntué•œåƒï¼Œåœ¨é‡Œé¢è¿è¡Œäº†echo hello dockerè¿™ä¸ªå‘½ä»¤ï¼Œè¾“å‡ºå°±æ˜¯hello docker</p><pre><code class="shell">docker run ubuntu echo hello docker    </code></pre><p>è¿è¡ŒNGINXæœåŠ¡å™¨ï¼š</p><pre><code class="shell">docker run nginx</code></pre><p>æŸ¥çœ‹æœ¬åœ°é•œåƒï¼š</p><pre><code class="shell">docker images</code></pre><p>è¿è¡Œdaocloud.io/nginxé•œåƒï¼š</p><pre><code class="shell">docker run -d -p 8080:80 daocloud.io/nginx</code></pre><p>æ³¨ï¼š</p><ul><li>-dï¼šä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨</li><li>-pï¼šç«¯å£æ˜ å°„ï¼Œå°†nginxçš„80ç«¯å£æ˜ å°„åˆ°æœ¬åœ°çš„8080ç«¯å£</li></ul><p>æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</p><pre><code class="shell">docker ps</code></pre><p>æ˜¾ç¤ºDockerç›¸å…³ä¿¡æ¯çš„é¡µé¢ï¼š</p><pre><code class="shell"># å°†æ–‡ä»¶æ‹·è´åˆ°Dockerå®¹å™¨ã€‚# å°†index.htmlæ–‡ä»¶æ‹·è´åˆ°å®¹å™¨IDä¸º17asdasdasaå®¹å™¨å†…éƒ¨ï¼Œè·¯å¾„ä¸º//usr/share/nginx/html# docker cp æ–‡ä»¶ å®¹å™¨ID:å®¹å™¨å†…éƒ¨æ–‡ä»¶è·¯å¾„docker cp index.html 17add7bbc58c://usr/share/nginx/html</code></pre><p>åœæ­¢æŒ‡å®šå®¹å™¨ï¼š</p><pre><code class="shell">docker stop å®¹å™¨ID</code></pre><p><a href="https://www.runoob.com/docker/docker-commit-command.html" target="_blank" rel="noopener"><strong>ä¿å­˜å®¹å™¨ä¸ºé•œåƒ</strong></a>ï¼š</p><blockquote><p>Dockeråœ¨å®¹å™¨å†…çš„æ”¹åŠ¨éƒ½æ˜¯æš‚æ—¶çš„ï¼Œæ²¡æœ‰è¢«ä¿å­˜</p></blockquote><pre><code class="shell"># # ä¿å­˜å®¹å™¨ä¸ºé•œåƒï¼Œé•œåƒåä¸ºnginx-fundocker commit -m &#39;fun&#39; å®¹å™¨ID nginx-fun</code></pre><p>åˆ é™¤æŒ‡å®šé•œåƒï¼š</p><pre><code class="shell">docker rmi é•œåƒID</code></pre><p>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆæ­£åœ¨è¿è¡Œå’Œåœæ­¢è¿è¡Œï¼‰ï¼š</p><pre><code class="shell">docker ps -a</code></pre><p>åˆ é™¤æŒ‡å®šå®¹å™¨ï¼š</p><pre><code class="shell">docker rm å®¹å™¨ID</code></pre><p>å‘½ä»¤å°ç»“ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>docker pull</td><td>è·å–image</td></tr><tr><td>docker build</td><td>åˆ›å»ºimage</td></tr><tr><td>docker images</td><td>åˆ—å‡ºimage</td></tr><tr><td>docker run</td><td>è¿è¡Œcontainer</td></tr><tr><td>docker ps</td><td>åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„container</td></tr><tr><td>docker rm</td><td>åˆ é™¤container</td></tr><tr><td>docker rmi</td><td>åˆ é™¤image</td></tr><tr><td>docker cp</td><td>åœ¨hostå’Œcontainerä¹‹é—´æ‹·è´æ–‡ä»¶</td></tr><tr><td>docker commit</td><td>ä¿å­˜æ”¹åŠ¨ä¸ºæ–°çš„image</td></tr></tbody></table><h2 id="ç¬¬3ç« -Dockerfileä»‹ç»"><a href="#ç¬¬3ç« -Dockerfileä»‹ç»" class="headerlink" title="ç¬¬3ç«  Dockerfileä»‹ç»"></a>ç¬¬3ç«  Dockerfileä»‹ç»</h2><blockquote><p>ç¼–å†™dockerfile</p></blockquote><h3 id="3-1-dockerfileä»‹ç»"><a href="#3-1-dockerfileä»‹ç»" class="headerlink" title="3-1 dockerfileä»‹ç»"></a>3-1 dockerfileä»‹ç»</h3><blockquote><p>é€šè¿‡ç¼–å†™ç®€å•çš„æ–‡ä»¶è‡ªåˆ›dockeré•œåƒ</p></blockquote><p>ç¬¬ä¸€ä¸ªDockerfileï¼š</p><pre><code class="dockerfile">FROM alpine:latestMAINTAINER tyk 766564616@qq.comCMD echo &#39;hello docker&#39;</code></pre><p>æ³¨ï¼š</p><ul><li>ä¾èµ–äºåŸºç¡€é•œåƒalpine:latest</li><li>æ ‡è¯†é•œåƒä¿¡æ¯</li><li>éœ€è¦è¿è¡Œçš„å‘½ä»¤</li></ul><pre><code class="shell">mkdir dockerfile1cd dockerfile1# äº§ç”Ÿä¸€ä¸ªDockerfileæ–‡ä»¶touch Dockerfile# ç¼–è¾‘Dockerfileæ–‡ä»¶vim Dockerfile# æ„å»ºdockeré•œåƒdocker build -t hello_docker .# æŸ¥çœ‹å·²å®‰è£…Dockeré•œåƒdocker images hello_docker# è¿è¡ŒDockeré•œåƒdocker run hello_docker</code></pre><p>æ³¨ï¼š</p><ul><li>-tï¼šå‚æ•°æŒ‡å®šé•œåƒåç§°</li><li>æœ€åé¢çš„ç‚¹ï¼ˆ.ï¼‰è¡¨ç¤ºæ„å»ºé•œåƒæ–‡ä»¶çš„è·¯å¾„</li></ul><h3 id="3-2-dockerfileå®æˆ˜"><a href="#3-2-dockerfileå®æˆ˜" class="headerlink" title="3-2 dockerfileå®æˆ˜"></a>3-2 dockerfileå®æˆ˜</h3><p>ç¬¬äºŒä¸ªDockerfileï¼š</p><pre><code class="dockerfile"># ä¾èµ–äºåŸºç¡€é•œåƒubuntuFROM ubuntu# æ ‡è¯†é•œåƒä¿¡æ¯MAINTAINER tyk 766564616@qq.com# è¿è¡Œubuntuå‘½ä»¤ï¼Œæ–°å¢ä¸€ä¸ªè½¯ä»¶ä»“åº“é•œåƒåœ°å€RUN sed -i &#39;s/archive.ubuntu.com/mirrors.ustc.edu.cn/g&#39; /etc/apt/sources.list# è¿è¡Œubuntuå‘½ä»¤ï¼Œæ›´æ–°è½¯ä»¶RUN apt-get update# è¿è¡Œubuntuå‘½ä»¤ï¼Œå®‰è£…nginxã€‚-yï¼šé»˜è®¤yesä¸è¯¢é—®RUN apt-get install -y nginx# æ‹·è´æœ¬åœ°æ–‡ä»¶åˆ°é•œåƒå†…éƒ¨COPY index.html /var/www/html# å°†NGINXåœ¨å‰å°å¯åŠ¨ENTRYPOINT [&quot;/usr/sbin/nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]# é•œåƒæš´éœ²æœåŠ¡çš„ç«¯å£EXPOSE 80</code></pre><pre><code class="shell">mkdir dockerfile2cd dockerfile2touch Dockerfilevim Dockerfiletouch index.htmlvim index.htmldocker build -t 766564616/hello-nginx .docker run -d -p 80:80 766564616/hello-nginxä½¿ç”¨curlè¿›è¡Œæµ‹è¯•curl http://localhost</code></pre><p>Dockerfileè¯­æ³•ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>ç”¨é€”</th><th>è¯´æ˜</th><th>æ˜¯å¦å¿…å¡«</th></tr></thead><tbody><tr><td>FROM</td><td>base_image</td><td>æŒ‡æ˜åŸºç¡€é•œåƒåç§°ã€‚</td><td>å¿…å¡«</td></tr><tr><td>RUN</td><td>æ‰§è¡Œå‘½ä»¤</td><td>ç”¨äºæ‰§è¡Œå‘½ä»¤ï¼Œå½“RUNæ‰§è¡Œå®Œæ¯•åï¼Œå°†äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶å±‚ã€‚</td><td>å¯é€‰</td></tr><tr><td>ADD</td><td>æ·»åŠ æ–‡ä»¶</td><td>å‘é•œåƒæ·»åŠ æ–‡ä»¶ã€‚å¯ä»¥æ·»åŠ è¿œç¨‹æ–‡ä»¶</td><td>å¯é€‰</td></tr><tr><td>COPY</td><td>æ‹·è´æ–‡ä»¶</td><td>ä»ä¸»æœºå‘é•œåƒå¤åˆ¶æ–‡ä»¶ã€‚</td><td>å¯é€‰</td></tr><tr><td>CMD</td><td>æ‰§è¡Œå‘½ä»¤</td><td>æŒ‡å®šæ­¤é•œåƒå¯åŠ¨æ—¶é»˜è®¤æ‰§è¡Œå‘½ä»¤ã€‚å®¹å™¨æ‰§è¡Œå…¥å£</td><td>å¯é€‰</td></tr><tr><td>EXPOSE</td><td>æš´éœ²ç«¯å£</td><td>ç”¨äºæŒ‡å®šéœ€è¦æš´éœ²çš„ç½‘ç»œç«¯å£å·ã€‚</td><td>å¯é€‰</td></tr><tr><td>WORKDIR</td><td>æŒ‡å®šè·¯å¾„</td><td>è®¾å®šæ­¤é•œåƒåç»­æ“ä½œçš„é»˜è®¤å·¥ä½œç›®å½•ã€‚</td><td>å¯é€‰</td></tr><tr><td>MAINTAINER</td><td>ç»´æŠ¤è€…</td><td>å¯ç”¨äºæä¾›ä½œè€…ã€ç‰ˆæœ¬åŠæ°”ä»–å¤‡æ³¨ä¿¡æ¯ã€‚</td><td>å¯é€‰</td></tr><tr><td>ENV</td><td>è®¾å®šç¯å¢ƒå˜é‡</td><td>ç”¨äºåœ¨é•œåƒä¸­æ·»åŠ ç¯å¢ƒå˜é‡ã€‚</td><td>å¯é€‰</td></tr><tr><td>ENTRYPOINT</td><td>å®¹å™¨å…¥å£</td><td>åœ¨é•œåƒä¸­è®¾å®šé»˜è®¤æ‰§è¡Œçš„äºŒè¿›åˆ¶ç¨‹åºã€‚å®¹å™¨æ‰§è¡Œå…¥å£</td><td>å¯é€‰</td></tr><tr><td>USER</td><td>æŒ‡å®šç”¨æˆ·</td><td>åœ¨é•œåƒæ„å»ºè¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆæˆ–è€…åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç”¨æˆ·ã€‚</td><td>å¯é€‰</td></tr><tr><td>VOLUME</td><td>mount point</td><td>å‘é•œåƒä¸­æŒ‚è½½ä¸€ä¸ªå·ç»„ã€‚</td><td>å¯é€‰</td></tr></tbody></table><h3 id="3-3-é•œåƒåˆ†å±‚"><a href="#3-3-é•œåƒåˆ†å±‚" class="headerlink" title="3-3 é•œåƒåˆ†å±‚"></a>3-3 é•œåƒåˆ†å±‚</h3><blockquote><p>Dockerfileä¸­çš„æ¯ä¸€è¡Œéƒ½äº§ç”Ÿä¸€ä¸ªæ–°å±‚</p></blockquote><pre><code class="dockerfile">FROM alpine:latest        4dffsd5454wqMAINTAINER tyk766564616   fbdfasdfasfd554CMD echo &#39;hello docker&#39;   3df545dfad4a</code></pre><p>æ¯ä¸ªå‘½ä»¤éƒ½æ˜¯å•ç‹¬ä¿å­˜çš„ä¸€å±‚ã€‚åªæœ‰å®¹å™¨å±‚æ˜¯RWï¼Œé•œåƒä¸­çš„å„å±‚éƒ½æ˜¯RO</p><p>åˆ†å±‚çš„å¥½å¤„ï¼šå‡å¦‚æœ‰å¾ˆå¤šcontaineræˆ–è€…å¾ˆå¤šçš„Imageï¼Œç›¸åŒçš„é•œåƒå±‚ä¼šå¤ç”¨å…±äº«ã€‚ä¸€å®šç¨‹åº¦ä¸Šå‡å°äº†å‚¨å­˜ç©ºé—´çš„ä½¿ç”¨ï¼Œè¿è¡Œèµ·æ¥æ–¹ä¾¿ã€‚</p><h2 id="ç¬¬4ç« -å­˜å‚¨"><a href="#ç¬¬4ç« -å­˜å‚¨" class="headerlink" title="ç¬¬4ç«  å­˜å‚¨"></a>ç¬¬4ç«  å­˜å‚¨</h2><blockquote><p>å¯¹volumeè¿›è¡Œä»‹ç»</p></blockquote><h3 id="4-1-volumeä»‹ç»"><a href="#4-1-volumeä»‹ç»" class="headerlink" title="4-1 volumeä»‹ç»"></a>4-1 volumeä»‹ç»</h3><blockquote><p>æä¾›ç‹¬ç«‹äºå®¹å™¨ä¹‹å¤–çš„æŒä¹…åŒ–å­˜å‚¨</p></blockquote><p>åº”ç”¨åœºæ™¯ï¼š</p><blockquote><p>æ¯”å¦‚æ•°æ®åº“ï¼Œå¯ä»¥å°†æ•°æ®å­˜å‚¨åœ¨å®¹å™¨å¤–çš„åˆ†å·ã€‚</p><p>å¯ä»¥æä¾›å®¹å™¨è·Ÿå®¹å™¨ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚</p></blockquote><h3 id="4-2-volumeæ“ä½œ"><a href="#4-2-volumeæ“ä½œ" class="headerlink" title="4-2 volumeæ“ä½œ"></a>4-2 volumeæ“ä½œ</h3><p>ç¬¬ä¸€ç§å½¢å¼ï¼š</p><blockquote><p>Dockerè™šæ‹Ÿè·¯å¾„æŒ‚è½½åˆ°å®¹å™¨é‡Œé¢çš„è·¯å¾„</p></blockquote><pre><code class="shell">docker run -v å®¹å™¨å†…éƒ¨åœ°å€ é•œåƒåç§°</code></pre><pre><code class="shell"># è¿è¡Œnginxå®¹å™¨ï¼Œé€šè¿‡-væŒ‚è½½ä¸€ä¸ªå·ç»„docker run -d --name nginx -v /usr/share/nginx/html nginx# æŸ¥çœ‹æŒ‡å®šå®¹å™¨ä¿¡æ¯# docker inspect å®¹å™¨åç§°docker inspect nginx# æŸ¥çœ‹MountsèŠ‚ç‚¹ä¸‹çš„SourcesèŠ‚ç‚¹å’ŒDestinationèŠ‚ç‚¹ä¿¡æ¯# è¯¥å®¹å™¨æŠŠå®¿ä¸»æœºçš„Sourceså¯¹åº”ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨çš„Destinationçš„ç›®å½•åœ°å€cd Sourceså¯¹åº”çš„ç›®å½•è·¯å¾„# ä¿®æ”¹index.htmlæ–‡ä»¶echo &quot;it&#39;s 2016&quot; &gt; index.html# è¿›å…¥åˆ°å®¹å™¨å†…éƒ¨# docker exec -it å®¹å™¨åç§° /bin/bashdocker exec -it nginx /bin/bash# cd Destinationå¯¹åº”çš„è·¯å¾„è·¯å¾„# æŸ¥çœ‹index.htmlæ–‡ä»¶cat index.html# æ‰“å°å‡ºåˆšåˆšä¿®æ”¹åçš„å†…å®¹ï¼Œå³æŒ‚è½½æˆåŠŸï¼Œæ˜ å°„å…³ç³»æ­£ç¡®</code></pre><p>ç¬¬äºŒç§å½¢å¼ï¼š</p><blockquote><p>æœ¬åœ°ç›®å½•æŒ‚è½½åˆ°å®¹å™¨é‡Œé¢çš„è·¯å¾„</p></blockquote><pre><code class="shell">docker run -v $PWD/code:/var/www/html nginx</code></pre><pre><code class="shell">docker run -d -p 80:80 -v $PWD/html:/usr/share/nginx/html nginx# æŸ¥çœ‹æœ¬åœ°æ–‡ä»¶çš„å†…å®¹cat html/index.html# è¿›å…¥åˆ°å®¹å™¨å†…éƒ¨docker exec -it å®¹å™¨åç§° /bin/bash# å‘ç°å…¶å†…å®¹å’Œæœ¬åœ°æ–‡ä»¶çš„å†…å®¹ä¸€è‡´ï¼Œå³æ˜ å°„å…³ç³»æ­£ç¡®cat /usr/share/nginx/html/index.html</code></pre><p>ç¬¬ä¸‰ç§å½¢å¼</p><blockquote><p>åˆ›å»ºæ•°æ®å·å®¹å™¨ï¼Œå°†å…¶æŒ‚è½½åˆ°å…¶ä»–å®¹å™¨</p></blockquote><pre><code class="shell">docker run --volumes-from å·å®¹å™¨ID</code></pre><p>å¥½å¤„ï¼š</p><blockquote><p>å¯ä»¥å¤šä¸ªå®¹å™¨æŒ‚è½½ä¸€ä¸ªæ•°æ®å®¹å™¨ï¼Œå®ç°æ•°æ®å…±äº«</p></blockquote><pre><code class="shell">mkdir data# äº§ç”Ÿä¸€ä¸ªä»…æœ‰æ•°æ®çš„å®¹å™¨docker create -v $PWD/data:/var/mydata --name data_container ubuntu# ä»å¦å¤–ä¸€ä¸ªå®¹å™¨æŒ‚è½½ï¼Œ è¿è¡Œå¹¶ç›´æ¥è¿›å…¥å®¹å™¨å†…éƒ¨docker run -it --volumes-from data_container ubuntu /bin/basemounttouch /var/mydatawhatever.txtexit# æŸ¥çœ‹æœ¬åœ°dataç›®å½•ä¸‹æ˜¯å¦æœ‰whatever.txtæ–‡ä»¶ls data</code></pre><h2 id="ç¬¬5ç« -é•œåƒä»“åº“"><a href="#ç¬¬5ç« -é•œåƒä»“åº“" class="headerlink" title="ç¬¬5ç«  é•œåƒä»“åº“"></a>ç¬¬5ç«  é•œåƒä»“åº“</h2><blockquote><p>registryä»‹ç»ä¸å®æˆ˜</p></blockquote><h3 id="5-1-registryä»‹ç»"><a href="#5-1-registryä»‹ç»" class="headerlink" title="5-1 registryä»‹ç»"></a>5-1 registryä»‹ç»</h3><p>Dockerç›¸å…³æœ¯è¯­ï¼š</p><table><thead><tr><th>English</th><th>ä¸­æ–‡</th></tr></thead><tbody><tr><td>host</td><td>å®¿ä¸»æœº</td></tr><tr><td>image</td><td>é•œåƒ</td></tr><tr><td>container</td><td>å®¹å™¨</td></tr><tr><td>registry</td><td>é•œåƒä»“åº“</td></tr><tr><td>daemon</td><td>å®ˆæŠ¤ç¨‹åº</td></tr><tr><td>client</td><td>å®¢æˆ·ç«¯</td></tr></tbody></table><p>Registryç›¸å…³å‘½ä»¤ï¼š</p><pre><code class="shell"># ä»é•œåƒä»“åº“ä¸­æœç´¢æŒ‡å®šé•œåƒdocker search image_name# ä»é•œåƒä»“åº“ä¸­æ‹‰å–æŒ‡å®šé•œåƒdocker pull image_name# å°†æœ¬åœ°é•œåƒæ¨é€åˆ°é•œåƒä»“åº“docker push image_name</code></pre><p>å›½å†…çš„ä¸€äº›é•œåƒä»“åº“ï¼š</p><blockquote><p>daocloud<br>æ—¶é€Ÿäº‘<br>é˜¿é‡Œäº‘</p></blockquote><h3 id="5-2-registryå®æˆ˜"><a href="#5-2-registryå®æˆ˜" class="headerlink" title="5-2 registryå®æˆ˜"></a>5-2 registryå®æˆ˜</h3><pre><code class="shell"># åœ¨é•œåƒä»“åº“ä¸­æœç´¢whalesaydocker search whalesay# ä»é•œåƒä»“åº“ä¸­æ‹‰å–é•œåƒdocker/whalesayåˆ°æœ¬åœ°docker pull docker/whalesay# æŸ¥çœ‹æœ¬åœ°é•œåƒä¿¡æ¯docker images# è¿è¡Œdocker/whalesayé•œåƒï¼Œå¹¶æŒ‡å®šå‚æ•°docker run docker/whalesay cowsay Docker so fun# åœ¨pushä¹‹å‰ï¼Œéœ€è¦ç™»å½•ã€‚é»˜è®¤ç™»å½•åˆ°docker hubdocker login# ä¾èµ–docker/whalesayé•œåƒäº§ç”Ÿæ–°çš„766564616/whalesayé•œåƒï¼ˆç±»ä¼¼å¤åˆ¶ï¼‰docker tag docker/whalesay 766564616/whalesay# å°†é•œåƒ766564616/whalesayæ¨é€åˆ°é•œåƒä»“åº“docker push 766564616/whalesay# åˆ°dockerhubå®˜æ–¹åœ°å€ï¼ŒæŸ¥çœ‹åˆ°è‡ªå·±pushçš„é•œåƒ# https://hub.docker.com/</code></pre><h2 id="ç¬¬6ç« -å¤šå®¹å™¨app"><a href="#ç¬¬6ç« -å¤šå®¹å™¨app" class="headerlink" title="ç¬¬6ç«  å¤šå®¹å™¨app"></a>ç¬¬6ç«  å¤šå®¹å™¨app</h2><blockquote><p>ä»‹ç»å¤šå®¹å™¨appä¸å®ä¾‹</p></blockquote><h3 id="6-1-composeä»‹ç»"><a href="#6-1-composeä»‹ç»" class="headerlink" title="6-1 composeä»‹ç»"></a>6-1 composeä»‹ç»</h3><p>å¤šå®¹å™¨app</p><blockquote><p>ç¼–å†™æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡ä»¶æè¿°å¤šå®¹å™¨APPçš„ç»“æ„ç„¶åé€šè¿‡å·¥å…·docker-composeæŠŠå®ƒæ‹‰èµ·æ¥</p></blockquote><blockquote><p>docker-composeæ˜¯ç‹¬ç«‹çš„è½¯ä»¶</p></blockquote><p>docker-composeå®‰è£…ï¼š</p><blockquote><p>Mac/Windowsï¼šè‡ªå¸¦</p><p>Linuxï¼šcurl <a href="https://github.com/docker/compose" target="_blank" rel="noopener">https://github.com/docker/compose</a></p></blockquote><h3 id="6-2-compose-install-linux"><a href="#6-2-compose-install-linux" class="headerlink" title="6-2 compose-install-linux"></a>6-2 compose-install-linux</h3><p><a href="https://github.com/docker/compose/releases" target="_blank" rel="noopener">https://github.com/docker/compose/releases</a></p><pre><code class="shell"># ä¸‹è½½docker-composeåŒ…åˆ°/usr/local/bin/docker-composecurl -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/docker-compose# ç»™/usr/local/bin/docker-composeæˆå¯æ‰§è¡Œæƒé™chmod +x /usr/local/docker-compose    # éªŒè¯å®‰è£…docker-compose --version</code></pre><pre><code class="shell">uname -s# Linux$ uname -m# x86_64</code></pre><h3 id="6-3-composeå®æˆ˜"><a href="#6-3-composeå®æˆ˜" class="headerlink" title="6-3 composeå®æˆ˜"></a>6-3 composeå®æˆ˜</h3><p>å®æˆ˜æ¡ˆä¾‹ä»‹ç»</p><blockquote><p>appåç§°ï¼šghost<br>æ˜¯ä¸€ä¸ªåšå®¢å¹³å°ç¨‹åºï¼Œå®‰è£…ä¹‹åï¼Œå¯è‡ªå·±å†™æ–‡ç« æˆ–åˆ«äººå‘å¸ƒ<br>æ¶æ„ï¼šnginxã€ghost appã€mysql<br>åˆ†åˆ«åˆ†ä¸ºä¸‰ä¸ªå®¹å™¨</p></blockquote><p>docker-compose.ymlæ–‡ä»¶</p><pre><code class="yaml">ghost-app:   build: ghost  depends_on:     - db  ports:     - &quot;2368:2368&quot;nginx:   build: nginx  ports:     - &quot;80:80&quot;  depends_on:     - ghost-appdb:   images: &quot;mysql:5.7.15&quot;</code></pre><p>å®æˆ˜æ“ä½œï¼š</p><pre><code class="shell"># ghostæ ¹è·¯å¾„mkdir ghostcd ghost# å­˜æ”¾Dockerfileå’Œé…ç½®æ–‡ä»¶ç”¨æ¥æ„å»ºé•œåƒmkdir ghostmkdir nginx# å­˜æ”¾åšå®¢çš„æ•°æ®mkdir data</code></pre><ol><li><p>ghosté•œåƒæ„å»º</p><pre><code class="shell"># /ghost# ghosté•œåƒæ„å»ºcd ghosttouch Dockerfilevim Dockerfile...touch config.jsvim config.js...</code></pre><pre><code class="dockerfile">### Dockerfile #### ä¾èµ–ghostå®˜æ–¹é•œåƒFROM ghost# æ‹·è´æœ¬åœ°é…ç½®æ–‡ä»¶åˆ°é•œåƒä¸­COPY ./config.js /var/lib/ghost/config.js# å£°æ˜æš´éœ²æœåŠ¡çš„ç«¯å£EXPOSE 2368# æ‰§è¡Œå¯åŠ¨å‘½ä»¤ã€‚ghostä¸ºnode.jsç¨‹åºï¼Œæ‰€ä»¥ä½¿ç”¨npmå‘½ä»¤CMD [&quot;npm&quot;,&quot;start&quot;,&quot;--production&quot;]</code></pre><pre><code class="javascript">&lt;!-- config.js --&gt;var path = require(&#39;path&#39;),config;config = {    production: {        url:&#39;http://mytestblog.com&#39;,        mail: {},        database: {            client: &#39;mysql&#39;,            connection: {                host: &#39;db&#39;,                user: &#39;ghost&#39;,                password: &#39;ghost&#39;,                database: &#39;ghost&#39;,                port: &#39;3306&#39;,                charset: &#39;utf8&#39;            },            debug: false        },        paths: {            contentPath: path.join(process.env.GHOST_CONTENT,&#39;/&#39;)        },        server: {            host: &#39;0.0.0.0&#39;,            port: &#39;2368&#39;        }    }};module.exports = config;</code></pre></li><li><p>NGINXé•œåƒæ„å»º</p><pre><code class="shell"># /ghostcd nginxtouch Dockerfilevim Dockerfile...touch nginx.confvim nginx.conf...</code></pre><pre><code class="dockerfile">### Dockerfile #### ä¾èµ–nginxå®˜æ–¹é•œåƒFROM nginx# æ‹·è´æœ¬åœ°é…ç½®æ–‡ä»¶åˆ°é•œåƒä¸­COPY nginx.conf /etc/nginx/nginx.conf# å£°æ˜æš´éœ²æœåŠ¡çš„ç«¯å£EXPOSE 80</code></pre><pre><code class="nginx">### nginx.conf ###worker_processes 4;events {worker_connections 1024;}http {    server {        listen 80;        location / {            proxy_pass http://ghost-app:2368;        }    }}</code></pre></li><li><p>å‡†å¤‡composeæ–‡ä»¶ï¼Œç”¨äºæè¿°æ•´ä¸ªç³»ç»Ÿçš„æ¶æ„</p><pre><code class="shell"># /ghosttouch docker-compose.ymlvim docker-compose.yml</code></pre><pre><code class="yaml">### docker-compose.yml ###version: &#39;2&#39;networks:     ghost: services:     ghost-app:         build: ghost        networks:             - ghost        depends_on:             - db        ports:             - &quot;2368:2368&quot;    nginx:         build: nginx        networks:             - ghost        depends_on:             - ghost-app        ports:             - &quot;80:80&quot;    db:         image: &quot;mysql:5.7.15&quot;        networks:             - ghost        environment:             MYSQL_ROOT_PASSWORD: 123456            MYSQL_USER: ghost            MYSQL_PASSWORD: ghost        volumes:             - $PWD/data:/var/lib/mysql        ports:             - &quot;3306:3306&quot;</code></pre></li><li><p>æ‹‰èµ·ç³»ç»Ÿ</p><pre><code class="shell"># /ghost# å¯åŠ¨docker-compose up -d# å…³é—­docker-compose stop# åˆ é™¤docker-compose rm# æ„å»ºdocker-compose build</code></pre></li><li><p>è®¿é—®<a href="http://localhostã€http://localhost/ghost" target="_blank" rel="noopener">http://localhostã€http://localhost/ghost</a></p></li></ol><h3 id="6-4-ç« èŠ‚å›é¡¾"><a href="#6-4-ç« èŠ‚å›é¡¾" class="headerlink" title="6-4 ç« èŠ‚å›é¡¾"></a>6-4 ç« èŠ‚å›é¡¾</h3><p>docker-compose.ymlå¸¸ç”¨å‘½ä»¤ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>build</td><td>æœ¬åœ°åˆ›å»ºé•œåƒ</td></tr><tr><td>command</td><td>è¦†ç›–ç¼ºçœå‘½ä»¤</td></tr><tr><td>depends_on</td><td>è¿æ¥å®¹å™¨ï¼ŒæœåŠ¡ä¾èµ–</td></tr><tr><td>ports</td><td>æš´éœ²ç«¯å£</td></tr><tr><td>volumes</td><td>æŒ‚è½½å·ç»„</td></tr><tr><td>image</td><td>æ‹‰å–é•œåƒ</td></tr></tbody></table><p>docker-composeå‘½ä»¤ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>up</td><td>å¯åŠ¨æœåŠ¡</td></tr><tr><td>stop</td><td>åœæ­¢æœåŠ¡</td></tr><tr><td>rm</td><td>åˆ é™¤æœåŠ¡ä¸­çš„å„ä¸ªå®¹å™¨</td></tr><tr><td>logs</td><td>è§‚å¯Ÿå„ä¸ªå®¹å™¨ä¸­çš„æ—¥å¿—</td></tr><tr><td>ps</td><td>åˆ—å‡ºæœåŠ¡ç›¸å…³çš„å®¹å™¨</td></tr></tbody></table><h2 id="ç¬¬7ç« -æ€»ç»“"><a href="#ç¬¬7ç« -æ€»ç»“" class="headerlink" title="ç¬¬7ç«  æ€»ç»“"></a>ç¬¬7ç«  æ€»ç»“</h2><blockquote><p>è¯¾ç¨‹æ€»ç»“</p></blockquote><h3 id="7-1-è¯¾ç¨‹æ€»ç»“"><a href="#7-1-è¯¾ç¨‹æ€»ç»“" class="headerlink" title="7-1 è¯¾ç¨‹æ€»ç»“"></a>7-1 è¯¾ç¨‹æ€»ç»“</h3><blockquote><p>Dockerä»‹ç»ï¼šå®¹å™¨ã€é•œåƒ<br>å¦‚ä½•åˆ¶ä½œé•œåƒ<br>å¦‚ä½•åˆ†äº«é•œåƒ<br>å¦‚ä½•æŒä¹…åŒ–å®¹å™¨æ•°æ®<br>å¦‚ä½•ç¼–æ’ä¸€ä¸ªå¤šå®¹å™¨çš„åº”ç”¨</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>824-ç¬¬ä¸€ä¸ªdockeråŒ–çš„javaåº”ç”¨</title>
      <link href="/imooc/824-docker-java/"/>
      <url>/imooc/824-docker-java/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/824" target="_blank" rel="noopener">https://www.imooc.com/learn/824</a></p><p>ç®€ä»‹ï¼šDockeræ˜¯ä¸€ä¸ªä½¿ç”¨Goè¯­è¨€å¼€å‘çš„å¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„æœºå™¨ä¸Šã€‚Dockerçš„å‘å±•é€Ÿåº¦å’Œç«çˆ†ç¨‹åº¦ç€å®ä»¤äººæƒŠå¹ï¼Œä¸€å‘ä¸å¯æ”¶æ‹¾ï¼Œå½¢æˆäº†å¸­å·æ•´ä¸ªITç•Œçš„æ–°æµªæ½®ã€‚å­¦å®Œæœ¬è¯¾ç¨‹ä½ å°†äº†è§£åˆ°ä»€ä¹ˆæ˜¯dockerï¼Œdockerçš„æ€æƒ³ä»¥åŠè¯¸å¦‚é•œåƒï¼Œä»“åº“ï¼Œå®¹å™¨ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚ä½ å°†å­¦ä¼šæ€æ ·è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œå¦‚ä½•æ­å»ºç§æœ‰ä»“åº“ï¼Œæ€ä¹ˆå†™dockerfileä»¥åŠæ€æ ·æŠŠè‡ªå·±çš„åº”ç”¨æ”¾åˆ°å®¹å™¨ä¸­è¿è¡Œã€‚dockerå°†ä¼šæ˜¯ä½ çš„ITè·¯ä¸Šä¸€ç¬”ä¸å°çš„è´¢å¯Œã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>å¯¹dockeræœ‰ä¸ªç®€å•çš„å°è±¡ï¼Œäº†è§£è¯¾ç¨‹çš„å®‰æ’ã€‚</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç»"></a>1-1 è¯¾ç¨‹ä»‹ç»</h3><p>dockerè§£å†³ä¼ä¸šå¤§éƒ¨åˆ†ç—›ç‚¹ï¼š</p><blockquote><ol><li>å¿«é€Ÿçš„æŒç»­é›†æˆ</li><li>æœåŠ¡çš„å¼¹æ€§ä¼¸ç¼© </li><li>éƒ¨ç½²ç®€å•ï¼Œè§£æ”¾äº†è¿ç»´ </li><li>ä¸ºä¼ä¸šèŠ‚çœäº†æœºå™¨èµ„æº</li></ol></blockquote><p>è¯¾ç¨‹å†…å®¹ï¼š</p><ul><li><p>ä»€ä¹ˆæ˜¯Docker?</p><p>å¯¹Dockerçš„è®¤è¯†ï¼ŒDockerçš„å†å²ï¼Œåˆæ­¥ä»‹ç»</p></li><li><p>ç†è§£Docker</p><p>Dockerçš„æ ¸å¿ƒç†è®ºã€æ€æƒ³ï¼Œè§£å†³äº†ä»€ä¹ˆå®é™…é—®é¢˜</p></li><li><p>èµ°è¿›Docker</p><p>Dockerçš„å…·ä½“æŠ€æœ¯</p></li><li><p>HelloWorld</p></li><li><p>NginxæœåŠ¡</p><p>Dockerå‘½ä»¤ã€Dockerç½‘ç»œ</p></li><li><p>DockeråŒ–çš„Java Web</p></li></ul><h3 id="1-2-ä»€ä¹ˆæ˜¯docker"><a href="#1-2-ä»€ä¹ˆæ˜¯docker" class="headerlink" title="1-2 ä»€ä¹ˆæ˜¯docker"></a>1-2 ä»€ä¹ˆæ˜¯docker</h3><p>Dockerå†å²</p><ul><li>2010 dotCloud PAAS</li><li>2013 dockerå¼€æº</li><li>2014.6 Docker 1.0</li><li>2014.7 Cè½® $4000ä¸‡</li><li>2015.4 Dè½® $9500ä¸‡</li><li>è‡³ä»ŠDocker 1.13</li></ul><p><a href="http://docker.com" target="_blank" rel="noopener">Dockerå®˜ç½‘</a></p><p>ä»€ä¹ˆæ˜¯Docker</p><blockquote><p>Dockeræ˜¯ä¸€ä¸ªç”¨æ¥è£…åº”ç”¨çš„å®¹å™¨ï¼Œå°±åƒè¢«å­å¯ä»¥è£…æ°´ï¼Œç¬”ç­’å¯ä»¥æ”¾ç¬”ï¼Œä¹¦åŒ…å¯ä»¥æ”¾ä¹¦ä¸€æ ·ï¼Œå¯ä»¥æŠŠHello Worldæ”¾åœ¨Dockeré‡Œï¼Œå¯ä»¥æŠŠç½‘ç«™æ”¾åœ¨Dockeré‡Œï¼Œå¯ä»¥æŠŠç¨‹åºæ”¾åœ¨Dockeré‡Œã€‚</p></blockquote><ul><li>dockeræ˜¯ä¸–ç•Œé¢†å…ˆçš„è½¯ä»¶å®¹å™¨åŒ–å¹³å°ï¼ˆDocker is the worldâ€™s leading software containerization<br>platformï¼‰</li><li>dockerå…¬å¸å¼€å‘ï¼Œå¼€æºï¼Œæ‰˜ç®¡åœ¨githubä¸Š</li><li>è·¨å¹³å°ï¼Œæ”¯æŒWindowsã€Macosã€Linux</li></ul><h2 id="ç¬¬2ç« -äº†è§£docker"><a href="#ç¬¬2ç« -äº†è§£docker" class="headerlink" title="ç¬¬2ç«  äº†è§£docker"></a>ç¬¬2ç«  äº†è§£docker</h2><blockquote><p>ç”¨å½¢è±¡çš„ç±»æ¯”è¯´æ˜dockerçš„é›†è£…ç®±ã€æ ‡å‡†åŒ–ã€éš”ç¦»çš„æ€æƒ³ã€‚åœ¨ç”¨å‡ ä¸ªå·¥ä½œå­¦ä¹ ä¸­ç¢°åˆ°çš„é—®é¢˜è¯´æ˜dockerè§£å†³äº†å“ªäº›é—®é¢˜ã€‚</p></blockquote><h3 id="2-1-dockeræ€æƒ³"><a href="#2-1-dockeræ€æƒ³" class="headerlink" title="2-1 dockeræ€æƒ³"></a>2-1 dockeræ€æƒ³</h3><ul><li><p>é›†è£…ç®±ï¼šå®¹å™¨</p><p>ä¿è¯æˆ‘ä»¬çš„ç¨‹åºæ”¾åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¸ä¼šç¼ºå°‘ä¸œè¥¿</p></li><li><p>æ ‡å‡†åŒ–</p><ul><li><p>è¿è¾“æ–¹å¼</p><p>Dockerè¿è¾“ç¨‹åºæœ‰ä¸€ä¸ªè¶…çº§ç å¤´ã€‚A Bä¸¤å°ç”µè„‘ï¼ŒAæ‰§è¡ŒDockerå‘½ä»¤æŠŠé²¸é±¼æ´¾è¿‡æ¥æŠŠAçš„ç¨‹åºé€åˆ°è¶…çº§ç å¤´ï¼Œåœ¨ç”±Bæ‰§è¡ŒDockerå‘½ä»¤ç”±é²¸é±¼æŠŠç¨‹åºä»è¶…çº§ç å¤´é€è¿‡æ¥</p></li><li><p>å­˜å‚¨æ–¹å¼</p><p>ä¸éœ€è¦å†å…³ç³»æ‹·è´è¿‡æ¥çš„åº”ç”¨å­˜åœ¨å“ªé‡Œ åªéœ€è¦åœ¨Docker æ‰§è¡Œå‘½ä»¤</p></li><li><p>APIæ¥å£</p><p>Dockeræä¾›äº†ä¸€ç³»åˆ—çš„RESTFUL APIæ¥å£ï¼ŒåŒ…å«äº†å¯¹Dockerä¹Ÿå°±æ˜¯å¯¹åº”ç”¨çš„æ§åˆ¶ï¼Œå…¶ä¸­åŒ…æ‹¬åœæ­¢ æŸ¥çœ‹ åˆ é™¤ç­‰ç­‰</p><p>åªéœ€è¦åœ¨Dockeræ‰§è¡ŒåŒæ ·çš„å‘½ä»¤ å°±å¯ä»¥æ§åˆ¶æ‰€æœ‰çš„åº”ç”¨</p></li></ul></li><li><p>éš”ç¦»ï¼šè½»é‡çº§å®¹å™¨è™šæ‹ŸæœºæŠ€æœ¯</p><p>åˆ©ç”¨Linuxå†…æ ¸LXCæŠ€æœ¯ï¼Œèƒ½å¤Ÿéå¸¸å¿«é€Ÿåœ°åˆ›å»ºdockerå®¹å™¨</p><p>æœ€åº•å±‚çš„æŠ€æœ¯å®é™…ä¸Šæ˜¯ä¸€ç§Linuxçš„ä¸€ç§å†…æ ¸çš„é™åˆ¶æœºåˆ¶ï¼ˆLXCï¼ŒLinux Containerï¼‰ã€‚LXCæ˜¯ä¸€ç§è½»é‡çº§çš„å®¹å™¨è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œæœ€å¤§æ•ˆç‡çš„éš”ç¦»äº†è¿›ç¨‹å’Œèµ„æºï¼Œé€šè¿‡CGroup ã€Namespaceç­‰é™åˆ¶éš”ç¦»è¿›ç¨‹ç»„æ‰€ä½¿ç”¨çš„ç‰©ç†èµ„æºï¼Œå¦‚CPU ã€I/O ã€Memoryç­‰ç­‰ã€‚</p><p>å®¹å™¨æœ‰æ•ˆåœ°å°†ç”±å•ä¸ªæ“ä½œç³»ç»Ÿç®¡ç†çš„èµ„æºåˆ’åˆ†åˆ°å­¤ç«‹çš„ç»„ä¸­ï¼Œä»¥æ›´å¥½åœ°åœ¨å­¤ç«‹çš„ç»„ä¹‹é—´å¹³è¡¡æœ‰å†²çªçš„èµ„æºä½¿ç”¨éœ€æ±‚</p></li></ul><h3 id="2-2-dockerè§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#2-2-dockerè§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="2-2 dockerè§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>2-2 dockerè§£å†³äº†ä»€ä¹ˆé—®é¢˜</h3><ol><li><p>æˆ‘æœ¬åœ°è¿è¡Œæ²¡é—®é¢˜å•Šã€‚</p><p>ä¸€ä¸ªJava Webç¨‹åºè¦å¯åŠ¨èµ·æ¥éœ€è¦ä¾èµ–ä»€ä¹ˆï¼Ÿ</p><ol><li><p>æ“ä½œç³»ç»Ÿ</p><p>è°ƒç”¨äº†æ“ä½œç³»ç»Ÿä¸ä¸€è‡´çš„ç³»ç»Ÿå‘½ä»¤</p></li><li><p>JDK</p><p>JDKç‰ˆæœ¬ï¼Œå¦‚ï¼šJDK1.7ç¼–è¯‘çš„classæ–‡ä»¶åœ¨JDK1.6ä¸Šè¿è¡Œ</p></li><li><p>Tomcat</p><p>Tomcatç‰ˆæœ¬ï¼Œæ—§ç‰ˆæœ¬é…ç½®å¯èƒ½åœ¨æ–°ç‰ˆæœ¬ä¸­ä¸å†æ”¯æŒ</p></li><li><p>ä»£ç </p><p>æ¯”å¦‚ä»£ç å¼•ç”¨äº†ç£ç›˜ä¸Šï¼ˆCç›˜ï¼‰çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œç³»ç»Ÿç¯å¢ƒç¼–ç </p></li><li><p>é…ç½®æ–‡ä»¶</p><p>å¯èƒ½å°‘äº†æŸäº›é…ç½®æ–‡ä»¶</p></li></ol><p>dockerè§£å†³äº†è¿è¡Œç¯å¢ƒä¸ä¸€è‡´å¸¦æ¥çš„é—®é¢˜ã€‚</p></li><li><p>ç³»ç»Ÿå¥½å¡ï¼Œå“ªä¸ªå“¥ä»¬åˆå†™æ­»å¾ªç¯äº†ã€‚</p><p>dockerçš„éš”ç¦»æ€§ï¼Œä½¿è‡ªå·±è¿è¡Œçš„ç¨‹åºä¸å—å…¶ä»–ç¨‹åºçš„å½±å“ã€‚</p></li><li><p>åŒ11æ¥äº†ï¼ŒæœåŠ¡å™¨æ’‘ä¸ä½å•¦ã€‚</p><p>dockerçš„æ ‡å‡†åŒ–è®©å¿«é€Ÿæ‰©å±•ï¼Œå¼¹æ€§ä¼¸ç¼©å˜å¾—ç®€å•ã€‚</p></li></ol><h2 id="ç¬¬3ç« -èµ°è¿›docker"><a href="#ç¬¬3ç« -èµ°è¿›docker" class="headerlink" title="ç¬¬3ç«  èµ°è¿›docker"></a>ç¬¬3ç«  èµ°è¿›docker</h2><blockquote><p>ç»“åˆä¸Šé¢çš„ç±»æ¯”å¼•å‡ºdockerçš„æ ¸å¿ƒæŠ€æœ¯ï¼šé•œåƒã€ä»“åº“å’Œå®¹å™¨çš„æ¦‚å¿µï¼Œå¹¶åˆ†åˆ«æ·±å…¥è®²è§£æŠ€æœ¯ã€åŸç†ã€‚</p></blockquote><h3 id="3-1-dockeræ ¸å¿ƒæŠ€æœ¯"><a href="#3-1-dockeræ ¸å¿ƒæŠ€æœ¯" class="headerlink" title="3-1 dockeræ ¸å¿ƒæŠ€æœ¯"></a>3-1 dockeræ ¸å¿ƒæŠ€æœ¯</h3><p>æ ¸å¿ƒæ¦‚å¿µ</p><ul><li>é•œåƒï¼šé›†è£…ç®±</li><li>ä»“åº“ï¼šè¶…çº§ç å¤´</li><li>å®¹å™¨ï¼šè¿è¡Œç¨‹åºçš„åœ°æ–¹</li></ul><p>dockerè¿è¡Œç¨‹åºçš„è¿‡ç¨‹</p><ul><li>å»ä»“åº“æŠŠé•œåƒè¿åˆ°æœ¬åœ°ï¼Œç”¨å‘½ä»¤æŠŠé•œåƒè¿è¡Œèµ·æ¥å˜æˆå®¹å™¨ã€‚</li></ul><p>åˆ†åˆ«è®²è§£æ ¸å¿ƒæ¦‚å¿µ</p><ul><li>Buildï¼šæ„å»ºé•œåƒ</li><li>Shipï¼šè¿è¾“é•œåƒï¼Œä»ä»“åº“å’Œä¸»æœºä¸Šè¿è¾“</li><li>Runï¼šè¿è¡Œçš„é•œåƒï¼Œå°±æ˜¯å®¹å™¨</li></ul><h3 id="3-2-dockeré•œåƒ"><a href="#3-2-dockeré•œåƒ" class="headerlink" title="3-2 dockeré•œåƒ"></a>3-2 dockeré•œåƒ</h3><ol><li><p>dockeré•œåƒå°±æ˜¯imageã€‚ä»æœ¬è´¨ä¸Šæ¥è¯´é•œåƒå°±æ˜¯ä¸€ç³»åˆ—çš„æ–‡ä»¶ï¼ˆåŒ…æ‹¬åº”ç”¨ç¨‹åºçš„æ–‡ä»¶ï¼Œä¹ŸåŒ…æ‹¬åº”ç”¨ç¯å¢ƒçš„æ–‡ä»¶ï¼‰ã€‚é•œåƒä»¥è”åˆæ–‡ä»¶ç³»ç»Ÿåˆ†å±‚çš„å½¢å¼ä¿å­˜åˆ°æœ¬åœ°ï¼›</p></li><li><p>dockeré•œåƒï¼šï¼ˆdockerä¸­çš„æ–‡ä»¶ç³»ç»Ÿéƒ½æ˜¯åªè¯»çš„ï¼‰</p></li></ol><p>Dockeræ–‡ä»¶ä¿å­˜å­˜å‚¨æ ¼å¼ï¼Ÿ</p><blockquote><p>è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnion FSï¼‰ï¼Œè”åˆæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ç§åˆ†å±‚çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å°†ä¸åŒçš„ç›®å½•æŒ‚åˆ°åŒä¸€ä¸ªè™šæ‹Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸‹é¢ã€‚</p><p>è”åˆæ–‡ä»¶ç³»ç»Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å®ç°æ–‡ä»¶çš„åˆ†å±‚ï¼Œæ¯”å¦‚test1å¯ä»¥çœ‹åšæ˜¯ç¬¬ä¸€å±‚ï¼Œtest2å¯ä»¥çœ‹åšæ˜¯ç¬¬äºŒå±‚ï¼Œæ¯ä¸€å±‚æœ‰æ¯ä¸€å±‚è‡ªå·±çš„æ–‡ä»¶ï¼ŒDockeré•œåƒå°±æ˜¯åˆ©ç”¨äº†è¿™ç§åˆ†å±‚çš„æ¦‚å¿µæ¥å®ç°äº†é•œåƒå­˜å‚¨ã€‚</p></blockquote><p>dockeré•œåƒçš„å­˜å‚¨æ–¹å¼</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gigviqm7j30eh0awaap.jpg" width="350" alt="Dockeré•œåƒ"/><ul><li>æœ€åº•å±‚ï¼šæ“ä½œç³»ç»Ÿçš„å¼•å¯¼</li><li>ä¸Šé¢ä¸€å±‚ï¼šå…·ä½“çš„Linuxæ“ä½œç³»ç»Ÿ</li><li>ä¸Šé¢ä¸€å±‚ï¼šå…·ä½“çš„è½¯ä»¶ï¼Œæ¯”å¦‚è¯´JDKã€Tomcat</li><li>ä¸Šé¢ä¸€å±‚ï¼šæˆ‘ä»¬è‡ªå·±çš„åº”ç”¨ä»£ç </li><li>æœ€ä¸Šé¢ä¸€å±‚ï¼šå®¹å™¨å±‚</li></ul><h3 id="3-3-dockerå®¹å™¨"><a href="#3-3-dockerå®¹å™¨" class="headerlink" title="3-3 dockerå®¹å™¨"></a>3-3 dockerå®¹å™¨</h3><ol><li>dockerçš„å®¹å™¨å¯ç†è§£ä¸ºä¸€ä¸ªè¿›ç¨‹ï¼ˆå¯ä»¥å°†å®¹å™¨æƒ³è±¡ä¸ºä¸€ä¸ªè™šæ‹Ÿæœºï¼‰</li><li>dockerå®¹å™¨ä¸­é™¤äº†Containerå±‚å¯å†™å¤–ï¼Œå…¶ä»–å±‚éƒ½æ˜¯åªè¯»çš„</li><li>é•œåƒçš„å„å±‚éƒ½æ˜¯å¯è¯»çš„ï¼Œå¦‚æœæƒ³å¯¹å¯è¯»å±‚è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œé‚£ä¹ˆæœ¬å±‚å†…å®¹ä¼šä¼ åˆ°å¯å†™å±‚ï¼Œç„¶åå†è¿›è¡Œä¿®æ”¹æ“ä½œï¼›</li><li>å½“æˆ‘ä»¬çš„åº”ç”¨è¿›è¡Œæ–‡ä»¶æŸ¥æ‰¾æ˜¯ä¼šä»æœ€é¡¶å±‚å¯å†™å±‚æŸ¥æ‰¾ï¼ˆå› ä¸ºå¯è¯»å±‚å†…å®¹éƒ½ä¼ åˆ°å¯å†™å±‚ï¼‰ï¼Œå¦‚æœå¯å†™å±‚æ²¡æœ‰ç›¸åº”æ•°æ®æ‰ä¼šå»å¯è¯»å±‚æŸ¥æ‰¾</li><li>å®¹å™¨ä¸­Containerå±‚å¯ä»¥ä¿®æ”¹ï¼ˆå³å¯å†™ï¼‰ï¼Œä½†æ˜¯åœ¨é•œåƒä¸­Containerå±‚æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ï¼Œè¿™æ ·ä¹Ÿå°±ä¿è¯äº†åŒä¸€ä¸ªé•œåƒå¯ä»¥ç”Ÿæˆå¤šä¸ªå®¹å™¨ç‹¬ç«‹è¿è¡Œï¼Œè€Œä»–ä»¬ä¹‹é—´æ²¡æœ‰ä»»ä½•çš„å¹²æ‰°ã€‚</li></ol><h3 id="3-4-dockerä»“åº“"><a href="#3-4-dockerä»“åº“" class="headerlink" title="3-4 dockerä»“åº“"></a>3-4 dockerä»“åº“</h3><p>æ„å»ºé•œåƒçš„ç›®çš„</p><blockquote><p>æ˜¯ä¸ºäº†åœ¨å…¶æœºå™¨ä¸Šè¿è¡Œé•œåƒç¨‹åºã€‚</p></blockquote><p>ä»“åº“çš„ä½œç”¨</p><blockquote><p>ä¸ºäº†åœ¨å…¶ä»–åœ°æ–¹è¿è¡Œï¼Œæˆ‘ä»¬å°±éœ€è¦å°†æ„å»ºçš„é•œåƒä¼ é€’åˆ°ç›®çš„åœ°æ‰å¯ä»¥ï¼Œä»“åº“å¯ä»¥èµ·åˆ°ä¼ è¾“ä¼ é€’ä½œç”¨ã€‚</p></blockquote><p>ä¼ è¾“è¿‡ç¨‹</p><blockquote><p>å…ˆå°†æ„å»ºçš„é•œåƒä¼ åˆ°dockerä»“åº“ä¸­ï¼Œå†ç”±ç›®çš„åœ°å»dockerä»“åº“å°†æˆ‘ä»¬çš„é•œåƒæ‹‰è¿‡å»ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¼ è¾“è¿‡ç¨‹ã€‚</p></blockquote><p>dockerä»“åº“</p><ul><li>hub.docker.comï¼ˆå›½é™…ï¼‰</li><li>c.163.comï¼ˆå›½å†…ï¼‰</li></ul><h2 id="ç¬¬4ç« -dockerå®‰è£…"><a href="#ç¬¬4ç« -dockerå®‰è£…" class="headerlink" title="ç¬¬4ç«  dockerå®‰è£…"></a>ç¬¬4ç«  dockerå®‰è£…</h2><blockquote><p>åˆ†åˆ«åœ¨ä¸‰ä¸­å¹³å°ä¸Šè®²è§£dockerçš„å®‰è£…ã€‚åŒå­¦å¯ä»¥é€‰æ‹©è‡ªå·±çš„å¹³å°è§‚çœ‹ã€‚</p></blockquote><h3 id="4-1-windowå®‰è£…docker"><a href="#4-1-windowå®‰è£…docker" class="headerlink" title="4-1 windowå®‰è£…docker"></a>4-1 windowå®‰è£…docker</h3><p><a href="https://hub.docker.com/?overlay=onboarding" target="_blank" rel="noopener">https://hub.docker.com/?overlay=onboarding</a></p><p>æŸ¥çœ‹Dockerç‰ˆæœ¬ï¼š</p><pre><code class="shell">docker version</code></pre><h3 id="4-2-macoså®‰è£…docker"><a href="#4-2-macoså®‰è£…docker" class="headerlink" title="4-2 macoså®‰è£…docker"></a>4-2 macoså®‰è£…docker</h3><p><a href="https://hub.docker.com/?overlay=onboarding" target="_blank" rel="noopener">https://hub.docker.com/?overlay=onboarding</a></p><h3 id="4-3-linuxå®‰è£…docker"><a href="#4-3-linuxå®‰è£…docker" class="headerlink" title="4-3 linuxå®‰è£…docker"></a>4-3 linuxå®‰è£…docker</h3><ul><li><p>Redhat&amp;CentOSï¼š<br>ç³»ç»Ÿè¦æ±‚ï¼š64-bit OS and version 3.10</p></li><li><p>Ubuntu</p><p>ç³»ç»Ÿè¦æ±‚ï¼š64-bit OS and version 3.10</p></li></ul><blockquote><p>dockeræ˜¯åœ¨Linuxçš„Ubuntuç³»ç»Ÿå¼€å‘çš„ï¼Œæ‰€ä»¥åœ¨Ubuntuç³»ç»Ÿæ˜¯dockerçš„æœ€ç†æƒ³è¿è¡Œç³»ç»Ÿã€‚</p></blockquote><p>Redhat&amp;CentOSï¼š</p><pre><code class="shell"># æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬uname -r# åˆ‡æ¢åˆ°rootç”¨æˆ·sudo# ä¿è¯ç³»ç»Ÿä¸ºæœ€æ–°ç‰ˆæœ¬yum update# å¸è½½æ—§ç‰ˆæœ¬yum remove docker docker-common docker-selinux docker-engine# å®‰è£…Dockeryum install -y docker# æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸyum list installed | grep docker# å¯åŠ¨dockeræœåŠ¡systemclt start docker# æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸsystemclt status docker</code></pre><p>Ubuntuï¼š</p><pre><code class="shell"># æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬uname -r# åˆ‡æ¢åˆ°rootç”¨æˆ·su# ä¿è¯ç³»ç»Ÿä¸ºæœ€æ–°ç‰ˆæœ¬apt-get update# å®‰è£…Dockerapt-get install -y docker.io# å®‰è£…Dockeræœ€æ–°ç‰ˆæœ¬curl -s https://get.docker.com|sh# æ˜¯å¦å®‰è£…æˆåŠŸ(Clientã€Server)docker version# å¯åŠ¨Dockerä¿¯å§æ’‘service docker start</code></pre><h2 id="ç¬¬5ç« -dockeråˆä½“éªŒ"><a href="#ç¬¬5ç« -dockeråˆä½“éªŒ" class="headerlink" title="ç¬¬5ç«  dockeråˆä½“éªŒ"></a>ç¬¬5ç«  dockeråˆä½“éªŒ</h2><blockquote><p>ç¬¬ä¸€ä¸ªå®ä¾‹ï¼šç”¨helloworldé•œåƒå¸¦å…¥ï¼Œç†Ÿæ‚‰dockeræœ€åŸºæœ¬çš„ä¸¤ä¸ªå‘½ä»¤ï¼Œæ‹‰å–é•œåƒå’Œè¿è¡Œå®¹å™¨ï¼Œå¹¶è®²è§£èƒŒåè¿è¡Œé€»è¾‘ã€‚</p></blockquote><h3 id="5-1-ç¬¬ä¸€ä¸ªdockeré•œåƒ"><a href="#5-1-ç¬¬ä¸€ä¸ªdockeré•œåƒ" class="headerlink" title="5-1 ç¬¬ä¸€ä¸ªdockeré•œåƒ"></a>5-1 ç¬¬ä¸€ä¸ªdockeré•œåƒ</h3><ol><li><p>ä»dockerè¿œç¨‹çš„ä»“åº“æ‹‰å–é•œåƒåˆ°æœ¬åœ°</p><pre><code class="shell">docker pull [OPTIONS] NAME [:TAG]</code></pre><p>æ³¨ï¼š</p><ul><li>NAMEé¡¹æ˜¯å¿…å¡«ï¼Œä»£è¡¨éœ€è¦æ‹‰å–çš„é•œåƒåç§°</li><li>[:TAG]æ˜¯å¯é€‰çš„ï¼Œä»£è¡¨é•œåƒçš„ç‰ˆæœ¬</li><li>[OPTIONS]ä»£è¡¨æ‹‰å–çš„é•œåƒå‚æ•°</li></ul><p>ä¾‹å¦‚ï¼šæ‹‰å–hello-worldé•œåƒå‘½ä»¤ï¼š</p><pre><code class="shell">docker pull hello-world</code></pre></li><li><p>æŸ¥çœ‹æˆ‘ä»¬æœ¬æœºéƒ½æœ‰å“ªäº›é•œåƒï¼Œä¹Ÿå¯ä»¥éªŒè¯æˆ‘ä»¬çš„pullæ˜¯å¦æ‰§è¡ŒæˆåŠŸ</p><pre><code class="shell">docker images [OPTIONS] [REPOSITORY[:TAG]]</code></pre><p>æ³¨ï¼š</p><ul><li>[OPTIONS]æ˜¯é•œåƒçš„å‚æ•°</li><li>[REPOSITORY[:TAG]]æ˜¯é•œåƒçš„åç§°å’Œç‰ˆæœ¬</li></ul></li></ol><h3 id="5-2-ç¬¬ä¸€ä¸ªdockerå®¹å™¨"><a href="#5-2-ç¬¬ä¸€ä¸ªdockerå®¹å™¨" class="headerlink" title="5-2 ç¬¬ä¸€ä¸ªdockerå®¹å™¨"></a>5-2 ç¬¬ä¸€ä¸ªdockerå®¹å™¨</h3><p>è¿è¡Œdockeré•œåƒå‘½ä»¤</p><pre><code class="shell">docker run [OPTIONS] IMAGE[:TAG][COMMAND] [ARGâ€¦]</code></pre><p>æ³¨ï¼š</p><ul><li>NAMEé¡¹æ˜¯å¿…å¡«ï¼Œä»£è¡¨è¿è¡Œçš„é•œåƒåç§°</li><li>[COMMAND]ä»£è¡¨é•œåƒè¿è¡Œçš„æ—¶å€™éœ€è¦æ‰§è¡Œä»€ä¹ˆå‘½ä»¤</li><li>[ARGâ€¦]ä»£è¡¨å‘½ä»¤æ‰€ä¾èµ–çš„å‚æ•°</li><li>[OPTIONS]ä»£è¡¨è¿è¡Œçš„æ—¶å€™é€‰é¡¹</li></ul><p>ä¾‹å¦‚ï¼šè¿è¡Œhello-worldé•œåƒå‘½ä»¤ï¼š</p><pre><code class="shell">docker run hello-world</code></pre><p>docker client æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œç„¶åæ ¹æ®å‘½ä»¤å†…å®¹å‘é€ç›¸åº”çš„è¯·æ±‚åˆ° docker hostï¼Œdocker host è§£æè¯¥è¯·æ±‚ï¼Œä¼šé¦–å…ˆæŸ¥è¯¢æœ¬åœ°é•œåƒä»“åº“æ˜¯å¦æœ‰å¯¹åº”çš„èµ„æºï¼Œå‡å¦‚æ²¡æœ‰ï¼Œåˆ™å‘è¿œç¨‹é•œåƒä¸­å¿ƒæ‹‰å–é•œåƒæ”¾å›æœ¬åœ°ï¼Œæ¥ç€åœ¨æ‰§è¡Œè¯¥é•œåƒï¼Œåˆå§‹åŒ–ä¸ºä¸€ä¸ªå®¹å™¨ã€‚</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gigws3xnj30mi0bvmy6.jpg"  width="500" alt="Dockeråˆä½“éªŒ"/><ol><li><p>Client ï¼šæœ¬æœºçš„dockeræ‰§è¡Œå‘½ä»¤çš„å®¢æˆ·ç«¯</p></li><li><p>DOCKER_HOSTï¼šæœ¬æœºdockeræœåŠ¡</p></li><li><p>Registryï¼šdockerè¿œç¨‹ä»“åº“</p></li></ol><p>docker pull æµç¨‹ï¼š</p><ul><li>åœ¨Clientä¸»æœºå‘å‡ºdocker pullæ‰§è¡Œå‘½ä»¤åˆ°DOCKER_HOSTä¸»æœºdockeræœåŠ¡çš„Docker daemonä¸­ï¼ŒDocker daemonä¼šå…ˆåœ¨æœ¬æœºä¸­å¯»æ‰¾æ˜¯å¦æœ‰ç›¸åº”çš„é•œåƒï¼Œå¦‚æœå­˜åœ¨ä¸è¿›è¡Œä»»ä½•æ“ä½œï¼Œå¦åˆ™ä¼šä»dockerçš„è¿œç¨‹ä»“åº“Registryä¸­å°†ç›¸åº”çš„é•œåƒæ‹‰å–åˆ°æœ¬åœ°æœåŠ¡</li></ul><p>docker run æµç¨‹ï¼š</p><ul><li>åœ¨Clientä¸»æœºå‘å‡ºdocker runæ‰§è¡Œå‘½ä»¤åˆ°DOCKER_HOSTä¸»æœºdockeræœåŠ¡çš„Docker daemonä¸­ï¼ŒDocker daemonä¼šå…ˆåœ¨æœ¬æœºä¸­å¯»æ‰¾æ˜¯å¦æœ‰ç›¸åº”çš„é•œåƒï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¼šä»dockerçš„è¿œç¨‹ä»“åº“Registryä¸­å°†ç›¸åº”çš„é•œåƒæ‹‰å–åˆ°æœ¬åœ°æœåŠ¡ï¼Œç„¶åé€šè¿‡ä¸€å®šæ–¹å¼å°†é•œåƒè¿è¡Œèµ·æ¥å˜æˆdockerçš„å®¹å™¨ã€‚</li></ul><h2 id="ç¬¬6ç« -dockerè¿è¡Œnginxé™æ€ç½‘ç«™"><a href="#ç¬¬6ç« -dockerè¿è¡Œnginxé™æ€ç½‘ç«™" class="headerlink" title="ç¬¬6ç«  dockerè¿è¡Œnginxé™æ€ç½‘ç«™"></a>ç¬¬6ç«  dockerè¿è¡Œnginxé™æ€ç½‘ç«™</h2><blockquote><p>ç¬¬äºŒä¸ªå®ä¾‹ï¼šä»è¿è¡Œnginxé•œåƒå¼•å‡ºdockerç½‘ç»œæ¦‚å¿µå’Œdockerçš„ç«¯å£æ˜ å°„ï¼Œæœ€åè¿è¡Œnginxå®¹å™¨ã€‚</p></blockquote><h3 id="6-1-è¿è¡Œnginxé•œåƒ"><a href="#6-1-è¿è¡Œnginxé•œåƒ" class="headerlink" title="6-1 è¿è¡Œnginxé•œåƒ"></a>6-1 è¿è¡Œnginxé•œåƒ</h3><p>è¿è¡ŒNGINXï¼š</p><ul><li>æŒä¹…è¿è¡Œçš„å®¹å™¨</li><li>å‰å°æŒ‚æœº &amp; åå°è¿è¡Œ</li><li>è¿›å…¥å®¹å™¨å†…éƒ¨</li></ul><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><pre><code class="shell"># æŸ¥æ‰¾Dockerçš„nginxé•œåƒdocker search nginx# è·å–Dockerçš„nginxé•œåƒdocker pull nginx# æŸ¥çœ‹runçš„å¸®åŠ©ä¿¡æ¯docker run --help# ä»¥åå°è¿è¡Œæ–¹å¼è¿è¡Œdockeré•œåƒdocker run -d nginx# æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker ps# æŸ¥çœ‹è¿è¡Œå®¹å™¨çš„å†…éƒ¨ä¿¡æ¯docker exec# æŸ¥çœ‹å®¹å™¨æŒ‡å®šå®¹å™¨IDï¼ˆCONTAINER_IDï¼‰çš„ä¿¡æ¯docker exec -it CONTAINER_ID bash# åœæ­¢å®¹å™¨docker stop CONTAINER_ID</code></pre><h3 id="6-2-dockerç½‘ç»œ"><a href="#6-2-dockerç½‘ç»œ" class="headerlink" title="6-2 dockerç½‘ç»œ"></a>6-2 dockerç½‘ç»œ</h3><blockquote><p>Dockerä½¿ç”¨äº†Linuxçš„namespaceæŠ€æœ¯æ¥è¿›è¡Œèµ„æºéš”ç¦»ï¼Œå¦‚PID Namespaceéš”ç¦»è¿›ç¨‹ï¼ŒMount Namespaceéš”ç¦»æ–‡ä»¶ç³»ç»Ÿï¼ŒNetwork Namespaceéš”ç¦»ç½‘ç»œç­‰ã€‚ä¸€ä¸ªDockerå®¹å™¨ä¸€èˆ¬ä¼šåˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„Network Namespaceã€‚</p></blockquote><p>dockerç½‘ç»œï¼š</p><ul><li><p>ç½‘ç»œç±»å‹</p><ol><li><p>Bridgeï¼ˆæ¡¥æ¥ï¼‰ï¼š</p><p>dockeré»˜è®¤çš„ç½‘ç»œè®¾ç½®ï¼Œæ­¤æ¨¡å¼ä¼šä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é…Network Namespaceã€è®¾ç½®IPç­‰ï¼Œå¹¶å°†ä¸€ä¸ªä¸»æœºä¸Šçš„Dockerå®¹å™¨è¿æ¥åˆ°ä¸€ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šã€‚</p></li><li><p>Hostï¼ˆä¸»æœºï¼‰ï¼š</p><p>å®¹å™¨ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„Network Namespaceï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ªNetwork Namespaceã€‚å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ã€‚</p></li><li><p>Noneï¼ˆæ— ç½‘ç»œï¼‰ï¼š</p><p>Dockerå®¹å™¨æ‹¥æœ‰è‡ªå·±çš„Network Namespaceï¼Œä½†æ˜¯ï¼Œå¹¶ä¸ä¸ºDockerå®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚dockerå°†ä¸ä¼šå’Œå¤–ç•Œçš„ä»»ä½•ç½‘ç»œè¿›è¡Œé€šè®¯ã€‚</p></li><li><p>containeræ¨¡å¼ï¼š</p><p>æ–°åˆ›å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ªNetwork Namespaceï¼Œè€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº«IPã€ç«¯å£èŒƒå›´ç­‰ã€‚</p></li></ol></li><li><p>ç«¯å£æ˜ å°„</p><p>Bridgeç½‘ç»œæ¨¡å¼éœ€è¦ä½¿ç”¨ç‹¬ç«‹çš„Namespaceï¼Œå°±éœ€è¦å®¹å™¨å†…çš„ç«¯å£å¯ä»¥åœ¨ä¸»æœºä¸Šè®¿é—®ï¼Œè¿™å°±æ˜¯ç«¯å£æ˜ å°„ã€‚</p><p>Dockerå¯ä»¥æŒ‡å®šå®¹å™¨å†…çš„æŸä¸ªç«¯å£ä¸å®¹å™¨æ‰€åœ¨ä¸»æœºçš„æŸä¸ªç«¯å£è¿›è¡Œæ˜ å°„ï¼Œæ­¤æ—¶è®¿é—®ä¸»æœºçš„ç«¯å£å°±æ˜¯è®¿é—®å®¹å™¨å†…çš„ç«¯å£</p></li></ul><p>dockerç½‘ç»œç¤ºæ„å›¾ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gigwe5jlj30ll0arwfn.jpg"  width="350" alt="Dockerç½‘ç»œ"/><p>è¿è¡Œnginxé•œåƒï¼Œå¹¶æŒ‡å®šä¸»æœºçš„ç«¯å£ï¼š</p><pre><code class="shell">docker run -d -p 8080:80 nginx</code></pre><p>æ³¨ï¼š</p><ul><li>ä½¿ç”¨ â€“p å‚æ•°ï¼Œå†’å·å‰é¢ä¸ºä¸»æœºç«¯å£ï¼Œåé¢ä¸ºå®¹å™¨ç«¯å£ã€‚</li></ul><p>dockerå¼€æ”¾æ‰€æœ‰éšæœºç«¯å£æ˜ å°„åˆ°å®¹å™¨ä¸Šï¼š</p><pre><code class="shell">Docker run -d -P nginx</code></pre><p>æŸ¥çœ‹ç½‘ç»œç«¯å£ä¿¡æ¯ï¼š</p><pre><code class="shell">netstart -na | grep 8080</code></pre><h2 id="ç¬¬7ç« -ç¬¬ä¸€ä¸ªjava-webåº”ç”¨"><a href="#ç¬¬7ç« -ç¬¬ä¸€ä¸ªjava-webåº”ç”¨" class="headerlink" title="ç¬¬7ç«  ç¬¬ä¸€ä¸ªjava webåº”ç”¨"></a>ç¬¬7ç«  ç¬¬ä¸€ä¸ªjava webåº”ç”¨</h2><blockquote><p>æœ€åä¸€ä¸ªå®ä¾‹ï¼šåˆ›å»ºè‡ªå·±çš„é•œåƒï¼Œå¼•å‡ºdockerfileï¼Œè®²è§£åŸºæœ¬çš„dockerfileè¯­æ³•ã€‚ç„¶åè®²è§£ç§æœ‰ä»“åº“çš„æ­å»ºã€‚æœ€ååˆ†åˆ«åœ¨ä¸¤å°æœºå™¨ä¸Šæ¼”ç¤ºdockerçš„è·¨å¹³å°è¿è¡Œæˆ‘ä»¬çš„java webé¡¹ç›®ã€‚</p></blockquote><h3 id="7-1-åˆ¶ä½œè‡ªå·±çš„é•œåƒ"><a href="#7-1-åˆ¶ä½œè‡ªå·±çš„é•œåƒ" class="headerlink" title="7-1 åˆ¶ä½œè‡ªå·±çš„é•œåƒ"></a>7-1 åˆ¶ä½œè‡ªå·±çš„é•œåƒ</h3><p><a href="https://segmentfault.com/a/1190000009237581" target="_blank" rel="noopener">Linux_åŸºäºDockerå¿«é€Ÿæ­å»ºä¸ªäººåšå®¢ç½‘ç«™</a></p><p>åˆ¶ä½œè‡ªå·±çš„é•œåƒï¼š</p><ul><li><p>dockerfile</p><p>æ˜¯ç”±ä¸€ç³»åˆ—å‘½ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ã€‚è¿™äº›å‘½ä»¤åº”ç”¨äºåŸºç¡€é•œåƒå¹¶æœ€ç»ˆåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œç®€åŒ–äº†ä»å¤´åˆ°å°¾çš„æµç¨‹å¹¶æå¤§çš„ç®€åŒ–äº†éƒ¨ç½²å·¥ä½œã€‚</p></li><li><p>docker build</p><p>ç”¨äºä½¿ç”¨Dockerfileåˆ›å»ºé•œåƒã€‚</p></li><li><p>Jpress: <a href="http://jpress.io/" target="_blank" rel="noopener">http://jpress.io/</a></p><p>å¼€æºçš„java webåº”ç”¨ã€‚</p></li></ul><p>åˆ¶ä½œ JAVA WEBåº”ç”¨ï¼š</p><blockquote><p>dockerFileæ˜¯dockeré•œåƒçš„åˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼Œå‘Šè¯‰dockeræŒ‰ç…§æ–‡ä»¶é‡Œçš„æµç¨‹å»åˆ›å»ºé•œåƒ</p></blockquote><ul><li><p>åˆ›å»ºDockerfileæ–‡ä»¶</p><pre><code class="dockerfile"># åˆ›å»ºçš„é•œåƒç»§æ‰¿è‡ªæŒ‡å®šçš„tomcatfrom tomcat# åˆ›å»ºé•œåƒäººçš„ä¿¡æ¯ï¼Œå¯ä¸å†™MAINTAINER tyk 766564616@qq.com# COPY  [æœ¬åœ°waråŒ…]  [æŒ‡å®šçš„tomcat/webapps/ä¸‹]COPY jpress.war /usr/local/tomcat/webapps</code></pre></li><li><p>æ„å»ºé•œåƒï¼Œå¹¶æŠŠé•œåƒå‘½åä¸ºjpress</p><pre><code class="shell"># æ‰§è¡Œè¿™ä¸ªDokerfileè„šæœ¬æ–‡ä»¶docker build -t jpress:latest .</code></pre><p>æ³¨ï¼š</p><ul><li>-tï¼šæ„å»ºé•œåƒçš„åå­—</li><li>.ï¼šdockerfileæ–‡ä»¶çš„ç›®å½•ï¼Œ.ä»£è¡¨å½“å‰ç›®å½•ä¸‹</li></ul></li></ul><h3 id="7-2-è¿è¡Œè‡ªå·±çš„å®¹å™¨"><a href="#7-2-è¿è¡Œè‡ªå·±çš„å®¹å™¨" class="headerlink" title="7-2 è¿è¡Œè‡ªå·±çš„å®¹å™¨"></a>7-2 è¿è¡Œè‡ªå·±çš„å®¹å™¨</h3><p>å¯åŠ¨æ„å»ºå¥½çš„é•œåƒï¼š</p><pre><code class="shell">docker run -d -p 8888:8080 jpress</code></pre><p>æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š</p><pre><code>netstat -na|grep 8888</code></pre><p>å®‰è£…mysqlï¼š</p><pre><code>docker pull mysql</code></pre><p>åˆ›å»ºæ•°æ®åº“å¹¶å¯åŠ¨mysqlï¼š</p><pre><code>docker run -d -p 3307:3306 -e MYSQL_ROOT_PASSWORD=123456 -e MYSQL_DATABASE=jpress mysql</code></pre><p>é…ç½®jpressï¼š</p><p>æŸ¥çœ‹æœ¬æœºå®é™…IPåœ°å€ï¼š</p><pre><code>ifconfig</code></pre><p>ä¸Šä¼ è‡³dockerhub</p><pre><code class="shell"># ç™»å½•docker login -u ç”¨æˆ·å -p å¯†ç # docker push [ç”¨æˆ·å]/[é•œåƒå]:[ç‰ˆæœ¬]docker push 766564616/jpress:latest# ç™»å‡ºdocker logout</code></pre><h2 id="ç¬¬8ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬8ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬8ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬8ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>è¯¾ç¨‹æ€»ç»“</p></blockquote><h3 id="8-1-è¯¾ç¨‹æ€»ç»“"><a href="#8-1-è¯¾ç¨‹æ€»ç»“" class="headerlink" title="8-1 è¯¾ç¨‹æ€»ç»“"></a>8-1 è¯¾ç¨‹æ€»ç»“</h3><ul><li><p>æ€æƒ³ï¼šé›†è£…ç®±ã€æ ‡å‡†åŒ–ï¼Œéš”ç¦»</p></li><li><p>é•œåƒï¼ˆBUILDï¼‰ã€å®¹å™¨ï¼ˆSHIPï¼‰ã€ä»“åº“ï¼ˆRUNï¼‰</p></li><li><p>dockerå‘½ä»¤pullï¼Œbuildï¼Œrunï¼Œstopï¼Œrestartï¼Œexecâ€¦</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>821-è½»æ¾æ„‰å¿«ä¹‹ç©è½¬SpringData</title>
      <link href="/imooc/821-SpringData/"/>
      <url>/imooc/821-SpringData/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/821" target="_blank" rel="noopener">https://www.imooc.com/learn/821</a></p><p>ç®€ä»‹ï¼šåœ¨ä¼ä¸šçº§JavaEEåº”ç”¨å¼€å‘ä¸­ï¼Œå¯¹æ•°æ®åº“çš„è®¿é—®å’Œæ“ä½œæ˜¯å¿…é¡»çš„ã€‚Spring Dataä½œä¸ºSpringSourceçš„å…¶ä¸­ä¸€ä¸ªå­é¡¹ç›®ï¼Œæ—¨åœ¨ç»Ÿä¸€å’Œç®€åŒ–å¯¹å„ç±»å‹æŒä¹…åŒ–å­˜å‚¨å’Œè®¿é—®ï¼Œè€Œä¸æ‹˜æ³¥äºæ˜¯å…³ç³»å‹æ•°æ®åº“è¿˜æ˜¯NoSQLæ•°æ®å­˜å‚¨ï¼Œä½¿å¾—å¯¹æ•°æ®åº“çš„è®¿é—®å˜å¾—æ–¹ä¾¿å¿«æ·ï¼Œå¹¶æ”¯æŒMapReduceæ¡†æ¶åŠäº‘è®¡ç®—æœåŠ¡ï¼›å¯¹äºæ‹¥æœ‰æµ·é‡æ•°æ®çš„é¡¹ç›®ï¼Œå¯ä»¥ç”¨Spring Dataæ¥ç®€åŒ–é¡¹ç›®çš„å¼€å‘ï¼Œå°±å¦‚Spring Frameworkå¯¹JDBCã€ORMçš„æ”¯æŒä¸€æ ·ï¼ŒSpring Dataä¼šè®©æ•°æ®çš„è®¿é—®å˜å¾—æ›´åŠ æ–¹ä¾¿ï¼Œæå¤§æé«˜å¼€å‘æ•ˆç‡ã€æå‡ç¨‹åºå‘˜çš„å¹¸ç¦æŒ‡æ•°ï¼</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>è¯¾ç¨‹ä»‹ç»</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç»"></a>1-1 è¯¾ç¨‹ä»‹ç»</h3><p>ä»€ä¹ˆæ˜¯Spring Data</p><blockquote><p>ä¸»æ—¨ï¼šprovide a familiar and consistentï¼ŒSpring-based programming model for data access<br>â€‹            æä¾›ä¸€ä¸ªç†Ÿæ‚‰çš„ã€ä¸€è‡´çš„ï¼ŒåŸºäºSpringæ¡†æ¶çš„æ•°æ®è®¿é—®æ¡†æ¶ã€‚</p><p>ç®€åŒ–æ•°æ®åº“çš„è®¿é—®ã€‚<br>å†å²ï¼š2010å¹´æå‡ºï¼Œä½œè€…Rod Johnsoï¼ŒSpring Sourceé¡¹ç›®<br>ç½‘å€ï¼š<a href="http://projects.spring.io/spring-data/#quick-start" target="_blank" rel="noopener">http://projects.spring.io/spring-data/#quick-start</a></p></blockquote><p>Spring Dataæ¦‚è§ˆ</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gig4qf3wj30h40c70tv.jpg" width="500" alt="Spring Dataæ¦‚è§ˆ"/><p>Spring DataåŒ…å«å¤šä¸ªå­é¡¹ç›®</p><blockquote><ul><li><p>Spring Data JPA<br>å‡å°‘æ•°æ®è®¿é—®å±‚çš„å¼€å‘é‡</p></li><li><p>Spring Data Mongo DB<br>åŸºäºåˆ†å¸ƒäºå­˜å‚¨çš„æ•°æ®åº“</p></li><li><p>Spring Data Redis<br>å¼€æºã€Cè¯­è¨€å¼€å‘ã€æ”¯æŒç½‘ç»œå†…å­˜ã€å¯æŒä¹…åŒ–çš„Key-Valueçš„æ•°æ®åº“</p></li><li><p>Spring Data Solr<br>Solræ˜¯é«˜æ€§èƒ½çš„ã€Javaè¯­è¨€å¼€å‘ã€åŸºäºLucenceçš„å…¨æ–‡æœç´¢æœåŠ¡å™¨</p></li></ul></blockquote><p>è¯¾ç¨‹å®‰æ’</p><blockquote><ul><li>ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“<br>åŸç”ŸJDBCã€Spring JdbcTemplate</li><li>Spring Dataå¿«é€Ÿèµ·æ­¥</li><li>Spring Data JPAè¿›é˜¶<ul><li>Spring Data JPAé«˜çº§</li></ul></li></ul></blockquote><h2 id="ç¬¬2ç« -ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“"><a href="#ç¬¬2ç« -ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“" class="headerlink" title="ç¬¬2ç«  ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“"></a>ç¬¬2ç«  ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“</h2><blockquote><p>å…ˆä½¿ç”¨ä¼ ç»Ÿçš„JDBCæ–¹æ³•æ“ä½œæ•°æ®åº“ï¼Œè¿›è€Œå†ä½¿ç”¨Spring JdbcTemplateæ–¹å¼æ“ä½œæ•°æ®åº“ï¼Œå¹¶å¯¹æ¯”ç°å­˜æ“ä½œæ–¹å¼çš„ä¼˜ç¼ºç‚¹</p></blockquote><h3 id="2-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“"><a href="#2-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“" class="headerlink" title="2-1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“"></a>2-1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“</h3><blockquote><ul><li>JDBC</li><li>Spring JdbcTemplate</li><li>å¼Šç«¯åˆ†æ</li></ul></blockquote><h3 id="2-2-å‡†å¤‡å·¥ä½œ"><a href="#2-2-å‡†å¤‡å·¥ä½œ" class="headerlink" title="2-2 å‡†å¤‡å·¥ä½œ"></a>2-2 å‡†å¤‡å·¥ä½œ</h3><p>JDBC</p><blockquote><p>Connection<br>Statement<br>ResultSet<br>Test Case</p></blockquote><p>æ­å»ºå¼€å‘ç¯å¢ƒ</p><ul><li><p>åˆ›å»ºmavené¡¹ç›®<br>Mavenå·¥ç¨‹çš„ç›®å½•ç»“æ„</p></li><li><p>æ·»åŠ æ•°æ®åº“é©±åŠ¨å’Œå•å…ƒæµ‹è¯•ä¾èµ–</p><pre><code class="xml">&lt;!-- mysql --&gt;&lt;dependency&gt;   &lt;groupId&gt;mysql&lt;/groupId&gt;   &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;   &lt;version&gt;5.1.38&lt;/version&gt;&lt;/dependency&gt;&lt;!-- junit --&gt;&lt;dependency&gt;   &lt;groupId&gt;junit&lt;/groupId&gt;   &lt;artifactId&gt;junit&lt;/artifactId&gt;   &lt;version&gt;4.10&lt;/version&gt;   &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;</code></pre></li><li><p>æ•°æ®åº“è¡¨çš„å‡†å¤‡ï¼Œä½¿ç”¨mysqlæ•°æ®åº“</p><pre><code class="mysql"># åˆ›å»ºæ•°æ®åº“create database spring_data;# åˆ›å»ºæ•°æ®è¡¨create table student(    id int not null auto_increment,    name varchar(20)not null,    age int not null,    primary key(id));# æŸ¥çœ‹è¡¨ç»“æ„desc student;# æ’å…¥æ•°æ®insert into student(name,age)values(&quot;zhangsan&quot;, 20);insert into student(name,age)values(&quot;lisi&quot;, 21);insert into student(name,age)values(&quot;wangwu&quot;, 22);# æŸ¥è¯¢æ•°æ®select * from student;</code></pre></li></ul><h3 id="2-3-JDBCUtilå¼€å‘"><a href="#2-3-JDBCUtilå¼€å‘" class="headerlink" title="2-3 JDBCUtilå¼€å‘"></a>2-3 JDBCUtilå¼€å‘</h3><p>å¼€å‘JDBCUtilå·¥å…·ç±»ï¼š</p><blockquote><p>è·å–Connectionï¼Œå…³é—­Connectionã€Statementã€ResultSet<br>æ³¨æ„äº‹é¡¹ï¼šé…ç½®çš„å±æ€§æ”¾ç½®é…ç½®æ–‡ä»¶ä¸­ï¼Œç„¶åé€šè¿‡ä»£ç çš„æ–¹å¼å°†é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®åŠ è½½è¿›æ¥å³å¯ã€‚</p></blockquote><p>ä»£ç ç¤ºä¾‹ï¼š</p><pre><code class="java">package com.myimooc.springdata.jdbc.util;import java.io.InputStream;import java.sql.*;import java.util.Properties;/** * JDBCå·¥å…·ç±»ï¼š * 1ï¼‰è·å–Connection * 2ï¼‰é‡Šæ”¾èµ„æº */public class JDBCUtils {    /**     * è·å–Connection     * @return æ‰€è·å¾—åˆ°çš„JDBCçš„Connection     */    public static Connection getConnection() throws Exception {        /**         * ä¸å»ºè®®å¤§å®¶æŠŠé…ç½®ç¡¬ç¼–ç åˆ°ä»£ç ä¸­         * æœ€ä½³å®è·µï¼šé…ç½®æ€§çš„å»ºè®®å†™åˆ°é…ç½®æ–‡ä»¶ä¸­         * *///        String url = &quot;jdbc:mysql:///spring_data&quot;;//        String username = &quot;root&quot;;//        String password = &quot;root&quot;;//        String dirverClass = &quot;com.mysql.jdbc.Driver&quot;;        InputStream inputStream =  JDBCUtils.class.getClassLoader().getResourceAsStream(&quot;db.properties&quot;);        Properties properties = new Properties();        properties.load(inputStream);        String url = properties.getProperty(&quot;jdbc.url&quot;);        String username = properties.getProperty(&quot;jdbc.username&quot;);        String password = properties.getProperty(&quot;jdbc.password&quot;);        String driverClass = properties.getProperty(&quot;jdbc.driverClass&quot;);        Class.forName(driverClass);        return DriverManager.getConnection(url,username,password);    }    /**     * é‡Šæ”¾DBç›¸å…³èµ„æº     */    public static void release(ResultSet resultSet, Statement statement, Connection connection) throws Exception {        if(resultSet != null ){            resultSet.close();        }        if(statement != null ){            statement.close();        }        if(connection != null ){            connection.close();        }    }}</code></pre><p>æ•°æ®åº“è¿æ¥é…ç½®æ–‡ä»¶ï¼š</p><pre><code class="properties"># db.propertiesjdbc.url = jdbc:mysql:///spring_datajdbc.user = rootjdbc.password = rootjdbc.driverClass = com.mysql.jdbc.Driver</code></pre><p>æ³¨ï¼š</p><ul><li>é…ç½®çš„å±æ€§æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œç„¶åé€šè¿‡ä»£ç çš„æ–¹å¼å°†é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®åŠ è½½è¿›æ¥å³å¯ã€‚</li></ul><p>å•å…ƒæµ‹è¯•ï¼š</p><pre><code class="java">@Testpublic void testGetConnection() throws Exception {    Connection connection = JDBCUtil.getConnection();    Assert.assertNotNull(connection);}</code></pre><h3 id="2-4-Daoå¼€å‘"><a href="#2-4-Daoå¼€å‘" class="headerlink" title="2-4 Daoå¼€å‘"></a>2-4 Daoå¼€å‘</h3><p>å»ºç«‹å¯¹è±¡æ¨¡å‹åŠDAOå±‚å¼€å‘ã€‚</p><p>ä»£ç æ¼”ç¤ºï¼š</p><ol><li><p>å¯¹è±¡æ¨¡å‹</p><pre><code class="java">package com.myimooc.springdata.jdbc.domain;/** * Studentå®ä½“ç±» */@Datapublic class Student {    /** ä¸»é”®ID */    private Integer id;    /** å§“å */    private String name;    /** å¹´é¾„ */    private int age;}</code></pre></li><li><p>DAOæ¥å£</p><pre><code class="java">package com.myimooc.springdata.jdbc.dao;import com.myimooc.springdata.jdbc.domain.Student;import java.util.List;/** * Student DAOè®¿é—®æ¥å£ */public interface StudentDao {    /**     * è·å–æ‰€æœ‰å­¦ç”Ÿ     * @return æ‰€æœ‰å­¦ç”Ÿ     */    List&lt;Student&gt; listStudent();    /**     * æ·»åŠ ä¸€ä¸ªå­¦ç”Ÿ     * @param student å¾…æ·»åŠ çš„å­¦ç”Ÿ     */    void saveStudent(Student student);}</code></pre></li><li><p>DAOå®ç°</p><pre><code class="java">package com.myimooc.springdata.jdbc.dao.impl;import com.myimooc.springdata.jdbc.dao.StudentDao;import com.myimooc.springdata.jdbc.domain.Student;import com.myimooc.springdata.jdbc.util.JDBCUtils;import java.sql.Connection;import java.sql.PreparedStatement;import java.sql.ResultSet;import java.util.ArrayList;import java.util.List;/** * Student DAOè®¿é—®æ¥å£å®ç°ç±»ï¼šé€šè¿‡æœ€åŸå§‹çš„JDBCçš„æ–¹å¼æ“ä½œ */public class StudentDaoImpl implements StudentDao {    public List&lt;Student&gt; listStudent() {        List&lt;Student&gt; studentList = new ArrayList&lt;Student&gt;();        String sql = &quot;select id,name,age from student&quot;;        try (Connection connection = JDBCUtils.getConnection();             PreparedStatement preparedStatement = connection.prepareStatement(sql);             ResultSet resultSet = preparedStatement.executeQuery();) {            while(resultSet.next()) {                Student student = new Student();                student.setId(resultSet.getInt(&quot;id&quot;));                student.setName(resultSet.getString(&quot;name&quot;));                student.setAge(resultSet.getInt(&quot;age&quot;));                studentList.add(student);            }        } catch (Exception e) {            e.printStackTrace();        } finally {            JDBCUtils.release(resultSet, preparedStatement, connection);        }        return studentList;    }    public void saveStudent(Student student) {        String sql = &quot;insert into student(name,age) values(?, ?)&quot;;        try (Connection connection = JDBCUtils.getConnection();             PreparedStatement preparedStatement = connection.prepareStatement(sql);) {            preparedStatement.setString(1, student.getName());            preparedStatement.setInt(2, student.getAge());            preparedStatement.executeUpdate();        } catch (Exception e) {            e.printStackTrace();        } finally {            JDBCUtils.release(resultSet,preparedStatement,connection);        }    }}</code></pre></li><li><p>å•å…ƒæµ‹è¯•</p><pre><code class="java">@Testpublic void listStudentTest(){    StudentDao studentDao = new StudentDaoImpl();    List&lt;Student&gt;  studentList = studentDao.listStudent();    for(Student student : studentList){        System.out.println(student);    }}@Testpublic void saveStudentTest(){    StudentDao studentDao = new StudentDaoImpl();    Student student = new Student(&quot;test&quot;, 30);    studentDao.saveStudent(student);}</code></pre></li></ol><h3 id="2-5-ä½¿ç”¨JdbcTemplate"><a href="#2-5-ä½¿ç”¨JdbcTemplate" class="headerlink" title="2-5 ä½¿ç”¨JdbcTemplate"></a>2-5 ä½¿ç”¨JdbcTemplate</h3><p>Spring JdbcTemplate</p><ul><li><p>æ·»åŠ mavenä¾èµ–</p><pre><code class="xml">&lt;!--spring--&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;&lt;/dependency&gt;</code></pre></li><li><p>DataSource &amp; JdbcTemplateæ³¨å…¥</p><p>Springé…ç½®æ–‡ä»¶</p><pre><code class="xml">&lt;!-- beans.xml --&gt;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;    &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;        &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;        &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;        &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql:///spring_data&quot;/&gt;    &lt;/bean&gt;    &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;    &lt;/bean&gt;    &lt;bean id=&quot;studentDAO&quot; class=&quot;com.imooc.dao.StudentDAOSpringJdbcImpl&quot;&gt;        &lt;property name=&quot;jdbcTemplate&quot; ref=&quot;jdbcTemplate&quot;/&gt;    &lt;/bean&gt;&lt;/beans&gt;</code></pre></li><li><p>Test Case</p><pre><code class="java">public class DataSourceTest {    private ApplicationContext ctx = null;    @Before    public void setup(){        System.out.println(&quot;setup&quot;);        ctx = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);    }    @After    public void tearDown(){        System.out.println(&quot;tearDown&quot;);        ctx = null;    }    @Test    public void testDataSource(){        System.out.println(&quot;testDataSource&quot;);        DataSource dataSource = (DataSource)ctx.getBean(&quot;dataSource&quot;);        Assert.notNull(dataSource);    }    @Test    public void testJdbcTemplate(){        System.out.println(&quot;testJdbcTemplate&quot;);        JdbcTemplate jdbcTemplate = (JdbcTemplate)ctx.getBean(&quot;jdbcTemplate&quot;);        Assert.notNull(jdbcTemplate);    }}</code></pre></li><li><p>Daoå®ç°</p><pre><code class="java">package com.imooc.dao;import com.imooc.domain.Student;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.core.RowCallbackHandler;import java.sql.ResultSet;import java.sql.SQLException;import java.util.ArrayList;import java.util.List;/** * StudentDAOè®¿é—®æ¥å£å®ç°ç±»ï¼šé€šè¿‡Spring jdbcçš„æ–¹å¼æ“ä½œ */@Datapublic class StudentDAOSpringJdbcImpl implements StudentDAO {    @Autowired    private JdbcTemplate jdbcTemplate;    @Override    public List&lt;Student&gt; query() {        final List&lt;Student&gt; students = new ArrayList&lt;Student&gt;();        String sql = &quot;SELECT id, name, age FROM student&quot;;        jdbcTemplate.query(sql, new RowCallbackHandler() {            @Override            public void processRow(ResultSet rs) throws SQLException {                Student student = new Student();                student.setId(rs.getInt(&quot;id&quot;));                student.setName(rs.getString(&quot;name&quot;));                student.setAge(rs.getInt(&quot;age&quot;));                students.add(student);            }        });        return students;    }    @Override    public void save(Student student) {        String sql = &quot;INSERT INTO student(name, age) VALUES(?, ?)&quot;;        jdbcTemplate.update(sql, student.getName(), student.getAge());    }}</code></pre></li><li><p>å•å…ƒæµ‹è¯•</p><pre><code class="java">public class StudentDAOSpringJdbcImplTest {    private ApplicationContext ctx = null;    private StudentDAO studentDAO = null;    @Before    public void setup(){        System.out.println(&quot;setup&quot;);        ctx = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);        studentDAO = (StudentDAO)ctx.getBean(&quot;studentDAO&quot;);    }    @After    public void tearDown(){        System.out.println(&quot;tearDown&quot;);        ctx = null;    }    @Test    public void testQuery() {        List&lt;Student&gt; students = studentDAO.query();        for (Student student : students) {            System.out.println(&quot;student:&quot; + student);        }    }    @Test    public void testSave() {        Student student = new Student(&quot;test-spring-jdbc&quot;, 40);        studentDAO.save(student);    }}</code></pre><p>END</p></li></ul><p>ä»£ç æ¼”ç¤ºï¼š</p><ol><li><p>åˆ›å»ºDBé…ç½®æ–‡ä»¶</p><pre><code class="properties">jdbc.url = jdbc:mysql:///springdatajdbc.username = rootjdbc.password = rootjdbc.driverClass = com.mysql.jdbc.Driver</code></pre></li><li><p>åˆ›å»ºé…ç½®æ–‡ä»¶ç±»</p><pre><code class="java">package com.myimooc.springdata.jdbctemplate.config;import org.springframework.beans.factory.annotation.Value;import org.springframework.context.annotation.ImportResource;import org.springframework.context.annotation.PropertySource;import org.springframework.stereotype.Component;/** * é…ç½®å‚æ•°ç±» */@Data@PropertySource(value=&quot;classpath:db.properties&quot;)@Componentpublic class Properties {    @Value(&quot;${jdbc.driverClass}&quot;)    private String jdbcDriverClass;    @Value(&quot;${jdbc.url}&quot;)    private String jdbcUrl;    @Value(&quot;${jdbc.username}&quot;)    private String jdbcUser;    @Value(&quot;${jdbc.password}&quot;)    private String jdbcPassword;}</code></pre></li><li><p>é…ç½®DataSourceã€JdbcTemplateå’ŒSpringæ³¨è§£æ‰«æ</p><pre><code class="java">package com.myimooc.springdata.jdbctemplate.config;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.datasource.DriverManagerDataSource;@Configuration@ComponentScan(&quot;com.myimooc.springdata.jdbctemplate&quot;)public class SpringConfig {    @Autowired    private Properties properties;    @Bean    DriverManagerDataSource getDriverManagerDataSource(){        DriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource();        driverManagerDataSource.setDriverClassName(properties.getJdbcDriverClass());        driverManagerDataSource.setUrl(properties.getJdbcUrl());        driverManagerDataSource.setUsername(properties.getJdbcUser());        driverManagerDataSource.setPassword(properties.getJdbcPassword());        return driverManagerDataSource;    }    @Bean    JdbcTemplate getJdbcTemplate(){        JdbcTemplate jdbcTemplate = new JdbcTemplate();        jdbcTemplate.setDataSource(getDriverManagerDataSource());        return jdbcTemplate;    }}</code></pre></li><li><p>ç¼–å†™å®ä½“ç±»</p><pre><code class="java">package com.myimooc.springdata.jdbctemplate.domain;/** * Studentå®ä½“ç±» */@Datapublic class Student {    /** ä¸»é”®ID */    private Integer id;    /** å§“å */    private String name;    /** å¹´é¾„ */    private int age;}</code></pre></li><li><p>DAOæ¥å£</p><pre><code class="java">package com.myimooc.springdata.jdbctemplate.dao;import com.myimooc.springdata.jdbctemplate.domain.Student;import java.util.List;/** * StudentDAOè®¿é—®æ¥å£ */public interface StudentDao {    /**     * è·å–æ‰€æœ‰å­¦ç”Ÿ     * @return æ‰€æœ‰å­¦ç”Ÿ     */    List&lt;Student&gt; listStudent();    /**     * æ·»åŠ ä¸€ä¸ªå­¦ç”Ÿ     * @param student å¾…æ·»åŠ çš„å­¦ç”Ÿ     */    void saveStudent(Student student);}</code></pre></li><li><p>DAOå®ç°</p><pre><code class="java">package com.myimooc.springdata.jdbctemplate.dao.impl;import com.myimooc.springdata.jdbctemplate.dao.StudentDao;import com.myimooc.springdata.jdbctemplate.domain.Student;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.stereotype.Repository;import java.util.ArrayList;import java.util.List;import java.util.Map;/** * StudentDAOè®¿é—®æ¥å£å®ç°ç±»ï¼šé€šè¿‡ JdbcTemplate çš„æ–¹å¼æ“ä½œ */@Repositorypublic class StudentDaoImpl implements StudentDao {    @Autowired    private JdbcTemplate jdbcTemplate;    public List&lt;Student&gt; listStudent() {        List&lt;Student&gt; studentList = new ArrayList&lt;Student&gt;();        String sql = &quot;select id, name, age from student&quot;;        List&lt;Map&lt;String,Object&gt;&gt;  mapList = jdbcTemplate.queryForList(sql);        for (Map&lt;String,Object&gt; mapTemp : mapList) {            Integer id = Integer.parseInt(mapTemp.get(&quot;id&quot;).toString());            String name = mapTemp.get(&quot;name&quot;).toString();            Integer age = Integer.parseInt(mapTemp.get(&quot;age&quot;).toString());            Student student = new Student();            student.setId(id);            student.setName(name);            student.setAge(age);            studentList.add(student);        }        return studentList;    }    public void saveStudent(Student student) {        String sql = &quot;insert into student(name, age) value(?,?)&quot;;        jdbcTemplate.update(sql,student.getName(),student.getAge());    }}</code></pre></li><li><p>å•å…ƒæµ‹è¯•ç±»</p><pre><code class="java">package com.myimooc.springdata.jdbctemplate;import com.myimooc.springdata.jdbctemplate.config.SpringConfig;import com.myimooc.springdata.jdbctemplate.dao.StudentDao;import com.myimooc.springdata.jdbctemplate.domain.Student;import org.junit.After;import org.junit.Assert;import org.junit.Before;import org.junit.Test;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.datasource.DriverManagerDataSource;import javax.sql.DataSource;import java.util.List;/** *  ä½¿ç”¨ JdbcTemplate å®ç° StudentDao å•å…ƒæµ‹è¯•ç±» */public class StudentDaoTest {    private ApplicationContext ctx = null;    private StudentDao studentDao;    @Before    public void init(){        ctx = new AnnotationConfigApplicationContext(SpringConfig.class);        studentDao = ctx.getBean(StudentDao.class);    }    @After    public void destroy(){        ctx = null;    }    @Test    public void listStudentTest(){        List&lt;Student&gt; studentList = studentDao.listStudent();        for (Student student : studentList){            System.out.println(student.toString());        }    }    @Test    public void saveTest(){        Student student = new Student(&quot;test-spring-jdbcTemplate&quot;, 25);        studentDao.saveStudent(student);    }}</code></pre></li></ol><h3 id="2-6-å¼Šç«¯åˆ†æ"><a href="#2-6-å¼Šç«¯åˆ†æ" class="headerlink" title="2-6 å¼Šç«¯åˆ†æ"></a>2-6 å¼Šç«¯åˆ†æ</h3><blockquote><ul><li>DAOé‡Œé¢ä»£ç é‡å¤ªå¤š</li><li>DAOçš„å®ç°æœ‰å¾ˆå¤šé‡å¤ä»£ç </li><li>å¼€å‘åˆ†é¡µå’Œå…¶å®ƒåŠŸèƒ½ï¼Œéœ€è¦é‡æ–°è¿›è¡Œå°è£…</li></ul></blockquote><h2 id="ç¬¬3ç« -Spring-Dataå¿«é€Ÿå…¥é—¨"><a href="#ç¬¬3ç« -Spring-Dataå¿«é€Ÿå…¥é—¨" class="headerlink" title="ç¬¬3ç«  Spring Dataå¿«é€Ÿå…¥é—¨"></a>ç¬¬3ç«  Spring Dataå¿«é€Ÿå…¥é—¨</h2><blockquote><p>å®Œæˆè¯¥æ¡†æ¶çš„å¼€å‘ç¯å¢ƒæ­å»ºåŠå•å…ƒæµ‹è¯•ï¼Œæœ¬è¯¾æˆ‘ä»¬å°†ä½¿ç”¨IDEAå¼€å‘å¹¶ä½¿ç”¨Mavenæ„å»ºé¡¹ç›®ï¼›</p></blockquote><h3 id="3-1-å¼€å‘ç¯å¢ƒæ­å»º"><a href="#3-1-å¼€å‘ç¯å¢ƒæ­å»º" class="headerlink" title="3-1 å¼€å‘ç¯å¢ƒæ­å»º"></a>3-1 å¼€å‘ç¯å¢ƒæ­å»º</h3><p>Spring Data JPAå¿«é€Ÿèµ·æ­¥</p><blockquote><ol><li>å¼€å‘ç¯å¢ƒæ­å»º</li><li>Spring Data JPA HelloWorldå¼€å‘</li></ol></blockquote><ul><li><p>æ·»åŠ mavenä¾èµ–ï¼š</p><pre><code class="xml">&lt;!--spring data jpa--&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;    &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;    &lt;version&gt;1.8.0.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;    &lt;version&gt;4.3.6.Final&lt;/version&gt;&lt;/dependency&gt;</code></pre></li><li><p>DataSource &amp; JdbcTemplateæ³¨å…¥</p><p><strong>Springé…ç½®æ–‡ä»¶</strong>ï¼š</p><pre><code class="xml">&lt;!-- beans-new.xml --&gt;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;       xmlns:jpa=&quot;http://www.springframework.org/schema/data/jpa&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;&gt;    &lt;!-- Springæ‰«æ --&gt;    &lt;context:component-scan base-package=&quot;com.imooc&quot;/&gt;&lt;/beans&gt;</code></pre><ol><li><p>é…ç½®æ•°æ®æº</p><pre><code class="xml">&lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;    &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql:///spring_data&quot;/&gt;&lt;/bean&gt;</code></pre></li><li><p>é…ç½®EntityManagerFactory</p><pre><code class="xml">&lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;    &lt;property name=&quot;jpaVendorAdapter&quot;&gt;        &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;/&gt;    &lt;/property&gt;    &lt;property name=&quot;packagesToScan&quot; value=&quot;com.imooc&quot;/&gt;    &lt;property name=&quot;jpaProperties&quot;&gt;        &lt;props&gt;            &lt;prop key=&quot;hibernate.ejb.naming_strategy&quot;&gt;org.hibernate.cfg.ImprovedNamingStrategy&lt;/prop&gt;            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/prop&gt;            &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;            &lt;prop key=&quot;hibernate.format_sql&quot;&gt;true&lt;/prop&gt;            &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;        &lt;/props&gt;    &lt;/property&gt;&lt;/bean&gt;</code></pre></li><li><p>é…ç½®äº‹åŠ¡ç®¡ç†å™¨</p><pre><code class="xml">&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;    &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot;/&gt;&lt;/bean&gt;</code></pre></li><li><p>é…ç½®æ”¯æŒæ³¨è§£çš„äº‹åŠ¡</p><pre><code class="xml">&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;</code></pre></li><li><p>é…ç½®spring data</p><pre><code class="xml">&lt;jpa:repositories base-package=&quot;com.imooc&quot; entity-manager-factory-ref=&quot;entityManagerFactory&quot;/&gt;</code></pre></li></ol></li><li><p>åˆ›å»ºå®ä½“ç±»</p><pre><code class="java">/** * é›‡å‘˜:  å…ˆå¼€å‘å®ä½“ç±»===&gt;è‡ªåŠ¨ç”Ÿæˆæ•°æ®è¡¨ */@Data@Entitypublic class Employee {    @Id    @GeneratedValue    private Integer id;    @Column(length = 20, nullable = false)    private String name;    private Integer age;}</code></pre></li><li><p>å•å…ƒæµ‹è¯•</p><pre><code class="java">public class SpringDataTest {    private ApplicationContext ctx = null;    @Before    public void setup(){        System.out.println(&quot;setup&quot;);        ctx = new ClassPathXmlApplicationContext(&quot;beans-new.xml&quot;);    }    @After    public void tearDown(){        System.out.println(&quot;tearDown&quot;);        ctx = null;    }    @Test    public void testEntityManagerFactory(){        // è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç”Ÿæˆä¸€å¼ æ•°æ®è¡¨ã€‚æœ‰åˆ™æˆåŠŸï¼Œæ— åˆ™å¤±è´¥ã€‚    }}</code></pre><p>END</p></li></ul><p>ä»£ç æ¼”ç¤ºï¼š</p><ol><li><p>åˆ›å»ºDBé…ç½®æ–‡ä»¶</p><pre><code class="properties">jdbc.url = jdbc:mysql:///springdatajdbc.username = rootjdbc.password = rootjdbc.driverClass = com.mysql.jdbc.Driver</code></pre></li><li><p>åˆ›å»ºé…ç½®æ–‡ä»¶ç±»</p><pre><code class="java">package com.myimooc.springdata.jpa.config;import org.springframework.beans.factory.annotation.Value;import org.springframework.context.annotation.PropertySource;import org.springframework.stereotype.Component;@Data@Component@PropertySource(value=&quot;classpath:db.properties&quot;)public class PropertiesConfig {    @Value(&quot;${jdbc.driverClass}&quot;)    private String jdbcDriverClass;    @Value(&quot;${jdbc.url}&quot;)    private String jdbcUrl;    @Value(&quot;${jdbc.username}&quot;)    private String jdbcUser;    @Value(&quot;${jdbc.password}&quot;)    private String jdbcPassword;}</code></pre></li><li><p>é…ç½®TransactionManagerã€EntityManagerFactoryå’ŒSpringè‡ªåŠ¨æ‰«ææ³¨å…¥</p><pre><code class="java">package com.myimooc.springdata.jpa.config;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;import org.springframework.data.jpa.repository.config.EnableJpaRepositories;import org.springframework.jdbc.datasource.DriverManagerDataSource;import org.springframework.orm.jpa.JpaTransactionManager;import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;import org.springframework.orm.jpa.vendor.Database;import org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;import org.springframework.transaction.PlatformTransactionManager;import org.springframework.transaction.annotation.EnableTransactionManagement;import java.util.Properties;/** * Springé…ç½®ç±» */// å£°æ˜ä¸ºé…ç½®ç±»@Configuration// å¯ç”¨äº‹åŠ¡ç®¡ç†@EnableTransactionManagement// å¯ç”¨è‡ªåŠ¨æ‰«æç»§æ‰¿ JpaRepository æ¥å£çš„ç±»ã€‚// æ³¨æ„ï¼Œæ­¤æ³¨è§£éœ€è¦é…ç½® entityManagerFactory å’Œ transactionManager// æ–¹å¼ä¸€ï¼šå®šä¹‰è·å–Beanæ–¹æ³•åä¸º entityManagerFactory å’Œ transactionManager// æ–¹å¼äºŒï¼šé…ç½® @EnableJpaRepositoriesæ³¨è§£çš„ entityManagerFactoryRef å±æ€§ ä¸ºè‡ªå®šä¹‰è·å–Beançš„æ–¹æ³•åã€‚@EnableJpaRepositories(basePackages = &quot;com.myimooc.springdata.jpa&quot;)// å¯ç”¨è‡ªåŠ¨æ‰«æ @Component æ³¨è§£çš„Bean@ComponentScan(basePackages = &quot;com.myimooc.springdata.jpa&quot;)public class SpringConfig {    @Autowired    private PropertiesConfig propertiesConfig;    /**     * é…ç½®æ•°æ®æº     * @return     */    @Bean    public DriverManagerDataSource dataSource(){        DriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource();        driverManagerDataSource.setDriverClassName(propertiesConfig.getJdbcDriverClass());        driverManagerDataSource.setUrl(propertiesConfig.getJdbcUrl());        driverManagerDataSource.setUsername(propertiesConfig.getJdbcUser());        driverManagerDataSource.setPassword(propertiesConfig.getJdbcPassword());        return driverManagerDataSource;    }    /**     * é…ç½®äº‹åŠ¡ç®¡ç†å™¨ JpaTransactionManager     * @return     */    @Bean(name=&quot;transactionManager&quot;)    public PlatformTransactionManager transactionManager(){        JpaTransactionManager transactionManager = new JpaTransactionManager();        transactionManager.setDataSource(this.dataSource());        transactionManager.setEntityManagerFactory(this.entityManagerFactory().getObject());        return transactionManager;//        return new DataSourceTransactionManager(this.dataSource());//        return new JpaTransactionManager(this.entityManagerFactory().getObject());    }    /**     * é…ç½®JPAçš„ EntityManagerFactory     * @return     */    @Bean    public LocalContainerEntityManagerFactoryBean entityManagerFactory(){        LocalContainerEntityManagerFactoryBean entityManagerFactory = new LocalContainerEntityManagerFactoryBean();        entityManagerFactory.setDataSource(dataSource());        HibernateJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();        jpaVendorAdapter.setGenerateDdl(true);        jpaVendorAdapter.setDatabase(Database.MYSQL);        entityManagerFactory.setJpaVendorAdapter(jpaVendorAdapter);        entityManagerFactory.setPackagesToScan(&quot;com.myimooc.springdata.jpa&quot;);        Properties jpaProperties = new Properties();//        jpaProperties.setProperty(&quot;hibernate.ejb.naming_strategy&quot;,&quot;org.hibernate.cfg.ImprovedNamingStrategy&quot;);        jpaProperties.setProperty(&quot;hibernate.dialect&quot;,&quot;org.hibernate.dialect.MySQL5InnoDBDialect&quot;);        jpaProperties.setProperty(&quot;hibernate.show_sql&quot;,&quot;true&quot;);        jpaProperties.setProperty(&quot;hibernate.format_sql&quot;,&quot;true&quot;);        jpaProperties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;,&quot;update&quot;);        entityManagerFactory.setJpaProperties(jpaProperties);        return entityManagerFactory;    }}</code></pre></li><li><p>ç¼–å†™å®ä½“ç±»ï¼šEmployee</p><pre><code class="java">package com.myimooc.springdata.jpa.domain;import javax.persistence.*;/** * é›‡å‘˜ï¼šå…ˆå¼€å‘å®ä½“ç±»ï¼Œç„¶åè‡ªåŠ¨ç”Ÿæˆå®ä½“è¡¨ */@Data@Entity@Table(name = &quot;test_employee&quot;)public class Employee {    @Id    @GeneratedValue    private Integer id;    @Column(length = 20)    private String name;    private Integer age;}</code></pre></li></ol><h3 id="3-2-èµ·æ­¥ç¨‹åºå¼€å‘"><a href="#3-2-èµ·æ­¥ç¨‹åºå¼€å‘" class="headerlink" title="3-2 èµ·æ­¥ç¨‹åºå¼€å‘"></a>3-2 èµ·æ­¥ç¨‹åºå¼€å‘</h3><ol><li><p>ç¼–å†™EmployeeRepositoryæ¥å£</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.domain.Employee;import org.springframework.data.repository.Repository;/** * ä½¿ç”¨ Repository æ¥å£ */// æ–¹å¼äºŒï¼šä½¿ç”¨ @RepositoryDefinition æ³¨è§£//  @RepositoryDefinition(domainClass = Employee.class,idClass = Integer.class)public interface EmployeeRepository extends Repository&lt;Employee,Integer&gt; { //æ–¹å¼ä¸€ï¼šç»§æ‰¿ Repository æ¥å£    /**     * è·å–é›‡å‘˜å¯¹è±¡é€šè¿‡åç§°     */    Employee findByName(String name);}</code></pre></li><li><p>ç¼–å†™å•å…ƒæµ‹è¯•ç±»ï¼šEmployeeRepositoryTest</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.config.SpringConfig;import com.myimooc.springdata.jpa.domain.Employee;import com.myimooc.springdata.jpa.repository.EmployeeRepository;import com.myimooc.springdata.jpa.service.EmployeeService;import org.junit.After;import org.junit.Assert;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;import java.util.ArrayList;import java.util.List;/** * EmployeeRepositoryå•å…ƒæµ‹è¯•ç±» */public class EmployeeRepositoryTest {    private ApplicationContext ctx = null;    private EmployeeRepository employeeRepository = null;    @Before    public void init(){        ctx = new AnnotationConfigApplicationContext(SpringConfig.class);        employeeRepository = ctx.getBean(EmployeeRepository.class);    }    @After    public void destroy(){        ctx = null;    }    @Test    public void findByNameTest(){        // org.springframework.data.ipa.repository.support.SimpleJpaRepository@566        System.out.println(employeeRepository);        Employee employee = employeeRepository.findByName(&quot;cc&quot;);        System.out.println(employee.toString());    }}</code></pre></li></ol><p>Repository</p><blockquote><p>Repositoryï¼šSpring Dataæ ¸å¿ƒç±»<br>RepositoryDefinitionï¼šä½¿ç”¨è¯¥æ³¨è§£è¿›è¡Œé…ç½®<br>Repository Query Specificationï¼šæŸ¥è¯¢æ—¶ï¼Œæ–¹æ³•å‘½åä¸èƒ½ä¹±å†™<br>Query Annotationï¼šä½¿ç”¨è¯¥æ³¨è§£ï¼Œå¯ä»¥å®ç°åŸç”ŸSQLæŸ¥è¯¢<br>Update/Delete/Transactionï¼šæ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œæ”¯æŒäº‹åŠ¡</p></blockquote><p>Repository Hierarchyï¼šå±‚æ¬¡ç»“æ„</p><blockquote><p>CrudRepositoryï¼šå†…ç½®äº†æ–°å¢ã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢æ–¹æ³•<br>PagingAndSortingRespositoryï¼šåˆ†é¡µå’Œæ’åº<br>JpaRepositoryï¼š<br>JpaSpecificationExcutor</p></blockquote><h2 id="ç¬¬4ç« -Spring-Data-JPAè¿›é˜¶"><a href="#ç¬¬4ç« -Spring-Data-JPAè¿›é˜¶" class="headerlink" title="ç¬¬4ç«  Spring Data JPAè¿›é˜¶"></a>ç¬¬4ç«  Spring Data JPAè¿›é˜¶</h2><blockquote><p>ä½¿ç”¨Spring Data JPAå®ŒæˆCRUDæ“ä½œ</p></blockquote><h3 id="4-1-å…³äºRepositoryæ¥å£"><a href="#4-1-å…³äºRepositoryæ¥å£" class="headerlink" title="4-1 å…³äºRepositoryæ¥å£"></a>4-1 å…³äºRepositoryæ¥å£</h3><p>Repositoryæ¥å£è¯¦è§£</p><blockquote><p>Repositoryæ¥å£æ˜¯Spring Dataçš„æ ¸å¿ƒæ¥å£ï¼Œä¸æä¾›ä»»ä½•æ–¹æ³•<br>public interface Repository&lt;T, ID extends Serializable&gt;{}</p><p>@RepositoryDefinitionæ³¨è§£çš„ä½¿ç”¨<br>@RepositoryDefinition(domainClass = Employee.class, idClass = Integer.class)</p></blockquote><p>Repositoryç±»çš„å®šä¹‰ï¼š</p><blockquote><ul><li><p>Repositoryæ˜¯ä¸€ä¸ªç©ºæ¥å£ï¼Œæ ‡è®°æ¥å£ã€‚æ²¡æœ‰åŒ…å«æ–¹æ³•å£°æ˜çš„æ¥å£</p></li><li><p>å¦‚æœæˆ‘ä»¬å®šä¹‰çš„æ¥å£EmployeeRepository extends Repositoryï¼Œä¼šè¢«Springç®¡ç†ã€‚<br>å¦‚æœæˆ‘ä»¬è‡ªå·±çš„æ¥å£æ²¡æœ‰extends Repositoryï¼Œè¿è¡Œæ—¶ä¼šæŠ¥é”™ï¼Œæ²¡æœ‰è¿™ä¸ªBeanï¼š</p><pre><code class="java">org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.imooc.repository.EmployeeRepository&#39; available</code></pre></li><li><p>æ·»åŠ RepositoryDefinitionæ³¨è§£èƒ½åˆ°è¾¾åˆ°ä¸ç”¨extends Repositoryçš„åŠŸèƒ½</p></li></ul></blockquote><h3 id="4-2-Repositoryå­æ¥å£è¯¦è§£"><a href="#4-2-Repositoryå­æ¥å£è¯¦è§£" class="headerlink" title="4-2 Repositoryå­æ¥å£è¯¦è§£"></a>4-2 Repositoryå­æ¥å£è¯¦è§£</h3><p>Repositoryå­æ¥å£è¯¦è§£</p><blockquote><p>CrudRepositoryï¼šç»§æ‰¿Repositoryï¼Œå®ç°äº†CRUDç›¸å…³çš„æ–¹æ³•<br>PagingAndSortingRepositoryï¼šç»§æ‰¿CrudRepositoryï¼Œå®ç°äº†åˆ†é¡µæ’åºç›¸å…³çš„æ–¹æ³•<br>JpaRepositoryï¼šç»§æ‰¿PagingAndSortingRepositorï¼Œå®ç°JPAè§„èŒƒç›¸å…³çš„æ–¹æ³•</p></blockquote><h3 id="4-3-æŸ¥è¯¢æ–¹æ³•å®šä¹‰è§„åˆ™å’Œä½¿ç”¨"><a href="#4-3-æŸ¥è¯¢æ–¹æ³•å®šä¹‰è§„åˆ™å’Œä½¿ç”¨" class="headerlink" title="4-3 æŸ¥è¯¢æ–¹æ³•å®šä¹‰è§„åˆ™å’Œä½¿ç”¨"></a>4-3 æŸ¥è¯¢æ–¹æ³•å®šä¹‰è§„åˆ™å’Œä½¿ç”¨</h3><p>Repositoryä¸­æŸ¥è¯¢æ–¹æ³•å®šä¹‰è§„åˆ™å’Œä½¿ç”¨</p><blockquote><p>äº†è§£Spring Dataä¸­æŸ¥è¯¢æ–¹æ³•åç§°çš„å®šä¹‰è§„åˆ™<br>ä½¿ç”¨Spring Dataå®Œæˆå¤æ‚æŸ¥è¯¢æ–¹æ³•åç§°çš„å‘½å</p></blockquote><p>æŸ¥è¯¢æ–¹æ³•å®šä¹‰è§„åˆ™</p><table><thead><tr><th>Keyword</th><th>Sample</th><th>JPQL snippet</th></tr></thead><tbody><tr><td>And</td><td>findByLastnameAndFirstname</td><td>where x.lastname=?1 and x.firstname=?2</td></tr><tr><td>Or</td><td>findByLastnameOrFirstname</td><td>where x.lastname=?1 or x.firstname=?2</td></tr><tr><td>Between</td><td>findByStartDateBetween</td><td>where x.startDate between 1? and ?2</td></tr><tr><td>LessThan</td><td>findByAgeLessThan</td><td>where x.age&lt;?1</td></tr><tr><td>GreaterThan</td><td>findByAgeGreaterThan</td><td>where x.age&gt;?1</td></tr><tr><td>After</td><td>findByStartDateAfter</td><td>where x.startDate&gt;?1</td></tr><tr><td>Before</td><td>findByStartDateBefore</td><td>where x.startDate&lt;?1</td></tr><tr><td>IsNull</td><td>findByAgelsNull</td><td>where x.age is null</td></tr><tr><td>IsNotNul, NotNull</td><td>findByAge(Is)NotNull</td><td>where x.age not null</td></tr><tr><td>Like</td><td>findByFirstnameLike</td><td>where x.firstname like ?1</td></tr><tr><td>Notlike</td><td>findByFirstnameNotlike</td><td>where x. firstname not like ?1</td></tr><tr><td>StartingWith</td><td>findByFirstnameStartingWith</td><td>where x.firstname like ?1(parameter bound with appended %)</td></tr><tr><td>EndingWith</td><td>findByFirstnameEndingWith</td><td>where x.firstname like ?1(parameter bound with prepended %)</td></tr><tr><td>Containing</td><td>findByFirstnameContaining</td><td>where x.firstname like ?1(parameter bound wrapped in %)</td></tr><tr><td>OrderBy</td><td>findByAgeOrderByLastnameDesc</td><td>where x.age=?1 order by x.lastname desc</td></tr><tr><td>Not</td><td>findByLastnameNot</td><td>where x.lastname&lt;&gt;?1</td></tr><tr><td>In</td><td>findByAgeln(Collection<Age> ages)</td><td>where x.age in ?1</td></tr><tr><td>Notln</td><td>findByAgeNotin(Collection<Age> age)</td><td>where x.age not in ?1</td></tr><tr><td>TRUE</td><td>findByActiveTrue</td><td>where x.active=true</td></tr><tr><td>FALSE</td><td>findByActiveFalse</td><td>where x.active=false</td></tr></tbody></table><p>ä»£ç æ¼”ç¤ºï¼š</p><pre><code class="sql">-- æµ‹è¯•æ•°æ®insert into employee (name, age) values (&quot;test1&quot;,20);insert into employee (name, age) values (&quot;test2&quot;,21);insert into employee (name, age) values (&quot;test3&quot;,22);insert into employee (name, age) values (&quot;test4&quot;,20);insert into employee (name, age) values (&quot;test5&quot;,21);insert into employee (name, age) values (&quot;test6&quot;,22);insert into employee (name, age) values (&quot;test16&quot;,22);</code></pre><ol><li><p>åœ¨EmployeeRepositoryæ¥å£ç¼–å†™ä»¥ä¸‹ä»£ç </p><pre><code class="java">// --- ä½¿ç”¨JPAè§„èŒƒæŸ¥è¯¢ ---// where name like ?% and age &lt; ?List&lt;Employee&gt; findByNameStartingWithAndAgeLessThan(String name,Integer age);// where name like %? and age &lt; ?List&lt;Employee&gt; findByNameEndingWithAndAgeLessThan(String name,Integer age);// where name in (?, ?...) or age &lt; ?List&lt;Employee&gt; findByNameInOrAgeLessThan(List&lt;String&gt; name,Integer age);// where name in (?, ?...) and age &lt; ?List&lt;Employee&gt; findByNameInAndAgeLessThan(List&lt;String&gt; name,Integer age);</code></pre></li><li><p>åœ¨EmployeeRepositoryTestå•å…ƒæµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•</p><pre><code class="java">@Testpublic void findByNameStartingWithAndAgeLessThanTest(){    List&lt;Employee&gt; employees = employeeRepository.findByNameStartingWithAndAgeLessThan(&quot;test&quot;,22);    for (Employee employee : employees) {        System.out.println(employee.toString());    }}@Testpublic void findByNameEndingWithAndAgeLessThanTest(){    List&lt;Employee&gt; employees = employeeRepository.findByNameEndingWithAndAgeLessThan(&quot;6&quot;,23);    for (Employee employee : employees) {        System.out.println(employee.toString());    }}@Testpublic void findByNameInOrAgeLessThanTest(){    List&lt;String&gt; names = new ArrayList&lt;String&gt;();    names.add(&quot;test1&quot;);    names.add(&quot;test2&quot;);    names.add(&quot;test3&quot;);    List&lt;Employee&gt; employees = employeeRepository.findByNameInOrAgeLessThan(names,22);    for (Employee employee : employees) {        System.out.println(employee.toString());    }}@Testpublic void findByNameInAndAgeLessThanTest(){    List&lt;String&gt; names = new ArrayList&lt;String&gt;();    names.add(&quot;test1&quot;);    names.add(&quot;test2&quot;);    names.add(&quot;test3&quot;);    List&lt;Employee&gt; employees = employeeRepository.findByNameInAndAgeLessThan(names,22);    for (Employee employee : employees) {        System.out.println(employee.toString());    }}</code></pre></li></ol><p>å¯¹äºæŒ‰ç…§æ–¹æ³•å‘½åè§„åˆ™æ¥ä½¿ç”¨çš„è¯ï¼Œæœ‰å¼Šç«¯ï¼š</p><blockquote><p>1ï¼‰æ–¹æ³•åæ¯”è¾ƒé•¿ï¼šçº¦å®šå¤§äºé…ç½®<br>2ï¼‰å¯¹äºä¸€äº›å¤æ‚çš„æŸ¥è¯¢ï¼Œæ˜¯å¾ˆéš¾å®ç°ã€‚</p></blockquote><p>ä½¿ç”¨@Queryæ³¨è§£æ¥è§£å†³ä»¥ä¸Šå¼Šç«¯ã€‚</p><h3 id="4-4-Queryæ³¨è§£ä½¿ç”¨"><a href="#4-4-Queryæ³¨è§£ä½¿ç”¨" class="headerlink" title="4-4 Queryæ³¨è§£ä½¿ç”¨"></a>4-4 Queryæ³¨è§£ä½¿ç”¨</h3><p>Queryæ³¨è§£ä½¿ç”¨</p><blockquote><ul><li>åœ¨Respositoryæ–¹æ³•ä¸­ä½¿ç”¨ï¼Œä¸éœ€è¦éµå¾ªæŸ¥è¯¢æ–¹æ³•å‘½ä»¤è§„åˆ™</li><li>åªéœ€è¦å°†@Queryå®šä¹‰åœ¨Respositoryä¸­çš„æ–¹æ³•ä¹‹ä¸Šå³å¯</li><li>å‘½åå‚æ•°åŠç´¢å¼•å‚æ•°çš„ä½¿ç”¨</li><li>æœ¬åœ°æŸ¥è¯¢</li></ul></blockquote><ol><li><p>åœ¨EmployeeRepositoryæ¥å£ç¼–å†™ä»¥ä¸‹ä»£ç </p><pre><code class="java">// --- ä½¿ç”¨@Queryæ³¨è§£æŸ¥è¯¢ ---// è‡ªå®šä¹‰æŸ¥è¯¢SQLã€‚Employeeä¸ºç±»åï¼Œä¸æ˜¯è¡¨å@Query(&quot;select o from Employee o where id=(select max(id) from Employee t1)&quot;)Employee getEmployeeByMaxId();// ä½¿ç”¨å ä½ç¬¦è¿›è¡Œå‚æ•°ç»‘å®š@Query(&quot;select o from Employee o where o.name=?1 and o.age=?2&quot;)List&lt;Employee&gt; listEmployeeByNameAndAge(String name, Integer age);// ä½¿ç”¨å‘½åå‚æ•°è¿›è¡Œå‚æ•°ç»‘å®š@Query(&quot;select o from Employee o where o.name=:name and o.age=:age&quot;)List&lt;Employee&gt; listEmployeeByNameAndAge2(@Param(&quot;name&quot;) String name, @Param(&quot;age&quot;)Integer age);// è‡ªå®šä¹‰æŸ¥è¯¢SQLï¼Œlike,å ä½ç¬¦è¿›è¡Œå‚æ•°ç»‘å®š@Query(&quot;select o from Employee o where o.name like %?1%&quot;)List&lt;Employee&gt; listEmployeeByLikeName(String name);// è‡ªå®šä¹‰æŸ¥è¯¢SQLï¼Œlike,å‘½åå‚æ•°è¿›è¡Œå‚æ•°ç»‘å®š@Query(&quot;select o from Employee o where o.name like %:name%&quot;)List&lt;Employee&gt; listEmployeeByLikeName2(@Param(&quot;name&quot;) String name);// ä½¿ç”¨åŸç”Ÿæ€SQLæŸ¥è¯¢ã€‚employeeä¸ºè¡¨å@Query(nativeQuery = true,value = &quot;select count(1) from employee&quot;)long getCount();</code></pre></li><li><p>åœ¨EmployeeRepositoryTestå•å…ƒæµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•</p><pre><code class="java">//  ä½¿ç”¨ @Query æ³¨è§£æŸ¥è¯¢@Testpublic void getEmployeeByMaxIdTest(){    Employee employee = employeeRepository.getEmployeeByMaxId();    System.out.println(employee);}@Testpublic void listEmployeeByNameAndAgeTest(){    List&lt;Employee&gt; employees = employeeRepository.listEmployeeByNameAndAge(&quot;zhangsan&quot;,20);    for (Employee employee : employees) {        System.out.println(employee);    }}@Testpublic void listEmployeeByNameAndAge2Test(){    List&lt;Employee&gt; employees = employeeRepository.listEmployeeByNameAndAge2(&quot;zhangsan&quot;,20);    for (Employee employee : employees) {        System.out.println(employee);    }}@Testpublic void listEmployeeByLikeNameTest(){    List&lt;Employee&gt; employees = employeeRepository.listEmployeeByLikeName(&quot;test1&quot;);    for (Employee employee : employees) {        System.out.println(employee);    }}@Testpublic void listEmployeeByLikeName2Test(){    List&lt;Employee&gt; employees = employeeRepository.listEmployeeByLikeName2(&quot;test&quot;);    for (Employee employee : employees) {        System.out.println(employee);    }}@Testpublic void getCountTest(){    long count = employeeRepository.getCount();    System.out.println(count);}</code></pre></li></ol><h3 id="4-5-æ›´æ–°æ“ä½œæ•´åˆäº‹åŠ¡ä½¿ç”¨"><a href="#4-5-æ›´æ–°æ“ä½œæ•´åˆäº‹åŠ¡ä½¿ç”¨" class="headerlink" title="4-5 æ›´æ–°æ“ä½œæ•´åˆäº‹åŠ¡ä½¿ç”¨"></a>4-5 æ›´æ–°æ“ä½œæ•´åˆäº‹åŠ¡ä½¿ç”¨</h3><p>æ›´æ–°åŠåˆ é™¤æ“ä½œæ•´åˆäº‹åŠ¡çš„ä½¿ç”¨</p><blockquote><ul><li>@Modifyingæ³¨è§£ä½¿ç”¨</li><li>@Modifyingç»“åˆ@Queryæ³¨è§£æ‰§è¡Œæ›´æ–°æ“ä½œ</li><li>@Transactionåœ¨Spring Dataä¸­çš„ä½¿ç”¨</li></ul></blockquote><ol><li><p>åŸºäºjavaconfigåœ¨SpringConfigç±»è¿›è¡Œäº‹åŠ¡é…ç½®</p><pre><code class="java">package com.myimooc.springdata.jpa.config;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;import org.springframework.data.jpa.repository.config.EnableJpaRepositories;import org.springframework.jdbc.datasource.DriverManagerDataSource;import org.springframework.orm.jpa.JpaTransactionManager;import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;import org.springframework.orm.jpa.vendor.Database;import org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;import org.springframework.transaction.PlatformTransactionManager;import org.springframework.transaction.annotation.EnableTransactionManagement;import java.util.Properties;/** * Springé…ç½®ç±» */// å£°æ˜ä¸ºé…ç½®ç±»@Configuration// å¯ç”¨äº‹åŠ¡ç®¡ç†@EnableTransactionManagement// å¯ç”¨è‡ªåŠ¨æ‰«æç»§æ‰¿ JpaRepository æ¥å£çš„ç±»ã€‚// æ³¨æ„ï¼Œæ­¤æ³¨è§£éœ€è¦é…ç½® entityManagerFactory å’Œ transactionManager// æ–¹å¼ä¸€ï¼šå®šä¹‰è·å–Beanæ–¹æ³•åä¸º entityManagerFactory å’Œ transactionManager// æ–¹å¼äºŒï¼šé…ç½® @EnableJpaRepositoriesæ³¨è§£çš„ entityManagerFactoryRef å±æ€§ ä¸ºè‡ªå®šä¹‰è·å–Beançš„æ–¹æ³•åã€‚@EnableJpaRepositories(basePackages = &quot;com.myimooc.springdata.jpa&quot;)// å¯ç”¨è‡ªåŠ¨æ‰«æ @Component æ³¨è§£çš„Bean@ComponentScan(basePackages = &quot;com.myimooc.springdata.jpa&quot;)public class SpringConfig{    @Autowired    private PropertiesConfig propertiesConfig;    // é…ç½®æ•°æ®æº    @Bean    public DriverManagerDataSource dataSource(){        DriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource();        driverManagerDataSource.setDriverClassName(propertiesConfig.getJdbcDriverClass());        driverManagerDataSource.setUrl(propertiesConfig.getJdbcUrl());        driverManagerDataSource.setUsername(propertiesConfig.getJdbcUser());        driverManagerDataSource.setPassword(propertiesConfig.getJdbcPassword());        return driverManagerDataSource;    }    // é…ç½®äº‹åŠ¡ç®¡ç†å™¨ JpaTransactionManager    @Bean(name=&quot;transactionManager&quot;)    public PlatformTransactionManager transactionManager(){        JpaTransactionManager transactionManager = new JpaTransactionManager();        transactionManager.setDataSource(this.dataSource());        transactionManager.setEntityManagerFactory(this.entityManagerFactory().getObject());        return transactionManager;//        return new DataSourceTransactionManager(this.dataSource());//        return new JpaTransactionManager(this.entityManagerFactory().getObject());    }    // é…ç½®JPAçš„ EntityManagerFactory    @Bean    public LocalContainerEntityManagerFactoryBean entityManagerFactory(){        LocalContainerEntityManagerFactoryBean entityManagerFactory = new LocalContainerEntityManagerFactoryBean();        entityManagerFactory.setDataSource(dataSource());        HibernateJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();        jpaVendorAdapter.setGenerateDdl(true);        jpaVendorAdapter.setDatabase(Database.MYSQL);        entityManagerFactory.setJpaVendorAdapter(jpaVendorAdapter);        entityManagerFactory.setPackagesToScan(&quot;com.myimooc.springdata.jpa&quot;);        Properties jpaProperties = new Properties();//        jpaProperties.setProperty(&quot;hibernate.ejb.naming_strategy&quot;,&quot;org.hibernate.cfg.ImprovedNamingStrategy&quot;);        jpaProperties.setProperty(&quot;hibernate.dialect&quot;,&quot;org.hibernate.dialect.MySQL5InnoDBDialect&quot;);        jpaProperties.setProperty(&quot;hibernate.show_sql&quot;,&quot;true&quot;);        jpaProperties.setProperty(&quot;hibernate.format_sql&quot;,&quot;true&quot;);        jpaProperties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;,&quot;update&quot;);        entityManagerFactory.setJpaProperties(jpaProperties);        return entityManagerFactory;    }}</code></pre></li><li><p>åœ¨EmployeeRepositoryæ¥å£ç¼–å†™ä»¥ä¸‹ä»£ç </p><pre><code class="java">// æ›´æ–°æ•°æ®ï¼Œéœ€æ·»åŠ @Modifyingã€@Transactional@Modifying@Query(&quot;update Employee o set o.age = :age where o.id = :id&quot;)void updateAgeById(@Param(&quot;id&quot;)Integer id,@Param(&quot;age&quot;)Integer age);</code></pre></li><li><p>å®šä¹‰Serviceå±‚ï¼Œå®é™…å¼€å‘ä¸­ï¼Œéœ€è¦å®šä¹‰æ¥å£ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œç›´æ¥ä½¿ç”¨ç±»ã€‚</p><pre><code class="java">package com.myimooc.springdata.jpa.service;import com.myimooc.springdata.jpa.domain.Employee;import com.myimooc.springdata.jpa.repository.EmployeeCrudRepository;import com.myimooc.springdata.jpa.repository.EmployeeRepository;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.List;@Servicepublic class EmployeeService {    @Autowired    private EmployeeRepository employeeRepository;    @Autowired    private EmployeeCrudRepository employeeCrudRepository;    @Transactional    public void updateAgeById(Integer id, Integer age){        this.employeeRepository.updateAgeById(id,age);    };    @Transactional    public void save(List&lt;Employee&gt; employees){        this.employeeCrudRepository.save(employees);    }}</code></pre></li><li><p>ç¼–å†™EmployeeServiceå•å…ƒæµ‹è¯•ç±»</p><pre><code class="java">package com.myimooc.springdata.jpa.service;import com.myimooc.springdata.jpa.config.SpringConfig;import com.myimooc.springdata.jpa.repository.EmployeeRepository;import org.junit.After;import org.junit.Assert;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;import org.springframework.transaction.PlatformTransactionManager;/** * EmployeeServiceå•å…ƒæµ‹è¯•ç±» */public class EmployeeServiceTest {    private ApplicationContext ctx = null;    private EmployeeService employeeService = null;    @Before    public void init(){        ctx = new AnnotationConfigApplicationContext(SpringConfig.class);        employeeService = ctx.getBean(EmployeeService.class);    }    @After    public void destroy(){        ctx = null;    }    @Test    public void transactionManagerTest(){        PlatformTransactionManager transactionManager = (PlatformTransactionManager)ctx.getBean(PlatformTransactionManager.class);        Assert.assertNotNull(transactionManager);    }    // æ›´æ–°æ“ä½œ    @Test    public void updateAgeByIdTest(){        employeeService.updateAgeById(1,55);    }}</code></pre></li></ol><p>äº‹åŠ¡åœ¨Spring dataä¸­çš„ä½¿ç”¨ï¼š</p><blockquote><ol><li>äº‹åŠ¡ä¸€èˆ¬æ˜¯åœ¨Serviceå±‚</li><li>@Queryã€@Modifyingã€@Transactionçš„ç»¼åˆä½¿ç”¨</li></ol></blockquote><h2 id="ç¬¬5ç« -Spring-Data-JPAé«˜çº§"><a href="#ç¬¬5ç« -Spring-Data-JPAé«˜çº§" class="headerlink" title="ç¬¬5ç«  Spring Data JPAé«˜çº§"></a>ç¬¬5ç«  Spring Data JPAé«˜çº§</h2><blockquote><p>è¯¦è§£Spring Data JPAçš„Repositoryæ ¸å¿ƒæ¥å£çš„å„ç§å­ç±»çš„ä½¿ç”¨</p></blockquote><h3 id="5-1-CrudRepositoryæ¥å£ä½¿ç”¨è¯¦è§£"><a href="#5-1-CrudRepositoryæ¥å£ä½¿ç”¨è¯¦è§£" class="headerlink" title="5-1 CrudRepositoryæ¥å£ä½¿ç”¨è¯¦è§£"></a>5-1 CrudRepositoryæ¥å£ä½¿ç”¨è¯¦è§£</h3><p>CrudRepositoryæ¥å£ä½¿ç”¨è¯¦è§£</p><blockquote><p>save(entity)ï¼šä¿å­˜ä¸€ä¸ªå®ä½“<br>save(entities)ï¼šä¿å­˜å¤šä¸ªå®ä½“<br>findOne(id)ï¼šæ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡<br>exists(id)ï¼šæ ¹æ®IDåˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨<br>findAll()ï¼šæ‰¾åˆ°æ‰€æœ‰å®ä½“å¯¹è±¡<br>delete(id)ï¼šæ ¹æ®IDåˆ é™¤å®ä½“å¯¹è±¡<br>delete(entity)ï¼šæ ¹æ®å®ä½“å¯¹è±¡åˆ é™¤å®ä½“å¯¹è±¡<br>delete(entities)ï¼šåˆ é™¤å¤šä¸ªå®ä½“å¯¹è±¡<br>deleteAll()ï¼šåˆ é™¤æ‰€æœ‰å®ä½“å¯¹è±¡</p></blockquote><ol><li><p>ç¼–å†™EmployeeCrudRepositoryæ¥å£</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.domain.Employee;import org.springframework.data.repository.CrudRepository;/** * ä½¿ç”¨ CrudRepository æ¥å£ */public interface EmployeeCrudRepository extends CrudRepository&lt;Employee,Integer&gt;{}</code></pre></li><li><p>ç¼–å†™EmployeeCrudRepositoryTestå•å…ƒæµ‹è¯•ç±»</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.config.SpringConfig;import com.myimooc.springdata.jpa.domain.Employee;import org.junit.After;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;import java.util.ArrayList;import java.util.List;/** * EmployeeRepositoryå•å…ƒæµ‹è¯•ç±» */public class EmployeeCrudRepositoryTest {    private ApplicationContext ctx = null;    private EmployeeService employeeService = null;    @Before    public void init(){        ctx = new AnnotationConfigApplicationContext(SpringConfig.class);        employeeCrudRepository = ctx.getBean(EmployeeService.class);    }    @After    public void destroy(){        ctx = null;    }    @Test    public void saveTest(){        List&lt;Employee&gt; employees = new ArrayList&lt;Employee&gt;();        Employee employee = null;        for(int i=0;i&lt;100;i++){            employee = new Employee();            employee.setName(&quot;test&quot;+i);            employee.setAge(100 - i);            employees.add(employee);        }        employeeService.save(employees);    }}</code></pre></li></ol><h3 id="5-2-PagingAndSortingRespsitoryæ¥å£ä½¿ç”¨è¯¦è§£-14-48"><a href="#5-2-PagingAndSortingRespsitoryæ¥å£ä½¿ç”¨è¯¦è§£-14-48" class="headerlink" title="5-2 PagingAndSortingRespsitoryæ¥å£ä½¿ç”¨è¯¦è§£ (14:48)"></a>5-2 PagingAndSortingRespsitoryæ¥å£ä½¿ç”¨è¯¦è§£ (14:48)</h3><p>PagingAndSortingRespositoryæ¥å£ä½¿ç”¨è¯¦è§£</p><blockquote><ul><li>è¯¥æ¥å£åŒ…å«åˆ†é¡µå’Œæ’åºçš„åŠŸèƒ½</li><li>å¸¦æ’åºçš„æŸ¥è¯¢ï¼šfindAll(Sort sort)</li><li>å¸¦æ’åºçš„åˆ†é¡µæŸ¥è¯¢ï¼šfindAll(Pageable pageable)</li></ul></blockquote><ol><li><p>ç¼–å†™EmployeePagingAndSortingRepositoryæ¥å£</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.domain.Employee;import org.springframework.data.repository.PagingAndSortingRepository;/** * ä½¿ç”¨ PagingAndSortingRepository å®ç°åˆ†é¡µå’Œæ’åºåŠŸèƒ½ */public interface EmployeePagingAndSortingRepository extends PagingAndSortingRepository&lt;Employee,Integer&gt; {}</code></pre></li><li><p>ç¼–å†™EmployeePagingAndSortingRepositoryTestå•å…ƒæµ‹è¯•ç±»</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.config.SpringConfig;import com.myimooc.springdata.jpa.domain.Employee;import com.myimooc.springdata.jpa.repository.EmployeePagingAndSortingRepository;import com.myimooc.springdata.jpa.service.EmployeeService;import org.junit.After;import org.junit.Assert;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.data.domain.Page;import org.springframework.data.domain.PageRequest;import org.springframework.data.domain.Pageable;import org.springframework.data.domain.Sort;import org.springframework.data.repository.PagingAndSortingRepository;import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;import java.util.ArrayList;import java.util.List;/** * PagingAndSortingRepository å•å…ƒæµ‹è¯•ç±» */public class EmployeePagingAndSortingRepositoryTest {    private ApplicationContext ctx = null;    private EmployeePagingAndSortingRepository employeePagingAndSortingRepository = null;    @Before    public void init(){        ctx = new AnnotationConfigApplicationContext(SpringConfig.class);        employeePagingAndSortingRepository = ctx.getBean(EmployeePagingAndSortingRepository.class);    }    @After    public void destroy(){        ctx = null;    }    /**     * åˆ†é¡µåŠŸèƒ½æµ‹è¯•     */    @Test    public void pageTest(){        // page: indexæ˜¯ä»0å¼€å§‹çš„ï¼Œä¸æ˜¯ä»1å¼€å§‹çš„        Pageable pageable = new PageRequest(0,9);// page,size        Page&lt;Employee&gt; employeePage = employeePagingAndSortingRepository.findAll(pageable);        System.out.println(&quot;æŸ¥è¯¢çš„æ€»é¡µæ•°ï¼š&quot;+employeePage.getTotalPages());        System.out.println(&quot;æŸ¥è¯¢çš„æ€»è®°å½•æ•°ï¼š&quot;+employeePage.getTotalElements());        System.out.println(&quot;æŸ¥è¯¢çš„å½“å‰ç¬¬å‡ é¡µï¼š&quot;+(employeePage.getNumber() + 1));        System.out.println(&quot;æŸ¥è¯¢çš„å½“å‰é¡µé¢çš„é›†åˆï¼š&quot;+employeePage.getContent());        System.out.println(&quot;æŸ¥è¯¢çš„å½“å‰é¡µé¢çš„è®°å½•æ•°ï¼š&quot;+employeePage.getNumberOfElements());    }    /**     * åˆ†é¡µå’Œæ’åºåŠŸèƒ½æµ‹è¯•     */    @Test    public void pageAndSort(){        Sort.Order order = new Sort.Order(Sort.Direction.DESC,&quot;id&quot;);// å‡/é™åº,è§„åˆ™å­—æ®µ        Sort sort = new Sort(order);        // page: indexæ˜¯ä»0å¼€å§‹çš„ï¼Œä¸æ˜¯ä»1å¼€å§‹çš„        Pageable pageable = new PageRequest(0,5,sort);// å…ˆæ’åºï¼Œå†åˆ†é¡µ        Page&lt;Employee&gt; employeePage = employeePagingAndSortingRepository.findAll(pageable);        System.out.println(&quot;æŸ¥è¯¢çš„æ€»é¡µæ•°ï¼š&quot;+employeePage.getTotalPages());        System.out.println(&quot;æŸ¥è¯¢çš„æ€»è®°å½•æ•°ï¼š&quot;+employeePage.getTotalElements());        System.out.println(&quot;æŸ¥è¯¢çš„å½“å‰ç¬¬å‡ é¡µï¼š&quot;+(employeePage.getNumber() + 1));        System.out.println(&quot;æŸ¥è¯¢çš„å½“å‰é¡µé¢çš„é›†åˆï¼š&quot;+employeePage.getContent());        System.out.println(&quot;æŸ¥è¯¢çš„å½“å‰é¡µé¢çš„è®°å½•æ•°ï¼š&quot;+employeePage.getNumberOfElements());    }}</code></pre></li></ol><h3 id="5-3-JpaRepositoryæ¥å£ä½¿ç”¨è¯¦è§£"><a href="#5-3-JpaRepositoryæ¥å£ä½¿ç”¨è¯¦è§£" class="headerlink" title="5-3 JpaRepositoryæ¥å£ä½¿ç”¨è¯¦è§£"></a>5-3 JpaRepositoryæ¥å£ä½¿ç”¨è¯¦è§£</h3><p>JpaRepositoryæ¥å£ä½¿ç”¨è¯¦è§£</p><blockquote><p>finaAllï¼šæŸ¥è¯¢æ‰€æœ‰è®°å½•<br>findAll(Sort sort)ï¼šæŸ¥è¯¢æ‰€æœ‰è®°å½•å¹¶æ’åº<br>save(entities)ï¼šä¿å­˜å¤šä¸ªå®ä½“å¯¹è±¡<br>fiushï¼š<br>deleteInBatch(entities)ï¼šä¸€ä¸ªæ‰¹æ¬¡é‡Œé¢åˆ é™¤é‚£äº›å®ä½“</p></blockquote><ol><li><p>ç¼–å†™EmployeeJpaRepositoryæ¥å£</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.domain.Employee;import org.springframework.data.jpa.repository.JpaRepository;import org.springframework.data.repository.PagingAndSortingRepository;/** * ä½¿ç”¨ JpaRepository æ¥å£ */public interface EmployeeJpaRepository extends JpaRepository&lt;Employee,Integer&gt; {}</code></pre></li><li><p>ç¼–å†™EmployeeJpaRepositoryTestå•å…ƒæµ‹è¯•ç±»</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.config.SpringConfig;import com.myimooc.springdata.jpa.domain.Employee;import com.myimooc.springdata.jpa.repository.EmployeeJpaRepository;import org.junit.After;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.data.domain.Page;import org.springframework.data.domain.PageRequest;import org.springframework.data.domain.Pageable;import org.springframework.data.domain.Sort;import org.springframework.data.jpa.repository.JpaRepository;import org.springframework.data.repository.PagingAndSortingRepository;/** * EmployeeJpaRepository å•å…ƒæµ‹è¯•ç±» */public class EmployeeJpaRepositoryTest {    private ApplicationContext ctx = null;    private EmployeeJpaRepository employeeJpaRepository = null;    @Before    public void init(){        ctx = new AnnotationConfigApplicationContext(SpringConfig.class);        employeeJpaRepository = ctx.getBean(EmployeeJpaRepository.class);    }    @After    public void destroy(){        ctx = null;    }    @Test    public void findTest(){        Employee employee = employeeJpaRepository.findOne(99);        System.out.println(&quot;employee&quot; + employee);        System.out.println(&quot;employee(10)&quot; + employeeJpaRepository.exists(10));// true        System.out.println(&quot;employee(102)&quot; + employeeJpaRepository.exists(102));// false    }}</code></pre></li></ol><h3 id="5-4-JpaSpecificationExecutoræ¥å£ä½¿ç”¨è¯¦è§£"><a href="#5-4-JpaSpecificationExecutoræ¥å£ä½¿ç”¨è¯¦è§£" class="headerlink" title="5-4 JpaSpecificationExecutoræ¥å£ä½¿ç”¨è¯¦è§£"></a>5-4 JpaSpecificationExecutoræ¥å£ä½¿ç”¨è¯¦è§£</h3><p>JpaSpecificationExecutoræ¥å£ä½¿ç”¨è¯¦è§£ï¼ˆJPAè§„èŒƒæ‰§è¡Œè€…ï¼‰</p><blockquote><p>Specificationå°è£…äº†JPA Criteria(JAPæ ‡å‡†)æŸ¥è¯¢æ¡ä»¶</p><p>Repositoryæ¥å£ä½“ç³»æ— æ³•æºå¸¦ä¸€äº›æŸ¥è¯¢æ¡ä»¶</p></blockquote><p>ä»£ç æ¼”ç¤ºï¼š</p><ol><li><p>ç¼–å†™EmployeeJpaSpecificationExecutoræ¥å£</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.domain.Employee;import org.springframework.data.jpa.repository.JpaRepository;import org.springframework.data.jpa.repository.JpaSpecificationExecutor;/** * ä½¿ç”¨ JpaSpecificationExecutor æ¥å£ */public interface EmployeeJpaSpecificationExecutor extends JpaRepository&lt;Employee,Integer&gt; , JpaSpecificationExecutor&lt;Employee&gt;{}</code></pre></li><li><p>ç¼–å†™EmployeeJpaSpecificationExecutorTestå•å…ƒæµ‹è¯•ç±»</p><pre><code class="java">package com.myimooc.springdata.jpa.repository;import com.myimooc.springdata.jpa.config.SpringConfig;import com.myimooc.springdata.jpa.domain.Employee;import org.junit.After;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.data.domain.Page;import org.springframework.data.domain.PageRequest;import org.springframework.data.domain.Pageable;import org.springframework.data.domain.Sort;import org.springframework.data.jpa.domain.Specification;import javax.persistence.criteria.*;/** * EmployeeJpaSpecificationExecutor å•å…ƒæµ‹è¯•ç±» */public class EmployeeJpaSpecificationExecutorTest {    private ApplicationContext ctx = null;    private EmployeeJpaSpecificationExecutor employeeJpaSpecificationExecutor = null;    @Before    public void init(){        ctx = new AnnotationConfigApplicationContext(SpringConfig.class);        employeeJpaSpecificationExecutor = ctx.getBean(EmployeeJpaSpecificationExecutor.class);    }    @After    public void destroy(){        ctx = null;    }    /**     * 1ã€åˆ†é¡µ     * 2ã€æ’åº     * 3ã€æŸ¥è¯¢æ¡ä»¶:age &gt; 50     */    @Test    public void queryTest(){        Sort.Order order = new Sort.Order(Sort.Direction.DESC,&quot;id&quot;);        Sort sort = new Sort(order);        // page: indexæ˜¯ä»0å¼€å§‹çš„ï¼Œä¸æ˜¯ä»1å¼€å§‹çš„        Pageable pageable = new PageRequest(0,5,sort);        /**         * root : å°±æ˜¯æˆ‘ä»¬è¦æŸ¥è¯¢çš„ç±»å‹ (Employee)         * query : æ·»åŠ æŸ¥è¯¢æ¡ä»¶         * cb : æ„å»º Predicate         */        Specification&lt;Employee&gt; specification = new Specification&lt;Employee&gt;() {            // æŸ¥è¯¢æ¡ä»¶            public Predicate toPredicate(Root&lt;Employee&gt; root,                                         CriteriaQuery&lt;?&gt; query,                                         CriteriaBuilder cb)             {                // root (employee (age))                Path path = root.get(&quot;age&quot;);                return cb.gt(path,50);            }        };        Page&lt;Employee&gt; employeePage = employeeJpaSpecificationExecutor.findAll(specification,pageable);        System.out.println(&quot;æŸ¥è¯¢çš„æ€»é¡µæ•°ï¼š&quot; + employeePage.getTotalPages());        System.out.println(&quot;æŸ¥è¯¢çš„æ€»è®°å½•æ•°ï¼š&quot; + employeePage.getTotalElements());        System.out.println(&quot;æŸ¥è¯¢çš„å½“å‰ç¬¬å‡ é¡µï¼š&quot; + (employeePage.getNumber() + 1));        System.out.println(&quot;æŸ¥è¯¢çš„å½“å‰é¡µé¢çš„é›†åˆï¼š&quot; + employeePage.getContent());        System.out.println(&quot;æŸ¥è¯¢çš„å½“å‰é¡µé¢çš„è®°å½•æ•°ï¼š&quot; + employeePage.getNumberOfElements());    }}</code></pre></li></ol><h2 id="ç¬¬6ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬6ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬6ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬6ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>è¯¾ç¨‹æ€»ç»“</p></blockquote><h3 id="6-1-è¯¾ç¨‹æ€»ç»“"><a href="#6-1-è¯¾ç¨‹æ€»ç»“" class="headerlink" title="6-1 è¯¾ç¨‹æ€»ç»“"></a>6-1 è¯¾ç¨‹æ€»ç»“</h3><blockquote><p>Spring Dataæ¦‚è§ˆ<br>ä¼ ç»Ÿæ–¹å¼è®¿é—®æ•°æ®åº“<br>Spring Dataå¿«é€Ÿèµ·æ­¥<br>Spring Data JPAè¿›é˜¶<br>Spring Data JAPé«˜çº§</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springdata </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>810-Spring Bootè¿›é˜¶ä¹‹Webè¿›é˜¶</title>
      <link href="/imooc/810-SpringBoot-Web/"/>
      <url>/imooc/810-SpringBoot-Web/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/810" target="_blank" rel="noopener">https://www.imooc.com/learn/810</a></p><p>ç®€ä»‹ï¼šã€Š2å°æ—¶å­¦ä¹ Spring Bootã€‹åç»­è¿›é˜¶è¯¾ç¨‹ï¼Œä¸»è¦è®²è¿°äº†Spring Booté’ˆå¯¹Webæ–¹é¢çš„ç›¸å…³æŠ€å·§ è®²å¸ˆå®æˆ˜è¯¾ç¨‹ã€ŠSpring Bootå¾®ä¿¡ç‚¹é¤ç³»ç»Ÿã€‹ <a href="http://coding.imooc.com/class/117.html" target="_blank" rel="noopener">http://coding.imooc.com/class/117.html</a> ã€ŠSpring Cloudå¾®æœåŠ¡å®æˆ˜ã€‹ <a href="http://coding.imooc.com/class/187.html" target="_blank" rel="noopener">http://coding.imooc.com/class/187.html</a> å‡å·²ä¸Šçº¿</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>è¯¾ç¨‹ä»‹ç»</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»"><a href="#1-1-è¯¾ç¨‹ä»‹ç»" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç»"></a>1-1 è¯¾ç¨‹ä»‹ç»</h3><blockquote><p>æœ¬è¯¾ç¨‹ç´§æ¥ç€ã€Š<a href="https://www.imooc.com/learn/767" target="_blank" rel="noopener">2å°æ—¶å­¦ä¼šSpringBoot</a>ã€‹è¯¾ç¨‹ï¼Œè¯·å…ˆçœ‹å…¥é—¨è¯¾ã€‚</p></blockquote><ol><li>ä½¿ç”¨@Validè¡¨å•éªŒè¯</li><li>ä½¿ç”¨AOPå¤„ç†è¯·æ±‚</li><li>ç»Ÿä¸€å¼‚å¸¸å¤„ç†</li><li>å•å…ƒæµ‹è¯•</li></ol><h2 id="ç¬¬2ç« -Webè¿›é˜¶"><a href="#ç¬¬2ç« -Webè¿›é˜¶" class="headerlink" title="ç¬¬2ç«  Webè¿›é˜¶"></a>ç¬¬2ç«  Webè¿›é˜¶</h2><blockquote><p>SpringBootè¿›é˜¶ä¸­webæ–¹é¢çš„å†…å®¹</p></blockquote><h3 id="2-0-è¡¨å•éªŒè¯"><a href="#2-0-è¡¨å•éªŒè¯" class="headerlink" title="2-0 è¡¨å•éªŒè¯"></a>2-0 è¡¨å•éªŒè¯</h3><blockquote><p>é¡¹ç›®æºç ï¼š<a href="https://gitee.com/liaoshixiong/girl" target="_blank" rel="noopener">https://gitee.com/liaoshixiong/girl</a></p></blockquote><pre><code class="shell"># å…‹éš†é¡¹ç›®ä»£ç git clone git@gitee.com:liaoshixiong/girl.git# åˆ‡æ¢åˆ†æ”¯git checkout -b web-2 web-2</code></pre><p>å½“Girlçš„å‚æ•°ç‰¹åˆ«å¤šçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨Javaå®ä½“ç±»æ¥æ”¶å‚æ•°ã€‚</p><pre><code class="java">/** * æ·»åŠ ä¸€ä¸ªå¥³ç”Ÿ */@PostMapping(value = &quot;/girls&quot;)public Girl girlAdd(Girl girl) {    return girlRepository.save(girl);}</code></pre><p>è¡¨å•éªŒè¯ï¼š</p><ol><li><p>åœ¨å®ä½“Beané‡Œéœ€è¦æ ¡éªŒçš„å­—æ®µä¸Šé¢æ·»åŠ æ³¨è§£</p><pre><code class="java">@Min(value = 18, message = &quot;æœªæˆå¹´å°‘å¥³ç¦æ­¢å…¥å†…&quot;)private Integer age;@NotNull(message = &quot;é‡‘é¢å¿…ä¼ &quot;)private Integer money;</code></pre></li><li><p>åœ¨æ¥æ”¶å‚æ•°æ—¶ï¼Œä½¿ç”¨@Validæ³¨è§£è¿›è¡Œæ ¡éªŒ</p><pre><code class="java">@PostMapping(value = &quot;/girls&quot;)public Result&lt;Girl&gt; girlAdd(@Valid Girl girl, BindingResult bindingResult){    if(bindingResult.hasErrors()){        return ResultUtil.error(ResultUtil.RESPCODE_ERROR_PARAM,bindingResult.getFieldError().getDefaultMessage());    }    // ...}</code></pre></li></ol><h3 id="2-1-ä½¿ç”¨AOPå¤„ç†è¯·æ±‚-ä¸Šï¼‰"><a href="#2-1-ä½¿ç”¨AOPå¤„ç†è¯·æ±‚-ä¸Šï¼‰" class="headerlink" title="2-1 ä½¿ç”¨AOPå¤„ç†è¯·æ±‚(ä¸Šï¼‰"></a>2-1 ä½¿ç”¨AOPå¤„ç†è¯·æ±‚(ä¸Šï¼‰</h3><p>AOPç»Ÿä¸€å¤„ç†è¯·æ±‚æ—¥å¿—</p><ol><li><p>AOPæ˜¯ä¸€ç§ç¼–ç¨‹æ–¹å¼</p><ul><li>ä¸è¯­è¨€æ— å…³ï¼Œæ˜¯ä¸€ç§ç¨‹åºè®¾è®¡æ€æƒ³</li><li>é¢å‘åˆ‡é¢ï¼ˆAOPï¼‰Aspect Oriented Programming</li><li>é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰Object Oriented Programming</li><li>é¢å‘è¿‡ç¨‹ï¼ˆPOPï¼‰Procedure Oriented Programming</li></ul></li><li><p>é¢å‘è¿‡ç¨‹åˆ°é¢å‘å¯¹è±¡</p><ul><li>é¢å‘è¿‡ç¨‹ï¼šå‡å¦‚ä¸‹é›¨äº†ï¼Œæˆ‘æ‰“å¼€äº†é›¨ä¼</li><li>é¢å‘å¯¹è±¡ï¼šå¤©æ°”-&gt;ä¸‹é›¨ï¼Œæˆ‘-&gt;æ‰“ä¼</li></ul></li><li><p>æ¢ä¸ªè§’åº¦çœ‹ä¸–ç•Œï¼Œæ¢ä¸ªå§¿åŠ¿å¤„ç†é—®é¢˜</p><ul><li><p>é¢å‘å¯¹è±¡ï¼šå°†éœ€æ±‚åŠŸèƒ½å‚ç›´åˆ’åˆ†ä¸ºä¸åŒçš„å¹¶ä¸”ç›¸å¯¹ç‹¬ç«‹çš„ï¼Œå°è£…ä¸ºè‰¯å¥½çš„ç±»å¹¶ä¸”è®©å…¶æœ‰è‡ªå·±çš„è¡Œä¸º</p></li><li><p>é¢å‘åˆ‡é¢ï¼šåˆ©ç”¨æ¨ªåˆ‡æŠ€æœ¯å°†é¢å‘å¯¹è±¡çš„åºå¤§ä½“ç³»è¿›è¡Œæ°´å¹³åˆ‡å‰²ï¼Œå¹¶ä¸”å°†å½±å“åˆ°å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºè¿›è¡Œå°è£…æˆä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼ˆåˆ‡é¢ï¼‰</p></li></ul></li><li><p>å°†é€šç”¨é€»è¾‘ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥</p></li></ol><p>AOPç¤ºä¾‹ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gigqdsvwj30nc0fwwg3.jpg" width="350" alt="é¢å‘å¯¹è±¡å¤„ç†æµç¨‹"/><p>æå–æ‰§è¡Œç›¸åŒçš„ä»£ç ä¸ºä¸€ä¸ªåˆ‡é¢</p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8gigpelibj30sn0gjjty.jpg" width="350" alt="é¢å‘åˆ‡é¢å¤„ç†æµç¨‹"/><p>ç™»å½•æˆæƒè®¿é—®</p><p>ä½¿ç”¨AOPæµç¨‹ï¼š</p><ol><li><p>æ·»åŠ POMæ–‡ä»¶</p><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre></li><li><p>å»ºç«‹å¤„ç†æ–‡ä»¶</p><pre><code class="java">@Aspect@Componentpublic class HttpAspect {    @Before(&quot;execution(public * com.imooc.controller.GirlController.girlList(...))&quot;)    public void log() {        System.out.println(11111);    }}</code></pre></li></ol><h3 id="2-2-ä½¿ç”¨AOPå¤„ç†è¯·æ±‚-ä¸­ï¼‰"><a href="#2-2-ä½¿ç”¨AOPå¤„ç†è¯·æ±‚-ä¸­ï¼‰" class="headerlink" title="2-2 ä½¿ç”¨AOPå¤„ç†è¯·æ±‚(ä¸­ï¼‰"></a>2-2 ä½¿ç”¨AOPå¤„ç†è¯·æ±‚(ä¸­ï¼‰</h3><p>ç¼–å†™åˆ‡é¢é€šçŸ¥æ‰§è¡Œæ–¹æ³•</p><pre><code class="java">@Aspect@Componentpublic class HttpAspect {    /** æ—¥å¿— */    private final static Logger LOGGER = LoggerFactory.getLogger(HttpAspect.class);    /** å®šä¹‰åˆ‡ç‚¹ */    @Pointcut(&quot;execution(public * com.myimooc.boot.web.controller.GirlController.*(..))&quot;)    public void log(){}    /** å‰ç½®é€šçŸ¥ */    @Before(&quot;log()&quot;)    public void doBefore(JoinPoint joinPoint){        ServletRequestAttributes attributes =  (ServletRequestAttributes)RequestContextHolder.getRequestAttributes();        HttpServletRequest request = attributes.getRequest();        // url        LOGGER.info(&quot;url={}&quot;, request.getRequestURI());        // method        LOGGER.info(&quot;method={}&quot;, request.getMethod());        // ip        LOGGER.info(&quot;ip={}&quot;, request.getRemoteAddr());        // ç±»æ–¹æ³•        LOGGER.info(&quot;class_method={}&quot;, joinPoint.getSignature().getDeclaringTypeName() + &quot;.&quot; + joinPoint.getSignature().getName());        // å‚æ•°        LOGGER.info(&quot;args={}&quot;, joinPoint.getArgs());    }}</code></pre><blockquote><p>@Aspectï¼šå£°æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªåˆ‡é¢å¤„ç†ç±»<br>@Componentï¼šå£°æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªBeanï¼Œç”±Springçš„IOCå®¹å™¨è¿›è¡Œç®¡ç†<br>@Pointcutï¼šå£°æ˜éœ€è¦å¤„ç†çš„åˆ‡ç‚¹</p></blockquote><p>Spring AOPé€šçŸ¥(advice)åˆ†æˆäº”ç±»ï¼š</p><blockquote><ul><li>@Beforeï¼šå‰ç½®é€šçŸ¥[Before advice]ï¼šåœ¨è¿æ¥ç‚¹å‰é¢æ‰§è¡Œï¼Œå‰ç½®é€šçŸ¥ä¸ä¼šå½±å“è¿æ¥ç‚¹çš„æ‰§è¡Œï¼Œé™¤éæ­¤å¤„æŠ›å‡ºå¼‚å¸¸ã€‚ </li><li>@AfterReturningï¼šæ­£å¸¸è¿”å›é€šçŸ¥[After returning advice]ï¼šåœ¨è¿æ¥ç‚¹æ­£å¸¸æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼Œå¦‚æœè¿æ¥ç‚¹æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œã€‚ </li><li>@AfterThrowingï¼šå¼‚å¸¸è¿”å›é€šçŸ¥[After throwing advice]ï¼šåœ¨è¿æ¥ç‚¹æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œã€‚ </li><li>@Afterï¼šè¿”å›é€šçŸ¥[After (finally) advice]ï¼šåœ¨è¿æ¥ç‚¹æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼Œä¸ç®¡æ˜¯æ­£å¸¸æ‰§è¡Œå®Œæˆï¼Œè¿˜æ˜¯æŠ›å‡ºå¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œè¿”å›é€šçŸ¥ä¸­çš„å†…å®¹ã€‚ </li><li>@Aroundï¼šç¯ç»•é€šçŸ¥[Around advice]ï¼šç¯ç»•é€šçŸ¥å›´ç»•åœ¨è¿æ¥ç‚¹å‰åï¼Œæ¯”å¦‚ä¸€ä¸ªæ–¹æ³•è°ƒç”¨çš„å‰åã€‚è¿™æ˜¯æœ€å¼ºå¤§çš„é€šçŸ¥ç±»å‹ï¼Œèƒ½åœ¨æ–¹æ³•è°ƒç”¨å‰åè‡ªå®šä¹‰ä¸€äº›æ“ä½œã€‚ç¯ç»•é€šçŸ¥è¿˜éœ€è¦è´Ÿè´£å†³å®šæ˜¯ç»§ç»­å¤„ç†join point(è°ƒç”¨ProceedingJoinPointçš„proceedæ–¹æ³•)è¿˜æ˜¯ä¸­æ–­æ‰§è¡Œã€‚</li></ul></blockquote><h3 id="2-3-ä½¿ç”¨AOPå¤„ç†è¯·æ±‚-ä¸‹ï¼‰"><a href="#2-3-ä½¿ç”¨AOPå¤„ç†è¯·æ±‚-ä¸‹ï¼‰" class="headerlink" title="2-3 ä½¿ç”¨AOPå¤„ç†è¯·æ±‚(ä¸‹ï¼‰"></a>2-3 ä½¿ç”¨AOPå¤„ç†è¯·æ±‚(ä¸‹ï¼‰</h3><pre><code class="java">/** åç½®é€šçŸ¥ */@After(&quot;log()&quot;)public void doAfter(){    LOGGER.info(&quot;æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ&quot;);}/** æ­£å¸¸è¿”å›é€šçŸ¥ */@AfterReturning(returning = &quot;object&quot;, pointcut = &quot;log()&quot;)public void doAfterReturning(Object object){    // LOGGER.info(&quot;response={}&quot;, object.toString());}</code></pre><h3 id="2-4-ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸Šï¼‰"><a href="#2-4-ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸Šï¼‰" class="headerlink" title="2-4 ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸Šï¼‰"></a>2-4 ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸Šï¼‰</h3><p>ä»€ä¹ˆæ˜¯å¼‚å¸¸å¤„ç†ï¼Ÿ</p><blockquote><p>å¦‚æœä¸åŠ å¼‚å¸¸å¤„ç†çš„è¯ï¼Œç¨‹åºå‡ºé”™äº†ï¼Œç”¨æˆ·å¯èƒ½ä¸çŸ¥é“æ˜¯å•¥åŸå› ã€‚<br>åŠ ä¸Šå¤„ç†åï¼Œæ¯”å¦‚åŠ ä¸Šå‹å¥½ä¿¡æ¯ç­‰ç”¨æˆ·èƒ½çŸ¥é“é”™åœ¨å“ªã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆè¦ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼Ÿ</p><blockquote><ol><li>åœ¨æ¡†æ¶å±‚é¢å°è£…checked exceptionï¼Œå°†å…¶è½¬åŒ–ä¸ºunchecked exceptionï¼Œé¿å…å¼€å‘è¿‡ç¨‹ä¸­ç¼–å†™ç¹å†—çš„tryâ€¦catchä»£ç ã€‚ </li><li>ä¸šåŠ¡å±‚é¢çš„å¼€å‘ï¼Œæ ¹æ®ç¨‹åºä»£ç èŒè´£å®šä¹‰ä¸åŒçš„RuntimeException(å®ƒå°±æ˜¯unchecked exceptionï¼Œä¸€èˆ¬å®šä¹‰ä¸ºRuntimeExceptionçš„å­ç±») </li><li>é€šè¿‡å‰ä¸¤ä¸ªè§‚ç‚¹ï¼Œç³»ç»Ÿä¸­è‡ªå®šä¹‰çš„å¼‚å¸¸å°†åªå­˜åœ¨unchecked exceptionï¼Œç³»ç»Ÿåªåœ¨äºå®¢æˆ·ç«¯äº¤æ¢æ•°æ®çš„ä¸Šå±‚ï¼Œè®¾ç½®ç»Ÿä¸€å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œå¹¶å°†ä¸€äº›å¼‚å¸¸è½¬åŒ–ä¸ºç”¨æˆ·æ‰€èƒ½ç†è§£çš„ä¿¡æ¯ä¼ è¾¾ç»™ç”¨æˆ·ã€‚ </li><li>å…¶ä»–å¦‚ä¸šåŠ¡å±‚ï¼Œæ•°æ®æŒä¹…å±‚ï¼Œç­‰åº•å±‚åªè´Ÿè´£å°†å¼‚å¸¸æŠ›å‡ºå³å¯ï¼Œä½†è¦æ³¨æ„ä¸è¦ä¸¢å¤±æ‰å¼‚å¸¸å †æ ˆï¼ˆè¿™ä¸€ç‚¹æ˜¯åˆå­¦è€…å®¹æ˜“çŠ¯çš„ä¸€ä¸ªé”™è¯¯ï¼‰ã€‚ </li></ol></blockquote><p>ç»Ÿä¸€å¼‚å¸¸å¤„ç†è¿”å›æ ¼å¼ï¼š</p><pre><code class="json">{    &quot;code&quot;: 1,    &quot;msg&quot;: &quot;é‡‘é¢å¿…ä¼ &quot;,    &quot;data&quot;: null}{    &quot;code&quot;: 1,    &quot;msg&quot;: &quot;æˆåŠŸ&quot;,    &quot;data&quot;: {        &quot;id&quot;: 20,        &quot;cupSize&quot;: &quot;B&quot;,        &quot;age&quot;: 25,        &quot;money&quot;: 1.2    }}</code></pre><p>:arrow_up_small:</p><pre><code class="java">public class Result&lt;T&gt; {    /** å“åº”ç¼–å· */    private Integer respCode;    /** å“åº”æ¶ˆæ¯ */    private String respMsg;    /** å…·ä½“çš„å†…å®¹ */    private T data;    // ...getter and setter...}</code></pre><pre><code class="java">/** * æ·»åŠ ä¸€ä¸ªå¥³ç”Ÿ * @return */@PostMapping(value=&quot;/girls&quot;)public Result&lt;Girl&gt; girlAdd(@Valid Girl girl, BindingResult bindingResult) {    Result result = new Result();    if(bindingResult.hasErrors()) {        result.setCode(1);        result.setMsg(bindingResult.getFieldError().getDefaultMessage());        return result;    }    girl.setCupSize(girl.getCupSize());    girl.setAge(girl.getAge());    result.setCode(0);    result.setMsg(&quot;æˆåŠŸ&quot;);    result.setData(girlRepository.save(girl));    return result;}</code></pre><p>ä¼˜åŒ–ï¼š</p><pre><code class="java">/** * httpè¯·æ±‚è¿”å›çš„å®ä½“Beanå·¥å…·ç±» */public class ResultUtil {    /** æˆåŠŸ */    public final static Integer RESPCODE_SUCCESS = 200;    /** è¯·æ±‚å‚æ•°é”™è¯¯ */    public final static Integer RESPCODE_ERROR_PARAM = 300;    /** ç³»ç»Ÿå†…éƒ¨ä¸šåŠ¡é”™è¯¯ */    public final static Integer RESPCODE_ERROR_SERVICE = 400;    /** ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸ */    public final static Integer RESPCODE_ERROR_EXECEPTION = 500;    /** æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›å‚æ•° */    public  static Result success(Object object){        Result result = new Result();        result.setRespCode(ResultUtil.RESPCODE_SUCCESS);        result.setRespMsg(&quot;æˆåŠŸ&quot;);        result.setData(object);        return result;    }    /** æ‰§è¡ŒæˆåŠŸï¼Œæ— è¿”å›å‚æ•° */    public static Result success(){        return success(null);    }    /** æ‰§è¡Œé”™è¯¯ */    public static Result error(Integer code,String msg){        Result result = new Result();        result.setRespCode(code);        result.setRespMsg(msg);        return result;    }}</code></pre><pre><code class="java">// æˆåŠŸè¿”å›return ResultUtil.success(girlRepository.save(girl));// å¤±è´¥è¿”å›return ResultUtil.error(bindingResult.getFieldError().getDefaultMessage());</code></pre><p>ä¾‹â… ï¼š</p><blockquote><p>è·å–æŸå¥³ç”Ÿçš„å¹´é¾„å¹¶åˆ¤æ–­</p><p>å°äº10ï¼Œè¿”å›â€œåº”è¯¥åœ¨ä¸Šå°å­¦â€</p><p>å¤§äº10ä¸”å°äº16ï¼Œè¿”å›â€œå¯èƒ½åœ¨ä¸Šåˆä¸­â€</p></blockquote><p>å¯èƒ½æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šé€šè¿‡æ ‡è¯†æ¥ä¼ é€’ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š</p><pre><code class="java">public Integer getAge1(Integer id) {    Girl girl = girlRepository.findOne(id);    Integer age = girl.getAge();    if (age &lt; 10) {        // è¿”å›â€œä½ è¿˜åœ¨ä¸Šå°å­¦å§â€        return 1;    } else if (10 &lt; age &amp;&amp; age &lt; 16) {        // è¿”å›â€œä½ å¯èƒ½åœ¨ä¸Šåˆä¸­â€        return 2;    }    // å¦‚æœ &gt; 16å²ï¼ŒåŠ é’±    // ...    return 0;}</code></pre><h3 id="2-5-ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸­ï¼‰"><a href="#2-5-ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸­ï¼‰" class="headerlink" title="2-5 ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸­ï¼‰"></a>2-5 ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸­ï¼‰</h3><p>ä½¿ç”¨ç»Ÿä¸€å¼‚å¸¸å¤„ç†åï¼Œåˆ™ä¸ºå¦ä¸€ç§è§£å†³æ–¹å¼</p><p>æ­¥éª¤ä¸€ï¼šè‡ªå®šä¹‰å¼‚å¸¸</p><pre><code class="java">public class RespException extends RuntimeException {    /** å“åº”ç¼–å· */    private Integer respCode;    public RespException(Integer respCode, String message) {        super(message);        this.respCode = respCode;    }    // ...getter and setter...}</code></pre><p>æ­¥éª¤äºŒï¼šå…¨å±€å¼‚å¸¸ç»Ÿä¸€å¤„ç†ç±»</p><pre><code class="java">@ControllerAdvicepublic class ExceptionHandle {    private final static Logger LOGGER = LoggerFactory.getLogger(ExceptionHandle.class);    /**     * å…¨å±€å¼‚å¸¸è¿”å›å¤„ç†     * @param e å¼‚å¸¸     * @return å¤„ç†åçš„è¿”å›ç»“æœ     */    @ExceptionHandler(value = Exception.class)    @ResponseBody    public Result handle(Exception e) {        if (e instanceof RespException) {            RespException respException = (RespException) e;            return ResultUtil.error(respException.getRespCode(), respException.getMessage());        }        LOGGER.error(&quot;ã€ç³»ç»Ÿå¼‚å¸¸ã€‘{}&quot;, e);        return ResultUtil.error(ResultUtil.RESPCODE_ERROR_SERVICE, &quot;æœªçŸ¥é”™è¯¯&quot;);    }}</code></pre><p>æ­¥éª¤ä¸‰ï¼šä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸</p><pre><code class="java">public void getAge(Integer id) throws Exception {    Girl girl = girlRepository.findOne(id);    Integer age = girl.getAge();    if (age &lt; 10) {        // è¿”å›â€œä½ è¿˜åœ¨ä¸Šå°å­¦å§â€        throw new RespException(100, &quot;ä½ è¿˜åœ¨ä¸Šå°å­¦å§&quot;);    } else if (age &gt; 10 &amp;&amp; age &lt; 16) {        // è¿”å›â€œä½ å¯èƒ½åœ¨ä¸Šåˆä¸­â€        throw new RespException(101, &quot;ä½ å¯èƒ½åœ¨ä¸Šåˆä¸­&quot;);    }    // å¦‚æœ &gt; 16å²ï¼Œä»·é’±    // ...}</code></pre><h3 id="2-6-ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸‹ï¼‰"><a href="#2-6-ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸‹ï¼‰" class="headerlink" title="2-6 ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸‹ï¼‰"></a>2-6 ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸‹ï¼‰</h3><p>ä½¿ç”¨æšä¸¾è¿›è¡Œä¼˜åŒ–å“åº”ç¼–ç åŠå“åº”æ¶ˆæ¯ï¼Œä¾¿äºç»Ÿä¸€ç»´æŠ¤</p><p>æ­¥éª¤ä¸€ï¼šå®šä¹‰æšä¸¾ç±»</p><pre><code class="java">/** * httpè¯·æ±‚è¿”å›çš„æ¶ˆæ¯å“åº”ç¼–å· */public enum ResultResp {    SUCCESS(0, &quot;æˆåŠŸ&quot;),    UNKONW_ERROR(-1, &quot;æœªçŸ¥é”™è¯¯&quot;),    PARAM_ERROR(1, &quot;å‚æ•°é”™è¯¯&quot;),    PRIMARY_SCHOOL(100, &quot;ä½ å¯èƒ½è¿˜åœ¨ä¸Šå°å­¦&quot;),    MIDDLE_SCHOOL(101, &quot;ä½ å¯èƒ½åœ¨ä¸Šåˆä¸­&quot;);    private Integer respCode;    private String respMsg;    // ...constructor and getter and setter...}</code></pre><p>æ­¥éª¤äºŒï¼šä¼˜åŒ–è‡ªå®šä¹‰å¼‚å¸¸</p><pre><code class="java">public class RespException extends RuntimeException {    /** å“åº”ç¼–å· */    private Integer respCode;    public RespException(ResultResp resultResp) {        super(resultResp.getRespMsg());        this.respCode = resultResp.getRespCode();    }    // ...getter and setter...}</code></pre><p>æ­¥éª¤ä¸‰ï¼šå…¨å±€å¼‚å¸¸ç»Ÿä¸€å¤„ç†ç±»</p><pre><code class="java">@ControllerAdvicepublic class ExceptionHandle {    private final static Logger LOGGER = LoggerFactory.getLogger(ExceptionHandle.class);    /**     * å…¨å±€å¼‚å¸¸è¿”å›å¤„ç†     * @param e å¼‚å¸¸     * @return å¤„ç†åçš„è¿”å›ç»“æœ     */    @ExceptionHandler(value = Exception.class)    @ResponseBody    public Result handle(Exception e) {        if (e instanceof RespException) {            RespException respException = (RespException) e;            return ResultUtil.error(respException.getRespCode(), respException.getMessage());        }        LOGGER.error(&quot;ã€ç³»ç»Ÿå¼‚å¸¸ã€‘{}&quot;, e);        return ResultUtil.error(ResultUtil.RESPCODE_ERROR_SERVICE, &quot;æœªçŸ¥é”™è¯¯&quot;);    }}</code></pre><p>æ­¥éª¤å››ï¼šä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸</p><pre><code class="java">public void getAge(Integer id) throws Exception {    Girl girl = girlRepository.findOne(id);    Integer age = girl.getAge();    int primarySchool = 10;    int middleSchool = 16;    if (age &lt; primarySchool) {        // è¿”å›â€œä½ è¿˜åœ¨ä¸Šå°å­¦å§â€        throw new RespException(ResultResp.PRIMARY_SCHOOL);    } else if (age &gt; primarySchool &amp;&amp; age &lt; middleSchool) {        // è¿”å›â€œä½ å¯èƒ½åœ¨ä¸Šåˆä¸­â€        throw new RespException(ResultResp.MIDDLE_SCHOOL);    }    // å¦‚æœ &gt; 16å²ï¼Œä»·é’±    // ...}</code></pre><h3 id="2-7-å•å…ƒæµ‹è¯•"><a href="#2-7-å•å…ƒæµ‹è¯•" class="headerlink" title="2-7 å•å…ƒæµ‹è¯•"></a>2-7 å•å…ƒæµ‹è¯•</h3><blockquote><p>æµ‹è¯•Service<br>æµ‹è¯•API</p></blockquote><p>æµ‹è¯•Service</p><pre><code class="java">@RunWith(SpringRunner.class)@SpringBootTestpublic class GirlServiceImplTest {    @Autowired    private GirlService girlService;    @Test    public void findOne() throws Exception {        Girl girl = girlService.findOne(7);        Assert.assertEquals(new Integer(22), girl.getAge());    }}</code></pre><p>æµ‹è¯•Controller</p><pre><code class="java">@RunWith(SpringRunner.class)@SpringBootTest@AutoConfigureMockMvcpublic class GirlControllerTest {    @Autowired    private MockMvc mockMvc;    @Test    public void listGirl() throws Exception {        mockMvc.perform(MockMvcRequestBuilders.get(&quot;/girls&quot;))                .andExpect(MockMvcResultMatchers.status().isOk());    }}</code></pre><pre><code class="shell"># é¡¹ç›®æ‰“åŒ…æ—¶è‡ªåŠ¨è¿›è¡Œå•å…ƒæµ‹è¯•mvn clean package# é¡¹ç›®æ‰“åŒ…æ—¶è·³è¿‡å•å…ƒæµ‹è¯•mvn clean package -Dmaven.test.skip=true</code></pre><h2 id="ç¬¬3ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬3ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬3ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬3ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>è¯¾ç¨‹æ€»ç»“</p></blockquote><h3 id="3-1-è¯¾ç¨‹æ€»ç»“"><a href="#3-1-è¯¾ç¨‹æ€»ç»“" class="headerlink" title="3-1 è¯¾ç¨‹æ€»ç»“"></a>3-1 è¯¾ç¨‹æ€»ç»“</h3><ol><li>ä½¿ç”¨@Validè¡¨å•éªŒè¯</li><li>ä½¿ç”¨AOPå¤„ç†è¯·æ±‚</li><li>ç»Ÿä¸€å¼‚å¸¸å¤„ç†</li><li>å•å…ƒæµ‹è¯•</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>767-2å°æ—¶å­¦ä¼šSpring Boot</title>
      <link href="/imooc/767-2Hours-SringBoot/"/>
      <url>/imooc/767-2Hours-SringBoot/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="http://www.imooc.com/learn/767" target="_blank" rel="noopener">http://www.imooc.com/learn/767</a></p><p>ç®€ä»‹ï¼šSpring Bootæ˜¯ç”¨æ¥ç®€åŒ–Springåº”ç”¨åˆå§‹æ­å»ºä»¥åŠå¼€å‘è¿‡ç¨‹çš„å…¨æ–°æ¡†æ¶ï¼Œè¢«è®¤ä¸ºæ˜¯Spring MVCçš„â€œæ¥ç­äººâ€ï¼Œå’Œå¾®æœåŠ¡ç´§å¯†è”ç³»åœ¨ä¸€èµ·ã€‚é€šè¿‡æœ¬é—¨è¯¾ç¨‹çš„å­¦ä¹ ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•ä½¿ç”¨Spring Bootå¿«é€Ÿæ„å»ºåº”ç”¨ç¨‹åºï¼Œåˆæ­¥é¢†ç•¥Spring Bootçš„é­…åŠ›ï¼å…¶åç»­è¯¾ç¨‹ã€ŠSpring Bootè¿›é˜¶ä¹‹Webè¿›é˜¶ã€‹.æ­¤è¯¾ä¸“ä¸ºITå±Œä¸ç”·ç¨‹åºå‘˜æ‰“é€ ï¼Œå¥³ç”Ÿè¯·æ…å…¥ï¼ è®²å¸ˆå®æˆ˜è¯¾ç¨‹ã€ŠSpring Bootå¾®ä¿¡ç‚¹é¤ç³»ç»Ÿã€‹ <a href="http://coding.imooc.com/class/117.html" target="_blank" rel="noopener">http://coding.imooc.com/class/117.html</a> ã€ŠSpring Cloudå¾®æœåŠ¡å®æˆ˜ã€‹ <a href="http://coding.imooc.com/class/187.html" target="_blank" rel="noopener">http://coding.imooc.com/class/187.html</a> å‡å·²ä¸Šçº¿</p></blockquote><blockquote><p>é¡¹ç›®æºç ï¼š<a href="https://gitee.com/liaoshixiong/girl" target="_blank" rel="noopener">https://gitee.com/liaoshixiong/girl</a></p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -SpringBootä»‹ç»"><a href="#ç¬¬1ç« -SpringBootä»‹ç»" class="headerlink" title="ç¬¬1ç«  SpringBootä»‹ç»"></a>ç¬¬1ç«  SpringBootä»‹ç»</h2><blockquote><p>1-1 SpringBootä»‹ç»å’Œè¯¾ç¨‹å®‰æ’</p></blockquote><h3 id="1-1-SpringBootä»‹ç»"><a href="#1-1-SpringBootä»‹ç»" class="headerlink" title="1-1 SpringBootä»‹ç»"></a>1-1 SpringBootä»‹ç»</h3><p>SpringBootä¼˜ç‚¹</p><blockquote><p> ç¼–ç ï¼Œéƒ¨ç½²ï¼Œé…ç½®ï¼Œç›‘æ§å˜å¾—æ›´åŠ ç®€å•</p></blockquote><p>SpringBootå’ŒSpringMVCçš„å…³ç³»</p><blockquote><p>SpringBootæ˜¯SpringMVCçš„å‡çº§ç‰ˆï¼Œä¸¤è€…æ²¡æœ‰å¿…ç„¶çš„è”ç³»</p></blockquote><p>SpringBootçš„ç‰¹ç‚¹</p><pre><code>1. åŒ–ç¹ä¸ºç®€ï¼Œç®€åŒ–é…ç½®2. å¤‡å—å…³æ³¨ï¼Œæ˜¯ä¸‹ä¸€ä»£æ¡†æ¶3. å¾®æœåŠ¡çš„å…¥é—¨çº§å¾®æ¡†æ¶</code></pre><p>å¾®æœåŠ¡</p><blockquote><p>SpringBoot =&gt; SpringCloud =&gt; å¾®æœåŠ¡</p></blockquote><p>è¯¾ç¨‹ç›®å½•</p><pre><code>1. ç¬¬ä¸€ä¸ªSpringBootç¨‹åº2. è‡ªå®šä¹‰å±æ€§é…ç½®3. Controllerçš„ä½¿ç”¨4. spring-data-jpa5. äº‹åŠ¡ç®¡ç†</code></pre><p><a href="http://www.imooc.com/learn/443" target="_blank" rel="noopener">ã€Šé¡¹ç›®ç®¡ç†åˆ©å™¨mavenã€‹</a><br><a href="http://www.imooc.com/learn/196" target="_blank" rel="noopener">ã€ŠSpringå…¥é—¨ç¯‡ã€‹</a></p><p>æ³¨æ„</p><pre><code>1. å…·å¤‡å¿…è¦çš„å‰ç½®çŸ¥è¯†    --åˆ©ç”¨mavenæ„å»ºé¡¹ç›®    --Springæ³¨è§£    --RESTful API2. å¯ä»¥ä¸éœ€è¦å…ˆå»å­¦SpringMVC3. Javaã€Mavenç­‰ç‰ˆæœ¬ä¿æŒä¸€è‡´</code></pre><h2 id="ç¬¬2ç« -ç¬¬ä¸€ä¸ªSpringBootåº”ç”¨"><a href="#ç¬¬2ç« -ç¬¬ä¸€ä¸ªSpringBootåº”ç”¨" class="headerlink" title="ç¬¬2ç«  ç¬¬ä¸€ä¸ªSpringBootåº”ç”¨"></a>ç¬¬2ç«  ç¬¬ä¸€ä¸ªSpringBootåº”ç”¨</h2><blockquote><p>å¿«é€Ÿæ„å»ºç¬¬ä¸€ä¸ªSpringBootåº”ç”¨</p></blockquote><h3 id="2-1-ç¬¬ä¸€ä¸ªSpringBootåº”ç”¨"><a href="#2-1-ç¬¬ä¸€ä¸ªSpringBootåº”ç”¨" class="headerlink" title="2-1 ç¬¬ä¸€ä¸ªSpringBootåº”ç”¨"></a>2-1 ç¬¬ä¸€ä¸ªSpringBootåº”ç”¨</h3><pre><code class="shell"># æŸ¥çœ‹Javaç‰ˆæœ¬java -version# æŸ¥çœ‹Mavenç‰ˆæœ¬mvn -version</code></pre><p>ä¸‹è½½<a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener">IDEA Ultimate</a></p><p>é˜¿é‡Œäº‘Mavené•œåƒé…ç½®ï¼š</p><pre><code class="xml">&lt;!-- settings.xml --&gt;&lt;mirror&gt;    &lt;id&gt;nexus-aliyun&lt;/id&gt;    &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;    &lt;name&gt;Nexus aliyun&lt;/name&gt;    &lt;ur1&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;&lt;/mirror&gt;</code></pre><p>å¯åŠ¨SpringBooté¡¹ç›®ï¼š</p><pre><code class="shell"># /girlmvn spring-boot:run</code></pre><pre><code class="shell"># /girlmvn installjava -jar target/girl.jar</code></pre><h2 id="ç¬¬3ç« -é¡¹ç›®å±æ€§é…ç½®"><a href="#ç¬¬3ç« -é¡¹ç›®å±æ€§é…ç½®" class="headerlink" title="ç¬¬3ç«  é¡¹ç›®å±æ€§é…ç½®"></a>ç¬¬3ç«  é¡¹ç›®å±æ€§é…ç½®</h2><blockquote><p>é¡¹ç›®å±æ€§é…ç½®çš„å„ç§æ–¹æ³•</p></blockquote><h3 id="3-1-é¡¹ç›®å±æ€§é…ç½®"><a href="#3-1-é¡¹ç›®å±æ€§é…ç½®" class="headerlink" title="3-1 é¡¹ç›®å±æ€§é…ç½®"></a>3-1 é¡¹ç›®å±æ€§é…ç½®</h3><p>å±æ€§é…ç½®</p><pre><code class="properties"># application.propertiesserver.port=8888server.context-path=/girlspring.datasource.url=jdbc:mysql://127.0.0.1:3306/spring.datasource.username=rootspring.datasource.password=123456spring.datasource.driver-class-name=com.mysql.jdbc</code></pre><p>åŠ è½½é…ç½®å±æ€§æ³¨è§£</p><ul><li><p>å•å±æ€§</p><pre><code class="yaml">cupSize: Bage: 18content: &quot;cupSize: ${cupSize}, age: ${age}&quot;</code></pre><pre><code class="java">@Value(&quot;${cupSize}&quot;)private String cupSize;@Value(&quot;${age}&quot;)private Integer age;@Value(&quot;${content}&quot;)private String content;</code></pre></li><li><p>ç»„å±æ€§</p><pre><code class="yaml">girl:     cupSize: B    age: 18</code></pre><pre><code class="java">@Component@ConfigurationProperties(prefix = &quot;girl&quot;)public class GirlProperties {    private String cupSize;    private Integer age;    // ...getter and setter...}</code></pre><pre><code class="java">@Autowiredprivate GrilProperties girlProperties;</code></pre></li></ul><p>å¤šç¯å¢ƒé…ç½®ï¼š</p><pre><code class="yaml"># application.ymlspring:    profiles:         active: dev</code></pre><pre><code class="yaml"># application-dev.yml å¼€å‘ç¯å¢ƒcupSize: B</code></pre><pre><code class="yaml"># application-prod.yml ç”Ÿäº§ç¯å¢ƒcupSize: F</code></pre><pre><code class="shell"># ç¼–è¯‘mvn install# å¯åŠ¨java -jar target/girl.jar --spring.profiles.active=prod</code></pre><h2 id="ç¬¬4ç« -Controllerçš„ä½¿ç”¨"><a href="#ç¬¬4ç« -Controllerçš„ä½¿ç”¨" class="headerlink" title="ç¬¬4ç«  Controllerçš„ä½¿ç”¨"></a>ç¬¬4ç«  Controllerçš„ä½¿ç”¨</h2><blockquote><p>ä»‹ç»SpringBooté¡¹ç›®ä¸­Controllerçš„ä½¿ç”¨</p></blockquote><h3 id="4-1-Controllerçš„ä½¿ç”¨"><a href="#4-1-Controllerçš„ä½¿ç”¨" class="headerlink" title="4-1 Controllerçš„ä½¿ç”¨"></a>4-1 Controllerçš„ä½¿ç”¨</h3><table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>@Controller</td><td>å¤„ç†httpè¯·æ±‚</td></tr><tr><td>@RestController</td><td>Spring4ä¹‹åæ–°çš„æ³¨è§£ï¼ŒåŸæ¥è¿”å›JSONéœ€è¦@ResponseBodyé…åˆ@Controller</td></tr><tr><td>@RequestMapping</td><td>é…ç½®urlæ˜ å°„</td></tr></tbody></table><p>æ¨¡æ¿ä½¿ç”¨</p><pre><code class="xml">&lt;!-- pom.xml --&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springf ramework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre><pre><code class="html">&lt;!-- /resources/templates/index.html --&gt;&lt;hi&gt;hello Spring Boot&lt;/h1&gt;</code></pre><pre><code class="java">@RequestMapping(value=&quot;/helLo&quot;, method = RequestMethod.GET)public String say() {    return &quot;index&quot;;}</code></pre><p>å¤„ç†è¯·æ±‚ä¸­çš„å‚æ•°</p><table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>@PathVariable</td><td>è·å–urlä¸­çš„æ•°æ®</td></tr><tr><td>@RequestParam</td><td>è·å–è¯·æ±‚å‚æ•°çš„å€¼</td></tr><tr><td>@GetMapping</td><td>ç»„åˆæ³¨è§£</td></tr></tbody></table><ol><li><p>@RestControllerç›¸å½“äº@ResponseBodyä¸@Controller</p></li><li><p>@RequestMapping(value={â€œ/hiâ€, â€œ/sayâ€}, method=RequestMethod.GET)ã€‚valueå¯ä»¥æ˜¯ä¸ªé›†åˆ</p></li><li><p>@RequestMappingå¯ä»¥ç”¨@GetMappingæˆ–@PostMappingä»£æ›¿ï¼Œçœå»å£°æ˜æ–¹æ³•</p></li><li><p>/luckymoney/hello/say/100</p><p>@GetMapping(value=â€/{id}/sayâ€)</p><p>@PathVariable(â€œidâ€) Integer id</p></li><li><p>/luckymoney/hello/say?id=100</p><p>@RequestParam(value=â€idâ€, required=false, defaultValue=â€0â€) Integer id</p></li></ol><h2 id="ç¬¬5ç« -æ•°æ®åº“æ“ä½œ"><a href="#ç¬¬5ç« -æ•°æ®åº“æ“ä½œ" class="headerlink" title="ç¬¬5ç«  æ•°æ®åº“æ“ä½œ"></a>ç¬¬5ç«  æ•°æ®åº“æ“ä½œ</h2><blockquote><p>SpringBootä¸­ä½¿ç”¨spring-data-jpa</p></blockquote><h3 id="5-1-æ•°æ®åº“æ“ä½œï¼ˆä¸Šï¼‰"><a href="#5-1-æ•°æ®åº“æ“ä½œï¼ˆä¸Šï¼‰" class="headerlink" title="5-1 æ•°æ®åº“æ“ä½œï¼ˆä¸Šï¼‰"></a>5-1 æ•°æ®åº“æ“ä½œï¼ˆä¸Šï¼‰</h3><p>æ•°æ®åº“æ“ä½œ</p><blockquote><p>Spring-Data-Jpa -&gt; MySQL</p></blockquote><p>Spring-Data-JPA</p><blockquote><p>JPA(Java Persistence API)å®šä¹‰äº†ä¸€ç³»åˆ—å¯¹è±¡æŒä¹…åŒ–çš„æ ‡å‡†ï¼Œç›®å‰å®ç°è¿™ä¸€è§„èŒƒçš„äº§å“æœ‰Hibernateã€TopLinkç­‰ã€‚</p><p>Spring-Data-JPAå°±æ˜¯å¯¹Hibernateçš„æ•´åˆ</p></blockquote><p>RESTful APIè®¾è®¡ï¼š</p><table><thead><tr><th>è¯·æ±‚ç±»å‹</th><th>è¯·æ±‚è·¯å¾„</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>GET</td><td>/girls</td><td>è·å–å¥³ç”Ÿåˆ—è¡¨</td></tr><tr><td>POST</td><td>/girls</td><td>åˆ›å»ºä¸€ä¸ªå¥³ç”Ÿ</td></tr><tr><td>GET</td><td>/girls/id</td><td>é€šè¿‡idæŸ¥è¯¢ä¸€ä¸ªå¥³ç”Ÿ</td></tr><tr><td>PUT</td><td>/girls/id clipbogu</td><td>é€šè¿‡idæ›´æ–°ä¸€ä¸ªå¥³ç”Ÿ</td></tr><tr><td>DELETE</td><td>/girls/id</td><td>é€šè¿‡idåˆ é™¤ä¸€ä¸ªå¥³ç”Ÿ</td></tr></tbody></table><p>æ­¥éª¤ï¼š</p><ol><li><p>æ·»åŠ POMä¾èµ–</p><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.springf ramework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;mysql&lt;/groupId&gt;    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre></li><li><p>é…ç½®æ•°æ®åº“ä¿¡æ¯å’ŒSpring-Data-JPAä¿¡æ¯</p><pre><code class="yaml">spring:     datasource:         driver-class-name: com.mysql.jdbc.Driver        ur1: jdbc:mysql://127.0.0.1:3306/dbgirl        username: root        password: 123456    jpa:         hibernate:             ddl-auto: create        show-sql: true</code></pre><p>ddl-autoå‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>create</td><td>è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ã€‚æ¯æ¬¡ç¨‹åºè¿è¡Œéƒ½ä¼šåˆ›å»ºç©ºè¡¨ï¼Œå¦‚æœå·²å­˜åœ¨åˆ™ä¼šå…ˆåˆ é™¤è¡¨</td></tr><tr><td>create-drop</td><td>åº”ç”¨åœä¸‹æ¥çš„æ—¶å€™å°±ä¼šæŠŠè¡¨åˆ é™¤</td></tr><tr><td>none</td><td>ä¸åšä»»ä½•æ“ä½œã€‚</td></tr><tr><td>update</td><td>è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ã€‚å½“å·²å­˜åœ¨è¡¨åˆ™ä¸ä¼šæ“ä½œ</td></tr><tr><td>validate</td><td>éªŒè¯å®ä½“å±æ€§æ˜¯å¦å’Œè¡¨ç»“æ„ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™ä¼šæŠ¥é”™ã€‚</td></tr></tbody></table></li><li><p>åˆ›å»ºå®ä½“ç±»</p><pre><code class="java">@Entitypublic class Girl {    @Id    @GenerateValue    private Integer id;    private String cupSize;    private Integer age;    // æ— å‚æ„é€ å‡½æ•°ã€‚å¿…é¡»è¦æœ‰ï¼Œå¦åˆ™æŠ¥é”™    // ...getter and setter...}</code></pre></li><li><p>è¿è¡Œç¨‹åº</p></li></ol><h3 id="5-2-æ•°æ®åº“æ“ä½œï¼ˆä¸‹ï¼‰"><a href="#5-2-æ•°æ®åº“æ“ä½œï¼ˆä¸‹ï¼‰" class="headerlink" title="5-2 æ•°æ®åº“æ“ä½œï¼ˆä¸‹ï¼‰"></a>5-2 æ•°æ®åº“æ“ä½œï¼ˆä¸‹ï¼‰</h3><ol><li><p>Dao</p><pre><code class="java">public interface GirlRepository extends JpaRepository&lt;Girl, Integer&gt; {    /**     * é€šè¿‡å¹´é¾„æŸ¥è¯¢     */    public List&lt;Girl&gt; findByAge(Integer age);}</code></pre></li><li><p>Controller</p><pre><code class="java">@RestControllerpublic class GirlController {    @Autowired    private GirlRepository girlRepository;    /**     * æŸ¥è¯¢æ‰€æœ‰å¥³ç”Ÿåˆ—è¡¨     */     @GetMapping(value = &quot;/girls&quot;)    public List&lt;Girl&gt; girlList() {        return girlRepository.findALL();    }    /**     * æ·»åŠ ä¸€ä¸ªå¥³ç”Ÿ     */     @PostMapping(value = &quot;/girls&quot;)    public Girl girlAdd(@RequestParam(&quot;cupSize&quot;) String cupSize,                        @RequestParam(&quot;age&quot;) Integer age) {        Girl girl=new Girl();        girl.setCupSize(cupSize);        girl.setAge(age);        return girlRepository.save(girl);    }    /**     * æŸ¥è¯¢ä¸€ä¸ªå¥³ç”Ÿ     */     @GetMapping(value = &quot;/girls/{id}&quot;)    public Girl girlFindOne(@PathVariable(&quot;id&quot;) Integer id) {        return girlRepository.findOne(id);    }    /**     * æ›´æ–°ä¸€ä¸ªå¥³ç”Ÿ     */     @PutMapping(value = &quot;/girls/{id}&quot;)    public Girl girlUpdate(@PathVariable(&quot;id&quot;) Integer id,                            @RequestParam(&quot;cupSize&quot;) String cupSize,                            @RequestParam(&quot;age&quot;) Integer age) {        Girl girl = new Girl();        girl.setId(id);        girl.setCupSize(cupSize);        girl.setAge(age);        return girlRepository.save(girl);    }    /**     * åˆ é™¤ä¸€ä¸ªå¥³ç”Ÿ     */     @DeleteMapping(value = &quot;/girls/{id}&quot;)    public void girlDelete(@PathVariable(&quot;id&quot;) Integer id) {        girlRepository.delete(id);    }    /**     * é€šè¿‡å¹´é¾„æŸ¥è¯¢å¥³ç”Ÿåˆ—è¡¨     */    @GetMapping(value = &quot;/girls/age/{age}&quot;)    public List&lt;Girl&gt; girlListByAge(@PathVariable(&quot;age&quot;) Integer age) {        return girlRepository.findByAge(age);    }}</code></pre></li></ol><p>æ³¨ï¼š</p><ul><li><p><strong>Postä½¿ç”¨form-data</strong></p></li><li><p><strong>Putä½¿ç”¨x-www-form-urlencoded</strong></p></li></ul><h2 id="ç¬¬6ç« -äº‹åŠ¡ç®¡ç†"><a href="#ç¬¬6ç« -äº‹åŠ¡ç®¡ç†" class="headerlink" title="ç¬¬6ç«  äº‹åŠ¡ç®¡ç†"></a>ç¬¬6ç«  äº‹åŠ¡ç®¡ç†</h2><blockquote><p>æ¼”ç¤ºäº†SpringBootä¸­ä½¿ç”¨äº‹åŠ¡çš„ç®€å•ä¾‹å­</p></blockquote><h3 id="6-1-äº‹åŠ¡ç®¡ç†"><a href="#6-1-äº‹åŠ¡ç®¡ç†" class="headerlink" title="6-1 äº‹åŠ¡ç®¡ç†"></a>6-1 äº‹åŠ¡ç®¡ç†</h3><pre><code class="java">@Servicepublic class GirlService {    @Autowired    private GirlRepository girlRepository;    /**     * ä¿å­˜ä¸¤ä¸ªå¥³ç”Ÿä¿¡æ¯     */    @Transactional(rollbackFor = Exception.class)    public void saveTwo() {        Girl girlA = new Girl();        girlA.setCupSize(&quot;A&quot;);        girlA.setAge(18);        girlRepository.save(girlA);        Girl girlB = new Girl();        girlB.setAge(19);        girlB.setCupSize(&quot;B&quot;);        girlRepository.save(girlB);    }}</code></pre><pre><code class="java">@Autowiredprivate GirlService girlService;@PostMapping(value=&quot;/girls/two&quot;)public void saveGirlTwo(){    girlService.saveTwo();}</code></pre><blockquote><p>åªæœ‰æŸ¥è¯¢çš„æ—¶å€™ä¸åŠ äº‹åŠ¡ï¼Œå…¶å®ƒä»»ä½•æ“ä½œéƒ½è¦åŠ äº‹åŠ¡ã€‚</p><p>è¿›è¡Œæ·»åŠ æ“ä½œçš„æ—¶å€™ï¼Œå¦‚æœè¦æ±‚ï¼Œè¦ä¹ˆå…¨éƒ¨æ·»åŠ æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</p><p>@Transactionaläº‹åŠ¡å¤„ç†æ³¨è§£çš„ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨seriveè¿›è¡Œäº‹åŠ¡å¤„ç†</p></blockquote><p>äº‹åŠ¡å¤±è´¥åŸå› ï¼šæ•°æ®åº“é»˜è®¤ä¸ºMyISAMä¸æ”¯æŒäº‹ç‰©å›æ»šï¼Œéœ€è¦è®¾ç½®ä¸ºInnoDB</p><p>è§£å†³æ–¹æ³•ï¼š æ”¹ä¸ºINNODB</p><p>æ›´æ”¹è¯­å¥ï¼š</p><pre><code class="mysql">ALTER TABLE girl ENGINE=INNODB;</code></pre><p>äº‹åŠ¡å¤±è´¥åŸå› ï¼šSpringBoot2.*å®ä½“çš„é»˜è®¤å¼•æ“ä¸ºMyISAMä¸æ”¯æŒäº‹åŠ¡ï¼Œéœ€è¦é…ç½®å¼•æ“ä¸ºä¸ºinnoDB<br>è§£å†³æ–¹æ³•ï¼šåœ¨application.ymlæ·»åŠ é…ç½®</p><pre><code class="yaml">spring:     jpa:         database-platform: org.hibernate.dialect.MySQL5InnoDBDialect</code></pre><h2 id="ç¬¬7ç« -è¯¾ç¨‹å›é¡¾"><a href="#ç¬¬7ç« -è¯¾ç¨‹å›é¡¾" class="headerlink" title="ç¬¬7ç«  è¯¾ç¨‹å›é¡¾"></a>ç¬¬7ç«  è¯¾ç¨‹å›é¡¾</h2><blockquote><p>å›é¡¾è¯¾ç¨‹å†…å®¹</p></blockquote><h3 id="7-1-è¯¾ç¨‹å›é¡¾"><a href="#7-1-è¯¾ç¨‹å›é¡¾" class="headerlink" title="7-1 è¯¾ç¨‹å›é¡¾"></a>7-1 è¯¾ç¨‹å›é¡¾</h3><ol><li>SpringBootä»‹ç»</li><li>å®‰è£…IDEAã€Mavenå¹¶åˆå§‹åŒ–SpringBootå·¥ç¨‹</li><li>é…ç½®æ–‡ä»¶ã€æ³¨å…¥å±æ€§</li><li>Controllerçš„ä½¿ç”¨åŠæ³¨è§£</li><li>æ•°æ®åº“å¢åˆ æ”¹æŸ¥</li></ol><p>ä¸‹é—¨è¯¾ç¨‹ä»‹ç»ï¼š</p><ol><li>@Validè¡¨å•éªŒè¯</li><li>AOPç»Ÿä¸€å¼‚å¸¸å¤„ç†</li><li>spring-data-jpa8.ç”¨ç¼“å­˜åº”å¯¹é«˜å¹¶å‘</li><li>Jdbc Template</li><li>Mybatis</li><li>Redis</li><li>MongoDB</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1086-Javaé«˜å¹¶å‘ä¹‹é­‚ï¼šsynchronizedæ·±åº¦è§£æ</title>
      <link href="/imooc/1086-synchronized/"/>
      <url>/imooc/1086-synchronized/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/1086" target="_blank" rel="noopener">https://www.imooc.com/learn/1086</a></p><p>ç®€ä»‹ï¼šé«˜å¹¶å‘é—®é¢˜å‘æ¥æ˜¯Javaç¨‹åºå‘˜è¿›é˜¶çš„é‡ç‚¹ï¼Œä¹Ÿæ˜¯é¢è¯•çš„éš¾ç‚¹ã€‚æƒ³è¦æ‰“é€šé«˜å¹¶å‘çš„å¥‡ç»å…«è„‰ï¼Œsynchronizedæ˜¯ä½ ä¸å¾—ä¸è¶Ÿè¿‡çš„å‘ï¼Œæœ¬è¯¾ç¨‹ä»synchronizedï¼Œä»ä½¿ç”¨æ–¹æ³•åˆ°åº•å±‚åŸç†æºç ï¼Œå¨“å¨“é“æ¥ã€‚è¿˜å¯¹å¸¸è§é¢è¯•é¢˜å’Œæ›´æ·±å±‚æ‰©å±•æ–¹é¢çš„æ€è€ƒï¼Œåšå‡ºäº†è®²è§£ã€‚æœ¬è¯¾ç¨‹ç”±æµ…å…¥æ·±ï¼Œé€‚åˆå„é˜¶æ®µå·¥ç¨‹å¸ˆè§‚çœ‹ã€‚æ‚Ÿç©ºè€å¸ˆçš„å®æˆ˜è¯¾ã€Javaå¹¶å‘æ ¸å¿ƒçŸ¥è¯†ç²¾è®²+Javaå†…å­˜æ¨¡å‹+æ­»é”ã€‘å·²ç»ä¸Šçº¿å•¦ï¼Œä¼ é€é—¨å¦‚ä¸‹ <a href="https://coding.imooc.com/class/362.html" target="_blank" rel="noopener">https://coding.imooc.com/class/362.html</a></p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»"><a href="#ç¬¬1ç« -è¯¾ç¨‹ä»‹ç»" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»"></a>ç¬¬1ç«  è¯¾ç¨‹ä»‹ç»</h2><blockquote><p>ä»‹ç»äº†è¯¾ç¨‹ç»“æ„ã€è¦ç‚¹ã€å‰ç½®çŸ¥è¯†å’Œå¼€å‘ç¯å¢ƒã€‚</p></blockquote><h3 id="1-1-è¯¾ç¨‹ä»‹ç»-07-58"><a href="#1-1-è¯¾ç¨‹ä»‹ç»-07-58" class="headerlink" title="1-1 è¯¾ç¨‹ä»‹ç» (07:58)"></a>1-1 è¯¾ç¨‹ä»‹ç» (07:58)</h3><p>å‰ç½®çŸ¥è¯†</p><ul><li>äº†è§£JavaåŸºæœ¬è¯­æ³•</li><li>äº†è§£å¤šçº¿ç¨‹åŸºæœ¬çŸ¥è¯†</li></ul><p>ç« èŠ‚ä»‹ç»</p><ol><li>Synchronized<strong>ç®€ä»‹</strong>ï¼šä½œç”¨ã€åœ°ä½ã€ä¸æ§åˆ¶å¹¶å‘çš„åæœ</li><li>ä¸¤ç§ç”¨æ³•ï¼š<strong>å¯¹è±¡é”</strong>å’Œ<strong>ç±»é”</strong></li><li>å¤šçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•çš„<strong>7ç§</strong>æƒ…å†µï¼šæ˜¯å¦staticã€Synchronizedæ–¹æ³•ç­‰</li><li>Synchronizedçš„<strong>æ€§è´¨</strong>ï¼šå¯é‡å…¥ã€ä¸å¯ä¸­æ–­</li><li><strong>åŸç†</strong>ï¼šåŠ è§£é”åŸç†ã€å¯é‡å…¥åŸç†ã€å¯è§æ€§åŸç†</li><li>Synchronizedçš„<strong>ç¼ºé™·</strong>ï¼šæ•ˆç‡ä½ã€ä¸å¤Ÿçµæ´»ã€æ— æ³•é¢„åˆ¤æ˜¯å¦æˆåŠŸè·å–åˆ°é”</li><li>å¸¸è§<strong>é¢è¯•</strong>é—®é¢˜ï¼šä½¿ç”¨æ³¨æ„ç‚¹ã€å¦‚ä½•é€‰æ‹©Lockæˆ–Synchronizedç­‰</li><li><strong>æ€è€ƒé¢˜</strong>ï¼šå¦‚ä½•æé«˜æ€§èƒ½ã€JVMå¦‚ä½•å†³å®šå“ªä¸ªçº¿ç¨‹è·å–é”ç­‰</li><li>æ€»ç»“</li></ol><p>å¼€å‘ç¯å¢ƒ</p><ul><li>JDK1.8</li><li>IDEA 2018.2</li></ul><p>å­¦ä¹ è·¯å¾„ï¼š</p><ul><li><p>å®æˆ˜è¯¾ï¼šJavaå¹¶å‘æ ¸å¿ƒçŸ¥è¯†ä½“ç³»ç²¾è®²</p><p><a href="https://coding.imooc.com/class/362.html" target="_blank" rel="noopener">https://coding.imooc.com/class/362.html</a></p></li></ul><h2 id="ç¬¬2ç« -Synchronizedç®€ä»‹"><a href="#ç¬¬2ç« -Synchronizedç®€ä»‹" class="headerlink" title="ç¬¬2ç«  Synchronizedç®€ä»‹"></a>ç¬¬2ç«  Synchronizedç®€ä»‹</h2><blockquote><p>è®©åŒå­¦ä»¬å¯¹Synchronizedå…³é”®å­—æœ‰æ•´ç†æ¦‚å¿µï¼Œä»å®˜ç½‘è§£é‡Šå¼•å‡ºé€šä¿—è§£é‡Šï¼Œä¾¿äºç†è§£ã€‚ä»Synchronizedå…³é”®å­—çš„åœ°ä½è¯´æ˜è¯¥å…³é”®å­—çš„é‡è¦æ€§ã€‚ä»£ç æ¼”ç¤ºä¸ç”¨å¹¶å‘æ‰‹æ®µä¼šå¸¦æ¥çš„é—®é¢˜ï¼Œå¸å¼•åŒå­¦ä»¬å¸¦ç€ç–‘é—®ç»§ç»­å­¦ä¹ ã€‚åˆ†äº«IDEAçš„è°ƒè¯•æŠ€å·§ï¼Œä¾¿äºåŒå­¦ä»¬å®é™…æ“ä½œã€‚</p></blockquote><ul><li>ä½œç”¨ï¼šå®˜æ–¹è§£é‡Šã€é€šä¿—æ˜“æ‡‚çš„è§£é‡Š</li><li>åœ°ä½</li><li>ä¸ä½¿ç”¨å¹¶å‘æ‰‹æ®µçš„åæœ</li></ul><h3 id="2-1-synchronizedçš„ä½œç”¨-03-11"><a href="#2-1-synchronizedçš„ä½œç”¨-03-11" class="headerlink" title="2-1 synchronizedçš„ä½œç”¨ (03:11)"></a>2-1 synchronizedçš„ä½œç”¨ (03:11)</h3><p>å®˜æ–¹è§£é‡Š</p><blockquote><p>Synchronized methods enable a simple strategy for preventing thread interference and memory consistency errors: if an object is visable to more than one thread, all reads or wirtes or that objectâ€™s variables are done through synchronized methods </p></blockquote><p>ç¿»è¯‘</p><blockquote><p>åŒæ­¥æ–¹æ³•æ”¯æŒä¸€ç§ç®€å•çš„ç­–ç•¥æ¥é˜²æ­¢çº¿ç¨‹å¹²æ‰°å’Œå†…å­˜ä¸€è‡´æ€§é”™è¯¯ï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡å¯¹å¤šä¸ªçº¿ç¨‹å¯è§ï¼Œåˆ™å¯¹è¯¥å¯¹è±¡å˜é‡çš„æ‰€æœ‰è¯»å–æˆ–å†™å…¥éƒ½æ˜¯é€šè¿‡åŒæ­¥æ–¹æ³•å®Œæˆçš„</p></blockquote><p>ä¸€å¥è¯è¯´å‡ºSynchronizedçš„ä½œç”¨</p><blockquote><p>èƒ½å¤Ÿä¿è¯åœ¨åŒä¸€æ—¶åˆ»æœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥æ®µä»£ç ï¼Œä»¥è¾¾åˆ°ä¿è¯å¹¶å‘å®‰å…¨çš„æ•ˆæœ</p></blockquote><h3 id="2-2-synchronizedçš„åœ°ä½-00-51"><a href="#2-2-synchronizedçš„åœ°ä½-00-51" class="headerlink" title="2-2 synchronizedçš„åœ°ä½ (00:51)"></a>2-2 synchronizedçš„åœ°ä½ (00:51)</h3><ul><li>Synchronizedæ˜¯Javaçš„å…³é”®å­—ï¼Œè¢«Javaè¯­è¨€åŸç”Ÿæ”¯æŒ</li><li>Synchronizedæ˜¯æœ€åŸºæœ¬çš„åŒæ­¥äº’æ–¥æ‰‹æ®µ</li><li>Synchronizedæ˜¯å¹¶å‘ç¼–ç¨‹ä¸­çš„å…ƒè€çº§è§’è‰²ï¼Œæ˜¯å¹¶å‘ç¼–ç¨‹çš„å¿…å­¦å†…å®¹</li></ul><h3 id="2-3-ä¸ç”¨å¹¶å‘æ‰‹æ®µçš„åæœé¢„è­¦-01-06"><a href="#2-3-ä¸ç”¨å¹¶å‘æ‰‹æ®µçš„åæœé¢„è­¦-01-06" class="headerlink" title="2-3 ä¸ç”¨å¹¶å‘æ‰‹æ®µçš„åæœé¢„è­¦ (01:06)"></a>2-3 ä¸ç”¨å¹¶å‘æ‰‹æ®µçš„åæœé¢„è­¦ (01:06)</h3><p>ä»£ç å®æˆ˜ï¼šä¸¤ä¸ªçº¿ç¨‹åŒæ—¶<code>a++</code>ï¼Œæœ€åç»“æœä¼šæ¯”é¢„è®¡çš„å°‘ã€‚</p><h3 id="2-4-åæœçš„ä»£ç æ¼”ç¤ºå’ŒåŸå› åˆ†æ-07-23"><a href="#2-4-åæœçš„ä»£ç æ¼”ç¤ºå’ŒåŸå› åˆ†æ-07-23" class="headerlink" title="2-4 åæœçš„ä»£ç æ¼”ç¤ºå’ŒåŸå› åˆ†æ (07:23)"></a>2-4 åæœçš„ä»£ç æ¼”ç¤ºå’ŒåŸå› åˆ†æ (07:23)</h3><pre><code class="java">public class DisappearRequest1 implements Runnable {    private static DisappearRequest1 instance = new DisappearRequest1();    private static int a = 0;    public static void main(String[] args) throws InterruptedException {        Thread t1 = new Thread(instance);        Thread t2 = new Thread(instance);        t1.start();t2.start();        t1.join();t2.join();        System.out.println(&quot;a = &quot; + a);    }    @Override    public void run() {        for (int i = 0; i &lt; 100000; i++) {            a++;        }    }}</code></pre><p>åŸå› ï¼š</p><blockquote><p><code>count++</code>ï¼Œå®ƒçœ‹ä¸Šå»åªæ˜¯ä¸€ä¸ªæ“ä½œï¼Œå®é™…ä¸ŠåŒ…å«äº†ä¸‰ä¸ªåŠ¨ä½œï¼ˆéåŸå­æ“ä½œï¼‰ï¼š</p><ol><li>è¯»å–count</li><li>å°†countåŠ 1</li><li>å°†countçš„å€¼å†™å…¥åˆ°å†…å­˜ä¸­</li></ol><p>éåŸå­æ“ä½œè¿˜æœ‰ï¼š<code>a--</code>ã€<code>a+=1</code>ã€<code>a-=1</code>ç­‰</p></blockquote><h2 id="ç¬¬3ç« -Synchronizedçš„ä¸¤ç§ç”¨æ³•ï¼ˆå¯¹è±¡é”å’Œç±»é”ï¼‰"><a href="#ç¬¬3ç« -Synchronizedçš„ä¸¤ç§ç”¨æ³•ï¼ˆå¯¹è±¡é”å’Œç±»é”ï¼‰" class="headerlink" title="ç¬¬3ç«  Synchronizedçš„ä¸¤ç§ç”¨æ³•ï¼ˆå¯¹è±¡é”å’Œç±»é”ï¼‰"></a>ç¬¬3ç«  Synchronizedçš„ä¸¤ç§ç”¨æ³•ï¼ˆå¯¹è±¡é”å’Œç±»é”ï¼‰</h2><blockquote><p>å¯¹ä½¿ç”¨æ–¹æ³•è¿›è¡Œç³»ç»Ÿåˆ†ç±»ã€‚æ¶µç›–äº†æ‰€æœ‰è¯¥å…³é”®å­—ä¼šç”¨åˆ°çš„æƒ…å†µã€‚</p></blockquote><h3 id="3-1-Synchronizedçš„ä¸¤ç§ç”¨æ³•ä»‹ç»-02-11"><a href="#3-1-Synchronizedçš„ä¸¤ç§ç”¨æ³•ä»‹ç»-02-11" class="headerlink" title="3-1 Synchronizedçš„ä¸¤ç§ç”¨æ³•ä»‹ç» (02:11)"></a>3-1 Synchronizedçš„ä¸¤ç§ç”¨æ³•ä»‹ç» (02:11)</h3><ol><li><p>å¯¹è±¡é”ï¼š3-2</p><blockquote><p>åŒ…æ‹¬æ–¹æ³•é”ï¼ˆé»˜è®¤é”å¯¹è±¡ä¸ºthiså½“å‰å®ä¾‹å¯¹è±¡ï¼‰å’ŒåŒæ­¥ä»£ç å—é”ï¼ˆè‡ªå·±æŒ‡å®šé”å¯¹è±¡ï¼‰</p></blockquote></li><li><p>ç±»é”ï¼š3-7</p><blockquote><p>æŒ‡synchronizedä¿®é¥°é™æ€çš„æ–¹æ³•æˆ–æŒ‡å®šé”ä¸ºclasså¯¹è±¡</p></blockquote></li></ol><h3 id="3-2-å¯¹è±¡é”çš„å½¢å¼1-åŒæ­¥ä»£ç å—-13-07"><a href="#3-2-å¯¹è±¡é”çš„å½¢å¼1-åŒæ­¥ä»£ç å—-13-07" class="headerlink" title="3-2 å¯¹è±¡é”çš„å½¢å¼1-åŒæ­¥ä»£ç å— (13:07)"></a>3-2 å¯¹è±¡é”çš„å½¢å¼1-åŒæ­¥ä»£ç å— (13:07)</h3><p>ç¬¬ä¸€ä¸ªç”¨æ³•ï¼šå¯¹è±¡é”</p><ul><li>ä»£ç å—å½¢å¼ï¼šæ‰‹åŠ¨æŒ‡å®šé”å¯¹è±¡</li><li>æ–¹æ³•é”å½¢å¼ï¼šsynchronizedä¿®é¥°æ™®é€šæ–¹æ³•ï¼Œé”å¯¹è±¡é»˜è®¤ä¸ºthis</li></ul><blockquote><p>ä»£ç å—å½¢å¼ï¼šæ‰‹åŠ¨æŒ‡å®šé”å¯¹è±¡</p></blockquote><pre><code class="java">private Object lock1 = new Object();private Object lock2 = new Object();@Overridepublic void run() {    synchronized (lock1) {        System.out.println(&quot;æˆ‘æ˜¯å¯¹è±¡é”çš„ä»£ç å—å½¢å¼-lock1ã€‚æˆ‘å«&quot; + Thread.currentThread().getName());        try {            Thread.sleep(3000);        } catch (InterruptedException e) {            e.printStackTrace();        }        System.out.println(Thread.currentThread().getName() + &quot;ï¼Œlock1-è¿è¡Œç»“æŸã€‚&quot;);    }    synchronized (lock2) {        System.out.println(&quot;æˆ‘æ˜¯å¯¹è±¡é”çš„ä»£ç å—å½¢å¼-lock2ã€‚æˆ‘å«&quot; + Thread.currentThread().getName());        try {            Thread.sleep(3000);        } catch (InterruptedException e) {            e.printStackTrace();        }        System.out.println(Thread.currentThread().getName() + &quot;ï¼Œlock2-è¿è¡Œç»“æŸã€‚&quot;);    }}</code></pre><p>ç»“è®ºï¼šå½“æœ‰å¤šä¸ªsynchronizedåŒæ­¥ä»£ç å—æ—¶ï¼Œå¦‚æœä½¿ç”¨thisä¸ºé”å¯¹è±¡ï¼ˆå³åŒä¸€ä¸ªé”å¯¹è±¡ï¼‰åˆ™åªèƒ½è¿è¡Œå…¶ä¸­çš„ä¸€ä¸ªåŒæ­¥ä»£ç å—ï¼Œä¸èƒ½ä¸å…¶ä»–åŒæ­¥ä»£ç å—å¹¶è¡Œè¿è¡Œã€‚</p><p>æ³¨ï¼šå½“ä¸šåŠ¡å¤æ‚æ—¶ï¼Œé”å¯¹è±¡ä¹Ÿä¼šå˜å¾—éå¸¸å¤æ‚ã€‚JDKæä¾›äº†ç›¸åº”éå¸¸å®Œå–„çš„å·¥å…·ç±»ï¼Œä¾‹å¦‚ï¼šJUCåŒ…ä¸‹çš„<code>CountDownLatch</code>å€’è®¡æ—¶,é—¨é—©ã€<code>CyclicBarrier</code>ã€<code>Semaphore</code>ä¿¡å·é‡ã€‚</p><h3 id="3-3-è°ƒè¯•æŠ€å·§-çœ‹çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ-03-28"><a href="#3-3-è°ƒè¯•æŠ€å·§-çœ‹çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ-03-28" class="headerlink" title="3-3 è°ƒè¯•æŠ€å·§-çœ‹çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ (03:28)"></a>3-3 è°ƒè¯•æŠ€å·§-çœ‹çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ (03:28)</h3><p>åœ¨è°ƒè¯•æ—¶æŸ¥çœ‹å½“å‰çº¿ç¨‹çš„çŠ¶æ€ï¼š</p><p>æ‰“å¥½æ–­ç‚¹=&gt;ä½¿ç”¨Debugå¯åŠ¨ç¨‹åº=&gt;å½“è¿è¡Œåˆ°æ–­ç‚¹æ—¶,å³å‡»æ–­ç‚¹å‡ºç°å›¾1</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8pl2tiw58j30nk0aiq3q.jpg" alt="image-20191107170337910" style="zoom:40%;" alt="å›¾1" /><p><code>All</code>ï¼šæš‚åœæ‰€æœ‰çº¿ç¨‹ï¼ŒåŒ…æ‹¬JVM</p><p><code>Thread</code>ï¼šæš‚åœå½“å‰çº¿ç¨‹</p><p>Debug=&gt;Debugger=&gt;Frames=&gt;Thread-0=&gt;run,Thread=&gt;Evaluate Expression</p><p>æ‰§è¡Œï¼š<code>this.getState()</code></p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8plcqxdrij30hy0jymz1.jpg" style="zoom:33%;" alt="å›¾2"/><h3 id="3-4-å¯¹è±¡é”çš„å½¢å¼2-æ™®é€šæ–¹æ³•é”-03-58"><a href="#3-4-å¯¹è±¡é”çš„å½¢å¼2-æ™®é€šæ–¹æ³•é”-03-58" class="headerlink" title="3-4 å¯¹è±¡é”çš„å½¢å¼2-æ™®é€šæ–¹æ³•é” (03:58)"></a>3-4 å¯¹è±¡é”çš„å½¢å¼2-æ™®é€šæ–¹æ³•é” (03:58)</h3><blockquote><p>æ–¹æ³•é”å½¢å¼ï¼šsynchronizedä¿®é¥°æ™®é€šæ–¹æ³•ï¼Œé”å¯¹è±¡é»˜è®¤ä¸ºthis</p></blockquote><pre><code class="java">public synchronized void method() throws InterruptedException {    System.out.println(&quot;æˆ‘æ˜¯å¯¹è±¡é”çš„æ–¹æ³•ä¿®é¥°ç¬¦å½¢å¼ï¼Œæˆ‘å«&quot; + Thread.currentThread().getName());    Thread.sleep(3000);    System.out.println(Thread.currentThread().getName() + &quot;ï¼Œè¿è¡Œç»“æŸ&quot;);}</code></pre><h3 id="3-5-ç±»é”çš„æ¦‚å¿µ-04-54"><a href="#3-5-ç±»é”çš„æ¦‚å¿µ-04-54" class="headerlink" title="3-5 ç±»é”çš„æ¦‚å¿µ (04:54)"></a>3-5 ç±»é”çš„æ¦‚å¿µ (04:54)</h3><p>ç¬¬äºŒä¸ªç”¨æ³•ï¼šç±»é”</p><ul><li>æ¦‚å¿µï¼ˆâ˜…é‡è¦ï¼‰ï¼šJavaç±»å¯èƒ½æœ‰å¾ˆå¤šä¸ªå¯¹è±¡ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªClasså¯¹è±¡</li><li>å½¢å¼1ï¼šsynchronizedåŠ è½½staticé™æ€æ–¹æ³•ä¸Š</li><li>å½¢å¼2ï¼š<code>synchronized(*.class)</code>ä»£ç å—</li></ul><p>æ¦‚å¿µï¼š</p><ul><li>åªæœ‰ä¸€ä¸ªClasså¯¹è±¡ï¼šJavaç±»å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªå¯¹è±¡ï¼Œä½†æ˜¯åªæœ‰1ä¸ªClasså¯¹è±¡ã€‚ç‰¹æ®Šçš„å¯¹è±¡ã€‚</li><li>æœ¬è´¨ï¼šæ‰€è°“çš„ç±»é”ï¼Œä¸è¿‡æ˜¯Classå¯¹è±¡çš„é”è€Œå·²ã€‚</li><li>ç”¨æ³•å’Œæ•ˆæœï¼šç±»é”åªèƒ½åœ¨åŒä¸€æ—¶åˆ»è¢«ä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰ã€‚</li></ul><p>ç±»é”å°±æ˜¯ä½¿ç”¨ç‰¹æ®Šå¯¹è±¡é”ï¼ˆClasså¯¹è±¡ï¼‰ä½œä¸ºåŒæ­¥äº’æ–¥é”ï¼Œå› ä¸ºå…¶åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥ä¸åŒçš„å®ä¾‹ä¼šäº’æ–¥ï¼Œåœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è¯¥ç±»å®ä¾‹ä¸­è¢«ç±»é”é”ä½çš„æ–¹æ³•ã€‚</p><h3 id="3-6-ç±»é”çš„å½¢å¼1-é™æ€æ–¹æ³•é”-03-52"><a href="#3-6-ç±»é”çš„å½¢å¼1-é™æ€æ–¹æ³•é”-03-52" class="headerlink" title="3-6 ç±»é”çš„å½¢å¼1-é™æ€æ–¹æ³•é” (03:52)"></a>3-6 ç±»é”çš„å½¢å¼1-é™æ€æ–¹æ³•é” (03:52)</h3><blockquote><p>å½¢å¼1ï¼šsynchronizedåŠ è½½staticé™æ€æ–¹æ³•ä¸Š</p></blockquote><p>ä¸¤ä¸ªçº¿ç¨‹ä¸ºä¸åŒçš„å®ä¾‹ï¼š</p><pre><code class="java">Thread t1 = new Thread(instance1);Thread t2 = new Thread(instance2);</code></pre><pre><code class="java">public static synchronized void method() throws InterruptedException {    System.out.println(&quot;æˆ‘æ˜¯ç±»é”çš„é™æ€æ–¹æ³•å½¢å¼ï¼Œæˆ‘å«&quot; + Thread.currentThread().getName());    Thread.sleep(3000);    System.out.println(Thread.currentThread().getName() + &quot;ï¼Œè¿è¡Œç»“æŸ&quot;);}</code></pre><h3 id="3-7-ç±»é”çš„å½¢å¼2â€“-class-05-08"><a href="#3-7-ç±»é”çš„å½¢å¼2â€“-class-05-08" class="headerlink" title="3-7 ç±»é”çš„å½¢å¼2â€“.class (05:08)"></a>3-7 ç±»é”çš„å½¢å¼2â€“.class (05:08)</h3><blockquote><p>å½¢å¼2ï¼š<code>synchronized(*.class)</code>ä»£ç å—</p></blockquote><p>ä¸¤ä¸ªçº¿ç¨‹ä¸ºä¸åŒçš„å®ä¾‹ï¼š</p><pre><code class="java">Thread t1 = new Thread(instance1);Thread t2 = new Thread(instance2);</code></pre><pre><code class="java">public void method() throws InterruptedException {    synchronized (SynchronizedClassClass5.class) {        System.out.println(&quot;æˆ‘æ˜¯ç±»é”çš„ synchronized(*.class) å½¢å¼ï¼Œæˆ‘å«&quot; + Thread.currentThread().getName());        Thread.sleep(3000);        System.out.println(Thread.currentThread().getName() + &quot;ï¼Œè¿è¡Œç»“æŸ&quot;);    }}</code></pre><h3 id="3-8-æ¶ˆå¤±çš„è¯·æ±‚è§£å†³æ–¹æ¡ˆ-04-25"><a href="#3-8-æ¶ˆå¤±çš„è¯·æ±‚è§£å†³æ–¹æ¡ˆ-04-25" class="headerlink" title="3-8 æ¶ˆå¤±çš„è¯·æ±‚è§£å†³æ–¹æ¡ˆ (04:25)"></a>3-8 æ¶ˆå¤±çš„è¯·æ±‚è§£å†³æ–¹æ¡ˆ (04:25)</h3><p>è§£å†³æ–¹æ¡ˆ1ï¼šå¯¹è±¡é”-æ™®é€šæ–¹æ³•å½¢å¼</p><pre><code class="java">@Overridepublic synchronized void run() {    for (int i = 0; i &lt; 100000; i++) {        a++;    }}</code></pre><p>è§£å†³æ–¹æ¡ˆ2ï¼šå¯¹è±¡é”-åŒæ­¥ä»£ç å—å½¢å¼</p><pre><code class="java">@Overridepublic void run() {    for (int i = 0; i &lt; 100000; i++) {        synchronized (this) {            a++;        }    }}</code></pre><p>è§£å†³æ–¹æ¡ˆ3ï¼šç±»é”-*.classå½¢å¼</p><pre><code class="java">@Overridepublic void run() {    for (int i = 0; i &lt; 100000; i++) {        synchronized (DisappearRequest1.class) {            a++;        }    }}</code></pre><p>è§£å†³æ–¹æ¡ˆ4ï¼šç±»é”-é™æ€æ–¹æ¡ˆå½¢å¼</p><pre><code class="java">@Overridepublic void run() {    method();}public static synchronized void method() {    for (int i = 0; i &lt; 100000; i++) {        a++;    }}</code></pre><h2 id="ç¬¬4ç« -å¤šçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•çš„7ç§å…·ä½“æƒ…å†µ"><a href="#ç¬¬4ç« -å¤šçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•çš„7ç§å…·ä½“æƒ…å†µ" class="headerlink" title="ç¬¬4ç«  å¤šçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•çš„7ç§å…·ä½“æƒ…å†µ"></a>ç¬¬4ç«  å¤šçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•çš„7ç§å…·ä½“æƒ…å†µ</h2><blockquote><p>â˜…é¢è¯•å¸¸è€ƒ</p><p>é™¤äº†æ™®é€šç”¨æ³•å¤–ï¼Œå¯¹å„ç§æƒ…å†µè¿›è¡Œè®²è§£ï¼Œè®©åŒå­¦ä»¬æœ‰æ•´ä½“æ€ç»´ï¼Œå¹¶ä¸”ç†è§£åŸç†ã€‚</p></blockquote><h3 id="4-1-ä¸ƒç§å¸¸è§æƒ…å†µä¹‹123-06-38"><a href="#4-1-ä¸ƒç§å¸¸è§æƒ…å†µä¹‹123-06-38" class="headerlink" title="4-1 ä¸ƒç§å¸¸è§æƒ…å†µä¹‹123 (06:38)"></a>4-1 ä¸ƒç§å¸¸è§æƒ…å†µä¹‹123 (06:38)</h3><p>å¤šçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•çš„7ç§æƒ…å†µï¼š</p><ol><li>ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„åŒæ­¥æ–¹æ³•</li><li>ä¸¤ä¸ªçº¿ç¨‹è®¿é—®çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„åŒæ­¥æ–¹æ³•</li><li>ä¸¤ä¸ªçº¿ç¨‹è®¿é—®çš„æ˜¯synchronizedçš„é™æ€æ–¹æ³•</li><li>åŒæ—¶è®¿é—®åŒæ­¥å’ŒéåŒæ­¥æ–¹æ³•</li><li>è®¿é—®åŒä¸€ä¸ªå¯¹è±¡çš„ä¸åŒçš„æ™®é€šåŒæ­¥æ–¹æ³•</li><li>åŒæ—¶è®¿é—®é™æ€synchronizedä¸ªéé™æ€synchronizedæ–¹æ³•</li><li>æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åï¼Œä¼šé‡Šæ”¾é”</li></ol><ol><li><p>ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„åŒæ­¥æ–¹æ³•</p><p>çº¿ç¨‹åŒæ­¥ã€‚<code>SynchronizedObjectMethod3</code></p><p>å¯¹è±¡é”çš„æ™®é€šæ–¹æ³•å½¢å¼ã€‚thisé”</p></li><li><p>ä¸¤ä¸ªçº¿ç¨‹è®¿é—®çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„åŒæ­¥æ–¹æ³•</p><p>çº¿ç¨‹å¼‚æ­¥ã€‚</p></li><li><p>ä¸¤ä¸ªçº¿ç¨‹è®¿é—®çš„æ˜¯synchronizedçš„é™æ€æ–¹æ³•</p><p>çº¿ç¨‹åŒæ­¥ã€‚<code>SynchronizedClassStatic4</code></p></li></ol><h3 id="4-2-ä¸ƒç§å¸¸è§æƒ…å†µä¹‹4å’Œ5-08-21"><a href="#4-2-ä¸ƒç§å¸¸è§æƒ…å†µä¹‹4å’Œ5-08-21" class="headerlink" title="4-2 ä¸ƒç§å¸¸è§æƒ…å†µä¹‹4å’Œ5 (08:21)"></a>4-2 ä¸ƒç§å¸¸è§æƒ…å†µä¹‹4å’Œ5 (08:21)</h3><ol start="4"><li><p>åŒæ—¶è®¿é—®åŒæ­¥å’ŒéåŒæ­¥æ–¹æ³•</p><p>çº¿ç¨‹å¼‚æ­¥ã€‚<code>SynchronizedYesAndNo6</code></p><p>éåŒæ­¥æ–¹æ³•ä¸å—åˆ°å½±å“</p></li><li><p>è®¿é—®åŒä¸€ä¸ªå¯¹è±¡çš„ä¸åŒçš„æ™®é€šåŒæ­¥æ–¹æ³•</p><p>çº¿ç¨‹åŒæ­¥ã€‚<code>SynchronizedDifferentMethod7</code></p></li></ol><h3 id="4-3-ä¸ƒç§å¸¸è§æƒ…å†µä¹‹6å’Œ7-11-25"><a href="#4-3-ä¸ƒç§å¸¸è§æƒ…å†µä¹‹6å’Œ7-11-25" class="headerlink" title="4-3 ä¸ƒç§å¸¸è§æƒ…å†µä¹‹6å’Œ7 (11:25)"></a>4-3 ä¸ƒç§å¸¸è§æƒ…å†µä¹‹6å’Œ7 (11:25)</h3><ol start="6"><li><p>åŒæ—¶è®¿é—®é™æ€synchronizedä¸ªéé™æ€synchronizedæ–¹æ³•</p><p>çº¿ç¨‹å¼‚æ­¥ã€‚<code>SynchronizedStaticAndNormal8</code></p><p><code>thisé”</code>ä¸<code>*.classé”</code>ä¸æ˜¯åŒä¸€æŠŠé”</p></li><li><p>æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åï¼Œä¼šé‡Šæ”¾é”</p><p><code>SynchronizedException9</code></p><p>synchronizedä¸Lockæ¥å£ï¼š</p><ul><li>åœ¨Lockæ¥å£ä¸­ï¼Œåªè¦æ˜¯æ²¡æœ‰æ˜¾å¼æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œå³ä¾¿æŠ›å‡ºå¼‚å¸¸Lockä¹Ÿæ˜¯ä¸ä¼šé‡Šæ”¾é”çš„ã€‚</li><li>synchronizedä¸€æ—¦æŠ›å‡ºå¼‚å¸¸ä¼šè‡ªåŠ¨é‡Šæ”¾é”ã€‚</li></ul></li></ol><h3 id="4-4-7ç§æƒ…å†µæ€»ç»“-03-00"><a href="#4-4-7ç§æƒ…å†µæ€»ç»“-03-00" class="headerlink" title="4-4 7ç§æƒ…å†µæ€»ç»“ (03:00)"></a>4-4 7ç§æƒ…å†µæ€»ç»“ (03:00)</h3><p>3ç‚¹æ ¸å¿ƒæ€æƒ³ï¼š</p><ol><li><p>ä¸€æŠŠé”åªèƒ½åŒæ—¶è¢«ä¸€ä¸ªçº¿ç¨‹è·å–ï¼Œæ²¡æœ‰æ‹¿åˆ°é”çš„çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼ˆå¯¹åº”ç¬¬1ã€5ç§æƒ…å†µï¼‰</p></li><li><p>æ¯ä¸ªå®ä¾‹éƒ½å¯¹åº”æœ‰è‡ªå·±çš„ä¸€æŠŠé”(å³thisé”)ï¼Œä¸åŒå®ä¾‹ä¹‹é—´äº’ä¸å½±å“ï¼›ï¼ˆå¯¹åº”ç¬¬2ã€4ã€6ç§æƒ…å†µï¼‰</p><p>ä¾‹å¤–ï¼šé”å¯¹è±¡æ˜¯*.classä»¥åŠsynchronizedä¿®é¥°çš„äº‹staticæ–¹æ³•çš„æ—¶å€™ï¼Œæ‰€æœ‰å¯¹è±¡å…¬ç”¨åŒä¸€æŠŠé”(å³ç±»é”)ï¼ˆå¯¹åº”ç¬¬3ç§æƒ…å†µï¼‰</p></li><li><p>æ— è®ºæ˜¯æ–¹æ³•æ­£å¸¸æ‰§è¡Œå®Œæ¯•æˆ–è€…æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œéƒ½ä¼šé‡Šæ”¾é”ï¼ˆå¯¹åº”ç¬¬7ç§æƒ…å†µï¼‰</p></li></ol><p>è¡¥å……ï¼š</p><ul><li><p>synchronizedæ–¹æ³•è°ƒç”¨ésynchronizedæ–¹æ³•ï¼Œæ­¤æ—¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ</p><p>ç­”ï¼šä¸æ˜¯çš„ã€‚ä¸€æ—¦å‡ºäº†synchronizedæ–¹æ³•ï¼Œç”±äºå¦ä¸€ä¸ªæ–¹æ³•æœªè¢«synchronizedä¿®é¥°ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æ˜¯å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®çš„ã€‚</p></li></ul><h2 id="ç¬¬5ç« -Synchronizedçš„æ€§è´¨"><a href="#ç¬¬5ç« -Synchronizedçš„æ€§è´¨" class="headerlink" title="ç¬¬5ç«  Synchronizedçš„æ€§è´¨"></a>ç¬¬5ç«  Synchronizedçš„æ€§è´¨</h2><blockquote><p>é‡ç‚¹å¯¹å¯é‡å…¥æ€§ä½œæ·±å…¥è®²è§£ï¼Œå¯¹ç²’åº¦è¿›è¡Œä»£ç å±•ç¤ºã€‚</p></blockquote><ul><li>å¯é‡å…¥æ€§è´¨</li><li>ä¸å¯ä¸­æ–­æ€§è´¨</li></ul><h3 id="5-1-å¯é‡å…¥æ€§è´¨-ç†è®ºéƒ¨åˆ†-07-54"><a href="#5-1-å¯é‡å…¥æ€§è´¨-ç†è®ºéƒ¨åˆ†-07-54" class="headerlink" title="5-1 å¯é‡å…¥æ€§è´¨-ç†è®ºéƒ¨åˆ† (07:54)"></a>5-1 å¯é‡å…¥æ€§è´¨-ç†è®ºéƒ¨åˆ† (07:54)</h3><p>é”çš„ç§ç±»ï¼šè‡ªé€‰é”ã€äº’æ–¥é”ã€å¯é‡å…¥é”ï¼ˆé€’å½’é”ï¼‰ã€ä¸­æ–­é”ã€è¯»å†™é”</p><p>å¯é‡å…¥é”ï¼š<code>synchronized</code>ã€<code>ReentrantLock</code></p><p>ä»€ä¹ˆæ˜¯å¯é‡å…¥ï¼š</p><blockquote><p>æŒ‡çš„æ˜¯åŒä¸€çº¿ç¨‹çš„å¤–å±‚å‡½æ•°è·å¾—é”ä¹‹åï¼Œå†…å±‚å‡½æ•°å¯ä»¥ç›´æ¥å†æ¬¡è·å–è¯¥é”ã€‚</p></blockquote><p>å¥½å¤„ï¼š</p><blockquote><p>é¿å…æ­»é”ã€æå‡å°è£…æ€§</p></blockquote><ul><li><p>å‡è®¾æ–¹æ³•Aå’Œæ–¹æ³•Béƒ½è¢«synchronizedä¿®é¥°ï¼Œçº¿ç¨‹æ‰§è¡Œåˆ°æ–¹æ³•Aå¹¶ä¸”è·å¾—äº†è¿™æŠŠé”ã€‚æ­¤æ—¶æ–¹æ³•Aæƒ³è¦å»è°ƒç”¨æ–¹æ³•Bï¼Œç”±äºæ–¹æ³•Bä¹Ÿè¢«synchronizedä¿®é¥°ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦è·å–é”ã€‚çº¿ç¨‹åœ¨è¿™ä¸ªæ—¶å€™æ—¢æƒ³è¦è·å–é”åˆä¸æƒ³é‡Šæ”¾é”ï¼Œé€ æˆäº†æ°¸ä¹…ç­‰å¾…ï¼Œæ‰€ä»¥å½¢æˆäº†æ­»é”ã€‚</p></li><li><p>å¯é‡å…¥æ€§é¿å…äº†ä¸€æ¬¡ä¸€æ¬¡çš„è§£é”åŠ é”ã€‚</p></li></ul><p>ç²’åº¦ï¼š</p><blockquote><p>æŒ‡çš„æ˜¯åŠ é”çš„ä¸€ä¸ªèŒƒå›´ï¼ˆscopeï¼‰ã€‚çº¿ç¨‹è€Œéè°ƒç”¨ï¼ˆç”¨3ç§æƒ…å†µæ¥è¯´æ˜å’Œpthreadçš„åŒºåˆ«ï¼‰</p></blockquote><p>â€‹    <strong>synchronizedçš„ç²’åº¦ä¸ºçº¿ç¨‹</strong></p><p>â€‹    pthreadï¼ˆLinuxä¸­çš„PROCESSçº¿ç¨‹ï¼‰çš„ç²’åº¦ä¸ºè°ƒç”¨</p><p>ä»£ç éªŒè¯ï¼š</p><ol><li><p>æƒ…å†µ1:è¯æ˜åŒä¸€ä¸ªæ–¹æ³•æ˜¯å¯ä»¥é‡å…¥çš„</p></li><li><p>æƒ…å†µ2:è¯æ˜å¯é‡å…¥ä¸è¦æ±‚æ˜¯åŒä¸€ä¸ªæ–¹æ³•ï¼ˆä¸åŒæ–¹æ³•ï¼‰</p></li><li><p>æƒ…å†µ3:è¯æ˜å¯é‡å…¥ä¸è¦æ±‚æ˜¯åŒä¸€ä¸ªç±»ä¸­ï¼ˆä¸åŒç±»ï¼‰</p><p>å­ç±»é‡å†™çˆ¶ç±»çš„synchronizedæ–¹æ³•ï¼Œç„¶ååœ¨å­ç±»ä¸­åˆ©ç”¨superè°ƒç”¨çˆ¶ç±»çš„è¿™ä¸ªsynchronizedæ–¹æ³•ï¼Œå¦‚æœä¸å…·å¤‡å¯é‡å…¥æ€§ï¼Œåˆ™ä»£ç ä¼šäº§ç”Ÿæ­»é”ã€‚</p></li></ol><h3 id="5-2-å¯é‡å…¥æ€§è´¨-ä»£ç æ¼”ç¤º-10-32"><a href="#5-2-å¯é‡å…¥æ€§è´¨-ä»£ç æ¼”ç¤º-10-32" class="headerlink" title="5-2 å¯é‡å…¥æ€§è´¨-ä»£ç æ¼”ç¤º (10:32)"></a>5-2 å¯é‡å…¥æ€§è´¨-ä»£ç æ¼”ç¤º (10:32)</h3><p>è¡¥å……ï¼š</p><ul><li>é€’å½’ä¸‰è¦ç´ ï¼š<ol><li>ä¸€å®šæœ‰ä¸€ç§å¯ä»¥é€€å‡ºç¨‹åºçš„æƒ…å†µ</li><li>æ€»æ˜¯åœ¨å°è¯•å°†ä¸€ä¸ªé—®é¢˜åŒ–ç®€åˆ°æ›´å°çš„è§„æ¨¡</li><li>çˆ¶é—®é¢˜ä¸å­é—®é¢˜ä¸èƒ½æœ‰é‡å çš„éƒ¨åˆ†</li></ol></li></ul><ol><li><p>æƒ…å†µ1:è¯æ˜åŒä¸€ä¸ªæ–¹æ³•æ˜¯å¯ä»¥é‡å…¥çš„</p><pre><code class="java">/** * å¯é‡å…¥ç²’åº¦æµ‹è¯•ï¼šé€’å½’è°ƒç”¨æœ¬æ–¹æ³• */public class SynchronizedRecursion10 {    int a = 0;    public static void main(String[] args) {        SynchronizedRecursion10 synchronizedRecursion10 = new SynchronizedRecursion10();        synchronizedRecursion10.method1();    }    private synchronized void method1() {        System.out.println(&quot;this is method1, a = &quot; + a);        if (a == 0) {            a++;            method1();        }    }}</code></pre></li><li><p>æƒ…å†µ2:è¯æ˜å¯é‡å…¥ä¸è¦æ±‚æ˜¯åŒä¸€ä¸ªæ–¹æ³•ï¼ˆä¸åŒæ–¹æ³•ï¼‰</p><pre><code class="java">/** * å¯é‡å…¥ç²’åº¦æµ‹è¯•ï¼šè°ƒç”¨ç±»å†…å¦å¤–çš„æ–¹æ³• */public class SynchronizedOtherMethod11 {    public static void main(String[] args) {        SynchronizedOtherMethod11 synchronizedOtherMethod11 = new SynchronizedOtherMethod11();        synchronizedOtherMethod11.method1();    }    public synchronized void method1() {        System.out.println(&quot;I&#39;m method1&quot;);        method2();    }    private synchronized void method2() {        System.out.println(&quot;I&#39;m method2&quot;);    }}</code></pre></li><li><p>æƒ…å†µ3:è¯æ˜å¯é‡å…¥ä¸è¦æ±‚æ˜¯åŒä¸€ä¸ªç±»ä¸­ï¼ˆä¸åŒç±»ï¼‰</p><pre><code class="java">/** * å¯é‡å…¥ç²’åº¦æµ‹è¯•ï¼šè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³• */public class SynchronizedSuperClass12 {    public synchronized void doSomething() {        System.out.println(&quot;æˆ‘æ˜¯çˆ¶ç±»æ–¹æ³•&quot;);    }}class TestClass extends SynchronizedSuperClass12 {    public static void main(String[] args) {        TestClass t = new TestClass();        t.doSomething();    }    @Override    public synchronized void doSomething() {        System.out.println(&quot;æˆ‘æ˜¯å­ç±»æ–¹æ³•&quot;);        super.doSomething();    }}</code></pre></li></ol><h3 id="5-3-ä¸å¯ä¸­æ–­æ€§è´¨-02-10"><a href="#5-3-ä¸å¯ä¸­æ–­æ€§è´¨-02-10" class="headerlink" title="5-3 ä¸å¯ä¸­æ–­æ€§è´¨ (02:10)"></a>5-3 ä¸å¯ä¸­æ–­æ€§è´¨ (02:10)</h3><p>ä¸€æ—¦é”å·²ç»è¢«å…¶ä»–çº¿ç¨‹è·å¾—ï¼Œå¦‚æœå½“å‰çº¿ç¨‹æƒ³è¦è·å¾—é”ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹åªèƒ½é€‰æ‹©ç­‰å¾…æˆ–è€…é˜»å¡ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹é‡Šæ”¾è¿™ä¸ªé”ã€‚å¦‚æœå…¶ä»–çº¿ç¨‹æ°¸è¿œä¸é‡Šæ”¾é”ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹åªèƒ½æ°¸è¿œåœ°ç­‰å¾…ä¸‹å»ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>JUCåŒ…</code>ä¸‹çš„<code>Lock</code>ç±»ï¼Œå¯ä»¥æ‹¥æœ‰ä¸­æ–­çš„èƒ½åŠ›ã€‚ç¬¬ä¸€ç‚¹ï¼Œå¦‚æœæˆ‘è§‰å¾—æˆ‘ç­‰çš„æ—¶é—´å¤ªé•¿äº†ï¼Œæœ‰æƒä¸­æ–­ç°åœ¨å·²ç»è·å–åˆ°é”çš„çº¿ç¨‹çš„æ‰§è¡Œï¼›ç¬¬äºŒç‚¹ï¼Œå¦‚æœæˆ‘è§‰å¾—æˆ‘ç­‰å¾…çš„æ—¶é—´å¤ªé•¿äº†ä¸æƒ³ç­‰å¾…äº†ï¼Œä¹Ÿå¯ä»¥é€€å‡ºã€‚</p><p><code>Lockç±»</code>ç›¸æ¯”<code>synchronized</code>æ›´ä¸ºçµæ´»ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„æ›´å¤šçš„ç‚¹ï¼Œåœ¨ç¼–ç ä¸­é¿å…å‡ºé”™ã€‚</p><h2 id="ç¬¬6ç« -æ·±å…¥åŸç†"><a href="#ç¬¬6ç« -æ·±å…¥åŸç†" class="headerlink" title="ç¬¬6ç«  æ·±å…¥åŸç†"></a>ç¬¬6ç«  æ·±å…¥åŸç†</h2><blockquote><p>çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œå­¦ä¹ åŸç†ã€‚å­¦ä¹ monitoræŒ‡ä»¤ã€å¯é‡å…¥å’Œå¯è§æ€§åŸç†</p></blockquote><ul><li>åŠ é”å’Œé‡Šæ”¾é”çš„åŸç†ï¼šç°è±¡ã€æ—¶æœºã€æ·±å…¥JVMæŸ¥çœ‹å­—èŠ‚ç </li><li>å¯é‡å…¥åŸç†ï¼šåŠ é”æ¬¡æ•°è®¡æ•°å™¨</li><li>ä¿è¯å¯è§æ€§çš„åŸç†ï¼šå†…å­˜æ¨¡å‹</li></ul><h3 id="6-1-åŠ é”å’Œé‡Šæ”¾é”çš„åŸç†-08-55"><a href="#6-1-åŠ é”å’Œé‡Šæ”¾é”çš„åŸç†-08-55" class="headerlink" title="6-1 åŠ é”å’Œé‡Šæ”¾é”çš„åŸç† (08:55)"></a>6-1 åŠ é”å’Œé‡Šæ”¾é”çš„åŸç† (08:55)</h3><ol><li><p>ç°è±¡ï¼šæ¯ä¸€ä¸ªç±»çš„å®ä¾‹å¯¹åº”ä¸€æŠŠé”ï¼Œæ¯ä¸€ä¸ªsynchronizedæ–¹æ³•éƒ½å¿…é¡»è·å–è°ƒç”¨è¯¥æ–¹æ³•çš„ç±»çš„å®ä¾‹çš„é”æ–¹èƒ½æ‰§è¡Œï¼Œå¦åˆ™çº¿ç¨‹ä¼šé˜»å¡ã€‚æ–¹æ³•ä¸€æ—¦æ‰§è¡Œå°±ä¼šç‹¬å è¿™æŠŠé”ç›´åˆ°è¯¥æ–¹æ³•è¿”å›æˆ–è€…æŠ›å‡ºå¼‚å¸¸æ‰å°†é”é‡Šæ”¾ã€‚é‡Šæ”¾é”ä¹‹åï¼Œå…¶ä»–é˜»å¡çº¿ç¨‹æ‰æœ‰æœºä¼šè·å–åˆ°é”ï¼Œè¿›å…¥åˆ°å¯æ‰§è¡ŒçŠ¶æ€ã€‚</p></li><li><p>è·å–å’Œé‡Šæ”¾é”çš„æ—¶æœºï¼šå†…ç½®é”ï¼ˆç›‘è§†å™¨é”ï¼ŒMonitorLockï¼‰</p></li><li><p>ç­‰ä»·ä»£ç ï¼š</p><pre><code class="java">/** * synchronizedé”ä¸locké” */public class SynchronizedToLock13 {    public static void main(String[] args) {        SynchronizedToLock13 s = new SynchronizedToLock13();        s.method1();        s.method2();    }    Lock lock = new ReentrantLock();    public synchronized void method1() {        System.out.println(&quot;æˆ‘æ˜¯Synchronizedå½¢å¼çš„é”ã€‚&quot;);    }    public void method2() {        lock.lock();        try {            System.out.println(&quot;æˆ‘æ˜¯lockå½¢å¼çš„é”ã€‚&quot;);        } finally {            lock.unlock();        }    }}</code></pre></li><li><p>æ·±å…¥JVMçœ‹å­—èŠ‚ç ï¼šåç¼–è¯‘ã€monitoræŒ‡ä»¤</p></li></ol><h3 id="6-2-åç¼–è¯‘çœ‹monitoræŒ‡ä»¤-12-06"><a href="#6-2-åç¼–è¯‘çœ‹monitoræŒ‡ä»¤-12-06" class="headerlink" title="6-2 åç¼–è¯‘çœ‹monitoræŒ‡ä»¤ (12:06)"></a>6-2 åç¼–è¯‘çœ‹monitoræŒ‡ä»¤ (12:06)</h3><p>æ¦‚å†µï¼šsynchronizedä½¿ç”¨çš„é”æ˜¯åœ¨Javaå¯¹è±¡å¤´é‡Œçš„ä¸€ä¸ªå­—æ®µï¼Œè¡¨æ˜æ˜¯å¦è¢«é”ä½ã€‚</p><p>synchronizedçš„å®ç°åŸç†ï¼šè¿›å…¥é”å’Œé‡Šæ”¾é”æ˜¯åŸºäºmonitorå¯¹è±¡æ¥å®ç°åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥ä»£ç å—çš„</p><p>monitorå¯¹è±¡æœ€ä¸»è¦æ˜¯ä¸¤ä¸ªæŒ‡ä»¤ï¼š</p><ul><li><p>monitorenterï¼šæ’å…¥åˆ°åŒæ­¥ä»£ç å—å¼€å§‹çš„ä½ç½®</p></li><li><p>monitorexitï¼šæ’å…¥åˆ°æ–¹æ³•ç»“æŸå’Œé€€å‡ºçš„æ—¶å€™</p><p>monitorenterä¸ªæ•° &lt;= monitorexitä¸ªæ•°</p></li></ul><p>è¡¥å……ï¼š</p><ul><li>Javaå¯¹è±¡å¤´</li><li>classç±»æ–‡ä»¶çš„ç»“æ„</li></ul><p>å¦‚ä½•åç¼–è¯‘ï¼š</p><ol><li><p>ç¼–å†™Javaä»£ç </p><pre><code class="java">/** * åç¼–è¯‘å­—èŠ‚ç  */public class Decompilation14 {    private final Object object = new Object();    public void insert(Thread thread) {        synchronized (object) {        }    }}</code></pre></li><li><p>ç¼–è¯‘ä¸ºå­—èŠ‚ç æ–‡ä»¶</p><pre><code class="shell">javac Decompilation14.java</code></pre></li><li><p>åç¼–è¯‘/åæ±‡ç¼–</p><pre><code class="shell">javap -verbose Decompilation14</code></pre><p><code>-verbose</code>ï¼šæ‰“å°æ‰€æœ‰ä¿¡æ¯</p></li></ol><p>Monitorenterå’ŒMonitorexitæŒ‡ä»¤</p><ul><li>monitorenterå’Œmonitorexitåœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šè®©å¯¹è±¡çš„é”è®¡æ•°å™¨åŠ ä¸€æˆ–å‡ä¸€ï¼Œå’Œæ“ä½œç³»ç»Ÿçš„PVæ“ä½œéå¸¸ç±»ä¼¼ã€‚</li><li>æ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¸ä¸€ä¸ªmonitorç›¸å…³è”ï¼Œä¸€ä¸ªmonitorçš„locké”åœ¨åŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è·å–</li><li>ä¸€ä¸ªçº¿ç¨‹åœ¨å°è¯•è·å¾—ä¸è¿™ä¸ªå¯¹è±¡ç›¸å…³è”çš„monitorçš„æ‰€æœ‰æƒæ—¶ï¼Œä¼šå‘ç”Ÿä¸‰ç§æƒ…å†µï¼š<ol><li>å¦‚æœmonitorè®¡æ•°å™¨ä¸º0ï¼Œæ„å‘³ç€ç›®å‰è¿˜æ²¡æœ‰è¢«è·å¾—ï¼Œçº¿ç¨‹ä¼šç«‹åˆ»è·å¾—é”ï¼Œç„¶åæŠŠè®¡æ•°å™¨åŠ 1</li><li>å¦‚æœmonitorå·²ç»æ‹¿åˆ°é”çš„æ‰€æœ‰æƒï¼Œç„¶ååˆé‡å…¥ï¼Œä¼šå¯¼è‡´é”è®¡æ•°å™¨ç´¯åŠ </li><li>å¦‚æœmonitorå·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œæ­¤æ—¶çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°monitorè®¡æ•°å™¨å˜ä¸º0æ‰ä¼šå†æ¬¡å»å°è¯•è·å–é”</li></ol></li><li>monitorexitï¼šé‡Šæ”¾å¯¹äºmonitorçš„æ‰€æœ‰æƒï¼ˆå‰ææ˜¯å·²ç»æ‹¥æœ‰é”çš„æ‰€æœ‰æƒï¼‰ã€‚é‡Šæ”¾æ‰€æœ‰æƒå°±æ˜¯å°†monitorè®¡æ•°å™¨å‡ä¸€ï¼Œå¦‚æœä¸º0åˆ™å½“å‰çº¿ç¨‹ä¸å†æ‹¥æœ‰monitorçš„æ‰€æœ‰æƒï¼ŒåŒæ—¶é˜»å¡çš„çº¿ç¨‹ä¼šå†æ¬¡å°è¯•è·å–é”ï¼›å¦‚æœä¸ä¸º0åˆ™è¯´æ˜ä¸Šä¸€æ­¥ä¸ºé‡å…¥ï¼Œå½“å‰çº¿ç¨‹ä¾ç„¶æŒæœ‰monitorçš„æ‰€æœ‰æƒ</li></ul><h3 id="6-3-å¯é‡å…¥åŸç†-01-50"><a href="#6-3-å¯é‡å…¥åŸç†-01-50" class="headerlink" title="6-3 å¯é‡å…¥åŸç† (01:50)"></a>6-3 å¯é‡å…¥åŸç† (01:50)</h3><p>åŠ é”æ¬¡æ•°è®¡æ•°å™¨</p><ul><li>JVMè´Ÿè´£è·Ÿè¸ªå¯¹è±¡è¢«åŠ é”çš„æ¬¡æ•°</li><li>çº¿ç¨‹ç¬¬ä¸€æ¬¡ç»™å¯¹è±¡åŠ é”çš„æ—¶å€™ï¼Œè®¡æ•°å™¨å˜ä¸º1ï¼›æ¯å½“è¿™ä¸ª<strong>ç›¸åŒçš„çº¿ç¨‹</strong>åœ¨æ­¤å¯¹è±¡ä¸Šå†æ¬¡è·å¾—é”æ—¶ï¼Œè®¡æ•°å™¨ä¼šé€’å¢</li><li>æ¯å½“ä»»åŠ¡ç¦»å¼€æ—¶ï¼Œè®¡æ•°å™¨é€’å‡ï¼Œå½“è®¡æ•°å™¨ä¸º0çš„æ—¶å€™ï¼Œé”è¢«å®Œå…¨é‡Šæ”¾</li></ul><h3 id="6-4-å¯è§æ€§åŸç†-03-34"><a href="#6-4-å¯è§æ€§åŸç†-03-34" class="headerlink" title="6-4 å¯è§æ€§åŸç† (03:34)"></a>6-4 å¯è§æ€§åŸç† (03:34)</h3><ul><li><p>Javaå†…å­˜æ¨¡å‹ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8qrch253bj30um0qcjzl.jpg" alt="Javaå†…å­˜æ¨¡å‹" style="zoom:35%;"/><p>çº¿ç¨‹ä½¿ç”¨çš„å†…å­˜é€Ÿåº¦è¦æ¯”ä¸»å­˜æ‰€ä½¿ç”¨çš„å†…å­˜è¦å¿«ã€‚</p></li><li><p>çº¿ç¨‹Aå‘çº¿ç¨‹Bå‘é€æ•°æ®çš„æ­¥éª¤ï¼š</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8qre9xvtwj30xe0pon3m.jpg" alt="çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡" style="zoom:35%;"/></li></ul><h2 id="ç¬¬7ç« -Synchronizedçš„ç¼ºé™·"><a href="#ç¬¬7ç« -Synchronizedçš„ç¼ºé™·" class="headerlink" title="ç¬¬7ç«  Synchronizedçš„ç¼ºé™·"></a>ç¬¬7ç«  Synchronizedçš„ç¼ºé™·</h2><blockquote><p>å¯¹Synchronizedå…³é”®å­—çš„ç¼ºé™·è¿›è¡Œæ¢³ç†</p></blockquote><h3 id="7-1-Synchronizedç¼ºé™·-09-02"><a href="#7-1-Synchronizedç¼ºé™·-09-02" class="headerlink" title="7-1 Synchronizedç¼ºé™· (09:02)"></a>7-1 Synchronizedç¼ºé™· (09:02)</h3><ol><li><p>æ•ˆç‡ä½ï¼šé”çš„é‡Šæ”¾æƒ…å†µå°‘ã€è¯•å›¾è·å¾—é”æ—¶ä¸èƒ½è®¾å®šè¶…æ—¶ã€ä¸èƒ½ä¸­æ–­ä¸€ä¸ªæ­£åœ¨è¯•å›¾è·å¾—é”çš„çº¿ç¨‹</p><p>åœ¨IOæ“ä½œã€sleep()ç­‰ä¸ä¼šä¸»åŠ¨é‡Šæ”¾é”</p><p>æ°¸ä¹…ç­‰å¾…åˆ«çš„çº¿ç¨‹é‡Šæ”¾é”ï¼Œå†è·å–é”ã€‚ä¸åˆ°å—å¢™ä¸å›å¤´ï¼Œä¸åˆ°é»„æ²³å¿ƒä¸æ­»</p><p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨Locké”</p></li><li><p>ä¸å¤Ÿçµæ´»ï¼šåŠ é”å’Œé‡Šæ”¾é”çš„æ—¶æœºå•ä¸€ï¼Œæ¯ä¸ªé”ä»…æœ‰å•ä¸€çš„æ¡ä»¶ï¼ˆæŸä¸ªå¯¹è±¡ï¼‰ï¼Œå¯èƒ½æ˜¯ä¸å¤Ÿçš„ã€‚</p><p>è¯»å†™é”åœ¨è¯»æ“ä½œæ—¶ä¸ä¼šåŠ é”ï¼Œåœ¨å†™æ“ä½œçš„æ—¶å€™æ‰ä¼šåŠ é”</p><p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨è¯»å†™é”</p></li><li><p>æ— æ³•çŸ¥é“æ˜¯å¦æˆåŠŸè·å–åˆ°é”</p><p>Locké”å¯ä»¥åšå°è¯•åŠ é”ã€‚åˆ†æˆåŠŸã€å¤±è´¥çš„æƒ…å†µ</p></li></ol><pre><code class="java">/** * å±•ç¤ºLockçš„æ–¹æ³• */public class LockExample15 {    public static void main(String[] args) throws InterruptedException {        Lock lock = new ReentrantLock();        lock.lock();        lock.unlock();        boolean tryLock1 = lock.tryLock();        boolean tryLock2 = lock.tryLock(10, TimeUnit.SECONDS);        Condition condition = lock.newCondition();    }}</code></pre><h2 id="ç¬¬8ç« -å¸¸è§é¢è¯•é¢˜"><a href="#ç¬¬8ç« -å¸¸è§é¢è¯•é¢˜" class="headerlink" title="ç¬¬8ç«  å¸¸è§é¢è¯•é¢˜"></a>ç¬¬8ç«  å¸¸è§é¢è¯•é¢˜</h2><blockquote><p>å¯¹å¸¸è§é¢è¯•é¢˜è¿›è¡Œæ€»ç»“</p></blockquote><h3 id="8-1-å¸¸è§é¢è¯•é—®é¢˜-07-01"><a href="#8-1-å¸¸è§é¢è¯•é—®é¢˜-07-01" class="headerlink" title="8-1 å¸¸è§é¢è¯•é—®é¢˜ (07:01)"></a>8-1 å¸¸è§é¢è¯•é—®é¢˜ (07:01)</h3><ol><li><p>ä½¿ç”¨æ³¨æ„ç‚¹ï¼šé”å¯¹è±¡ä¸èƒ½ä¸ºç©ºã€ä½œç”¨åŸŸä¸å®œè¿‡å¤§ã€é¿å…æ­»é”</p><ul><li><p>é”å¯¹è±¡ä¸èƒ½ä¸ºç©ºï¼šé”å¯¹è±¡å¿…é¡»æ˜¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œä¸èƒ½æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œéœ€ç”±newæˆ–è€…å…¶ä»–æ–¹æ³•åˆ›å»ºã€‚é”çš„ä¿¡æ¯éƒ½ä¿å­˜åœ¨å¯¹è±¡å¤´ä¸­çš„ã€‚</p></li><li><p>ä½œç”¨åŸŸä¸å®œè¿‡å¤§ï¼šä½œç”¨åŸŸå³synchronizedæ‰€åŒ…è£¹çš„èŒƒå›´ï¼ŒèŒƒå›´è¿‡å¤§ä¼šé™ä½ç¨‹åºè¿è¡Œé€Ÿåº¦ã€‚</p></li><li><p>é¿å…æ­»é”ï¼š</p><pre><code class="java">synchronized (instnace1) {    synchronized (instnace2) {}}synchronized (instnace2) {    synchronized (instnace1) {}}</code></pre></li></ul></li><li><p>å¦‚ä½•é€‰æ‹©Lockå’Œsynchronizedå…³é”®å­—ï¼Ÿ</p><ul><li>å¦‚æœå¯ä»¥ï¼Œå°½é‡éƒ½ä¸ä½¿ç”¨ã€‚è€Œæ˜¯ä½¿ç”¨<code>java.util.concurrent</code>åŒ…ä¸‹çš„åŸå­ç±»</li><li>å¦‚æœsynchronizedé€‚ç”¨ï¼Œå°±ä¼˜å…ˆä½¿ç”¨synchronizedã€‚å‡å°‘ä»£ç é‡ã€‚</li><li>ç‰¹åˆ«éœ€è¦æ‰ä½¿ç”¨Lockã€Condition</li></ul></li><li><p>å¤šçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•çš„å„ç§å…·ä½“æƒ…å†µ</p><p>ç¬¬å››ç« ã€‚7ç§å…·ä½“æƒ…å†µ</p></li></ol><h2 id="ç¬¬9ç« -æ€è€ƒé¢˜"><a href="#ç¬¬9ç« -æ€è€ƒé¢˜" class="headerlink" title="ç¬¬9ç«  æ€è€ƒé¢˜"></a>ç¬¬9ç«  æ€è€ƒé¢˜</h2><blockquote><p>ç”±ç‚¹åˆ°é¢ï¼Œè¿›ä¸€æ­¥å¼•å‘åŒå­¦ä»¬çš„æ·±å…¥æ€è€ƒ</p></blockquote><h3 id="9-1-æ€è€ƒé¢˜-05-47"><a href="#9-1-æ€è€ƒé¢˜-05-47" class="headerlink" title="9-1 æ€è€ƒé¢˜ (05:47)"></a>9-1 æ€è€ƒé¢˜ (05:47)</h3><ol><li><p>å¤šä¸ªçº¿ç¨‹ç­‰å¾…åŒä¸€ä¸ªsynchronizedé”çš„æ—¶å€™ï¼ŒJVMå¦‚ä½•é€‰æ‹©ä¸‹ä¸€ä¸ªè·å–é”çš„æ˜¯å“ªä¸€ä¸ªçº¿ç¨‹ï¼Ÿç”¨çš„æ˜¯ä»€ä¹ˆç®—æ³•å‘¢ï¼Ÿ</p><p>æ¶‰åŠåˆ°å†…éƒ¨é”è°ƒåº¦æœºåˆ¶ã€‚å¯èƒ½æ˜¯è¿è¡Œæ—¶é—´æœ€çŸ­çš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç­‰å¾…æ—¶é—´æœ€é•¿çš„ï¼Œç”šè‡³æ˜¯éšæœºçš„ã€‚è¿™å’Œä¸åŒJVMçš„ç‰ˆæœ¬å’Œå…·ä½“å®ç°éƒ½æœ‰å…³ç³»ï¼Œæ‰€ä»¥ä¸èƒ½ä¾èµ–å…·ä½“ç®—æ³•ã€‚åªèƒ½åˆ¤å®šä¸ºéšæœºçš„ã€ä¸å¯æ§åˆ¶çš„ã€‚</p></li><li><p>synchronizedä½¿å¾—åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¿è¡Œï¼Œæ€§èƒ½è¾ƒå·®ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥æå‡æ€§èƒ½ï¼Ÿ</p><ul><li>ä¼˜åŒ–ä½¿ç”¨èŒƒå›´ï¼Œä¸å®œèŒƒå›´è¿‡å¤§ã€‚ä¸´ç•ŒåŒºåœ¨ç¬¦åˆè¦æ±‚çš„æƒ…å†µä¸‹å°½å¯èƒ½çš„å°ã€‚</li><li>ä½¿ç”¨å…¶ä»–ç±»å‹çš„é”ï¼Œæ¯”å¦‚è¯´è¯»å†™é”</li></ul></li><li><p>æˆ‘æƒ³æ›´çµæ´»åœ°æ§åˆ¶é”çš„è·å–å’Œé‡Šæ”¾ï¼ˆç°åœ¨é‡Šæ”¾é”çš„æ—¶æœºéƒ½è¢«è§„å®šæ­»äº†ï¼‰ï¼Œæ€ä»¬åŠï¼Ÿ</p><p>å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªLockæ¥å£ã€‚å‚è€ƒå·²æœ‰çš„ä¼˜ç§€çš„é”ã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯é”çš„å‡çº§ã€é™çº§ï¼Ÿä»€ä¹ˆæ˜¯JVMé‡Œçš„åæ–œé”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ï¼Ÿ</p><p>éšJVMç‰ˆæœ¬çš„æé«˜ï¼Œsynchronizedå…³é”®å­—çš„æ€§èƒ½å¾—åˆ°äº†æ˜¾è‘—æå‡</p></li></ol><h2 id="ç¬¬10ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬10ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬10ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬10ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>å¯¹è¯¾ç¨‹è¿›è¡Œæ€»ç»“æ¢³ç†ï¼Œå±•æœ›ã€‚</p></blockquote><h3 id="10-1-è¯¾ç¨‹æ€»ç»“å’Œå±•æœ›-13-35"><a href="#10-1-è¯¾ç¨‹æ€»ç»“å’Œå±•æœ›-13-35" class="headerlink" title="10-1 è¯¾ç¨‹æ€»ç»“å’Œå±•æœ› (13:35)"></a>10-1 è¯¾ç¨‹æ€»ç»“å’Œå±•æœ› (13:35)</h3><p>ä¸€å¥è¯ä»‹ç»synchronized</p><blockquote><p>JVMä¼šè‡ªåŠ¨é€šè¿‡ä½¿ç”¨monitoræ¥åŠ é”å’Œè§£é”ï¼Œä¿è¯äº†åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æ‰§è¡ŒæŒ‡å®šä»£ç ï¼Œä»è€Œä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼ŒåŒæ—¶å…·æœ‰å¯é‡å…¥å’Œä¸å¯ä¸­æ–­çš„æ€§è´¨ã€‚</p></blockquote><p>æ€ç»´å¯¼å›¾ï¼šï¼ˆç™¾åº¦è„‘å›¾,åˆ«ç™»å½•å¦åˆ™æ²¡æœ‰æƒé™ï¼‰</p><p><a href="https://naotu.baidu.com/file/12e7658471786e71e69cf57c9316a3de" target="_blank" rel="noopener">https://naotu.baidu.com/file/12e7658471786e71e69cf57c9316a3de</a></p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8rzca8dncj31lx0u01kx.jpg" alt="Synchronizedå…³é”®å­—" style="zoom:100%;" /><p><strong>å®æˆ˜è¯¾ï¼šJavaå¹¶å‘æ ¸å¿ƒçŸ¥è¯†ä½“ç³»ç²¾è®²</strong></p><blockquote><p><a href="https://coding.imooc.com/class/362.html" target="_blank" rel="noopener">https://coding.imooc.com/class/362.html</a></p></blockquote><ul><li>å®ç°å¤šçº¿ç¨‹çš„æ–¹å¼åˆ°åº•æ˜¯1ç§ã€2ç§è¿˜æ˜¯4ç§ï¼Ÿï¼šæœ¬è´¨åªæœ‰1ç§æ–¹å¼ï¼Œå®ç°æ‰§è¡Œå†…å®¹æœ‰2ç§æ–¹å¼ï¼Œè€ŒåŒ…è£…åçš„å¤–åœ¨è¡¨ç°å½¢å¼æœ‰å¤šç§å½¢å¼</li><li>å¯åŠ¨çº¿ç¨‹çš„æ­£ç¡®å’Œé”™è¯¯çš„æ–¹å¼ï¼šåŒ…å«<code>start()</code>å’Œ<code>run()</code>çš„æºç åˆ†æã€å¯¹æ¯”</li><li>åœæ­¢çº¿ç¨‹çš„æ­£ç¡®æ–¹å¼ï¼šåŒ…å«ä¸ºä»€ä¹ˆå¹¿ä¸ºæµä¼ çš„volatile booleanæ˜¯é”™è¯¯çš„ï¼Ÿå¦‚ä½•åšåˆ°3æ–¹é…åˆï¼Œå®Œç¾å®ç°çº¿ç¨‹çš„åœæ­¢ï¼Ÿ</li><li>çº¿ç¨‹çš„6ä¸ªçŠ¶æ€ã€çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼šä¸€å›¾è¯´æ¸…çº¿ç¨‹çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€ç©¶ç«Ÿä»€ä¹ˆå«â€œçº¿ç¨‹é˜»å¡â€ï¼Ÿ</li><li>å¹¶å‘é‡è¦æ–¹æ³•è¯¦è§£ï¼šåŒ…å«<code>wait()</code>ã€<code>notify()</code>ã€<code>notifyAll()</code>ã€<code>sleep()</code>ã€<code>join()</code>ã€<code>yield()</code>ã€<code>Thread.currentThread()</code>ç­‰</li><li>çº¿ç¨‹é‡è¦å±æ€§ï¼šåŒ…å«å®ˆæŠ¤çº¿ç¨‹å’Œæ™®é€šçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆä¸åº”è¯¥åˆ©ç”¨çº¿ç¨‹ä¼˜å…ˆçº§è®¾è®¡ç¨‹åºï¼Ÿ</li><li>çº¿ç¨‹çš„æœªæ•è·å¼‚å¸¸UncaughtExceptionåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿæœ‰å“ªäº›è§£å†³æ–¹æ¡ˆï¼Ÿ</li><li>çº¿ç¨‹å®‰å…¨ï¼šåŒ…å«å¦‚ä½•æ‰¾å‡º<code>a++</code>å…·ä½“æ˜¯åœ¨å“ªé‡Œå‡ºçš„é”™ï¼Ÿ3ç±»çº¿ç¨‹ä¸å®‰å…¨çš„ç°è±¡ã€4ç§éœ€è¦é¢å¤–è€ƒè™‘çº¿ç¨‹å®‰å…¨çš„åœºæ™¯</li><li>Javaå†…å­˜æ¨¡å‹è¯¦è§£â€”â€”åº•å±‚åŸç†ï¼šé‡æ’åºã€å¯è§æ€§ã€åŸå­æ€§ã€happens-beforeã€volatile</li><li>æ­»é”è¯¦è§£ï¼šå¿…ç„¶æ­»é”çš„ä¾‹å­ã€å‘ç”Ÿæ­»é”çš„4ä¸ªæ¡ä»¶ã€å¦‚ä½•ç”¨jstackå‘½ä»¤å’Œä»£ç è¿™ä¸¤ç§æ–¹å¼å®šä½æ­»é”ï¼Ÿä¿®å¤æ­»é”çš„3ç§æ–¹æ¡ˆã€å®é™…å·¥ç¨‹ä¸­å¦‚ä½•é¿å…æ­»é”ï¼Ÿ</li><li>å½©è›‹ï¼šå¦‚ä½•ä»å®è§‚å’Œå¾®è§‚ä¸¤ä¸ªæ–¹é¢æ¥æé«˜æŠ€æœ¯ï¼Ÿæé«˜æŠ€æœ¯çš„é€”å¾„ï¼Ÿå·¥ä½œä¸­ä¸šåŠ¡ç¼ èº«ï¼Œå¦‚ä½•åœ¨ä¸šåŠ¡å¼€å‘ä¸­å¾—åˆ°æ›´å¤šæˆé•¿ï¼Ÿ</li><li>å¸¸è§é¢è¯•é—®é¢˜â€”â€”é…æœ‰æ–‡æ¡£æ€»ç»“</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>352-ç»†è¯´Javaå¤šçº¿ç¨‹ä¹‹å†…å­˜å¯è§æ€§</title>
      <link href="/imooc/352-volatile/"/>
      <url>/imooc/352-volatile/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/352" target="_blank" rel="noopener">https://www.imooc.com/learn/352</a></p><p>ç®€ä»‹ï¼šæœ¬è¯¾ç¨‹å¸¦é¢†å¤§å®¶æ·±å±‚æ¬¡å­¦ä¹ Javaä¸­çš„å†…å­˜å¯è§æ€§ã€Javaå†…å­˜æ¨¡å‹ã€æŒ‡ä»¤é‡æ’åºã€as-if-serialè¯­ä¹‰ç­‰å¤šçº¿ç¨‹ä¸­åå‘åº•å±‚çš„ä¸€äº›çŸ¥è¯†ï¼Œä»¥åŠsynchronizedå’Œvolatileå®ç°å†…å­˜å¯è§æ€§çš„åŸç†å’Œæ–¹æ³•ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾ç¨‹ç®€ä»‹"><a href="#ç¬¬1ç« -è¯¾ç¨‹ç®€ä»‹" class="headerlink" title="ç¬¬1ç«  è¯¾ç¨‹ç®€ä»‹"></a>ç¬¬1ç«  è¯¾ç¨‹ç®€ä»‹</h2><blockquote><p>ä»‹ç»è¯¾ç¨‹ç›®æ ‡å’Œå­¦ä¹ å†…å®¹</p></blockquote><p>å¤šçº¿ç¨‹-æ•°æ®äº‰ç”¨-å†…å­˜å¯è§æ€§</p><ol><li>å…±äº«å˜é‡åœ¨çº¿ç¨‹é—´çš„å¯è§æ€§</li><li><code>synchronized</code>å®ç°å¯è§æ€§</li><li><code>volatile</code>å®ç°å¯è§æ€§<ul><li>æŒ‡ä»¤é‡æ’åº</li><li><code>as-if-serial</code>è¯­ä¹‰</li><li><code>volatile</code>ä½¿ç”¨æ³¨æ„äº‹é¡¹</li></ul></li><li><code>synchronized</code>å’Œ<code>volatile</code>æ¯”è¾ƒ</li></ol><h2 id="ç¬¬2ç« -å¯è§æ€§ä»‹ç»"><a href="#ç¬¬2ç« -å¯è§æ€§ä»‹ç»" class="headerlink" title="ç¬¬2ç«  å¯è§æ€§ä»‹ç»"></a>ç¬¬2ç«  å¯è§æ€§ä»‹ç»</h2><blockquote><p>æœ¬ç« è®²è§£Javaå†…å­˜æ¨¡å‹ï¼Œå¯è§æ€§çš„æ¦‚å¿µå’Œå¯è§æ€§å®ç°çš„åŸç†</p></blockquote><h3 id="2-1-å¯è§æ€§ä»‹ç»"><a href="#2-1-å¯è§æ€§ä»‹ç»" class="headerlink" title="2-1 å¯è§æ€§ä»‹ç»"></a>2-1 å¯è§æ€§ä»‹ç»</h3><ol><li><p>å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡å€¼çš„ä¿®æ”¹ï¼Œèƒ½å¤ŸåŠæ—¶åœ°è¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°ã€‚</p></li><li><p>å…±äº«å˜é‡ï¼šå¦‚æœä¸€ä¸ªå˜é‡åœ¨å¤šä¸ªçº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­éƒ½å­˜åœ¨å‰¯æœ¬ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å°±æ˜¯è¿™å‡ ä¸ªçº¿ç¨‹çš„å…±äº«å˜é‡ã€‚</p></li><li><p>çº¿ç¨‹çš„å·¥ä½œå†…å­˜ï¼š<code>Java</code>å†…å­˜æŠ½è±¡å‡ºæ¥çš„æ¦‚å¿µ</p></li><li><p><code>Java</code>å†…å­˜æ¨¡å‹ï¼ˆ<code>JMM</code>ï¼‰</p><p> <code>Java</code>å†…å­˜æ¨¡å‹ï¼ˆ<code>Java Memory Model</code>ï¼‰æè¿°äº†<code>Java</code>ç¨‹åºä¸­å„ç§å˜é‡ï¼ˆçº¿ç¨‹å…±äº«å˜é‡ï¼‰çš„è®¿é—®è§„åˆ™ï¼Œä»¥åŠåœ¨<code>JVM</code>ä¸­å°†å˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­è¯»å–å‡ºå˜é‡è¿™æ ·çš„åº•å±‚ç»†èŠ‚ã€‚</p></li><li><p>æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­</p><p> æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å·¥ä½œå†…å­˜ï¼Œé‡Œé¢ä¿å­˜è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å˜é‡çš„å‰¯æœ¬ï¼ˆä¸»å†…å­˜ä¸­è¯¥å˜é‡çš„ä¸€ä»½æ‹·è´ï¼‰</p>  <img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8ol0a8of7j30xc0eq0u0.jpg" style="zoom:50%;" /></li><li><p>å…±äº«å˜é‡ä½¿ç”¨çš„ä¸¤æ¡è§„åˆ™  </p><ul><li>çº¿ç¨‹å¯¹å…±äº«å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œä¸èƒ½ç›´æ¥ä»ä¸»å†…å­˜ä¸­è¯»å†™</li><li>ä¸åŒçº¿ç¨‹ä¹‹é—´æ— æ³•ç›´æ¥è®¿é—®å…¶ä»–çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆ</li></ul></li><li><p>å…±äº«å˜é‡å¯è§æ€§å®ç°çš„åŸç†</p><p> çº¿ç¨‹1å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹è¦æƒ³è¢«çº¿ç¨‹2åŠæ—¶çœ‹åˆ°ï¼Œå¿…é¡»ç»è¿‡å¦‚ä¸‹2ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>æŠŠå·¥ä½œå†…å­˜1ä¸­æ›´æ–°è¿‡çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­</p></li><li><p>å°†ä¸»å†…å­˜ä¸­æœ€æ–°çš„å…±äº«å˜é‡çš„å€¼æ›´æ–°åˆ°å·¥ä½œå†…å­˜2ä¸­</p><p>çº¿ç¨‹1â€“&gt;å·¥ä½œå†…å­˜1ä¸­å˜é‡<code>X</code>â€“&gt;æ›´æ–°åˆ°ä¸»å†…å­˜ä¸­â€“&gt;å·¥ä½œå†…å­˜2ä¸­çš„å˜é‡<code>X</code>å¾—åˆ°æ›´æ–°â€“&gt;çº¿ç¨‹2</p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8ol0lto5tj309907d74z.jpg" style="zoom:100%;" /></li></ol></li></ol><h3 id="2-2-ç»ƒä¹ é¢˜"><a href="#2-2-ç»ƒä¹ é¢˜" class="headerlink" title="2-2 ç»ƒä¹ é¢˜"></a>2-2 ç»ƒä¹ é¢˜</h3><p>ä¸‹é¢å™è¿°é”™è¯¯çš„æ˜¯ï¼šB</p><blockquote><p>A. é€šè¿‡<code>synchronized</code>å’Œ<code>volatile</code>éƒ½å¯ä»¥å®ç°å¯è§æ€§</p><p>B. ä¸åŒçº¿ç¨‹ä¹‹é—´å¯ä»¥ç›´æ¥è®¿é—®å…¶ä»–çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡</p><p>C. çº¿ç¨‹å¯¹å…±äº«å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­è¿›è¡Œ</p><p>D. æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­</p></blockquote><h2 id="ç¬¬3ç« -synchronizedå®ç°å¯è§æ€§"><a href="#ç¬¬3ç« -synchronizedå®ç°å¯è§æ€§" class="headerlink" title="ç¬¬3ç«  synchronizedå®ç°å¯è§æ€§"></a>ç¬¬3ç«  <code>synchronized</code>å®ç°å¯è§æ€§</h2><blockquote><p>æœ¬ç« è®²è§£synchronizedå®ç°å¯è§æ€§çš„åŸç†å’Œæ–¹æ³•ã€æŒ‡ä»¤é‡æ’åºã€as-if-serialè¯­ä¹‰ç­‰æ¦‚å¿µï¼Œå¹¶é€šè¿‡å…·ä½“ç¨‹åºè¿›è¡Œåˆ†æã€‚</p></blockquote><h3 id="3-1-synchronizedå®ç°å¯è§æ€§åŸç†"><a href="#3-1-synchronizedå®ç°å¯è§æ€§åŸç†" class="headerlink" title="3-1 synchronizedå®ç°å¯è§æ€§åŸç†"></a>3-1 <code>synchronized</code>å®ç°å¯è§æ€§åŸç†</h3><blockquote><p>è¦å®ç°å…±äº«å˜é‡çš„å¯è§æ€§ï¼Œå¿…é¡»ä¿è¯ä¸¤ç‚¹ï¼š</p><ul><li>çº¿ç¨‹ä¿®æ”¹åçš„å…±äº«å˜é‡å€¼èƒ½å¤ŸåŠæ—¶ä»å·¥ä½œå†…å­˜åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­</li><li>å…¶ä»–çº¿ç¨‹èƒ½å¤ŸåŠæ—¶æŠŠå…±äº«å˜é‡çš„æœ€æ–°å€¼ä»ä¸»å†…å­˜æ›´æ–°åˆ°è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­</li></ul></blockquote><blockquote><p>Javaè¯­è¨€å±‚é¢æ”¯æŒçš„å¯è§æ€§å®ç°æ–¹å¼ï¼š<code>synchronized</code>ã€<code>volatile</code></p></blockquote><ol><li>synchronizedèƒ½å¤Ÿå®ç°ï¼šåŸå­æ€§ï¼ˆåŒæ­¥ï¼‰ã€å¯è§æ€§</li><li>JMMå…³äºsynchronizedçš„ä¸¤æ¡è§„å®šï¼š<ul><li>çº¿ç¨‹è§£é”å‰ï¼Œå¿…é¡»æŠŠå…±äº«å˜é‡çš„æœ€æ–°å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ã€‚</li><li>çº¿ç¨‹åŠ é”æ—¶ï¼Œå°†æ¸…ç©ºå·¥ä½œå†…å­˜ä¸­å…±äº«å˜é‡çš„å€¼ï¼Œä»è€Œä½¿ç”¨å…±äº«å˜é‡æ—¶éœ€è¦ä»ä¸»å­˜ä¸­é‡æ–°è¯»å–æœ€æ–°çš„å€¼ã€‚ï¼ˆæ³¨æ„ï¼šåŠ é”ä¸è§£é”éœ€è¦æ˜¯åŒä¸€æŠŠé”ï¼‰</li></ul></li></ol><pre><code>çº¿ç¨‹è§£é”å‰å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹åœ¨ä¸‹æ¬¡åŠ é”æ—¶å¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚</code></pre><ol start="3"><li><p>çº¿ç¨‹æ‰§è¡Œäº’æ–¥ä»£ç å—çš„è¿‡ç¨‹ï¼š</p><ol><li>è·å¾—äº’æ–¥é”</li><li>æ¸…ç©ºå·¥ä½œå†…å­˜</li><li>ä»ä¸»å†…å­˜æ‹·è´å˜é‡çš„æœ€æ–°å‰¯æœ¬åˆ°å·¥ä½œå†…å­˜</li><li>æ‰§è¡Œé”å†…ä»£ç </li><li>å°†æ›´æ”¹åçš„å…±äº«å˜é‡å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜</li><li>é‡Šæ”¾äº’æ–¥é”</li></ol></li><li><p>æŒ‡ä»¤é‡æ’åº  </p><ol><li><p>é‡æ’åºï¼šä»£ç çš„ä¹¦å†™é¡ºåºä¸å®é™…æ‰§è¡Œçš„é¡ºåºä¸åŒï¼ŒæŒ‡ä»¤é‡æ’åºæ˜¯ç¼–è¯‘å™¨æˆ–å¤„ç†å™¨ä¸ºäº†æé«˜ç¨‹åºæ€§èƒ½è€Œåšçš„ä¼˜åŒ–</p><ul><li>ç¼–è¯‘å™¨ä¼˜åŒ–çš„é‡æ’åºï¼ˆç¼–è¯‘å™¨ä¼˜åŒ–ï¼‰é‡æ–°å®‰æ’ä»£ç çš„æ‰§è¡Œé¡ºåº</li><li>æŒ‡ä»¤çº§å¹¶è¡Œçš„é‡æ’åºï¼ˆå¤„ç†å™¨ä¼˜åŒ–ï¼‰åŒæ ¸å¤„ç†å™¨é‡‡ç”¨äº†æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯ï¼Œå¯æ‰§è¡Œå¤šæ¡æŒ‡ä»¤</li><li>å†…å­˜ç³»ç»Ÿçš„é‡æ’åºï¼ˆå¤„ç†å™¨ä¼˜åŒ–ï¼‰å¯¹è¯»å†™ç¼“å­˜åšçš„ä¼˜åŒ–<pre><code class="java">//ä»£ç é¡ºåºï¼š         //æ‰§è¡Œé¡ºåºï¼šint number = 1;     int result = 0;int result = 0;     int number = 1;</code></pre></li></ul></li><li><p><code>as-if-serial</code>ï¼šæ— è®ºå¦‚ä½•é‡æ’åºï¼Œç¨‹åºæ‰§è¡Œçš„ç»“æœåº”è¯¥ä¸ä»£ç é¡ºåºæ‰§è¡Œçš„ç»“æœä¸€è‡´ï¼ˆ<code>Java</code>ç¼–è¯‘å™¨éƒ½ä¼šä¿è¯<code>Java</code>åœ¨å•çº¿ç¨‹ä¸‹éµå¾ª<code>as-if-serial</code>è¯­ä¹‰ï¼‰</p></li></ol></li></ol><pre><code>æ³¨ï¼š- é‡æ’åºä¸ä¼šç»™å•çº¿ç¨‹å¸¦æ¥å†…å­˜å¯è§æ€§é—®é¢˜- å¤šçº¿ç¨‹ä¸­ç¨‹åºäº¤é”™æ‰§è¡Œæ—¶ï¼Œé‡æ’åºå¯èƒ½ä¼šé€ æˆå†…å­˜å¯è§æ€§é—®é¢˜  </code></pre><h3 id="3-2-synchronizedå®ç°å¯è§æ€§ä»£ç "><a href="#3-2-synchronizedå®ç°å¯è§æ€§ä»£ç " class="headerlink" title="3-2 synchronizedå®ç°å¯è§æ€§ä»£ç "></a>3-2 <code>synchronized</code>å®ç°å¯è§æ€§ä»£ç </h3><pre><code class="java">ready = false;result = 0;number = 1;// å†™æ“ä½œpublic void write() {   ready = true; // 1.1   number = 2; // 1.2}//è¯»æ“ä½œpublic void read() {   if (ready) { // 2.1       result = number * 3;//2.2   }   System.out.println(&quot;resultçš„å€¼ä¸ºï¼š&quot; + result);}</code></pre><p>æ‰§è¡Œé¡ºåºï¼š</p><ol><li>1.1â€“&gt;2.1â€“&gt;2.2â€“&gt;1.2<br>result=3;</li><li>1.2â€“&gt;2.1â€“&gt;2.2â€“&gt;1.1<br>result=0;</li></ol><p>å¯¼è‡´å…±äº«å˜é‡åœ¨çº¿ç¨‹é—´ä¸å¯è§çš„åŸå› ï¼š</p><ol><li>çº¿ç¨‹çš„äº¤å‰æ‰§è¡Œ</li><li>é‡æ’åºç»“åˆçº¿ç¨‹äº¤å‰æ‰§è¡Œ</li><li>å…±äº«å˜é‡æ›´æ–°åçš„å€¼æ²¡æœ‰åœ¨å·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜é—´åŠæ—¶æ›´æ–°</li></ol><p>synchronizedè§£å†³ä¸å¯è§çš„æ–¹æ¡ˆï¼š</p><ol><li>åŸå­æ€§ï¼šç”±äºé”çš„å…³ç³»ï¼Œçº¿ç¨‹ä¹‹é—´ä¸å…è®¸äº¤å‰æ‰§è¡Œï¼›ç›¸å½“äºç»™è¯¥çº¿ç¨‹ï¼ˆæˆ–å½“å‰è¿è¡Œçš„æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçš„çº¿ç¨‹ï¼‰åŠ äº†ä¸€æŠŠé”ï¼Œå¤–é¢çš„çº¿ç¨‹æ— æ³•è¿›å…¥ï¼Œæ›´åˆ«æäº’ç›¸äº¤å‰æ‰§è¡Œã€‚</li><li>åŸå­æ€§ + <code>as-if-serial</code>è¯­ä¹‰ï¼šçº¿ç¨‹ä¸èƒ½äº¤å‰æ‰§è¡Œï¼Œé‡æ’åºå¯¹äºå•çº¿ç¨‹ä¸èƒ½å½±å“è¿è¡Œç»“æœã€‚</li><li>å¯è§æ€§ï¼šå…±äº«å˜é‡çš„æ›´æ–°æ‰§è¡Œã€‚</li></ol><p>å¸¸è§é—®é¢˜ï¼š</p><ol><li>ä¸ºä½•ä¸åŠ <code>synchronized</code>å…³é”®å­—ä¹Ÿä¼šæ‰§è¡Œå¯è§æ€§ï¼Œæ˜¯ä¸»å†…å­˜åŠæ—¶æ›´æ–°è¢«è·å–æœ€æ–°å€¼ä¹ˆï¼Ÿ<br>å› ä¸ºå½“æ—¶å®šä¹‰è¯´åŠ <code>synchronized</code>ä¸€å®šä¼šå¯è§æ€§ï¼Œè€Œä¸åŠ ä¹Ÿæ²¡è¯´ä¸€å®šä¸ä¼šï¼Œåªæ˜¯æœ‰å¯èƒ½ä¸ä¼šã€‚å› ä¸ºç°åœ¨<code>Java</code>åšäº†ä¸€äº›ä¼˜åŒ–ï¼šå°½é‡å®ç°å¯è§æ€§ï¼›ä½†æ˜¯ä¸èƒ½ä¿è¯æ¯æ¬¡éƒ½æˆåŠŸï¼Œåªæ˜¯æˆåŠŸæ¦‚ç‡æ¯”è¾ƒå¤§99%ï¼Œä½†è¿˜æ˜¯æœ‰1%çš„æƒ…å†µä¼šå¤±è´¥ã€‚æ‰€ä»¥å¤„äºå®‰å…¨æ€§è€ƒè™‘ï¼Œå°½é‡åŠ <code>synchronized</code>å…³é”®å­—100%æˆåŠŸã€‚</li><li>æœ‰æ—¶å€™ä¸å­˜åœ¨çº¿ç¨‹äº¤å‰æƒ…å†µï¼Œä½†æ˜¯ä¼šå…ˆæ‰§è¡Œç¬¬äºŒä¸ªçº¿ç¨‹ï¼Œè¿™æ˜¯å› ä¸ºç¬¬ä¸€ä¸ªçº¿ç¨‹æŠŠ<code>CPU</code>è®©ä½å‡ºæ¥ã€‚æ‰€ä»¥ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨ç¬¬ä¸€ä¸ªçº¿ç¨‹åé™„ä¸Šä»£ç ï¼š<code>sleep(1000);</code>1ç§’ä¹‹åæ‰æœ‰æœºä¼šæ‰§è¡Œçº¿ç¨‹2ã€‚</li><li><code>synchronized</code> + <code>sleep();</code>é»„é‡‘æ­æ¡£ã€‚<h3 id="3-5-ç»ƒä¹ é¢˜"><a href="#3-5-ç»ƒä¹ é¢˜" class="headerlink" title="3-5 ç»ƒä¹ é¢˜"></a>3-5 ç»ƒä¹ é¢˜</h3>ä¸‹é¢è¯´æ³•é”™è¯¯çš„æ˜¯ï¼šC<blockquote><p>A. å½“ä¸¤ä¸ªå¹¶å‘çº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡<code>object</code>ä¸­çš„è¿™ä¸ª<code>synchronized(this)</code>åŒæ­¥ä»£ç å—æ—¶ï¼Œä¸€ä¸ªæ—¶é—´å†…åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¾—åˆ°æ‰§è¡Œã€‚</p><p>B. å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®<code>object</code>çš„ä¸€ä¸ª<code>synchronized(this)</code>åŒæ­¥ä»£ç å—æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä»ç„¶å¯ä»¥è®¿é—®è¯¥<code>object</code>ä¸­çš„é<code>synchronized(this)</code>åŒæ­¥ä»£ç å—ã€‚</p><p>C. å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®<code>object</code>çš„ä¸€ä¸ª<code>synchronized(this)</code>åŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯¹<code>object</code>ä¸­æ‰€æœ‰å…¶å®ƒ<code>synchronized(this)</code>åŒæ­¥ä»£ç å—çš„è®¿é—®ä¸ä¼šè¢«é˜»å¡ã€‚</p><p>D. å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®<code>object</code>çš„ä¸€ä¸ª<code>synchronized(this)</code>åŒæ­¥ä»£ç å—æ—¶ï¼Œå®ƒå°±è·å¾—äº†è¿™ä¸ª<code>object</code>çš„å¯¹è±¡é”ã€‚ç»“æœï¼Œå…¶å®ƒçº¿ç¨‹å¯¹è¯¥<code>object</code>å¯¹è±¡æ‰€æœ‰åŒæ­¥ä»£ç å—éƒ¨åˆ†çš„è®¿é—®éƒ½è¢«æš‚æ—¶é˜»å¡ã€‚</p></blockquote></li></ol><h2 id="ç¬¬4ç« -volatileå®ç°å¯è§æ€§"><a href="#ç¬¬4ç« -volatileå®ç°å¯è§æ€§" class="headerlink" title="ç¬¬4ç«  volatileå®ç°å¯è§æ€§"></a>ç¬¬4ç«  <code>volatile</code>å®ç°å¯è§æ€§</h2><blockquote><p>æœ¬ç« è®²è§£volatileå®ç°å¯è§æ€§çš„åŸç†å’Œæ–¹æ³•ï¼Œä»¥åŠéœ€è¦ä½¿ç”¨volatileæ—¶éœ€è¦æ³¨æ„çš„äº‹é¡¹ï¼Œå¹¶é€šè¿‡å…·ä½“ç¨‹åºè¿›è¡Œåˆ†æã€‚</p></blockquote><h3 id="4-1-volatileèƒ½å¤Ÿä¿è¯å¯è§æ€§"><a href="#4-1-volatileèƒ½å¤Ÿä¿è¯å¯è§æ€§" class="headerlink" title="4-1 volatileèƒ½å¤Ÿä¿è¯å¯è§æ€§"></a>4-1 <code>volatile</code>èƒ½å¤Ÿä¿è¯å¯è§æ€§</h3><ol><li><p><code>volatile</code>å…³é”®å­—ï¼š</p><ul><li>èƒ½å¤Ÿä¿è¯<code>volatile</code>å˜é‡çš„å¯è§æ€§ã€‚</li><li>ä¸èƒ½ä¿è¯<code>volatile</code>å˜é‡å¤åˆæ“ä½œçš„åŸå­æ€§ã€‚</li></ul></li><li><p><code>volatile</code>å¦‚ä½•å®ç°å†…å­˜å¯è§æ€§ï¼š</p><p>é€šè¿‡åŠ å…¥å†…å­˜å±éšœå’Œç¦æ­¢é‡æ’åºä¼˜åŒ–æ¥å®ç°çš„ã€‚</p></li><li><p>å¯¹<code>volatile</code>å˜é‡æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œä¼šåœ¨å†™æ“ä½œååŠ å…¥ä¸€æ¡<code>store</code>å±éšœæŒ‡ä»¤ã€‚</p></li><li><p>å¯¹<code>volatile</code>å˜é‡æ‰§è¡Œè¯»æ“ä½œæ—¶ï¼Œä¼šåœ¨è¯»æ“ä½œå‰åŠ å…¥ä¸€æ¡<code>load</code>å±éšœæŒ‡ä»¤ã€‚</p><p> <code>Java</code>å†…å­˜æ¨¡å‹ä¸­ä¸€å…±å®šä¹‰äº†8æ¡æ“ä½œæŒ‡ä»¤æ¥å®Œæˆä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜çš„äº¤äº’</p><p> <strong>â˜…é€šä¿—åœ°è®²</strong>ï¼š<code>volatile</code>å˜é‡åœ¨æ¯æ¬¡è¢«çº¿ç¨‹è®¿é—®æ—¶ï¼Œéƒ½å¼ºè¿«ä»ä¸»å†…å­˜ä¸­é‡è¯»è¯¥å˜é‡çš„å€¼ï¼Œè€Œå½“è¯¥å˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆä¼šå¼ºè¿«çº¿ç¨‹å°†æœ€æ–°çš„å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ã€‚è¿™æ ·ä»»ä½•æ—¶å€™ï¼Œä¸åŒçš„çº¿ç¨‹æ€»èƒ½çœ‹åˆ°è¯¥å˜é‡çš„æœ€æ–°å€¼</p></li><li><p>çº¿ç¨‹è¯»/å†™<code>volatile</code>å˜é‡çš„è¿‡ç¨‹ï¼š</p><ul><li>çº¿ç¨‹å†™<code>volatile</code>å˜é‡çš„è¿‡ç¨‹ï¼š<ol><li>æ”¹å˜çº¿ç¨‹å·¥ä½œå†…å­˜çš„ä¸­<code>volatile</code>å˜é‡å‰¯æœ¬çš„å€¼ã€‚</li><li>å°†æ”¹å˜åçš„å‰¯æœ¬çš„å€¼ä»å·¥ä½œå†…å­˜åˆ·æ–°åˆ°ä¸»å†…å­˜ã€‚</li></ol></li><li>çº¿ç¨‹è¯»<code>volatile</code>å˜é‡çš„è¿‡ç¨‹ï¼š<ol><li>ä»ä¸»å†…å­˜ä¸­è¯»å–<code>volatile</code>å˜é‡çš„æœ€æ–°å€¼åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ã€‚</li><li>ä»å·¥ä½œå†…å­˜ä¸­è¯»å–<code>volatile</code>å˜é‡çš„å‰¯æœ¬ã€‚</li></ol></li></ul></li><li><p><code>volatile</code>ä¸èƒ½ä¿è¯<code>volatile</code>å˜é‡å¤åˆæ“ä½œçš„åŸå­æ€§</p><ol><li><p><code>number++;</code>çš„æ­¥éª¤ï¼š</p><ol><li>è¯»å–<code>number</code>çš„å€¼</li><li>å°†<code>number</code>çš„å€¼åŠ 1</li><li>å†™å…¥æœ€æ–°çš„<code>number</code>çš„å€¼<pre><code class="java">private int number = 0;number++;//ä¸æ˜¯åŸå­æ“ä½œ</code></pre></li></ol></li><li><p>åŠ å…¥<code>synchronized</code>ï¼Œå˜ä¸ºåŸå­æ“ä½œ </p><pre><code class="java">synchronized(this){    number++;}</code></pre></li><li><p>å˜ä¸º<code>volatile</code>å˜é‡ï¼Œæ— æ³•ä¿è¯åŸå­æ€§ </p><p><code>private volatile int number = 0;</code></p></li></ol></li></ol><h3 id="4-2-volatileä¸èƒ½ä¿è¯åŸå­æ€§"><a href="#4-2-volatileä¸èƒ½ä¿è¯åŸå­æ€§" class="headerlink" title="4-2 volatileä¸èƒ½ä¿è¯åŸå­æ€§"></a>4-2 <code>volatile</code>ä¸èƒ½ä¿è¯åŸå­æ€§</h3><p>ä¾‹ï¼š</p><blockquote><p><code>number = 5</code> </p></blockquote><ol><li><p>çº¿ç¨‹<code>A</code>è¯»å–<code>number</code>çš„å€¼ A=5 B=N M=5</p></li><li><p>çº¿ç¨‹<code>B</code>è¯»å–<code>number</code>çš„å€¼ A=5 B=5 M=5</p></li><li><p>çº¿ç¨‹<code>B</code>æ‰§è¡ŒåŠ 1æ“ä½œ A=5 B=6 M=5</p></li><li><p>çº¿ç¨‹<code>B</code>å†™å…¥æœ€æ–°çš„<code>number</code>çš„å€¼ A=5 B=6 M=6</p></li><li><p>çº¿ç¨‹<code>A</code>æ‰§è¡ŒåŠ 1æ“ä½œ A=6 B=6 M=6</p></li><li><p>çº¿ç¨‹<code>A</code>å†™å…¥æœ€æ–°çš„<code>number</code>çš„å€¼ A=6 B=6 M=6</p><p>ä¸¤æ¬¡<code>number++</code>åªå¢åŠ äº†1</p></li></ol><p>è§£å†³æ–¹æ¡ˆï¼š</p><blockquote><p>ä¿è¯<code>number</code>è‡ªå¢æ“ä½œçš„åŸå­æ€§ï¼š</p></blockquote><ol><li><p>ä½¿ç”¨<code>synchronized</code>å…³é”®å­—</p><pre><code class="java"> synchronized (this) {     this.number++; }</code></pre></li><li><p>ä½¿ç”¨<code>ReentrantLock</code>(<code>java.util.concurrent.locks</code>åŒ…ä¸‹)ï¼Œæœ€å¥½ä½¿ç”¨<code>try-finally</code></p><pre><code class="java"> private Lock lock = new ReentrantLock(); lock.lock(); try {     this.number++; } finally {     lock.unlock(); }</code></pre></li><li><p>ä½¿ç”¨<code>AtomicInteger</code>(<code>java.util.concurrent.atomic</code>åŒ…ä¸‹)</p><pre><code class="java"> private AtomicInteger num = new AtomicInteger(0); num.getAndAdd(1);</code></pre></li></ol><h3 id="4-5-volatileä½¿ç”¨æ³¨æ„äº‹é¡¹"><a href="#4-5-volatileä½¿ç”¨æ³¨æ„äº‹é¡¹" class="headerlink" title="4-5 volatileä½¿ç”¨æ³¨æ„äº‹é¡¹"></a>4-5 <code>volatile</code>ä½¿ç”¨æ³¨æ„äº‹é¡¹</h3><p>è¦åœ¨å¤šçº¿ç¨‹ä¸­å®‰å…¨çš„ä½¿ç”¨<code>volatile</code>å˜é‡ï¼Œå¿…é¡»åŒæ—¶æ»¡è¶³ï¼š</p><ol><li><p>å¯¹å˜é‡çš„å†™å…¥æ“ä½œä¸ä¾èµ–å…¶å½“å‰å€¼</p><p>ä¸æ»¡è¶³ï¼š<code>number++</code>ã€<code>count=count*5</code>ç­‰<br>æ»¡è¶³ï¼š<code>boolean</code>å˜é‡ã€è®°å½•æ¸©åº¦å˜åŒ–çš„å˜é‡ç­‰</p></li><li><p>è¯¥å˜é‡æ²¡æœ‰åŒ…å«åœ¨å…·æœ‰å…¶ä»–å˜é‡çš„ä¸å˜å¼ä¸­</p><p>ä¸æ»¡è¶³ï¼šä¸å˜å¼<code>low&lt;up</code></p></li></ol><h3 id="4-6-synchronizedä¸volatileæ¯”è¾ƒ"><a href="#4-6-synchronizedä¸volatileæ¯”è¾ƒ" class="headerlink" title="4-6 synchronizedä¸volatileæ¯”è¾ƒ"></a>4-6 <code>synchronized</code>ä¸<code>volatile</code>æ¯”è¾ƒ</h3><ol><li><code>volatile</code>ä¸éœ€è¦åŠ é”ï¼Œæ¯”<code>synchronized</code>æ›´è½»é‡çº§ï¼Œä¸ä¼šé˜»å¡çº¿ç¨‹</li><li>ä»å†…å­˜å¯è§æ€§è§’åº¦è®²ï¼š<code>volatile</code>è¯»æ“ä½œç›¸å½“äºåŠ é”ï¼›<code>volatile</code>å†™æ“ä½œç›¸å½“äºè§£é”</li><li><code>synchronized</code>æ—¢èƒ½ä¿è¯å¯è§æ€§ï¼Œåˆèƒ½ä¿è¯åŸå­æ€§ï¼›è€Œ<code>volatile</code>åªèƒ½ä¿è¯å¯è§æ€§ï¼Œæ— æ³•ä¿è¯åŸå­æ€§</li></ol><p>æ€»è€Œè¨€ä¹‹ï¼š<code>synchronized</code>ç¨³å®šæ€§é«˜ï¼Œæ•ˆç‡ä½ï¼›<code>volatile</code>ç¨³å®šæ€§ä½ï¼Œæ•ˆç‡é«˜ã€‚</p><h3 id="4-7-ç»ƒä¹ é¢˜"><a href="#4-7-ç»ƒä¹ é¢˜" class="headerlink" title="4-7 ç»ƒä¹ é¢˜"></a>4-7 ç»ƒä¹ é¢˜</h3><p>ä¸‹åˆ—è¯´æ³•ä¸­é”™è¯¯çš„æ˜¯ï¼šA</p><blockquote><p>A. <code>volatile</code>æ˜¯ä¿è¯è¢«ä¿®é¥°å˜é‡çš„å¯è§æ€§ï¼ŒåŒæ—¶ä¹Ÿä¿è¯åŸå­æ“ä½œ<br>B. <code>Java</code>ä¸­æ²¡æœ‰æä¾›æ£€æµ‹ä¸é¿å…æ­»é”çš„ä¸“é—¨æœºåˆ¶ï¼Œä½†åº”ç”¨ç¨‹åºå‘˜å¯ä»¥é‡‡ç”¨æŸäº›ç­–ç•¥é˜²æ­¢æ­»é”çš„å‘ç”Ÿ<br>C. <code>JAVA</code>ä¸­å¯¹å…±äº«æ•°æ®æ“ä½œçš„å¹¶å‘æ§åˆ¶æ˜¯é‡‡ç”¨åŠ é”æŠ€æœ¯<br>D. å…±äº«æ•°æ®çš„è®¿é—®æƒé™éƒ½å¿…é¡»å®šä¹‰ä¸º<code>private</code></p></blockquote><h2 id="ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬5ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬5ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>æ€»ç»“æœ¬é—¨è¯¾ç¨‹çš„å­¦ä¹ å†…å®¹</p></blockquote><p>æ€»ç»“ï¼š</p><ol><li>ä»€ä¹ˆæ˜¯å†…å­˜å¯è§æ€§</li><li><code>Java</code>å†…å­˜æ¨¡å‹ï¼ˆ<code>JMM</code>ï¼‰</li><li>å®ç°å¯è§æ€§çš„æ–¹å¼ï¼š<code>synchronized</code>å’Œ<code>volatile</code><ul><li><code>final</code>ä¹Ÿå¯ä»¥ä¿è¯å†…å­˜çš„å¯è§æ€§</li></ul></li><li><code>synchronized</code>å’Œ<code>volatile</code>å®ç°å†…å­˜å¯è§æ€§çš„åŸç†</li><li><code>synchronized</code>å®ç°å¯è§æ€§<ul><li>æŒ‡ä»¤é‡æ’åº</li><li><code>as-if-serial</code>è¯­ä¹‰</li></ul></li><li><code>volatile</code>å®ç°å¯è§æ€§<ul><li><code>volatile</code>èƒ½å¤Ÿä¿è¯å¯è§æ€§</li><li><code>volatile</code>ä¸èƒ½ä¿è¯åŸå­æ€§(<code>number++</code>)</li><li><code>volatile</code>ä½¿ç”¨æ³¨æ„äº‹é¡¹</li></ul></li><li>synchronizedå’Œvolatileæ¯”è¾ƒ<ul><li>volatileæ¯”synchronizedæ›´è½»é‡çº§</li><li>synchronizedæ¯”volatileä½¿ç”¨æ›´å¹¿æ³›</li></ul></li></ol><p>è¡¥å……ï¼š  </p><ol><li><p>é—®ï¼šå³ä½¿æ²¡æœ‰ä¿è¯å¯è§æ€§çš„æªæ–½(å¦‚s<code>ynchronized</code>ã€<code>volatile</code>ã€<code>final</code>)ï¼Œå¾ˆå¤šæ—¶å€™å…±äº«å˜é‡ä¾ç„¶èƒ½å¤Ÿåœ¨ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜è§å¾—åˆ°åŠæ—¶çš„æ›´æ–°ï¼Ÿ</p><p>ç­”ï¼šä¸€èˆ¬åªæœ‰åœ¨çŸ­æ—¶é—´å†…é«˜å¹¶å‘çš„æƒ…å†µä¸‹æ‰ä¼šå‡ºç°å˜é‡å¾—ä¸åˆ°åŠæ—¶æ›´æ–°çš„æƒ…å†µï¼Œå› ä¸º<code>CPU</code>åœ¨æ‰§è¡Œæ—¶ä¼šå¾ˆå¿«åœ°åˆ·æ–°ç¼“å­˜ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹å¾ˆéš¾çœ‹åˆ°è¿™ç§é—®é¢˜ã€‚</p></li><li><p>å¯¹64ä½(<code>long</code>ã€<code>double</code>)å˜é‡çš„è¯»å†™å¯èƒ½ä¸æ˜¯åŸå­æ“ä½œï¼š</p><p><code>Java</code>å†…å­˜æ¨¡å‹å…è®¸<code>JVM</code>å°†æ²¡æœ‰è¢«<code>volatile</code>ä¿®é¥°çš„64ä½æ•°æ®ç±»å‹çš„è¯»å†™æ“ä½œåˆ’åˆ†ä¸ºä¸¤æ¬¡32ä½çš„è¯»å†™æ“ä½œæ¥è¿›è¡Œ</p><p>å¯¼è‡´é—®é¢˜ï¼šæœ‰å¯èƒ½ä¼šå‡ºç°è¯»å–åˆ°â€œåŠä¸ªå˜é‡â€çš„æƒ…å†µ</p><p>è§£å†³æ–¹æ³•ï¼šåŠ <code>volatile</code>å…³é”®å­—</p><p><strong>æ³¨</strong>ï¼šç›®å‰å‡ ä¹æ‰€æœ‰è™šæ‹Ÿæœºå·²ç»æŠŠ64ä½æ•°æ®çš„è¯»å†™åšäº†åŸå­æ“ä½œï¼Œä¸éœ€å°†(<code>long</code>ã€<code>double</code>)ä½¿ç”¨<code>volatile</code>ä¿®é¥°</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>312-ç»†è¯´å¤šçº¿ç¨‹ä¹‹Thread VS Runnable</title>
      <link href="/imooc/312-thread-runnable/"/>
      <url>/imooc/312-thread-runnable/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/312" target="_blank" rel="noopener">https://www.imooc.com/learn/312</a></p><p>ç®€ä»‹ï¼šæœ¬è¯¾ç¨‹å°†å¸¦é¢†å¤§å®¶æ›´åŠ æ·±å…¥åœ°å­¦ä¹ Javaå¤šçº¿ç¨‹çš„æœºåˆ¶ï¼Œæ·±å…¥ç†è§£åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼Threadå’ŒRunnableä¹‹é—´çš„å·®å¼‚ï¼ŒæŒæ¡çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œå®ˆæŠ¤çº¿ç¨‹çš„æ¦‚å¿µï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨jstackç”Ÿæˆçº¿ç¨‹å¿«ç…§ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -è¯¾å‰å‡†å¤‡"><a href="#ç¬¬1ç« -è¯¾å‰å‡†å¤‡" class="headerlink" title="ç¬¬1ç«  è¯¾å‰å‡†å¤‡"></a>ç¬¬1ç«  è¯¾å‰å‡†å¤‡</h2><blockquote><p>äº†è§£å­¦ä¹ æœ¬è¯¾ç¨‹å‰çš„å¿…å¤‡çŸ¥è¯†</p></blockquote><p><a href="https://www.imooc.com/learn/202" target="_blank" rel="noopener">ã€Šæ·±å…¥æµ…å‡ºJavaå¤šçº¿ç¨‹ã€‹</a></p><blockquote><p>æ¯”è¾ƒThreadå’ŒRunnableè¿™ä¸¤ç§çº¿ç¨‹åˆ›å»ºçš„æ–¹å¼ï¼Œéœ€è¦çŸ¥é“Threadå’ŒRunnableçš„åŸºæœ¬åˆ›å»ºæ–¹å¼ã€‚</p></blockquote><p>è¯¾ç¨‹ç›®æ ‡å’Œå­¦ä¹ å†…å®¹</p><ul><li>çº¿ç¨‹åˆ›å»ºçš„ä¸¤ç§æ–¹å¼æ¯”è¾ƒ</li><li>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</li><li>çº¿ç¨‹çš„å®ˆæŠ¤ç¥ï¼šå®ˆæŠ¤çº¿ç¨‹</li></ul><h2 id="ç¬¬2ç« -Thread-VS-Runnable"><a href="#ç¬¬2ç« -Thread-VS-Runnable" class="headerlink" title="ç¬¬2ç«  Thread VS Runnable"></a>ç¬¬2ç«  <code>Thread</code> VS <code>Runnable</code></h2><blockquote><p>æœ¬ç« é¦–å…ˆå›é¡¾äº†çº¿ç¨‹åˆ›å»ºçš„ä¸¤ç§æ–¹å¼ï¼Œè€Œåé€šè¿‡ä¸€ä¸ªç¨‹åºæ¡ˆä¾‹ï¼Œæ·±å…¥æ¯”è¾ƒäº†è¿™ä¸¤ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ã€‚</p></blockquote><h3 id="2-1-å›é¡¾çº¿ç¨‹åˆ›å»ºçš„ä¸¤ç§æ–¹å¼"><a href="#2-1-å›é¡¾çº¿ç¨‹åˆ›å»ºçš„ä¸¤ç§æ–¹å¼" class="headerlink" title="2-1 å›é¡¾çº¿ç¨‹åˆ›å»ºçš„ä¸¤ç§æ–¹å¼"></a>2-1 å›é¡¾çº¿ç¨‹åˆ›å»ºçš„ä¸¤ç§æ–¹å¼</h3><ol><li><p>ç»§æ‰¿<code>Thread</code>ç±»</p><pre><code class="java"> class MyThread extents Thread {     // ...     @Override     public void run() {         // ...     } } MyThread mt = new MyThread(); // åˆ›å»ºçº¿ç¨‹ mt.start(); // å¯åŠ¨çº¿ç¨‹</code></pre></li><li><p>å®ç°<code>Runnable</code>æ¥å£</p><pre><code class="java"> class MyRunnable implements Runnable {     // ...     @Override     public void run() {         // ...     } } MyRunnable mr = new MyRunnable(); Thread td = new Thread(mr); // åˆ›å»ºçº¿ç¨‹ td.start(); // å¯åŠ¨çº¿ç¨‹</code></pre></li></ol><h3 id="2-2-åº”ç”¨Threadæ¨¡æ‹Ÿå–ç¥¨"><a href="#2-2-åº”ç”¨Threadæ¨¡æ‹Ÿå–ç¥¨" class="headerlink" title="2-2 åº”ç”¨Threadæ¨¡æ‹Ÿå–ç¥¨"></a>2-2 åº”ç”¨<code>Thread</code>æ¨¡æ‹Ÿå–ç¥¨</h3><p><code>Thread</code>ä¸<code>Runnable</code>çš„åŒºåˆ«ï¼š</p><ol><li><p><code>Runnable</code>æ–¹å¼å¯ä»¥é¿å…<code>Thread</code>æ–¹å¼ç”±äº<code>Java</code>å•ç»§æ‰¿ç‰¹æ€§å¸¦æ¥çš„ç¼ºé™·</p><p>å•ç»§æ‰¿ï¼šJavaè¯­è¨€ä¸­åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œè€Œå¯ä»¥å®ç°å¤šä¸ªæ¥å£</p></li><li><p><code>Runnable</code>çš„å®ä¾‹å¯¹è±¡å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹ï¼ˆ<code>Thread</code>å®ä¾‹ï¼‰å…±äº«ï¼Œé€‚åˆäºå¤šä¸ªçº¿ç¨‹å¤„ç†<strong>åŒä¸€èµ„æº</strong></p></li></ol><p>é’ˆå¯¹Threadå’ŒRunnableå¯¹äºåŒä¸€èµ„æºå¤„ç†ï¼š</p><pre><code class="java">class MyThread extends Thread{}class MyRunnable implements Runnable{}public static void main(String[] args) {    // æ³¨æ„ï¼šæ­¤æ—¶t1,t2,t3æ˜¯å †å†…å­˜ä¸­å®ä¾‹å‡ºçš„ä¸‰ä¸ªå¯¹è±¡ï¼Œå¯¹äºå®ƒä»¬æ‰€æœ‰å±æ€§ä¹Ÿç‹¬ç«‹çš„    MyThread t1 = new MyThread();    MyThread t2 = new MyThread();    MyThread t3 = new MyThread();    // æ³¨æ„ï¼št1,t2,t3è™½ç„¶æ˜¯å †ä¸­çš„ä¸‰ä¸ªä¸åŒå¯¹è±¡ï¼Œä½†æ˜¯æ­¤æ—¶çš„ræ˜¯ä¸€ä¸ªï¼Œæ‰€ä»¥ä¸‰ä¸ªçº¿ç¨‹å¼•ç”¨rä¸­çš„èµ„æºä¹Ÿæ˜¯å…±æœ‰çš„    MyRunnable r = new MyRunnable();    Thread t1 = new Thread(r);    Thread t2 = new Thread(r);    Thread t3 = new Thread(r);}</code></pre><p>ç»“è®ºï¼šRunnableå¯ä»¥å®ç°èµ„æºå…±äº«ï¼Œè€ŒThreadèµ„æºç‹¬ç«‹</p><p>æ³¨ï¼š</p><ul><li><code>a--</code>ã€<code>a++</code>ã€<code>++a</code>ã€<code>--a</code>ã€<code>a+=1</code>ç­‰ä¸ºéåŸå­æ“ä½œï¼ˆnon-atomic operationï¼‰ï¼Œéœ€è¦åŠ é”</li></ul><h2 id="ç¬¬3ç« -çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œå®ˆæŠ¤çº¿ç¨‹"><a href="#ç¬¬3ç« -çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œå®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="ç¬¬3ç«  çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œå®ˆæŠ¤çº¿ç¨‹"></a>ç¬¬3ç«  çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œå®ˆæŠ¤çº¿ç¨‹</h2><blockquote><p>æœ¬ç« å½’çº³æ€»ç»“äº†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œè®²è§£äº†å®ˆæŠ¤çº¿ç¨‹ï¼Œå¹¶æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨jstackç”Ÿæˆçº¿ç¨‹å¿«ç…§</p></blockquote><h3 id="3-1-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#3-1-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3-1 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a>3-1 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h3><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g8odd59oopj30zk0k0gmb.jpg" style="zoom:50%;" /><ol><li>åˆ›å»ºï¼šæ–°å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œå¦‚<code>Thread thd = new Thread()</code></li><li>å°±ç»ªï¼šåˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡åï¼Œè°ƒç”¨äº†çº¿ç¨‹çš„<code>start()</code>æ–¹æ³•ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çº¿ç¨‹åªæ˜¯è¿›å…¥äº†çº¿ç¨‹é˜Ÿåˆ—ï¼Œç­‰å¾…è·å–<code>CPU</code>æœåŠ¡ï¼Œå…·å¤‡äº†è¿è¡Œçš„æ¡ä»¶ï¼Œä½†å¹¶ä¸ä¸€å®šå·²ç»å¼€å§‹è¿è¡Œäº†ï¼‰</li><li>è¿è¡Œï¼šå¤„äºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¸€æ—¦è·å–äº†<code>CPU</code>èµ„æºï¼Œä¾¿è¿›å…¥åˆ°è¿è¡ŒçŠ¶æ€ï¼Œå¼€å§‹æ‰§è¡Œ<code>run()</code>æ–¹æ³•é‡Œé¢çš„é€»è¾‘</li><li>ç»ˆæ­¢ï¼šçº¿ç¨‹çš„<code>run()</code>æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæˆ–è€…è°ƒç”¨çº¿ç¨‹çš„<code>stop()</code>æ–¹æ³•ï¼ˆè¯¥æ–¹æ³•å·²ç»åºŸå¼ƒï¼‰ï¼Œçº¿ç¨‹ä¾¿è¿›å…¥ç»ˆæ­¢çŠ¶æ€</li><li>é˜»å¡ï¼šä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœ¨æŸç§æƒ…å†µä¸‹ï¼Œç”±äºæŸç§åŸå› è€Œæš‚æ—¶è®©å‡ºäº†<code>CPU</code>èµ„æºï¼Œæš‚åœäº†è‡ªå·±çš„æ‰§è¡Œï¼Œä¾¿è¿›å…¥äº†é˜»å¡çŠ¶æ€ï¼Œå¦‚è°ƒç”¨äº†<code>sleep()</code>ã€<code>wait()</code>ã€<code>yield()</code>ç­‰æ–¹æ³•</li></ol><h3 id="3-2-å®ˆæŠ¤çº¿ç¨‹ç†è®ºçŸ¥è¯†"><a href="#3-2-å®ˆæŠ¤çº¿ç¨‹ç†è®ºçŸ¥è¯†" class="headerlink" title="3-2 å®ˆæŠ¤çº¿ç¨‹ç†è®ºçŸ¥è¯†"></a>3-2 å®ˆæŠ¤çº¿ç¨‹ç†è®ºçŸ¥è¯†</h3><p><code>Java</code>çº¿ç¨‹åˆ†ä¸¤ç±»ï¼š</p><ol><li><p>ç”¨æˆ·çº¿ç¨‹ï¼šè¿è¡Œåœ¨å‰å°ï¼Œæ‰§è¡Œå…·ä½“ä»»åŠ¡</p><p>ä¾‹å¦‚ï¼šç¨‹åºçš„ä¸»çº¿ç¨‹ï¼Œè¿æ¥ç½‘ç»œçš„å­çº¿ç¨‹ç­‰</p></li><li><p>å®ˆæŠ¤çº¿ç¨‹ï¼šè¿è¡Œåœ¨åå°ï¼Œä¸ºå…¶ä»–å‰å°çº¿ç¨‹æœåŠ¡</p><p>ç‰¹ç‚¹ï¼šä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéš<code>JVM</code>ä¸€èµ·ç»“æŸå·¥ä½œ</p><p>åº”ç”¨ï¼š</p><ol><li>æ•°æ®åº“è¿æ¥æ± ä¸­çš„ç›‘æµ‹çº¿ç¨‹</li><li><code>JVM</code>è™šæ‹Ÿæœºå¯åŠ¨åçš„ç›‘æµ‹çº¿ç¨‹<ul><li>åƒåœ¾å›æ”¶çº¿ç¨‹</li><li>ç›‘æµ‹å†…å­˜ä½¿ç”¨çš„çº¿ç¨‹</li><li>ç›‘æµ‹ç¨‹åºé”æŒæœ‰çš„çº¿ç¨‹  </li></ul></li></ol></li></ol><p>å¦‚ä½•è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ï¼š</p><ul><li>å¯ä»¥é€šè¿‡è°ƒç”¨<code>Thread</code>ç±»çš„<code>setDaemon(true)</code>æ–¹æ³•æ¥è®¾ç½®å½“å‰çš„çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹  </li></ul><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p><ul><li><code>setDaemon(true)</code>å¿…é¡»åœ¨<code>start()</code>æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ›å‡º<code>IllegalThreadStateException</code>å¼‚å¸¸</li><li>åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯å®ˆæŠ¤çº¿ç¨‹</li><li>ä¸æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹æ¥æ‰§è¡Œï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘</li></ul><h3 id="3-3-å®ˆæŠ¤çº¿ç¨‹ä»£ç ç¤ºä¾‹"><a href="#3-3-å®ˆæŠ¤çº¿ç¨‹ä»£ç ç¤ºä¾‹" class="headerlink" title="3-3 å®ˆæŠ¤çº¿ç¨‹ä»£ç ç¤ºä¾‹"></a>3-3 å®ˆæŠ¤çº¿ç¨‹ä»£ç ç¤ºä¾‹</h3><pre><code class="java">public static void main(String[] args) {    System.out.println(&quot;è¿›å…¥ä¸»çº¿ç¨‹&quot; + Thread.currentThread().getName());    DaemonThread daemonThread = new DaemonThread();    Thread thread = new Thread(daemonThread);    thread.setDaemon(true);//è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹    thread.start();    Scanner scanner = new Scanner(System.in);    scanner.next();    // ä¸»çº¿ç¨‹ä¸ºå”¯ä¸€ç”¨æˆ·çº¿ç¨‹    // threadä¸ºå®ˆæŠ¤çº¿ç¨‹    // ä¸»çº¿ç¨‹é€€å‡ºå¯¼è‡´æ•°æ®çš„ä¸å®Œæ•´æ€§    System.out.println(&quot;é€€å‡ºä¸»çº¿ç¨‹&quot; + Thread.currentThread().getName());}</code></pre><p>threadçº¿ç¨‹è¿è¡Œå®Œæˆåç¨‹åºä¸ä¼šç«‹åˆ»ç»ˆæ­¢ï¼Œæ­¤æ—¶threadå®ˆæŠ¤çº¿ç¨‹éœ€ç­‰å¾…mainä¸»ç”¨æˆ·çº¿ç¨‹scannerä¹‹åæ‰ä¼šç»“æŸè¿è¡Œã€‚</p><h3 id="3-4-ä½¿ç”¨jstackç”Ÿæˆçº¿ç¨‹å¿«ç…§"><a href="#3-4-ä½¿ç”¨jstackç”Ÿæˆçº¿ç¨‹å¿«ç…§" class="headerlink" title="3-4 ä½¿ç”¨jstackç”Ÿæˆçº¿ç¨‹å¿«ç…§"></a>3-4 ä½¿ç”¨jstackç”Ÿæˆçº¿ç¨‹å¿«ç…§</h3><p>ä½ç½®ï¼š<code>jdk/bin/jstack.exe</code></p><table><thead><tr><th align="center">ç¨‹åº</th><th align="center">å·¥å…·ä½œç”¨</th></tr></thead><tbody><tr><td align="center">jstack</td><td align="center">ç”ŸæˆJVMçº¿ç¨‹å¿«ç…§</td></tr><tr><td align="center">jstat.exe</td><td align="center">ç›‘æµ‹è™šæ‹Ÿæœºçš„è¿è¡ŒçŠ¶æ€</td></tr><tr><td align="center">jconsole.exe</td><td align="center">Javaç›‘è§†å’Œç®¡ç†æ§åˆ¶å°GUI</td></tr><tr><td align="center">jvisualvm.exe</td><td align="center">ç•Œé¢åŒ–å·¥å±€</td></tr><tr><td align="center">jmap.exe</td><td align="center">ç”Ÿæˆå †å¿«ç…§</td></tr><tr><td align="center">è™šæ‹Ÿæœºçš„è¿è¡ŒçŠ¶æ€ï¼šå†…å­˜çš„ä½¿ç”¨æƒ…å†µã€ç±»åŠ è½½æƒ…å†µã€é”æŒæœ‰çš„æƒ…å†µ</td><td align="center"></td></tr></tbody></table><p><code>jstack</code></p><ul><li>ä½œç”¨ï¼šç”Ÿæˆ<code>JVM</code>å½“å‰æ—¶åˆ»çº¿ç¨‹çš„å¿«ç…§ï¼ˆ<code>threaddump</code>ï¼Œå³å½“å‰è¿›ç¨‹ä¸­æ‰€æœ‰çº¿ç¨‹çš„ä¿¡æ¯ï¼‰</li><li>ç›®çš„ï¼šå¸®åŠ©å®šä½ç¨‹åºé—®é¢˜å‡ºç°çš„åŸå› (æŸ¥æ‰¾ä¸€äº›ç¨‹åºé—®é¢˜)ï¼Œå¦‚é•¿æ—¶é—´åœé¡¿ã€<code>CPU</code>å ç”¨ç‡è¿‡é«˜ã€æ­»é”ã€é˜»å¡ç­‰ï¼›çœ‹å‡ºå“ªäº›æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œå“ªäº›æ˜¯ç”¨æˆ·çº¿ç¨‹</li><li>ä½¿ç”¨ï¼š<code>jstack -l &lt;pid&gt;</code>â€”-å…¶ä¸­<code>&lt;pid&gt;</code>å¯ä»¥é€šè¿‡ä»»åŠ¡æ ç®¡ç†å™¨æŸ¥çœ‹<ol><li>å¯ä»¥é€šè¿‡çº¿ç¨‹ååæ˜¯å¦æœ‰<code>daemon</code>åˆ¤æ–­æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œæœ‰-æ˜¯ã€æ— -å¦</li><li>æŸ¥çœ‹çº¿ç¨‹çš„çŠ¶æ€<code>java.lang.Thread.State</code>å¸®åŠ©å®šä½ç¨‹åºå‡ºç°çš„ä¸€ç³»åˆ—é—®é¢˜(æ­»é”ã€é˜»å¡)</li><li><code>tid</code>ã€<code>nid</code>å¯ä»¥å¸®åŠ©æŸ¥æ‰¾<code>CPU</code>å æœ‰ç‡å¾ˆé«˜çš„çº¿ç¨‹</li><li><code>prio</code>ä»£è¡¨ä¼˜å…ˆçº§</li></ol></li></ul><p>çº¿ç¨‹çŠ¶æ€ï¼š  </p><ul><li><code>New</code>å°šæœªå¯åŠ¨çš„çº¿ç¨‹ï¼ˆåˆ›å»ºï¼‰ï¼›</li><li><code>Runnable</code>åœ¨<code>Java</code>è™šæ‹Ÿæœºä¸­æ‰§è¡Œçš„çº¿ç¨‹ï¼Œå³å°†æˆ–æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼ˆå°±ç»ªï¼Œè¿è¡Œï¼‰ï¼›</li><li><code>Terminated</code>å·²é€€å‡ºçš„çº¿ç¨‹ï¼ˆç»ˆæ­¢ï¼‰ï¼›</li><li><code>Blocked</code>ã€<code>Waiting</code>ã€<code>Timed_Waiting</code>å¯¹åº”é˜»å¡çŠ¶æ€ã€‚<ol><li><code>Blocked</code>ï¼šç­‰å¾…ç›‘è§†å™¨é”å®šçš„çº¿ç¨‹ï¼Œå¦‚è¢«<code>synchronized</code>é˜»å¡çš„çº¿ç¨‹ã€‚</li><li><code>Waiting</code>ï¼šæ— é™æœŸç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç‰¹å®šæ“ä½œçš„çº¿ç¨‹ï¼Œè°ƒç”¨<code>join</code>æ–¹æ³•æ—¶ã€‚</li><li><code>Timed_Waiting</code>ï¼šç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹åœ¨æŒ‡å®šç­‰å¾…æ—¶é—´å†…æ‰§è¡Œæ“ä½œçš„çº¿ç¨‹ï¼Œå¦‚<code>sleep</code>æ–¹æ³•ã€‚</li></ol></li></ul><h2 id="ç¬¬4ç« -è¯¾ç¨‹æ€»ç»“"><a href="#ç¬¬4ç« -è¯¾ç¨‹æ€»ç»“" class="headerlink" title="ç¬¬4ç«  è¯¾ç¨‹æ€»ç»“"></a>ç¬¬4ç«  è¯¾ç¨‹æ€»ç»“</h2><blockquote><p>è¯¾ç¨‹æ€»ç»“</p></blockquote><p>å»ºè®®ï¼šä½¿ç”¨å®ç°<code>Runnable</code>æ¥å£çš„æ–¹å¼åˆ›å»ºçº¿ç¨‹</p><p>è¡¥å……ï¼š</p><ol><li><p>ç¨‹åºä¸­çš„åŒä¸€èµ„æºæŒ‡çš„æ˜¯åŒä¸€ä¸ª<code>Runnable</code>å¯¹è±¡</p><p>å¦‚æœæŠŠå…¶ä»–ç±»çš„å¯¹è±¡ä¹Ÿä½œä¸ºå…±äº«èµ„æºï¼Œåˆ™<code>Thread</code>å’Œ<code>Runnable</code>éƒ½æ˜¯å¯ä»¥ç”¨æ¥å¤„ç†åŒä¸€èµ„æº</p></li><li><p>å®‰å…¨çš„å–ç¥¨ç¨‹åºä¸­éœ€è¦åŠ å…¥åŒæ­¥ï¼ˆ<code>synchronized</code>ï¼‰</p></li></ol><p>Thread vs Runnableï¼Œçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ˆæŠ¤çº¿ç¨‹ï¼Œjstackç”Ÿæˆçº¿ç¨‹å¿«ç…§</p>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>202-æ·±å…¥æµ…å‡ºJavaå¤šçº¿ç¨‹</title>
      <link href="/imooc/202-multi-thread/"/>
      <url>/imooc/202-multi-thread/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://www.imooc.com/learn/202" target="_blank" rel="noopener">https://www.imooc.com/learn/202</a></p><p>ç®€ä»‹ï¼šå¤šçº¿ç¨‹æ˜¯æ—¥å¸¸å¼€å‘ä¸­çš„å¸¸ç”¨çŸ¥è¯†ï¼Œä¹Ÿæ˜¯éš¾ç”¨çŸ¥è¯†ã€‚é€šè¿‡æœ¬è§†é¢‘ï¼Œä½ å¯ä»¥äº†è§£Javaä¸­å¤šçº¿ç¨‹ç›¸å…³çš„åŸºæœ¬æ¦‚å¿µï¼Œå¦‚ä½•åˆ›å»ºï¼Œå¯åŠ¨å’Œåœæ­¢çº¿ç¨‹ï¼Ÿä»€ä¹ˆæ˜¯æ­£ç¡®çš„å¤šçº¿ç¨‹ï¼Œæ€æ ·ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºã€‚åœ¨æŒæ¡åŸºç¡€ä¹‹åï¼Œå°†ä¸ºä½ å±•æœ›è¿›é˜¶è·¯çº¿ï¼Œä¸ºè¿›ä¸€æ­¥çš„å­¦ä¹ æä¾›æ–¹å‘ã€‚</p></blockquote><p>@[TOC]</p><h2 id="ç¬¬1ç« -å¤šçº¿ç¨‹èƒŒæ™¯çŸ¥è¯†ä»‹ç»"><a href="#ç¬¬1ç« -å¤šçº¿ç¨‹èƒŒæ™¯çŸ¥è¯†ä»‹ç»" class="headerlink" title="ç¬¬1ç«  å¤šçº¿ç¨‹èƒŒæ™¯çŸ¥è¯†ä»‹ç»"></a>ç¬¬1ç«  å¤šçº¿ç¨‹èƒŒæ™¯çŸ¥è¯†ä»‹ç»</h2><blockquote><p>æœ¬ç« å°†ä»‹ç»ä¸å¤šçº¿ç¨‹ç¼–ç¨‹ç›¸å…³çš„èƒŒæ™¯æ¦‚å¿µ</p></blockquote><p>è¿›ç¨‹  </p><ol><li><p>è¿›ç¨‹æ˜¯ç¨‹åºï¼ˆä»»åŠ¡ï¼‰çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯åŠ¨æ€æ€§çš„ã€‚</p><p>æ”¾åœ¨ç£ç›˜æ–‡ä»¶ä¸­çš„æ–‡ä»¶å¹¶ä¸æ˜¯è¿›ç¨‹ï¼Œåªæœ‰åœ¨è¿è¡ŒçŠ¶æ€çš„æ‰å¯ç§°ä¹‹ä¸ºè¿›ç¨‹ã€‚</p></li><li><p>æŒæœ‰èµ„æºï¼ˆå…±äº«å†…å­˜ï¼Œå…±äº«æ–‡ä»¶ï¼‰å’Œçº¿ç¨‹ã€‚è¿›ç¨‹æ˜¯èµ„æºå’Œçº¿ç¨‹çš„è½½ä½“</p></li></ol><p>çº¿ç¨‹</p><ol><li>çº¿ç¨‹æ˜¯ç³»ç»Ÿä¸­æœ€å°çš„æ‰§è¡Œå•å…ƒ</li><li>åŒä¸€è¿›ç¨‹ä¸­æœ‰å¤šä¸ªçº¿ç¨‹</li><li>çº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æº</li></ol><p>çº¿ç¨‹çš„äº¤äº’ï¼šå¤šä¸ªçº¿ç¨‹éœ€è¦æ­£ç¡®çš„é€šä¿¡æ‰èƒ½è¿›è¡Œå·¥ä½œã€‚</p><blockquote><p>äº¤äº’æ–¹å¼æœ‰äº’æ–¥å’ŒåŒæ­¥ä¸¤ç§ã€‚</p></blockquote><ul><li><p>äº’æ–¥æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¿è¡Œæ—¶å…¶ä»–çš„çº¿ç¨‹åªèƒ½ç­‰å¾…ï¼Œåªæœ‰åœ¨å½“å‰çº¿ç¨‹å®Œæˆåæ‰å¯ä»¥è¿è¡Œï¼›</p></li><li><p>åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œè¿è¡Œã€‚</p></li></ul><h2 id="ç¬¬2ç« -Java-çº¿ç¨‹åˆä½“éªŒ"><a href="#ç¬¬2ç« -Java-çº¿ç¨‹åˆä½“éªŒ" class="headerlink" title="ç¬¬2ç«  Java çº¿ç¨‹åˆä½“éªŒ"></a>ç¬¬2ç«  Java çº¿ç¨‹åˆä½“éªŒ</h2><blockquote><p>Java è¯­è¨€å±‚é¢å¯¹çº¿ç¨‹çš„æ”¯æŒï¼Œå¦‚ä½•åˆ›å»ºï¼Œå¯åŠ¨å’Œåœæ­¢çº¿ç¨‹ã€‚å¦‚ä½•ä½¿ç”¨å¸¸ç”¨çš„çº¿ç¨‹æ–¹æ³•ã€‚ç”¨éš‹å”æ¼”ä¹‰ç†è§£çº¿ç¨‹çš„ä»£ç </p></blockquote><p>Javaå¯¹çº¿ç¨‹çš„æ”¯æŒä½“ç°åœ¨<code>java.lang</code>çš„åŒ…ä¸‹çš„classç±»<code>Thread</code>å’Œinterfaceæ¥å£<code>Runnable</code></p><p>å…±é€šçš„æ–¹æ³•æ˜¯<code>public void run()</code>ï¼Œä¸ºæˆ‘ä»¬æä¾›çº¿ç¨‹å®é™…å·¥ä½œæ‰§è¡Œçš„ä»£ç </p><p><strong>Threadå¸¸ç”¨æ–¹æ³•ï¼š</strong></p><ol><li><p>çº¿ç¨‹çš„åˆ›å»º  </p><pre><code class="java"> Thread(); Thread(String name); Thread(Runnable target); Thread(Runnable target, String name);</code></pre></li><li><p>çº¿ç¨‹çš„æ–¹æ³•  </p><pre><code class="java"> void start(); // å¯åŠ¨çº¿ç¨‹ã€‚Javaè™šæ‹Ÿæœºè°ƒç”¨è¯¥çº¿ç¨‹çš„run()æ–¹æ³•ã€‚ static void sleep(long millis); // çº¿ç¨‹ä¼‘çœ (æš‚åœæ‰§è¡Œ) ã€‚millisä¼‘çœ çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼Œå¯ä»¥ç²¾ç¡®åˆ°çº³ç§’ã€‚æ­¤æ“ä½œå—åˆ°ç³»ç»Ÿè®¡æ—¶å™¨å’Œè°ƒåº¦ç¨‹åºç²¾åº¦å’Œå‡†ç¡®æ€§çš„å½±å“ã€‚ static void sleep(long millis, int nanos); void join(); // ä½¿å…¶ä»–çº¿ç¨‹ç­‰å¾…å½“å‰çº¿ç¨‹ç»ˆæ­¢ã€‚æŒ‡æ˜å…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…å½“å‰ç»“æŸåæ‰èƒ½è¿è¡Œ void join(long millis); // å‚æ•°è¡¨ç¤ºå…¶ä»–çº¿ç¨‹æœ€é•¿ç­‰å¾…çš„æ—¶é—´ void join(long millis,int nanos); static void yield(); // å½“å‰è¿è¡Œçº¿ç¨‹é‡Šæ”¾å¤„ç†å™¨èµ„æºå¹¶ä¸”é‡æ–°å»ç«äº‰å¤„ç†å™¨èµ„æº</code></pre></li><li><p>è·å–çº¿ç¨‹å¼•ç”¨  </p><pre><code class="java"> static Thread currentThread(); // è¿”å›å½“å‰è¿è¡Œçš„çº¿ç¨‹å¼•ç”¨ï¼ˆé™æ€æ–¹æ³•ï¼Œè¿”å›Threadç±»å‹ï¼‰</code></pre></li><li><p>çº¿ç¨‹çš„ä¿¡æ¯<br> <code>.getName()</code>ï¼šè¿”å›çº¿ç¨‹çš„åå­—</p><p> <code>.setName(String Name)</code>ï¼šæ”¹å˜çº¿ç¨‹çš„åå­—  </p></li></ol><p><strong><code>Thread</code>ç±» å’Œ <code>Runnable</code>æ¥å£çš„åŒºåˆ«ä¸è”ç³»ï¼š</strong>  </p><ol><li><code>Runnable</code>åªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒé‡Œé¢åªæœ‰ä¸€ä¸ª<code>run()</code>æ–¹æ³•ï¼Œæ²¡æœ‰<code>start()</code>æ–¹æ³•ï¼Œ æ‰€ä»¥å³ä½¿å®ç°äº†<code>Runnable</code>æ¥å£ï¼Œé‚£ä¹Ÿæ— æ³•å¯åŠ¨çº¿ç¨‹ï¼Œå¿…é¡»ä¾æ‰˜å…¶ä»–ç±»ã€‚  </li><li><code>Thread</code>ç±»ï¼Œæœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå‚æ•°æ˜¯<code>Runnable</code>å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥é€šè¿‡<code>Thread</code>ç±»æ¥å¯åŠ¨<code>Runnable</code>å®ç°çš„å¤šçº¿ç¨‹ã€‚  </li></ol><p>æ³¨ï¼š</p><ul><li><p>åœ¨åŒä¸€æ—¶é—´å†…åŒä¸€å¤„ç†å™¨æˆ–åŒä¸€ä¸ªæ ¸åªèƒ½è¿è¡Œä¸€æ¡çº¿ç¨‹ï¼Œå½“ä¸€æ¡çº¿ç¨‹ä¼‘çœ ä¹‹åï¼Œå¦ä¸€æ¡çº¿ç¨‹æ‰è·å¾—äº†æˆ‘ä»¬å¤„ç†å™¨çš„æ—¶é—´</p></li><li><p>ä¸€ä¸ª<code>.java</code>æ–‡ä»¶ä¸­å¯ä»¥æœ‰å¤šä¸ªç±»ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ª<code>public</code>ä¿®é¥°çš„ç±»</p></li><li><p><code>Runnable</code>æ¥å£ä¹‹ä¸­æ²¡æœ‰<code>getName()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>Thread</code>çš„é™æ€æ–¹æ³•<code>currentThreat().getName();</code>è·å–è¯¥å¯¹è±¡çš„åå­—ã€‚</p></li><li><p>è‹¥å®ç°<code>Runnable</code>æ¥å£é€šè¿‡<code>Thread.currentThread().getName()</code>æ–¹æ³•è·å–å½“å‰çº¿ç¨‹åç§°ï¼Œç»§æ‰¿<code>Thread</code>ç±»åˆ™<code>getName()</code>æ–¹æ³•è·å–å½“å‰çº¿ç¨‹ã€‚</p></li></ul><h3 id="å®ä¾‹ï¼šéš‹å”æ¼”ä¹‰"><a href="#å®ä¾‹ï¼šéš‹å”æ¼”ä¹‰" class="headerlink" title="å®ä¾‹ï¼šéš‹å”æ¼”ä¹‰"></a>å®ä¾‹ï¼šéš‹å”æ¼”ä¹‰</h3><blockquote><p>å†å²æ˜¯äººæ°‘ç¾¤ä¼—åˆ›å»ºçš„ï¼Œè‹±é›„å¯ä»¥æ¨åŠ¨å†å²çš„å‘å±•  </p></blockquote><p><strong>1. æ¼”å‘˜ç®€ä»‹ï¼š</strong></p><ul><li><p>å†›é˜Ÿ <code>ArmyRunnable</code></p></li><li><p>è‹±é›„ <code>KeyPersonThread</code></p></li><li><p>èˆå° <code>Stage</code>  </p><pre><code class="java">// éš‹å”æ¼”ä¹‰å¤§æˆèˆå°public class Stage extends Thread {    @Override    public void run() {        ArmyRunnable armyTaskOfSuiDynasty = new ArmyRunnable();        ArmyRunnable armyTaskOfArmyOfRevolt = new ArmyRunnable();        //ä½¿ç”¨ Runnable æ¥å£åˆ›å»ºçº¿ç¨‹        Thread armyOfSuiDynasty = new Thread(armyTaskOfSuiDynasty, &quot;éš‹å†›&quot;);        Thread armyOfRevolt = new Thread(armyTaskOfarmyOfRevolt, &quot;å†œæ°‘èµ·ä¹‰å†›&quot;);    }}</code></pre></li></ul><p><strong>2. å†›é˜Ÿï¼š</strong>  </p><ol><li><p>åŠ å…¥<code>join()</code>æ˜¯ä¸ºäº†è®©èˆå°çº¿ç¨‹æœ€ååœæ­¢ã€‚</p><p> å¦‚æœä¸åŠ æœ‰å¯èƒ½èˆå°çº¿ç¨‹ç»“æŸï¼Œå†›é˜Ÿçº¿ç¨‹è¿˜æœªåœæ­¢ï¼Œå°±å¥½æ¯”å¯¼æ¼”å–Šåœï¼Œæ¼”å‘˜è¿˜åœ¨æ¼”ï¼</p><p> å¯ä»¥åœ¨<code>join()</code>åé¢åŠ å…¥æµ‹è¯•è¯­å¥<code>System.out.println(&quot;èˆå°ç»“æŸ!&quot;);</code>ï¼Œç„¶åå»æ‰æˆ–è€…ä¿ç•™<code>join</code>è§‚å¯Ÿæ•ˆæœã€‚</p></li><li><p><code>volatile</code>å…³é”®å­—ä¿è¯äº†çº¿ç¨‹å¯ä»¥æ­£ç¡®åœ°è¯»å–å…¶ä»–çº¿ç¨‹å†™å…¥çš„å€¼ã€‚</p><p> å¦‚æœä¸å†™æˆ<code>volatile</code>ï¼Œç”±äºå¯è§æ€§çš„é—®é¢˜ï¼Œå½“å‰çº¿ç¨‹æœ‰å¯èƒ½è¯»å–ä¸åˆ°è¿™ä¸ªå€¼ //å¯è§æ€§JMMï¼ˆJAVAå†…å­˜æ¨¡å‹ï¼‰happens-beforeåŸåˆ™ã€å¯è§æ€§åŸåˆ™</p><p> ç”¨<code>volatile</code>ä¿®é¥°çš„å˜é‡ï¼Œçº¿ç¨‹åœ¨æ¯æ¬¡ä½¿ç”¨å˜é‡çš„æ—¶å€™ï¼Œéƒ½ä¼šè¯»å–å˜é‡ä¿®æ”¹åçš„å€¼</p></li><li><p><code>Thread.yield();</code>å½“å‰çº¿ç¨‹è®©å‡ºå¤„ç†å™¨æ—¶é—´ï¼Œå…¬å¹³ç«äº‰  </p></li></ol><p><strong>3. å…³é”®å…ˆç”Ÿï¼š</strong>  </p><ol><li><code>start()</code>å¼€å§‹çº¿ç¨‹ã€‚  </li><li><code>sleep()</code>çº¿ç¨‹ä¼‘çœ ã€‚  </li><li><code>yield()</code>è®©å‡ºå½“å‰çº¿ç¨‹çš„æ‰§è¡Œæƒé™ï¼Œéšæœºé€‰æ‹©çº¿ç¨‹æ‰§è¡Œã€‚  </li><li><code>join()</code>ä¼˜å…ˆæ‰§è¡Œè¯¥çº¿ç¨‹ï¼Œå…¶ä»–çº¿ç¨‹(åŒ…æ‹¬ä¸»çº¿ç¨‹main)éƒ½æš‚åœã€‚  </li></ol><h2 id="ç¬¬3ç« -Java-çº¿ç¨‹çš„æ­£ç¡®åœæ­¢"><a href="#ç¬¬3ç« -Java-çº¿ç¨‹çš„æ­£ç¡®åœæ­¢" class="headerlink" title="ç¬¬3ç«  Java çº¿ç¨‹çš„æ­£ç¡®åœæ­¢"></a>ç¬¬3ç«  Java çº¿ç¨‹çš„æ­£ç¡®åœæ­¢</h2><blockquote><p>æœ¬ç« è®¨è®ºå¦‚ä½•æ­£ç¡®çš„åœæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Œæ—¢è¦çº¿ç¨‹åœå¾—äº†ï¼Œè¿˜å¾—çº¿ç¨‹åœå¾—å¥½ã€‚</p></blockquote><ol><li><p>é”™è¯¯çš„åœæ­¢çº¿ç¨‹æ–¹æ³•ï¼š  </p><ol><li><p><code>stop()</code>æ–¹æ³•ä¼šå¯¼è‡´çº¿ç¨‹æˆ›ç„¶è€Œæ­¢ï¼Œæˆ‘ä»¬ä¸æ¸…æ¥šçº¿ç¨‹å®Œæˆäº†ä»€ä¹ˆï¼Œæ²¡å®Œæˆä»€ä¹ˆï¼Œä¹Ÿæ²¡æœ‰æ—¶é—´æ¥å®Œæˆå¯¹åº”çš„çº¿ç¨‹è¿è¡Œçš„æ¸…ç†å·¥ä½œã€‚</p></li><li><p><code>interrupt()</code>æ–¹æ³•åªèƒ½è®¾ç½®<code>interrupt</code>æ ‡å¿—ä½ï¼ˆä¸”åœ¨çº¿ç¨‹é˜»å¡æƒ…å†µä¸‹ï¼Œæ ‡å¿—ä½ä¼šè¢«æ¸…é™¤ï¼Œæ›´æ— æ³•è®¾ç½®ä¸­æ–­æ ‡å¿—ä½ï¼‰ï¼Œæ— æ³•åœæ­¢çº¿ç¨‹</p><blockquote><ol><li><code>Interrupted</code> ç›¸å½“äº æ——æ ‡ (isInterrupted ==&gt;true false) <ol start="2"><li>çº¿ç¨‹ä¸­ä½¿ç”¨<code>sleep</code>ç­‰æ–¹æ³•é€ æˆçº¿ç¨‹å µå¡æ—¶ï¼Œ æ ‡å¿—ä½è¢«æ¸…é™¤ï¼Œ<code>Interrupted</code>æ–¹å¼æ— æ•ˆåŒæ—¶æŠ›å‡º<code>InterruptedException</code>ï¼ˆä¸­æ–­å¼‚å¸¸ï¼‰</li><li><code>interrupt</code>æ–¹æ³•æ˜¯ç”¨æ¥å”¤é†’è¢«é˜»å¡çš„çº¿ç¨‹çš„ã€‚å¦‚æœçº¿ç¨‹ä½¿ç”¨äº†<code>wait</code>, <code>sleep</code>, <code>join</code>æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä½¿ç”¨<code>interrupt</code>æ–¹æ³•ä¼šç»ˆæ­¢è¿™ç§çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹çš„<code>sleep</code>ç­‰æ–¹æ³•ä¸‹é¢çš„<code>catch</code>è¯­å¥å°±ä¼šæ¥æ”¶åˆ°è¿™ä¸ªæ‰“æ–­ï¼Œä»è€Œå¯åŠ¨çº¿ç¨‹ï¼Œç»§ç»­åšè¦åšçš„äº‹æƒ…ã€‚å¦‚æœçº¿ç¨‹åœ¨é˜»å¡ä¹‹å‰ä½¿ç”¨<code>interrupt</code>æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨é˜»å¡çš„æ—¶å€™ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶æŠŠä¸­æ–­æ ‡å¿—ä½è®¾ç½®æˆ<code>false</code>ã€‚</li></ol></li></ol></blockquote></li></ol></li><li><p>æ­£ç¡®çš„åœæ­¢çº¿ç¨‹æ–¹æ³•ï¼š</p><p> åœ¨çº¿ç¨‹æ‰§è¡Œä¸­è®¾ç½®çŠ¶æ€æ ‡è¯†ï¼Œé€šè¿‡æ§åˆ¶æ­¤çŠ¶æ€æ ‡è¯†ï¼Œæ¥æ§åˆ¶çº¿ç¨‹çš„æ­£å¸¸å®Œæ•´çš„ç»“æŸã€‚</p><p> å¦å¤–ï¼Œ<code>volatile</code>å…³é”®å­—æ˜¯ä¿è¯æ‰€æœ‰å…¶ä»–çº¿ç¨‹é‡Œçš„å˜é‡çš„èµ‹å€¼éƒ½èƒ½åŒæ­¥åˆ°å½“å‰å†…å­˜é‡Œå˜é‡çš„å€¼ã€‚</p><p> è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼šçº¿ç¨‹æœ‰æœºä¼šä½¿å¾—ä¸€ä¸ªä¸šåŠ¡æ­¥éª¤è¢«å®Œæ•´åœ°æ‰§è¡Œï¼Œåœ¨æ‰§è¡Œå®Œä¸šåŠ¡æ­¥éª¤åæœ‰å……åˆ†çš„æ—¶é—´å»åšä»£ç çš„æ¸…ç†å·¥ä½œï¼Œä½¿å¾—çº¿ç¨‹ä»£ç åœ¨å®é™…ä¸­æ›´å®‰å…¨</p></li></ol><h2 id="ç¬¬4ç« -çº¿ç¨‹äº¤äº’"><a href="#ç¬¬4ç« -çº¿ç¨‹äº¤äº’" class="headerlink" title="ç¬¬4ç«  çº¿ç¨‹äº¤äº’"></a>ç¬¬4ç«  çº¿ç¨‹äº¤äº’</h2><blockquote><p>äº‰ç”¨æ¡ä»¶ï¼Œçº¿ç¨‹çš„äº¤äº’ï¼ŒåŠæ­»é”çš„æˆå› åŠé¢„é˜²</p></blockquote><p><strong>äº‰ç”¨æ¡ä»¶ï¼š</strong></p><ol><li>å®šä¹‰ï¼šå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶å…±äº«è®¿é—®åŒä¸€æ•°æ®ï¼ˆå†…å­˜åŒºåŸŸï¼‰æ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å°è¯•æ“ä½œè¯¥æ•°æ®ï¼Œä»è€Œå¯¼è‡´æ•°æ®è¢«ç ´åï¼ˆcorrupted)ï¼Œè¿™ç§ç°è±¡ç§°ä¸ºäº‰ç”¨æ¡ä»¶</li><li>åŸå› ï¼šæ¯ä¸ªçº¿ç¨‹åœ¨æ“ä½œæ•°æ®æ—¶ï¼Œä¼šå…ˆå°†æ•°æ®åˆå€¼è¯»ã€å–åˆ°è‡ªå·±è·å¾—çš„å†…å­˜ä¸­ã€‘ï¼Œç„¶ååœ¨å†…å­˜ä¸­è¿›è¡Œè¿ç®—åï¼Œé‡æ–°èµ‹å€¼åˆ°æ•°æ®ã€‚ </li><li>äº‰ç”¨æ¡ä»¶ï¼šçº¿ç¨‹1åœ¨è¿˜ã€æœªé‡æ–°å°†å€¼èµ‹å›å»æ—¶ã€‘ï¼Œçº¿ç¨‹1é˜»å¡ï¼Œçº¿ç¨‹2å¼€å§‹è®¿é—®è¯¥æ•°æ®ï¼Œç„¶åè¿›è¡Œäº†ä¿®æ”¹ï¼Œä¹‹åè¢«é˜»å¡çš„çº¿ç¨‹1å†è·å¾—èµ„æºï¼Œè€Œå°†ä¹‹å‰è®¡ç®—çš„å€¼è¦†ç›–æ‰çº¿ç¨‹2æ‰€ä¿®æ”¹çš„å€¼ï¼Œå°±å‡ºç°äº†æ•°æ®ä¸¢å¤±æƒ…å†µ</li></ol><p><strong>äº’æ–¥ä¸åŒæ­¥ï¼š</strong></p><ol><li>äº’æ–¥<br>åŒä¸€æ—¶é—´ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…³é”®æ•°æ®æˆ–ä¸´ç•ŒåŒº</li><li>åŒæ­¥<br>æ˜¯ä¸€ç§é€šä¿¡æœºåˆ¶ï¼Œä¸€ä¸ªçº¿ç¨‹æ“ä½œå®Œæˆåï¼Œä»¥æŸç§æ–¹å¼é€šçŸ¥å…¶ä»–çº¿ç¨‹</li><li>å®ç°æ–¹æ³•<blockquote><ol><li>ã€äº’æ–¥ã€‘æ„å»ºé”å¯¹è±¡<code>private final Object lockObj = new Object();</code></li><li>é€šè¿‡<code>synchronized(lockObj){  äº’æ–¥çš„ä»£ç å—  }</code>åŠ é”æ“ä½œã€‚åŠ é”æ“ä½œä¼šå¼€é”€ç³»ç»Ÿèµ„æºï¼Œé™ä½æ•ˆç‡</li><li>åœ¨æŸçº¿ç¨‹çš„æ¡ä»¶ä¸æ»¡è¶³ä»»åŠ¡æ—¶ï¼Œä½¿ç”¨<code>lockObj.wait();</code>å¯¹çº¿ç¨‹è¿›è¡Œé˜»æŒ¡ï¼Œé˜²æ­¢å…¶ç»§ç»­ç«äº‰<code>CPU</code>èµ„æºï¼Œæ»ç•™åœ¨<code>wait set</code>ä¸­ï¼Œç­‰å¾…å”¤é†’ï¼Œã€å”¤é†’åç»§ç»­å®Œæˆä¸šåŠ¡ã€‘</li><li>ã€åŒæ­¥ã€‘åœ¨æŸä¸€ä»£ç æ­£ç¡®æ‰§è¡Œå®Œä¸šåŠ¡åï¼Œé€šè¿‡<code>lockObj.notifyAll()</code>å”¤é†’æ‰€æœ‰åœ¨<code>lockObj</code>å¯¹è±¡ç­‰å¾…çš„çº¿ç¨‹</li></ol></blockquote></li></ol><ul><li><p>äº’æ–¥ï¼šå…³é”®æ•°æ®åœ¨ä¸€ä¸ªæ—¶é—´è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚</p><p>äº’æ–¥çš„å®ç°ï¼š<code>private final Object lockObj = new Object()</code>ã€<code>synchronized(intrinsic lock) {}</code>  </p></li><li><p>åŒæ­¥ï¼šä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„ä¸€ç§äº¤äº’çš„æ“ä½œï¼ˆä¸€ä¸ªçº¿ç¨‹å‘å‡ºæ¶ˆæ¯å¦å¤–ä¸€ä¸ªçº¿ç¨‹å“åº”ï¼‰</p><p>åŒæ­¥çš„å®ç°ï¼š<code>wait();</code>ã€<code>notify();</code>ã€<code>notifyAll();</code>ï¼Œéƒ½æ˜¯å±äºJavaä¸­çš„<code>Object</code>å¯¹è±¡çš„æˆå‘˜å‡½æ•°</p></li></ul><p><strong>æ³¨ï¼š</strong> è°ƒç”¨<code>wait();</code>å’Œ<code>notifyAll();</code>æ–¹æ³•ä½¿çº¿ç¨‹è¿›å…¥ç­‰å¾…æˆ–è€…å”¤é†’ä¸æ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹çš„åŒä¸€æ¬¡æ“ä½œä¸­æ‰§è¡Œçš„ï¼Œå½“æ“ä½œç»“æŸï¼Œå”¤é†’äº†æ‰€æœ‰çš„ç­‰å¾…çº¿ç¨‹ä¹‹åï¼Œçº¿ç¨‹åˆå°†æœ‰ç€å…¬å¹³çš„æœºä¼šç«äº‰CPUèµ„æºã€‚  </p><p><code>wait set</code>ç±»ä¼¼äºçº¿ç¨‹çš„ä¼‘æ¯å®¤ï¼Œè®¿é—®å…±äº«æ•°æ®çš„ä»£ç ç§°ä¸ºä¸´ç•ŒåŒº<code>critical section</code>ã€‚<br>ä¸€ä¸ªçº¿ç¨‹è·å–é”ï¼Œç„¶åè¿›å…¥ä¸´ç•ŒåŒº,å‘ç°æŸäº›æ¡ä»¶ä¸æ»¡è¶³ï¼Œç„¶åè°ƒç”¨é”å¯¹è±¡ä¸Šçš„<code>wait()</code>æ–¹æ³•ï¼Œç„¶åçº¿ç¨‹é‡Šæ”¾æ‰é”èµ„æºï¼Œè¿›å…¥é”å¯¹è±¡ä¸Šçš„<code>wait set</code>ã€‚å…¶ä»–çº¿ç¨‹å¯ä»¥è·å–é”èµ„æºï¼Œç„¶åæ‰§è¡Œï¼Œå®Œäº†ä»¥åè°ƒç”¨<code>notify()/notifyAll()</code>ï¼Œé€šçŸ¥é”å¯¹è±¡ä¸Šçš„ç­‰å¾…çº¿ç¨‹ã€‚  </p><h2 id="ç¬¬5ç« -è¿›é˜¶å±•æœ›"><a href="#ç¬¬5ç« -è¿›é˜¶å±•æœ›" class="headerlink" title="ç¬¬5ç«  è¿›é˜¶å±•æœ›"></a>ç¬¬5ç«  è¿›é˜¶å±•æœ›</h2><blockquote><p>ç®€å•ä»‹ç» Java å¹¶å‘ç›¸å…³çš„ç±»ï¼ŒåŠå¸¸ç”¨çš„å¤šçº¿ç¨‹ç¼–ç¨‹æ¨¡å‹</p></blockquote><p>è¦ç‚¹å›é¡¾ï¼š</p><ol><li>çº¿ç¨‹å¦‚ä½•åˆ›å»ºä»¥åŠçº¿ç¨‹çš„åŸºæœ¬æ¦‚å¿µ</li><li>å¯è§æ€§ä»¥åŠ<code>volatile</code>å…³é”®å­—</li><li>äº‰ç”¨æ¡ä»¶</li><li>å¦‚ä½•é€šè¿‡<code>synchronized</code>è®©çº¿ç¨‹çš„äº’æ–¥</li><li>å¦‚ä½•é€šè¿‡<code>wait/notify</code>ã€<code>notifyAll</code>è®©çº¿ç¨‹åŒæ­¥</li></ol><p><strong>å±•æœ›ï¼š</strong></p><ol><li>Java Memory Mode:  <ul><li>JMMæè¿°äº†javaçº¿ç¨‹å¦‚ä½•é€šè¿‡å†…å­˜è¿›è¡Œäº¤äº’</li><li>äº†è§£happens-before</li><li>synchronized,volatile &amp; final</li></ul></li><li>Locks % Conditionï¼š<ul><li>é”æœºåˆ¶å’Œç­‰å¾…æ¡ä»¶çš„é«˜å±‚å®ç°</li><li>java.util.concurrent.locks</li></ul></li><li>çº¿ç¨‹å®‰å…¨æ€§<ul><li>åŸå­æ€§ä¸å¯è§æ€§</li><li>java.util.concurrent.atomic</li><li>synchronized &amp; volatile</li><li>DeadLocks(æ­»é”)</li></ul></li><li>å¤šçº¿ç¨‹å¸¸ç”¨çš„äº¤äº’æ¨¡å‹<ul><li>Producer-Consumeræ¨¡å‹</li><li>Read-Write Lockæ¨¡å‹</li><li>Futureæ¨¡å‹</li><li>Worker Threadæ¨¡å‹</li><li>äº†è§£å“ªäº›ç±»å®ç°äº†è¿™äº›æ¨¡å‹å¯ä»¥ç”¨æ¥ç›´æ¥ä½¿ç”¨</li></ul></li><li>Java5ä¸­å¹¶å‘ç¼–ç¨‹å·¥å…·ï¼š<ul><li>java.util.concurrent</li><li>çº¿ç¨‹æ± ExecutorService</li><li>Callable &amp; Future</li><li>BlockingQueue</li></ul></li><li>æ¨èä¹¦æœ¬<ul><li>CoreJava</li><li>Java Concurrency In Practice</li></ul></li></ol><p><strong>Javaå¤šçº¿ç¨‹ç‰¹æ€§ï¼š</strong></p><ol><li><p>åŸå­æ€§ï¼š<code>Java</code>å†…å­˜æ¨¡å‹åªä¿è¯äº†åŸºæœ¬è¯»å–å’Œèµ‹å€¼æ˜¯åŸå­æ€§æ“ä½œï¼Œå¦‚æœè¦å®ç°æ›´å¤§èŒƒå›´æ“ä½œçš„åŸå­æ€§ï¼Œå¯ä»¥é€šè¿‡<code>synchronized</code>å’Œ<code>Lock</code>æ¥å®ç°ã€‚ç”±äº<code>synchronized</code>å’Œ<code>Lock</code>èƒ½å¤Ÿä¿è¯ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥ä»£ç å—ï¼Œé‚£ä¹ˆè‡ªç„¶å°±ä¸å­˜åœ¨åŸå­æ€§é—®é¢˜äº†ï¼Œä»è€Œä¿è¯äº†åŸå­æ€§ã€‚</p></li><li><p>å¯è§æ€§ï¼šå¯¹äºå¯è§æ€§ï¼Œ<code>Java</code>æä¾›äº†<code>volatile</code>å…³é”®å­—æ¥ä¿è¯å¯è§æ€§ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«<code>volatile</code>ä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚è€Œæ™®é€šçš„å…±äº«å˜é‡ä¸èƒ½ä¿è¯å¯è§æ€§ï¼Œå› ä¸ºæ™®é€šå…±äº«å˜é‡è¢«ä¿®æ”¹ä¹‹åï¼Œä»€ä¹ˆæ—¶å€™è¢«å†™å…¥ä¸»å­˜æ˜¯ä¸ç¡®å®šçš„ï¼Œå½“å…¶ä»–çº¿ç¨‹å»è¯»å–æ—¶ï¼Œæ­¤æ—¶å†…å­˜ä¸­å¯èƒ½è¿˜æ˜¯åŸæ¥çš„æ—§å€¼ï¼Œå› æ­¤æ— æ³•ä¿è¯å¯è§æ€§ã€‚</p><p>å¦å¤–ï¼Œé€šè¿‡<code>synchronized</code>å’Œ<code>Lock</code>ä¹Ÿèƒ½å¤Ÿä¿è¯å¯è§æ€§ï¼Œ<code>synchronized</code>å’Œ<code>Lock</code>èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å–é”ç„¶åæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œå¹¶ä¸”åœ¨é‡Šæ”¾é”ä¹‹å‰ä¼šå°†å¯¹å˜é‡çš„ä¿®æ”¹åˆ·æ–°åˆ°ä¸»å­˜å½“ä¸­ã€‚å› æ­¤å¯ä»¥ä¿è¯å¯è§æ€§ã€‚</p></li><li><p>æœ‰åºæ€§ï¼šåœ¨<code>Java</code>å†…å­˜æ¨¡å‹ä¸­ï¼Œå…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯é‡æ’åºè¿‡ç¨‹ä¸ä¼šå½±å“åˆ°å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œï¼Œå´ä¼šå½±å“åˆ°å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚</p><p> åœ¨<code>Java</code>é‡Œé¢ï¼Œå¯ä»¥é€šè¿‡<code>volatile</code>å…³é”®å­—æ¥ä¿è¯ä¸€å®šçš„â€œæœ‰åºæ€§â€ã€‚å¦å¤–å¯ä»¥é€šè¿‡<code>synchronized</code>å’Œ<code>Lock</code>æ¥ä¿è¯æœ‰åºæ€§ï¼Œå¾ˆæ˜¾ç„¶ï¼Œ<code>synchronized</code>å’Œ<code>Lock</code>ä¿è¯æ¯ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œç›¸å½“äºæ˜¯è®©çº¿ç¨‹é¡ºåºæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè‡ªç„¶å°±ä¿è¯äº†æœ‰åºæ€§ã€‚</p><p> å¦å¤–ï¼Œ<code>Java</code>å†…å­˜æ¨¡å‹å…·å¤‡ä¸€äº›å…ˆå¤©çš„â€œæœ‰åºæ€§â€ï¼Œå³ä¸éœ€è¦é€šè¿‡ä»»ä½•æ‰‹æ®µå°±èƒ½å¤Ÿå¾—åˆ°ä¿è¯çš„æœ‰åºæ€§ï¼Œè¿™ä¸ªé€šå¸¸ä¹Ÿç§°ä¸º<code>happens-before</code>åŸåˆ™ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œæ¬¡åºæ— æ³•ä»<code>happens-before</code>åŸåˆ™æ¨å¯¼å‡ºæ¥ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä¸èƒ½ä¿è¯å®ƒä»¬çš„æœ‰åºæ€§ï¼Œè™šæ‹Ÿæœºå¯ä»¥éšæ„åœ°å¯¹å®ƒä»¬è¿›è¡Œé‡æ’åºã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ…•è¯¾ç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
